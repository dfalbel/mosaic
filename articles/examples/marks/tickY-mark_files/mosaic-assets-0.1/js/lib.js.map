{"version":3,"file":"lib.js","sources":["../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/throttle.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/MosaicClient.js","../../lib/node_modules/@uwdata/flechette/src/constants.js","../../lib/node_modules/@uwdata/flechette/src/util/arrays.js","../../lib/node_modules/@uwdata/flechette/src/util/objects.js","../../lib/node_modules/@uwdata/flechette/src/data-types.js","../../lib/node_modules/@uwdata/flechette/src/util/numbers.js","../../lib/node_modules/@uwdata/flechette/src/util/strings.js","../../lib/node_modules/@uwdata/flechette/src/util/read.js","../../lib/node_modules/@uwdata/flechette/src/util/struct.js","../../lib/node_modules/@uwdata/flechette/src/batch.js","../../lib/node_modules/@uwdata/flechette/src/column.js","../../lib/node_modules/@uwdata/flechette/src/table.js","../../lib/node_modules/@uwdata/flechette/src/batch-type.js","../../lib/node_modules/@uwdata/flechette/src/decode/block.js","../../lib/node_modules/@uwdata/flechette/src/decode/record-batch.js","../../lib/node_modules/@uwdata/flechette/src/decode/dictionary-batch.js","../../lib/node_modules/@uwdata/flechette/src/decode/data-type.js","../../lib/node_modules/@uwdata/flechette/src/decode/metadata.js","../../lib/node_modules/@uwdata/flechette/src/decode/schema.js","../../lib/node_modules/@uwdata/flechette/src/decode/message.js","../../lib/node_modules/@uwdata/flechette/src/decode/decode-ipc.js","../../lib/node_modules/@uwdata/flechette/src/decode/table-from-ipc.js","../../lib/node_modules/@uwdata/flechette/src/encode/schema.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/decode-ipc.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/connectors/socket.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/constants.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/node.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/literal.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/param.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/function.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/util/function.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/util/string.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/window.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/column-ref.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/column-param.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/util/type-check.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/column.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/verbatim.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/literal.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/table-ref.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/table-ref.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/util/ast.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/aggregate.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/between-op.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/binary-op.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/case.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/cast.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/fragment.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/sample.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/select.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/with.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/query.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/from.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/in-op.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/interval.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/list.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/logical-op.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/order-by.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/unary-op.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/unnest.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/ast/window-frame.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/aggregate.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/case.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/cast.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/cte.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/interval.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/datetime.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/list.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/numeric.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/operators.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/order-by.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/spatial.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/sql-template-tag.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/string.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/unnest.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/util.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/window.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/functions/window-frame.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/visit/recurse.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/visit/rewrite.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/visit/walk.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/visit/visitors.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/load/create.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/load/extension.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/load/sql-from.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/load/load.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/bin-1d.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/bin-2d.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/util/bin-step.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/util/time-interval.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/bin-date.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/util/identity.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/scales.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/bin-histogram.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/bin-linear-1d.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/bin-linear-2d.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/line-density.js","../../lib/node_modules/@uwdata/mosaic-sql/dist/src/transforms/m4.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/hash.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/preagg/sufficient-statistics.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/preagg/preagg-columns.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/preagg/PreAggregator.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/void-logger.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/query-result.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/QueryConsolidator.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/cache.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/priority-queue.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/QueryManager.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/Coordinator.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/make-client.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/AsyncDispatch.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/distinct.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/Param.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/Selection.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/connectors/rest.js","../../lib/node_modules/tslib/tslib.es6.mjs","../../lib/node_modules/apache-arrow/util/utf8.mjs","../../lib/node_modules/apache-arrow/util/compat.mjs","../../lib/node_modules/apache-arrow/util/buffer.mjs","../../lib/node_modules/apache-arrow/io/adapters.mjs","../../lib/node_modules/apache-arrow/fb/metadata-version.mjs","../../lib/node_modules/apache-arrow/fb/union-mode.mjs","../../lib/node_modules/apache-arrow/fb/precision.mjs","../../lib/node_modules/apache-arrow/fb/date-unit.mjs","../../lib/node_modules/apache-arrow/fb/time-unit.mjs","../../lib/node_modules/apache-arrow/fb/interval-unit.mjs","../../lib/node_modules/flatbuffers/mjs/constants.js","../../lib/node_modules/flatbuffers/mjs/utils.js","../../lib/node_modules/flatbuffers/mjs/encoding.js","../../lib/node_modules/flatbuffers/mjs/byte-buffer.js","../../lib/node_modules/flatbuffers/mjs/builder.js","../../lib/node_modules/apache-arrow/fb/body-compression-method.mjs","../../lib/node_modules/apache-arrow/fb/compression-type.mjs","../../lib/node_modules/apache-arrow/fb/body-compression.mjs","../../lib/node_modules/apache-arrow/fb/buffer.mjs","../../lib/node_modules/apache-arrow/fb/field-node.mjs","../../lib/node_modules/apache-arrow/fb/record-batch.mjs","../../lib/node_modules/apache-arrow/fb/dictionary-batch.mjs","../../lib/node_modules/apache-arrow/fb/endianness.mjs","../../lib/node_modules/apache-arrow/fb/dictionary-kind.mjs","../../lib/node_modules/apache-arrow/fb/int.mjs","../../lib/node_modules/apache-arrow/fb/dictionary-encoding.mjs","../../lib/node_modules/apache-arrow/fb/key-value.mjs","../../lib/node_modules/apache-arrow/fb/binary.mjs","../../lib/node_modules/apache-arrow/fb/bool.mjs","../../lib/node_modules/apache-arrow/fb/date.mjs","../../lib/node_modules/apache-arrow/fb/decimal.mjs","../../lib/node_modules/apache-arrow/fb/duration.mjs","../../lib/node_modules/apache-arrow/fb/fixed-size-binary.mjs","../../lib/node_modules/apache-arrow/fb/fixed-size-list.mjs","../../lib/node_modules/apache-arrow/fb/floating-point.mjs","../../lib/node_modules/apache-arrow/fb/interval.mjs","../../lib/node_modules/apache-arrow/fb/large-binary.mjs","../../lib/node_modules/apache-arrow/fb/large-utf8.mjs","../../lib/node_modules/apache-arrow/fb/list.mjs","../../lib/node_modules/apache-arrow/fb/map.mjs","../../lib/node_modules/apache-arrow/fb/null.mjs","../../lib/node_modules/apache-arrow/fb/struct-.mjs","../../lib/node_modules/apache-arrow/fb/time.mjs","../../lib/node_modules/apache-arrow/fb/timestamp.mjs","../../lib/node_modules/apache-arrow/fb/union.mjs","../../lib/node_modules/apache-arrow/fb/utf8.mjs","../../lib/node_modules/apache-arrow/fb/type.mjs","../../lib/node_modules/apache-arrow/fb/field.mjs","../../lib/node_modules/apache-arrow/fb/schema.mjs","../../lib/node_modules/apache-arrow/fb/message-header.mjs","../../lib/node_modules/apache-arrow/enum.mjs","../../lib/node_modules/apache-arrow/util/pretty.mjs","../../lib/node_modules/apache-arrow/util/bigint.mjs","../../lib/node_modules/apache-arrow/util/bn.mjs","../../lib/node_modules/apache-arrow/type.mjs","../../lib/node_modules/apache-arrow/visitor.mjs","../../lib/node_modules/apache-arrow/util/math.mjs","../../lib/node_modules/apache-arrow/visitor/set.mjs","../../lib/node_modules/apache-arrow/row/struct.mjs","../../lib/node_modules/apache-arrow/visitor/get.mjs","../../lib/node_modules/apache-arrow/row/map.mjs","../../lib/node_modules/apache-arrow/util/vector.mjs","../../lib/node_modules/apache-arrow/util/bit.mjs","../../lib/node_modules/apache-arrow/data.mjs","../../lib/node_modules/apache-arrow/util/chunk.mjs","../../lib/node_modules/apache-arrow/visitor/indexof.mjs","../../lib/node_modules/apache-arrow/visitor/iterator.mjs","../../lib/node_modules/apache-arrow/vector.mjs","../../lib/node_modules/apache-arrow/fb/block.mjs","../../lib/node_modules/apache-arrow/fb/footer.mjs","../../lib/node_modules/apache-arrow/schema.mjs","../../lib/node_modules/apache-arrow/ipc/metadata/file.mjs","../../lib/node_modules/apache-arrow/io/interfaces.mjs","../../lib/node_modules/apache-arrow/io/stream.mjs","../../lib/node_modules/apache-arrow/io/file.mjs","../../lib/node_modules/apache-arrow/util/int.mjs","../../lib/node_modules/apache-arrow/visitor/vectorloader.mjs","../../lib/node_modules/apache-arrow/visitor/typecomparator.mjs","../../lib/node_modules/apache-arrow/util/recordbatch.mjs","../../lib/node_modules/apache-arrow/table.mjs","../../lib/node_modules/apache-arrow/recordbatch.mjs","../../lib/node_modules/apache-arrow/fb/message.mjs","../../lib/node_modules/apache-arrow/visitor/typeassembler.mjs","../../lib/node_modules/apache-arrow/ipc/metadata/json.mjs","../../lib/node_modules/apache-arrow/ipc/metadata/message.mjs","../../lib/node_modules/apache-arrow/ipc/message.mjs","../../lib/node_modules/apache-arrow/ipc/reader.mjs","../../lib/node_modules/apache-arrow/visitor/vectorassembler.mjs","../../lib/node_modules/apache-arrow/ipc/writer.mjs","../../lib/node_modules/apache-arrow/ipc/serialization.mjs","../../lib/node_modules/@duckdb/duckdb-wasm/dist/duckdb-browser.mjs","../../lib/node_modules/@uwdata/mosaic-core/dist/src/connectors/wasm.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/SelectionClause.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/is-arrow-table.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/synchronizer.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/to-data-columns.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/js-type.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/field-info.js","../../lib/node_modules/@uwdata/mosaic-core/dist/src/util/is-activatable.js","../../lib/node_modules/@uwdata/mosaic-plot/src/symbols.js","../../lib/node_modules/d3-array/src/ascending.js","../../lib/node_modules/d3-array/src/descending.js","../../lib/node_modules/d3-array/src/bisector.js","../../lib/node_modules/d3-array/src/number.js","../../lib/node_modules/d3-array/src/bisect.js","../../lib/node_modules/d3-array/src/blur.js","../../lib/node_modules/d3-array/src/count.js","../../lib/node_modules/d3-array/src/cross.js","../../lib/node_modules/d3-array/src/cumsum.js","../../lib/node_modules/d3-array/src/variance.js","../../lib/node_modules/d3-array/src/deviation.js","../../lib/node_modules/d3-array/src/extent.js","../../lib/node_modules/d3-array/src/fsum.js","../../lib/node_modules/internmap/src/index.js","../../lib/node_modules/d3-array/src/identity.js","../../lib/node_modules/d3-array/src/group.js","../../lib/node_modules/d3-array/src/permute.js","../../lib/node_modules/d3-array/src/sort.js","../../lib/node_modules/d3-array/src/groupSort.js","../../lib/node_modules/d3-array/src/ticks.js","../../lib/node_modules/d3-array/src/nice.js","../../lib/node_modules/d3-array/src/threshold/sturges.js","../../lib/node_modules/d3-array/src/max.js","../../lib/node_modules/d3-array/src/maxIndex.js","../../lib/node_modules/d3-array/src/min.js","../../lib/node_modules/d3-array/src/minIndex.js","../../lib/node_modules/d3-array/src/quickselect.js","../../lib/node_modules/d3-array/src/greatest.js","../../lib/node_modules/d3-array/src/quantile.js","../../lib/node_modules/d3-array/src/threshold/freedmanDiaconis.js","../../lib/node_modules/d3-array/src/threshold/scott.js","../../lib/node_modules/d3-array/src/mean.js","../../lib/node_modules/d3-array/src/median.js","../../lib/node_modules/d3-array/src/merge.js","../../lib/node_modules/d3-array/src/mode.js","../../lib/node_modules/d3-array/src/pairs.js","../../lib/node_modules/d3-array/src/range.js","../../lib/node_modules/d3-array/src/rank.js","../../lib/node_modules/d3-array/src/least.js","../../lib/node_modules/d3-array/src/sum.js","../../lib/node_modules/d3-array/src/reverse.js","../../lib/node_modules/d3-axis/src/identity.js","../../lib/node_modules/d3-axis/src/axis.js","../../lib/node_modules/d3-dispatch/src/dispatch.js","../../lib/node_modules/d3-selection/src/namespaces.js","../../lib/node_modules/d3-selection/src/namespace.js","../../lib/node_modules/d3-selection/src/creator.js","../../lib/node_modules/d3-selection/src/selector.js","../../lib/node_modules/d3-selection/src/selection/select.js","../../lib/node_modules/d3-selection/src/array.js","../../lib/node_modules/d3-selection/src/selectorAll.js","../../lib/node_modules/d3-selection/src/selection/selectAll.js","../../lib/node_modules/d3-selection/src/matcher.js","../../lib/node_modules/d3-selection/src/selection/selectChild.js","../../lib/node_modules/d3-selection/src/selection/selectChildren.js","../../lib/node_modules/d3-selection/src/selection/filter.js","../../lib/node_modules/d3-selection/src/selection/sparse.js","../../lib/node_modules/d3-selection/src/selection/enter.js","../../lib/node_modules/d3-selection/src/constant.js","../../lib/node_modules/d3-selection/src/selection/data.js","../../lib/node_modules/d3-selection/src/selection/exit.js","../../lib/node_modules/d3-selection/src/selection/join.js","../../lib/node_modules/d3-selection/src/selection/merge.js","../../lib/node_modules/d3-selection/src/selection/order.js","../../lib/node_modules/d3-selection/src/selection/sort.js","../../lib/node_modules/d3-selection/src/selection/call.js","../../lib/node_modules/d3-selection/src/selection/nodes.js","../../lib/node_modules/d3-selection/src/selection/node.js","../../lib/node_modules/d3-selection/src/selection/size.js","../../lib/node_modules/d3-selection/src/selection/empty.js","../../lib/node_modules/d3-selection/src/selection/each.js","../../lib/node_modules/d3-selection/src/selection/attr.js","../../lib/node_modules/d3-selection/src/window.js","../../lib/node_modules/d3-selection/src/selection/style.js","../../lib/node_modules/d3-selection/src/selection/property.js","../../lib/node_modules/d3-selection/src/selection/classed.js","../../lib/node_modules/d3-selection/src/selection/text.js","../../lib/node_modules/d3-selection/src/selection/html.js","../../lib/node_modules/d3-selection/src/selection/raise.js","../../lib/node_modules/d3-selection/src/selection/lower.js","../../lib/node_modules/d3-selection/src/selection/append.js","../../lib/node_modules/d3-selection/src/selection/insert.js","../../lib/node_modules/d3-selection/src/selection/remove.js","../../lib/node_modules/d3-selection/src/selection/clone.js","../../lib/node_modules/d3-selection/src/selection/datum.js","../../lib/node_modules/d3-selection/src/selection/on.js","../../lib/node_modules/d3-selection/src/selection/dispatch.js","../../lib/node_modules/d3-selection/src/selection/iterator.js","../../lib/node_modules/d3-selection/src/selection/index.js","../../lib/node_modules/d3-selection/src/select.js","../../lib/node_modules/d3-selection/src/sourceEvent.js","../../lib/node_modules/d3-selection/src/pointer.js","../../lib/node_modules/d3-drag/src/noevent.js","../../lib/node_modules/d3-drag/src/nodrag.js","../../lib/node_modules/d3-color/src/define.js","../../lib/node_modules/d3-color/src/color.js","../../lib/node_modules/d3-color/src/math.js","../../lib/node_modules/d3-color/src/lab.js","../../lib/node_modules/d3-color/src/cubehelix.js","../../lib/node_modules/d3-interpolate/src/basis.js","../../lib/node_modules/d3-interpolate/src/constant.js","../../lib/node_modules/d3-interpolate/src/color.js","../../lib/node_modules/d3-interpolate/src/rgb.js","../../lib/node_modules/d3-interpolate/src/numberArray.js","../../lib/node_modules/d3-interpolate/src/array.js","../../lib/node_modules/d3-interpolate/src/date.js","../../lib/node_modules/d3-interpolate/src/number.js","../../lib/node_modules/d3-interpolate/src/object.js","../../lib/node_modules/d3-interpolate/src/string.js","../../lib/node_modules/d3-interpolate/src/value.js","../../lib/node_modules/d3-interpolate/src/round.js","../../lib/node_modules/d3-interpolate/src/transform/decompose.js","../../lib/node_modules/d3-interpolate/src/transform/parse.js","../../lib/node_modules/d3-interpolate/src/transform/index.js","../../lib/node_modules/d3-interpolate/src/zoom.js","../../lib/node_modules/d3-interpolate/src/hsl.js","../../lib/node_modules/d3-interpolate/src/lab.js","../../lib/node_modules/d3-interpolate/src/hcl.js","../../lib/node_modules/d3-interpolate/src/cubehelix.js","../../lib/node_modules/d3-interpolate/src/piecewise.js","../../lib/node_modules/d3-interpolate/src/quantize.js","../../lib/node_modules/d3-timer/src/timer.js","../../lib/node_modules/d3-timer/src/timeout.js","../../lib/node_modules/d3-transition/src/transition/schedule.js","../../lib/node_modules/d3-transition/src/interrupt.js","../../lib/node_modules/d3-transition/src/selection/interrupt.js","../../lib/node_modules/d3-transition/src/transition/tween.js","../../lib/node_modules/d3-transition/src/transition/interpolate.js","../../lib/node_modules/d3-transition/src/transition/attr.js","../../lib/node_modules/d3-transition/src/transition/attrTween.js","../../lib/node_modules/d3-transition/src/transition/delay.js","../../lib/node_modules/d3-transition/src/transition/duration.js","../../lib/node_modules/d3-transition/src/transition/ease.js","../../lib/node_modules/d3-transition/src/transition/easeVarying.js","../../lib/node_modules/d3-transition/src/transition/filter.js","../../lib/node_modules/d3-transition/src/transition/merge.js","../../lib/node_modules/d3-transition/src/transition/on.js","../../lib/node_modules/d3-transition/src/transition/remove.js","../../lib/node_modules/d3-transition/src/transition/select.js","../../lib/node_modules/d3-transition/src/transition/selectAll.js","../../lib/node_modules/d3-transition/src/transition/selection.js","../../lib/node_modules/d3-transition/src/transition/style.js","../../lib/node_modules/d3-transition/src/transition/styleTween.js","../../lib/node_modules/d3-transition/src/transition/text.js","../../lib/node_modules/d3-transition/src/transition/textTween.js","../../lib/node_modules/d3-transition/src/transition/transition.js","../../lib/node_modules/d3-transition/src/transition/end.js","../../lib/node_modules/d3-transition/src/transition/index.js","../../lib/node_modules/d3-ease/src/cubic.js","../../lib/node_modules/d3-transition/src/selection/transition.js","../../lib/node_modules/d3-transition/src/selection/index.js","../../lib/node_modules/d3-brush/src/constant.js","../../lib/node_modules/d3-brush/src/event.js","../../lib/node_modules/d3-brush/src/noevent.js","../../lib/node_modules/d3-brush/src/brush.js","../../lib/node_modules/d3-path/src/path.js","../../lib/node_modules/d3-contour/src/array.js","../../lib/node_modules/d3-contour/src/ascending.js","../../lib/node_modules/d3-contour/src/area.js","../../lib/node_modules/d3-contour/src/constant.js","../../lib/node_modules/d3-contour/src/contains.js","../../lib/node_modules/d3-contour/src/noop.js","../../lib/node_modules/d3-contour/src/contours.js","../../lib/node_modules/d3-contour/src/density.js","../../lib/node_modules/robust-predicates/esm/util.js","../../lib/node_modules/robust-predicates/esm/orient2d.js","../../lib/node_modules/delaunator/index.js","../../lib/node_modules/d3-delaunay/src/path.js","../../lib/node_modules/d3-delaunay/src/polygon.js","../../lib/node_modules/d3-delaunay/src/voronoi.js","../../lib/node_modules/d3-delaunay/src/delaunay.js","../../lib/node_modules/d3-format/src/formatDecimal.js","../../lib/node_modules/d3-format/src/exponent.js","../../lib/node_modules/d3-format/src/formatGroup.js","../../lib/node_modules/d3-format/src/formatNumerals.js","../../lib/node_modules/d3-format/src/formatSpecifier.js","../../lib/node_modules/d3-format/src/formatTrim.js","../../lib/node_modules/d3-format/src/formatPrefixAuto.js","../../lib/node_modules/d3-format/src/formatRounded.js","../../lib/node_modules/d3-format/src/formatTypes.js","../../lib/node_modules/d3-format/src/identity.js","../../lib/node_modules/d3-format/src/locale.js","../../lib/node_modules/d3-format/src/defaultLocale.js","../../lib/node_modules/d3-format/src/precisionFixed.js","../../lib/node_modules/d3-format/src/precisionPrefix.js","../../lib/node_modules/d3-format/src/precisionRound.js","../../lib/node_modules/d3-geo/src/math.js","../../lib/node_modules/d3-geo/src/noop.js","../../lib/node_modules/d3-geo/src/stream.js","../../lib/node_modules/d3-geo/src/cartesian.js","../../lib/node_modules/d3-geo/src/centroid.js","../../lib/node_modules/d3-geo/src/compose.js","../../lib/node_modules/d3-geo/src/rotation.js","../../lib/node_modules/d3-geo/src/circle.js","../../lib/node_modules/d3-geo/src/clip/buffer.js","../../lib/node_modules/d3-geo/src/pointEqual.js","../../lib/node_modules/d3-geo/src/clip/rejoin.js","../../lib/node_modules/d3-geo/src/polygonContains.js","../../lib/node_modules/d3-geo/src/clip/index.js","../../lib/node_modules/d3-geo/src/clip/antimeridian.js","../../lib/node_modules/d3-geo/src/clip/circle.js","../../lib/node_modules/d3-geo/src/clip/line.js","../../lib/node_modules/d3-geo/src/clip/rectangle.js","../../lib/node_modules/d3-geo/src/graticule.js","../../lib/node_modules/d3-geo/src/identity.js","../../lib/node_modules/d3-geo/src/path/area.js","../../lib/node_modules/d3-geo/src/path/bounds.js","../../lib/node_modules/d3-geo/src/path/centroid.js","../../lib/node_modules/d3-geo/src/path/context.js","../../lib/node_modules/d3-geo/src/path/measure.js","../../lib/node_modules/d3-geo/src/path/string.js","../../lib/node_modules/d3-geo/src/path/index.js","../../lib/node_modules/d3-geo/src/transform.js","../../lib/node_modules/d3-geo/src/projection/fit.js","../../lib/node_modules/d3-geo/src/projection/resample.js","../../lib/node_modules/d3-geo/src/projection/index.js","../../lib/node_modules/d3-geo/src/projection/conic.js","../../lib/node_modules/d3-geo/src/projection/cylindricalEqualArea.js","../../lib/node_modules/d3-geo/src/projection/conicEqualArea.js","../../lib/node_modules/d3-geo/src/projection/albers.js","../../lib/node_modules/d3-geo/src/projection/albersUsa.js","../../lib/node_modules/d3-geo/src/projection/azimuthal.js","../../lib/node_modules/d3-geo/src/projection/azimuthalEqualArea.js","../../lib/node_modules/d3-geo/src/projection/azimuthalEquidistant.js","../../lib/node_modules/d3-geo/src/projection/mercator.js","../../lib/node_modules/d3-geo/src/projection/conicConformal.js","../../lib/node_modules/d3-geo/src/projection/equirectangular.js","../../lib/node_modules/d3-geo/src/projection/conicEquidistant.js","../../lib/node_modules/d3-geo/src/projection/equalEarth.js","../../lib/node_modules/d3-geo/src/projection/gnomonic.js","../../lib/node_modules/d3-geo/src/projection/orthographic.js","../../lib/node_modules/d3-geo/src/projection/stereographic.js","../../lib/node_modules/d3-geo/src/projection/transverseMercator.js","../../lib/node_modules/d3-hierarchy/src/cluster.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/count.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/each.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/find.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/sum.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/sort.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/path.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/ancestors.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/descendants.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/leaves.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/links.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/iterator.js","../../lib/node_modules/d3-hierarchy/src/hierarchy/index.js","../../lib/node_modules/d3-hierarchy/src/accessors.js","../../lib/node_modules/d3-hierarchy/src/stratify.js","../../lib/node_modules/d3-hierarchy/src/tree.js","../../lib/node_modules/d3-random/src/lcg.js","../../lib/node_modules/d3-scale/src/init.js","../../lib/node_modules/d3-scale/src/ordinal.js","../../lib/node_modules/d3-scale/src/band.js","../../lib/node_modules/d3-scale/src/constant.js","../../lib/node_modules/d3-scale/src/number.js","../../lib/node_modules/d3-scale/src/continuous.js","../../lib/node_modules/d3-scale/src/tickFormat.js","../../lib/node_modules/d3-scale/src/linear.js","../../lib/node_modules/d3-scale/src/identity.js","../../lib/node_modules/d3-scale/src/nice.js","../../lib/node_modules/d3-scale/src/log.js","../../lib/node_modules/d3-scale/src/symlog.js","../../lib/node_modules/d3-scale/src/pow.js","../../lib/node_modules/d3-scale/src/quantile.js","../../lib/node_modules/d3-scale/src/threshold.js","../../lib/node_modules/d3-time/src/interval.js","../../lib/node_modules/d3-time/src/millisecond.js","../../lib/node_modules/d3-time/src/duration.js","../../lib/node_modules/d3-time/src/second.js","../../lib/node_modules/d3-time/src/minute.js","../../lib/node_modules/d3-time/src/hour.js","../../lib/node_modules/d3-time/src/day.js","../../lib/node_modules/d3-time/src/week.js","../../lib/node_modules/d3-time/src/month.js","../../lib/node_modules/d3-time/src/year.js","../../lib/node_modules/d3-time/src/ticks.js","../../lib/node_modules/d3-time-format/src/locale.js","../../lib/node_modules/d3-time-format/src/defaultLocale.js","../../lib/node_modules/d3-scale/src/time.js","../../lib/node_modules/d3-scale/src/utcTime.js","../../lib/node_modules/d3-scale/src/sequential.js","../../lib/node_modules/d3-scale/src/diverging.js","../../lib/node_modules/d3-scale-chromatic/src/colors.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/category10.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/Accent.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/Dark2.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/observable10.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/Paired.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/Pastel1.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/Pastel2.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/Set1.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/Set2.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/Set3.js","../../lib/node_modules/d3-scale-chromatic/src/categorical/Tableau10.js","../../lib/node_modules/d3-scale-chromatic/src/ramp.js","../../lib/node_modules/d3-scale-chromatic/src/diverging/BrBG.js","../../lib/node_modules/d3-scale-chromatic/src/diverging/PRGn.js","../../lib/node_modules/d3-scale-chromatic/src/diverging/PiYG.js","../../lib/node_modules/d3-scale-chromatic/src/diverging/PuOr.js","../../lib/node_modules/d3-scale-chromatic/src/diverging/RdBu.js","../../lib/node_modules/d3-scale-chromatic/src/diverging/RdGy.js","../../lib/node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","../../lib/node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","../../lib/node_modules/d3-scale-chromatic/src/diverging/Spectral.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/cividis.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/turbo.js","../../lib/node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","../../lib/node_modules/d3-shape/src/constant.js","../../lib/node_modules/d3-shape/src/math.js","../../lib/node_modules/d3-shape/src/path.js","../../lib/node_modules/d3-shape/src/array.js","../../lib/node_modules/d3-shape/src/curve/linear.js","../../lib/node_modules/d3-shape/src/point.js","../../lib/node_modules/d3-shape/src/line.js","../../lib/node_modules/d3-shape/src/area.js","../../lib/node_modules/d3-shape/src/curve/bump.js","../../lib/node_modules/d3-shape/src/symbol/asterisk.js","../../lib/node_modules/d3-shape/src/symbol/circle.js","../../lib/node_modules/d3-shape/src/symbol/cross.js","../../lib/node_modules/d3-shape/src/symbol/diamond.js","../../lib/node_modules/d3-shape/src/symbol/diamond2.js","../../lib/node_modules/d3-shape/src/symbol/plus.js","../../lib/node_modules/d3-shape/src/symbol/square.js","../../lib/node_modules/d3-shape/src/symbol/square2.js","../../lib/node_modules/d3-shape/src/symbol/star.js","../../lib/node_modules/d3-shape/src/symbol/triangle.js","../../lib/node_modules/d3-shape/src/symbol/triangle2.js","../../lib/node_modules/d3-shape/src/symbol/wye.js","../../lib/node_modules/d3-shape/src/symbol/times.js","../../lib/node_modules/d3-shape/src/symbol.js","../../lib/node_modules/d3-shape/src/noop.js","../../lib/node_modules/d3-shape/src/curve/basis.js","../../lib/node_modules/d3-shape/src/curve/basisClosed.js","../../lib/node_modules/d3-shape/src/curve/basisOpen.js","../../lib/node_modules/d3-shape/src/curve/bundle.js","../../lib/node_modules/d3-shape/src/curve/cardinal.js","../../lib/node_modules/d3-shape/src/curve/cardinalClosed.js","../../lib/node_modules/d3-shape/src/curve/cardinalOpen.js","../../lib/node_modules/d3-shape/src/curve/catmullRom.js","../../lib/node_modules/d3-shape/src/curve/catmullRomClosed.js","../../lib/node_modules/d3-shape/src/curve/catmullRomOpen.js","../../lib/node_modules/d3-shape/src/curve/linearClosed.js","../../lib/node_modules/d3-shape/src/curve/monotone.js","../../lib/node_modules/d3-shape/src/curve/natural.js","../../lib/node_modules/d3-shape/src/curve/step.js","../../lib/node_modules/d3-zoom/src/constant.js","../../lib/node_modules/d3-zoom/src/event.js","../../lib/node_modules/d3-zoom/src/transform.js","../../lib/node_modules/d3-zoom/src/noevent.js","../../lib/node_modules/d3-zoom/src/zoom.js","../../lib/node_modules/@observablehq/plot/src/defined.js","../../lib/node_modules/isoformat/src/format.js","../../lib/node_modules/isoformat/src/parse.js","../../lib/node_modules/@observablehq/plot/src/order.js","../../lib/node_modules/@observablehq/plot/src/time.js","../../lib/node_modules/@observablehq/plot/src/options.js","../../lib/node_modules/@observablehq/plot/src/scales/index.js","../../lib/node_modules/@observablehq/plot/src/symbol.js","../../lib/node_modules/@observablehq/plot/src/transforms/basic.js","../../lib/node_modules/@observablehq/plot/src/transforms/group.js","../../lib/node_modules/@observablehq/plot/src/channel.js","../../lib/node_modules/@observablehq/plot/src/scales/schemes.js","../../lib/node_modules/@observablehq/plot/src/scales/quantitative.js","../../lib/node_modules/@observablehq/plot/src/warnings.js","../../lib/node_modules/@observablehq/plot/src/scales/diverging.js","../../lib/node_modules/@observablehq/plot/src/scales/temporal.js","../../lib/node_modules/@observablehq/plot/src/scales/ordinal.js","../../lib/node_modules/@observablehq/plot/src/scales.js","../../lib/node_modules/@observablehq/plot/src/facet.js","../../lib/node_modules/@observablehq/plot/src/projection.js","../../lib/node_modules/@observablehq/plot/src/context.js","../../lib/node_modules/@observablehq/plot/src/memoize.js","../../lib/node_modules/@observablehq/plot/src/format.js","../../lib/node_modules/@observablehq/plot/src/style.js","../../lib/node_modules/@observablehq/plot/src/mark.js","../../lib/node_modules/@observablehq/plot/src/dimensions.js","../../lib/node_modules/@observablehq/plot/src/interactions/pointer.js","../../lib/node_modules/@observablehq/plot/src/axes.js","../../lib/node_modules/@observablehq/plot/src/legends/ramp.js","../../lib/node_modules/@observablehq/plot/src/math.js","../../lib/node_modules/@observablehq/plot/src/marker.js","../../lib/node_modules/@observablehq/plot/src/transforms/inset.js","../../lib/node_modules/@observablehq/plot/src/transforms/interval.js","../../lib/node_modules/@observablehq/plot/src/marks/rule.js","../../lib/node_modules/@observablehq/plot/src/template.js","../../lib/node_modules/@observablehq/plot/src/marks/text.js","../../lib/node_modules/@observablehq/plot/src/marks/vector.js","../../lib/node_modules/@observablehq/plot/src/marks/axis.js","../../lib/node_modules/@observablehq/plot/src/legends/swatches.js","../../lib/node_modules/@observablehq/plot/src/legends.js","../../lib/node_modules/@observablehq/plot/src/transforms/identity.js","../../lib/node_modules/@observablehq/plot/src/transforms/exclusiveFacets.js","../../lib/node_modules/@observablehq/plot/src/transforms/stack.js","../../lib/node_modules/@observablehq/plot/src/marks/rect.js","../../lib/node_modules/@observablehq/plot/src/marks/frame.js","../../lib/node_modules/@observablehq/plot/src/marks/tip.js","../../lib/node_modules/@observablehq/plot/src/plot.js","../../lib/node_modules/@observablehq/plot/src/curve.js","../../lib/node_modules/@observablehq/plot/src/transforms/bin.js","../../lib/node_modules/@observablehq/plot/src/marks/area.js","../../lib/node_modules/@observablehq/plot/src/marks/link.js","../../lib/node_modules/@observablehq/plot/src/marks/arrow.js","../../lib/node_modules/@observablehq/plot/src/marks/bar.js","../../lib/node_modules/@observablehq/plot/src/marks/cell.js","../../lib/node_modules/@observablehq/plot/src/marks/dot.js","../../lib/node_modules/@observablehq/plot/src/marks/line.js","../../lib/node_modules/@observablehq/plot/src/marks/auto.js","../../lib/node_modules/@observablehq/plot/src/transforms/map.js","../../lib/node_modules/@observablehq/plot/src/transforms/window.js","../../lib/node_modules/@observablehq/plot/src/marks/bollinger.js","../../lib/node_modules/@observablehq/plot/src/marks/tick.js","../../lib/node_modules/@observablehq/plot/src/marks/box.js","../../lib/node_modules/@observablehq/plot/src/marks/raster.js","../../lib/node_modules/@observablehq/plot/src/marks/contour.js","../../lib/node_modules/@observablehq/plot/src/marks/crosshair.js","../../lib/node_modules/@observablehq/plot/src/marks/delaunay.js","../../lib/node_modules/@observablehq/plot/src/marks/density.js","../../lib/node_modules/@observablehq/plot/src/marks/difference.js","../../lib/node_modules/@observablehq/plot/src/transforms/centroid.js","../../lib/node_modules/@observablehq/plot/src/marks/geo.js","../../lib/node_modules/@observablehq/plot/src/transforms/hexbin.js","../../lib/node_modules/@observablehq/plot/src/marks/hexgrid.js","../../lib/node_modules/@observablehq/plot/src/marks/image.js","../../lib/node_modules/@observablehq/plot/src/stats.js","../../lib/node_modules/@observablehq/plot/src/marks/linearRegression.js","../../lib/node_modules/@observablehq/plot/src/transforms/tree.js","../../lib/node_modules/@observablehq/plot/src/marks/tree.js","../../lib/node_modules/@observablehq/plot/src/marks/waffle.js","../../lib/node_modules/binary-search-bounds/search-bounds.js","../../lib/node_modules/interval-tree-1d/interval-tree.js","../../lib/node_modules/@observablehq/plot/src/transforms/dodge.js","../../lib/node_modules/@observablehq/plot/src/transforms/normalize.js","../../lib/node_modules/@observablehq/plot/src/transforms/shift.js","../../lib/node_modules/@observablehq/plot/src/transforms/select.js","../../lib/node_modules/@observablehq/plot/src/index.js","../../lib/node_modules/@uwdata/mosaic-plot/src/plot-attributes.js","../../lib/node_modules/@uwdata/mosaic-plot/src/plot-renderer.js","../../lib/node_modules/@uwdata/mosaic-plot/src/plot.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/is-color.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/is-constant-option.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/is-symbol.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/Mark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/channel-scale.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/bin-expr.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/extent.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/ConnectedMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/grid.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/handle-param.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/density.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/Grid2DMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/ContourMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/permute.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/raster.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/RasterMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/DenseLineMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/Density1DMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/Density2DMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/util/stats.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/ErrorBarMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/GeoMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/HexbinMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/RasterTileMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/marks/RegressionMark.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/get-datum.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/to-kebab-case.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/sanitize-styles.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/Highlight.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/patchScreenCTM.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/brush.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/close-to.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/get-field.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/invert.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/Interval1D.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/Interval2D.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/Nearest.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/PanZoom.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/parse-path.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/intersect.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/util/neq.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/Region.js","../../lib/node_modules/@uwdata/mosaic-plot/src/interactors/Toggle.js","../../lib/node_modules/@uwdata/mosaic-plot/src/legend.js","../../lib/node_modules/@uwdata/mosaic-plot/src/transforms/bin.js","../../lib/node_modules/@uwdata/mosaic-inputs/src/input.js","../../lib/node_modules/@uwdata/mosaic-inputs/src/Menu.js","../../lib/node_modules/@uwdata/mosaic-inputs/src/Search.js","../../lib/node_modules/@uwdata/mosaic-inputs/src/Slider.js","../../lib/node_modules/@uwdata/mosaic-inputs/src/util/format.js","../../lib/node_modules/@uwdata/mosaic-inputs/src/Table.js","../../lib/node_modules/@uwdata/vgplot/src/connect.js","../../lib/node_modules/@uwdata/vgplot/src/inputs.js","../../lib/node_modules/@uwdata/vgplot/src/layout/concat.js","../../lib/node_modules/@uwdata/vgplot/src/layout/space.js","../../lib/node_modules/@uwdata/vgplot/src/plot/named-plots.js","../../lib/node_modules/@uwdata/vgplot/src/plot/attributes.js","../../lib/node_modules/@uwdata/vgplot/src/plot/data.js","../../lib/node_modules/@uwdata/vgplot/src/plot/marks.js","../../lib/node_modules/@uwdata/vgplot/src/plot/interactors.js","../../lib/node_modules/@uwdata/vgplot/src/plot/legends.js","../../lib/node_modules/@uwdata/vgplot/src/plot/plot.js","../../lib/node_modules/@uwdata/vgplot/src/context.js","../../lib/node_modules/@uwdata/mosaic-spec/src/constants.js","../../lib/node_modules/@uwdata/mosaic-spec/src/util.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/ASTNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/OptionsNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/DataNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/config/extensions.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast-to-dom.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast-to-esm.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/LiteralNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/SelectionNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/ParamNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/ParamRefNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/PlotAttributeNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/SpecNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/HConcatNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/HSpaceNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/InputNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/PlotLegendNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/PlotInteractorNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/ColumnParamRefNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/ExpressionNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/PlotFromNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/WindowFrameNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/TransformNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/PlotMarkNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/PlotNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/VConcatNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/ast/VSpaceNode.js","../../lib/node_modules/@uwdata/mosaic-spec/src/config/components.js","../../lib/node_modules/@uwdata/mosaic-spec/src/config/inputs.js","../../lib/node_modules/@uwdata/mosaic-spec/src/config/plots.js","../../lib/node_modules/@uwdata/mosaic-spec/src/config/transforms.js","../../lib/node_modules/@uwdata/mosaic-spec/src/parse-spec.js"],"sourcesContent":["const NIL = {};\n/**\n * Throttle invocations of a callback function. The callback must return\n * a Promise. Upon repeated invocation, the callback will not be invoked\n * until a prior Promise resolves. If multiple invocations occurs while\n * waiting, only the most recent invocation will be pending.\n * @param callback The callback function.\n * @param debounce Flag indicating if invocations\n *  should also be debounced within the current animation frame.\n * @returns A new function that throttles access to the callback.\n */\nexport function throttle(callback, debounce = false) {\n    let curr;\n    let next;\n    let pending = NIL;\n    function invoke(event) {\n        curr = callback(event)\n            ?.catch(() => { })\n            .finally(() => {\n            if (next) {\n                const { event: value } = next;\n                next = null;\n                invoke(value);\n            }\n            else {\n                curr = null;\n            }\n        }) || null;\n    }\n    function enqueue(event) {\n        next = { event };\n    }\n    function process(event) {\n        if (curr)\n            enqueue(event);\n        else\n            invoke(event);\n    }\n    function delay(event) {\n        if (pending !== event) {\n            requestAnimationFrame(() => {\n                const e = pending;\n                pending = NIL;\n                process(e);\n            });\n        }\n        pending = event;\n    }\n    return debounce ? delay : process;\n}\n//# sourceMappingURL=throttle.js.map","import { throttle } from './util/throttle.js';\nexport function isMosaicClient(x) {\n    return x instanceof MosaicClient;\n}\n/**\n * A Mosaic client is a data consumer that indicates its data needs to a\n * Mosaic coordinator via the query method. The coordinator is responsible\n * for issuing queries and returning results to the client.\n *\n * The client life-cycle consists of connection to a coordinator,\n * initialization (potentially involving queries for data schema and summary\n * statistic information), and then interactive queries that may be driven by\n * an associated selection. When no longer needed, a client should be\n * disconnected from the coordinator.\n *\n * When enabled, a client will initialize and respond to query update requests.\n * If disabled, the client will delay initialization and not respond to queries\n * until enabled again. Disabling a client can improve system performance when\n * associated interface elements are offscreen or disabled.\n */\nexport class MosaicClient {\n    _filterBy;\n    _requestUpdate;\n    _coordinator;\n    _pending;\n    _enabled;\n    _initialized;\n    _request;\n    /**\n     * Create a new client instance.\n     * @param filterSelection An optional selection to\n     *  interactively filter this client's data. If provided, a coordinator\n     *  will re-query and update the client when the selection updates.\n     */\n    constructor(filterSelection) {\n        this._filterBy = filterSelection;\n        this._requestUpdate = throttle(() => this.requestQuery(), true);\n        this._coordinator = null;\n        this._pending = Promise.resolve();\n        this._enabled = true;\n        this._initialized = false;\n        this._request = null;\n    }\n    /**\n     * @returns this client's connected coordinator.\n     */\n    get coordinator() {\n        return this._coordinator;\n    }\n    /**\n     * Set this client's connected coordinator.\n     */\n    set coordinator(coordinator) {\n        this._coordinator = coordinator;\n    }\n    /**\n     * Return this client's enabled state.\n     */\n    get enabled() {\n        return this._enabled;\n    }\n    /**\n     * Set this client's enabled state;\n     */\n    set enabled(state) {\n        state = !!state; // ensure boolean\n        if (this._enabled !== state) {\n            this._enabled = state;\n            if (state) {\n                if (!this._initialized) {\n                    // initialization includes a query request\n                    this.initialize();\n                }\n                else if (this._request) {\n                    // request query now if requested while disabled\n                    this.requestQuery(this._request === true ? undefined : this._request);\n                }\n                this._request = null;\n            }\n        }\n    }\n    /**\n     * Return a Promise that resolves once the client has updated.\n     */\n    get pending() {\n        return this._pending;\n    }\n    /**\n     * @returns this client's filter selection.\n     */\n    get filterBy() {\n        return this._filterBy;\n    }\n    /**\n     * Return a boolean indicating if the client query can be sped up with\n     * materialized views of pre-aggregated data. Should return true if changes\n     * to the filterBy selection do not change the groupby domain of the client\n     * query.\n     */\n    get filterStable() {\n        return true;\n    }\n    /**\n     * Prepare the client before the `query()` method is called. Subclasses\n     * should override this method as needed, potentially issuing one or more\n     * queries to gather data or metadata needed prior to `query` calls.\n     */\n    async prepare() {\n    }\n    /**\n     * Return a query specifying the data needed by this client.\n     * @param filter The filtering criteria to apply in the query.\n     * @returns The client query\n     */\n    query(filter) {\n        return null;\n    }\n    /**\n     * Called by the coordinator to inform the client that a query is pending.\n     * @returns this\n     */\n    queryPending() {\n        return this;\n    }\n    /**\n     * Called by the coordinator to return a query result.\n     * @param data The query result.\n     * @returns this\n     */\n    queryResult(data) {\n        return this;\n    }\n    /**\n     * Called by the coordinator to report a query execution error.\n     * @param error\n     * @returns this\n     */\n    queryError(error) {\n        // do nothing, the coordinator logs the error\n        return this;\n    }\n    /**\n     * Request the coordinator to execute a query for this client.\n     * If an explicit query is not provided, the client `query` method will\n     * be called, filtered by the current `filterBy` selection. This method has\n     * no effect if the client is not connected to a coordinator. If the client\n     * is connected by currently disabled, the request will be serviced if the\n     * client is later enabled.\n     * @param query The query to request. If unspecified, the query\n     *  will be determined by the client's `query` method and the current\n     *  `filterBy` selection state.\n     */\n    requestQuery(query) {\n        if (this._enabled) {\n            const q = query || this.query(this.filterBy?.predicate(this));\n            return this._coordinator.requestQuery(this, q);\n        }\n        else {\n            this._request = query ?? true;\n            return null;\n        }\n    }\n    /**\n     * Request that the coordinator perform a throttled update of this client\n     * using the default query. Unlike requestQuery, for which every call results\n     * in an executed query, multiple calls to requestUpdate may be consolidated\n     * into a single update. This method has no effect if the client is not\n     * connected to a coordinator. If the client is connected but currently\n     * disabled, the request will be serviced if the client is later enabled.\n     */\n    requestUpdate() {\n        if (this._enabled) {\n            this._requestUpdate();\n        }\n        else {\n            this.requestQuery();\n        }\n    }\n    /**\n     * Reset this client, calling the prepare method and query requests. This\n     * method has no effect if the client is not registered with a coordinator.\n     */\n    initialize() {\n        if (!this._enabled) {\n            // clear flag so we initialize when enabled again\n            this._initialized = false;\n        }\n        else if (this._coordinator) {\n            // if connected, let's initialize\n            this._initialized = true;\n            this._pending = this.prepare().then(() => this.requestQuery());\n        }\n    }\n    /**\n     * Remove this client: disconnect from the coordinator and free up any\n     * resource use. This method has no effect if the client is not connected\n     * to a coordinator.\n     *\n     * If overriding this method in a client subclass, be sure to also\n     * disconnect from the coordinator.\n     */\n    destroy() {\n        this._enabled = false;\n        this.coordinator?.disconnect(this);\n    }\n    /**\n     * Requests a client update, for example to (re-)render an interface\n     * component.\n     */\n    update() {\n        return this;\n    }\n}\n//# sourceMappingURL=MosaicClient.js.map","/** Magic bytes 'ARROW1' indicating the Arrow 'file' format. */\nexport const MAGIC = Uint8Array.of(65, 82, 82, 79, 87, 49);\n\n/** Bytes for an 'end of stream' message. */\nexport const EOS = Uint8Array.of(255, 255, 255, 255, 0, 0, 0, 0);\n\n/**\n * Apache Arrow version.\n */\nexport const Version = /** @type {const} */ ({\n  /** 0.1.0 (October 2016). */\n  V1: 0,\n  /** 0.2.0 (February 2017). Non-backwards compatible with V1. */\n  V2: 1,\n  /** 0.3.0 -> 0.7.1 (May - December 2017). Non-backwards compatible with V2. */\n  V3: 2,\n  /** >= 0.8.0 (December 2017). Non-backwards compatible with V3. */\n  V4: 3,\n  /**\n   * >= 1.0.0 (July 2020). Backwards compatible with V4 (V5 readers can read V4\n   * metadata and IPC messages). Implementations are recommended to provide a\n   * V4 compatibility mode with V5 format changes disabled.\n   *\n   * Incompatible changes between V4 and V5:\n   * - Union buffer layout has changed.\n   *   In V5, Unions don't have a validity bitmap buffer.\n   */\n  V5: 4\n});\n\n/**\n * Endianness of Arrow-encoded data.\n */\nexport const Endianness = /** @type {const} */ ({\n  Little: 0,\n  Big: 1\n});\n\n/**\n * Message header type codes.\n */\nexport const MessageHeader = /** @type {const} */ ({\n  NONE: 0,\n  /**\n   * A Schema describes the columns in a record batch.\n   */\n  Schema: 1,\n  /**\n   * For sending dictionary encoding information. Any Field can be\n   * dictionary-encoded, but in this case none of its children may be\n   * dictionary-encoded.\n   * There is one vector / column per dictionary, but that vector / column\n   * may be spread across multiple dictionary batches by using the isDelta\n   * flag.\n   */\n  DictionaryBatch: 2,\n  /**\n   * A data header describing the shared memory layout of a \"record\" or \"row\"\n   * batch. Some systems call this a \"row batch\" internally and others a \"record\n   * batch\".\n   */\n  RecordBatch: 3,\n  /**\n   * EXPERIMENTAL: Metadata for n-dimensional arrays, aka \"tensors\" or\n   * \"ndarrays\". Arrow implementations in general are not required to implement\n   * this type.\n   *\n   * Not currently supported by Flechette.\n   */\n  Tensor: 4,\n  /**\n   * EXPERIMENTAL: Metadata for n-dimensional sparse arrays, aka \"sparse\n   * tensors\". Arrow implementations in general are not required to implement\n   * this type.\n   *\n   * Not currently supported by Flechette.\n   */\n  SparseTensor: 5\n});\n\n/**\n * Field data type ids.\n * Only non-negative values ever occur in IPC flatbuffer binary data.\n */\nexport const Type = /** @type {const} */ ({\n  /**\n   * Dictionary types compress data by using a set of integer indices to\n   * lookup potentially repeated vales in a separate dictionary of values.\n   *\n   * This type entry is provided for API convenience, it does not occur\n   * in actual Arrow IPC binary data.\n   */\n  Dictionary: -1,\n  /** No data type. Included for flatbuffer compatibility. */\n  NONE: 0,\n  /** Null values only. */\n  Null: 1,\n  /** Integers, either signed or unsigned, with 8, 16, 32, or 64 bit widths. */\n  Int: 2,\n  /** Floating point numbers with 16, 32, or 64 bit precision. */\n  Float: 3,\n  /** Opaque binary data. */\n  Binary: 4,\n  /** Unicode with UTF-8 encoding. */\n  Utf8: 5,\n  /** Booleans represented as 8 bit bytes. */\n  Bool: 6,\n  /**\n   * Exact decimal value represented as an integer value in two's complement.\n   * Currently only 128-bit (16-byte) and 256-bit (32-byte) integers are used.\n   * The representation uses the endianness indicated in the schema.\n   */\n  Decimal: 7,\n  /**\n   * Date is either a 32-bit or 64-bit signed integer type representing an\n   * elapsed time since UNIX epoch (1970-01-01), stored in either of two units:\n   * - Milliseconds (64 bits) indicating UNIX time elapsed since the epoch (no\n   * leap seconds), where the values are evenly divisible by 86400000\n   * - Days (32 bits) since the UNIX epoch\n   */\n  Date: 8,\n  /**\n   * Time is either a 32-bit or 64-bit signed integer type representing an\n   * elapsed time since midnight, stored in either of four units: seconds,\n   * milliseconds, microseconds or nanoseconds.\n   *\n   * The integer `bitWidth` depends on the `unit` and must be one of the following:\n   * - SECOND and MILLISECOND: 32 bits\n   * - MICROSECOND and NANOSECOND: 64 bits\n   *\n   * The allowed values are between 0 (inclusive) and 86400 (=24*60*60) seconds\n   * (exclusive), adjusted for the time unit (for example, up to 86400000\n   * exclusive for the MILLISECOND unit).\n   * This definition doesn't allow for leap seconds. Time values from\n   * measurements with leap seconds will need to be corrected when ingesting\n   * into Arrow (for example by replacing the value 86400 with 86399).\n   */\n  Time: 9,\n  /**\n   * Timestamp is a 64-bit signed integer representing an elapsed time since a\n   * fixed epoch, stored in either of four units: seconds, milliseconds,\n   * microseconds or nanoseconds, and is optionally annotated with a timezone.\n   *\n   * Timestamp values do not include any leap seconds (in other words, all\n   * days are considered 86400 seconds long).\n   *\n   * The timezone is an optional string for the name of a timezone, one of:\n   *\n   *  - As used in the Olson timezone database (the \"tz database\" or\n   *    \"tzdata\"), such as \"America/New_York\".\n   *  - An absolute timezone offset of the form \"+XX:XX\" or \"-XX:XX\",\n   *    such as \"+07:30\".\n   *\n   * Whether a timezone string is present indicates different semantics about\n   * the data.\n   */\n  Timestamp: 10,\n  /**\n   * A \"calendar\" interval which models types that don't necessarily\n   * have a precise duration without the context of a base timestamp (e.g.\n   * days can differ in length during day light savings time transitions).\n   * All integers in the units below are stored in the endianness indicated\n   * by the schema.\n   *\n   *  - YEAR_MONTH - Indicates the number of elapsed whole months, stored as\n   *    4-byte signed integers.\n   *  - DAY_TIME - Indicates the number of elapsed days and milliseconds (no\n   *    leap seconds), stored as 2 contiguous 32-bit signed integers (8-bytes\n   *    in total). Support of this IntervalUnit is not required for full arrow\n   *    compatibility.\n   *  - MONTH_DAY_NANO - A triple of the number of elapsed months, days, and\n   *    nanoseconds. The values are stored contiguously in 16-byte blocks.\n   *    Months and days are encoded as 32-bit signed integers and nanoseconds\n   *    is encoded as a 64-bit signed integer. Nanoseconds does not allow for\n   *    leap seconds. Each field is independent (e.g. there is no constraint\n   *    that nanoseconds have the same sign as days or that the quantity of\n   *    nanoseconds represents less than a day's worth of time).\n   */\n  Interval: 11,\n  /**\n   * List (vector) data supporting variably-sized lists.\n   * A list has a single child data type for list entries.\n   */\n  List: 12,\n  /**\n   * A struct consisting of multiple named child data types.\n   */\n  Struct: 13,\n  /**\n   * A union is a complex type with parallel child data types. By default ids\n   * in the type vector refer to the offsets in the children. Optionally\n   * typeIds provides an indirection between the child offset and the type id.\n   * For each child `typeIds[offset]` is the id used in the type vector.\n   */\n  Union: 14,\n  /**\n   * Binary data where each entry has the same fixed size.\n   */\n  FixedSizeBinary: 15,\n  /**\n   * List (vector) data where every list has the same fixed size.\n   * A list has a single child data type for list entries.\n   */\n  FixedSizeList: 16,\n  /**\n   * A Map is a logical nested type that is represented as\n   * List<entries: Struct<key: K, value: V>>\n   *\n   * In this layout, the keys and values are each respectively contiguous. We do\n   * not constrain the key and value types, so the application is responsible\n   * for ensuring that the keys are hashable and unique. Whether the keys are sorted\n   * may be set in the metadata for this field.\n   *\n   * In a field with Map type, the field has a child Struct field, which then\n   * has two children: key type and the second the value type. The names of the\n   * child fields may be respectively \"entries\", \"key\", and \"value\", but this is\n   * not enforced.\n   *\n   * Map\n   * ```text\n   *   - child[0] entries: Struct\n   *   - child[0] key: K\n   *   - child[1] value: V\n   *  ```\n   * Neither the \"entries\" field nor the \"key\" field may be nullable.\n   *\n   * The metadata is structured so that Arrow systems without special handling\n   * for Map can make Map an alias for List. The \"layout\" attribute for the Map\n   * field must have the same contents as a List.\n   */\n  Map: 17,\n  /**\n   * An absolute length of time unrelated to any calendar artifacts. For the\n   * purposes of Arrow implementations, adding this value to a Timestamp\n   * (\"t1\") naively (i.e. simply summing the two numbers) is acceptable even\n   * though in some cases the resulting Timestamp (t2) would not account for\n   * leap-seconds during the elapsed time between \"t1\" and \"t2\". Similarly,\n   * representing the difference between two Unix timestamp is acceptable, but\n   * would yield a value that is possibly a few seconds off from the true\n   * elapsed time.\n   *\n   * The resolution defaults to millisecond, but can be any of the other\n   * supported TimeUnit values as with Timestamp and Time types. This type is\n   * always represented as an 8-byte integer.\n   */\n  Duration: 18,\n  /**\n   * Same as Binary, but with 64-bit offsets, allowing representation of\n   * extremely large data values.\n   */\n  LargeBinary: 19,\n  /**\n   * Same as Utf8, but with 64-bit offsets, allowing representation of\n   * extremely large data values.\n   */\n  LargeUtf8: 20,\n  /**\n   * Same as List, but with 64-bit offsets, allowing representation of\n   * extremely large data values.\n   */\n  LargeList: 21,\n  /**\n   * Contains two child arrays, run_ends and values. The run_ends child array\n   * must be a 16/32/64-bit integer array which encodes the indices at which\n   * the run with the value in each corresponding index in the values child\n   * array ends. Like list/struct types, the value array can be of any type.\n   */\n  RunEndEncoded: 22,\n  /**\n   * Logically the same as Binary, but the internal representation uses a view\n   * struct that contains the string length and either the string's entire data\n   * inline (for small strings) or an inlined prefix, an index of another buffer,\n   * and an offset pointing to a slice in that buffer (for non-small strings).\n   *\n   * Since it uses a variable number of data buffers, each Field with this type\n   * must have a corresponding entry in `variadicBufferCounts`.\n   */\n  BinaryView: 23,\n  /**\n   * Logically the same as Utf8, but the internal representation uses a view\n   * struct that contains the string length and either the string's entire data\n   * inline (for small strings) or an inlined prefix, an index of another buffer,\n   * and an offset pointing to a slice in that buffer (for non-small strings).\n   *\n   * Since it uses a variable number of data buffers, each Field with this type\n   * must have a corresponding entry in `variadicBufferCounts`.\n   */\n  Utf8View: 24,\n  /**\n   * Represents the same logical types that List can, but contains offsets and\n   * sizes allowing for writes in any order and sharing of child values among\n   * list values.\n   */\n  ListView: 25,\n  /**\n   * Same as ListView, but with 64-bit offsets and sizes, allowing to represent\n   * extremely large data values.\n   */\n  LargeListView: 26\n});\n\n/**\n * Floating point number precision.\n */\nexport const Precision = /** @type {const} */ ({\n  /** 16-bit floating point number. */\n  HALF: 0,\n  /** 32-bit floating point number. */\n  SINGLE: 1,\n  /** 64-bit floating point number. */\n  DOUBLE: 2\n});\n\n/**\n * Date units.\n */\nexport const DateUnit = /** @type {const} */ ({\n  /* Days (as 32 bit int) since the UNIX epoch. */\n  DAY: 0,\n  /**\n   * Milliseconds (as 64 bit int) indicating UNIX time elapsed since the epoch\n   * (no leap seconds), with values evenly divisible by 86400000.\n   */\n  MILLISECOND: 1\n});\n\n/**\n * Time units.\n */\nexport const TimeUnit = /** @type {const} */ ({\n  /** Seconds. */\n  SECOND: 0,\n  /** Milliseconds. */\n  MILLISECOND: 1,\n  /** Microseconds. */\n  MICROSECOND: 2,\n  /** Nanoseconds. */\n  NANOSECOND: 3\n});\n\n/**\n * Date/time interval units.\n */\nexport const IntervalUnit = /** @type {const} */ ({\n  /**\n   * Indicates the number of elapsed whole months, stored as 4-byte signed\n   * integers.\n   */\n  YEAR_MONTH: 0,\n  /**\n   * Indicates the number of elapsed days and milliseconds (no leap seconds),\n   * stored as 2 contiguous 32-bit signed integers (8-bytes in total). Support\n   * of this IntervalUnit is not required for full arrow compatibility.\n   */\n  DAY_TIME: 1,\n  /**\n   * A triple of the number of elapsed months, days, and nanoseconds.\n   * The values are stored contiguously in 16-byte blocks. Months and days are\n   * encoded as 32-bit signed integers and nanoseconds is encoded as a 64-bit\n   * signed integer. Nanoseconds does not allow for leap seconds. Each field is\n   * independent (e.g. there is no constraint that nanoseconds have the same\n   * sign as days or that the quantity of nanoseconds represents less than a\n   * day's worth of time).\n   */\n  MONTH_DAY_NANO: 2\n});\n\n/**\n * Union type modes.\n */\nexport const UnionMode = /** @type {const} */ ({\n  /** Sparse union layout with full arrays for each sub-type. */\n  Sparse: 0,\n  /** Dense union layout with offsets into value arrays. */\n  Dense: 1\n});\n","/**\n * @import { Int64ArrayConstructor, IntArrayConstructor, IntegerArray, TypedArray } from '../types.js'\n */\nexport const uint8Array = Uint8Array;\nexport const uint16Array = Uint16Array;\nexport const uint32Array = Uint32Array;\nexport const uint64Array = BigUint64Array;\nexport const int8Array = Int8Array;\nexport const int16Array = Int16Array;\nexport const int32Array = Int32Array;\nexport const int64Array = BigInt64Array;\nexport const float32Array = Float32Array;\nexport const float64Array = Float64Array;\n\n/**\n * Check if an input value is an ArrayBuffer or SharedArrayBuffer.\n * @param {unknown} data\n * @returns {data is ArrayBufferLike}\n */\nexport function isArrayBufferLike(data) {\n  return data instanceof ArrayBuffer || (\n    typeof SharedArrayBuffer !== 'undefined' &&\n    data instanceof SharedArrayBuffer\n  );\n}\n\n/**\n * Return the appropriate typed array constructor for the given\n * integer type metadata.\n * @param {number} bitWidth The integer size in bits.\n * @param {boolean} signed Flag indicating if the integer is signed.\n * @returns {IntArrayConstructor}\n */\nexport function intArrayType(bitWidth, signed) {\n  const i = Math.log2(bitWidth) - 3;\n  return (\n    signed\n      ? [int8Array, int16Array, int32Array, int64Array]\n      : [uint8Array, uint16Array, uint32Array, uint64Array]\n  )[i];\n}\n\n/** Shared prototype for typed arrays. */\nconst TypedArray = Object.getPrototypeOf(Int8Array);\n\n/**\n * Check if a value is a typed array.\n * @param {*} value The value to check.\n * @returns {value is TypedArray}\n *  True if value is a typed array, false otherwise.\n */\nexport function isTypedArray(value) {\n  return value instanceof TypedArray;\n}\n\n/**\n * Check if a value is either a standard array or typed array.\n * @param {*} value The value to check.\n * @returns {value is (Array | TypedArray)}\n *  True if value is an array, false otherwise.\n */\nexport function isArray(value) {\n  return Array.isArray(value) || isTypedArray(value);\n}\n\n/**\n * Check if a value is an array type (constructor) for 64-bit integers,\n * one of BigInt64Array or BigUint64Array.\n * @param {*} value The value to check.\n * @returns {value is Int64ArrayConstructor}\n *  True if value is a 64-bit array type, false otherwise.\n */\nexport function isInt64ArrayType(value) {\n  return value === int64Array || value === uint64Array;\n}\n\n/**\n * Determine the correct index into an offset array for a given\n * full column row index. Assumes offset indices can be manipulated\n * as 32-bit signed integers.\n * @param {IntegerArray} offsets The offsets array.\n * @param {number} index The full column row index.\n */\nexport function bisect(offsets, index) {\n  let a = 0;\n  let b = offsets.length;\n  if (b <= 2147483648) { // 2 ** 31\n    // fast version, use unsigned bit shift\n    // array length fits within 32-bit signed integer\n    do {\n      const mid = (a + b) >>> 1;\n      if (offsets[mid] <= index) a = mid + 1;\n      else b = mid;\n    } while (a < b);\n  } else {\n    // slow version, use division and truncate\n    // array length exceeds 32-bit signed integer\n    do {\n      const mid = Math.trunc((a + b) / 2);\n      if (offsets[mid] <= index) a = mid + 1;\n      else b = mid;\n    } while (a < b);\n  }\n  return a;\n}\n\n/**\n * Compute a 64-bit aligned buffer size.\n * @param {number} length The starting size.\n * @param {number} bpe Bytes per element.\n * @returns {number} The aligned size.\n */\nfunction align64(length, bpe = 1) {\n  return (((length * bpe) + 7) & ~7) / bpe;\n}\n\n/**\n * Return a 64-bit aligned version of the array.\n * @template {TypedArray} T\n * @param {T} array The array.\n * @param {number} length The current array length.\n * @returns {T} The aligned array.\n */\nexport function align(array, length = array.length) {\n  const alignedLength = align64(length, array.BYTES_PER_ELEMENT);\n  return array.length > alignedLength ? /** @type {T} */ (array.subarray(0, alignedLength))\n    : array.length < alignedLength ? resize(array, alignedLength)\n    : array;\n}\n\n/**\n * Resize a typed array to exactly the specified length.\n * @template {TypedArray} T\n * @param {T} array The array.\n * @param {number} newLength The new length.\n * @param {number} [offset] The offset at which to copy the old array.\n * @returns {T} The resized array.\n */\nexport function resize(array, newLength, offset = 0) {\n  // @ts-ignore\n  const newArray = new array.constructor(newLength);\n  newArray.set(array, offset);\n  return newArray;\n}\n\n/**\n * Grow a typed array to accommdate a minimum index. The array size is\n * doubled until it exceeds the minimum index.\n * @template {TypedArray} T\n * @param {T} array The array.\n * @param {number} index The minimum index.\n * @param {boolean} [shift] Flag to shift copied bytes to back of array.\n * @returns {T} The resized array.\n */\nexport function grow(array, index, shift) {\n  while (array.length <= index) {\n    array = resize(array, array.length << 1, shift ? array.length : 0);\n  }\n  return array;\n}\n","/**\n * Check if a value is a Date instance\n * @param {*} value The value to check.\n * @returns {value is Date} True if value is a Date, false otherwise.\n */\nexport function isDate(value) {\n  return value instanceof Date;\n}\n\n/**\n * Check if a value is iterable.\n * @param {*} value The value to check.\n * @returns {value is Iterable} True if value is iterable, false otherwise.\n */\nexport function isIterable(value) {\n  return typeof value[Symbol.iterator] === 'function';\n}\n\n/**\n * Return the input value if it passes a test.\n * Otherwise throw an error using the given message generator.\n * @template T\n * @param {T} value he value to check.\n * @param {(value: T) => boolean} test The test function.\n * @param {(value: *) => string} message Message generator.\n * @returns {T} The input value.\n * @throws if the value does not pass the test\n */\nexport function check(value, test, message) {\n  if (test(value)) return value;\n  throw new Error(message(value));\n}\n\n/**\n * Return the input value if it exists in the provided set.\n * Otherwise throw an error using the given message generator.\n * @template T\n * @param {T} value The value to check.\n * @param {T[] | Record<string,T>} set The set of valid values.\n * @param {(value: *) => string} [message] Message generator.\n * @returns {T} The input value.\n * @throws if the value is not included in the set\n */\nexport function checkOneOf(value, set, message) {\n  set = Array.isArray(set) ? set : Object.values(set);\n  return check(\n    value,\n    (value) => set.includes(value),\n    message ?? (() => `${value} must be one of ${set}`)\n  );\n}\n\n/**\n * Return the first object key that pairs with the given value.\n * @param {Record<string,any>} object The object to search.\n * @param {any} value The value to lookup.\n * @returns {string} The first matching key, or '<Unknown>' if not found.\n */\nexport function keyFor(object, value) {\n  for (const [key, val] of Object.entries(object)) {\n    if (val === value) return key;\n  }\n  return '<Unknown>';\n}\n","/**\n * @import { BinaryType, BinaryViewType, BoolType, DataType, DateType, DateUnit_, DecimalType, DictionaryType, DurationType, Field, FixedSizeBinaryType, FixedSizeListType, FloatType, IntBitWidth, IntervalType, IntervalUnit_, IntType, LargeBinaryType, LargeListType, LargeListViewType, LargeUtf8Type, ListType, ListViewType, MapType, NullType, Precision_, RunEndEncodedType, StructType, TimestampType, TimeType, TimeUnit_, UnionMode_, UnionType, Utf8Type, Utf8ViewType } from './types.js'\n */\nimport { DateUnit, IntervalUnit, Precision, TimeUnit, Type, UnionMode } from './constants.js';\nimport { intArrayType, float32Array, float64Array, int32Array, int64Array, uint16Array, uint64Array } from './util/arrays.js';\nimport { check, checkOneOf, keyFor } from './util/objects.js';\n\n/**\n * @typedef {Field | DataType} FieldInput\n */\n\nexport const invalidDataType = (typeId) =>\n  `Unsupported data type: \"${keyFor(Type, typeId)}\" (id ${typeId})`;\n\n/**\n * Return a new field instance for use in a schema or type definition. A field\n * represents a field name, data type, and additional metadata. Fields are used\n * to represent child types within nested types like List, Struct, and Union.\n * @param {string} name The field name.\n * @param {DataType} type The field data type.\n * @param {boolean} [nullable=true] Flag indicating if the field is nullable\n *  (default `true`).\n * @param {Map<string,string>|null} [metadata=null] Custom field metadata\n *  annotations (default `null`).\n * @returns {Field} The field instance.\n */\nexport const field = (name, type, nullable = true, metadata = null) => ({\n  name,\n  type,\n  nullable,\n  metadata\n});\n\n/**\n * Checks if a value is a field instance.\n * @param {any} value\n * @returns {value is Field}\n */\nfunction isField(value) {\n  return Object.hasOwn(value, 'name') && isDataType(value.type)\n}\n\n/**\n * Checks if a value is a data type instance.\n * @param {any} value\n * @returns {value is DataType}\n */\nfunction isDataType(value) {\n  return typeof value?.typeId === 'number';\n}\n\n/**\n * Return a field instance from a field or data type input.\n * @param {FieldInput} value\n *  The value to map to a field.\n * @param {string} [defaultName] The default field name.\n * @param {boolean} [defaultNullable=true] The default nullable value.\n * @returns {Field} The field instance.\n */\nfunction asField(value, defaultName = '', defaultNullable = true) {\n  return isField(value)\n    ? value\n    : field(\n        defaultName,\n        check(value, isDataType, () => `Data type expected.`),\n        defaultNullable\n      );\n}\n\n/////\n\n/**\n * Return a basic type with only a type id.\n * @template {typeof Type[keyof typeof Type]} T\n * @param {T} typeId The type id.\n */\nconst basicType = (typeId) => ({ typeId });\n\n/**\n * Return a Dictionary data type instance.  A dictionary type consists of a\n * dictionary of values (which may be of any type) and corresponding integer\n * indices that reference those values. If values are repeated, a dictionary\n * encoding can provide substantial space savings. In the IPC format,\n * dictionary indices reside alongside other columns in a record batch, while\n * dictionary values are written to special dictionary batches, linked by a\n * unique dictionary *id*.\n * @param {DataType} type The data type of dictionary\n *  values.\n * @param {IntType} [indexType] The data type of\n *  dictionary indices. Must be an integer type (default `int32`).\n * @param {boolean} [ordered=false] Indicates if dictionary values are\n *  ordered (default `false`).\n * @param {number} [id=-1] The dictionary id. The default value (-1) indicates\n *  the dictionary applies to a single column only. Provide an explicit id in\n *  order to reuse a dictionary across columns when building, in which case\n *  different dictionaries *must* have different unique ids. All dictionary\n *  ids are later resolved (possibly to new values) upon IPC encoding.\n * @returns {DictionaryType}\n */\nexport const dictionary = (type, indexType, ordered = false, id = -1) => ({\n  typeId: Type.Dictionary,\n  id,\n  dictionary: type,\n  indices: indexType || int32(),\n  ordered\n});\n\n/**\n * Return a Null data type instance. Null data requires no storage and all\n * extracted values are `null`.\n * @returns {NullType} The null data type.\n */\nexport const nullType = () => basicType(Type.Null);\n\n/**\n * Return an Int data type instance.\n * @param {IntBitWidth} [bitWidth=32] The integer bit width.\n *  One of `8`, `16`, `32` (default), or `64`.\n * @param {boolean} [signed=true] Flag for signed or unsigned integers\n *  (default `true`).\n * @returns {IntType} The integer data type.\n */\nexport const int = (bitWidth = 32, signed = true) => ({\n  typeId: Type.Int,\n  bitWidth: checkOneOf(bitWidth, [8, 16, 32, 64]),\n  signed,\n  values: intArrayType(bitWidth, signed)\n});\n/**\n * Return an Int data type instance for 8 bit signed integers.\n * @returns {IntType} The integer data type.\n */\nexport const int8 = () => int(8);\n/**\n * Return an Int data type instance for 16 bit signed integers.\n * @returns {IntType} The integer data type.\n */\nexport const int16 = () => int(16);\n/**\n * Return an Int data type instance for 32 bit signed integers.\n * @returns {IntType} The integer data type.\n */\nexport const int32 = () => int(32);\n/**\n * Return an Int data type instance for 64 bit signed integers.\n * @returns {IntType} The integer data type.\n */\nexport const int64 = () => int(64);\n/**\n * Return an Int data type instance for 8 bit unsigned integers.\n * @returns {IntType} The integer data type.\n */\nexport const uint8 = () => int(8, false);\n/**\n * Return an Int data type instance for 16 bit unsigned integers.\n * @returns {IntType} The integer data type.\n */\nexport const uint16 = () => int(16, false);\n/**\n * Return an Int data type instance for 32 bit unsigned integers.\n * @returns {IntType} The integer data type.\n */\nexport const uint32 = () => int(32, false);\n/**\n * Return an Int data type instance for 64 bit unsigned integers.\n * @returns {IntType} The integer data type.\n */\nexport const uint64 = () => int(64, false);\n\n/**\n * Return a Float data type instance for floating point numbers.\n * @param {Precision_} [precision=2] The floating point\n *  precision. One of `Precision.HALF` (16-bit), `Precision.SINGLE` (32-bit)\n *  or `Precision.DOUBLE` (64-bit, default).\n * @returns {FloatType} The floating point data type.\n */\nexport const float = (precision = 2) => ({\n  typeId: Type.Float,\n  precision: checkOneOf(precision, Precision),\n  values: [uint16Array, float32Array, float64Array][precision]\n});\n/**\n * Return a Float data type instance for half-precision (16 bit) numbers.\n * @returns {FloatType} The floating point data type.\n */\nexport const float16 = () => float(Precision.HALF);\n/**\n * Return a Float data type instance for single-precision (32 bit) numbers.\n * @returns {FloatType} The floating point data type.\n */\nexport const float32 = () => float(Precision.SINGLE);\n/**\n * Return a Float data type instance for double-precision (64 bit) numbers.\n * @returns {FloatType} The floating point data type.\n */\nexport const float64 = () => float(Precision.DOUBLE);\n\n/**\n * Return a Binary data type instance for variably-sized opaque binary data\n * with 32-bit offsets.\n * @returns {BinaryType} The binary data type.\n */\nexport const binary = () => ({\n  typeId: Type.Binary,\n  offsets: int32Array\n});\n\n/**\n * Return a Utf8 data type instance for Unicode string data.\n * [UTF-8](https://en.wikipedia.org/wiki/UTF-8) code points are stored as\n * binary data.\n * @returns {Utf8Type} The utf8 data type.\n */\nexport const utf8 = () => ({\n  typeId: Type.Utf8,\n  offsets: int32Array\n});\n\n/**\n * Return a Bool data type instance. Bool values are stored compactly in\n * bitmaps with eight values per byte.\n * @returns {BoolType} The bool data type.\n */\nexport const bool = () => basicType(Type.Bool);\n\n/**\n * Return a Decimal data type instance. Decimal values are represented as 32,\n * 64, 128, or 256 bit integers in two's complement. Decimals are fixed point\n * numbers with a set *precision* (total number of decimal digits) and *scale*\n * (number of fractional digits). For example, the number `35.42` can be\n * represented as `3542` with *precision*  4 and *scale* = 2.\n * @param {number} precision The decimal precision: the total number of\n *  decimal digits that can be represented.\n * @param {number} scale The number of fractional digits, beyond the\n *  decimal point.\n * @param {32 | 64 | 128 | 256} [bitWidth] The decimal bit width.\n *  One of 32, 64, 128 (default), or 256.\n * @returns {DecimalType} The decimal data type.\n */\nexport const decimal = (precision, scale, bitWidth = 128) => ({\n  typeId: Type.Decimal,\n  precision,\n  scale,\n  bitWidth: checkOneOf(bitWidth, [32, 64, 128, 256]),\n  values: bitWidth === 32 ? int32Array : uint64Array\n});\n/**\n * Return an Decimal data type instance with a bit width of 32.\n * @param {number} precision The decimal precision: the total number of\n *  decimal digits that can be represented.\n * @param {number} scale The number of fractional digits, beyond the\n *  decimal point.\n * @returns {DecimalType} The decimal data type.\n */\nexport const decimal32 = (precision, scale) => decimal(precision, scale, 32);\n/**\n * Return an Decimal data type instance with a bit width of 64.\n * @param {number} precision The decimal precision: the total number of\n *  decimal digits that can be represented.\n * @param {number} scale The number of fractional digits, beyond the\n *  decimal point.\n * @returns {DecimalType} The decimal data type.\n */\nexport const decimal64 = (precision, scale) => decimal(precision, scale, 64);\n/**\n * Return an Decimal data type instance with a bit width of 128.\n * @param {number} precision The decimal precision: the total number of\n *  decimal digits that can be represented.\n * @param {number} scale The number of fractional digits, beyond the\n *  decimal point.\n * @returns {DecimalType} The decimal data type.\n */\nexport const decimal128 = (precision, scale) => decimal(precision, scale, 128);\n/**\n * Return an Decimal data type instance with a bit width of 256.\n * @param {number} precision The decimal precision: the total number of\n *  decimal digits that can be represented.\n * @param {number} scale The number of fractional digits, beyond the\n *  decimal point.\n * @returns {DecimalType} The decimal data type.\n */\nexport const decimal256 = (precision, scale) => decimal(precision, scale, 256);\n\n/**\n * Return a Date data type instance. Date values are 32-bit or 64-bit signed\n * integers representing elapsed time since the UNIX epoch (Jan 1, 1970 UTC),\n * either in units of days (32 bits) or milliseconds (64 bits, with values\n * evenly divisible by 86400000).\n * @param {DateUnit_} unit The date unit.\n *  One of `DateUnit.DAY` or `DateUnit.MILLISECOND`.\n * @returns {DateType} The date data type.\n */\nexport const date = (unit) => ({\n  typeId: Type.Date,\n  unit: checkOneOf(unit, DateUnit),\n  values: unit === DateUnit.DAY ? int32Array : int64Array\n});\n/**\n * Return a Date data type instance with units of days.\n * @returns {DateType} The date data type.\n */\nexport const dateDay = () => date(DateUnit.DAY);\n/**\n * Return a Date data type instance with units of milliseconds.\n * @returns {DateType} The date data type.\n */\nexport const dateMillisecond = () => date(DateUnit.MILLISECOND);\n\n/**\n * Return a Time data type instance, stored in one of four *unit*s: seconds,\n * milliseconds, microseconds or nanoseconds. The integer *bitWidth* depends\n * on the *unit* and must be 32 bits for seconds and milliseconds or 64 bits\n * for microseconds and nanoseconds. The allowed values are between 0\n * (inclusive) and 86400 (=24*60*60) seconds (exclusive), adjusted for the\n * time unit (for example, up to 86400000 exclusive for the\n * `DateUnit.MILLISECOND` unit.\n *\n * This definition doesn't allow for leap seconds. Time values from\n * measurements with leap seconds will need to be corrected when ingesting\n * into Arrow (for example by replacing the value 86400 with 86399).\n * @param {TimeUnit_} unit The time unit.\n *  One of `TimeUnit.SECOND`, `TimeUnit.MILLISECOND` (default),\n *  `TimeUnit.MICROSECOND`, or `TimeUnit.NANOSECOND`.\n * @param {32 | 64} bitWidth The time bit width. One of `32` (for seconds\n *  and milliseconds) or `64` (for microseconds and nanoseconds).\n * @returns {TimeType} The time data type.\n */\nexport const time = (unit = TimeUnit.MILLISECOND, bitWidth = 32) => ({\n  typeId: Type.Time,\n  unit: checkOneOf(unit, TimeUnit),\n  bitWidth: checkOneOf(bitWidth, [32, 64]),\n  values: bitWidth === 32 ? int32Array : int64Array\n});\n/**\n * Return a Time data type instance, represented as seconds.\n * @returns {TimeType} The time data type.\n */\nexport const timeSecond = () => time(TimeUnit.SECOND, 32);\n/**\n * Return a Time data type instance, represented as milliseconds.\n * @returns {TimeType} The time data type.\n */\nexport const timeMillisecond = () => time(TimeUnit.MILLISECOND, 32);\n/**\n * Return a Time data type instance, represented as microseconds.\n * @returns {TimeType} The time data type.\n */\nexport const timeMicrosecond = () => time(TimeUnit.MICROSECOND, 64);\n/**\n * Return a Time data type instance, represented as nanoseconds.\n * @returns {TimeType} The time data type.\n */\nexport const timeNanosecond = () => time(TimeUnit.NANOSECOND, 64);\n\n/**\n * Return a Timestamp data type instance. Timestamp values are 64-bit signed\n * integers representing an elapsed time since a fixed epoch, stored in either\n * of four units: seconds, milliseconds, microseconds or nanoseconds, and are\n * optionally annotated with a timezone. Timestamp values do not include any\n * leap seconds (in other words, all days are considered 86400 seconds long).\n * @param {TimeUnit_} [unit] The time unit.\n *  One of `TimeUnit.SECOND`, `TimeUnit.MILLISECOND` (default),\n *  `TimeUnit.MICROSECOND`, or `TimeUnit.NANOSECOND`.\n * @param {string|null} [timezone=null] An optional string for the name of a\n *  timezone. If provided, the value should either be a string as used in the\n *  Olson timezone database (the \"tz database\" or \"tzdata\"), such as\n *  \"America/New_York\", or an absolute timezone offset of the form \"+XX:XX\" or\n *  \"-XX:XX\", such as \"+07:30\".Whether a timezone string is present indicates\n *  different semantics about the data.\n * @returns {TimestampType} The time data type.\n */\nexport const timestamp = (unit = TimeUnit.MILLISECOND, timezone = null) => ({\n  typeId: Type.Timestamp,\n  unit: checkOneOf(unit, TimeUnit),\n  timezone,\n  values: int64Array\n});\n\n/**\n * Return an Interval type instance. Values represent calendar intervals stored\n * as integers for each date part. The supported *unit*s are year/moth,\n * day/time, and month/day/nanosecond intervals.\n *\n * `IntervalUnit.YEAR_MONTH` indicates the number of elapsed whole months,\n * stored as 32-bit signed integers.\n *\n * `IntervalUnit.DAY_TIME` indicates the number of elapsed days and\n * milliseconds (no leap seconds), stored as 2 contiguous 32-bit signed\n * integers (8-bytes in total).\n *\n * `IntervalUnit.MONTH_DAY_NANO` is a triple of the number of elapsed months,\n * days, and nanoseconds. The values are stored contiguously in 16-byte blocks.\n * Months and days are encoded as 32-bit signed integers and nanoseconds is\n * encoded as a 64-bit signed integer. Nanoseconds does not allow for leap\n * seconds. Each field is independent (e.g. there is no constraint that\n * nanoseconds have the same sign as days or that the quantity of nanoseconds\n * represents less than a day's worth of time).\n * @param {IntervalUnit_} unit  The interval unit.\n *  One of `IntervalUnit.YEAR_MONTH`, `IntervalUnit.DAY_TIME`, or\n *  `IntervalUnit.MONTH_DAY_NANO` (default).\n * @returns {IntervalType} The interval data type.\n */\nexport const interval = (unit = IntervalUnit.MONTH_DAY_NANO) => ({\n  typeId: Type.Interval,\n  unit: checkOneOf(unit, IntervalUnit),\n  values: unit === IntervalUnit.MONTH_DAY_NANO ? undefined : int32Array\n});\n\n/**\n * Return a List data type instance, representing variably-sized lists\n * (arrays) with 32-bit offsets. A list has a single child data type for\n * list entries. Lists are represented using integer offsets that indicate\n * list extents within a single child array containing all list values.\n * @param {FieldInput} child The child (list item) field or data type.\n * @returns {ListType} The list data type.\n */\nexport const list = (child) => ({\n  typeId: Type.List,\n  children: [ asField(child) ],\n  offsets: int32Array\n});\n\n/**\n * Return a Struct data type instance. A struct consists of multiple named\n * child data types. Struct values are stored as parallel child batches, one\n * per child type, and extracted to standard JavaScript objects.\n * @param {Field[] | Record<string, DataType>} children\n *  An array of property fields, or an object mapping property names to data\n *  types. If an object, the instantiated fields are assumed to be nullable\n *  and have no metadata.\n * @returns {StructType} The struct data type.\n */\nexport const struct = (children) => ({\n  typeId: Type.Struct,\n  children: Array.isArray(children) && isField(children[0])\n    ? /** @type {Field[]} */ (children)\n    : Object.entries(children).map(([name, type]) => field(name, type))\n});\n\n/**\n * Return a Union type instance. A union is a complex type with parallel\n * *children* data types. Union values are stored in either a sparse\n * (`UnionMode.Sparse`) or dense (`UnionMode.Dense`) layout *mode*. In a\n * sparse layout, child types are stored in parallel arrays with the same\n * lengths, resulting in many unused, empty values. In a dense layout, child\n * types have variable lengths and an offsets array is used to index the\n * appropriate value.\n *\n * By default, ids in the type vector refer to the index in the children\n * array. Optionally, *typeIds* provide an indirection between the child\n * index and the type id. For each child, `typeIds[index]` is the id used\n * in the type vector. The *typeIdForValue* argument provides a lookup\n * function for mapping input data to the proper child type id, and is\n * required if using builder methods.\n * @param {UnionMode_} mode The union mode.\n *  One of `UnionMode.Sparse` or `UnionMode.Dense`.\n * @param {FieldInput[]} children The children fields or data types.\n *  Types are mapped to nullable fields with no metadata.\n * @param {number[]} [typeIds]  Children type ids, in the same order as the\n *  children types. Type ids provide a level of indirection over children\n *  types. If not provided, the children indices are used as the type ids.\n * @param {(value: any, index: number) => number} [typeIdForValue]\n *  A function that takes an arbitrary value and a row index and returns a\n *  correponding union type id. Required by builder methods.\n * @returns {UnionType} The union data type.\n */\nexport const union = (mode, children, typeIds, typeIdForValue) => {\n  typeIds ??= children.map((v, i) => i);\n  return {\n    typeId: Type.Union,\n    mode: checkOneOf(mode, UnionMode),\n    typeIds,\n    typeMap: typeIds.reduce((m, id, i) => ((m[id] = i), m), {}),\n    children: children.map((v, i) => asField(v, `_${i}`)),\n    typeIdForValue,\n    offsets: int32Array,\n  };\n};\n\n/**\n * Create a FixedSizeBinary data type instance for opaque binary data where\n * each entry has the same fixed size.\n * @param {number} stride The fixed size in bytes.\n * @returns {FixedSizeBinaryType} The fixed size binary data type.\n */\nexport const fixedSizeBinary = (stride) => ({\n  typeId: Type.FixedSizeBinary,\n  stride\n});\n\n/**\n * Return a FixedSizeList type instance for list (array) data where every list\n * has the same fixed size. A list has a single child data type for list\n * entries. Fixed size lists are represented as a single child array containing\n * all list values, indexed using the known stride.\n * @param {FieldInput} child The list item data type.\n * @param {number} stride The fixed list size.\n * @returns {FixedSizeListType} The fixed size list data type.\n */\nexport const fixedSizeList = (child, stride) => ({\n  typeId: Type.FixedSizeList,\n  stride,\n  children: [ asField(child) ]\n});\n\n/**\n * Internal method to create a Map type instance.\n * @param {boolean} keysSorted Flag indicating if the map keys are sorted.\n * @param {Field} child The child fields.\n * @returns {MapType} The map data type.\n */\nexport const mapType = (keysSorted, child) => ({\n  typeId: Type.Map,\n  keysSorted,\n  children: [child],\n  offsets: int32Array\n});\n\n/**\n * Return a Map data type instance representing collections of key-value pairs.\n * A Map is a logical nested type that is represented as a list of key-value\n * structs. The key and value types are not constrained, so the application is\n * responsible for ensuring that the keys are hashable and unique, and that\n * keys are properly sorted if *keysSorted* is `true`.\n * @param {FieldInput} keyField The map key field or data type.\n * @param {FieldInput} valueField The map value field or data type.\n * @param {boolean} [keysSorted=false] Flag indicating if the map keys are\n *  sorted (default `false`).\n * @returns {MapType} The map data type.\n */\nexport const map = (keyField, valueField, keysSorted = false) => mapType(\n  keysSorted,\n  field(\n    'entries',\n    struct([ asField(keyField, 'key', false), asField(valueField, 'value') ]),\n    false\n  )\n);\n\n/**\n * Return a Duration data type instance. Durations represent an absolute length\n * of time unrelated to any calendar artifacts. The resolution defaults to\n * millisecond, but can be any of the other `TimeUnit` values. This type is\n * always represented as a 64-bit integer.\n * @param {TimeUnit_} unit\n * @returns {DurationType} The duration data type.\n */\nexport const duration = (unit = TimeUnit.MILLISECOND) => ({\n  typeId: Type.Duration,\n  unit: checkOneOf(unit, TimeUnit),\n  values: int64Array\n});\n\n/**\n * Return a LargeBinary data type instance for variably-sized opaque binary\n * data with 64-bit offsets, allowing representation of extremely large data\n * values.\n * @returns {LargeBinaryType} The large binary data type.\n */\nexport const largeBinary = () => ({\n  typeId: Type.LargeBinary,\n  offsets: int64Array\n});\n\n/**\n * Return a LargeUtf8 data type instance for Unicode string data of variable\n * length with 64-bit offsets, allowing representation of extremely large data\n * values. [UTF-8](https://en.wikipedia.org/wiki/UTF-8) code points are stored\n * as binary data.\n * @returns {LargeUtf8Type} The large utf8 data type.\n */\nexport const largeUtf8 = () => ({\n  typeId: Type.LargeUtf8,\n  offsets: int64Array\n});\n\n/**\n * Return a LargeList data type instance, representing variably-sized lists\n * (arrays) with 64-bit offsets, allowing representation of extremely large\n * data values. A list has a single child data type for list entries. Lists\n * are represented using integer offsets that indicate list extents within a\n * single child array containing all list values.\n * @param {FieldInput} child The child (list item) field or data type.\n * @returns {LargeListType} The large list data type.\n */\nexport const largeList = (child) => ({\n  typeId: Type.LargeList,\n  children: [ asField(child) ],\n  offsets: int64Array\n});\n\n/**\n * Return a RunEndEncoded data type instance, which compresses data by\n * representing consecutive repeated values as a run. This data type uses two\n * child arrays, `run_ends` and `values`. The `run_ends` child array must be\n * a 16, 32, or 64 bit integer array which encodes the indices at which the\n * run with the value in each corresponding index in the values child array\n * ends. Like list and struct types, the `values` array can be of any type.\n * @param {FieldInput} runsField The run-ends field or data type.\n * @param {FieldInput} valuesField The values field or data type.\n * @returns {RunEndEncodedType} The large list data type.\n */\nexport const runEndEncoded = (runsField, valuesField) => ({\n  typeId: Type.RunEndEncoded,\n  children: [\n    check(\n      asField(runsField, 'run_ends'),\n      (field) => field.type.typeId === Type.Int,\n      () => 'Run-ends must have an integer type.'\n    ),\n    asField(valuesField, 'values')\n  ]\n});\n\n/**\n * Return a BinaryView data type instance. BinaryView data is logically the\n * same as the Binary type, but the internal representation uses a view struct\n * that contains the string length and either the string's entire data inline\n * (for small strings) or an inlined prefix, an index of another buffer, and an\n * offset pointing to a slice in that buffer (for non-small strings).\n *\n * Flechette can encode and decode BinaryView data; however, Flechette does\n * not currently support building BinaryView columns from JavaScript values.\n * @returns {BinaryViewType} The binary view data type.\n */\nexport const binaryView = () => /** @type {BinaryViewType} */\n  (basicType(Type.BinaryView));\n\n/**\n * Return a Utf8View data type instance. Utf8View data is logically the same as\n * the Utf8 type, but the internal representation uses a view struct that\n * contains the string length and either the string's entire data inline (for\n * small strings) or an inlined prefix, an index of another buffer, and an\n * offset pointing to a slice in that buffer (for non-small strings).\n *\n * Flechette can encode and decode Utf8View data; however, Flechette does\n * not currently support building Utf8View columns from JavaScript values.\n * @returns {Utf8ViewType} The utf8 view data type.\n */\nexport const utf8View = () => /** @type {Utf8ViewType} */\n  (basicType(Type.Utf8View));\n\n/**\n * Return a ListView data type instance, representing variably-sized lists\n * (arrays) with 32-bit offsets. ListView data represents the same logical\n * types that List can, but contains both offsets and sizes allowing for\n * writes in any order and sharing of child values among list values.\n *\n * Flechette can encode and decode ListView data; however, Flechette does not\n * currently support building ListView columns from JavaScript values.\n * @param {FieldInput} child The child (list item) field or data type.\n * @returns {ListViewType} The list view data type.\n */\nexport const listView = (child) => ({\n  typeId: Type.ListView,\n  children: [ asField(child, 'value') ],\n  offsets: int32Array\n});\n\n/**\n * Return a LargeListView data type instance, representing variably-sized lists\n * (arrays) with 64-bit offsets, allowing representation of extremely large\n * data values. LargeListView data represents the same logical types that\n * LargeList can, but contains both offsets and sizes allowing for writes\n * in any order and sharing of child values among list values.\n *\n * Flechette can encode and decode LargeListView data; however, Flechette does\n * not currently support building LargeListView columns from JavaScript values.\n * @param {FieldInput} child The child (list item) field or data type.\n * @returns {LargeListViewType} The large list view data type.\n */\nexport const largeListView = (child) => ({\n  typeId: Type.LargeListView,\n  children: [ asField(child, 'value') ],\n  offsets: int64Array\n});\n","/**\n * @import { TimeUnit_, TypedArray } from '../types.js';\n */\nimport { float64Array, int32Array, int64Array, isInt64ArrayType, uint32Array, uint8Array } from './arrays.js';\nimport { TimeUnit } from '../constants.js';\n\n// typed arrays over a shared buffer to aid binary conversion\nconst f64 = new float64Array(2);\nconst buf = f64.buffer;\nconst i64 = new int64Array(buf);\nconst u32 = new uint32Array(buf);\nconst i32 = new int32Array(buf);\nconst u8 = new uint8Array(buf);\n\n/**\n * Return a value unchanged.\n * @template T\n * @param {T} value The value.\n * @returns {T} The value.\n */\nexport function identity(value) {\n  return value;\n}\n\n/**\n * Return a value coerced to a BigInt.\n * @param {*} value The value.\n * @returns {bigint} The BigInt value.\n */\nexport function toBigInt(value) {\n  return BigInt(value);\n}\n\n/**\n * Return an offset conversion method for the given data type.\n * @param {{ offsets: TypedArray}} type The array type.\n */\nexport function toOffset(type) {\n  return isInt64ArrayType(type) ? toBigInt : identity;\n}\n\n/**\n * Return the number of days from a millisecond timestamp.\n * @param {number} value The millisecond timestamp.\n * @returns {number} The number of days.\n */\nexport function toDateDay(value) {\n  return (value / 864e5) | 0;\n}\n\n/**\n * Return a timestamp conversion method for the given time unit.\n * @param {TimeUnit_} unit The time unit.\n * @returns {(value: number) => bigint} The conversion method.\n */\nexport function toTimestamp(unit) {\n  return unit === TimeUnit.SECOND ? value => toBigInt(value / 1e3)\n    : unit === TimeUnit.MILLISECOND ? toBigInt\n    : unit === TimeUnit.MICROSECOND ? value => toBigInt(value * 1e3)\n    : value => toBigInt(value * 1e6);\n}\n\n/**\n * Write month/day/nanosecond interval to a byte buffer.\n * @param {Array | Float64Array} interval The interval data.\n * @returns {Uint8Array} A byte buffer with the interval data.\n *  The returned buffer is reused across calls, and so should be\n *  copied to a target buffer immediately.\n */\nexport function toMonthDayNanoBytes([m, d, n]) {\n  i32[0] = m;\n  i32[1] = d;\n  i64[1] = toBigInt(n);\n  return u8;\n}\n\n/**\n * Coerce a bigint value to a number. Throws an error if the bigint value\n * lies outside the range of what a number can precisely represent.\n * @param {bigint} value The value to check and possibly convert.\n * @returns {number} The converted number value.\n */\nexport function toNumber(value) {\n  if (value > Number.MAX_SAFE_INTEGER || value < Number.MIN_SAFE_INTEGER) {\n    throw Error(`BigInt exceeds integer number representation: ${value}`);\n  }\n  return Number(value);\n}\n\n/**\n * Divide one BigInt value by another, and return the result as a number.\n * The division may involve unsafe integers and a loss of precision.\n * @param {bigint} num The numerator.\n * @param {bigint} div The divisor.\n * @returns {number} The result of the division as a floating point number.\n */\nexport function divide(num, div) {\n  return Number(num / div) + Number(num % div) / Number(div);\n}\n\n/**\n * Return a 32-bit decimal conversion method for the given decimal scale.\n * @param {number} scale The scale mapping fractional digits to integers.\n * @returns {(value: number|bigint) => number} A conversion method that maps\n *  floating point numbers to 32-bit decimals.\n */\nexport function toDecimal32(scale) {\n  return (value) => typeof value === 'bigint'\n    ? Number(value)\n    : Math.trunc(value * scale);\n}\n\n/**\n * Convert a floating point number or bigint to decimal bytes.\n * @param {number|bigint} value The number to encode. If a bigint, we assume\n *  it already represents the decimal in integer form with the correct scale.\n *  Otherwise, we assume a float that requires scaled integer conversion.\n * @param {BigUint64Array} buf The uint64 array to write to.\n * @param {number} offset The starting index offset into the array.\n * @param {number} stride The stride of an encoded decimal, in 64-bit steps.\n * @param {number} scale The scale mapping fractional digits to integers.\n */\nexport function toDecimal(value, buf, offset, stride, scale) {\n  const v = typeof value === 'bigint'\n    ? value\n    : toBigInt(Math.trunc(value * scale));\n  // assignment into uint64array performs needed truncation for us\n  buf[offset] = v;\n  if (stride > 1) {\n    buf[offset + 1] = (v >> 64n);\n    if (stride > 2) {\n      buf[offset + 2] = (v >> 128n);\n      buf[offset + 3] = (v >> 192n);\n    }\n  }\n}\n\n// helper method to extract uint64 values from bigints\nconst asUint64 = v => BigInt.asUintN(64, v);\n\n/**\n * Convert a 64-bit decimal value to a bigint.\n * @param {BigUint64Array} buf The uint64 array containing the decimal bytes.\n * @param {number} offset The starting index offset into the array.\n * @returns {bigint} The converted decimal as a bigint, such that all\n *  fractional digits are scaled up to integers (for example, 1.12 -> 112).\n */\nexport function fromDecimal64(buf, offset) {\n  return BigInt.asIntN(64, buf[offset]);\n}\n\n/**\n * Convert a 128-bit decimal value to a bigint.\n * @param {BigUint64Array} buf The uint64 array containing the decimal bytes.\n * @param {number} offset The starting index offset into the array.\n * @returns {bigint} The converted decimal as a bigint, such that all\n *  fractional digits are scaled up to integers (for example, 1.12 -> 112).\n */\nexport function fromDecimal128(buf, offset) {\n  const i = offset << 1;\n  let x;\n  if (BigInt.asIntN(64, buf[i + 1]) < 0) {\n    x = asUint64(~buf[i]) | (asUint64(~buf[i + 1]) << 64n);\n    x = -(x + 1n);\n  } else {\n    x = buf[i] | (buf[i + 1] << 64n);\n  }\n  return x;\n}\n\n/**\n * Convert a 256-bit decimal value to a bigint.\n * @param {BigUint64Array} buf The uint64 array containing the decimal bytes.\n * @param {number} offset The starting index offset into the array.\n * @returns {bigint} The converted decimal as a bigint, such that all\n *  fractional digits are scaled up to integers (for example, 1.12 -> 112).\n */\nexport function fromDecimal256(buf, offset) {\n  const i = offset << 2;\n  let x;\n  if (BigInt.asIntN(64, buf[i + 3]) < 0) {\n    x = asUint64(~buf[i])\n      | (asUint64(~buf[i + 1]) << 64n)\n      | (asUint64(~buf[i + 2]) << 128n)\n      | (asUint64(~buf[i + 3]) << 192n);\n    x = -(x + 1n);\n  } else {\n    x = buf[i]\n      | (buf[i + 1] << 64n)\n      | (buf[i + 2] << 128n)\n      | (buf[i + 3] << 192n);\n  }\n  return x;\n}\n\n/**\n * Convert a 16-bit float from integer bytes to a number.\n * Adapted from https://github.com/apache/arrow/blob/main/js/src/util/math.ts\n * @param {number} value The float as a 16-bit integer.\n * @returns {number} The converted 64-bit floating point number.\n */\nexport function fromFloat16(value) {\n  const expo = (value & 0x7C00) >> 10;\n  const sigf = (value & 0x03FF) / 1024;\n  const sign = (-1) ** ((value & 0x8000) >> 15);\n  switch (expo) {\n    case 0x1F: return sign * (sigf ? Number.NaN : 1 / 0);\n    case 0x00: return sign * (sigf ? 6.103515625e-5 * sigf : 0);\n  }\n  return sign * (2 ** (expo - 15)) * (1 + sigf);\n}\n\n/**\n * Convert a number to a 16-bit float as integer bytes..\n * Inspired by numpy's `npy_double_to_half`:\n * https://github.com/numpy/numpy/blob/5a5987291dc95376bb098be8d8e5391e89e77a2c/numpy/core/src/npymath/halffloat.c#L43\n * Adapted from https://github.com/apache/arrow/blob/main/js/src/util/math.ts\n * @param {number} value The 64-bit floating point number to convert.\n * @returns {number} The converted 16-bit integer.\n */\nexport function toFloat16(value) {\n  if (value !== value) return 0x7E00; // NaN\n  f64[0] = value;\n\n  // Magic numbers:\n  // 0x80000000 = 10000000 00000000 00000000 00000000 -- masks the 32nd bit\n  // 0x7ff00000 = 01111111 11110000 00000000 00000000 -- masks the 21st-31st bits\n  // 0x000fffff = 00000000 00001111 11111111 11111111 -- masks the 1st-20th bit\n  const sign = (u32[1] & 0x80000000) >> 16 & 0xFFFF;\n  let expo = (u32[1] & 0x7FF00000), sigf = 0x0000;\n\n  if (expo >= 0x40F00000) {\n    //\n    // If exponent overflowed, the float16 is either NaN or Infinity.\n    // Rules to propagate the sign bit: mantissa > 0 ? NaN : +/-Infinity\n    //\n    // Magic numbers:\n    // 0x40F00000 = 01000000 11110000 00000000 00000000 -- 6-bit exponent overflow\n    // 0x7C000000 = 01111100 00000000 00000000 00000000 -- masks the 27th-31st bits\n    //\n    // returns:\n    // qNaN, aka 32256 decimal, 0x7E00 hex, or 01111110 00000000 binary\n    // sNaN, aka 32000 decimal, 0x7D00 hex, or 01111101 00000000 binary\n    // +inf, aka 31744 decimal, 0x7C00 hex, or 01111100 00000000 binary\n    // -inf, aka 64512 decimal, 0xFC00 hex, or 11111100 00000000 binary\n    //\n    // If mantissa is greater than 23 bits, set to +Infinity like numpy\n    if (u32[0] > 0) {\n      expo = 0x7C00;\n    } else {\n      expo = (expo & 0x7C000000) >> 16;\n      sigf = (u32[1] & 0x000FFFFF) >> 10;\n    }\n  } else if (expo <= 0x3F000000) {\n    //\n    // If exponent underflowed, the float is either signed zero or subnormal.\n    //\n    // Magic numbers:\n    // 0x3F000000 = 00111111 00000000 00000000 00000000 -- 6-bit exponent underflow\n    //\n    sigf = 0x100000 + (u32[1] & 0x000FFFFF);\n    sigf = 0x100000 + (sigf << ((expo >> 20) - 998)) >> 21;\n    expo = 0;\n  } else {\n    //\n    // No overflow or underflow, rebase the exponent and round the mantissa\n    // Magic numbers:\n    // 0x200 = 00000010 00000000 -- masks off the 10th bit\n    //\n    // Ensure the first mantissa bit (the 10th one) is 1 and round\n    expo = (expo - 0x3F000000) >> 10;\n    sigf = ((u32[1] & 0x000FFFFF) + 0x200) >> 10;\n  }\n  return sign | expo | sigf & 0xFFFF;\n}\n","import { isArray } from './arrays.js';\nimport { isDate } from './objects.js';\n\nconst textDecoder = new TextDecoder('utf-8');\nconst textEncoder = new TextEncoder();\n\n/**\n * Return a UTF-8 string decoded from a byte buffer.\n * @param {Uint8Array} buf The byte buffer.\n * @returns {string} The decoded string.\n */\nexport function decodeUtf8(buf) {\n  return textDecoder.decode(buf);\n}\n\n/**\n * Return a byte buffer encoded from a UTF-8 string.\n * @param {string } str The string to encode.\n * @returns {Uint8Array} The encoded byte buffer.\n */\nexport function encodeUtf8(str) {\n  return textEncoder.encode(str);\n}\n\n/**\n * Return a string-coercible key value that uniquely identifies a value.\n * @param {*} value The input value.\n * @returns {string} The key string.\n */\nexport function keyString(value) {\n  const val = typeof value !== 'object' || !value ? (value ?? null)\n    : isDate(value) ? +value\n    // @ts-ignore\n    : isArray(value) ? `[${value.map(keyString)}]`\n    : objectKey(value);\n  return `${val}`;\n}\n\nfunction objectKey(value) {\n  let s = '';\n  let i = -1;\n  for (const k in value) {\n    if (++i > 0) s += ',';\n    s += `\"${k}\":${keyString(value[k])}`;\n  }\n  return `{${s}}`;\n}\n","import { toNumber } from './numbers.js';\nimport { decodeUtf8 } from './strings.js';\n\n/** The size in bytes of a 32-bit integer. */\nexport const SIZEOF_INT = 4;\n\n/** The size in bytes of a 16-bit integer. */\nexport const SIZEOF_SHORT = 2;\n\n/**\n * Return a boolean for a single bit in a bitmap.\n * @param {Uint8Array} bitmap The bitmap.\n * @param {number} index The bit index to read.\n * @returns {boolean} The boolean bitmap value.\n */\nexport function decodeBit(bitmap, index) {\n  return (bitmap[index >> 3] & 1 << (index % 8)) !== 0;\n}\n\n/**\n * Lookup helper for flatbuffer object (table) entries.\n * @param {Uint8Array} buf The byte buffer.\n * @param {number} index The base index of the object.\n */\nexport function readObject(buf, index) {\n  const pos = index + readInt32(buf, index);\n  const vtable = pos - readInt32(buf, pos);\n  const size = readInt16(buf, vtable);\n  /**\n   * Retrieve a value from a flatbuffer table layout.\n   * @template T\n   * @param {number} index The table entry index.\n   * @param {(buf: Uint8Array, offset: number) => T} read Read function to invoke.\n   * @param {T} [fallback=null] The default fallback value.\n   * @returns {T}\n   */\n  return (index, read, fallback = null) => {\n    if (index < size) {\n      const off = readInt16(buf, vtable + index);\n      if (off) return read(buf, pos + off);\n    }\n    return fallback;\n  };\n}\n\n/**\n * Return a buffer offset value.\n * @param {Uint8Array} buf\n * @param {number} offset\n * @returns {number}\n */\nexport function readOffset(buf, offset) {\n  return offset;\n}\n\n/**\n * Return a boolean value.\n * @param {Uint8Array} buf\n * @param {number} offset\n * @returns {boolean}\n */\nexport function readBoolean(buf, offset) {\n  return !!readInt8(buf, offset);\n}\n\n/**\n * Return a signed 8-bit integer value.\n * @param {Uint8Array} buf\n * @param {number} offset\n * @returns {number}\n */\nexport function readInt8(buf, offset) {\n  return readUint8(buf, offset) << 24 >> 24;\n}\n\n/**\n * Return an unsigned 8-bit integer value.\n * @param {Uint8Array} buf\n * @param {number} offset\n * @returns {number}\n */\nexport function readUint8(buf, offset) {\n  return buf[offset];\n}\n\n/**\n * Return a signed 16-bit integer value.\n * @param {Uint8Array} buf\n * @param {number} offset\n * @returns {number}\n */\nexport function readInt16(buf, offset) {\n  return readUint16(buf, offset) << 16 >> 16;\n}\n\n/**\n * Return an unsigned 16-bit integer value.\n * @param {Uint8Array} buf\n * @param {number} offset\n * @returns {number}\n */\nexport function readUint16(buf, offset) {\n  return buf[offset] | buf[offset + 1] << 8;\n}\n\n/**\n * Return a signed 32-bit integer value.\n * @param {Uint8Array} buf\n * @param {number} offset\n * @returns {number}\n */\nexport function readInt32(buf, offset) {\n  return buf[offset]\n    | buf[offset + 1] << 8\n    | buf[offset + 2] << 16\n    | buf[offset + 3] << 24;\n}\n\n/**\n * Return an unsigned 32-bit integer value.\n * @param {Uint8Array} buf\n * @param {number} offset\n * @returns {number}\n */\nexport function readUint32(buf, offset) {\n  return readInt32(buf, offset) >>> 0;\n}\n\n/**\n * Return a signed 64-bit integer value coerced to a JS number.\n * Throws an error if the value exceeds what a JS number can represent.\n * @param {Uint8Array} buf\n * @param {number} offset\n * @returns {number}\n */\nexport function readInt64(buf, offset) {\n  return toNumber(BigInt.asIntN(\n    64,\n    BigInt(readUint32(buf, offset)) +\n      (BigInt(readUint32(buf, offset + SIZEOF_INT)) << 32n)\n  ));\n}\n\n/**\n * Create a JavaScript string from UTF-8 data stored inside the FlatBuffer.\n * This allocates a new string and converts to wide chars upon each access.\n * @param {Uint8Array} buf The byte buffer.\n * @param {number} index The index of the string entry.\n * @returns {string} The decoded string.\n */\nexport function readString(buf, index) {\n  let offset = index + readInt32(buf, index); // get the string offset\n  const length = readInt32(buf, offset);  // get the string length\n  offset += SIZEOF_INT; // skip length value\n  return decodeUtf8(buf.subarray(offset, offset + length));\n}\n\n/**\n * Extract a flatbuffer vector to an array.\n * @template T\n * @param {Uint8Array} buf The byte buffer.\n * @param {number} offset The offset location of the vector.\n * @param {number} stride The stride between vector entries.\n * @param {(buf: Uint8Array, pos: number) => T} extract Vector entry extraction function.\n * @returns {T[]} The extracted vector entries.\n */\nexport function readVector(buf, offset, stride, extract) {\n  if (!offset) return [];\n\n  // get base position by adding offset delta\n  const base = offset + readInt32(buf, offset);\n\n  // read vector size, extract entries\n  return Array.from(\n    { length: readInt32(buf, base) },\n    (_, i) => extract(buf, base + SIZEOF_INT + i * stride)\n  );\n}\n","/**\n * @import { Batch } from '../batch.js';\n */\n\n/**\n * Symbol for the row index value of a struct object proxy.\n */\nexport const RowIndex = Symbol('rowIndex');\n\n/**\n * Returns a row proxy object factory. The resulting method takes a\n * batch-level row index as input and returns an object that proxies\n * access to underlying batches.\n * @param {string[]} names The column (property) names\n * @param {Batch[]} batches The value batches.\n * @returns {(index: number) => Record<string, any>}\n */\nexport function proxyFactory(names, batches) {\n  class RowObject {\n    /**\n     * Create a new proxy row object representing a struct or table row.\n     * @param {number} index The record batch row index.\n     */\n    constructor(index) {\n      this[RowIndex] = index;\n    }\n\n    /**\n     * Return a JSON-compatible object representation.\n     */\n    toJSON() {\n      return structObject(names, batches, this[RowIndex]);\n    }\n  };\n\n  // prototype for row proxy objects\n  const proto = RowObject.prototype;\n\n  for (let i = 0; i < names.length; ++i) {\n    // skip duplicated column names\n    if (Object.hasOwn(proto, names[i])) continue;\n\n    // add a getter method for the current batch\n    const batch = batches[i];\n    Object.defineProperty(proto, names[i], {\n      get() { return batch.at(this[RowIndex]); },\n      enumerable: true\n    });\n  }\n\n  return index => new RowObject(index);\n}\n\n/**\n * Returns a row object factory. The resulting method takes a\n * batch-level row index as input and returns an object whose property\n * values have been extracted from the batches.\n * @param {string[]} names The column (property) names\n * @param {Batch[]} batches The value batches.\n * @returns {(index: number) => Record<string, any>}\n */\nexport function objectFactory(names, batches) {\n  return index => structObject(names, batches, index);\n}\n\n/**\n * Return a vanilla object representing a struct (row object) type.\n * @param {string[]} names The column (property) names\n * @param {Batch[]} batches The value batches.\n * @param {number} index The record batch row index.\n * @returns {Record<string, any>}\n */\nexport function structObject(names, batches, index) {\n  const obj = {};\n  for (let i = 0; i < names.length; ++i) {\n    obj[names[i]] = batches[i].at(index);\n  }\n  return obj;\n}\n","/**\n * @import { Column } from './column.js'\n * @import { DataType, DecimalType, IntegerArray, OffsetArray, TypedArray, TypedArrayConstructor, ValueArray } from './types.js'\n */\nimport { bisect, float64Array } from './util/arrays.js';\nimport { divide, fromDecimal128, fromDecimal256, fromDecimal64, toNumber } from './util/numbers.js';\nimport { decodeBit, readInt32, readInt64 } from './util/read.js';\nimport { decodeUtf8 } from './util/strings.js';\nimport { objectFactory, proxyFactory } from './util/struct.js';\n\n/**\n * Check if the input is a batch that supports direct access to\n * binary data in the form of typed arrays.\n * @param {Batch<any>?} batch The data batch to check.\n * @returns {boolean} True if a direct batch, false otherwise.\n */\nexport function isDirectBatch(batch) {\n  return batch instanceof DirectBatch;\n}\n\n/**\n * Column values from a single record batch.\n * A column may contain multiple batches.\n * @template T\n */\nexport class Batch {\n  /**\n   * The array type to use when extracting data from the batch.\n   * A null value indicates that the array type should match\n   * the type of the batch's values array.\n   * @type {ArrayConstructor | TypedArrayConstructor | null}\n   */\n  static ArrayType = null;\n\n  /**\n   * Create a new column batch.\n   * @param {object} options\n   * @param {number} options.length The length of the batch\n   * @param {number} options.nullCount The null value count\n   * @param {DataType} options.type The data type.\n   * @param {Uint8Array} [options.validity] Validity bitmap buffer\n   * @param {TypedArray} [options.values] Values buffer\n   * @param {OffsetArray} [options.offsets] Offsets buffer\n   * @param {OffsetArray} [options.sizes] Sizes buffer\n   * @param {Batch[]} [options.children] Children batches\n   */\n  constructor({\n    length,\n    nullCount,\n    type,\n    validity,\n    values,\n    offsets,\n    sizes,\n    children\n  }) {\n    this.length = length;\n    this.nullCount = nullCount;\n    this.type = type;\n    this.validity = validity;\n    this.values = values;\n    this.offsets = offsets;\n    this.sizes = sizes;\n    this.children = children;\n\n    // optimize access if this batch has no null values\n    // some types (like union) may have null values in\n    // child batches, but no top-level validity buffer\n    if (!nullCount || !this.validity) {\n      /** @type {(index: number) => T | null} */\n      this.at = index => this.value(index);\n    }\n  }\n\n  /**\n   * Provide an informative object string tag.\n   */\n  get [Symbol.toStringTag]() {\n    return 'Batch';\n  }\n\n  /**\n   * Return the value at the given index.\n   * @param {number} index The value index.\n   * @returns {T | null} The value.\n   */\n  at(index) {\n    return this.isValid(index) ? this.value(index) : null;\n  }\n\n  /**\n   * Check if a value at the given index is valid (non-null).\n   * @param {number} index The value index.\n   * @returns {boolean} True if valid, false otherwise.\n   */\n  isValid(index) {\n    return decodeBit(this.validity, index);\n  }\n\n  /**\n   * Return the value at the given index. This method does not check the\n   * validity bitmap and is intended primarily for internal use. In most\n   * cases, callers should use the `at()` method instead.\n   * @param {number} index The value index\n   * @returns {T} The value, ignoring the validity bitmap.\n   */\n  value(index) {\n    return /** @type {T} */ (this.values[index]);\n  }\n\n  /**\n   * Extract an array of values within the given index range. Unlike\n   * Array.slice, all arguments are required and may not be negative indices.\n   * @param {number} start The starting index, inclusive\n   * @param {number} end The ending index, exclusive\n   * @returns {ValueArray<T?>} The slice of values\n   */\n  slice(start, end) {\n    const n = end - start;\n    const values = Array(n);\n    for (let i = 0; i < n; ++i) {\n      values[i] = this.at(start + i);\n    }\n    return values;\n  }\n\n  /**\n   * Return an iterator over the values in this batch.\n   * @returns {Iterator<T?>}\n   */\n  *[Symbol.iterator]() {\n    for (let i = 0; i < this.length; ++i) {\n      yield this.at(i);\n    }\n  }\n}\n\n/**\n * A batch whose value buffer can be used directly, without transformation.\n * @template T\n * @extends {Batch<T>}\n */\nexport class DirectBatch extends Batch {\n  /**\n   * Create a new column batch with direct value array access.\n   * @param {object} options\n   * @param {number} options.length The length of the batch\n   * @param {number} options.nullCount The null value count\n   * @param {DataType} options.type The data type.\n   * @param {Uint8Array} [options.validity] Validity bitmap buffer\n   * @param {TypedArray} options.values Values buffer\n   */\n  constructor(options) {\n    super(options);\n    // underlying buffers may be padded, exceeding the logical batch length\n    // we trim the values array so we can safely access it directly\n    const { length, values } = this;\n    this.values = values.subarray(0, length);\n  }\n\n  /**\n   * Extract an array of values within the given index range. Unlike\n   * Array.slice, all arguments are required and may not be negative indices.\n   * When feasible, a zero-copy subarray of a typed array is returned.\n   * @param {number} start The starting index, inclusive\n   * @param {number} end The ending index, exclusive\n   * @returns {ValueArray<T?>} The slice of values\n   */\n  slice(start, end) {\n    // @ts-ignore\n    return this.nullCount\n      ? super.slice(start, end)\n      : this.values.subarray(start, end);\n  }\n\n  /**\n   * Return an iterator over the values in this batch.\n   * @returns {Iterator<T?>}\n   */\n  [Symbol.iterator]() {\n    return this.nullCount\n      ? super[Symbol.iterator]()\n      : /** @type {Iterator<T?>} */ (this.values[Symbol.iterator]());\n  }\n}\n\n/**\n * A batch whose values are transformed to 64-bit numbers.\n * @extends {Batch<number>}\n */\nexport class NumberBatch extends Batch {\n  static ArrayType = float64Array;\n}\n\n/**\n * A batch whose values should be returned in a standard array.\n * @template T\n * @extends {Batch<T>}\n */\nexport class ArrayBatch extends Batch {\n  static ArrayType = Array;\n}\n\n/**\n * A batch of null values only.\n * @extends {ArrayBatch<null>}\n */\nexport class NullBatch extends ArrayBatch {\n  /**\n   * @param {number} index The value index\n   * @returns {null}\n   */\n  value(index) { // eslint-disable-line no-unused-vars\n    return null;\n  }\n}\n\n/**\n * A batch that coerces BigInt values to 64-bit numbers.\n * @extends {NumberBatch}\n */\nexport class Int64Batch extends NumberBatch {\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    return toNumber(/** @type {bigint} */ (this.values[index]));\n  }\n}\n\n/**\n * A batch of 16-bit floating point numbers, accessed as unsigned\n * 16-bit ints and transformed to 64-bit numbers.\n */\nexport class Float16Batch extends NumberBatch {\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    const v = /** @type {number} */ (this.values[index]);\n    const expo = (v & 0x7C00) >> 10;\n    const sigf = (v & 0x03FF) / 1024;\n    const sign = (-1) ** ((v & 0x8000) >> 15);\n    switch (expo) {\n      case 0x1F: return sign * (sigf ? Number.NaN : 1 / 0);\n      case 0x00: return sign * (sigf ? 6.103515625e-5 * sigf : 0);\n    }\n    return sign * (2 ** (expo - 15)) * (1 + sigf);\n  }\n}\n\n/**\n * A batch of boolean values stored as a bitmap.\n * @extends {ArrayBatch<boolean>}\n */\nexport class BoolBatch extends ArrayBatch {\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    return decodeBit(/** @type {Uint8Array} */ (this.values), index);\n  }\n}\n\n/**\n * A batch of 32-bit decimal numbers, returned as converted 64-bit floating\n * point numbers. Number coercion may be lossy if the decimal precision can\n * not be represented in a 64-bit floating point format.\n * @extends {NumberBatch}\n */\nexport class Decimal32NumberBatch extends NumberBatch {\n  constructor(options) {\n    super(options);\n    const { scale } = /** @type {DecimalType} */ (this.type);\n    this.scale = 10 ** scale;\n  }\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    return /** @type {number} */(this.values[index]) / this.scale;\n  }\n}\n\n/**\n * An abstract class for a batch of 64-, 128- or 256-bit decimal numbers,\n * accessed in strided BigUint64Arrays.\n * @template T\n * @extends {Batch<T>}\n */\nexport class DecimalBatch extends Batch {\n  constructor(options) {\n    super(options);\n    const { bitWidth, scale } = /** @type {DecimalType} */ (this.type);\n    this.decimal = bitWidth === 64 ? fromDecimal64\n      : bitWidth === 128 ? fromDecimal128\n      : fromDecimal256;\n    this.scale = 10n ** BigInt(scale);\n  }\n}\n\n/**\n * A batch of 64-, 128- or 256-bit decimal numbers, returned as converted\n * 64-bit floating point numbers. Number coercion may be lossy if the decimal\n * precision can not be represented in a 64-bit floating point format.\n * @extends {DecimalBatch<number>}\n */\nexport class DecimalNumberBatch extends DecimalBatch {\n  static ArrayType = float64Array;\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    return divide(\n      this.decimal(/** @type {BigUint64Array} */ (this.values), index),\n      this.scale\n    );\n  }\n}\n\n/**\n * A batch of 64-, 128- or 256-bit decimal numbers, returned as scaled\n * bigint values, such that all fractional digits have been shifted\n * to integer places by the decimal type scale factor.\n * @extends {DecimalBatch<bigint>}\n */\nexport class DecimalBigIntBatch extends DecimalBatch {\n  static ArrayType = Array;\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    return this.decimal(/** @type {BigUint64Array} */ (this.values), index);\n  }\n}\n\n/**\n * A batch of date or timestamp values that are coerced to UNIX epoch timestamps\n * and returned as JS Date objects. This batch wraps a source batch that provides\n * timestamp values.\n * @extends {ArrayBatch<Date>}\n */\nexport class DateBatch extends ArrayBatch {\n  /**\n   * Create a new date batch.\n   * @param {Batch<number>} batch A batch of timestamp values.\n   */\n  constructor(batch) {\n    super(batch);\n    this.source = batch;\n  }\n\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    return new Date(this.source.value(index));\n  }\n}\n\n/**\n * A batch of dates as day counts, coerced to timestamp numbers.\n */\nexport class DateDayBatch extends NumberBatch {\n  /**\n   * @param {number} index The value index\n   * @returns {number}\n   */\n  value(index) {\n    // epoch days to milliseconds\n    return 86400000 * /** @type {number} */ (this.values[index]);\n  }\n}\n\n/**\n * A batch of dates as millisecond timestamps, coerced to numbers.\n */\nexport const DateDayMillisecondBatch = Int64Batch;\n\n/**\n * A batch of timestaps in seconds, coerced to millisecond numbers.\n */\nexport class TimestampSecondBatch extends Int64Batch {\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    return super.value(index) * 1e3; // seconds to milliseconds\n  }\n}\n\n/**\n * A batch of timestaps in milliseconds, coerced to numbers.\n */\nexport const TimestampMillisecondBatch = Int64Batch;\n\n/**\n * A batch of timestaps in microseconds, coerced to millisecond numbers.\n */\nexport class TimestampMicrosecondBatch extends Int64Batch {\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    // microseconds to milliseconds\n    return divide(/** @type {bigint} */ (this.values[index]), 1000n);\n  }\n}\n\n/**\n * A batch of timestaps in nanoseconds, coerced to millisecond numbers.\n */\nexport class TimestampNanosecondBatch extends Int64Batch {\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    // nanoseconds to milliseconds\n    return divide(/** @type {bigint} */ (this.values[index]), 1000000n);\n  }\n}\n\n/**\n * A batch of day/time intervals, returned as two-element 32-bit int arrays.\n * @extends {ArrayBatch<Int32Array>}\n */\nexport class IntervalDayTimeBatch extends ArrayBatch {\n  /**\n   * @param {number} index The value index\n   * @returns {Int32Array}\n   */\n  value(index) {\n    const values = /** @type {Int32Array} */ (this.values);\n    return values.subarray(index << 1, (index + 1) << 1);\n  }\n}\n\n/**\n * A batch of month/day/nanosecond intervals, returned as three-element arrays.\n * @extends {ArrayBatch<Float64Array>}\n */\nexport class IntervalMonthDayNanoBatch extends ArrayBatch {\n  /**\n   * @param {number} index The value index\n   */\n  value(index) {\n    const values = /** @type {Uint8Array} */ (this.values);\n    const base = index << 4;\n    return Float64Array.of(\n      readInt32(values, base),\n      readInt32(values, base + 4),\n      readInt64(values, base + 8)\n    );\n  }\n}\n\nconst offset32 = ({values, offsets}, index) => values.subarray(offsets[index], offsets[index + 1]);\nconst offset64 = ({values, offsets}, index) => values.subarray(toNumber(offsets[index]), toNumber(offsets[index + 1]));\n\n/**\n * A batch of binary blobs with variable offsets, returned as byte buffers of\n * unsigned 8-bit integers. The offsets are 32-bit ints.\n * @extends {ArrayBatch<Uint8Array>}\n */\nexport class BinaryBatch extends ArrayBatch {\n  /**\n   * @param {number} index\n   * @returns {Uint8Array}\n   */\n  value(index) {\n    return offset32(this, index);\n  }\n}\n\n/**\n * A batch of binary blobs with variable offsets, returned as byte buffers of\n * unsigned 8-bit integers. The offsets are 64-bit ints. Value extraction will\n * fail if an offset exceeds `Number.MAX_SAFE_INTEGER`.\n * @extends {ArrayBatch<Uint8Array>}\n */\nexport class LargeBinaryBatch extends ArrayBatch {\n  /**\n   * @param {number} index\n   * @returns {Uint8Array}\n   */\n  value(index) {\n    return offset64(this, index);\n  }\n}\n\n/**\n * A batch of UTF-8 strings with variable offsets. The offsets are 32-bit ints.\n * @extends {ArrayBatch<string>}\n */\nexport class Utf8Batch extends ArrayBatch {\n  /**\n   * @param {number} index\n   */\n  value(index) {\n    return decodeUtf8(offset32(this, index));\n  }\n}\n\n/**\n * A batch of UTF-8 strings with variable offsets. The offsets are 64-bit ints.\n * Value extraction will fail if an offset exceeds `Number.MAX_SAFE_INTEGER`.\n * @extends {ArrayBatch<string>}\n */\nexport class LargeUtf8Batch extends ArrayBatch {\n  /**\n   * @param {number} index\n   */\n  value(index) {\n    return decodeUtf8(offset64(this, index));\n  }\n}\n\n/**\n * A batch of list (array) values of variable length. The list offsets are\n * 32-bit ints.\n * @template V\n * @extends {ArrayBatch<ValueArray<V>>}\n */\nexport class ListBatch extends ArrayBatch {\n  /**\n   * @param {number} index\n   * @returns {ValueArray<V>}\n   */\n  value(index) {\n    const offsets = /** @type {Int32Array} */ (this.offsets);\n    return this.children[0].slice(offsets[index], offsets[index + 1]);\n  }\n}\n\n/**\n * A batch of list (array) values of variable length. The list offsets are\n * 64-bit ints. Value extraction will fail if an offset exceeds\n * `Number.MAX_SAFE_INTEGER`.\n * @template V\n * @extends {ArrayBatch<ValueArray<V>>}\n */\nexport class LargeListBatch extends ArrayBatch {\n  /**\n   * @param {number} index\n   * @returns {ValueArray<V>}\n   */\n  value(index) {\n    const offsets = /** @type {BigInt64Array} */ (this.offsets);\n    return this.children[0].slice(toNumber(offsets[index]), toNumber(offsets[index + 1]));\n  }\n}\n\n/**\n * A batch of list (array) values of variable length. The list offsets and\n * sizes are 32-bit ints.\n * @template V\n * @extends {ArrayBatch<ValueArray<V>>}\n */\nexport class ListViewBatch extends ArrayBatch {\n  /**\n   * @param {number} index\n   * @returns {ValueArray<V>}\n   */\n  value(index) {\n    const a = /** @type {number} */ (this.offsets[index]);\n    const b = a + /** @type {number} */ (this.sizes[index]);\n    return this.children[0].slice(a, b);\n  }\n}\n\n/**\n * A batch of list (array) values of variable length. The list offsets and\n * sizes are 64-bit ints. Value extraction will fail if an offset or size\n * exceeds `Number.MAX_SAFE_INTEGER`.\n * @template V\n * @extends {ArrayBatch<ValueArray<V>>}\n */\nexport class LargeListViewBatch extends ArrayBatch {\n  /**\n   * @param {number} index\n   * @returns {ValueArray<V>}\n   */\n  value(index) {\n    const a = /** @type {bigint} */ (this.offsets[index]);\n    const b = a + /** @type {bigint} */ (this.sizes[index]);\n    return this.children[0].slice(toNumber(a), toNumber(b));\n  }\n}\n\n/**\n * A batch with a fixed stride.\n * @template T\n * @extends {ArrayBatch<T>}\n */\nclass FixedBatch extends ArrayBatch {\n  constructor(options) {\n    super(options);\n    /** @type {number} */\n    // @ts-ignore\n    this.stride = this.type.stride;\n  }\n}\n\n/**\n * A batch of binary blobs of fixed size, returned as byte buffers of unsigned\n * 8-bit integers.\n * @extends {FixedBatch<Uint8Array>}\n */\nexport class FixedBinaryBatch extends FixedBatch {\n  /**\n   * @param {number} index\n   * @returns {Uint8Array}\n   */\n  value(index) {\n    const { stride, values } = this;\n    return /** @type {Uint8Array} */ (values)\n      .subarray(index * stride, (index + 1) * stride);\n  }\n}\n\n/**\n * A batch of list (array) values of fixed length.\n * @template V\n * @extends {FixedBatch<ValueArray<V>>}\n */\nexport class FixedListBatch extends FixedBatch {\n  /**\n   * @param {number} index\n   * @returns {ValueArray<V>}\n   */\n  value(index) {\n    const { children, stride } = this;\n    return children[0].slice(index * stride, (index + 1) * stride);\n  }\n}\n\n/**\n * Extract Map key-value pairs from parallel child batches.\n */\nfunction pairs({ children, offsets }, index) {\n  const [ keys, vals ] = children[0].children;\n  const start = offsets[index];\n  const end = offsets[index + 1];\n  const entries = [];\n  for (let i = start; i < end; ++i) {\n    entries.push([keys.at(i), vals.at(i)]);\n  }\n  return entries;\n}\n\n/**\n * A batch of map (key, value) values. The map is represented as a list of\n * key-value structs.\n * @template K, V\n * @extends {ArrayBatch<[K, V][]>}\n */\nexport class MapEntryBatch extends ArrayBatch {\n  /**\n   * Return the value at the given index.\n   * @param {number} index The value index.\n   * @returns {[K, V][]} The map entries as an array of [key, value] arrays.\n   */\n  value(index) {\n    return /** @type {[K, V][]} */ (pairs(this, index));\n  }\n}\n\n/**\n * A batch of map (key, value) values. The map is represented as a list of\n * key-value structs.\n * @template K, V\n * @extends {ArrayBatch<Map<K, V>>}\n */\nexport class MapBatch extends ArrayBatch {\n  /**\n   * Return the value at the given index.\n   * @param {number} index The value index.\n   * @returns {Map<K, V>} The map value.\n   */\n  value(index) {\n    return new Map(/** @type {[K, V][]} */ (pairs(this, index)));\n  }\n}\n\n/**\n * A batch of union-type values with a sparse layout, enabling direct\n * lookup from the child value batches.\n * @template T\n * @extends {ArrayBatch<T>}\n */\nexport class SparseUnionBatch extends ArrayBatch {\n  /**\n   * Create a new column batch.\n   * @param {object} options\n   * @param {number} options.length The length of the batch\n   * @param {number} options.nullCount The null value count\n   * @param {DataType} options.type The data type.\n   * @param {Uint8Array} [options.validity] Validity bitmap buffer\n   * @param {Int32Array} [options.offsets] Offsets buffer\n   * @param {Batch[]} options.children Children batches\n   * @param {Int8Array} options.typeIds Union type ids buffer\n   * @param {Record<string, number>} options.map A typeId to children index map\n   */\n  constructor({ typeIds, ...options }) {\n    super(options);\n    /** @type {Int8Array} */\n    this.typeIds = typeIds;\n    /** @type {Record<string, number>} */\n    // @ts-ignore\n    this.typeMap = this.type.typeMap;\n  }\n\n  /**\n   * @param {number} index The value index.\n   */\n  value(index, offset = index) {\n    const { typeIds, children, typeMap } = this;\n    return children[typeMap[typeIds[index]]].at(offset);\n  }\n}\n\n/**\n * A batch of union-type values with a dense layout, reqiring offset\n * lookups from the child value batches.\n * @template T\n * @extends {SparseUnionBatch<T>}\n */\nexport class DenseUnionBatch extends SparseUnionBatch {\n  /**\n   * @param {number} index The value index.\n   */\n  value(index) {\n    return super.value(index, /** @type {number} */ (this.offsets[index]));\n  }\n}\n\n/**\n * A batch of struct values, containing a set of named properties.\n * Struct property values are extracted and returned as JS objects.\n * @extends {ArrayBatch<Record<string, any>>}\n */\nexport class StructBatch extends ArrayBatch {\n  constructor(options, factory = objectFactory) {\n    super(options);\n    /** @type {string[]} */\n    // @ts-ignore\n    this.names = this.type.children.map(child => child.name);\n    this.factory = factory(this.names, this.children);\n  }\n\n  /**\n   * @param {number} index The value index.\n   * @returns {Record<string, any>}\n   */\n  value(index) {\n    return this.factory(index);\n  }\n}\n\n/**\n * A batch of struct values, containing a set of named properties.\n * Structs are returned as proxy objects that extract data directly\n * from underlying Arrow batches.\n * @extends {StructBatch}\n */\nexport class StructProxyBatch extends StructBatch {\n  constructor(options) {\n    super(options, proxyFactory);\n  }\n}\n\n/**\n * A batch of run-end-encoded values.\n * @template T\n * @extends {ArrayBatch<T>}\n */\nexport class RunEndEncodedBatch extends ArrayBatch {\n  /**\n   * @param {number} index The value index.\n   */\n  value(index) {\n    const [ { values: runs }, vals ] = this.children;\n    return vals.at(\n      bisect(/** @type {IntegerArray} */(runs), index)\n    );\n  }\n}\n\n/**\n * A batch of dictionary-encoded values.\n * @template T\n * @extends {ArrayBatch<T>}\n */\nexport class DictionaryBatch extends ArrayBatch {\n  /**\n   * Register the backing dictionary. Dictionaries are added\n   * after batch creation as the complete dictionary may not\n   * be finished across multiple record batches.\n   * @param {Column<T>} dictionary\n   * The dictionary of column values.\n   */\n  setDictionary(dictionary) {\n    this.dictionary = dictionary;\n    this.cache = dictionary.cache();\n    return this;\n  }\n\n  /**\n   * @param {number} index The value index.\n   */\n  value(index) {\n    return this.cache[this.key(index)];\n  }\n\n  /**\n   * @param {number} index The value index.\n   * @returns {number} The dictionary key\n   */\n  key(index) {\n    return /** @type {number} */ (this.values[index]);\n  }\n}\n\n/**\n * @template T\n * @extends {ArrayBatch<T>}\n */\nclass ViewBatch extends ArrayBatch {\n  /**\n   * Create a new view batch.\n   * @param {object} options Batch options.\n   * @param {number} options.length The length of the batch\n   * @param {number} options.nullCount The null value count\n   * @param {DataType} options.type The data type.\n   * @param {Uint8Array} [options.validity] Validity bitmap buffer\n   * @param {Uint8Array} options.values Values buffer\n   * @param {Uint8Array[]} options.data View data buffers\n   */\n  constructor({ data, ...options }) {\n    super(options);\n    this.data = data;\n  }\n\n  /**\n   * Get the binary data at the provided index.\n   * @param {number} index The value index.\n   * @returns {Uint8Array}\n   */\n  view(index) {\n    const { values, data } = this;\n    const offset = index << 4; // each entry is 16 bytes\n    let start = offset + 4;\n    let buf = /** @type {Uint8Array} */ (values);\n    const length = readInt32(buf, offset);\n    if (length > 12) {\n      // longer strings are in a data buffer\n      start = readInt32(buf, offset + 12);\n      buf = data[readInt32(buf, offset + 8)];\n    }\n    return buf.subarray(start, start + length);\n  }\n}\n\n/**\n * A batch of binary blobs from variable data buffers, returned as byte\n * buffers of unsigned 8-bit integers.\n * @extends {ViewBatch<Uint8Array>}\n */\nexport class BinaryViewBatch extends ViewBatch {\n  /**\n   * @param {number} index The value index.\n   */\n  value(index) {\n    return this.view(index);\n  }\n}\n\n/**\n * A batch of UTF-8 strings from variable data buffers.\n * @extends {ViewBatch<string>}\n */\nexport class Utf8ViewBatch extends ViewBatch {\n  /**\n   * @param {number} index The value index.\n   */\n  value(index) {\n    return decodeUtf8(this.view(index));\n  }\n}\n","/**\n * @import { Batch } from './batch.js'\n * @import { DataType, ValueArray } from './types.js'\n */\nimport { bisect } from './util/arrays.js';\nimport { isDirectBatch } from './batch.js';\n\n/**\n * Build up a column from batches.\n */\nexport function columnBuilder(type) {\n  let data = [];\n  return {\n    add(batch) { data.push(batch); return this; },\n    clear: () => data = [],\n    done: () => new Column(data, type)\n  };\n}\n\n/**\n * A data column. A column provides a view over one or more value batches,\n * each drawn from an Arrow record batch. This class supports random access\n * to column values by integer index; however, extracting arrays using\n * `toArray()` or iterating over values (`for (const value of column) {...}`)\n * provide more efficient ways for bulk access or scanning.\n * @template T\n */\nexport class Column {\n  /**\n   * Create a new column instance.\n   * @param {Batch<T>[]} data The value batches.\n   * @param {DataType} [type] The column data type.\n   *  If not specified, the type is extracted from the batches.\n   */\n  constructor(data, type = data[0]?.type) {\n    /**\n     * The column data type.\n     * @type {DataType}\n     * @readonly\n     */\n    this.type = type;\n    /**\n     * The column length.\n     * @type {number}\n     * @readonly\n     */\n    this.length = data.reduce((m, c) => m + c.length, 0);\n    /**\n     * The count of null values in the column.\n     * @type {number}\n     * @readonly\n     */\n    this.nullCount = data.reduce((m, c) => m + c.nullCount, 0);\n    /**\n     * An array of column data batches.\n     * @type {readonly Batch<T>[]}\n     * @readonly\n     */\n    this.data = data;\n\n    const n = data.length;\n    const offsets = new Int32Array(n + 1);\n    if (n === 1) {\n      const [ batch ] = data;\n      offsets[1] = batch.length;\n      // optimize access to single batch\n      this.at = index => batch.at(index);\n    } else {\n      for (let i = 0, s = 0; i < n; ++i) {\n        offsets[i + 1] = (s += data[i].length);\n      }\n    }\n\n    /**\n     * Index offsets for data batches.\n     * Used to map a column row index to a batch-specific index.\n     * @type {Int32Array}\n     * @readonly\n     */\n    this.offsets = offsets;\n  }\n\n  /**\n   * Provide an informative object string tag.\n   */\n  get [Symbol.toStringTag]() {\n    return 'Column';\n  }\n\n  /**\n   * Return an iterator over the values in this column.\n   * @returns {Iterator<T?>}\n   */\n  [Symbol.iterator]() {\n    const data = this.data;\n    return data.length === 1\n      ? data[0][Symbol.iterator]()\n      : batchedIterator(data);\n  }\n\n  /**\n   * Return the column value at the given index. If a column has multiple\n   * batches, this method performs binary search over the batch lengths to\n   * determine the batch from which to retrieve the value. The search makes\n   * lookup less efficient than a standard array access. If making a full\n   * scan of a column, consider extracting arrays via `toArray()` or using an\n   * iterator (`for (const value of column) {...}`).\n   * @param {number} index The row index.\n   * @returns {T | null} The value.\n   */\n  at(index) {\n    // NOTE: if there is only one batch, this method is replaced with an\n    // optimized version in the Column constructor.\n    const { data, offsets } = this;\n    const i = bisect(offsets, index) - 1;\n    return data[i]?.at(index - offsets[i]); // undefined if out of range\n  }\n\n  /**\n   * Return the column value at the given index. This method is the same as\n   * `at()` and is provided for better compatibility with Apache Arrow JS.\n   * @param {number} index The row index.\n   * @returns {T | null} The value.\n   */\n  get(index) {\n    return this.at(index);\n  }\n\n  /**\n   * Extract column values into a single array instance. When possible,\n   * a zero-copy subarray of the input Arrow data is returned.\n   * @returns {ValueArray<T?>}\n   */\n  toArray() {\n    const { length, nullCount, data } = this;\n    const copy = !nullCount && isDirectBatch(data[0]);\n    const n = data.length;\n\n    if (copy && n === 1) {\n      // use batch array directly\n      // @ts-ignore\n      return data[0].values;\n    }\n\n    // determine output array type\n    const ArrayType = !n || nullCount > 0 ? Array\n      // @ts-ignore\n      : (data[0].constructor.ArrayType ?? data[0].values.constructor);\n\n    const array = new ArrayType(length);\n    return copy ? copyArray(array, data) : extractArray(array, data);\n  }\n\n  /**\n   * Return an array of cached column values.\n   * Used internally to accelerate dictionary types.\n   */\n  cache() {\n    return this._cache ?? (this._cache = this.toArray());\n  }\n}\n\nfunction *batchedIterator(data) {\n  for (let i = 0; i < data.length; ++i) {\n    const iter = data[i][Symbol.iterator]();\n    for (let next = iter.next(); !next.done; next = iter.next()) {\n      yield next.value;\n    }\n  }\n}\n\nfunction copyArray(array, data) {\n  for (let i = 0, offset = 0; i < data.length; ++i) {\n    const { values } = data[i];\n    array.set(values, offset);\n    offset += values.length;\n  }\n  return array;\n}\n\nfunction extractArray(array, data) {\n  let index = -1;\n  for (let i = 0; i < data.length; ++i) {\n    const batch = data[i];\n    for (let j = 0; j < batch.length; ++j) {\n      array[++index] = batch.at(j);\n    }\n  }\n  return array;\n}\n","/**\n * @import { Column } from './column.js'\n * @import { Schema, StructFactory, TypeMap, ValueArray } from './types.js'\n */\nimport { bisect } from './util/arrays.js';\nimport { objectFactory, proxyFactory } from './util/struct.js';\n\n/**\n * A table consists of a collection of named columns (or 'children').\n * To work with table data directly in JavaScript, use `toColumns()`\n * to extract an object that maps column names to extracted value arrays,\n * or `toArray()` to extract an array of row objects. For random access\n * by row index, use `getChild()` to access data for a specific column.\n * @template {TypeMap} [T=TypeMap]\n */\nexport class Table {\n  /**\n   * Create a new table with the given schema and columns (children).\n   * @param {Schema} schema The table schema.\n   * @param {Column[]} children The table columns.\n   * @param {boolean} [useProxy=false] Flag indicating if row proxy\n   *  objects should be used to represent table rows (default `false`).\n   */\n  constructor(schema, children, useProxy = false) {\n    const names = schema.fields.map(f => f.name);\n\n    /**\n     * @type {Schema}\n     * @readonly\n     */\n    this.schema = schema;\n    /**\n     * @type {(keyof T)[]}\n     * @readonly\n     */\n    this.names = names;\n    /**\n     * @type {Column[]}\n     * @readonly\n     */\n    this.children = children;\n    /**\n     * @type {StructFactory}\n     * @readonly\n     */\n    this.factory = useProxy ? proxyFactory : objectFactory;\n\n    // lazily created row object generators\n    const gen = [];\n\n    /**\n     * Returns a row object generator for the given batch index.\n     * @private\n     * @readonly\n     * @param {number} b The batch index.\n     * @returns {(index: number) => { [P in keyof T]: T[P] }}\n     */\n    this.getFactory = b => gen[b]\n      ?? (gen[b] = this.factory(names, children.map(c => c.data[b])));\n  }\n\n  /**\n   * Provide an informative object string tag.\n   */\n  get [Symbol.toStringTag]() {\n    return 'Table';\n  }\n\n  /**\n   * The number of columns in this table.\n   * @return {number} The number of columns.\n   */\n  get numCols() {\n    return this.names.length;\n  }\n\n  /**\n   * The number of rows in this table.\n   * @return {number} The number of rows.\n   */\n  get numRows() {\n    return this.children[0]?.length ?? 0;\n  }\n\n  /**\n   * Return the child column at the given index position.\n   * @template {T[keyof T]} R\n   * @param {number} index The column index.\n   * @returns {Column<R>}\n   */\n  getChildAt(index) {\n    return this.children[index];\n  }\n\n  /**\n   * Return the first child column with the given name.\n   * @template {keyof T} P\n   * @param {P} name The column name.\n   * @returns {Column<T[P]>}\n   */\n  getChild(name) {\n    const i = this.names.findIndex(x => x === name);\n    return i > -1 ? this.children[i] : undefined;\n  }\n\n  /**\n   * Construct a new table containing only columns at the specified indices.\n   * The order of columns in the new table matches the order of input indices.\n   * @template {T[keyof T]} V\n   * @param {number[]} indices The indices of columns to keep.\n   * @param {string[]} [as] Optional new names for selected columns.\n   * @returns {Table<{ [key: string]: V }>} A new table with selected columns.\n   */\n  selectAt(indices, as = []) {\n    const { children, factory, schema } = this;\n    const { fields } = schema;\n    return new Table(\n      {\n        ...schema,\n        fields: indices.map((i, j) => renameField(fields[i], as[j]))\n      },\n      indices.map(i => children[i]),\n      factory === proxyFactory\n    );\n  }\n\n  /**\n   * Construct a new table containing only columns with the specified names.\n   * If columns have duplicate names, the first (with lowest index) is used.\n   * The order of columns in the new table matches the order of input names.\n   * @template {keyof T} K\n   * @param {K[]} names Names of columns to keep.\n   * @param {string[]} [as] Optional new names for selected columns.\n   * @returns A new table with columns matching the specified names.\n   */\n  select(names, as) {\n    const all = /** @type {K[]} */(this.names);\n    const indices = names.map(name => all.indexOf(name));\n    return this.selectAt(indices, as);\n  }\n\n  /**\n   * Return an object mapping column names to extracted value arrays.\n   * @returns {{ [P in keyof T]: ValueArray<T[P]> }}\n   */\n  toColumns() {\n    const { children, names } = this;\n    /** @type {{ [P in keyof T]: ValueArray<T[P]> }} */\n    // @ts-expect-error assign to empty object\n    const cols = {};\n    names.forEach((name, i) => cols[name] = children[i]?.toArray() ?? [] );\n    return cols;\n  }\n\n  /**\n   * Return an array of objects representing the rows of this table.\n   * @returns {{ [P in keyof T]: T[P] }[]}\n   */\n  toArray() {\n    const { children, getFactory, numRows } = this;\n    const data = children[0]?.data ?? [];\n    const output = Array(numRows);\n    for (let b = 0, row = -1; b < data.length; ++b) {\n      const f = getFactory(b);\n      for (let i = 0; i < data[b].length; ++i) {\n        output[++row] = f(i);\n      }\n    }\n    return output;\n  }\n\n  /**\n   * Return an iterator over objects representing the rows of this table.\n   * @returns {Generator<{ [P in keyof T]: T[P] }, any, any>}\n   */\n  *[Symbol.iterator]() {\n    const { children, getFactory } = this;\n    const data = children[0]?.data ?? [];\n    for (let b = 0; b < data.length; ++b) {\n      const f = getFactory(b);\n      for (let i = 0; i < data[b].length; ++i) {\n        yield f(i);\n      }\n    }\n  }\n\n  /**\n   * Return a row object for the given index.\n   * @param {number} index The row index.\n   * @returns {{ [P in keyof T]: T[P] }} The row object.\n   */\n  at(index) {\n    const { children, getFactory, numRows } = this;\n    if (index < 0 || index >= numRows) return null;\n    const [{ offsets }] = children;\n    const b = bisect(offsets, index) - 1;\n    return getFactory(b)(index - offsets[b]);\n  }\n\n  /**\n   * Return a row object for the given index. This method is the same as\n   * `at()` and is provided for better compatibility with Apache Arrow JS.\n   * @param {number} index The row index.\n   * @returns {{ [P in keyof T]: T[P] }} The row object.\n   */\n  get(index) {\n    return this.at(index);\n  }\n}\n\nfunction renameField(field, name) {\n  return (name != null && name !== field.name)\n    ? { ...field, name }\n    : field;\n}\n","/**\n * @import { DataType, ExtractionOptions } from './types.js';\n */\nimport { BinaryBatch, BinaryViewBatch, BoolBatch, DateBatch, DateDayBatch, DateDayMillisecondBatch, Decimal32NumberBatch, DecimalBigIntBatch, DecimalNumberBatch, DenseUnionBatch, DictionaryBatch, DirectBatch, FixedBinaryBatch, FixedListBatch, Float16Batch, Int64Batch, IntervalDayTimeBatch, IntervalMonthDayNanoBatch, LargeBinaryBatch, LargeListBatch, LargeListViewBatch, LargeUtf8Batch, ListBatch, ListViewBatch, MapBatch, MapEntryBatch, NullBatch, RunEndEncodedBatch, SparseUnionBatch, StructBatch, StructProxyBatch, TimestampMicrosecondBatch, TimestampMillisecondBatch, TimestampNanosecondBatch, TimestampSecondBatch, Utf8Batch, Utf8ViewBatch } from './batch.js';\nimport { DateUnit, IntervalUnit, TimeUnit, Type } from './constants.js';\nimport { invalidDataType } from './data-types.js';\n\n/**\n * Return a batch constructor for the given data type and extraction options.\n * @param {DataType} type The data type.\n * @param {ExtractionOptions} options The extraction options.\n */\nexport function batchType(type, options = {}) {\n  const { typeId, bitWidth, mode, precision, unit } = /** @type {any} */(type);\n  const { useBigInt, useDate, useDecimalInt, useMap, useProxy } = options;\n\n  switch (typeId) {\n    case Type.Null: return NullBatch;\n    case Type.Bool: return BoolBatch;\n    case Type.Int:\n    case Type.Time:\n    case Type.Duration:\n      return useBigInt || bitWidth < 64 ? DirectBatch : Int64Batch;\n    case Type.Float:\n      return precision ? DirectBatch : Float16Batch;\n    case Type.Date:\n      return wrap(\n        unit === DateUnit.DAY ? DateDayBatch : DateDayMillisecondBatch,\n        useDate && DateBatch\n      );\n    case Type.Timestamp:\n      return wrap(\n        unit === TimeUnit.SECOND ? TimestampSecondBatch\n          : unit === TimeUnit.MILLISECOND ? TimestampMillisecondBatch\n          : unit === TimeUnit.MICROSECOND ? TimestampMicrosecondBatch\n          : TimestampNanosecondBatch,\n        useDate && DateBatch\n      );\n    case Type.Decimal:\n      return bitWidth === 32\n        ? (useDecimalInt ? DirectBatch : Decimal32NumberBatch)\n        : (useDecimalInt ? DecimalBigIntBatch : DecimalNumberBatch);\n    case Type.Interval:\n      return unit === IntervalUnit.DAY_TIME ? IntervalDayTimeBatch\n        : unit === IntervalUnit.YEAR_MONTH ? DirectBatch\n        : IntervalMonthDayNanoBatch;\n    case Type.FixedSizeBinary: return FixedBinaryBatch;\n    case Type.Utf8: return Utf8Batch;\n    case Type.LargeUtf8: return LargeUtf8Batch;\n    case Type.Binary: return BinaryBatch;\n    case Type.LargeBinary: return LargeBinaryBatch;\n    case Type.BinaryView: return BinaryViewBatch;\n    case Type.Utf8View: return Utf8ViewBatch;\n    case Type.List: return ListBatch;\n    case Type.LargeList: return LargeListBatch;\n    case Type.Map: return useMap ? MapBatch : MapEntryBatch;\n    case Type.ListView: return ListViewBatch;\n    case Type.LargeListView: return LargeListViewBatch;\n    case Type.FixedSizeList: return FixedListBatch;\n    case Type.Struct: return useProxy ? StructProxyBatch : StructBatch;\n    case Type.RunEndEncoded: return RunEndEncodedBatch;\n    case Type.Dictionary: return DictionaryBatch;\n    case Type.Union: return mode ? DenseUnionBatch : SparseUnionBatch;\n  }\n  throw new Error(invalidDataType(typeId));\n}\n\nfunction wrap(BaseClass, WrapperClass) {\n  return WrapperClass\n    ? class WrapBatch extends WrapperClass {\n        constructor(options) {\n          super(new BaseClass(options));\n        }\n      }\n    : BaseClass;\n}\n","import { readInt32, readInt64, readVector } from '../util/read.js';\n\n/**\n * Decode a block that points to messages within an Arrow 'file' format.\n * @param {Uint8Array} buf A byte buffer of binary Arrow IPC data\n * @param {number} index The starting index in the byte buffer\n * @returns The file block.\n */\nexport function decodeBlock(buf, index) {\n  //  0: offset\n  //  8: metadataLength\n  // 16: bodyLength\n  return {\n    offset: readInt64(buf, index),\n    metadataLength: readInt32(buf, index + 8),\n    bodyLength: readInt64(buf, index + 16)\n  }\n}\n\n/**\n * Decode a vector of blocks.\n * @param {Uint8Array} buf\n * @param {number} index\n * @returns An array of file blocks.\n */\nexport function decodeBlocks(buf, index) {\n  return readVector(buf, index, 24, decodeBlock);\n}\n","/**\n * @import { RecordBatch, Version_ } from '../types.js'\n */\nimport { Version } from '../constants.js';\nimport { readInt64, readObject, readOffset, readVector } from '../util/read.js';\n\n/**\n * Decode a record batch.\n * @param {Uint8Array} buf A byte buffer of binary Arrow IPC data\n * @param {number} index The starting index in the byte buffer\n * @param {Version_} version Arrow version value\n * @returns {RecordBatch} The record batch\n */\nexport function decodeRecordBatch(buf, index, version) {\n  //  4: length\n  //  6: nodes\n  //  8: buffers\n  // 10: compression (not supported)\n  // 12: variadicBuffers (buffer counts for view-typed fields)\n  const get = readObject(buf, index);\n  if (get(10, readOffset, 0)) {\n    throw new Error('Record batch compression not implemented');\n  }\n\n  // If an Arrow buffer was written before version 4,\n  // advance 8 bytes to skip the now-removed page_id field\n  const offset = version < Version.V4 ? 8 : 0;\n\n  return {\n    length: get(4, readInt64, 0),\n    nodes: readVector(buf, get(6, readOffset), 16, (buf, pos) => ({\n      length: readInt64(buf, pos),\n      nullCount: readInt64(buf, pos + 8)\n    })),\n    regions: readVector(buf, get(8, readOffset), 16 + offset, (buf, pos) => ({\n      offset: readInt64(buf, pos + offset),\n      length: readInt64(buf, pos + offset + 8)\n    })),\n    variadic: readVector(buf, get(12, readOffset), 8, readInt64)\n  };\n}\n","/**\n * @import { DictionaryBatch, Version_ } from '../types.js'\n */\nimport { readBoolean, readInt64, readObject } from '../util/read.js';\nimport { decodeRecordBatch } from './record-batch.js';\n\n/**\n * Decode a dictionary batch.\n * @param {Uint8Array} buf A byte buffer of binary Arrow IPC data\n * @param {number} index The starting index in the byte buffer\n * @param {Version_} version Arrow version value\n * @returns {DictionaryBatch} The dictionary batch\n */\nexport function decodeDictionaryBatch(buf, index, version) {\n  //  4: id\n  //  6: data\n  //  8: isDelta\n  const get = readObject(buf, index);\n  return {\n    id: get(4, readInt64, 0),\n    data: get(6, (buf, off) => decodeRecordBatch(buf, off, version)),\n    /**\n     * If isDelta is true the values in the dictionary are to be appended to a\n     * dictionary with the indicated id. If isDelta is false this dictionary\n     * should replace the existing dictionary.\n     */\n    isDelta: get(8, readBoolean, false)\n  };\n}\n","/**\n * @import { DataType, Field } from '../types.js'\n */\nimport { DateUnit, IntervalUnit, Precision, TimeUnit, Type, UnionMode } from '../constants.js';\nimport { binary, date, decimal, duration, fixedSizeBinary, fixedSizeList, float, int, interval, invalidDataType, largeBinary, largeList, largeListView, largeUtf8, list, listView, mapType, runEndEncoded, struct, time, timestamp, union, utf8 } from '../data-types.js';\nimport { checkOneOf } from '../util/objects.js';\nimport { readBoolean, readInt16, readInt32, readObject, readOffset, readString, readVector } from '../util/read.js';\n\n/**\n * Decode a data type definition for a field.\n * @param {Uint8Array} buf A byte buffer of binary Arrow IPC data.\n * @param {number} index The starting index in the byte buffer.\n * @param {number} typeId The data type id.\n * @param {Field[]} [children] A list of parsed child fields.\n * @returns {DataType} The data type.\n */\nexport function decodeDataType(buf, index, typeId, children) {\n  checkOneOf(typeId, Type, invalidDataType);\n  const get = readObject(buf, index);\n\n  switch (typeId) {\n    // types without flatbuffer objects\n    case Type.Binary: return binary();\n    case Type.Utf8: return utf8();\n    case Type.LargeBinary: return largeBinary();\n    case Type.LargeUtf8: return largeUtf8();\n    case Type.List: return list(children[0]);\n    case Type.ListView: return listView(children[0]);\n    case Type.LargeList: return largeList(children[0]);\n    case Type.LargeListView: return largeListView(children[0]);\n    case Type.Struct: return struct(children);\n    case Type.RunEndEncoded: return runEndEncoded(children[0], children[1]);\n\n    // types with flatbuffer objects\n    case Type.Int: return int(\n      // @ts-ignore\n      get(4, readInt32, 0), // bitwidth\n      get(6, readBoolean, false) // signed\n    );\n    case Type.Float: return float(\n      // @ts-ignore\n      get(4, readInt16, Precision.HALF) // precision\n    );\n    case Type.Decimal: return decimal(\n      get(4, readInt32, 0), // precision\n      get(6, readInt32, 0), // scale\n      // @ts-ignore\n      get(8, readInt32, 128) // bitwidth\n    );\n    case Type.Date: return date(\n      // @ts-ignore\n      get(4, readInt16, DateUnit.MILLISECOND) // unit\n    );\n    case Type.Time: return time(\n      // @ts-ignore\n      get(4, readInt16, TimeUnit.MILLISECOND), // unit\n      get(6, readInt32, 32) // bitWidth\n    );\n    case Type.Timestamp: return timestamp(\n      // @ts-ignore\n      get(4, readInt16, TimeUnit.SECOND), // unit\n      get(6, readString) // timezone\n    );\n    case Type.Interval: return interval(\n      // @ts-ignore\n      get(4, readInt16, IntervalUnit.YEAR_MONTH) // unit\n    );\n    case Type.Duration: return duration(\n      // @ts-ignore\n      get(4, readInt16, TimeUnit.MILLISECOND) // unit\n    );\n\n    case Type.FixedSizeBinary: return fixedSizeBinary(\n      get(4, readInt32, 0) // stride\n    );\n    case Type.FixedSizeList: return fixedSizeList(\n      children[0],\n      get(4, readInt32, 0), // stride\n    );\n    case Type.Map: return mapType(\n      get(4, readBoolean, false), // keysSorted\n      children[0]\n    );\n\n    case Type.Union: return union(\n      // @ts-ignore\n      get(4, readInt16, UnionMode.Sparse), // mode\n      children,\n      readVector(buf, get(6, readOffset), 4, readInt32) // type ids\n    );\n  }\n  // case Type.NONE:\n  // case Type.Null:\n  // case Type.Bool:\n  // case Type.BinaryView:\n  // case Type.Utf8View:\n  // @ts-ignore\n  return { typeId };\n}\n","/**\n * @import { Metadata } from '../types.js'\n */\nimport { readObject, readString, readVector } from '../util/read.js';\n\n/**\n * Decode custom metadata consisting of key-value string pairs.\n * @param {Uint8Array} buf A byte buffer of binary Arrow IPC data\n * @param {number} index The starting index in the byte buffer\n * @returns {Metadata | null} The custom metadata map\n */\nexport function decodeMetadata(buf, index) {\n  const entries = readVector(buf, index, 4, (buf, pos) => {\n    const get = readObject(buf, pos);\n    return /** @type {[string, string]} */ ([\n      get(4, readString), // 4: key (string)\n      get(6, readString)  // 6: key (string)\n    ]);\n  });\n  return entries.length ? new Map(entries) : null;\n}\n","/**\n * @import { DictionaryType, Endianness_, Field, IntType, Schema, Version_ } from '../types.js'\n */\nimport { Type } from '../constants.js';\nimport { dictionary, int32 } from '../data-types.js';\nimport { readBoolean, readInt16, readInt64, readObject, readOffset, readString, readUint8, readVector } from '../util/read.js';\nimport { decodeDataType } from './data-type.js';\nimport { decodeMetadata } from './metadata.js';\n\n/**\n * Decode a table schema describing the fields and their data types.\n * @param {Uint8Array} buf A byte buffer of binary Arrow IPC data\n * @param {number} index The starting index in the byte buffer\n * @param {Version_} version Arrow version value\n * @returns {Schema} The schema\n */\nexport function decodeSchema(buf, index, version) {\n  //  4: endianness (int16)\n  //  6: fields (vector)\n  //  8: metadata (vector)\n  // 10: features (int64[])\n  const get = readObject(buf, index);\n  return {\n    version,\n    endianness: /** @type {Endianness_} */ (get(4, readInt16, 0)),\n    fields: get(6, decodeSchemaFields, []),\n    metadata: get(8, decodeMetadata)\n  };\n}\n\n/**\n * @returns {Field[] | null}\n */\nfunction decodeSchemaFields(buf, fieldsOffset) {\n  return readVector(buf, fieldsOffset, 4, decodeField);\n}\n\n/**\n * @returns {Field}\n */\nfunction decodeField(buf, index) {\n  //  4: name (string)\n  //  6: nullable (bool)\n  //  8: type id (uint8)\n  // 10: type (union)\n  // 12: dictionary (table)\n  // 14: children (vector)\n  // 16: metadata (vector)\n  const get = readObject(buf, index);\n  const typeId = get(8, readUint8, Type.NONE);\n  const typeOffset = get(10, readOffset, 0);\n  const dict = get(12, decodeDictionary);\n  const children = get(14, (buf, off) => decodeFieldChildren(buf, off));\n\n  let type = decodeDataType(buf, typeOffset, typeId, children);\n  if (dict) {\n    dict.dictionary = type;\n    type = dict;\n  }\n\n  return {\n    name: get(4, readString),\n    type,\n    nullable: get(6, readBoolean, false),\n    metadata: get(16, decodeMetadata)\n  };\n}\n\n/**\n * @returns {Field[] | null}\n */\nfunction decodeFieldChildren(buf, fieldOffset) {\n  const children = readVector(buf, fieldOffset, 4, decodeField);\n  return children.length ? children : null;\n}\n\n/**\n * @param {Uint8Array} buf\n * @param {number} index\n * @returns {DictionaryType}\n */\nfunction decodeDictionary(buf, index) {\n  if (!index) return null;\n  //  4: id (int64)\n  //  6: indexType (Int type)\n  //  8: isOrdered (boolean)\n  // 10: kind (int16) currently only dense array is supported\n  const get = readObject(buf, index);\n  return dictionary(\n    null, // data type will be populated by caller\n    get(6, decodeInt, int32()), // index type\n    get(8, readBoolean, false), // ordered\n    get(4, readInt64, 0), // id\n  );\n}\n\n/**\n * Decode an integer data type.\n * @param {Uint8Array} buf A byte buffer of binary Arrow IPC data.\n * @param {number} index The starting index in the byte buffer.\n * @returns {IntType}\n */\nfunction decodeInt(buf, index) {\n  return /** @type {IntType} */ (\n    decodeDataType(buf, index, Type.Int)\n  );\n}\n","/**\n * @import { Message, MessageHeader_, Version_ } from '../types.js'\n */\nimport { MessageHeader, Version } from '../constants.js';\nimport { keyFor } from '../util/objects.js';\nimport { SIZEOF_INT, readInt16, readInt32, readInt64, readObject, readOffset, readUint8 } from '../util/read.js';\nimport { decodeDictionaryBatch } from './dictionary-batch.js';\nimport { decodeRecordBatch } from './record-batch.js';\nimport { decodeSchema } from './schema.js';\n\nconst invalidMessageMetadata = (expected, actual) =>\n  `Expected to read ${expected} metadata bytes, but only read ${actual}.`;\n\nconst invalidMessageBodyLength = (expected, actual) =>\n  `Expected to read ${expected} bytes for message body, but only read ${actual}.`;\n\nconst invalidMessageType = (type) =>\n  `Unsupported message type: ${type} (${keyFor(MessageHeader, type)})`;\n\n/**\n * A \"message\" contains a block of Apache Arrow data, such as a schema,\n * record batch, or dictionary batch. This message decodes a single\n * message, returning its associated metadata and content.\n * @param {Uint8Array} buf A byte buffer of binary Arrow IPC data\n * @param {number} index The starting index in the byte buffer\n * @returns {Message} The decoded message.\n */\nexport function decodeMessage(buf, index) {\n  // get message start\n  let metadataLength = readInt32(buf, index) || 0;\n  index += SIZEOF_INT;\n\n  // ARROW-6313: If the first 4 bytes are continuation indicator (-1), read\n  // the next 4 for the 32-bit metadata length. Otherwise, assume this is a\n  // pre-v0.15 message, where the first 4 bytes are the metadata length.\n  if (metadataLength === -1) {\n    metadataLength = readInt32(buf, index) || 0;\n    index += SIZEOF_INT;\n  }\n  if (metadataLength === 0) return null;\n\n  const head = buf.subarray(index, index += metadataLength);\n  if (head.byteLength < metadataLength) {\n    throw new Error(invalidMessageMetadata(metadataLength, head.byteLength));\n  }\n\n  // decode message metadata\n  //  4: version\n  //  6: headerType\n  //  8: headerIndex\n  // 10: bodyLength\n  const get = readObject(head, 0);\n  const version = /** @type {Version_} */\n    (get(4, readInt16, Version.V1));\n  const type = /** @type {MessageHeader_} */\n    (get(6, readUint8, MessageHeader.NONE));\n  const offset = get(8, readOffset, 0);\n  const bodyLength = get(10, readInt64, 0);\n  let content;\n\n  if (offset) {\n    // decode message header\n    const decoder = type === MessageHeader.Schema ? decodeSchema\n      : type === MessageHeader.DictionaryBatch ? decodeDictionaryBatch\n      : type === MessageHeader.RecordBatch ? decodeRecordBatch\n      : null;\n    if (!decoder) throw new Error(invalidMessageType(type));\n    content = decoder(head, offset, version);\n\n    // extract message body\n    if (bodyLength > 0) {\n      const body = buf.subarray(index, index += bodyLength);\n      if (body.byteLength < bodyLength) {\n        throw new Error(invalidMessageBodyLength(bodyLength, body.byteLength));\n      }\n      // @ts-ignore\n      content.body = body;\n    }\n  }\n\n  return { version, type, index, content };\n}\n","/**\n * @import { ArrowData, Version_ } from '../types.js'\n */\nimport { MAGIC, MessageHeader, Version } from '../constants.js';\nimport { isArrayBufferLike } from '../util/arrays.js';\nimport { readInt16, readInt32, readObject } from '../util/read.js';\nimport { decodeBlocks } from './block.js';\nimport { decodeMessage } from './message.js';\nimport { decodeMetadata } from './metadata.js';\nimport { decodeSchema } from './schema.js';\n\n/**\n * Decode [Apache Arrow IPC data][1] and return parsed schema, record batch,\n * and dictionary batch definitions. The input binary data may be either\n * an `ArrayBuffer` or `Uint8Array`. For Arrow data in the IPC 'stream' format,\n * an array of `Uint8Array` instances is also supported.\n *\n * This method stops short of generating views over field buffers. Use the\n * `createData()` method on the result to enable column data access.\n *\n * [1]: https://arrow.apache.org/docs/format/Columnar.html#serialization-and-interprocess-communication-ipc\n * @param {ArrayBufferLike | Uint8Array | Uint8Array[]} data\n *  The source byte buffer, or an array of buffers. If an array, each byte\n *  array may contain one or more self-contained messages. Messages may NOT\n *  span multiple byte arrays.\n * @returns {import('../types.js').ArrowData}\n */\nexport function decodeIPC(data) {\n  const source = isArrayBufferLike(data) ? new Uint8Array(data) : data;\n  return source instanceof Uint8Array && isArrowFileFormat(source)\n    ? decodeIPCFile(source)\n    : decodeIPCStream(source);\n}\n\n/**\n * @param {Uint8Array} buf\n * @returns {boolean}\n */\nfunction isArrowFileFormat(buf) {\n  if (!buf || buf.length < 4) return false;\n  for (let i = 0; i < 6; ++i) {\n    if (MAGIC[i] !== buf[i]) return false;\n  }\n  return true;\n}\n\n/**\n * Decode data in the [Arrow IPC 'stream' format][1].\n *\n * [1]: https://arrow.apache.org/docs/format/Columnar.html#ipc-streaming-format\n * @param {Uint8Array | Uint8Array[]} data The source byte buffer, or an\n *  array of buffers. If an array, each byte array may contain one or more\n *  self-contained messages. Messages may NOT span multiple byte arrays.\n * @returns {ArrowData}\n */\nexport function decodeIPCStream(data) {\n  const stream = [data].flat();\n\n  let schema;\n  const records = [];\n  const dictionaries = [];\n\n  // consume each message in the stream\n  for (const buf of stream) {\n    if (!(buf instanceof Uint8Array)) {\n      throw new Error(`IPC data batch was not a Uint8Array.`);\n    }\n    let offset = 0;\n\n    // decode all messages in current buffer\n    while (true) {\n      const m = decodeMessage(buf, offset);\n      if (m === null) break; // end of messages\n      offset = m.index;\n      if (!m.content) continue;\n      switch (m.type) {\n        case MessageHeader.Schema:\n          // ignore repeated schema messages\n          if (!schema) schema = m.content;\n          break;\n        case MessageHeader.RecordBatch:\n          records.push(m.content);\n          break;\n        case MessageHeader.DictionaryBatch:\n          dictionaries.push(m.content);\n          break;\n      }\n    }\n  }\n\n  return /** @type {ArrowData} */ (\n    { schema, dictionaries, records, metadata: null }\n  );\n}\n\n/**\n * Decode data in the [Arrow IPC 'file' format][1].\n *\n * [1]: https://arrow.apache.org/docs/format/Columnar.html#ipc-file-format\n * @param {Uint8Array} data The source byte buffer.\n * @returns {ArrowData}\n */\nexport function decodeIPCFile(data) {\n  // find footer location\n  const offset = data.byteLength - (MAGIC.length + 4);\n  const length = readInt32(data, offset);\n\n  // decode file footer\n  //  4: version\n  //  6: schema\n  //  8: dictionaries (vector)\n  // 10: batches (vector)\n  // 12: metadata\n  const get = readObject(data, offset - length);\n  const version = /** @type {Version_} */\n    (get(4, readInt16, Version.V1));\n  const dicts = get(8, decodeBlocks, []);\n  const recs = get(10, decodeBlocks, []);\n\n  return /** @type {ArrowData} */ ({\n    schema: get(6, (buf, index) => decodeSchema(buf, index, version)),\n    dictionaries: dicts.map(({ offset }) => decodeMessage(data, offset).content),\n    records: recs.map(({ offset }) => decodeMessage(data, offset).content),\n    metadata: get(12, decodeMetadata)\n  });\n}\n","/**\n * @import { ArrowData, ExtractionOptions, Field, RecordBatch, Schema } from '../types.js'\n */\nimport { batchType } from '../batch-type.js';\nimport { columnBuilder } from '../column.js';\nimport { Type, UnionMode, Version } from '../constants.js';\nimport { invalidDataType } from '../data-types.js';\nimport { Table } from '../table.js';\nimport { int8Array } from '../util/arrays.js';\nimport { decodeIPC } from './decode-ipc.js';\n\n/**\n * Decode [Apache Arrow IPC data][1] and return a new Table. The input binary\n * data may be either an `ArrayBuffer` or `Uint8Array`. For Arrow data in the\n * [IPC 'stream' format][2], an array of `Uint8Array` values is also supported.\n *\n * [1]: https://arrow.apache.org/docs/format/Columnar.html#serialization-and-interprocess-communication-ipc\n * [2]: https://arrow.apache.org/docs/format/Columnar.html#ipc-streaming-format\n * @param {ArrayBufferLike | Uint8Array | Uint8Array[]} data\n *  The source byte buffer, or an array of buffers. If an array, each byte\n *  array may contain one or more self-contained messages. Messages may NOT\n *  span multiple byte arrays.\n * @param {ExtractionOptions} [options]\n *  Options for controlling how values are transformed when extracted\n *  from an Arrow binary representation.\n * @returns {Table} A Table instance.\n */\nexport function tableFromIPC(data, options) {\n  return createTable(decodeIPC(data), options);\n}\n\n/**\n * Create a table from parsed IPC data.\n * @param {ArrowData} data\n *  The IPC data, as returned by parseIPC.\n * @param {ExtractionOptions} [options]\n *  Options for controlling how values are transformed when extracted\n *  from am Arrow binary representation.\n * @returns {Table} A Table instance.\n */\nexport function createTable(data, options = {}) {\n  const { schema = { fields: [] }, dictionaries, records } = data;\n  const { version, fields } = schema;\n  const dictionaryMap = new Map;\n  const context = contextGenerator(options, version, dictionaryMap);\n\n  // build dictionary type map\n  const dictionaryTypes = new Map;\n  visitSchemaFields(schema, field => {\n    const type = field.type;\n    if (type.typeId === Type.Dictionary) {\n      dictionaryTypes.set(type.id, type.dictionary);\n    }\n  });\n\n  // decode dictionaries, build dictionary column map\n  const dicts = new Map;\n  for (const dict of dictionaries) {\n    const { id, data, isDelta, body } = dict;\n    const type = dictionaryTypes.get(id);\n    const batch = visit(type, context({ ...data, body }));\n    if (!dicts.has(id)) {\n      if (isDelta) {\n        throw new Error('Delta update can not be first dictionary batch.');\n      }\n      dicts.set(id, columnBuilder(type).add(batch));\n    } else {\n      const dict = dicts.get(id);\n      if (!isDelta) dict.clear();\n      dict.add(batch);\n    }\n  }\n  dicts.forEach((value, key) => dictionaryMap.set(key, value.done()));\n\n  // decode column fields\n  const cols = fields.map(f => columnBuilder(f.type));\n  for (const batch of records) {\n    const ctx = context(batch);\n    fields.forEach((f, i) => cols[i].add(visit(f.type, ctx)));\n  }\n\n  return new Table(schema, cols.map(c => c.done()), options.useProxy);\n}\n\n/**\n * Visit all fields within a schema.\n * @param {Schema} schema\n * @param {(field: Field) => void} visitor\n */\nfunction visitSchemaFields(schema, visitor) {\n  schema.fields.forEach(function visitField(field) {\n    visitor(field);\n    // @ts-ignore\n    field.type.dictionary?.children?.forEach(visitField);\n    // @ts-ignore\n    field.type.children?.forEach(visitField);\n  });\n}\n\n/**\n * Context object generator for field visitation and buffer definition.\n */\nfunction contextGenerator(options, version, dictionaryMap) {\n  const base = {\n    version,\n    options,\n    dictionary: id => dictionaryMap.get(id),\n  };\n\n  /**\n   * Return a context generator.\n   * @param {RecordBatch} batch\n   */\n  return batch => {\n    const { length, nodes, regions, variadic, body } = batch;\n    let nodeIndex = -1;\n    let bufferIndex = -1;\n    let variadicIndex = -1;\n    return {\n      ...base,\n      length,\n      node: () => nodes[++nodeIndex],\n      buffer: (ArrayType) => {\n        const { length, offset } = regions[++bufferIndex];\n        return ArrayType\n          ? new ArrayType(body.buffer, body.byteOffset + offset, length / ArrayType.BYTES_PER_ELEMENT)\n          : body.subarray(offset, offset + length)\n      },\n      variadic: () => variadic[++variadicIndex],\n      visit(children) { return children.map(f => visit(f.type, this)); }\n    };\n  };\n}\n\n/**\n * Visit a field, instantiating views of buffer regions.\n */\nfunction visit(type, ctx) {\n  const { typeId } = type;\n  const { length, options, node, buffer, variadic, version } = ctx;\n  const BatchType = batchType(type, options);\n\n  if (typeId === Type.Null) {\n    // no field node, no buffers\n    return new BatchType({ length, nullCount: length, type });\n  }\n\n  // extract the next { length, nullCount } field node\n  const base = { ...node(), type };\n\n  switch (typeId) {\n    // validity and data value buffers\n    case Type.Bool:\n    case Type.Int:\n    case Type.Time:\n    case Type.Duration:\n    case Type.Float:\n    case Type.Decimal:\n    case Type.Date:\n    case Type.Timestamp:\n    case Type.Interval:\n    case Type.FixedSizeBinary:\n      return new BatchType({\n        ...base,\n        validity: buffer(),\n        values: buffer(type.values)\n      });\n\n    // validity, offset, and value buffers\n    case Type.Utf8:\n    case Type.LargeUtf8:\n    case Type.Binary:\n    case Type.LargeBinary:\n      return new BatchType({\n        ...base,\n        validity: buffer(),\n        offsets: buffer(type.offsets),\n        values: buffer()\n      });\n\n    // views with variadic buffers\n    case Type.BinaryView:\n    case Type.Utf8View:\n      return new BatchType({\n        ...base,\n        validity: buffer(),\n        values: buffer(), // views buffer\n        data: Array.from({ length: variadic() }, () => buffer()) // data buffers\n      });\n\n    // validity, offset, and list child\n    case Type.List:\n    case Type.LargeList:\n    case Type.Map:\n      return new BatchType({\n        ...base,\n        validity: buffer(),\n        offsets: buffer(type.offsets),\n        children: ctx.visit(type.children)\n      });\n\n    // validity, offset, size, and list child\n    case Type.ListView:\n    case Type.LargeListView:\n      return new BatchType({\n        ...base,\n        validity: buffer(),\n        offsets: buffer(type.offsets),\n        sizes: buffer(type.offsets),\n        children: ctx.visit(type.children)\n      });\n\n    // validity and children\n    case Type.FixedSizeList:\n    case Type.Struct:\n      return new BatchType({\n        ...base,\n        validity: buffer(),\n        children: ctx.visit(type.children)\n      });\n\n    // children only\n    case Type.RunEndEncoded:\n      return new BatchType({\n        ...base,\n        children: ctx.visit(type.children)\n      });\n\n    // dictionary\n    case Type.Dictionary: {\n      const { id, indices } = type;\n      return new BatchType({\n        ...base,\n        validity: buffer(),\n        values: buffer(indices.values),\n      }).setDictionary(ctx.dictionary(id));\n    }\n\n    // union\n    case Type.Union: {\n      if (version < Version.V5) {\n        buffer(); // skip unused null bitmap\n      }\n      return new BatchType({\n        ...base,\n        typeIds: buffer(int8Array),\n        offsets: type.mode === UnionMode.Sparse ? null : buffer(type.offsets),\n        children: ctx.visit(type.children)\n      });\n    }\n\n    // unsupported type\n    default:\n      throw new Error(invalidDataType(typeId));\n  }\n}\n","/**\n * @import { DictionaryType, Field, Schema } from '../types.js';\n * @import { Builder } from './builder.js';\n */\nimport { Type } from '../constants.js';\nimport { encodeDataType } from './data-type.js';\nimport { encodeMetadata } from './metadata.js';\n\nconst isLittleEndian = new Uint16Array(new Uint8Array([1, 0]).buffer)[0] === 1;\n\n/**\n * @param {Builder} builder\n * @param {Schema} schema\n * @returns {number}\n */\nexport function encodeSchema(builder, schema) {\n  const { fields, metadata } = schema;\n  const fieldOffsets = fields.map(f => encodeField(builder, f));\n  const fieldsVectorOffset = builder.addOffsetVector(fieldOffsets);\n  const metadataOffset = encodeMetadata(builder, metadata);\n  return builder.addObject(4, b => {\n    b.addInt16(0, +(!isLittleEndian), 0);\n    b.addOffset(1, fieldsVectorOffset, 0);\n    b.addOffset(2, metadataOffset, 0);\n    // NOT SUPPORTED: 3, features\n  });\n}\n\n/**\n * @param {Builder} builder\n * @param {Field} field\n * @returns {number}\n */\nfunction encodeField(builder, field) {\n  const { name, nullable, type, metadata } = field;\n  let { typeId } = type;\n\n  // encode field data type\n  let typeOffset = 0;\n  let dictionaryOffset = 0;\n  if (typeId !== Type.Dictionary) {\n    typeOffset = encodeDataType(builder, type);\n  } else {\n    const dict = /** @type {DictionaryType} */ (type).dictionary;\n    typeId = dict.typeId;\n    dictionaryOffset = encodeDataType(builder, type);\n    typeOffset = encodeDataType(builder, dict);\n  }\n\n  // encode children, metadata, name, and field object\n  // @ts-ignore\n  const childOffsets = (type.children || []).map(f => encodeField(builder, f));\n  const childrenVectorOffset = builder.addOffsetVector(childOffsets);\n  const metadataOffset = encodeMetadata(builder, metadata);\n  const nameOffset = builder.addString(name);\n  return builder.addObject(7, b => {\n    b.addOffset(0, nameOffset, 0);\n    b.addInt8(1, +nullable, +false);\n    b.addInt8(2, typeId, Type.NONE);\n    b.addOffset(3, typeOffset, 0);\n    b.addOffset(4, dictionaryOffset, 0);\n    b.addOffset(5, childrenVectorOffset, 0);\n    b.addOffset(6, metadataOffset, 0);\n  });\n}\n","import { tableFromIPC } from '@uwdata/flechette';\n/**\n * Decode Arrow IPC bytes to a table instance.\n * The default options map date and timestamp values to JS Date objects.\n * @param data Arrow IPC bytes.\n * @param options Arrow IPC extraction options.\n *  If unspecified, the default options will extract date and timestamp\n *  values to JS Date objects.\n * @returns A table instance.\n */\nexport function decodeIPC(data, options = { useDate: true }) {\n    return tableFromIPC(data, options);\n}\n//# sourceMappingURL=decode-ipc.js.map","import { decodeIPC } from '../util/decode-ipc.js';\n/**\n * Connect to a DuckDB server over a WebSocket interface.\n * @param options Connector options.\n * @param options.uri The URI for the DuckDB REST server.\n * @param options.ipc Arrow IPC extraction options.\n * @returns A connector instance.\n */\nexport function socketConnector(options) {\n    return new SocketConnector(options);\n}\n/**\n * DuckDB socket connector.\n */\nexport class SocketConnector {\n    _uri;\n    _queue;\n    _connected;\n    _request;\n    _ws;\n    _events;\n    /**\n     * @param options Connector options.\n     * @param options.uri The URI for the DuckDB REST server.\n     * @param options.ipc Arrow IPC extraction options.\n     */\n    constructor({ uri = 'ws://localhost:3000/', ipc = undefined, } = {}) {\n        this._uri = uri;\n        this._queue = [];\n        this._connected = false;\n        this._request = null;\n        this._ws = null;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const c = this;\n        this._events = {\n            open() {\n                c._connected = true;\n                c.next();\n            },\n            close() {\n                c._connected = false;\n                c._request = null;\n                c._ws = null;\n                while (c._queue.length) {\n                    c._queue.shift().reject('Socket closed');\n                }\n            },\n            error(event) {\n                if (c._request) {\n                    const { reject } = c._request;\n                    c._request = null;\n                    c.next();\n                    reject(event);\n                }\n                else {\n                    console.error('WebSocket error: ', event);\n                }\n            },\n            message(msg) {\n                const { data } = msg;\n                if (c._request) {\n                    const { query, resolve, reject } = c._request;\n                    // clear state, start next request\n                    c._request = null;\n                    c.next();\n                    // process result\n                    if (typeof data === 'string') {\n                        const json = JSON.parse(data);\n                        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                        json.error ? reject(json.error) : resolve(json);\n                    }\n                    else if (query.type === 'exec') {\n                        resolve();\n                    }\n                    else if (query.type === 'arrow') {\n                        resolve(decodeIPC(data, ipc));\n                    }\n                    else {\n                        throw new Error(`Unexpected socket data: ${data}`);\n                    }\n                }\n                else {\n                    console.log('WebSocket message: ', data);\n                }\n            }\n        };\n    }\n    get connected() {\n        return this._connected;\n    }\n    init() {\n        this._ws = new WebSocket(this._uri);\n        this._ws.binaryType = 'arraybuffer';\n        for (const type in this._events) {\n            this._ws.addEventListener(type, this._events[type]);\n        }\n    }\n    enqueue(query, resolve, reject) {\n        if (this._ws == null)\n            this.init();\n        this._queue.push({ query, resolve, reject });\n        if (this._connected && !this._request)\n            this.next();\n    }\n    next() {\n        if (this._queue.length) {\n            this._request = this._queue.shift();\n            this._ws.send(JSON.stringify(this._request.query));\n        }\n    }\n    query(query) {\n        return new Promise((resolve, reject) => this.enqueue(query, resolve, reject));\n    }\n}\n//# sourceMappingURL=socket.js.map","export const COLUMN_REF = 'COLUMN_REF';\nexport const COLUMN_PARAM = 'COLUMN_PARAM';\nexport const TABLE_REF = 'TABLE_REF';\nexport const LITERAL = 'LITERAL';\nexport const INTERVAL = 'INTERVAL';\nexport const LIST = 'LIST';\nexport const UNNEST = 'UNNEST';\nexport const ORDER_BY = 'ORDER_BY';\nexport const CAST = 'CAST';\nexport const CASE = 'CASE';\nexport const WHEN = 'WHEN';\nexport const COLLATE = 'COLLATE';\nexport const UNARY_OPERATOR = 'UNARY';\nexport const UNARY_POSTFIX_OPERATOR = 'UNARY_POSTFIX';\nexport const BINARY_OPERATOR = 'BINARY';\nexport const BETWEEN_OPERATOR = 'BETWEEN';\nexport const NOT_BETWEEN_OPERATOR = 'NOT_BETWEEN';\nexport const LOGICAL_OPERATOR = 'LOGICAL_OPERATOR';\nexport const IN_OPERATOR = 'IN';\nexport const FUNCTION = 'FUNCTION';\nexport const AGGREGATE = 'AGGREGATE';\nexport const WINDOW = 'WINDOW';\nexport const WINDOW_FUNCTION = 'WINDOW_FUNCTION';\nexport const WINDOW_DEF = 'WINDOW_DEF';\nexport const WINDOW_FRAME = 'WINDOW_FRAME';\nexport const WINDOW_EXTENT_EXPR = 'WINDOW_EXTENT_EXPR';\nexport const EXPRESSION = 'EXPRESSION';\nexport const FRAGMENT = 'FRAGMENT';\nexport const VERBATIM = 'VERBATIM';\nexport const PARAM = 'PARAM';\nexport const WITH_CLAUSE = 'WITH_CLAUSE';\nexport const WINDOW_CLAUSE = 'WINDOW_CLAUSE';\nexport const SELECT_CLAUSE = 'SELECT_CLAUSE';\nexport const FROM_CLAUSE = 'FROM_CLAUSE';\nexport const SAMPLE_CLAUSE = 'SAMPLE_CLAUSE';\nexport const SELECT_QUERY = 'SELECT_QUERY';\nexport const DESCRIBE_QUERY = 'DESCRIBE_QUERY';\nexport const SET_OPERATION = 'SET_OPERATION';\nexport const SCALAR_SUBQUERY = 'SCALAR_SUBQUERY';\n//# sourceMappingURL=constants.js.map","/**\n * Check if a value is a SQL AST node.\n * @param value The value to check.\n */\nexport function isNode(value) {\n    return value instanceof SQLNode;\n}\nexport class SQLNode {\n    /** The SQL AST node type. */\n    type;\n    /**\n     * Instantiate a SQL AST node.\n     * @param type The SQL AST node type.\n     */\n    constructor(type) {\n        this.type = type;\n    }\n    /**\n     * Create a shallow clone of this SQL AST node.\n     * @returns The shallow clone node.\n     */\n    clone() {\n        // @ts-expect-error use constructor\n        const clone = new this.constructor();\n        for (const key in this) {\n            clone[key] = this[key];\n        }\n        return clone;\n    }\n}\n/**\n * AST node corresponding to an individual expression.\n */\nexport class ExprNode extends SQLNode {\n}\n//# sourceMappingURL=node.js.map","import { LITERAL } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class LiteralNode extends ExprNode {\n    /** The literal value. */\n    value;\n    /**\n     * Instantiate an literal node.\n     * @param value The literal value.\n     */\n    constructor(value) {\n        super(LITERAL);\n        this.value = value;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return literalToSQL(this.value);\n    }\n}\nexport function literalToSQL(value) {\n    switch (typeof value) {\n        case 'number':\n            return Number.isFinite(value) ? `${value}` : 'NULL';\n        case 'string':\n            return `'${value.replaceAll(`'`, `''`)}'`;\n        case 'boolean':\n            return value ? 'TRUE' : 'FALSE';\n        default:\n            if (value == null) {\n                return 'NULL';\n            }\n            else if (value instanceof Date) {\n                const ts = +value;\n                if (Number.isNaN(ts))\n                    return 'NULL';\n                const y = value.getUTCFullYear();\n                const m = value.getUTCMonth();\n                const d = value.getUTCDate();\n                return ts === Date.UTC(y, m, d)\n                    ? `DATE '${y}-${m + 1}-${d}'` // utc date\n                    : `epoch_ms(${ts})`; // timestamp\n            }\n            else if (value instanceof RegExp) {\n                return `'${value.source}'`;\n            }\n            else {\n                // otherwise rely on string coercion\n                return `${value}`;\n            }\n    }\n}\n//# sourceMappingURL=literal.js.map","import { PARAM } from '../constants.js';\nimport { literalToSQL } from './literal.js';\nimport { ExprNode } from './node.js';\nexport class ParamNode extends ExprNode {\n    /** The dynamic parameter. */\n    param;\n    /**\n     * Instantiate a param node with a dynamic parameter.\n     * @param param The dynamic parameter.\n     */\n    constructor(param) {\n        super(PARAM);\n        this.param = param;\n    }\n    /**\n     * Returns the current parameter value.\n     */\n    get value() {\n        return this.param.value;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return literalToSQL(this.value);\n    }\n}\n//# sourceMappingURL=param.js.map","import { FUNCTION } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class FunctionNode extends ExprNode {\n    /** The function name. */\n    name;\n    /** The function arguments. */\n    args;\n    /**\n     * Instantiate a function node.\n     * @param name The function name.\n     * @param args The function arguments.\n     */\n    constructor(name, args = []) {\n        super(FUNCTION);\n        this.name = name;\n        this.args = args;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { name, args } = this;\n        return `${name}(${args.join(', ')})`;\n    }\n}\n//# sourceMappingURL=function.js.map","import { AggregateNode } from '../ast/aggregate.js';\nimport { FunctionNode } from '../ast/function.js';\nimport { WindowFunctionNode, WindowNode } from '../ast/window.js';\nimport { asNode } from './ast.js';\n/**\n * Test if an AST node is a specific function call.\n * @param node The SQL AST node to test.\n * @param name The function name.\n */\nexport function isFunctionCall(node, name) {\n    return node instanceof FunctionNode && node.name === name;\n}\n/**\n * Create a new function call AST node.\n * @param name The function name.\n * @param args The function arguments.\n */\nexport function fn(name, ...args) {\n    return new FunctionNode(name, argsList(args).map(asNode));\n}\n/**\n * Create a new aggregate function AST node.\n * @param name The function name.\n * @param args The function arguments.\n */\nexport function aggFn(name, ...args) {\n    return new AggregateNode(name, argsList(args).map(asNode));\n}\n/**\n * Create a new window AST node. The output node has an empty window\n * definition. Use chained calls such as `partitionby` and `orderby`\n * to specify the window settings.\n * @param name The function name.\n * @param args The function arguments.\n */\nexport function winFn(name, ...args) {\n    return new WindowNode(new WindowFunctionNode(name, argsList(args).map(asNode)));\n}\n/**\n * Process a list of expression inputs. Nested arrays are flattened,\n * null results are removed, and each input is cast to a SQL AST node.\n * @param list The list of expression inputs.\n * @param cast A function that casts an input value\n *  to a desired type. By default, `asNode` is used to coerce\n *  inputs to AST nodes as needed.\n */\nexport function exprList(list, cast) {\n    return list.flat().filter(x => x != null).map(x => cast(x));\n}\n/**\n * Process a list of expression inputs. Nested arrays are flattened,\n * null results are removed, and each input is cast (as needed) to\n * be a proper SQL AST node. By default, strings are assumed to be\n * column names, while other primitive values map to SQL literals.\n * Use an alternative *cast* function to change this behavior.\n * @param list The list of expression inputs.\n */\nexport function nodeList(list) {\n    return exprList(list, asNode);\n}\n/**\n * Process a list of function arguments, stripping any undefined\n * values from the end of the list.\n * @param list The input function arguments.\n */\nexport function argsList(list) {\n    const n = list.length;\n    let i = n;\n    for (; i > 0 && list[i - 1] === undefined; --i)\n        ;\n    return i < n ? list.slice(0, i) : list;\n}\n//# sourceMappingURL=function.js.map","// TODO: handle case where identifiers are already quoted?\nexport function parseIdentifier(id) {\n    return id.split('.');\n}\nexport function quoteIdentifier(value) {\n    return `\"${value}\"`;\n}\nexport function unquote(s) {\n    return s && isDoubleQuoted(s) ? s.slice(1, -1) : s;\n}\nfunction isDoubleQuoted(s) {\n    return s[0] === '\"' && s[s.length - 1] === '\"';\n}\n//# sourceMappingURL=string.js.map","import { WINDOW, WINDOW_CLAUSE, WINDOW_DEF, WINDOW_FUNCTION } from '../constants.js';\nimport { nodeList } from '../util/function.js';\nimport { quoteIdentifier } from '../util/string.js';\nimport { ExprNode, SQLNode } from './node.js';\nexport class WindowClauseNode extends SQLNode {\n    /** The window name. */\n    name;\n    /** The window definition. */\n    def;\n    /**\n     * Instantiate a window clause node.\n     * @param name The window name.\n     * @param def The window definition.\n     */\n    constructor(name, def) {\n        super(WINDOW_CLAUSE);\n        this.name = name;\n        this.def = def;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return `${quoteIdentifier(this.name)} AS ${this.def}`;\n    }\n}\nexport class WindowNode extends ExprNode {\n    func;\n    def;\n    /**\n     * Instantiate a window node.\n     * @param func The window function call.\n     * @param over The window definition or name.\n     */\n    constructor(func, over = new WindowDefNode()) {\n        super(WINDOW);\n        this.func = func;\n        this.def = over;\n    }\n    /**\n     * Return an updated window over a named window definition.\n     * @param name The window definition name.\n     * @returns A new window node.\n     */\n    over(name) {\n        return new WindowNode(this.func, this.def.over(name));\n    }\n    /**\n     * Return an updated window with the given partitions.\n     * @param expr The partition by criteria.\n     * @returns A new window node.\n     */\n    partitionby(...expr) {\n        return new WindowNode(this.func, this.def.partitionby(...expr));\n    }\n    /**\n     * Return an updated window with the given ordering.\n     * @param expr The order by criteria.\n     * @returns A new window node.\n     */\n    orderby(...expr) {\n        return new WindowNode(this.func, this.def.orderby(...expr));\n    }\n    /**\n     * Return an updated window with the given frame definition.\n     * @param framedef The frame definition.\n     * @returns A new window node.\n     */\n    frame(framedef) {\n        return new WindowNode(this.func, this.def.frame(framedef));\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return `${this.func} OVER ${this.def}`;\n    }\n}\nexport class WindowFunctionNode extends ExprNode {\n    /** The window function name. */\n    name;\n    /** The window function arguments. */\n    args;\n    /** Flag to ignore null values. */\n    ignoreNulls;\n    /** Order by expression for window arguments. */\n    order;\n    /**\n     * Instantiate a window function call node.\n     * @param name The window function name.\n     * @param args The window function arguments.\n     * @param ignoreNulls Flag to ignore null values.\n     * @param argOrder Order expressions for window arguments.\n     *  Note that this argument ordering is distinct from the window ordering.\n     */\n    constructor(name, args = [], ignoreNulls = false, argOrder = []) {\n        super(WINDOW_FUNCTION);\n        this.name = name;\n        this.args = args;\n        this.ignoreNulls = ignoreNulls;\n        this.order = nodeList([argOrder]);\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { name, args, ignoreNulls, order } = this;\n        const arg = [\n            args.join(', '),\n            order.length ? `ORDER BY ${order.join(', ')}` : '',\n            ignoreNulls ? 'IGNORE NULLS' : ''\n        ].filter(x => x).join(' ');\n        return `${name}(${arg})`;\n    }\n}\nexport class WindowDefNode extends SQLNode {\n    /** The base window definition name. */\n    name;\n    /** The partition by criteria. */\n    partition;\n    /** The order by criteria. */\n    order;\n    /** The window frame definition. */\n    framedef;\n    /**\n     * Instantiate a window definition node.\n     * @param name The base window definition name.\n     * @param partition The partition by criteria.\n     * @param order The order by criteria.\n     * @param framedef The window frame definition.\n     */\n    constructor(name, partition, order, framedef) {\n        super(WINDOW_DEF);\n        this.name = name;\n        this.partition = partition;\n        this.order = order;\n        this.framedef = framedef;\n    }\n    /**\n     * Return an updated window definition with the given base name.\n     * @param name The base window definition name.\n     * @returns A new window definition node.\n     */\n    over(name) {\n        return deriveDef(this, { name });\n    }\n    /**\n     * Return an updated window definition with the given partitions.\n     * @param expr The partition by criteria.\n     * @returns A new window definition node.\n     */\n    partitionby(...expr) {\n        return deriveDef(this, { partition: nodeList(expr) });\n    }\n    /**\n     * Return an updated window definition with the given ordering.\n     * @param expr The order by criteria.\n     * @returns A new window definition node.\n     */\n    orderby(...expr) {\n        return deriveDef(this, { order: nodeList(expr) });\n    }\n    /**\n     * Return an updated window definition with the given frame definition.\n     * @param framedef The frame definition.\n     * @return A new window definition node.\n     */\n    frame(framedef) {\n        return deriveDef(this, { framedef });\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { name, partition, order, framedef } = this;\n        const base = name && quoteIdentifier(name);\n        const def = [\n            base,\n            partition?.length && `PARTITION BY ${partition.join(', ')}`,\n            order?.length && `ORDER BY ${order.join(', ')}`,\n            framedef\n        ].filter(x => x);\n        return base && def.length < 2 ? base : `(${def.join(' ')})`;\n    }\n}\n/**\n * Derive a new window definition node from an existing one.\n * @param def The existing window definition.\n * @param options An options object with new definition properties.\n */\nfunction deriveDef(def, options) {\n    return new WindowDefNode(options.name ?? def.name, options.partition ?? def.partition, options.order ?? def.order, options.framedef ?? def.framedef);\n}\n//# sourceMappingURL=window.js.map","import { COLUMN_REF } from '../constants.js';\nimport { quoteIdentifier } from '../util/string.js';\nimport { ExprNode } from './node.js';\n/**\n * Check if a value is a column reference node.\n * @param value The value to check.\n */\nexport function isColumnRef(value) {\n    return value instanceof ColumnRefNode;\n}\nexport class ColumnRefNode extends ExprNode {\n    /** The table reference. */\n    table;\n    /**\n     * Instantiate a column reference node.\n     * @param type The AST node type.\n     * @param table The table reference.\n     */\n    constructor(type, table) {\n        super(type);\n        this.table = table;\n    }\n    /**\n     * Returns the column name.\n     */\n    get column() {\n        return ''; // subclasses to override\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { column, table } = this;\n        const tref = `${table ?? ''}`;\n        const id = column === '*' ? '*' : quoteIdentifier(column);\n        return (tref ? (tref + '.') : '') + id;\n    }\n}\nexport class ColumnNameRefNode extends ColumnRefNode {\n    /** The column name. */\n    name;\n    /**\n     * Instantiate a column reference node.\n     * @param name The column name.\n     * @param table The table reference.\n     */\n    constructor(name, table) {\n        super(COLUMN_REF, table);\n        this.name = name;\n    }\n    /**\n     * Returns the column name.\n     */\n    get column() {\n        return this.name;\n    }\n}\n//# sourceMappingURL=column-ref.js.map","import { COLUMN_PARAM } from '../constants.js';\nimport { ColumnRefNode } from './column-ref.js';\n/**\n * Check if a value is a dynamic column reference node.\n * @param value The value to check.\n */\nexport function isColumnParam(value) {\n    return value instanceof ColumnParamNode;\n}\nexport class ColumnParamNode extends ColumnRefNode {\n    /** The column name as a parameter node */\n    param;\n    /**\n     * Instantiate a column param node.\n     * @param param The column name as a parameter node.\n     * @param table The table reference.\n     */\n    constructor(param, table) {\n        super(COLUMN_PARAM, table);\n        this.param = param;\n    }\n    /**\n     * Returns the column name.\n     */\n    get column() {\n        return `${this.param.value}`;\n    }\n}\n//# sourceMappingURL=column-param.js.map","/**\n * Check if a value is a string.\n * @param value The value to check.\n */\nexport function isString(value) {\n    return typeof value === 'string';\n}\n/**\n * Check if a value is an array.\n * @param value The value to check.\n */\nexport function isArray(value) {\n    return Array.isArray(value);\n}\n/**\n * Check if a value is a dynamic parameter.\n * @param value The value to check.\n */\nexport function isParamLike(value) {\n    if (value) {\n        const v = value;\n        return typeof v?.addEventListener === 'function'\n            && v.dynamic !== false\n            && 'value' in v;\n    }\n    return false;\n}\n//# sourceMappingURL=type-check.js.map","import { ColumnParamNode } from '../ast/column-param.js';\nimport { ColumnNameRefNode } from '../ast/column-ref.js';\nimport { ParamNode } from '../ast/param.js';\nimport { asTableRef } from '../util/ast.js';\nimport { isParamLike } from '../util/type-check.js';\n/**\n * Create a column reference.\n * @param name The column name, as a string or as a dynamic parameter.\n * @param table The table reference.\n */\nexport function column(name, table) {\n    const tref = asTableRef(table);\n    return isParamLike(name)\n        ? new ColumnParamNode(new ParamNode(name), tref)\n        : new ColumnNameRefNode(name, tref);\n}\n//# sourceMappingURL=column.js.map","import { VERBATIM } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class VerbatimNode extends ExprNode {\n    /** The verbatim content to include. */\n    value;\n    /** A type hint for analyzing verbatim content. */\n    hint;\n    /**\n     * Instantiate a raw node with verbatim content.\n     * @param value The verbatim content to include.\n     * @param hint A type hint for analyzing verbatim content.\n     */\n    constructor(value, hint) {\n        super(VERBATIM);\n        this.value = value;\n        this.hint = hint;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return this.value;\n    }\n}\n//# sourceMappingURL=verbatim.js.map","import { LiteralNode } from '../ast/literal.js';\nimport { VerbatimNode } from '../ast/verbatim.js';\n/**\n * Return a SQL AST node for a literal value. The supported types are\n * null, string, number, boolean, Date, and RegExp. Otherwise, the\n * input value will be directly coerced to a string.\n * @param value The literal value.\n */\nexport function literal(value) {\n    return new LiteralNode(value);\n}\n/**\n * Return a SQL AST node for verbatim string content.\n * @param value The verbatim value.\n * @param hint A type hint for analyzing verbatim content.\n */\nexport function verbatim(value, hint) {\n    return new VerbatimNode(value, hint);\n}\n//# sourceMappingURL=literal.js.map","import { TABLE_REF } from '../constants.js';\nimport { quoteIdentifier } from '../util/string.js';\nimport { ExprNode } from './node.js';\n/**\n * Check if a value is a table reference node.\n * @param value The value to check.\n */\nexport function isTableRef(value) {\n    return value instanceof TableRefNode;\n}\nexport class TableRefNode extends ExprNode {\n    /** The table name, including namespaces. */\n    table;\n    /**\n     * Instantiate a table reference node.\n     * @param table The table name.\n     */\n    constructor(table) {\n        super(TABLE_REF);\n        this.table = [table].flat();\n    }\n    /**\n     * The table name without database or schema namespaces.\n     */\n    get name() {\n        return this.table[this.table.length - 1];\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return this.table.map(t => quoteIdentifier(t)).join('.');\n    }\n}\n//# sourceMappingURL=table-ref.js.map","import { TableRefNode } from '../ast/table-ref.js';\nimport { exprList } from '../util/function.js';\n/**\n * Returns a named table or view reference.\n * @param ids Table and namespace identifiers.\n *  For example 'name' or ['schema', 'name'].\n * @returns A table reference or undefined if the input list is empty.\n */\nexport function tableRef(...ids) {\n    const args = exprList(ids, String);\n    return args?.length ? new TableRefNode(args) : undefined;\n}\n//# sourceMappingURL=table-ref.js.map","import { ExprNode } from '../ast/node.js';\nimport { ParamNode } from '../ast/param.js';\nimport { WindowDefNode } from '../ast/window.js';\nimport { column } from '../functions/column.js';\nimport { literal, verbatim } from '../functions/literal.js';\nimport { tableRef } from '../functions/table-ref.js';\nimport { parseIdentifier } from './string.js';\nimport { isArray, isParamLike, isString } from './type-check.js';\n/**\n * Interpret a value as a SQL AST node. String values are assumed to be\n * column references. All other primitive values are interpreted as\n * SQL literals. Dynamic parameters are interpreted as param AST nodes,\n * while existing AST nodes are left as-is.\n * @param value The value to interpret as a SQL AST node.\n */\nexport function asNode(value) {\n    return isString(value)\n        ? parseColumnRef(value)\n        : asLiteral(value);\n}\n/**\n * Interpret a value as a verbatim SQL AST node. String values will be\n * passed through to queries as verbatim text. All other primitive values\n * are interpreted as SQL literals. Dynamic parameters are interpreted\n * as param AST nodes, while existing AST nodes are left as-is.\n * @param value The value to interpret as a verbatim AST node.\n */\nexport function asVerbatim(value) {\n    return isString(value)\n        ? verbatim(value)\n        : asLiteral(value);\n}\n/**\n * Interpret a value as a literal AST node. All other primitive values\n * are interpreted as SQL literals. Dynamic parameters are interpreted\n * as param AST nodes, while existing AST nodes are left as-is.\n * @param value The value to interpret as a literal AST node.\n */\nexport function asLiteral(value) {\n    return value instanceof ExprNode ? value\n        : isParamLike(value) ? new ParamNode(value)\n            : literal(value);\n}\n/**\n * Interpret a value as a table reference AST node. String values are parsed\n * assuming dot ('.') delimiters (as in `schema.table`). Array values are\n * interpreted as pre-parsed name paths (as in `['schema', 'table']`). Any\n * other values are left as-is.\n * @param value The value to interpret as a table reference AST node.\n */\nexport function asTableRef(value) {\n    return getTableRef(value);\n}\n/**\n * Try to interpret a value as a table reference AST node. String values are\n * parsed assuming dot ('.') delimiters (as in `schema.table`). Array values\n * are interpreted as pre-parsed name paths (as in `['schema', 'table']`). Any\n * other values are left as-is.\n * @param value The value to interpret as a table reference.\n */\nexport function maybeTableRef(value) {\n    return getTableRef(value);\n}\nfunction getTableRef(value) {\n    return isString(value) ? parseTableRef(value)\n        : isArray(value) ? tableRef(value)\n            : value;\n}\n/**\n * Parse a string as a column reference, potentially with\n * dot ('.') delimited table, schema, and database references.\n * @param ref The column reference string.\n */\nexport function parseColumnRef(ref) {\n    const ids = parseIdentifier(ref);\n    return column(ids.pop(), tableRef(ids));\n}\n/**\n * Parse a string as a table reference, potentially with\n * dot ('.') delimited schema and database references.\n * @param ref The table reference string.\n */\nexport function parseTableRef(ref) {\n    return tableRef(parseIdentifier(ref));\n}\n/**\n * Create a new window definition node. The return value is an empty\n * window definition. Use chained calls such as `partitionby` and `orderby`\n * to specify the window settings.\n */\nexport function over() {\n    return new WindowDefNode();\n}\n//# sourceMappingURL=ast.js.map","import { AGGREGATE } from '../constants.js';\nimport { asVerbatim } from '../util/ast.js';\nimport { nodeList } from '../util/function.js';\nimport { isString } from '../util/type-check.js';\nimport { ExprNode } from './node.js';\nimport { WindowNode } from './window.js';\nexport class AggregateNode extends ExprNode {\n    /** The aggregate function name. */\n    name;\n    /** The aggregate function arguments. */\n    args;\n    /** The distinct flag. */\n    isDistinct;\n    /** Filter criteria. */\n    filter;\n    /** Order by expression for order-sensitive aggregates. */\n    order;\n    /**\n     * Instantiate an aggregate function node.\n     * @param name The aggregate function name.\n     * @param args The aggregate function arguments.\n     * @param distinct The distinct flag.\n     * @param filter Filter expression.\n     * @param argOrder Order by expression.\n     */\n    constructor(name, args, distinct = false, filter = null, argOrder = []) {\n        super(AGGREGATE);\n        this.name = name;\n        this.args = args;\n        this.isDistinct = distinct;\n        this.filter = filter;\n        this.order = nodeList([argOrder]);\n    }\n    /**\n     * Return a new derived aggregate over distinct values.\n     * @param isDistinct The distinct flag.\n     * @returns A new aggregate node.\n     */\n    distinct(isDistinct = true) {\n        return new AggregateNode(this.name, this.args, isDistinct, this.filter, this.order);\n    }\n    /**\n     * Return a new derived aggregate function that filters values.\n     * @param The filter expression.\n     * @returns A new aggregate node.\n     */\n    where(filter) {\n        if (isString(filter))\n            filter = asVerbatim(filter);\n        return new AggregateNode(this.name, this.args, this.isDistinct, filter, this.order);\n    }\n    /**\n     * Return a new derived aggregate function that sorts values prior to aggregation.\n     * @param order The order by expression.\n     * @returns A new aggregate node.\n     */\n    argOrder(order) {\n        return new AggregateNode(this.name, this.args, this.isDistinct, this.filter, order);\n    }\n    /**\n     * Return a new window function over this aggregate.\n     * @returns A new window node.\n     */\n    window() {\n        return new WindowNode(this);\n    }\n    /**\n     * Return a new window function over this aggregate with the given partitions.\n     * @param expr The partition by criteria.\n     * @returns A new window node.\n     */\n    partitionby(...expr) {\n        return this.window().partitionby(...expr);\n    }\n    /**\n     * Return a new window function over this aggregate with the given ordering.\n     * @param expr The order by criteria.\n     * @returns A new window node.\n     */\n    orderby(...expr) {\n        return this.window().orderby(...expr);\n    }\n    /**\n     * Return a new window function over this aggregate with the given frame.\n     * @param framedef The window frame definition.\n     * @returns A new window node.\n     */\n    frame(framedef) {\n        return this.window().frame(framedef);\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { name, args, isDistinct, filter, order } = this;\n        const arg = [\n            isDistinct ? 'DISTINCT' : '',\n            args?.length ? args.join(', ')\n                : name.toLowerCase() === 'count' ? '*'\n                    : '',\n            order.length ? `ORDER BY ${order.join(', ')}` : ''\n        ].filter(x => x).join(' ');\n        const filt = filter ? ` FILTER (WHERE ${filter})` : '';\n        return `${name}(${arg})${filt}`;\n    }\n}\n/**\n * Check if a function name corresponds to an aggregate function.\n * @param name The function name to check\n * @returns True if a known aggregate function, false otherwise.\n */\nexport function isAggregateFunction(name) {\n    return aggregateNames.includes(name.toLowerCase());\n}\n/**\n * An array of known aggregate function names.\n * From https://duckdb.org/docs/sql/functions/aggregates.html.\n */\nexport const aggregateNames = [\n    'any_value',\n    'approx_count_distinct',\n    'approx_quantile',\n    'arbitrary',\n    'arg_max',\n    'arg_max_null',\n    'arg_min',\n    'arg_min_null',\n    'array_agg',\n    'avg',\n    'bit_and',\n    'bit_or',\n    'bit_xor',\n    'bitstring_agg',\n    'bool_and',\n    'bool_or',\n    'corr',\n    'count',\n    'count_star',\n    'covar_pop',\n    'covar_samp',\n    'entropy',\n    'favg',\n    'first',\n    'fsum',\n    'geomean',\n    'kurtosis_pop',\n    'kurtosis',\n    'last',\n    'mad',\n    'max',\n    'max_by',\n    'median',\n    'min',\n    'min_by',\n    'mode',\n    'product',\n    'quantile',\n    'quantile_cont',\n    'quantile_disc',\n    'regr_avgx',\n    'regr_avgy',\n    'regr_count',\n    'regr_intercept',\n    'regr_r2',\n    'regr_sxx',\n    'regr_sxy',\n    'regr_syy',\n    'regr_slope',\n    'reservoir_quantile',\n    'skewness',\n    'stddev',\n    'stddev_pop',\n    'stddev_samp',\n    'string_agg',\n    'sum',\n    'variance',\n    'var_pop',\n    'var_samp'\n];\n//# sourceMappingURL=aggregate.js.map","import { BETWEEN_OPERATOR, NOT_BETWEEN_OPERATOR } from '../constants.js';\nimport { ExprNode } from './node.js';\nclass AbstractBetweenOpNode extends ExprNode {\n    /** The input expression. */\n    expr;\n    /** The range extent. */\n    extent;\n    /**\n     * Instantiate an abstract between operator node.\n     * @param type The node type.\n     * @param expr The input expression.\n     * @param extent The range extent.\n     */\n    constructor(type, expr, extent) {\n        super(type);\n        this.expr = expr;\n        this.extent = extent;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     * @param op The operator to apply.\n     */\n    toSQL(op) {\n        const { extent: r, expr } = this;\n        return r ? `(${expr} ${op} ${r[0]} AND ${r[1]})` : '';\n    }\n}\nexport class BetweenOpNode extends AbstractBetweenOpNode {\n    /**\n     * Instantiate a between operator node.\n     * @param expr The input expression.\n     * @param extent The range extent.\n     */\n    constructor(expr, extent) {\n        super(BETWEEN_OPERATOR, expr, extent);\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return super.toSQL('BETWEEN');\n    }\n}\nexport class NotBetweenOpNode extends AbstractBetweenOpNode {\n    /**\n     * Instantiate a not between operator node.\n     * @param expr The input expression.\n     * @param extent The range extent.\n     */\n    constructor(expr, extent) {\n        super(NOT_BETWEEN_OPERATOR, expr, extent);\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return super.toSQL('NOT BETWEEN');\n    }\n}\n//# sourceMappingURL=between-op.js.map","import { BINARY_OPERATOR } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class BinaryOpNode extends ExprNode {\n    /** The operator type. */\n    op;\n    /** The left input expression. */\n    left;\n    /** The right input expression. */\n    right;\n    /**\n     * Instantiate a binary operator node.\n     * @param op The operator type.\n     * @param left The left input expression.\n     * @param right The right input expression.\n     */\n    constructor(op, left, right) {\n        super(BINARY_OPERATOR);\n        this.op = op;\n        this.left = left;\n        this.right = right;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return `(${this.left} ${this.op} ${this.right})`;\n    }\n}\n//# sourceMappingURL=binary-op.js.map","import { CASE, WHEN } from '../constants.js';\nimport { asNode } from '../util/ast.js';\nimport { ExprNode, SQLNode } from './node.js';\nexport class CaseNode extends ExprNode {\n    /** The optional base expression. */\n    expr;\n    /** An array of WHEN/THEN expression nodes. */\n    _when;\n    /** An ELSE expression. */\n    _else;\n    /**\n     * Instantiate a case node.\n     * @param expr An optional base expression, that comes\n     *  immediately after the CASE keyword. If specified, this case statement\n     *  acts like a switch statement, with WHEN expressions as values to\n     *  match against the switch value rather than boolean conditions.\n     * @param when An array of WHEN/THEN expression nodes.\n     * @param elseExpr An ELSE expression.\n     */\n    constructor(expr = undefined, when = [], elseExpr = undefined) {\n        super(CASE);\n        this.expr = expr;\n        this._when = when;\n        this._else = elseExpr;\n    }\n    /**\n     * Return a new case node with the given conditional added as\n     * the last WHEN / THEN pair.\n     * @param cond The WHEN condition expression.\n     * @param value The THEN value expression.\n     */\n    when(cond, value) {\n        return new CaseNode(this.expr, this._when.concat(new WhenNode(asNode(cond), asNode(value))), this._else);\n    }\n    /**\n     * Return a new case node with the given ELSE expression.\n     * @param expr The ELSE expression.\n     */\n    else(expr) {\n        return new CaseNode(this.expr, this._when, asNode(expr));\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return 'CASE '\n            + (this.expr ? `${this.expr} ` : '')\n            + this._when.join(' ')\n            + (this._else ? ` ELSE ${this._else}` : '')\n            + ' END';\n    }\n}\nexport class WhenNode extends SQLNode {\n    /** The condition expression. */\n    when;\n    /** The value expression. */\n    then;\n    /**\n     * Instantiate a case node.\n     * @param when The WHEN condition expression.\n     * @param then The THEN value expression.\n     */\n    constructor(when, then) {\n        super(WHEN);\n        this.when = when;\n        this.then = then;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return `WHEN ${this.when} THEN ${this.then}`;\n    }\n}\n//# sourceMappingURL=case.js.map","import { CAST } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class CastNode extends ExprNode {\n    /** The expression to type cast. */\n    expr;\n    /** The type to cast to. */\n    cast;\n    /**\n     * Instantiate a cast node.\n     * @param expr The expression to type cast.\n     * @param type The type to cast to.\n     */\n    constructor(expr, type) {\n        super(CAST);\n        this.expr = expr;\n        this.cast = type;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        // TODO? could include check to see if parens are necessary\n        return `(${this.expr})::${this.cast}`;\n    }\n}\n//# sourceMappingURL=cast.js.map","import { FRAGMENT } from '../constants.js';\nimport { ExprNode } from './node.js';\n/**\n * A SQL AST node made up of disjoint fragments that are combined to form\n * a coherent expression. Along with verbatim content, this class serves\n * as an \"escape hatch\" for handling more unstructured SQL content.\n */\nexport class FragmentNode extends ExprNode {\n    /** The consecutive parts making up the fragment. */\n    spans;\n    /**\n     * Instantiate a fragment node with arbitrary content.\n     * @param spans The consecutive parts making up the fragment.\n     */\n    constructor(spans) {\n        super(FRAGMENT);\n        this.spans = spans;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return this.spans.join('');\n    }\n}\n//# sourceMappingURL=fragment.js.map","import { SAMPLE_CLAUSE } from '../constants.js';\nimport { SQLNode } from './node.js';\nexport class SampleClauseNode extends SQLNode {\n    /** The sample size as either a row count or percentage. */\n    size;\n    /** Flag if the sampling unit is rows (`false`) or percentage (`true`). */\n    perc;\n    /** The sampling method. */\n    method;\n    /** The random seed. */\n    seed;\n    /**\n     * Instantiate a sample clause node.\n     * @param size The sample size as either a row count or percentage.\n     * @param perc Flag indicating if the sampling unit is\n     *   rows (`false`) or a percentage (`true`).\n     * @param method The sampling method. If unspecified,\n     *   a default method is applied based on the sampling unit.\n     * @param seed The random seed.\n     */\n    constructor(size, perc = false, method, seed) {\n        super(SAMPLE_CLAUSE);\n        this.size = size;\n        this.perc = perc;\n        this.method = method;\n        this.seed = seed;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { size, perc, method, seed } = this;\n        const m = method ? `${method} ` : '';\n        const s = seed != null ? ` REPEATABLE (${seed})` : '';\n        return `${m}(${size}${perc ? '%' : ' ROWS'})${s}`;\n    }\n}\n//# sourceMappingURL=sample.js.map","import { SELECT_CLAUSE } from '../constants.js';\nimport { quoteIdentifier } from '../util/string.js';\nimport { ColumnRefNode } from './column-ref.js';\nimport { SQLNode } from './node.js';\nexport class SelectClauseNode extends SQLNode {\n    /** The select expression. */\n    expr;\n    /** The output name. */\n    alias;\n    /**\n     * Instantiate a select node.\n     * @param expr The select expression.\n     * @param alias The output name.\n     */\n    constructor(expr, alias) {\n        super(SELECT_CLAUSE);\n        this.expr = expr;\n        this.alias = alias;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { expr, alias } = this;\n        return !alias || isColumnRefFor(expr, alias)\n            ? `${expr}`\n            : `${expr} AS ${quoteIdentifier(alias)}`;\n    }\n}\nfunction isColumnRefFor(expr, name) {\n    return expr instanceof ColumnRefNode\n        && expr.table == null\n        && expr.column === name;\n}\n//# sourceMappingURL=select.js.map","import { WITH_CLAUSE } from '../constants.js';\nimport { SQLNode } from './node.js';\nexport class WithClauseNode extends SQLNode {\n    /** The common table expression (CTE) name. */\n    name;\n    /** The common table expression (CTE) query. */\n    query;\n    /** The common table expression (CTE) materialization flag. */\n    materialized;\n    /**\n     * Instantiate a with clause node for a common table expression (CTE).\n     * @param name The common table expression (CTE) name.\n     * @param query The common table expression (CTE) query.\n     * @param materialized The common table expression (CTE)\n     *  materialization flag. If `true`, forces materialization of the CTE.\n     *  If `false`, materialization is not performed. Otherwise (for example, if\n     *  `undefined` or `null`), materialization is decided by the database.\n     */\n    constructor(name, query, materialized = null) {\n        super(WITH_CLAUSE);\n        this.name = name;\n        this.query = query;\n        this.materialized = materialized;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const flag = this.materialized;\n        const mat = flag === true ? ' MATERIALIZED'\n            : flag === false ? ' NOT MATERIALIZED'\n                : '';\n        return `\"${this.name}\" AS${mat} (${this.query})`;\n    }\n}\n//# sourceMappingURL=with.js.map","import { DESCRIBE_QUERY, SELECT_QUERY, SET_OPERATION } from '../constants.js';\nimport { asNode, asVerbatim, maybeTableRef } from '../util/ast.js';\nimport { exprList, nodeList } from '../util/function.js';\nimport { unquote } from '../util/string.js';\nimport { isArray, isString } from '../util/type-check.js';\nimport { isColumnRef } from './column-ref.js';\nimport { FromClauseNode } from './from.js';\nimport { ExprNode, SQLNode, isNode } from './node.js';\nimport { SampleClauseNode } from './sample.js';\nimport { SelectClauseNode } from './select.js';\nimport { isTableRef } from './table-ref.js';\nimport { WindowClauseNode } from './window.js';\nimport { WithClauseNode } from './with.js';\n/**\n * Check if a value is a selection query or set operation.\n * @param value The value to check.\n */\nexport function isQuery(value) {\n    return value instanceof Query;\n}\n/**\n * Check if a value is a selection query.\n * @param value The value to check.\n */\nexport function isSelectQuery(value) {\n    return value instanceof SelectQuery;\n}\n/**\n * Check if a value is a describe query.\n * @param value The value to check.\n */\nexport function isDescribeQuery(value) {\n    return value instanceof DescribeQuery;\n}\nexport class Query extends ExprNode {\n    /**\n     * Create a new WITH clause with the given CTE queries.\n     * @param expr The WITH CTE queries.\n     */\n    static with(...expr) {\n        return new WithClause(...expr);\n    }\n    /**\n     * Create a new select query with the given SELECT expressions.\n     * @param expr The SELECT expressions.\n     */\n    static select(...expr) {\n        return new SelectQuery().select(...expr);\n    }\n    /**\n     * Create a new select query with the given FROM expressions.\n     * @param expr The FROM expressions.\n     */\n    static from(...expr) {\n        return new SelectQuery().from(...expr);\n    }\n    /**\n     * Create a new UNION set operation over the given queries.\n     * @param queries The queries.\n     */\n    static union(...queries) {\n        return new SetOperation('UNION', queries.flat());\n    }\n    /**\n     * Create a new UNION BY NAME set operation over the given queries.\n     * @param queries The queries.\n     */\n    static unionByName(...queries) {\n        return new SetOperation('UNION BY NAME', queries.flat());\n    }\n    /**\n     * Create a new UNION ALL set operation over the given queries.\n     * @param queries The queries.\n     */\n    static unionAll(...queries) {\n        return new SetOperation('UNION ALL', queries.flat());\n    }\n    /**\n     * Create a new UNION ALL BY NAME set operation over the given queries.\n     * @param queries The queries.\n     */\n    static unionAllByName(...queries) {\n        return new SetOperation('UNION ALL BY NAME', queries.flat());\n    }\n    /**\n     * Create a new INTERSECT set operation over the given queries.\n     * @param queries The queries.\n     */\n    static intersect(...queries) {\n        return new SetOperation('INTERSECT', queries.flat());\n    }\n    /**\n     * Create a new INTERSECT ALL set operation over the given queries.\n     * @param queries The queries.\n     */\n    static intersectAll(...queries) {\n        return new SetOperation('INTERSECT ALL', queries.flat());\n    }\n    /**\n     * Create a new EXCEPT set operation over the given queries.\n     * @param queries The queries.\n     */\n    static except(...queries) {\n        return new SetOperation('EXCEPT', queries.flat());\n    }\n    /**\n     * Create a new EXCEPT ALL set operation over the given queries.\n     * @param queries The queries.\n     */\n    static exceptAll(...queries) {\n        return new SetOperation('EXCEPT ALL', queries.flat());\n    }\n    /**\n     * Create a new describe query for the given input query.\n     * @param query The query to describe.\n     */\n    static describe(query) {\n        return new DescribeQuery(query);\n    }\n    _with = [];\n    _orderby = [];\n    _limitPerc = false;\n    _limit;\n    _offset;\n    cteFor = null;\n    /**\n     * Instantiate a new query.\n     */\n    constructor(type) {\n        super(type);\n    }\n    /**\n     * Return a list of subqueries.\n     */\n    get subqueries() {\n        return [];\n    }\n    /**\n     * Clone this query.\n     */\n    clone() {\n        return this;\n    }\n    /**\n     * Add a pointer to the query for which this query is a CTE.\n     * @param query The query for which this query is a CTE.\n     */\n    setCteFor(query) {\n        this.cteFor = query;\n    }\n    /**\n     * Add WITH common table expressions (CTEs).\n     * @param expr Expressions to add.\n     */\n    with(...expr) {\n        const list = [];\n        const add = (name, q) => {\n            const query = q.clone();\n            query.setCteFor(this);\n            list.push(new WithClauseNode(name, query));\n        };\n        expr.flat().forEach(e => {\n            if (e instanceof WithClauseNode)\n                list.push(e);\n            else if (e != null)\n                for (const name in e)\n                    add(name, e[name]);\n        });\n        this._with = this._with.concat(list);\n        return this;\n    }\n    /**\n     * Add ORDER BY expressions.\n     * @param expr Expressions to add.\n     */\n    orderby(...expr) {\n        this._orderby = this._orderby.concat(nodeList(expr));\n        return this;\n    }\n    /**\n     * Set the query result LIMIT as a percentage value.\n     * @param value The limit percentage value.\n     */\n    limitPercent(value) {\n        this._limitPerc = true;\n        this._limit = asNode(value);\n        return this;\n    }\n    /**\n     * Set the query result LIMIT.\n     * @param value The limit value.\n     */\n    limit(value) {\n        this._limitPerc = false;\n        this._limit = asNode(value);\n        return this;\n    }\n    /**\n     * Set the query result OFFSET.\n     * @param value The offset value.\n     */\n    offset(value) {\n        this._offset = asNode(value);\n        return this;\n    }\n}\nexport class SelectQuery extends Query {\n    _select = [];\n    _from = [];\n    _where = [];\n    _sample;\n    _groupby = [];\n    _having = [];\n    _window = [];\n    _qualify = [];\n    _distinct = false;\n    /**\n     * Instantiate a new select query.\n     */\n    constructor() {\n        super(SELECT_QUERY);\n    }\n    /**\n     * Return a list of subqueries.\n     */\n    get subqueries() {\n        // build map of ctes within base query WITH clause\n        const q = this.cteFor || this;\n        const w = q instanceof SelectQuery ? q._with : [];\n        const cte = w.reduce((obj, c) => (obj[c.name] = c.query, obj), {});\n        // extract subqueries in FROM clause\n        // unused CTEs will be ignored\n        const queries = [];\n        this._from.forEach(({ expr }) => {\n            if (isQuery(expr)) {\n                queries.push(expr);\n            }\n            else if (isTableRef(expr)) {\n                const subq = cte[expr.name];\n                if (subq)\n                    queries.push(subq);\n            }\n        });\n        return queries;\n    }\n    /**\n     * Clone this query.\n     */\n    clone() {\n        return Object.assign(new SelectQuery(), this);\n    }\n    /**\n     * Add SELECT expressions.\n     * @param expr Expressions to add.\n     */\n    select(...expr) {\n        const keys = new Set;\n        const list = [];\n        const add = (v, as) => {\n            const key = unquote(as);\n            keys.add(key);\n            if (v)\n                list.push(new SelectClauseNode(asNode(v), key));\n        };\n        expr.flat().forEach(e => {\n            if (e == null)\n                return;\n            else if (isString(e))\n                add(e, e);\n            else if (isColumnRef(e))\n                add(e, e.column);\n            else if (isArray(e))\n                add(e[1], e[0]);\n            else if (isNode(e))\n                add(e, `${e}`);\n            else\n                for (const alias in e)\n                    add(e[alias], alias);\n        });\n        this._select = this._select.filter(x => !keys.has(x.alias)).concat(list);\n        return this;\n    }\n    /**\n     * Set SELECT expressions, replacing any prior expressions.\n     * @param expr Expressions to add.\n     */\n    setSelect(...expr) {\n        this._select = [];\n        return this.select(...expr);\n    }\n    /**\n     * Indicate if this query should retrieve distinct values only.\n     * @param value The distinct flag\n     */\n    distinct(value = true) {\n        this._distinct = !!value;\n        return this;\n    }\n    /**\n     * Add table FROM expressions.\n     * @param expr Expressions to add.\n     */\n    from(...expr) {\n        const list = [];\n        const add = (v, as) => {\n            list.push(new FromClauseNode(maybeTableRef(v), unquote(as)));\n        };\n        expr.flat().forEach(e => {\n            if (e == null)\n                return;\n            else if (e instanceof FromClauseNode)\n                list.push(e);\n            else if (isString(e))\n                add(e, e);\n            else if (isTableRef(e))\n                add(e, e.name);\n            else if (isNode(e))\n                add(e);\n            else if (isArray(e))\n                add(e[1], e[0]);\n            else\n                for (const alias in e)\n                    add(e[alias], alias);\n        });\n        this._from = this._from.concat(list);\n        return this;\n    }\n    /**\n     * Set FROM expressions, replacing any prior expressions.\n     * @param expr Expressions to add.\n     */\n    setFrom(...expr) {\n        this._from = [];\n        return this.from(...expr);\n    }\n    /**\n     * Set SAMPLE settings.\n     * @param value Either a sample clause node or the sample size as either\n     *  a row count or percentage.\n     * @param method The sampling method to use.\n     * @param seed The random seed.\n     */\n    sample(value, method, seed) {\n        let clause;\n        if (typeof value === 'number') {\n            const perc = value > 0 && value < 1;\n            const size = perc ? value * 100 : Math.floor(value);\n            clause = new SampleClauseNode(size, perc, method, seed);\n        }\n        else {\n            clause = value;\n        }\n        this._sample = clause ?? undefined;\n        return this;\n    }\n    /**\n     * Add WHERE expressions.\n     * @param expr Expressions to add.\n     */\n    where(...expr) {\n        this._where = this._where.concat(exprList(expr, asVerbatim));\n        return this;\n    }\n    /**\n     * Set WHERE expressions, replacing any prior expressions.\n     * @param expr Expressions to add.\n     */\n    setWhere(...expr) {\n        this._where = [];\n        return this.where(...expr);\n    }\n    /**\n     * Add GROUP BY expressions.\n     * @param expr Expressions to add.\n     */\n    groupby(...expr) {\n        this._groupby = this._groupby.concat(nodeList(expr));\n        return this;\n    }\n    /**\n     * Set GROUP BY expressions, replacing any prior expressions.\n     * @param expr Expressions to add.\n     */\n    setGroupby(...expr) {\n        this._groupby = [];\n        return this.groupby(...expr);\n    }\n    /**\n     * Add HAVING expressions.\n     * @param expr Expressions to add.\n     */\n    having(...expr) {\n        this._having = this._having.concat(exprList(expr, asVerbatim));\n        return this;\n    }\n    /**\n     * Add WINDOW definitions.\n     * @param expr Window definitions to add.\n     */\n    window(...expr) {\n        const list = [];\n        expr.flat().forEach(e => {\n            if (e != null)\n                for (const name in e) {\n                    list.push(new WindowClauseNode(unquote(name), e[name]));\n                }\n        });\n        this._window = this._window.concat(list);\n        return this;\n    }\n    /**\n     * Add QUALIFY expressions.\n     * @param expr Expressions to add.\n     */\n    qualify(...expr) {\n        this._qualify = this._qualify.concat(exprList(expr, asVerbatim));\n        return this;\n    }\n    /**\n     * Generate a SQL query string.\n     */\n    toString() {\n        const { _with, _select, _distinct, _from, _sample, _where, _groupby, _having, _window, _qualify, _orderby, _limitPerc, _limit, _offset } = this;\n        const sql = [];\n        // WITH\n        if (_with.length)\n            sql.push(`WITH ${_with.join(', ')}`);\n        // SELECT\n        sql.push(`SELECT${_distinct ? ' DISTINCT' : ''} ${_select.join(', ')}`);\n        // FROM\n        if (_from.length)\n            sql.push(`FROM ${_from.join(', ')}`);\n        // WHERE\n        if (_where.length) {\n            const clauses = _where.map(String).filter(x => x).join(' AND ');\n            if (clauses)\n                sql.push(`WHERE ${clauses}`);\n        }\n        // SAMPLE\n        if (_sample)\n            sql.push(`USING SAMPLE ${_sample}`);\n        // GROUP BY\n        if (_groupby.length) {\n            sql.push(`GROUP BY ${_groupby.join(', ')}`);\n        }\n        // HAVING\n        if (_having.length) {\n            const clauses = _having.map(String).filter(x => x).join(' AND ');\n            if (clauses)\n                sql.push(`HAVING ${clauses}`);\n        }\n        // WINDOW\n        if (_window.length)\n            sql.push(`WINDOW ${_window.join(', ')}`);\n        // QUALIFY\n        if (_qualify.length) {\n            const clauses = _qualify.map(String).filter(x => x).join(' AND ');\n            if (clauses)\n                sql.push(`QUALIFY ${clauses}`);\n        }\n        // ORDER BY\n        if (_orderby.length)\n            sql.push(`ORDER BY ${_orderby.join(', ')}`);\n        // LIMIT\n        if (_limit)\n            sql.push(`LIMIT ${_limit}${_limitPerc ? '%' : ''}`);\n        // OFFSET\n        if (_offset)\n            sql.push(`OFFSET ${_offset}`);\n        return sql.join(' ');\n    }\n}\nexport class DescribeQuery extends SQLNode {\n    query;\n    /**\n     * Instantiate a describe query.\n     * @param query The query to describe.\n     */\n    constructor(query) {\n        super(DESCRIBE_QUERY);\n        this.query = query;\n    }\n    /**\n     * Clone this describe query.\n     */\n    clone() {\n        // @ts-expect-error creates describe query\n        return new DescribeQuery(this.query.clone());\n    }\n    /**\n     * Generate a SQL query string.\n     */\n    toString() {\n        return `DESCRIBE ${this.query}`;\n    }\n}\nexport class SetOperation extends Query {\n    /** The set operation to perform. */\n    op;\n    /** The input queries to the set operation. */\n    queries;\n    /**\n     * Instantiate a new set operation instance.\n     * @param op The set operation.\n     * @param queries The subqueries.\n     */\n    constructor(op, queries) {\n        super(SET_OPERATION);\n        this.op = op;\n        this.queries = queries;\n    }\n    /**\n     * Add a pointer to the query for which this query is a CTE.\n     * @param query The query for which this query is a CTE.\n     */\n    setCteFor(query) {\n        super.setCteFor(query);\n        const { queries, cteFor } = this;\n        if (cteFor)\n            queries.forEach(q => q.setCteFor(cteFor));\n    }\n    /**\n     * Return a list of subqueries.\n     */\n    get subqueries() {\n        return this.queries;\n    }\n    /**\n     * Clone this set operation.\n     */\n    clone() {\n        const { op, queries, ...rest } = this;\n        // @ts-expect-error creates set operation\n        return Object.assign(new SetOperation(op, queries), rest);\n    }\n    /**\n     * Generate a SQL query string.\n     */\n    toString() {\n        const { op, queries, _with, _orderby, _limitPerc, _limit, _offset } = this;\n        const sql = [];\n        // WITH\n        if (_with.length)\n            sql.push(`WITH ${_with.join(', ')}`);\n        // SUBQUERIES\n        sql.push(queries.join(` ${op} `));\n        // ORDER BY\n        if (_orderby.length)\n            sql.push(`ORDER BY ${_orderby.join(', ')}`);\n        // LIMIT\n        if (_limit)\n            sql.push(`LIMIT ${_limit}${_limitPerc ? '%' : ''}`);\n        // OFFSET\n        if (_offset)\n            sql.push(`OFFSET ${_offset}`);\n        return sql.join(' ');\n    }\n}\nclass WithClause {\n    /** The common table expressions (CTE). */\n    _with;\n    /**\n     * Instantiate a new WITH clause instance.\n     * @param expr The WITH CTE queries.\n     */\n    constructor(...expr) {\n        this._with = expr;\n    }\n    /**\n     * Create a new select query with the given SELECT expressions.\n     * @param expr The SELECT expressions.\n     */\n    select(...expr) {\n        return Query.select(...expr).with(...this._with);\n    }\n    /**\n     * Create a new select query with the given FROM expressions.\n     * @param expr The FROM expressions.\n     */\n    from(...expr) {\n        return Query.from(...expr).with(...this._with);\n    }\n    /**\n     * Create a new UNION set operation over the given queries.\n     * @param queries The queries.\n     */\n    union(...queries) {\n        return Query.union(...queries).with(...this._with);\n    }\n    /**\n     * Create a new UNION BY NAME set operation over the given queries.\n     * @param queries The queries.\n     */\n    unionByName(...queries) {\n        return Query.unionByName(...queries).with(...this._with);\n    }\n    /**\n     * Create a new UNION ALL set operation over the given queries.\n     * @param queries The queries.\n     */\n    unionAll(...queries) {\n        return Query.unionAll(...queries).with(...this._with);\n    }\n    /**\n     * Create a new UNION ALL BY NAME set operation over the given queries.\n     * @param queries The queries.\n     */\n    unionAllByName(...queries) {\n        return Query.unionAllByName(...queries).with(...this._with);\n    }\n    /**\n     * Create a new INTERSECT set operation over the given queries.\n     * @param queries The queries.\n     */\n    intersect(...queries) {\n        return Query.intersect(...queries).with(...this._with);\n    }\n    /**\n     * Create a new INTERSECT ALL set operation over the given queries.\n     * @param queries The queries.\n     */\n    intersectAll(...queries) {\n        return Query.intersectAll(...queries).with(...this._with);\n    }\n    /**\n     * Create a new EXCEPT set operation over the given queries.\n     * @param queries The queries.\n     */\n    except(...queries) {\n        return Query.except(...queries).with(...this._with);\n    }\n    /**\n     * Create a new EXCEPT ALL set operation over the given queries.\n     * @param queries The queries.\n     */\n    exceptAll(...queries) {\n        return Query.exceptAll(...queries).with(...this._with);\n    }\n}\n//# sourceMappingURL=query.js.map","import { FROM_CLAUSE } from '../constants.js';\nimport { quoteIdentifier } from '../util/string.js';\nimport { SQLNode } from './node.js';\nimport { isQuery } from './query.js';\nimport { isTableRef } from './table-ref.js';\nexport class FromClauseNode extends SQLNode {\n    /** The from expression. */\n    expr;\n    /** The output name. */\n    alias;\n    /** The table sample. */\n    sample;\n    /**\n     * Instantiate a from node.\n     * @param expr The from expression.\n     * @param alias The output name.\n     * @param sample The table sample.\n     */\n    constructor(expr, alias, sample) {\n        super(FROM_CLAUSE);\n        this.expr = expr;\n        this.alias = alias;\n        this.sample = sample;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { expr, alias, sample } = this;\n        const ref = isQuery(expr) ? `(${expr})` : `${expr}`;\n        const from = alias && !(isTableRef(expr) && expr.table.join('.') === alias)\n            ? `${ref} AS ${quoteIdentifier(alias)}`\n            : `${ref}`;\n        return `${from}${sample ? ` TABLESAMPLE ${sample}` : ''}`;\n    }\n}\n//# sourceMappingURL=from.js.map","import { IN_OPERATOR } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class InOpNode extends ExprNode {\n    /** The input expression. */\n    expr;\n    /** The value set. */\n    values;\n    /**\n     * Instantiate an in operator node.\n     * @param expr The input expression.\n     * @param values The value set.\n     */\n    constructor(expr, values) {\n        super(IN_OPERATOR);\n        this.expr = expr;\n        this.values = values;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return `(${this.expr} IN (${this.values.join(', ')}))`;\n    }\n}\n//# sourceMappingURL=in-op.js.map","import { INTERVAL } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class IntervalNode extends ExprNode {\n    /** The interval name. */\n    name;\n    /** The interval steps. */\n    steps;\n    /**\n     * Instantiate an interval node.\n     * @param name The interval name.\n     * @param steps The interval steps.\n     */\n    constructor(name, steps = 1) {\n        super(INTERVAL);\n        this.name = name;\n        this.steps = steps;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return `INTERVAL ${this.steps} ${this.name}`;\n    }\n}\n//# sourceMappingURL=interval.js.map","import { LIST } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class ListNode extends ExprNode {\n    /** The array of values. */\n    values;\n    /**\n     * Instantiate a list node.\n     * @param values\n     */\n    constructor(values) {\n        super(LIST);\n        this.values = values;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return `[${this.values.join(', ')}]`;\n    }\n}\n//# sourceMappingURL=list.js.map","import { LOGICAL_OPERATOR } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class LogicalOpNode extends ExprNode {\n    /** The logical operator */\n    op;\n    /** The clause expressions. */\n    clauses;\n    /**\n     * Instantiate a logical operator node.\n     * @param op The logical operation.\n     * @param clauses The input clause expressions.\n     */\n    constructor(op, clauses) {\n        super(LOGICAL_OPERATOR);\n        this.op = op;\n        this.clauses = clauses;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const c = this.clauses;\n        return c.length === 0 ? ''\n            : c.length === 1 ? `${c[0]}`\n                : `(${c.join(` ${this.op} `)})`;\n    }\n}\nexport class AndNode extends LogicalOpNode {\n    /**\n     * Instantiate a logical AND operator node.\n     * @param clauses The input clause expressions.\n     */\n    constructor(clauses) {\n        super('AND', clauses);\n    }\n}\nexport class OrNode extends LogicalOpNode {\n    /**\n     * Instantiate a logical OR operator node.\n     * @param clauses The input clause expressions.\n     */\n    constructor(clauses) {\n        super('OR', clauses);\n    }\n}\n//# sourceMappingURL=logical-op.js.map","import { ORDER_BY } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class OrderByNode extends ExprNode {\n    /** The expression to order by. */\n    expr;\n    /** Flag indicating descending order. */\n    desc;\n    /** Flag indicating if null values should be sorted first. */\n    nullsFirst;\n    /**\n     * Instantiate an order by entry node.\n     * @param expr The expression to order by.\n     * @param desc Flag indicating descending order.\n     * @param nullsFirst Flag indicating if null values should be sorted first.\n     */\n    constructor(expr, desc, nullsFirst) {\n        super(ORDER_BY);\n        this.expr = expr;\n        this.desc = desc;\n        this.nullsFirst = nullsFirst;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { expr, desc, nullsFirst } = this;\n        const dir = desc ? ' DESC'\n            : desc === false ? ' ASC'\n                : '';\n        const nf = nullsFirst ? ' NULLS FIRST'\n            : nullsFirst === false ? ' NULLS LAST'\n                : '';\n        return `${expr}${dir}${nf}`;\n    }\n}\n//# sourceMappingURL=order-by.js.map","import { UNARY_OPERATOR, UNARY_POSTFIX_OPERATOR } from '../constants.js';\nimport { ExprNode } from './node.js';\nclass AbstractUnaryOpNode extends ExprNode {\n    /** The operator type. */\n    op;\n    /** The input expression. */\n    expr;\n    /**\n     * Instantiate an abstract unary operator node.\n     * @param type The node type.\n     * @param op The operator type.\n     * @param expr The input expression.\n     */\n    constructor(type, op, expr) {\n        super(type);\n        this.op = op;\n        this.expr = expr;\n    }\n}\nexport class UnaryOpNode extends AbstractUnaryOpNode {\n    /**\n     * Instantiate a unary operator node.\n     * @param op The operator type.\n     * @param expr The input expression.\n     */\n    constructor(op, expr) {\n        super(UNARY_OPERATOR, op, expr);\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return `(${this.op} ${this.expr})`;\n    }\n}\nexport class UnaryPostfixOpNode extends AbstractUnaryOpNode {\n    /**\n     * Instantiate a unary operator node.\n     * @param op The operator type.\n     * @param expr The input expression.\n     */\n    constructor(op, expr) {\n        super(UNARY_POSTFIX_OPERATOR, op, expr);\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        return `(${this.expr} ${this.op})`;\n    }\n}\n//# sourceMappingURL=unary-op.js.map","import { UNNEST } from '../constants.js';\nimport { ExprNode } from './node.js';\nexport class UnnestNode extends ExprNode {\n    /** An expression that resolves to a list or a struct */\n    expr;\n    recursive;\n    maxDepth;\n    /**\n     * Instantiate an Unnest node.\n     * @param expr\n     * @param recursive\n     * @param maxDepth\n     */\n    constructor(expr, recursive = false, maxDepth = 0) {\n        super(UNNEST);\n        this.expr = expr;\n        this.recursive = recursive;\n        this.maxDepth = maxDepth;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const recursive = this.recursive ? ', recursive := true' : '';\n        const maxDepth = this.maxDepth > 0 ? `, max_depth := ${this.maxDepth}` : '';\n        return `UNNEST(${this.expr}${recursive}${maxDepth})`;\n    }\n}\n//# sourceMappingURL=unnest.js.map","import { WINDOW_EXTENT_EXPR, WINDOW_FRAME } from '../constants.js';\nimport { isParamLike } from '../util/type-check.js';\nimport { isNode, SQLNode } from './node.js';\nimport { ParamNode } from './param.js';\nexport const ROWS = 'ROWS';\nexport const RANGE = 'RANGE';\nexport const GROUPS = 'GROUPS';\nexport const PRECEDING = 'PRECEDING';\nexport const FOLLOWING = 'FOLLOWING';\nexport const CURRENT_ROW = 'CURRENT ROW';\nexport const UNBOUNDED = 'UNBOUNDED';\nexport class WindowFrameNode extends SQLNode {\n    /** The frame type, one of ROWS, RANGE, or GROUPS. */\n    frameType;\n    /** The window frame extent. */\n    extent;\n    /** The window frame exclusion criteria. */\n    exclude;\n    /**\n     * Instantiate a window frame definition node.\n     * @param frameType The frame type, one of ROWS, RANGE, or GROUPS.\n     * @param extent The window frame extent.\n     * @param exclude The window frame exclusion criteria.\n     */\n    constructor(frameType, extent, exclude) {\n        super(WINDOW_FRAME);\n        this.frameType = frameType;\n        this.extent = isParamLike(extent) ? new ParamNode(extent) : extent;\n        this.exclude = exclude;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { frameType, exclude, extent } = this;\n        const [prev, next] = isNode(extent)\n            ? extent.value\n            : extent;\n        const a = asFrameExpr(prev, PRECEDING);\n        const b = asFrameExpr(next, FOLLOWING);\n        return `${frameType} BETWEEN ${a} AND ${b}${exclude ? ` ${exclude}` : ''}`;\n    }\n}\nfunction asFrameExpr(value, scope) {\n    return value instanceof WindowFrameExprNode ? value\n        : value != null && typeof value !== 'number' ? `${value} ${scope}`\n            : value === 0 ? CURRENT_ROW\n                : !(value && Number.isFinite(value)) ? `${UNBOUNDED} ${scope}`\n                    : `${Math.abs(value)} ${scope}`;\n}\nexport class WindowFrameExprNode extends SQLNode {\n    /** The window frame extent. */\n    scope;\n    /**\n     * The window frame extent expression. This value should be null\n     * in the case of current row or unbounded extent values.\n     */\n    expr;\n    /**\n     * Instantiate a window frame definition node.\n     * @param scope The frame scope, one of PRECEDING, FOLLOWING, or CURRENT ROW.\n     * @param expr The window frame extent expression.\n     */\n    constructor(scope, expr = null) {\n        super(WINDOW_EXTENT_EXPR);\n        this.scope = scope;\n        this.expr = expr;\n    }\n    /**\n     * Generate a SQL query string for this node.\n     */\n    toString() {\n        const { scope, expr } = this;\n        return scope === CURRENT_ROW\n            ? scope\n            : `${expr ?? UNBOUNDED} ${scope}`;\n    }\n}\n//# sourceMappingURL=window-frame.js.map","import { aggFn } from '../util/function.js';\n/**\n * Compute an arg_max aggregate.\n * @param y The argument to return.\n * @param x The expression to maximize.\n * @returns A SQL aggregate function call.\n */\nexport function argmax(y, x) {\n    return aggFn('arg_max', y, x);\n}\n/**\n * Compute an arg_min aggregate.\n * @param y The argument to return.\n * @param x The expression to minimize.\n * @returns A SQL aggregate function call.\n */\nexport function argmin(y, x) {\n    return aggFn('arg_min', y, x);\n}\n/**\n * Compute an array aggregation.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function arrayAgg(expr) {\n    return aggFn('array_agg', expr);\n}\n/**\n * Compute an average aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function avg(expr) {\n    return aggFn('avg', expr);\n}\n/**\n * Compute a correlation aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function corr(x, y) {\n    return aggFn('corr', x, y);\n}\n/**\n * Compute a count aggregate.\n * @param [expr] An optional expression\n *  to count. If specified, only non-null expression values are counted.\n *  If omitted, all rows within a group are counted.\n * @returns A SQL aggregate function call.\n */\nexport function count(expr) {\n    return aggFn('count', expr);\n}\n/**\n * Compute a sample covariance aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function covariance(x, y) {\n    return aggFn('covar_samp', x, y);\n}\n/**\n * Compute a population covariance aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function covarPop(x, y) {\n    return aggFn('covar_pop', x, y);\n}\n/**\n * Compute an entropy aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function entropy(expr) {\n    return aggFn('entropy', expr);\n}\n/**\n * Compute a first aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function first(expr) {\n    return aggFn('first', expr);\n}\n/**\n * Compute a geomean aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function geomean(expr) {\n    return aggFn('geomean', expr);\n}\n/**\n * Compute a sample kurtosis aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function kurtosis(expr) {\n    return aggFn('kurtosis', expr);\n}\n/**\n * Compute a median absolute deviation (MAD) aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function mad(expr) {\n    return aggFn('mad', expr);\n}\n/**\n * Compute a maximum aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function max(expr) {\n    return aggFn('max', expr);\n}\n/**\n * Compute a median aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function median(expr) {\n    return aggFn('median', expr);\n}\n/**\n * Compute a minimum aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function min(expr) {\n    return aggFn('min', expr);\n}\n/**\n * Compute a mode aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function mode(expr) {\n    return aggFn('mode', expr);\n}\n/**\n * Compute a last aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function last(expr) {\n    return aggFn('last', expr);\n}\n/**\n * Compute a product aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function product(expr) {\n    return aggFn('product', expr);\n}\n/**\n * Compute a quantile aggregate.\n * @param expr The expression to aggregate.\n * @param p The quantile value.\n * @returns A SQL aggregate function call.\n */\nexport function quantile(expr, p) {\n    return aggFn('quantile', expr, p);\n}\n/**\n * Compute a linear regression reg_avgX aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function regrAvgX(x, y) {\n    return aggFn('regr_avgx', x, y);\n}\n/**\n * Compute a linear regression reg_avgY aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function regrAvgY(x, y) {\n    return aggFn('regr_avgy', x, y);\n}\n/**\n * Compute a linear regression count aggregate.\n * This returns the count of rows where both x and y are non-null.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function regrCount(x, y) {\n    return aggFn('regr_count', x, y);\n}\n/**\n * Compute a linear regression intercept aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function regrIntercept(x, y) {\n    return aggFn('regr_intercept', x, y);\n}\n/**\n * Compute a linear regression R^2 aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function regrR2(x, y) {\n    return aggFn('regr_r2', x, y);\n}\n/**\n * Compute a linear regression regr_sxx aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function regrSXX(x, y) {\n    return aggFn('regr_sxx', x, y);\n}\n/**\n * Compute a linear regression regr_sxy aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function regrSXY(x, y) {\n    return aggFn('regr_sxy', x, y);\n}\n/**\n * Compute a linear regression regr_syy aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function regrSYY(x, y) {\n    return aggFn('regr_syy', x, y);\n}\n/**\n * Compute a linear regression slope aggregate.\n * @param x The x expression to aggregate.\n * @param y The y expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function regrSlope(x, y) {\n    return aggFn('regr_slope', x, y);\n}\n/**\n * Compute a skewness aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function skewness(expr) {\n    return aggFn('skewness', expr);\n}\n/**\n * Compute a sample standard deviation aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function stddev(expr) {\n    return aggFn('stddev', expr);\n}\n/**\n * Compute a population standard deviation aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function stddevPop(expr) {\n    return aggFn('stddev_pop', expr);\n}\n/**\n * Compute a string aggregation.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function stringAgg(expr) {\n    return aggFn('string_agg', expr);\n}\n/**\n * Compute a sum aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function sum(expr) {\n    return aggFn('sum', expr);\n}\n/**\n * Compute a sample variance aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function variance(expr) {\n    return aggFn('var_samp', expr);\n}\n/**\n * Compute a population variance aggregate.\n * @param expr The expression to aggregate.\n * @returns A SQL aggregate function call.\n */\nexport function varPop(expr) {\n    return aggFn('var_pop', expr);\n}\n//# sourceMappingURL=aggregate.js.map","import { CaseNode, WhenNode } from '../ast/case.js';\nimport { asNode } from '../util/ast.js';\n/**\n * Create a new conditional CASE statement. If three arguments are provided,\n * acts like a ternary conditional (if, then, else). If no arguments are\n * provided, the chained `when` and `else` methods can be used to to complete\n * a conditional statement with WHEN/THEN and ELSE expressions.\n * @param when A conditional WHEN expression.\n * @param then A THEN value expression.\n * @param other An ELSE expression.\n */\nexport function cond(when, then, other) {\n    return when\n        ? new CaseNode(undefined, [new WhenNode(asNode(when), asNode(then))], asNode(other))\n        : new CaseNode();\n}\n//# sourceMappingURL=case.js.map","import { CastNode } from '../ast/cast.js';\nimport { asNode } from '../util/ast.js';\n/**\n * Perform a type cast.\n * @param expr The expression to type cast.\n * @param type The type to cast to.\n */\nexport function cast(expr, type) {\n    return new CastNode(asNode(expr), type);\n}\n/**\n * Cast an expression to a 32-bit integer type.\n * @param expr The expression to type cast.\n */\nexport function int32(expr) {\n    return cast(expr, 'INTEGER');\n}\n/**\n * Cast an expression to a 32-bit floating point number type.\n * @param expr The expression to type cast.\n */\nexport function float32(expr) {\n    return cast(expr, 'FLOAT');\n}\n/**\n * Cast an expression to a 64-bit floating point number type.\n * @param expr The expression to type cast.\n */\nexport function float64(expr) {\n    return cast(expr, 'DOUBLE');\n}\n//# sourceMappingURL=cast.js.map","import { WithClauseNode } from '../ast/with.js';\n/**\n * Create a common table expression (CTE) to include within a WITH clause.\n * @param name The common table expression (CTE) name.\n * @param query The common table expression (CTE) query.\n * @param materialized The common table expression (CTE)\n *  materialization flag. If `true`, forces materialization of the CTE.\n *  If `false`, materialization is not performed. Otherwise (for example, if\n *  `undefined` or `null`), materialization is decided by the database.\n */\nexport function cte(name, query, materialized = null) {\n    return new WithClauseNode(name, query, materialized);\n}\n//# sourceMappingURL=cte.js.map","import { IntervalNode } from '../ast/interval.js';\n/**\n * Create a new interval.\n * @param unit The interval unit, such as day or year.\n * @param steps The number of interval unit steps.\n */\nexport function interval(unit, steps) {\n    return new IntervalNode(unit, steps);\n}\n/**\n * Create a new years interval.\n * @param steps The number of years.\n */\nexport function years(steps) {\n    return interval('YEARS', steps);\n}\n/**\n * Create a new months interval.\n * @param steps The number of months.\n */\nexport function months(steps) {\n    return interval('MONTHS', steps);\n}\n/**\n * Create a new days interval.\n * @param steps The number of days.\n */\nexport function days(steps) {\n    return interval('DAYS', steps);\n}\n/**\n * Create a new hours interval.\n * @param steps The number of hours.\n */\nexport function hours(steps) {\n    return interval('HOURS', steps);\n}\n/**\n * Create a new minutes interval.\n * @param steps The number of minutes.\n */\nexport function minutes(steps) {\n    return interval('MINUTES', steps);\n}\n/**\n * Create a new seconds interval.\n * @param steps The number of seconds.\n */\nexport function seconds(steps) {\n    return interval('SECONDS', steps);\n}\n/**\n * Create a new milliseconds interval.\n * @param steps The number of milliseconds.\n */\nexport function milliseconds(steps) {\n    return interval('MILLISECONDS', steps);\n}\n/**\n * Create a new microseconds interval.\n * @param steps The number of microseconds.\n */\nexport function microseconds(steps) {\n    return interval('MICROSECONDS', steps);\n}\n//# sourceMappingURL=interval.js.map","import { asNode } from '../util/ast.js';\nimport { fn } from '../util/function.js';\nimport { interval } from './interval.js';\n/**\n * Given a date/time value, return the milliseconds since the UNIX epoch.\n * @param {ExprValue} expr The date/time expression.\n */\nexport function epoch_ms(expr) {\n    return fn('epoch_ms', expr);\n}\n/**\n * Perform data binning according to the provided interval unit and steps.\n * @param expr The date/time expression to bin.\n * @param unit The datetime interval unit to bin by.\n * @param steps The number of interval steps.\n */\nexport function dateBin(expr, unit, steps = 1) {\n    return fn('time_bucket', interval(unit, steps), expr);\n}\n/**\n * Map date/times to a month value, all within the same year for comparison.\n * The resulting value is still date-typed.\n * @param expr The date/time expression.\n */\nexport function dateMonth(expr) {\n    return fn('make_date', 2012, fn('month', expr), 1);\n}\n/**\n * Map date/times to a month and day value, all within the same year for\n * comparison. The resulting value is still date-typed.\n * @param expr The date/time expression.\n */\nexport function dateMonthDay(expr) {\n    const d = asNode(expr);\n    return fn('make_date', 2012, fn('month', d), fn('day', d));\n}\n/**\n * Map date/times to a day of the month value, all within the same year and month\n * for comparison. The resulting value is still date-typed.\n * @param expr The date/time expression.\n */\nexport function dateDay(expr) {\n    return fn('make_date', 2012, 1, fn('day', expr));\n}\n//# sourceMappingURL=datetime.js.map","import { asLiteral, asNode } from \"../util/ast.js\";\nimport { argsList, fn } from \"../util/function.js\";\nimport { ListNode } from \"../ast/list.js\";\n/**\n * Create a List containing the argument values.\n * @param values\n */\nexport function list(values) {\n    return new ListNode(argsList(values).map(asLiteral));\n}\n/**\n * Convert a single value or an array of values to either a ListNode if the input\n * is an array, or a single ExprNode if it is a single value. A single string will\n * be interpreted as a column reference.\n * @param values\n */\nfunction asList(values) {\n    return Array.isArray(values) ? list(values) : asNode(values);\n}\n/**\n * Function that returns true if the list contains the element,\n * false otherwise. If the first argument is a string, it is\n * interpreted as a column reference, otherwise it is coerced\n * to a list.\n * @param list1\n * @param element\n */\nexport function listContains(list1, element) {\n    return fn(\"list_contains\", asList(list1), asLiteral(element));\n}\n/**\n * Function that returns true if all elements of list2 exist in list1,\n * false otherwise.\n * @param list1\n * @param list2\n */\nexport function listHasAll(list1, list2) {\n    return fn(\"list_has_all\", asList(list1), asList(list2));\n}\n/**\n * Function that returns true if any elements exist in both lists,\n * false otherwise.\n * @param list1\n * @param list2\n */\nexport function listHasAny(list1, list2) {\n    return fn(\"list_has_any\", asList(list1), asList(list2));\n}\n//# sourceMappingURL=list.js.map","import { fn } from '../util/function.js';\n/**\n * Return true if the floating point value is not a number, false otherwise.\n * @param expr The input number.\n */\nexport function isNaN(expr) {\n    return fn('isnan', expr);\n}\n/**\n * Return true if the floating point value is finite, false otherwise.\n * @param expr The input number.\n */\nexport function isFinite(expr) {\n    return fn('isfinite', expr);\n}\n/**\n * Return true if the floating point value is infinite, false otherwise.\n * @param expr The input number.\n */\nexport function isInfinite(expr) {\n    return fn('isinf', expr);\n}\n/**\n * Selects the largest value.\n * @param expr The input expressions.\n */\nexport function greatest(...expr) {\n    return fn('greatest', ...expr);\n}\n/**\n * Selects the smallest value.\n * @param expr The input expressions.\n */\nexport function least(...expr) {\n    return fn('least', ...expr);\n}\n/**\n * Compute the exponentional function `e ** expr`.\n * @param expr The input number.\n */\nexport function exp(expr) {\n    return fn('exp', expr);\n}\n/**\n * Compute a base 10 logarithm.\n * @param expr The input number.\n */\nexport function log(expr) {\n    return fn('log', expr);\n}\n/**\n * Compute a natural logarithm.\n * @param expr The input number.\n */\nexport function ln(expr) {\n    return fn('ln', expr);\n}\n/**\n * Compute the sign of a number.\n * @param expr The input number.\n */\nexport function sign(expr) {\n    return fn('sign', expr);\n}\n/**\n * Compute the absolute value of a number.\n * @param expr The input number.\n */\nexport function abs(expr) {\n    return fn('abs', expr);\n}\n/**\n * Compute the square root of a number.\n * @param expr The input number.\n */\nexport function sqrt(expr) {\n    return fn('sqrt', expr);\n}\n/**\n * Rounds the number up.\n * @param expr The input number.\n */\nexport function ceil(expr) {\n    return fn('ceil', expr);\n}\n/**\n * Rounds the number down.\n * @param expr The input number.\n */\nexport function floor(expr) {\n    return fn('floor', expr);\n}\n/**\n * Round to the given decimal places.\n * @param expr The input number.\n * @param places The decimal places.\n *  Negative values are allowed, to round to tens, hundreds, etc.\n *  If unspecified, defaults to zero.\n */\nexport function round(expr, places) {\n    return fn('round', expr, places);\n}\n/**\n * Truncates the number.\n * @param expr The input number.\n */\nexport function trunc(expr) {\n    return fn('trunc', expr);\n}\n//# sourceMappingURL=numeric.js.map","import { BetweenOpNode, NotBetweenOpNode } from '../ast/between-op.js';\nimport { BinaryOpNode } from '../ast/binary-op.js';\nimport { InOpNode } from '../ast/in-op.js';\nimport { AndNode, OrNode } from '../ast/logical-op.js';\nimport { UnaryOpNode, UnaryPostfixOpNode } from '../ast/unary-op.js';\nimport { asNode } from '../util/ast.js';\nimport { nodeList } from '../util/function.js';\nfunction unaryOp(op, expr) {\n    return new UnaryOpNode(op, asNode(expr));\n}\nfunction unaryPostfixOp(op, expr) {\n    return new UnaryPostfixOpNode(op, asNode(expr));\n}\nfunction binaryOp(op, left, right) {\n    return new BinaryOpNode(op, asNode(left), asNode(right));\n}\n/**\n * Logical and (AND) operator.\n * @param clauses The input expressions.\n */\nexport function and(...clauses) {\n    return new AndNode(nodeList(clauses));\n}\n/**\n * Logical or (OR) operator.\n * @param clauses The input expressions.\n */\nexport function or(...clauses) {\n    return new OrNode(nodeList(clauses));\n}\n/**\n * Logical not (NOT) operator.\n * @param expr The expression to negate.\n */\nexport function not(expr) {\n    return unaryOp('NOT', expr);\n}\n/**\n * Null check (IS NULL) operator.\n * @param expr The expression to test.\n */\nexport function isNull(expr) {\n    return unaryPostfixOp('IS NULL', expr);\n}\n/**\n * Non-null check (IS NOT NULL) operator.\n * @param expr The expression to test.\n */\nexport function isNotNull(expr) {\n    return unaryPostfixOp('IS NOT NULL', expr);\n}\n/**\n * Bitwise not (~) operator.\n * @param expr The input expression.\n */\nexport function bitNot(expr) {\n    return unaryOp('~', expr);\n}\n/**\n * Bitwise and (&) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function bitAnd(left, right) {\n    return binaryOp('&', left, right);\n}\n/**\n * Bitwise or (|) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function bitOr(left, right) {\n    return binaryOp('|', left, right);\n}\n/**\n * Bit shift left (<<) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function bitLeft(left, right) {\n    return binaryOp('<<', left, right);\n}\n/**\n * Bit shift right (>>) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function bitRight(left, right) {\n    return binaryOp('>>', left, right);\n}\n/**\n * Addition (+) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function add(left, right) {\n    return binaryOp('+', left, right);\n}\n/**\n * Subtraction (-) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function sub(left, right) {\n    return binaryOp('-', left, right);\n}\n/**\n * Multiplication (*) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function mul(left, right) {\n    return binaryOp('*', left, right);\n}\n/**\n * Division (/) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function div(left, right) {\n    return binaryOp('/', left, right);\n}\n/**\n * Integer division (//) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function idiv(left, right) {\n    return binaryOp('//', left, right);\n}\n/**\n * Modulo (%) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function mod(left, right) {\n    return binaryOp('%', left, right);\n}\n/**\n * Exponentiation (**) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function pow(left, right) {\n    return binaryOp('**', left, right);\n}\n/**\n * Equality comparision (=) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function eq(left, right) {\n    return binaryOp('=', left, right);\n}\n/**\n * Non-equality comparision (<>) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function neq(left, right) {\n    return binaryOp('<>', left, right);\n}\n/**\n * Less-than comparision (<) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function lt(left, right) {\n    return binaryOp('<', left, right);\n}\n/**\n * Greater-than comparision (>) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function gt(left, right) {\n    return binaryOp('>', left, right);\n}\n/**\n * Less-than or equal comparision (<=) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function lte(left, right) {\n    return binaryOp('<=', left, right);\n}\n/**\n * Greater-than or equal comparision (>=) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function gte(left, right) {\n    return binaryOp('>=', left, right);\n}\n/**\n * Null-inclusive non-equality (IS DISTINCT FROM) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function isDistinct(left, right) {\n    return binaryOp('IS DISTINCT FROM', left, right);\n}\n/**\n * Null-inclusive equality (IS NOT DISTINCT FROM) operator.\n * @param left The left argument.\n * @param right The right argument.\n */\nexport function isNotDistinct(left, right) {\n    return binaryOp('IS NOT DISTINCT FROM', left, right);\n}\n/**\n * Range inclusion (BETWEEN) operator.\n * @param expr The expression to test.\n * @param extent The range extent.\n */\nexport function isBetween(expr, extent) {\n    return new BetweenOpNode(asNode(expr), extent?.map(asNode));\n}\n/**\n * Range exclusion (NOT BETWEEN) operator.\n * @param expr The expression to test.\n * @param extent The range extent.\n */\nexport function isNotBetween(expr, extent) {\n    return new NotBetweenOpNode(asNode(expr), extent?.map(asNode));\n}\n/**\n * Set inclusion (IN) operator.\n * @param expr The expression to test.\n * @param values The included values.\n */\nexport function isIn(expr, values) {\n    return new InOpNode(asNode(expr), values.map(asNode));\n}\n//# sourceMappingURL=operators.js.map","import { OrderByNode } from '../ast/order-by.js';\nimport { asNode } from '../util/ast.js';\n/**\n * Indicate ascending sort order for an expression.\n * @param expr An expression to order by.\n * @param nullsFirst Flag indicating if null values should be sorted first.\n */\nexport function asc(expr, nullsFirst) {\n    return new OrderByNode(asNode(expr), false, nullsFirst);\n}\n/**\n * Indicate descending sort order for an expression.\n * @param expr An expression to order by.\n * @param nullsFirst Flag indicating if null values should be sorted first.\n */\nexport function desc(expr, nullsFirst) {\n    return new OrderByNode(asNode(expr), true, nullsFirst);\n}\n//# sourceMappingURL=order-by.js.map","import { fn } from '../util/function.js';\n/**\n * Function that converts geometry data to GeoJSON format.\n * @param expr The input expression.\n */\nexport function geojson(expr) {\n    return fn('st_asgeojson', expr);\n}\n/**\n * Function that returns a spatial x position (using ST_X).\n * @param expr The input expression.\n */\nexport function x(expr) {\n    return fn('st_x', expr);\n}\n/**\n * Function that returns a spatial y position (using ST_Y).\n * @param expr The input expression.\n */\nexport function y(expr) {\n    return fn('st_y', expr);\n}\n/**\n * Function that returns the centroid point for geometry data.\n * @param expr The input expression.\n */\nexport function centroid(expr) {\n    return fn('st_centroid', expr);\n}\n/**\n * Function that returns the centroid x-coordinate for geometry data.\n * @param expr The input expression.\n */\nexport function centroidX(expr) {\n    return x(centroid(expr));\n}\n/**\n * Function that returns yhe centroid y-coordinate for geometry data.\n * @param expr The input expression.\n */\nexport function centroidY(expr) {\n    return y(centroid(expr));\n}\n//# sourceMappingURL=spatial.js.map","import { FragmentNode } from '../ast/fragment.js';\nimport { isNode } from '../ast/node.js';\nimport { ParamNode } from '../ast/param.js';\nimport { VerbatimNode } from '../ast/verbatim.js';\nimport { isParamLike, isString } from '../util/type-check.js';\nimport { literal } from './literal.js';\n/**\n * Template tag function for SQL fragments. Interpolated values\n * may be strings, other SQL expression objects (such as column\n * references), primitive values, or dynamic parameters.\n * @param strings Template string constants.\n * @param exprs Template expression values.\n */\nexport function sql(strings, ...exprs) {\n    return new FragmentNode(parseSQL(strings, exprs));\n}\nfunction parseSQL(strings, exprs) {\n    const spans = [strings[0]];\n    const n = exprs.length;\n    for (let i = 0, k = 0; i < n;) {\n        const e = exprs[i];\n        if (isNode(e)) {\n            spans[++k] = e;\n        }\n        else if (isParamLike(e)) {\n            spans[++k] = new ParamNode(e);\n        }\n        else {\n            spans[k] += isString(e) ? e : `${literal(e)}`;\n        }\n        const s = strings[++i];\n        if (isNode(spans[k])) {\n            spans[++k] = s;\n        }\n        else {\n            spans[k] += s;\n        }\n    }\n    // remove empty strings and preserve verbatim content\n    return spans\n        .filter(s => s)\n        .map(s => isString(s) ? new VerbatimNode(s) : s);\n}\n//# sourceMappingURL=sql-template-tag.js.map","import { asLiteral } from '../util/ast.js';\nimport { argsList, fn } from '../util/function.js';\nfunction strFn(name, expr, ...args) {\n    return fn(name, expr, ...(argsList(args).map(asLiteral)));\n}\n/**\n * Function that returns true if a string contains a regexp pattern,\n * false otherwise.\n * @param string The string match against.\n * @param pattern The regular expression pattern to match.\n * @param options Regular expression options:\n *  'c': case-sensitive matching\n *  'i': case-insensitive matching\n *  'l': match literals instead of regular expression tokens\n *  'm', 'n', 'p': newline sensitive matching\n *  'g': global replace, only available for regexp_replace\n *  's': non-newline sensitive matching\n */\nexport function regexp_matches(string, pattern, options) {\n    return strFn('regexp_matches', string, pattern, options);\n}\n/**\n * Function that returns true if search_string is found within string.\n * @param string The string to match against.\n * @param search_string The substring to search for.\n */\nexport function contains(string, search_string) {\n    return strFn('contains', string, search_string);\n}\n/**\n * Function that returns true if string begins with search_string.\n * @param string The string to match against.\n * @param search_string The substring to search for.\n */\nexport function prefix(string, search_string) {\n    return strFn('starts_with', string, search_string);\n}\n/**\n * Function that returns true if string ends with search_string.\n * @param string The string to match against.\n * @param search_string The substring to search for.\n */\nexport function suffix(string, search_string) {\n    return strFn('ends_with', string, search_string);\n}\n/**\n * Function that converts string to lower case.\n * @param string The string to convert.\n */\nexport function lower(string) {\n    return strFn('lower', string);\n}\n/**\n * Function that converts string to upper case.\n * @param string The string to convert.\n */\nexport function upper(string) {\n    return strFn('upper', string);\n}\n/**\n * Function that returns the number of characters in string.\n * @param value The string to measure.\n */\nexport function length(value) {\n    return strFn('length', value);\n}\n//# sourceMappingURL=string.js.map","import { asNode } from \"../util/ast.js\";\nimport { UnnestNode } from \"../ast/unnest.js\";\n/**\n * Create an Unnest Node to flatten nested structures, either structs or lists.\n * @param value\n * @param recursive\n * @param maxDepth\n */\nexport function unnest(value, recursive = false, maxDepth = 0) {\n    return new UnnestNode(asNode(value), recursive, maxDepth);\n}\n//# sourceMappingURL=unnest.js.map","import { fn } from '../util/function.js';\n/**\n * Returns the first non-null argument.\n * @param expr The input expressions.\n */\nexport function coalesce(...expr) {\n    return fn('coalesce', ...expr);\n}\n//# sourceMappingURL=util.js.map","import { winFn } from '../util/function.js';\n/**\n * Create a window function that returns the number of the current row\n * within the partition, counting from 1.\n */\nexport function row_number() {\n    return winFn('row_number');\n}\n/**\n * Create a window function that returns the rank of the current row with gaps.\n * This is the same as the row_number of its first peer.\n */\nexport function rank() {\n    return winFn('rank');\n}\n/**\n * Create a window function that returns the rank of the current row without\n * gaps. The function counts peer groups.\n */\nexport function dense_rank() {\n    return winFn('dense_rank');\n}\n/**\n * Create a window function that returns the relative rank of the current row.\n * Computed as (rank() - 1) / (total partition rows - 1).\n */\nexport function percent_rank() {\n    return winFn('percent_rank');\n}\n/**\n * Create a window function that returns the cumulative distribution. Computed\n * as (number of preceding or peer partition rows) / total partition rows.\n */\nexport function cume_dist() {\n    return winFn('cume_dist');\n}\n/**\n * Create a window function that returns an integer ranging from 1 to the\n * argument value, dividing the partition as equally as possible.\n * @param num_buckets The number of quantile buckets.\n */\nexport function ntile(num_buckets) {\n    return winFn('ntile', num_buckets);\n}\n/**\n * Create a window function that returns the expression evaluated at the row\n * that is offset rows before the current row within the partition.\n * If there is no such row, instead return default (which must be of the same\n * type as the expression). Both offset and default are evaluated with respect\n * to the current row. If omitted, offset defaults to 1 and default to null.\n * @param expr The expression to evaluate.\n * @param offset The row offset (default `1`).\n * @param defaultValue The default value (default `null`).\n */\nexport function lag(expr, offset, defaultValue) {\n    return winFn('lag', expr, offset, defaultValue);\n}\n/**\n * Create a window function that returns the expression evaluated at the row\n * that is offset rows after the current row within the partition.\n * If there is no such row, instead return default (which must be of the same\n * type as the expression). Both offset and default are evaluated with respect\n * to the current row. If omitted, offset defaults to 1 and default to null.\n * @param expr The expression to evaluate.\n * @param offset The row offset (default `1`).\n * @param defaultValue The default value (default `null`).\n */\nexport function lead(expr, offset, defaultValue) {\n    return winFn('lead', expr, offset, defaultValue);\n}\n/**\n * Create a window function that returns the expression evaluated at the row\n * that is the first row of the window frame.\n * @param expr The expression to evaluate.\n */\nexport function first_value(expr) {\n    return winFn('first_value', expr);\n}\n/**\n * Create a window function that returns the expression evaluated at the row\n * that is the last row of the window frame.\n * @param expr The expression to evaluate.\n */\nexport function last_value(expr) {\n    return winFn('last_value', expr);\n}\n/**\n * Create a window function that returns the expression evaluated at the\n * nth row of the window frame (counting from 1), or null if no such row.\n * @param expr The expression to evaluate.\n * @param nth The 1-based window frame index.\n */\nexport function nth_value(expr, nth) {\n    return winFn('nth_value', expr, nth);\n}\n//# sourceMappingURL=window.js.map","import { CURRENT_ROW, FOLLOWING, GROUPS, PRECEDING, RANGE, ROWS, WindowFrameExprNode, WindowFrameNode } from '../ast/window-frame.js';\n/**\n * Return an updated window definition with the given rows frame.\n * @param extent The row-based window frame extent.\n * @param exclude The window frame exclusion criteria.\n * @returns A window frame node.\n */\nexport function frameRows(extent, exclude) {\n    return new WindowFrameNode(ROWS, extent, exclude);\n}\n/**\n * Return an updated window definition with the given range frame.\n * @param extent The range-based window frame extent.\n * @param exclude The window frame exclusion criteria.\n * @returns A window frame node.\n */\nexport function frameRange(extent, exclude) {\n    return new WindowFrameNode(RANGE, extent, exclude);\n}\n/**\n * Return an updated window definition with the given groups frame.\n * @param extent The group-based window frame extent.\n * @param exclude The window frame exclusion criteria.\n * @returns A window frame node.\n */\nexport function frameGroups(extent, exclude) {\n    return new WindowFrameNode(GROUPS, extent, exclude);\n}\n/**\n * A `PRECEDING` frame value expression.\n * @param value The frame value.\n * @returns A preceding value.\n */\nexport function preceding(value) {\n    return new WindowFrameExprNode(PRECEDING, value);\n}\n/**\n * A `FOLLOWING` frame value expression.\n * @param value  The frame value.\n * @returns A following value.\n */\nexport function following(value) {\n    return new WindowFrameExprNode(FOLLOWING, value);\n}\n/**\n * A `CURRENT ROW` frame value expression.\n * @returns A current row value.\n */\nexport function currentRow() {\n    return new WindowFrameExprNode(CURRENT_ROW);\n}\n//# sourceMappingURL=window-frame.js.map","import { AGGREGATE, BETWEEN_OPERATOR, BINARY_OPERATOR, CASE, CAST, COLLATE, COLUMN_PARAM, COLUMN_REF, DESCRIBE_QUERY, EXPRESSION, FRAGMENT, FROM_CLAUSE, FUNCTION, IN_OPERATOR, LOGICAL_OPERATOR, NOT_BETWEEN_OPERATOR, ORDER_BY, PARAM, SCALAR_SUBQUERY, SELECT_CLAUSE, SELECT_QUERY, SET_OPERATION, UNARY_OPERATOR, UNARY_POSTFIX_OPERATOR, UNNEST, WHEN, WINDOW, WINDOW_CLAUSE, WINDOW_DEF, WINDOW_EXTENT_EXPR, WINDOW_FRAME, WINDOW_FUNCTION, WITH_CLAUSE } from '../constants.js';\nexport const recurse = {\n    [AGGREGATE]: ['args', 'order', 'filter'],\n    [BETWEEN_OPERATOR]: ['expr', 'extent'],\n    [BINARY_OPERATOR]: ['left', 'right'],\n    [CASE]: ['expr', '_when', '_else'],\n    [CAST]: ['expr'],\n    [COLLATE]: ['expr'],\n    [COLUMN_PARAM]: ['param', 'table'],\n    [COLUMN_REF]: ['table'],\n    [DESCRIBE_QUERY]: ['query'],\n    [EXPRESSION]: ['node'],\n    [FRAGMENT]: ['spans'],\n    [FROM_CLAUSE]: ['expr'],\n    [FUNCTION]: ['args'],\n    [IN_OPERATOR]: ['expr', 'values'],\n    [LOGICAL_OPERATOR]: ['clauses'],\n    [NOT_BETWEEN_OPERATOR]: ['expr', 'extent'],\n    [ORDER_BY]: ['expr'],\n    [PARAM]: ['value'],\n    [SCALAR_SUBQUERY]: ['subquery'],\n    [SELECT_CLAUSE]: ['expr'],\n    [SELECT_QUERY]: ['_with', '_select', '_from', '_where', '_sample', '_groupby', '_having', '_window', '_qualify', '_orderby'],\n    [SET_OPERATION]: ['queries', '_orderby'],\n    [UNARY_OPERATOR]: ['expr'],\n    [UNARY_POSTFIX_OPERATOR]: ['expr'],\n    [UNNEST]: ['expr'],\n    [WHEN]: ['when', 'then'],\n    [WINDOW]: ['func', 'def'],\n    [WINDOW_CLAUSE]: ['def'],\n    [WINDOW_DEF]: ['partition', 'order', 'framedef'],\n    [WINDOW_EXTENT_EXPR]: ['expr'],\n    [WINDOW_FRAME]: ['extent'],\n    [WINDOW_FUNCTION]: ['args'],\n    [WITH_CLAUSE]: ['query']\n};\n//# sourceMappingURL=recurse.js.map","import { isNode } from '../ast/node.js';\nimport { recurse } from './recurse.js';\n/**\n * Rewrite a SQL expression, based on a map of nodes to replace.\n * This method copies nodes as needed; it does not modify the input node.\n * @param node The root AST node of the expression.\n * @param map The rewrite map. When encountered, key nodes are replaced by value nodes.\n */\nexport function rewrite(node, map) {\n    if (map.has(node)) {\n        return map.get(node);\n    }\n    else if (isNode(node)) {\n        const props = recurse[node.type];\n        const n = props?.length ?? 0;\n        if (n > 0) {\n            node = node.clone();\n            for (let i = 0; i < n; ++i) {\n                const prop = props[i];\n                // @ts-expect-error lookup valid property\n                const child = node[prop];\n                if (Array.isArray(child)) {\n                    // @ts-expect-error rewrite known property\n                    const a = (node[prop] = child.slice());\n                    const m = child.length;\n                    for (let j = 0; j < m; ++j) {\n                        a[j] = rewrite(child[j], map);\n                    }\n                }\n                else if (child) {\n                    // @ts-expect-error rewrite known property\n                    node[prop] = rewrite(child, map);\n                }\n            }\n        }\n    }\n    return node;\n}\n//# sourceMappingURL=rewrite.js.map","import { isNode } from '../ast/node.js';\nimport { recurse } from './recurse.js';\n/**\n * Perform a traversal of a SQL expression AST.\n * @param node Root node for AST traversal.\n * @param visit Visitor callback function.\n */\nexport function walk(node, visit) {\n    if (!isNode(node))\n        return;\n    const result = visit(node);\n    if (result)\n        return result;\n    const props = recurse[node.type];\n    const n = props?.length ?? 0;\n    for (let i = 0; i < n; ++i) {\n        // @ts-expect-error lookup of valid property\n        const value = node[props[i]];\n        if (Array.isArray(value)) {\n            const m = value.length;\n            for (let j = 0; j < m; ++j) {\n                if (value[j] && Number(walk(value[j], visit)) < 0) {\n                    return result;\n                }\n            }\n        }\n        else if (value && Number(walk(value, visit)) < 0) {\n            return -1;\n        }\n    }\n}\n//# sourceMappingURL=walk.js.map","import { aggregateNames } from '../ast/aggregate.js';\nimport { AGGREGATE, COLUMN_PARAM, COLUMN_REF, FRAGMENT, PARAM, VERBATIM, WINDOW } from '../constants.js';\nimport { walk } from './walk.js';\n// regexp to match valid aggregate function names\nconst aggrRegExp = new RegExp(`^(${aggregateNames.join('|')})$`);\n// regexp to tokenize sql text in order to find function calls\n// includes checks to avoid analyzing text within quoted strings\n// function call tokens will have a pattern like \"name(\".\nconst funcRegExp = /(\\\\'|\\\\\"|\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'|\\w+\\()/g;\nfunction hasVerbatimAggregate(s) {\n    return s\n        .split(funcRegExp)\n        .some(tok => tok.endsWith('(') && aggrRegExp.test(tok.slice(0, -1)));\n}\n/**\n * Indicate if the input AST contains an aggregate expression.\n * The string content of verbatim nodes is analyzed to try to identify\n * unparsed aggregate functions calls within SQL strings.\n * @param root The root of the AST to search.\n * @returns Return 0 if no aggregate functions are found.\n *  Sets bit 1 if an AggregateFunction instance is found.\n *  Sets bit 2 if an aggregate embedded in verbatim text is found.\n */\nexport function isAggregateExpression(root) {\n    let agg = 0;\n    walk(root, (node) => {\n        switch (node.type) {\n            case WINDOW:\n                return -1; // aggs can't include windows\n            case AGGREGATE:\n                agg |= 1;\n                return -1;\n            case FRAGMENT:\n            case VERBATIM: {\n                let s = `${node}`.toLowerCase();\n                // strip away scalar subquery content\n                const sub = s.indexOf('(select ');\n                if (sub >= 0)\n                    s = s.slice(0, sub);\n                // exit if expression includes windowing\n                if (s.includes(') over '))\n                    return -1;\n                if (hasVerbatimAggregate(s)) {\n                    agg |= 2;\n                    return -1;\n                }\n                return 1; // don't recurse\n            }\n        }\n    });\n    return agg;\n}\n/**\n * Collect all aggregate function nodes.\n * @param root The root of the AST to search.\n */\nexport function collectAggregates(root) {\n    const aggs = new Set();\n    walk(root, (node) => {\n        if (node.type === AGGREGATE) {\n            aggs.add(node);\n        }\n    });\n    return Array.from(aggs);\n}\n/**\n * Collect all unique column references.\n * Multiple references to the same column are de-duplicated, even if\n * they are not object-equal node instances.\n * @param root The root of the AST to search.\n */\nexport function collectColumns(root) {\n    const cols = {};\n    walk(root, (node) => {\n        if (node.type === COLUMN_REF || node.type === COLUMN_PARAM) {\n            // key on string-coerced node\n            cols[`${node}`] = node;\n        }\n    });\n    return Object.values(cols);\n}\n/**\n * Collect all unique dynamic parameter instances.\n * @param root The root of the AST to search.\n */\nexport function collectParams(root) {\n    const params = new Set;\n    walk(root, (node) => {\n        if (node.type === PARAM) {\n            params.add(node.param);\n        }\n    });\n    return Array.from(params);\n}\n//# sourceMappingURL=visitors.js.map","export function createTable(name, query, { replace = false, temp = false, view = false } = {}) {\n    return 'CREATE'\n        + (replace ? ' OR REPLACE ' : ' ')\n        + (temp ? 'TEMP ' : '')\n        + (view ? 'VIEW' : 'TABLE')\n        + (replace ? ' ' : ' IF NOT EXISTS ')\n        + name + ' AS ' + query;\n}\nexport function createSchema(name, { strict = false } = {}) {\n    return 'CREATE SCHEMA '\n        + (strict ? '' : 'IF NOT EXISTS ')\n        + name;\n}\n//# sourceMappingURL=create.js.map","export function loadExtension(name) {\n    return `INSTALL ${name}; LOAD ${name}`;\n}\n//# sourceMappingURL=extension.js.map","import { asLiteral } from '../util/ast.js';\n/**\n * Create a SQL query that embeds the given data for loading.\n * @param data The dataset as an array of objects.\n * @param options Loading options.\n * @param {string[]|object} [options.columns] The columns to include.\n *   If not specified, the keys of the first data object are used.\n * @returns {string} SQL query string to load data.\n */\nexport function sqlFrom(data, { columns = Object.keys(data?.[0] || {}) } = {}) {\n    let keys = [];\n    if (Array.isArray(columns)) {\n        keys = columns;\n        columns = keys.reduce((m, k) => (m[k] = k, m), {});\n    }\n    else if (columns) {\n        keys = Object.keys(columns);\n    }\n    if (!keys.length) {\n        throw new Error('Can not create table from empty column set.');\n    }\n    const subq = [];\n    for (const datum of data) {\n        const sel = keys.map(k => `${asLiteral(datum[k])} AS \"${columns[k]}\"`);\n        subq.push(`(SELECT ${sel.join(', ')})`);\n    }\n    return subq.join(' UNION ALL ');\n}\n//# sourceMappingURL=sql-from.js.map","import { createTable } from './create.js';\nimport { sqlFrom } from './sql-from.js';\nexport function load(method, tableName, fileName, options = {}, defaults = {}) {\n    const { select = ['*'], where, view, temp, replace, ...file } = options;\n    const params = parameters({ ...defaults, ...file });\n    const read = `${method}('${fileName}'${params ? ', ' + params : ''})`;\n    const filter = where ? ` WHERE ${where}` : '';\n    const query = `SELECT ${select.join(', ')} FROM ${read}${filter}`;\n    return createTable(tableName, query, { view, temp, replace });\n}\nexport function loadCSV(tableName, fileName, options) {\n    return load('read_csv', tableName, fileName, options, { auto_detect: true, sample_size: -1 });\n}\nexport function loadJSON(tableName, fileName, options) {\n    return load('read_json', tableName, fileName, options, { auto_detect: true, format: 'auto' });\n}\nexport function loadParquet(tableName, fileName, options) {\n    return load('read_parquet', tableName, fileName, options);\n}\n/**\n * Load geometry data within a spatial file format.\n * This method requires that the DuckDB spatial extension is loaded.\n * Supports GeoJSON, TopoJSON, and other common spatial formats.\n * For TopoJSON, wet the layer option to indicate the feature to extract.\n */\nexport function loadSpatial(tableName, fileName, options = {}) {\n    // nested options map to the open_options argument of st_read\n    const { options: opt, ...rest } = options;\n    if (opt) {\n        // TODO: check correct syntax for open_options\n        const open = Array.isArray(opt) ? opt.join(', ')\n            : typeof opt === 'string' ? opt\n                : Object.entries(opt)\n                    .map(([key, value]) => `${key}=${value}`)\n                    .join(', ');\n        Object.assign(rest, { open_options: open.toUpperCase() });\n    }\n    // TODO: handle box_2d for spatial_filter_box option\n    // TODO: handle wkb_blob for spatial_filter option\n    return load('st_read', tableName, fileName, rest);\n}\nexport function loadObjects(tableName, data, options = {}) {\n    const { select = ['*'], ...opt } = options;\n    const values = sqlFrom(data);\n    const query = select.length === 1 && select[0] === '*'\n        ? values\n        : `SELECT ${select} FROM ${values}`;\n    return createTable(tableName, query, opt);\n}\nfunction parameters(options) {\n    return Object.entries(options)\n        .map(([key, value]) => `${key}=${toDuckDBValue(value)}`)\n        .join(', ');\n}\nfunction toDuckDBValue(value) {\n    switch (typeof value) {\n        case 'boolean':\n            return String(value);\n        case 'string':\n            return `'${value}'`;\n        case 'undefined':\n        case 'object':\n            if (value == null) {\n                return 'NULL';\n            }\n            else if (Array.isArray(value)) {\n                return '[' + value.map(v => toDuckDBValue(v)).join(', ') + ']';\n            }\n            else {\n                return '{'\n                    + Object.entries(value)\n                        .map(([k, v]) => `'${k}': ${toDuckDBValue(v)}`)\n                        .join(', ')\n                    + '}';\n            }\n        default:\n            return `${value}`;\n    }\n}\n//# sourceMappingURL=load.js.map","import { float64 } from '../functions/cast.js';\nimport { mul, sub } from '../functions/operators.js';\n/**\n * Compute binned values over a one-dimensional extent.\n * @param x The expression to bin.\n *  The expression must return numeric values. For example, to bin\n *  datetime values, the input expression might map them to numeric\n *  values such as milliseconds since the epoch.\n * @param lo The low value of the bin extent.\n * @param hi The high value of the bin extent.\n * @param bins The integer number of bins to use within the\n *  defined binning extent.\n * @param reverse Flag indicating if bins should be\n *  produced in reverse order from *hi* to *lo* (default `false`).\n */\nexport function bin1d(x, lo, hi, bins, reverse = false) {\n    const diff = reverse ? sub(hi, float64(x)) : sub(float64(x), lo);\n    const scale = hi === lo ? 0 : bins / (hi - lo);\n    return scale ? mul(diff, float64(scale)) : diff;\n}\n//# sourceMappingURL=bin-1d.js.map","import { int32 } from '../functions/cast.js';\nimport { floor } from '../functions/numeric.js';\nimport { add, mul } from '../functions/operators.js';\n/**\n * Perform aggregation over a binned 2D domain. This method takes expressions\n * for the (non-truncated) x and y bin values; these expressions should be\n * in units of grid indices, but can contain fractional components. The\n * resulting query performs grouping and aggregation over the binned domain,\n * and uses a 2D integer bin index of the form (xbin + num_xbins * ybin).\n * @param q The input query. The FROM and WHERE clauses should\n *  be added to the query separately, either before or after this method.\n * @param xp The x bin expression.\n * @param yp The y bin expression.\n * @param aggs Named aggregate expressions over bins.\n * @param {xn The number of bins along the x dimension\n * @param groupby Group by expressions.\n * @returns The input query, with binning expressions added.\n */\nexport function bin2d(q, xp, yp, aggs, xn, groupby) {\n    return q\n        .select({\n        index: add(int32(floor(xp)), mul(int32(floor(yp)), xn)),\n        ...aggs\n    })\n        .groupby('index', groupby);\n}\n//# sourceMappingURL=bin-2d.js.map","/**\n * Generate a numeric binning scheme suitable for a histogram.\n * @param min The minimum value of the extent to bin.\n * @param max The maximum value of the extent to bin.\n * @param options Binning scheme options.\n */\nexport function binSpec(min, max, options) {\n    let { step, steps = 25, } = options;\n    const { minstep = 0, nice = true, base } = options;\n    if (nice !== false) {\n        // use span to determine step size\n        const span = max - min;\n        const logb = base ? Math.log(base) : Math.LN10;\n        step = step || binStep(span, steps, minstep, logb);\n        // adjust min/max relative to step\n        let v = Math.log(step);\n        const precision = v >= 0 ? 0 : ~~(-v / logb) + 1;\n        const eps = Math.pow(10, -precision - 1);\n        v = Math.floor(min / step + eps) * step;\n        min = min < v ? v - step : v;\n        max = Math.ceil(max / step) * step;\n        steps = Math.round((max - min) / step);\n    }\n    return { min, max, steps };\n}\n/**\n * Determine a bin step interval.\n * @param span The span from maximum to minimum value.\n * @param steps The approximate number of desired bins.\n * @param minstep The minimum acceptable bin step size.\n * @param logb The log base for determining orders of magnitude for step\n *  sizes. Defaults to log base 10 (`Math.LN10`). For example to use log\n *  base 2, provide the argument `Math.LN2` instead.\n * @returns The bin step interval (bin size).\n */\nexport function binStep(span, steps, minstep = 0, logb = Math.LN10) {\n    let v;\n    const level = Math.ceil(Math.log(steps) / logb);\n    let step = Math.max(minstep, Math.pow(10, Math.round(Math.log(span) / logb) - level));\n    // increase step size if too many bins\n    while (Math.ceil(span / step) > steps) {\n        step *= 10;\n    }\n    // decrease step size if allowed\n    const div = [5, 2];\n    for (let i = 0, n = div.length; i < n; ++i) {\n        v = step / div[i];\n        if (v >= minstep && span / v <= steps)\n            step = v;\n    }\n    return step;\n}\n//# sourceMappingURL=bin-step.js.map","import { binStep } from './bin-step.js';\nconst YEAR = 'year';\nconst MONTH = 'month';\nconst DAY = 'day';\nconst HOUR = 'hour';\nconst MINUTE = 'minute';\nconst SECOND = 'second';\nconst MILLISECOND = 'millisecond';\nconst MICROSECOND = 'microsecond';\nconst durationSecond = 1000;\nconst durationMinute = durationSecond * 60;\nconst durationHour = durationMinute * 60;\nconst durationDay = durationHour * 24;\nconst durationWeek = durationDay * 7;\nconst durationMonth = durationDay * 30;\nconst durationYear = durationDay * 365;\nconst units = [\n    { unit: SECOND, step: 1, dt: durationSecond },\n    { unit: SECOND, step: 5, dt: durationSecond * 5 },\n    { unit: SECOND, step: 15, dt: durationSecond * 15 },\n    { unit: SECOND, step: 30, dt: durationSecond * 30 },\n    { unit: MINUTE, step: 1, dt: durationMinute },\n    { unit: MINUTE, step: 5, dt: durationMinute * 5 },\n    { unit: MINUTE, step: 15, dt: durationMinute * 15 },\n    { unit: MINUTE, step: 30, dt: durationMinute * 30 },\n    { unit: HOUR, step: 1, dt: durationHour },\n    { unit: HOUR, step: 3, dt: durationHour * 3 },\n    { unit: HOUR, step: 6, dt: durationHour * 6 },\n    { unit: HOUR, step: 12, dt: durationHour * 12 },\n    { unit: DAY, step: 1, dt: durationDay },\n    { unit: DAY, step: 7, dt: durationWeek },\n    { unit: MONTH, step: 1, dt: durationMonth },\n    { unit: MONTH, step: 3, dt: durationMonth * 3 },\n    { unit: YEAR, step: 1, dt: durationYear }\n];\n/**\n * Determine a time interval for binning based on provided min\n * and max timestamps and approximate step count.\n * @param min The minimum timestamp value.\n * @param max The maximum timestamp value.\n * @param steps The approximate number of bins desired.\n */\nexport function timeInterval(min, max, steps) {\n    const span = +max - +min;\n    const t = span / steps; // target step size duration\n    const i = bisect(units, t, v => v.dt);\n    let unit;\n    let step;\n    if (i === units.length) {\n        unit = YEAR;\n        step = binStep(span / durationYear, steps);\n    }\n    else if (i) {\n        ({ unit, step } = units[t / units[i - 1].dt < units[i].dt / t ? i - 1 : i]);\n    }\n    else {\n        step = binStep(span, steps);\n        unit = step >= 1 ? MILLISECOND : MICROSECOND;\n        step = step >= 1 ? step : step * 1000;\n    }\n    return { unit, step };\n}\n/**\n * Perform a binary search.\n * @param a The array to search.\n * @param x The target value.\n * @param value A value accessor.\n * @returns The search result array index.\n */\nfunction bisect(a, x, value) {\n    const compare1 = (a, b) => Number(a) - Number(b);\n    const compare2 = (d, x) => compare1(value(d), x);\n    let lo = 0;\n    let hi = a.length;\n    if (lo < hi) {\n        if (compare1(x, x) !== 0)\n            return hi;\n        do {\n            const mid = (lo + hi) >>> 1;\n            if (compare2(a[mid], x) <= 0)\n                lo = mid + 1;\n            else\n                hi = mid;\n        } while (lo < hi);\n    }\n    return lo;\n}\n//# sourceMappingURL=time-interval.js.map","import { dateBin } from '../functions/datetime.js';\nimport { interval } from '../functions/interval.js';\nimport { add } from '../functions/operators.js';\nimport { timeInterval } from './util/time-interval.js';\n/**\n * Return a SQL expression for date/time bins.\n * @param field The column or expression to bin.\n * @param extent The min/max extent over which to bin.\n * @param options Datetime binning options.\n */\nexport function binDate(field, extent, options = {}) {\n    const { offset = 0 } = options;\n    // use interval if provided, otherwise determine from extent\n    const { unit, step = 1 } = options.interval\n        ? { unit: options.interval, step: options.step }\n        : timeInterval(extent[0], extent[1], options.steps || 40);\n    const bin = dateBin(field, unit, step);\n    return offset ? add(bin, interval(unit, offset * step)) : bin;\n}\n//# sourceMappingURL=bin-date.js.map","/**\n * Identity function.\n * @param x\n */\nexport function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { LiteralNode } from '../ast/literal.js';\nimport { epoch_ms } from '../functions/datetime.js';\nimport { literal } from '../functions/literal.js';\nimport { abs, exp, ln, log, sign, sqrt } from '../functions/numeric.js';\nimport { add, div, mul, pow, sub } from '../functions/operators.js';\nimport { asNode } from '../util/ast.js';\nimport { identity } from '../util/identity.js';\nfunction scaleLinear() {\n    return {\n        apply: identity,\n        invert: identity,\n        sqlApply: asNode,\n        sqlInvert: identity\n    };\n}\nfunction scaleLog({ base = null } = {}) {\n    if (base == null || base === Math.E) {\n        return {\n            apply: Math.log,\n            invert: Math.exp,\n            sqlApply: c => ln(c),\n            sqlInvert: c => exp(c)\n        };\n    }\n    else if (base === 10) {\n        return {\n            apply: Math.log10,\n            invert: x => Math.pow(10, x),\n            sqlApply: c => log(c),\n            sqlInvert: c => pow(10, c)\n        };\n    }\n    else {\n        const b = +base;\n        return {\n            apply: x => Math.log(x) / Math.log(b),\n            invert: x => Math.pow(b, x),\n            sqlApply: c => div(ln(c), ln(b)),\n            sqlInvert: c => pow(b, c)\n        };\n    }\n}\nfunction scaleSymlog({ constant = 1 } = {}) {\n    const _ = +constant;\n    return {\n        apply: x => Math.sign(x) * Math.log1p(Math.abs(x)),\n        invert: x => Math.sign(x) * Math.exp(Math.abs(x) - _),\n        sqlApply: c => (c = asNode(c), mul(sign(c), ln(add(_, abs(c))))),\n        sqlInvert: c => mul(sign(c), sub(exp(abs(c)), _))\n    };\n}\nfunction scaleSqrt() {\n    return {\n        apply: x => Math.sign(x) * Math.sqrt(Math.abs(x)),\n        invert: x => Math.sign(x) * x * x,\n        sqlApply: c => (c = asNode(c), mul(sign(c), sqrt(abs(c)))),\n        sqlInvert: c => mul(sign(c), pow(c, 2))\n    };\n}\nfunction scalePow({ exponent = 1 } = {}) {\n    const e = +exponent;\n    return {\n        apply: x => Math.sign(x) * Math.pow(Math.abs(x), e),\n        invert: x => Math.sign(x) * Math.pow(Math.abs(x), 1 / e),\n        sqlApply: c => (c = asNode(c), mul(sign(c), pow(abs(c), e))),\n        sqlInvert: c => mul(sign(c), pow(abs(c), div(1, e)))\n    };\n}\nfunction scaleTime() {\n    return {\n        apply: x => Number(x),\n        invert: x => new Date(x),\n        sqlApply: c => c instanceof Date ? literal(+c)\n            : isDateLiteral(c) ? literal(Number(c.value))\n                : epoch_ms(c),\n        sqlInvert: identity\n    };\n}\nconst scales = {\n    identity: scaleLinear,\n    linear: scaleLinear,\n    log: scaleLog,\n    symlog: scaleSymlog,\n    sqrt: scaleSqrt,\n    pow: scalePow,\n    time: scaleTime,\n    utc: scaleTime\n};\nexport function scaleTransform(options) {\n    const scale = scales[options.type];\n    if (!scale)\n        throw new Error(`Unrecognized scale type: ${options.type}`);\n    // @ts-expect-error suppress error, revisit later?\n    return { ...options, ...scale(options) };\n}\n/**\n * Check if a value is a date-valued literal SQL AST node.\n * @param x The value to test.\n */\nfunction isDateLiteral(x) {\n    return x instanceof LiteralNode && x.value instanceof Date;\n}\n//# sourceMappingURL=scales.js.map","import { float64 } from '../functions/cast.js';\nimport { floor } from '../functions/numeric.js';\nimport { add, div, mul, sub } from '../functions/operators.js';\nimport { binSpec } from './util/bin-step.js';\nimport { scaleTransform } from './scales.js';\n/**\n * Return a SQL expression for histogram bins.\n * @param field The column or expression to bin.\n * @param extent The min/max extent over which to bin.\n * @param options Binning options.\n * @param transform Scale transforms to apply to create\n *  (potentially non-linear) binning intervals.\n * @returns The resulting SQL expression\n */\nexport function binHistogram(field, extent, options = {}, transform = scaleTransform({ type: 'linear' })) {\n    const [min, max] = extent;\n    const { offset = 0 } = options;\n    const { apply, sqlApply, sqlInvert } = transform;\n    const b = binSpec(apply(min), apply(max), options);\n    const col = sqlApply(field);\n    const alpha = (b.max - b.min) / b.steps;\n    let expr = b.min === 0 ? col : sub(col, b.min);\n    if (alpha !== 1)\n        expr = div(expr, float64(alpha));\n    expr = floor(offset ? add(offset, expr) : expr);\n    if (alpha !== 1)\n        expr = mul(alpha, expr);\n    if (b.min !== 0)\n        expr = add(b.min, expr);\n    return sqlInvert(expr);\n}\n//# sourceMappingURL=bin-histogram.js.map","import { Query } from '../ast/query.js';\nimport { sum } from '../functions/aggregate.js';\nimport { int32 } from '../functions/cast.js';\nimport { floor } from '../functions/numeric.js';\nimport { add, mul, neq, sub } from '../functions/operators.js';\n/**\n * Perform linear binning in one dimension.\n * @param  query The base query to bin.\n * @param x The expression to bin.\n * @param weight The expression to weight by.\n * @param groupby Group by expressions.\n */\nexport function binLinear1d(query, x, weight = undefined, groupby = []) {\n    const w = weight\n        ? ((x) => mul(x, weight))\n        : ((x) => x);\n    const p0 = floor(x);\n    const p1 = add(p0, 1);\n    return Query\n        .from(Query.unionAll(query.clone().select({ i: int32(p0), w: w(sub(p1, x)) }), query.clone().select({ i: int32(p1), w: w(sub(x, p0)) })))\n        .select({ index: 'i', density: sum('w') }, groupby)\n        .groupby('index', groupby)\n        .having(neq('density', 0));\n}\n//# sourceMappingURL=bin-linear-1d.js.map","import { Query } from '../ast/query.js';\nimport { sum } from '../functions/aggregate.js';\nimport { int32 } from '../functions/cast.js';\nimport { floor } from '../functions/numeric.js';\nimport { add, mul, neq, sub } from '../functions/operators.js';\nimport { identity } from '../util/identity.js';\n/**\n * Compute densities over a 2D domain using linear binning. The weight of\n * each data point is linearly distributed over adjacent bins, providing\n * a better base for subsequent kernel density estimation. This method takes\n * expressions for the (non-truncated) x and y bin values; these expressions\n * should be in units of grid indices, but can contain fractional components.\n * @param q The input query. The FROM and WHERE clauses should\n *  be added to the query separately, before this method is invoked.\n * @param xp The x grid bin expression\n * @param yp The y grid bin expression\n * @param weight Point weights.\n * @param xn The number of x grid bins.\n * @param groupby Group by expressions.\n * @returns A linear binning query for bin `index` and aggregate `density`\n *  columns, in addition to any group by expressions.\n */\nexport function binLinear2d(q, xp, yp, weight, xn, groupby = []) {\n    const w = weight ? (x) => mul(x, weight) : identity;\n    const subq = (i, w) => q.clone().select({ xp, yp, i, w });\n    const index = (x, y) => add(x, mul(y, xn));\n    const xu = int32(floor(xp));\n    const yu = int32(floor(yp));\n    const xv = add(xu, 1);\n    const yv = add(yu, 1);\n    const xpu = sub(xp, xu);\n    const xvp = sub(xv, xp);\n    const ypu = sub(yp, yu);\n    const yvp = sub(yv, yp);\n    return Query\n        .from(Query.unionAll(\n    // grid[xu + yu * xn] += (xv - xp) * (yv - yp) * wi\n    subq(index(xu, yu), w(mul(xvp, yvp))), \n    // grid[xu + yv * xn] += (xv - xp) * (yp - yu) * wi\n    subq(index(xu, yv), w(mul(xvp, ypu))), \n    // grid[xv + yu * xn] += (xp - xu) * (yv - yp) * wi\n    subq(index(xv, yu), w(mul(xpu, yvp))), \n    // grid[xv + yv * xn] += (xp - xu) * (yp - yu) * wi\n    subq(index(xv, yv), w(mul(xpu, ypu)))))\n        .select({ index: 'i', density: sum('w') }, groupby)\n        .groupby('index', groupby)\n        .having(neq('density', 0));\n}\n//# sourceMappingURL=bin-linear-2d.js.map","import { Query } from '../ast/query.js';\nimport { count, max, sum } from '../functions/aggregate.js';\nimport { int32 } from '../functions/cast.js';\nimport { abs, floor, greatest, round, sign } from '../functions/numeric.js';\nimport { add, div, gt, isNull, lt, lte, mul, or, sub } from '../functions/operators.js';\nimport { asc } from '../functions/order-by.js';\nimport { sql } from '../functions/sql-template-tag.js';\nimport { lead } from '../functions/window.js';\nimport { over } from '../util/ast.js';\n/**\n * Compute line segment densities over a gridded 2D domain. The returned\n * query uses multiple subqueries (CTEs) to identify line segment end point\n * pairs, perform line rasterization in-database, normalize arc lengths,\n * and then sum results for all line series to produce a density map.\n * Based on Moritz and Fisher's work: https://arxiv.org/abs/1808.06019\n * @param q The base query over the data.\n * @param x Bin expression for x dimension.\n *  Provides gridded x coordinates, potentially with a fractional component.\n * @param y Bin expression for x dimension.\n *  Provides gridded y coordinates, potentially with a fractional component.\n * @param z Group by columns that segment data into individual line\n *  series. An empty array indicates there is only a single line series.\n * @param xn The number of grid bins for the x dimension.\n * @param yn The number of grid bins for the y dimension.\n * @param groupby Additional group by expressions. Separate\n *  line density maps are created for each of these groups.\n * @param normalize Flag toggling approximate arc-length normalization to\n *  improve accuracy and reduce artifacts (default `true`).\n */\nexport function lineDensity(q, x, y, z, xn, yn, groupby = [], normalize = true) {\n    // select x, y points binned to the grid\n    q.select({\n        x: int32(floor(x)),\n        y: int32(floor(y))\n    });\n    // select line segment end point pairs\n    // retain only segments within the grid region\n    const groups = groupby.concat(z);\n    const pairs = Query\n        .from(q)\n        .select(groups, {\n        x0: 'x',\n        y0: 'y',\n        dx: sub(lead('x').over('sw'), 'x'),\n        dy: sub(lead('y').over('sw'), 'y')\n    })\n        .window({\n        sw: over().partitionby(groups).orderby(asc('x'))\n    })\n        .qualify([\n        or(lt('x0', xn), lt(add('x0', 'dx'), xn)),\n        or(lt('y0', yn), lt(add('y0', 'dy'), yn)),\n        or(gt('x0', 0), gt(add('x0', 'dx'), 0)),\n        or(gt('y0', 0), gt(add('y0', 'dy'), 0))\n    ]);\n    // create indices to join against for rasterization\n    // generate the maximum number of indices needed\n    const num = Query\n        .select({ x: greatest(max(abs('dx')), max(abs('dy'))) })\n        .from('pairs');\n    const indices = Query.select({\n        i: int32(sql `UNNEST(range((${num})))`)\n    });\n    // rasterize line segments\n    const raster = Query.unionAll(Query\n        .select(groups, {\n        x: add('x0', 'i'),\n        y: add('y0', int32(round(div(mul('i', 'dy'), 'dx'))))\n    })\n        .from('pairs', 'indices')\n        .where([lte(abs('dy'), abs('dx')), lt('i', abs('dx'))]), Query\n        .select(groups, {\n        x: add('x0', int32(round(div(mul(mul(sign('dy'), 'i'), 'dx'), 'dy')))),\n        y: add('y0', mul(sign('dy'), 'i'))\n    })\n        .from('pairs', 'indices')\n        .where([gt(abs('dy'), abs('dx')), lt('i', abs('dy'))]), Query\n        .select(groups, { x: 'x0', y: 'y0' })\n        .from('pairs')\n        .where(isNull('dx')));\n    // filter raster, normalize columns for each series\n    const points = Query\n        .from('raster')\n        .select(groups, 'x', 'y', normalize\n        ? { w: div(1, count().partitionby(['x'].concat(groups))) }\n        : null)\n        .where([lte(0, 'x'), lt('x', xn), lte(0, 'y'), lt('y', yn)]);\n    // sum normalized, rasterized series into output grids\n    return Query\n        .with({ pairs, indices, raster, points })\n        .from('points')\n        .select(groupby, {\n        index: add('x', mul('y', int32(xn))),\n        density: normalize ? sum('w') : count()\n    })\n        .groupby('index', groupby);\n}\n//# sourceMappingURL=line-density.js.map","import { Query, isQuery } from '../ast/query.js';\nimport { argmax, argmin, max, min } from '../functions/aggregate.js';\nimport { int32 } from '../functions/cast.js';\nimport { cte } from '../functions/cte.js';\nimport { floor } from '../functions/numeric.js';\n/**\n * M4 is an optimization for value-preserving time-series aggregation\n * (https://www.vldb.org/pvldb/vol7/p797-jugel.pdf). This implementation uses\n * an efficient version with a single scan and the aggregate functions\n * argmin and argmax, following https://arxiv.org/pdf/2306.03714.pdf.\n * This method can bin along either the *x* or *y* dimension, as determined\n * by the caller-provided *bin* expression.\n * @param input The base query or table.\n * @param bin An expression that maps\n *  time-series values to fractional pixel positions.\n * @param x The x dimension column name.\n * @param y The y dimension column name.\n * @param groups Additional groupby columns, for example for faceted charts.\n * @returns The resulting M4 query.\n */\nexport function m4(input, bin, x, y, groups = []) {\n    const pixel = int32(floor(bin));\n    // Below, we treat input as a CTE when it is a query. In this case,\n    // we also request that the CTE be explicitly materialized.\n    const useCTE = isQuery(input);\n    const from = useCTE ? 'input' : input;\n    const query = useCTE\n        ? Query.with(cte(String(from), input, true))\n        : Query;\n    const q = (sel) => Query\n        .from(from)\n        .select(sel)\n        .groupby(pixel, groups);\n    return query\n        .union(q([{ [x]: min(x), [y]: argmin(y, x) }, ...groups]), q([{ [x]: max(x), [y]: argmax(y, x) }, ...groups]), q([{ [x]: argmin(x, y), [y]: min(y) }, ...groups]), q([{ [x]: argmax(x, y), [y]: max(y) }, ...groups]))\n        .orderby(groups, x);\n}\n//# sourceMappingURL=m4.js.map","// Fowler/Noll/Vo hashing.\nexport function fnv_hash(v) {\n    let a = 2166136261;\n    for (let i = 0, n = v.length; i < n; ++i) {\n        const c = v.charCodeAt(i);\n        const d = c & 0xff00;\n        if (d)\n            a = fnv_multiply(a ^ d >> 8);\n        a = fnv_multiply(a ^ c & 0xff);\n    }\n    return fnv_mix(a) >>> 0; // ensure non-zero value\n}\n// a * 16777619 mod 2**32\nfunction fnv_multiply(a) {\n    return a + (a << 1) + (a << 4) + (a << 7) + (a << 8) + (a << 24);\n}\n// See https://web.archive.org/web/20131019013225/http://home.comcast.net/~bretm/hash/6.html\nfunction fnv_mix(a) {\n    a += a << 13;\n    a ^= a >>> 7;\n    a += a << 3;\n    a ^= a >>> 17;\n    a += a << 5;\n    return a & 0xffffffff;\n}\n//# sourceMappingURL=hash.js.map","import { and, argmax, argmin, coalesce, count, div, exp, isNotNull, ln, max, min, mul, pow, regrAvgX, regrAvgY, regrCount, sql, sqrt, sub, sum } from '@uwdata/mosaic-sql';\nimport { fnv_hash } from '../util/hash.js';\n/**\n * Determine sufficient statistics to preaggregate the given node. This\n * method populates the *preagg* and *aggrs* arguments with necessary\n * information for preaggregation optimization.\n * @param node An aggregate function.\n * @param preagg Map of column names to\n *  expressions to include in the preaggregation table.\n * @param avg Global average query generator.\n * @returns Output aggregate expression that uses preaggregated\n *  sufficient statistics to service updates.\n */\nexport function sufficientStatistics(node, preagg, avg) {\n    switch (node.name) {\n        case 'count':\n        case 'count_star':\n            return sumCountExpr(preagg, node);\n        case 'sum':\n            return sumExpr(preagg, node);\n        case 'avg':\n            return avgExpr(preagg, node);\n        case 'geomean':\n            return geomeanExpr(preagg, node);\n        case 'arg_max':\n            return argmaxExpr(preagg, node);\n        case 'arg_min':\n            return argminExpr(preagg, node);\n        // variance statistics drop the original aggregate operation\n        // in favor of tracking sufficient statistics\n        case 'variance':\n        case 'var_samp':\n            return varianceExpr(preagg, node, avg);\n        case 'var_pop':\n            return varianceExpr(preagg, node, avg, false);\n        case 'stddev':\n        case 'stddev_samp':\n            return sqrt(varianceExpr(preagg, node, avg));\n        case 'stddev_pop':\n            return sqrt(varianceExpr(preagg, node, avg, false));\n        case 'covar_samp':\n            return covarianceExpr(preagg, node, avg);\n        case 'covar_pop':\n            return covarianceExpr(preagg, node, avg, false);\n        case 'corr':\n            return corrExpr(preagg, node, avg);\n        // regression statistics\n        case 'regr_count':\n            return regrCountExpr(preagg, node).expr;\n        case 'regr_avgx':\n            return regrAvgXExpr(preagg, node);\n        case 'regr_avgy':\n            return regrAvgYExpr(preagg, node);\n        case 'regr_syy':\n            return regrVarExpr(preagg, 0, node, avg);\n        case 'regr_sxx':\n            return regrVarExpr(preagg, 1, node, avg);\n        case 'regr_sxy':\n            return covarianceExpr(preagg, node, avg, null);\n        case 'regr_slope':\n            return regrSlopeExpr(preagg, node, avg);\n        case 'regr_intercept':\n            return regrInterceptExpr(preagg, node, avg);\n        case 'regr_r2':\n            return pow(corrExpr(preagg, node, avg), 2);\n        // aggregates that commute directly\n        case 'max':\n        case 'min':\n        case 'bit_and':\n        case 'bit_or':\n        case 'bit_xor':\n        case 'bool_and':\n        case 'bool_or':\n        case 'product': {\n            const name = colName(node);\n            preagg[name] = node;\n            return sql `${node.name}(\"${name}\")`;\n        }\n        // unsupported aggregate, return null to indicate failure\n        default: return null;\n    }\n}\n/**\n * Generate a column name for the given aggregate node. The name is\n * made from a hash of the string-serialized SQL expression.\n * @param node The aggregate node to name.\n * @returns The generated column name.\n */\nfunction colName(node) {\n    return 'pre_' + fnv_hash(`${node}`).toString(16);\n}\n/**\n * Add a sufficient statistic to the preaggregation column set.\n * Generates a unique column name for the statistic and propagates\n * a FILTER clause if one exists on the original aggregate node.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param expr The aggregate statistic to add.\n * @param node The originating aggregate function call.\n * @returns The name of the statistic column.\n */\nfunction addStat(preagg, expr, node) {\n    const filter = node?.filter;\n    if (filter) {\n        // push filter clause to preaggregate expr\n        expr = expr.filter\n            ? expr.where(and(filter, expr.filter))\n            : expr.where(filter);\n    }\n    const name = colName(expr);\n    preagg[name] = expr;\n    return name;\n}\n/**\n * Generate an expression for calculating counts over data dimensions.\n * As a side effect, this method adds a column to the input *preagg* object\n * to track the count of non-null values per-partition.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @returns An aggregate expression over\n *  pre-aggregated dimensions and associated column name.\n */\nfunction countExpr(preagg, node) {\n    const name = addStat(preagg, count(node.args[0]), node);\n    return { expr: coalesce(sum(name), 0), name };\n}\n/**\n * Generate an expression for calculating counts over data dimensions.\n * The expression is a summation with an additional coalesce operation\n * to map null sums to zero-valued counts.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction sumCountExpr(preagg, node) {\n    return coalesce(sumExpr(preagg, node), 0);\n}\n/**\n * Generate an expression for calculating sums over data dimensions.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction sumExpr(preagg, node) {\n    return sum(addStat(preagg, node));\n}\n/**\n * Generate an expression for calculating averages over data dimensions.\n * As a side effect, this method adds a column to the input *preagg* object\n * to track the count of non-null values per-partition.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction avgExpr(preagg, node) {\n    const as = addStat(preagg, node);\n    const { expr, name } = countExpr(preagg, node);\n    return div(sum(mul(as, name)), expr);\n}\n/**\n * Generate an expression for calculating geometric means over data dimensions.\n * This method uses log-based computations to ensure numerical stability. The\n * geomean calculation uses two sufficient statistics: the sum of log values\n * and the count of non-null values. As a side effect, this method adds columns\n * for these statistics to the input *preagg* object.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction geomeanExpr(preagg, node) {\n    const x = node.args[0];\n    const expr = addStat(preagg, sum(ln(x)), node);\n    const { expr: n } = countExpr(preagg, node);\n    return exp(div(sum(expr), n));\n}\n/**\n * Generate an expression for calculating argmax over data dimensions.\n * As a side effect, this method adds a column to the input *preagg* object\n * to track a maximum value per-partition.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction argmaxExpr(preagg, node) {\n    const expr = addStat(preagg, node);\n    const maxy = addStat(preagg, max(node.args[1]), node);\n    return argmax(expr, maxy);\n}\n/**\n * Generate an expression for calculating argmin over data dimensions.\n * As a side effect, this method adds a column to the input *preagg* object\n * to track a minimum value per-partition.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction argminExpr(preagg, node) {\n    const expr = addStat(preagg, node);\n    const miny = addStat(preagg, min(node.args[1]), node);\n    return argmin(expr, miny);\n}\n/**\n * Generate an expression for calculating variance over data dimensions.\n * This method uses the \"textbook\" definition of variance (E[X^2] - E[X]^2),\n * but on mean-centered data to reduce floating point error. The variance\n * calculation uses three sufficient statistics: the count of non-null values,\n * the residual sum of squares and the sum of residual (mean-centered) values.\n * As a side effect, this method adds columns for these statistics to the\n * input *preagg* object.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @param avg Global average query generator.\n * @param correction A flag for whether a Bessel\n *  correction should be applied to compute the sample variance\n *  rather than the populatation variance.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction varianceExpr(preagg, node, avg, correction = true) {\n    const x = node.args[0];\n    const { expr: n } = countExpr(preagg, node);\n    const delta = sub(x, avg(x));\n    const rssq = addStat(preagg, sum(pow(delta, 2)), node); // residual sum of squares\n    const rsum = addStat(preagg, sum(delta), node); // residual sum\n    const denom = correction ? sub(n, 1) : n; // Bessel correction\n    return div(sub(sum(rssq), div(pow(sum(rsum), 2), n)), denom);\n}\n/**\n * Generate an expression for calculating covariance over data dimensions.\n * This method uses mean-centered data to reduce floating point error. The\n * covariance calculation uses four sufficient statistics: the count of\n * non-null value pairs, the sum of residual products, and residual sums\n * (of mean-centered values) for x and y. As a side effect, this method\n * adds columns for these statistics to the input *preagg* object.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @param avg Global average query generator.\n * @param correction A flag for whether a Bessel\n *  correction should be applied to compute the sample covariance rather\n *  than the populatation covariance. If null, an expression for the\n *  unnormalized covariance (no division by sample count) is returned.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction covarianceExpr(preagg, node, avg, correction = true) {\n    const { expr: n } = regrCountExpr(preagg, node);\n    const sxy = regrSumXYExpr(preagg, node, avg);\n    const sx = regrSumExpr(preagg, 1, node, avg);\n    const sy = regrSumExpr(preagg, 0, node, avg);\n    const num = sub(sxy, div(mul(sx, sy), n));\n    return correction === null ? num // do not divide by count\n        : correction ? div(num, sub(n, 1)) // Bessel correction (sample)\n            : div(num, n); // no correction (population)\n}\n/**\n * Generate an expression for calculating Pearson product-moment correlation\n * coefficients over data dimensions. This method uses mean-centered data\n * to reduce floating point error. The correlation calculation uses six\n * sufficient statistics: the count of non-null value pairs, the sum of\n * residual products, and both residual sums and sums of squares for x and y.\n * As a side effect, this method adds columns for these statistics to the\n * input *preagg* object.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @param avg Global average query generator.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction corrExpr(preagg, node, avg) {\n    const { expr: n } = regrCountExpr(preagg, node);\n    const sxy = regrSumXYExpr(preagg, node, avg);\n    const sxx = regrSumSqExpr(preagg, 1, node, avg);\n    const syy = regrSumSqExpr(preagg, 0, node, avg);\n    const sx = regrSumExpr(preagg, 1, node, avg);\n    const sy = regrSumExpr(preagg, 0, node, avg);\n    const vx = sub(sxx, div(pow(sx, 2), n));\n    const vy = sub(syy, div(pow(sy, 2), n));\n    return div(sub(sxy, div(mul(sx, sy), n)), sqrt(mul(vx, vy)));\n}\n/**\n * Generate an expression for the count of non-null (x, y) pairs. As a side\n * effect, this method adds columns to the input *preagg* object to the\n * partition-level count of non-null pairs.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @returns An aggregate expression over\n *  pre-aggregated dimensions and associated column name.\n */\nfunction regrCountExpr(preagg, node) {\n    const [x, y] = node.args;\n    const n = addStat(preagg, regrCount(x, y), node);\n    return { expr: sum(n), name: n };\n}\n/**\n * Generate an expression for calculating sums of residual values for use in\n * covariance and regression queries. Only values corresponding to non-null\n * (x, y) pairs are included. This method uses mean-centered data to reduce\n * floating point error. As a side effect, this method adds a column for\n * partition-level sums to the input *preagg* object.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param i An index indicating which argument column to sum.\n * @param node The originating aggregate function call.\n * @param avg Global average query generator.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction regrSumExpr(preagg, i, node, avg) {\n    const args = node.args;\n    const v = args[i];\n    const o = args[1 - i];\n    const rsum = sum(sub(v, avg(v))).where(isNotNull(o));\n    return sum(addStat(preagg, rsum, node));\n}\n/**\n * Generate an expressios for calculating sums of squared residual values for\n * use in covariance and regression queries. Only values corresponding to\n * non-null (x, y) pairs are included. This method uses mean-centered data to\n * reduce floating point error. As a side effect, this method adds a column\n * for partition-level sums to the input *preagg* object.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param i An index indicating which argument column to sum.\n * @param node The originating aggregate function call.\n * @param avg Global average query generator.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction regrSumSqExpr(preagg, i, node, avg) {\n    const args = node.args;\n    const v = args[i];\n    const u = args[1 - i];\n    const ssq = sum(pow(sub(v, avg(v)), 2)).where(isNotNull(u));\n    return sum(addStat(preagg, ssq, node));\n}\n/**\n * Generate an expression for calculating sums of residual product values for\n * use in covariance and regression queries. Only values corresponding to\n * non-null (x, y) pairs are included. This method uses mean-centered data to\n * reduce floating point error. As a side effect, this method adds a column\n * for partition-level sums to the input *preagg* object.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @param avg Global average query generator.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction regrSumXYExpr(preagg, node, avg) {\n    const [y, x] = node.args;\n    const sxy = sum(mul(sub(x, avg(x)), sub(y, avg(y))));\n    return sum(addStat(preagg, sxy, node));\n}\n/**\n * Generate an expression for the average x value in a regression context.\n * Only values corresponding to non-null (x, y) pairs are included. As a side\n * effect, this method adds columns to the input *preagg* object to track both\n * the count of non-null pairs and partition-level averages.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction regrAvgXExpr(preagg, node) {\n    const [y, x] = node.args;\n    const { expr: n, name } = regrCountExpr(preagg, node);\n    const a = addStat(preagg, regrAvgX(y, x), node);\n    return div(sum(mul(a, name)), n);\n}\n/**\n * Generate an expression for the average y value in a regression context.\n * Only values corresponding to non-null (x, y) pairs are included. As a side\n * effect, this method adds columns to the input *preagg* object to track both\n * the count of non-null pairs and partition-level averages.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @returns An aggregate expression over pre-aggregated dimensions.\n */\nfunction regrAvgYExpr(preagg, node) {\n    const [y, x] = node.args;\n    const { expr: n, name } = regrCountExpr(preagg, node);\n    const a = addStat(preagg, regrAvgY(y, x), node);\n    return div(sum(mul(a, name)), n);\n}\n/**\n * Generate an expression for calculating variance over data dimensions for\n * use in covariance and regression queries. Only values corresponding to\n * non-null (x, y) pairs are included. This method uses mean-centered data to\n * reduce floating point error. As a side effect, this method adds columns\n * for partition-level count and sums to the input *preagg* object.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param i The index of the argument to compute the variance for.\n * @param node The originating aggregate function call.\n * @param avg Global average query generator.\n * @returns An aggregate expression for calculating variance\n *  over pre-aggregated data dimensions.\n */\nfunction regrVarExpr(preagg, i, node, avg) {\n    const { expr: n } = regrCountExpr(preagg, node);\n    const sum = regrSumExpr(preagg, i, node, avg);\n    const ssq = regrSumSqExpr(preagg, i, node, avg);\n    return sub(ssq, div(pow(sum, 2), n));\n}\n/**\n * Generate an expression for calculating a regression slope. The slope is\n * computed as the covariance divided by the variance of the x variable. As a\n * side effect, this method adds columns for sufficient statistics to the\n * input *preagg* object.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @param avg Global average query generator.\n * @returns An aggregate expression for calculating regression\n *  slopes over pre-aggregated data dimensions.\n */\nfunction regrSlopeExpr(preagg, node, avg) {\n    const cov = covarianceExpr(preagg, node, avg, null);\n    const varx = regrVarExpr(preagg, 1, node, avg);\n    return div(cov, varx);\n}\n/**\n * Generate an expression for calculating a regression intercept. The intercept\n * is derived from the regression slope and average x and y values. As a\n * side effect, this method adds columns for sufficient statistics to the\n * input *preagg* object.\n * @param preagg A map of columns (such as\n *  sufficient statistics) to pre-aggregate.\n * @param node The originating aggregate function call.\n * @param avg Global average query generator.\n * @returns An aggregate expression for calculating regression\n *  intercepts over pre-aggregated data dimensions.\n */\nfunction regrInterceptExpr(preagg, node, avg) {\n    const ax = regrAvgXExpr(preagg, node);\n    const ay = regrAvgYExpr(preagg, node);\n    const m = regrSlopeExpr(preagg, node, avg);\n    return sub(ay, mul(m, ax));\n}\n//# sourceMappingURL=sufficient-statistics.js.map","import { collectAggregates, isAggregateExpression, isSelectQuery, isTableRef, rewrite, sql } from '@uwdata/mosaic-sql';\nimport { sufficientStatistics } from './sufficient-statistics.js';\n/**\n * Determine pre-aggregation columns for a given Mosaic client.\n * @param client The Mosaic client.\n * @returns An object with necessary column data to generate pre-aggregated\n *  columns, or null if the client can't be optimized or the client query\n *  contains an invalid or unsupported expression.\n */\nexport function preaggColumns(client) {\n    if (!client.filterStable)\n        return null;\n    const q = client.query();\n    // bail if query is not analyzable\n    if (!isSelectQuery(q))\n        return null;\n    // bail if no base table\n    const from = getBase(q, q => {\n        const ref = q._from[0]?.expr;\n        return isTableRef(ref) ? ref.name : ref;\n    });\n    if (typeof from !== 'string')\n        return null;\n    const aggrs = new Map();\n    const preagg = {};\n    const output = {};\n    const group = []; // list of grouping dimension columns\n    // generate a scalar subquery for a global average\n    const avg = (ref) => {\n        const name = ref.column;\n        const expr = getBase(q, q => q._select.find(c => c.alias === name)?.expr);\n        return sql `(SELECT avg(${expr ?? ref}) FROM \"${from}\")`;\n    };\n    // iterate over select clauses and analyze expressions\n    for (const { alias, expr } of q._select) {\n        // bail if there is an aggregate we can't analyze\n        // a value > 1 indicates an aggregate in verbatim text\n        if (isAggregateExpression(expr) > 1)\n            return null;\n        const nodes = collectAggregates(expr);\n        if (nodes.length === 0) {\n            // if no aggregates, expr is a groupby dimension\n            group.push(alias);\n            preagg[alias] = expr;\n        }\n        else {\n            for (const node of nodes) {\n                // bail if distinct aggregate\n                if (node.isDistinct)\n                    return null;\n                // bail if aggregate function is unsupported\n                // otherwise add output aggregate to rewrite map\n                const agg = sufficientStatistics(node, preagg, avg);\n                if (!agg)\n                    return null;\n                aggrs.set(node, agg);\n            }\n            // rewrite original select clause to use preaggregates\n            output[alias] = rewrite(expr, aggrs);\n        }\n    }\n    // bail if the query has no aggregates\n    if (!aggrs.size)\n        return null;\n    return { group, preagg, output };\n}\n/**\n * Identify a shared base (source) query and extract a value from it.\n * This method is used to find a shared base table name or extract\n * the original column name within a base table.\n * @param query The input query.\n * @param get A getter function to extract\n *  a value from a base query.\n * @returns the base query value, or\n *  `undefined` if there is no source table, or `NaN` if the\n *  query operates over multiple source tables.\n */\nfunction getBase(query, get) {\n    const subq = query.subqueries;\n    // select query\n    if (isSelectQuery(query) && subq.length === 0) {\n        return get(query);\n    }\n    // handle set operations / subqueries\n    const base = getBase(subq[0], get);\n    for (let i = 1; i < subq.length; ++i) {\n        const value = getBase(subq[i], get);\n        if (value === undefined)\n            continue;\n        if (value !== base)\n            return NaN;\n    }\n    return base;\n}\n//# sourceMappingURL=preagg-columns.js.map","import { Query as QueryBuilder, and, asNode, ceil, collectColumns, createTable, float64, floor, isBetween, int32, mul, round, scaleTransform, sub, isSelectQuery, isAggregateExpression, ColumnNameRefNode } from '@uwdata/mosaic-sql';\nimport { preaggColumns } from './preagg-columns.js';\nimport { fnv_hash } from '../util/hash.js';\nconst Skip = { skip: true, result: null };\n/**\n * Build and query optimized pre-aggregated materaialized views, for fast\n * computation of groupby aggregate queries over compatible client queries\n * and selections. The materialized views contains pre-aggregated data for a\n * Mosaic client, subdivided by possible query values from an active selection\n * clause. These materialized views are database tables that can be queried\n * for rapid updates.\n *\n * Compatible client queries must consist of only groupby dimensions and\n * supported aggregate functions. Compatible selections must contain an active\n * clause that exposes metadata for an interval or point value predicate.\n *\n * Materialized views are written to a dedicated schema (namespace) that\n * can be set using the *schema* constructor option. This schema acts as a\n * persistent cache, and materialized view tables may be used across sessions.\n * The `dropSchema` method issues a query to remove *all* tables within this\n * schema. This may be needed if the original tables have updated data, but\n * should be used with care.\n */\nexport class PreAggregator {\n    entries;\n    active;\n    mc;\n    _schema;\n    _enabled;\n    /**\n     * Create a new manager of materialized views of pre-aggregated data.\n     * @param coordinator A Mosaic coordinator.\n     * @param options Pre-aggregation options.\n     */\n    constructor(coordinator, { schema = 'mosaic', enabled = true } = {}) {\n        this.entries = new Map();\n        this.active = null;\n        this.mc = coordinator;\n        this._schema = schema;\n        this._enabled = enabled;\n    }\n    /**\n     * Set the enabled state of this manager. If false, any local state is\n     * cleared and subsequent request calls will return null until re-enabled.\n     * This method has no effect on any pre-aggregated tables already in the\n     * database.\n     * @param state The enabled state to set.\n     */\n    set enabled(state) {\n        if (this._enabled !== state) {\n            if (!state)\n                this.clear();\n            this._enabled = state;\n        }\n    }\n    /**\n     * Get the enabled state of this manager.\n     * @returns The current enabled state.\n     */\n    get enabled() {\n        return this._enabled;\n    }\n    /**\n     * Set the database schema used for pre-aggregated materialized view tables.\n     * Upon changes, any local state is cleared. This method does _not_ drop any\n     * existing materialized views, use `dropSchema` before changing the schema\n     * to also remove existing materalized views in the database.\n     * @param schema The schema name to set.\n     */\n    set schema(schema) {\n        if (this._schema !== schema) {\n            this.clear();\n            this._schema = schema;\n        }\n    }\n    /**\n     * Get the database schema used for pre-aggregated materialized view tables.\n     * @returns The current schema name.\n     */\n    get schema() {\n        return this._schema;\n    }\n    /**\n     * Issues a query through the coordinator to drop the current schema for\n     * pre-aggregated materialized views. *All* materialized view tables in the\n     * schema will be removed and local state is cleared. Call this method if\n     * the underlying base tables have been updated, causing materialized view\n     * to become stale and inaccurate. Use this method with care! Once dropped,\n     * the schema will be repopulated by future pre-aggregation requests.\n     * @returns A query result promise.\n     */\n    dropSchema() {\n        this.clear();\n        return this.mc.exec(`DROP SCHEMA IF EXISTS \"${this.schema}\" CASCADE`);\n    }\n    /**\n     * Clear the cache of pre-aggregation entries for the current active\n     * selection clause. This method does _not_ drop any existing materialized\n     * views. Use `dropSchema` to remove existing materialized view tables from\n     * the database.\n     */\n    clear() {\n        this.entries.clear();\n        this.active = null;\n    }\n    /**\n     * Return pre-aggregation information for the active state of a\n     * client-selection pair, or null if the client has unstable filters.\n     * This method has multiple possible side effects, including materialized\n     * view creation and updating internal caches.\n     * @param client A Mosaic client.\n     * @param selection A Mosaic selection to filter the client by.\n     * @param activeClause A representative active selection\n     *  clause for which to generate materialized views of pre-aggregates.\n     * @returns Information and query generator\n     * for pre-aggregated tables, or null if the client has unstable filters.\n     */\n    request(client, selection, activeClause) {\n        // if not enabled, do nothing\n        if (!this.enabled || activeClause == null)\n            return null;\n        const { entries, mc, schema } = this;\n        const { source } = activeClause;\n        // if there is no clause source to track, do nothing\n        if (!source)\n            return null;\n        // if we have cached active columns, check for updates or exit\n        if (this.active) {\n            // if the active clause source has changed, clear the state\n            // this cancels outstanding requests and clears the local cache\n            // a clear also sets this.active to null\n            if (this.active.source !== source)\n                this.clear();\n            // if we've seen this source and it has unstable filters, do nothing\n            if (this.active?.source === null)\n                return null;\n        }\n        // the current active columns cache value\n        let { active } = this;\n        // if cached active columns are unset, analyze the active clause\n        if (!active) {\n            // if active clause predicate is null, we can't analyze it\n            // return null to backoff to standard client query\n            // non-null clauses may come later, so don't set active state\n            if (activeClause.predicate == null)\n                return null;\n            // generate active dimension columns to select over\n            // will return an object with null source if it has unstable filters\n            this.active = active = activeColumns(activeClause);\n            // if the active clause has unstable filters, exit now\n            if (active.source === null)\n                return null;\n        }\n        // if we have cached pre-aggregate info, return that\n        if (entries.has(client)) {\n            return entries.get(client);\n        }\n        // get non-active materialized view columns\n        const preaggCols = preaggColumns(client);\n        let info;\n        if (!preaggCols) {\n            // if client is not indexable, record null info\n            info = null;\n        }\n        else if (selection.skip(client, activeClause)) {\n            // skip client if untouched by cross-filtering\n            info = Skip;\n        }\n        else {\n            // generate materialized view table\n            const filter = selection.remove(source).predicate(client);\n            info = preaggregateInfo(client.query(filter), active, preaggCols, schema);\n            info.result = mc.exec([\n                `CREATE SCHEMA IF NOT EXISTS ${schema}`,\n                createTable(info.table, info.create, { temp: false })\n            ]);\n            info.result.catch((e) => mc.logger().error(e));\n        }\n        entries.set(client, info);\n        return info;\n    }\n}\n/**\n * Determines the active dimension columns to select over. Returns an object\n * with the clause source, column definitions, and a predicate generator\n * function for the active dimensions of a pre-aggregated materialized view.\n * If the active clause is not indexable or is missing metadata, this method\n * returns an object with a null source property.\n * @param clause The active selection clause to analyze.\n */\nfunction activeColumns(clause) {\n    const { source, meta } = clause;\n    const clausePred = clause.predicate;\n    const clauseCols = collectColumns(clausePred).map(c => c.column);\n    let predicate;\n    let columns;\n    if (!meta || !clauseCols) {\n        return { source: null, columns, predicate };\n    }\n    switch (meta.type) {\n        case 'point':\n            predicate = x => x;\n            columns = Object.fromEntries(clauseCols.map(col => [`${col}`, asNode(col)]));\n            break;\n        case 'interval': {\n            const { scales, bin, pixelSize = 1 } = meta;\n            if (!scales)\n                break;\n            // determine pixel-level binning\n            const bins = scales.map((s) => binInterval(s, pixelSize, bin));\n            if (bins.some(b => !b)) {\n                // bail if a scale type is unsupported\n            }\n            else if (bins.length === 1) {\n                // selection clause predicate has type BetweenOpNode\n                // single interval selection\n                predicate = (p) => p\n                    ? isBetween('active0', p.extent?.map(bins[0]))\n                    : [];\n                columns = { active0: bins[0](clausePred.expr) };\n            }\n            else {\n                // selection clause predicate has type AndNode<BetweenOpNode>\n                // multiple interval selection\n                predicate = (p) => p\n                    ? and(p.clauses.map((c, i) => isBetween(`active${i}`, c.extent?.map(bins[i]))))\n                    : [];\n                columns = Object.fromEntries(clausePred.clauses.map((p, i) => [`active${i}`, bins[i](p.expr)]));\n            }\n        }\n    }\n    return { source: columns ? source : null, columns, predicate };\n}\nconst BIN = { ceil, round };\n/**\n * Returns a bin function generator to discretize a selection interval domain.\n * @param scale A scale that maps domain values to the output range\n *  (typically pixels).\n * @param pixelSize The interactive pixel size. This value indicates\n *  the bin step size and may be greater than an actual screen pixel.\n * @param bin The binning method to apply, one of `floor`, `ceil', or `round`.\n * @returns A bin function generator.\n */\nfunction binInterval(scale, pixelSize, bin) {\n    const { type, domain, range, apply, sqlApply } = scaleTransform(scale);\n    if (!apply)\n        return; // unsupported scale type\n    const binFn = BIN[`${bin}`.toLowerCase()] || floor;\n    const dom = domain.map(x => Number(x));\n    const lo = apply(Math.min(...dom));\n    const hi = apply(Math.max(...dom));\n    const s = (type === 'identity'\n        ? 1\n        : Math.abs(range[1] - range[0]) / (hi - lo)) / pixelSize;\n    const scalar = s === 1\n        ? (x) => x\n        : (x) => mul(float64(s), x);\n    const diff = lo === 0\n        ? (x) => x\n        : (x) => sub(x, float64(lo));\n    return value => int32(binFn(scalar(diff(sqlApply(value)))));\n}\n/**\n * Generate pre-aggregate query information.\n * @param clientQuery The original client query.\n * @param active Active (selected) columns.\n * @param preaggCols Pre-aggregation columns.\n * @param schema Database schema name.\n * @returns Pre-aggregation information.\n */\nfunction preaggregateInfo(clientQuery, active, preaggCols, schema) {\n    const { group, output, preagg } = preaggCols;\n    const { columns } = active;\n    // build materialized view construction query\n    const query = clientQuery\n        .setSelect({ ...preagg, ...columns })\n        .groupby(Object.keys(columns));\n    // ensure active clause columns are selected by subqueries\n    const [subq] = query.subqueries;\n    if (subq) {\n        const cols = Object.values(columns)\n            .flatMap(c => collectColumns(c).map(c => c.column));\n        subqueryPushdown(subq, cols);\n    }\n    // push any having or orderby criteria to output queries\n    const having = query._having;\n    const order = query._orderby;\n    query._having = [];\n    query._orderby = [];\n    // generate creation query string and hash id\n    const create = query.toString();\n    const id = (fnv_hash(create) >>> 0).toString(16);\n    const table = `${schema}.preagg_${id}`;\n    // generate preaggregate select query\n    const select = QueryBuilder\n        .select(group, output)\n        .from(table)\n        .groupby(group)\n        .having(having)\n        .orderby(order);\n    return new PreAggregateInfo({ table, create, active, select });\n}\n/**\n * Push column selections down to subqueries.\n * @param query The (sub)query to push down to.\n * @param cols The column names to push down.\n */\nfunction subqueryPushdown(query, cols) {\n    const memo = new Set();\n    const pushdown = (q) => {\n        // it is possible to have duplicate subqueries\n        // so we memoize and exit early if already seen\n        if (memo.has(q))\n            return;\n        memo.add(q);\n        if (isSelectQuery(q) && q._from.length) {\n            // select the pushed down columns\n            // note that the select method will deduplicate for us\n            q.select(cols);\n            if (isAggregateQuery(q)) {\n                // if an aggregation query, we need to push to groupby as well\n                // we also deduplicate as the column may already be present\n                const set = new Set(q._groupby.flatMap(x => x instanceof ColumnNameRefNode ? [x.name] : []));\n                q.groupby(cols.filter(c => !set.has(c)));\n            }\n        }\n        q.subqueries.forEach(pushdown);\n    };\n    pushdown(query);\n}\n/**\n * Test if a query performs aggregation.\n * @param query Select query to test.\n * @returns True if query performs aggregation.\n */\nfunction isAggregateQuery(query) {\n    return query._groupby.length > 0\n        || query._select.some(node => isAggregateExpression(node));\n}\n/**\n * Metadata and query generator for materialized views of pre-aggregated data.\n * This object provides the information needed to generate and query the\n * materialized views for a client-selection pair relative to a specific\n * active clause and selection state.\n */\nexport class PreAggregateInfo {\n    /** The name of the materialized view. */\n    table;\n    /** The SQL query used to generate the materialized view. */\n    create;\n    /** A result promise returned for the materialized view creation query. */\n    result;\n    /** Definitions and predicate function for the active columns,\n     * which are dynamically filtered by the active clause. */\n    active;\n    /** Select query (sans where clause) for materialized views. */\n    select;\n    /** Boolean flag indicating a client that should be skipped.\n     * This value is always false for a created materialized view. */\n    skip;\n    /**\n     * Create a new pre-aggregation information instance.\n     * @param options Options object.\n     */\n    constructor({ table, create, active, select }) {\n        this.table = table;\n        this.create = create;\n        this.result = null;\n        this.active = active;\n        this.select = select;\n        this.skip = false;\n    }\n    /**\n     * Generate a materialized view query for the given predicate.\n     * @param predicate The current active clause predicate.\n     * @returns A materialized view query.\n     */\n    query(predicate) {\n        return this.select.clone().where(this.active.predicate(predicate));\n    }\n}\n//# sourceMappingURL=PreAggregator.js.map","export function voidLogger() {\n    return {\n        debug() { },\n        info() { },\n        log() { },\n        warn() { },\n        error() { },\n        group() { },\n        groupCollapsed() { },\n        groupEnd() { }\n    };\n}\n//# sourceMappingURL=void-logger.js.map","export const QueryState = Object.freeze({\n    pending: Symbol('pending'),\n    ready: Symbol('ready'),\n    error: Symbol('error'),\n    done: Symbol('done')\n});\n/**\n * A query result Promise that can allows external callers\n * to resolve or reject the Promise.\n */\nexport class QueryResult extends Promise {\n    _resolve;\n    _reject;\n    _state;\n    _value;\n    /**\n     * Create a new query result Promise.\n     */\n    constructor() {\n        let resolve;\n        let reject;\n        super((r, e) => {\n            resolve = r;\n            reject = e;\n        });\n        this._resolve = resolve;\n        this._reject = reject;\n        this._state = QueryState.pending;\n        this._value = undefined;\n    }\n    /**\n     * Resolve the result Promise with a prepared value or the provided value.\n     * This method will only succeed if either a value is provided or the promise is ready.\n     * @param value The result value.\n     * @returns This QueryResult instance.\n     */\n    fulfill(value) {\n        if (this._value !== undefined) {\n            if (value !== undefined) {\n                throw Error('Promise is ready and fulfill has a provided value');\n            }\n            this._resolve(this._value);\n        }\n        else if (value === undefined) {\n            throw Error('Promise is neither ready nor has provided value');\n        }\n        else {\n            this._resolve(value);\n        }\n        this._state = QueryState.done;\n        return this;\n    }\n    /**\n     * Prepare to resolve with the provided value.\n     * @param value The result value.\n     * @returns This QueryResult instance.\n     */\n    ready(value) {\n        this._state = QueryState.ready;\n        this._value = value;\n        return this;\n    }\n    /**\n     * Rejects the result Promise with the provided error.\n     * @param error The error value.\n     * @returns This QueryResult instance.\n     */\n    reject(error) {\n        this._state = QueryState.error;\n        this._reject(error);\n        return this;\n    }\n    /**\n     * Returns the state of this query result.\n     * @returns The current state symbol.\n     */\n    get state() {\n        return this._state;\n    }\n}\n// necessary to make Promise subclass act like a Promise\nQueryResult.prototype.constructor = Promise;\n//# sourceMappingURL=query-result.js.map","import { isAggregateExpression, isColumnRef, isDescribeQuery, isSelectQuery } from '@uwdata/mosaic-sql';\nimport { QueryResult } from './util/query-result.js';\nfunction wait(callback) {\n    if (typeof requestAnimationFrame !== 'undefined') {\n        return requestAnimationFrame(callback);\n    }\n    else if (typeof setImmediate !== 'undefined') {\n        return setImmediate(callback);\n    }\n    else {\n        return setTimeout(callback);\n    }\n}\n/**\n * Create a consolidator to combine structurally compatible queries.\n * @param enqueue Query manager enqueue method\n * @param cache Client-side query cache (sql -> data)\n * @returns A consolidator object\n */\nexport function consolidator(enqueue, cache) {\n    let pending = [];\n    let id = 0;\n    function run() {\n        // group queries into bundles that can be consolidated\n        const groups = entryGroups(pending, cache);\n        pending = [];\n        id = 0;\n        // build and issue consolidated queries\n        for (const group of groups) {\n            consolidate(group, enqueue);\n            processResults(group, cache);\n        }\n    }\n    return {\n        add(entry, priority) {\n            if (entry.request.type === 'arrow') {\n                // wait one frame, gather an ordered list of queries\n                // only Apache Arrow is supported, so we can project efficiently\n                id ||= wait(() => run());\n                pending.push({ entry, priority, index: pending.length });\n            }\n            else {\n                enqueue(entry, priority);\n            }\n        }\n    };\n}\n/**\n * Segment query requests into consolidation-compatible groups.\n * @param entries Query request entries ({ request, result } objects)\n * @param cache Client-side query cache\n * @returns An array of grouped entry arrays\n */\nfunction entryGroups(entries, cache) {\n    const groups = [];\n    const groupMap = new Map();\n    for (const query of entries) {\n        const { entry: { request } } = query;\n        const key = consolidationKey(request.query, cache);\n        if (!groupMap.has(key)) {\n            const list = [];\n            groups.push(list);\n            groupMap.set(key, list);\n        }\n        groupMap.get(key).push(query);\n    }\n    return groups;\n}\n/**\n * Generate a key string for query consolidation.\n * Queries with matching keys are conosolidation-compatible.\n * If a query is found in the cache, it is exempted from consolidation,\n * which is indicated by returning the precise query SQL as the key.\n * @param query The input query.\n * @param cache The query cache (sql -> data).\n * @returns a key string\n */\nfunction consolidationKey(query, cache) {\n    const sql = `${query}`;\n    if (isSelectQuery(query) && !cache.get(sql)) {\n        if (query._where.length || query._qualify.length || query._having.length ||\n            query._orderby.length || query._distinct) {\n            // bail if query includes clauses that may refer to *derived* columns\n            // that we can't resolve. also do not consolidate distinct queries\n            return sql;\n        }\n        // create a derived query stripped of selections\n        const q = query.clone().setSelect('*');\n        // check group by criteria for compatibility\n        // queries may refer to *derived* columns as group by criteria\n        // we resolve these against the true grouping expressions\n        const groupby = query._groupby;\n        if (groupby.length) {\n            const map = {}; // expression map (alias -> expr)\n            query._select.forEach(({ alias, expr }) => map[alias] = expr);\n            q.setGroupby(groupby.map(e => (isColumnRef(e) && map[e.column]) || e));\n        }\n        else if (query._select.some(e => isAggregateExpression(e.expr))) {\n            // if query is an ungrouped aggregate, add an explicit groupby to\n            // prevent improper consolidation with non-aggregate queries\n            q.setGroupby('ALL');\n        }\n        // key is just the transformed query as SQL\n        return `${q}`;\n    }\n    else {\n        // can not analyze query, simply return as string\n        return sql;\n    }\n}\n/**\n * Issue queries, consolidating where possible.\n * @param group Array of bundled query entries\n * @param enqueue Add entry to query queue\n */\nfunction consolidate(group, enqueue) {\n    if (shouldConsolidate(group)) {\n        // issue a single consolidated query\n        enqueue({\n            request: {\n                type: 'arrow',\n                cache: false,\n                query: (group.query = consolidatedQuery(group))\n            },\n            result: (group.result = new QueryResult())\n        });\n    }\n    else {\n        // issue queries directly\n        for (const { entry, priority } of group) {\n            enqueue(entry, priority);\n        }\n    }\n}\n/**\n * Check if a group contains multiple distinct queries.\n * @param group Array of bundled query entries\n * @returns false if group contains a single (possibly repeated) query,\n *  otherwise true\n */\nfunction shouldConsolidate(group) {\n    if (group.length > 1) {\n        const sql = `${group[0].entry.request.query}`;\n        for (let i = 1; i < group.length; ++i) {\n            if (sql !== `${group[i].entry.request.query}`) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n/**\n * Create a consolidated query for a group.\n * @param group Array of bundled query entries\n * @returns A consolidated Query instance\n */\nfunction consolidatedQuery(group) {\n    const maps = group.maps = [];\n    const fields = new Map();\n    // gather select fields\n    for (const item of group) {\n        const query = item.entry.request.query;\n        const fieldMap = [];\n        maps.push(fieldMap);\n        for (const { alias, expr } of query._select) {\n            const e = `${expr}`;\n            if (!fields.has(e)) {\n                fields.set(e, [`col${fields.size}`, expr]);\n            }\n            const [name] = fields.get(e);\n            fieldMap.push([name, alias]);\n        }\n    }\n    // use a cloned query as a starting point\n    const query = group[0].entry.request.query.clone();\n    // update group by statement as needed\n    const groupby = query._groupby;\n    if (groupby.length) {\n        const map = {};\n        group.maps[0].forEach(([name, as]) => map[as] = name);\n        query.setGroupby(groupby.map((e) => (isColumnRef(e) && map[e.column]) || e));\n    }\n    // update select statement and return\n    return query.setSelect(Array.from(fields.values()));\n}\n/**\n * Process query results, dispatch results to original requests\n * @param group Array of query requests\n * @param cache Client-side query cache (sql -> data)\n */\nasync function processResults(group, cache) {\n    const { maps, query, result } = group;\n    // exit early if no consolidation performed\n    // in this case results are passed directly\n    if (!maps)\n        return;\n    // await consolidated query result, pass errors if needed\n    let data;\n    try {\n        data = await result;\n    }\n    catch (err) {\n        // pass error to consolidated queries\n        for (const { entry } of group) {\n            entry.result.reject(err);\n        }\n        return;\n    }\n    // extract result for each query in the consolidation group\n    // update cache and pass extract to original issuer\n    const describe = isDescribeQuery(query);\n    group.forEach(({ entry }, index) => {\n        const { request, result } = entry;\n        const map = maps[index];\n        const extract = describe && map ? filterResult(data, map)\n            : map ? projectResult(data, map)\n                : data;\n        if (request.cache) {\n            cache.set(String(request.query), extract);\n        }\n        result.fulfill(extract);\n    });\n}\n/**\n * Project a consolidated result to a client result\n * @param data Consolidated query result, as an Arrow Table\n * @param map Column name map as [source, target] pairs\n * @returns the projected Apache Arrow table\n */\nfunction projectResult(data, map) {\n    return data.select(map.map(x => x[0]), map.map(x => x[1]));\n}\n/**\n * Filter a consolidated describe query result to a client result\n * @param data Consolidated query result, as an Arrow Table\n * @param map Column name map as [source, target] pairs\n * @returns the filtered table data\n */\nfunction filterResult(data, map) {\n    const lookup = new Map(map);\n    const result = [];\n    for (const d of data) {\n        if (lookup.has(d.column_name)) {\n            result.push({ ...d, column_name: lookup.get(d.column_name) });\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=QueryConsolidator.js.map","const requestIdle = typeof requestIdleCallback !== 'undefined'\n    ? requestIdleCallback\n    : setTimeout;\n/**\n * Create a new cache that ignores all values.\n * @returns A void cache implementation.\n */\nexport function voidCache() {\n    return {\n        get: () => undefined,\n        set: (key, value) => value,\n        clear: () => { }\n    };\n}\n/**\n * Create a new cache that uses an LRU eviction policy.\n * @param options Cache options.\n * @param options.max Maximum number of cache entries.\n * @param options.ttl Time-to-live for cache entries.\n * @returns An LRU cache implementation.\n */\nexport function lruCache({ max = 1000, // max entries\nttl = 3 * 60 * 60 * 1000 // time-to-live, default 3 hours\n } = {}) {\n    let cache = new Map();\n    function evict() {\n        const expire = performance.now() - ttl;\n        let lruKey = null;\n        let lruLast = Infinity;\n        for (const [key, value] of cache) {\n            const { last } = value;\n            // least recently used entry seen so far\n            if (last < lruLast) {\n                lruKey = key;\n                lruLast = last;\n            }\n            // remove if time since last access exceeds ttl\n            if (expire > last) {\n                cache.delete(key);\n            }\n        }\n        // remove lru entry\n        if (lruKey) {\n            cache.delete(lruKey);\n        }\n    }\n    return {\n        get(key) {\n            const entry = cache.get(key);\n            if (entry) {\n                entry.last = performance.now();\n                return entry.value;\n            }\n        },\n        set(key, value) {\n            cache.set(key, { last: performance.now(), value });\n            if (cache.size > max)\n                requestIdle(evict);\n            return value;\n        },\n        clear() {\n            cache = new Map();\n        }\n    };\n}\n//# sourceMappingURL=cache.js.map","export class PriorityQueue {\n    queue;\n    /**\n     * Create a new priority queue instance.\n     * @param ranks An integer number of rank-order priority levels.\n     */\n    constructor(ranks) {\n        // one list for each integer priority level\n        this.queue = Array.from({ length: ranks }, () => ({ head: null, tail: null }));\n    }\n    /**\n     * Indicate if the queue is empty.\n     * @returns true if empty, false otherwise.\n     */\n    isEmpty() {\n        return this.queue.every(list => !list.head);\n    }\n    /**\n     * Insert an item into the queue with a given priority rank.\n     * @param item The item to add.\n     * @param rank The integer priority rank.\n     * Priority ranks are integers starting at zero.\n     * Lower ranks indicate higher priority.\n     */\n    insert(item, rank) {\n        const list = this.queue[rank];\n        if (!list) {\n            throw new Error(`Invalid queue priority rank: ${rank}`);\n        }\n        const node = { item, next: null };\n        if (list.head === null) {\n            list.head = list.tail = node;\n        }\n        else {\n            list.tail = list.tail.next = node;\n        }\n    }\n    /**\n     * Remove a set of items from the queue, regardless of priority rank.\n     * If a provided item is not in the queue it will be ignored.\n     * @param test A predicate function to test\n     * if an item should be removed (true to drop, false to keep).\n     */\n    remove(test) {\n        for (const list of this.queue) {\n            let { head, tail } = list;\n            for (let prev = null, curr = head; curr; prev = curr, curr = curr.next) {\n                if (test(curr.item)) {\n                    if (curr === head) {\n                        head = curr.next;\n                    }\n                    else {\n                        prev.next = curr.next;\n                    }\n                    if (curr === tail)\n                        tail = prev || head;\n                }\n            }\n            list.head = head;\n            list.tail = tail;\n        }\n    }\n    /**\n     * Remove and return the next highest priority item.\n     * @returns The next item in the queue,\n     * or undefined if this queue is empty.\n     */\n    next() {\n        for (const list of this.queue) {\n            const { head } = list;\n            if (head !== null) {\n                list.head = head.next;\n                if (list.tail === head) {\n                    list.tail = null;\n                }\n                return head.item;\n            }\n        }\n    }\n}\n//# sourceMappingURL=priority-queue.js.map","import { consolidator } from './QueryConsolidator.js';\nimport { lruCache, voidCache } from './util/cache.js';\nimport { PriorityQueue } from './util/priority-queue.js';\nimport { QueryResult, QueryState } from './util/query-result.js';\nimport { voidLogger } from './util/void-logger.js';\nexport const Priority = Object.freeze({ High: 0, Normal: 1, Low: 2 });\nexport class QueryManager {\n    queue;\n    db;\n    clientCache;\n    _logger;\n    _logQueries;\n    _consolidate;\n    /** Requests pending with the query manager. */\n    pendingResults;\n    maxConcurrentRequests;\n    pendingExec;\n    constructor(maxConcurrentRequests = 32) {\n        this.queue = new PriorityQueue(3);\n        this.db = null;\n        this.clientCache = null;\n        this._logger = voidLogger();\n        this._logQueries = false;\n        this._consolidate = null;\n        this.pendingResults = [];\n        this.maxConcurrentRequests = maxConcurrentRequests;\n        this.pendingExec = false;\n    }\n    next() {\n        if (this.queue.isEmpty() || this.pendingResults.length > this.maxConcurrentRequests || this.pendingExec) {\n            return;\n        }\n        const entry = this.queue.next();\n        if (!entry)\n            return;\n        const { request, result } = entry;\n        this.pendingResults.push(result);\n        if (request.type === 'exec')\n            this.pendingExec = true;\n        this.submit(request, result).finally(() => {\n            // return from the queue all requests that are ready\n            while (this.pendingResults.length && this.pendingResults[0].state !== QueryState.pending) {\n                const result = this.pendingResults.shift();\n                if (result.state === QueryState.ready) {\n                    result.fulfill();\n                }\n                else if (result.state === QueryState.done) {\n                    this._logger.warn('Found resolved query in pending results.');\n                }\n            }\n            if (request.type === 'exec')\n                this.pendingExec = false;\n            this.next();\n        });\n    }\n    /**\n     * Add an entry to the query queue with a priority.\n     * @param entry The entry to add.\n     * @param priority The query priority, defaults to `Priority.Normal`.\n     */\n    enqueue(entry, priority = Priority.Normal) {\n        this.queue.insert(entry, priority);\n        this.next();\n    }\n    /**\n     * Submit the query to the connector.\n     * @param request The request.\n     * @param result The query result.\n     */\n    async submit(request, result) {\n        try {\n            const { query, type, cache = false, options } = request;\n            const sql = query ? `${query}` : null;\n            // check query cache\n            if (cache) {\n                const cached = this.clientCache.get(sql);\n                if (cached) {\n                    const data = await cached;\n                    this._logger.debug('Cache');\n                    result.ready(data);\n                    return;\n                }\n            }\n            // issue query, potentially cache result\n            const t0 = performance.now();\n            if (this._logQueries) {\n                this._logger.debug('Query', { type, sql, ...options });\n            }\n            // @ts-expect-error type may be exec | json | arrow\n            const promise = this.db.query({ type, sql: sql, ...options });\n            if (cache)\n                this.clientCache.set(sql, promise);\n            const data = await promise;\n            if (cache)\n                this.clientCache.set(sql, data);\n            this._logger.debug(`Request: ${(performance.now() - t0).toFixed(1)}`);\n            result.ready(type === 'exec' ? null : data);\n        }\n        catch (err) {\n            result.reject(err);\n        }\n    }\n    cache(value) {\n        return value !== undefined\n            ? (this.clientCache = value === true ? lruCache() : (value || voidCache()))\n            : this.clientCache;\n    }\n    logger(value) {\n        return value ? (this._logger = value) : this._logger;\n    }\n    logQueries(value) {\n        return value !== undefined ? this._logQueries = !!value : this._logQueries;\n    }\n    connector(connector) {\n        return connector ? (this.db = connector) : this.db;\n    }\n    /**\n     * Indicate if query consolidation should be performed.\n     * @param flag Whether to enable consolidation\n     */\n    consolidate(flag) {\n        if (flag && !this._consolidate) {\n            this._consolidate = consolidator(this.enqueue.bind(this), this.clientCache);\n        }\n        else if (!flag && this._consolidate) {\n            this._consolidate = null;\n        }\n    }\n    /**\n     * Request a query result.\n     * @param request The request.\n     * @param priority The query priority, defaults to `Priority.Normal`.\n     * @returns A query result promise.\n     */\n    request(request, priority = Priority.Normal) {\n        const result = new QueryResult();\n        const entry = { request, result };\n        if (this._consolidate) {\n            this._consolidate.add(entry, priority);\n        }\n        else {\n            this.enqueue(entry, priority);\n        }\n        return result;\n    }\n    cancel(requests) {\n        const set = new Set(requests);\n        if (set.size) {\n            this.queue.remove(({ result }) => {\n                if (set.has(result)) {\n                    result.reject('Canceled');\n                    return true;\n                }\n                return false;\n            });\n            for (const result of this.pendingResults) {\n                if (set.has(result)) {\n                    result.reject('Canceled');\n                }\n            }\n        }\n    }\n    clear() {\n        this.queue.remove(({ result }) => {\n            result.reject('Cleared');\n            return true;\n        });\n        for (const result of this.pendingResults) {\n            result.reject('Cleared');\n        }\n        this.pendingResults = [];\n    }\n}\n//# sourceMappingURL=QueryManager.js.map","import { SocketConnector } from './connectors/socket.js';\nimport { PreAggregator } from './preagg/PreAggregator.js';\nimport { voidLogger } from './util/void-logger.js';\nimport { QueryManager, Priority } from './QueryManager.js';\n/**\n * The singleton Coordinator instance.\n */\nlet _instance;\n/**\n * Set or retrieve the coordinator instance.\n * @param instance The coordinator instance to set\n * @returns The coordinator instance\n */\nexport function coordinator(instance) {\n    if (instance) {\n        _instance = instance;\n    }\n    else if (_instance == null) {\n        _instance = new Coordinator();\n    }\n    return _instance;\n}\n/**\n * A Mosaic Coordinator manages all database communication for clients and\n * handles selection updates. The Coordinator also performs optimizations\n * including query caching, consolidation, and pre-aggregation.\n */\nexport class Coordinator {\n    manager;\n    preaggregator;\n    clients = new Set;\n    filterGroups = new Map;\n    _logger = voidLogger();\n    /**\n     * @param db Database connector. Defaults to a web socket connection.\n     * @param options Coordinator options.\n     * @param options.logger The logger to use, defaults to `console`.\n     * @param options.manager The query manager to use.\n     * @param options.cache Boolean flag to enable/disable query caching.\n     * @param options.consolidate Boolean flag to enable/disable query consolidation.\n     * @param options.preagg Options for the Pre-aggregator.\n     */\n    constructor(db = new SocketConnector(), options = {}) {\n        const { logger = console, manager = new QueryManager(), cache = true, consolidate = true, preagg = {} } = options;\n        this.manager = manager;\n        this.manager.cache(cache);\n        this.manager.consolidate(consolidate);\n        this.databaseConnector(db);\n        this.logger(logger);\n        this.clear();\n        this.preaggregator = new PreAggregator(this, preagg);\n    }\n    /**\n     * Clear the coordinator state.\n     * @param options Options object.\n     * @param options.clients If true, disconnect all clients.\n     * @param options.cache If true, clear the query cache.\n     */\n    clear(options = {}) {\n        const { clients = true, cache = true } = options;\n        this.manager.clear();\n        if (clients) {\n            this.filterGroups?.forEach(group => group.disconnect());\n            this.filterGroups = new Map;\n            this.clients?.forEach(client => this.disconnect(client));\n            this.clients = new Set;\n        }\n        if (cache)\n            this.manager.cache().clear();\n    }\n    databaseConnector(db) {\n        return db\n            ? this.manager.connector(db)\n            : this.manager.connector();\n    }\n    /**\n     * Get or set the logger.\n     * @param logger The logger to use.\n     * @returns The current logger\n     */\n    logger(logger) {\n        if (arguments.length) {\n            this._logger = logger || voidLogger();\n            this.manager.logger(this._logger);\n        }\n        return this._logger;\n    }\n    // -- Query Management ----\n    /**\n     * Cancel previously submitted query requests. These queries will be\n     * canceled if they are queued but have not yet been submitted.\n     * @param requests An array of query result objects, such as those returned by the `query` method.\n     */\n    cancel(requests) {\n        this.manager.cancel(requests);\n    }\n    /**\n     * Issue a query for which no result (return value) is needed.\n     * @param query The query or an array of queries. Each query should be either a Query builder object or a SQL string.\n     * @param options An options object.\n     * @param options.priority The query priority, defaults to `Priority.Normal`.\n     * @returns A query result promise.\n     */\n    exec(query, options = {}) {\n        const { priority = Priority.Normal } = options;\n        query = Array.isArray(query) ? query.filter(x => x).join(';\\n') : query;\n        return this.manager.request({ type: 'exec', query }, priority);\n    }\n    query(query, options = {}) {\n        const { type = 'arrow', cache = true, priority = Priority.Normal, ...otherOptions } = options;\n        return this.manager.request({ type, query, cache, options: otherOptions }, priority);\n    }\n    prefetch(query, options = {}) {\n        return this.query(query, { ...options, cache: true, priority: Priority.Low });\n    }\n    // -- Client Management ----\n    /**\n     * Update client data by submitting the given query and returning the()\n     * data (or error) to the client.\n     * @param client A Mosaic client.\n     * @param query The data query.\n     * @param priority The query priority.\n     * @returns A Promise that resolves upon completion of the update.\n     */\n    updateClient(client, query, priority = Priority.Normal) {\n        client.queryPending();\n        return client._pending = this.query(query, { priority })\n            .then(data => client.queryResult(data).update(), err => { this._logger?.error(err); client.queryError(err); })\n            .catch(err => this._logger?.error(err));\n    }\n    /**\n     * Issue a query request for a client. If the query is null or undefined,\n     * the client is simply updated. Otherwise `updateClient` is called. As a\n     * side effect, this method clears the current preaggregator state.\n     * @param client The client to update.\n     * @param query The query to issue.\n     */\n    requestQuery(client, query) {\n        this.preaggregator.clear();\n        return query\n            ? this.updateClient(client, query)\n            : Promise.resolve(client.update());\n    }\n    /**\n     * Connect a client to the coordinator.\n     * Throws an error if the client is already connected.\n     * @param client The Mosaic client to connect.\n     */\n    connect(client) {\n        const { clients } = this;\n        if (clients?.has(client)) {\n            throw new Error('Client already connected.');\n        }\n        // add client to client set\n        clients?.add(client);\n        // register coordinator on client instance\n        client.coordinator = this;\n        // initialize client lifecycle\n        client.initialize();\n        // connect filter selection\n        connectSelection(this, client.filterBy, client);\n    }\n    /**\n     * Disconnect a client from the coordinator.\n     * This method has no effect if the client is already disconnected.\n     * @param client The Mosaic client to disconnect.\n     */\n    disconnect(client) {\n        const { clients, filterGroups } = this;\n        if (!clients?.has(client))\n            return;\n        clients.delete(client);\n        client.coordinator = null;\n        const group = filterGroups?.get(client.filterBy);\n        if (group) {\n            group.clients.delete(client);\n        }\n    }\n}\n/**\n * Connect a selection-client pair to the coordinator to process updates.\n * @param mc The Mosaic coordinator.\n * @param selection A selection.\n * @param client A Mosaic client that is filtered by the given selection.\n */\nfunction connectSelection(mc, selection, client) {\n    if (!selection)\n        return;\n    let entry = mc.filterGroups?.get(selection);\n    if (!entry) {\n        const activate = (clause) => activateSelection(mc, selection, clause);\n        const value = () => updateSelection(mc, selection);\n        // @ts-expect-error todo: update selection dispatch types\n        selection.addEventListener('activate', activate);\n        selection.addEventListener('value', value);\n        entry = {\n            selection,\n            clients: new Set,\n            disconnect() {\n                // @ts-expect-error todo: update selection dispatch types\n                selection.removeEventListener('activate', activate);\n                selection.removeEventListener('value', value);\n            }\n        };\n        mc.filterGroups?.set(selection, entry);\n    }\n    entry.clients.add(client);\n}\n/**\n * Activate a selection, providing a clause indicative of potential\n * next updates. Activation provides a preview of likely next events,\n * enabling potential precomputation to optimize updates.\n * @param mc The Mosaic coordinator.\n * @param selection A selection.\n * @param clause A selection clause for the activation.\n */\nfunction activateSelection(mc, selection, clause) {\n    const { preaggregator, filterGroups } = mc;\n    const { clients } = filterGroups.get(selection);\n    for (const client of clients) {\n        if (client.enabled) {\n            preaggregator.request(client, selection, clause);\n        }\n    }\n}\n/**\n * Process an updated selection value, querying filtered data for any\n * associated clients.\n * @param mc The Mosaic coordinator.\n * @param selection A selection.\n * @returns A Promise that resolves when the update completes.\n */\nfunction updateSelection(mc, selection) {\n    const { preaggregator, filterGroups } = mc;\n    const { clients } = filterGroups.get(selection);\n    const { active } = selection;\n    return Promise.allSettled(Array.from(clients, (client) => {\n        if (!client.enabled)\n            return client.requestQuery();\n        const info = preaggregator.request(client, selection, active);\n        const filter = info ? null : selection.predicate(client);\n        // skip due to cross-filtering\n        if (info?.skip || (!info && !filter))\n            return;\n        // @ts-expect-error FIXME\n        const query = info?.query(active.predicate) ?? client.query(filter);\n        return mc.updateClient(client, query);\n    }));\n}\n//# sourceMappingURL=Coordinator.js.map","import { MosaicClient } from './MosaicClient.js';\nimport { coordinator as defaultCoordinator } from './Coordinator.js';\n/**\n * Make a new client with the given options, and connect the client to the\n * provided coordinator.\n * @param options The options for making the client.\n * @returns The resulting client.\n */\nexport function makeClient(options) {\n    const { coordinator = defaultCoordinator(), ...clientOptions } = options;\n    const client = new ProxyClient(clientOptions);\n    coordinator.connect(client);\n    return client;\n}\n/**\n * An internal class used to implement the makeClient API.\n */\nclass ProxyClient extends MosaicClient {\n    _methods;\n    _filterStable;\n    /**\n     * @param options The options for making the client.\n     */\n    constructor({ selection = undefined, enabled = true, filterStable = true, ...methods }) {\n        super(selection);\n        this.enabled = enabled;\n        this._methods = methods;\n        this._filterStable = filterStable;\n    }\n    get filterStable() {\n        return this._filterStable;\n    }\n    async prepare() {\n        await this._methods.prepare?.();\n    }\n    query(filter) {\n        return this._methods.query?.(filter) ?? null;\n    }\n    queryResult(data) {\n        this._methods.queryResult?.(data);\n        return this;\n    }\n    queryPending() {\n        this._methods.queryPending?.();\n        return this;\n    }\n    queryError(error) {\n        this._methods.queryError?.(error);\n        return this;\n    }\n}\n//# sourceMappingURL=make-client.js.map","/**\n * Event dispatcher supporting asynchronous updates. If an event handler\n * callback returns a Promise, the dispatcher waits for all such Promises\n * to settle before dispatching future events of the same type.\n */\nexport class AsyncDispatch {\n    _callbacks;\n    /**\n     * Create a new asynchronous dispatcher instance.\n     */\n    constructor() {\n        this._callbacks = new Map();\n    }\n    /**\n     * Add an event listener callback for the provided event type.\n     * @param type The event type.\n     * @param callback The event handler\n     *  callback function to add. If the callback has already been\n     *  added for the event type, this method has no effect.\n     */\n    addEventListener(type, callback) {\n        if (!this._callbacks.has(type)) {\n            this._callbacks.set(type, {\n                callbacks: new Set(),\n                pending: null,\n                queue: new DispatchQueue()\n            });\n        }\n        const entry = this._callbacks.get(type);\n        entry.callbacks.add(callback);\n    }\n    /**\n     * Remove an event listener callback for the provided event type.\n     * @param type The event type.\n     * @param callback The event handler\n     *  callback function to remove.\n     */\n    removeEventListener(type, callback) {\n        const entry = this._callbacks.get(type);\n        if (entry) {\n            entry.callbacks.delete(callback);\n        }\n    }\n    /**\n     * Lifecycle method that returns the event value to emit.\n     * This default implementation simply returns the input value as-is.\n     * Subclasses may override this method to implement custom transformations\n     * prior to emitting an event value to all listeners.\n     * @param type The event type.\n     * @param value The event value.\n     * @returns The (possibly transformed) event value to emit.\n     */\n    willEmit(type, value) {\n        return value;\n    }\n    /**\n     * Lifecycle method that returns a filter function for updating the\n     * queue of unemitted event values prior to enqueueing a new value.\n     * This default implementation simply returns null, indicating that\n     * unknown other unemitted event values should be dropped (that is, all\n     * queued events are filtered).\n     * @param type The event type.\n     * @param value The new event value that will be enqueued.\n     * @returns A dispatch queue filter\n     *  function, or null if all unemitted event values should be filtered.\n     */\n    emitQueueFilter(_type, // eslint-disable-line @typescript-eslint/no-unused-vars\n    _value // eslint-disable-line @typescript-eslint/no-unused-vars\n    ) {\n        // removes all pending items\n        return null;\n    }\n    /**\n     * Cancel all unemitted event values for the given event type.\n     * @param type The event type.\n     */\n    cancel(type) {\n        const entry = this._callbacks.get(type);\n        entry?.queue.clear();\n    }\n    /**\n     * Returns a promise that resolves when unknown pending updates complete for\n     * the event of the given type currently being processed. The Promise will\n     * resolve immediately if the queue for the given event type is empty.\n     * @param type The event type to wait for.\n     * @returns A pending event promise.\n     */\n    async pending(type) {\n        await this._callbacks.get(type)?.pending;\n    }\n    /**\n     * Emit an event value to listeners for the given event type.\n     * If a previous emit has not yet resolved, the event value\n     * will be queued to be emitted later.\n     * The actual event value given to listeners will be the result\n     * of passing the input value through the emitValue() method.\n     * @param type The event type.\n     * @param value The event value.\n     */\n    emit(type, value) {\n        const entry = this._callbacks.get(type) || {};\n        if (entry.pending) {\n            // an earlier emit is still processing\n            // enqueue the current update, possibly filtering other pending updates\n            entry.queue.enqueue(value, this.emitQueueFilter(type, value));\n        }\n        else {\n            const event = this.willEmit(type, value);\n            const { callbacks, queue } = entry;\n            if (callbacks?.size) {\n                // broadcast update to callbacks, which may return promises\n                // wait until promises resolve, then process pending updates\n                const callbackValues = Array.from(callbacks, cb => cb(event));\n                entry.pending = Promise.allSettled(callbackValues).then(() => {\n                    entry.pending = null;\n                    if (!queue.isEmpty()) {\n                        this.emit(type, queue.dequeue());\n                    }\n                });\n            }\n        }\n    }\n}\n/**\n * Queue for managing unemitted event values.\n */\nexport class DispatchQueue {\n    next = null;\n    /**\n     * Create a new dispatch queue instance.\n     */\n    constructor() {\n        this.clear();\n    }\n    /**\n     * Clear the queue state of all event values.\n     */\n    clear() {\n        this.next = null;\n    }\n    /**\n     * Indicate if the queue is empty.\n     * @returns True if queue is empty, false otherwise.\n     */\n    isEmpty() {\n        return !this.next;\n    }\n    /**\n     * Add a new value to the queue, and optionally filter the\n     * current queue content in response.\n     * @param value The value to add.\n     * @param filter An optional filter\n     *  function to apply to existing queue content. If unspecified\n     *  or falsy, all previously queued values are removed. Otherwise,\n     *  the provided function is applied to all queue entries. The\n     *  entry is retained if the filter function returns a truthy value,\n     *  otherwise the entry is removed.\n     */\n    enqueue(value, filter) {\n        const tail = { value };\n        if (filter && this.next) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            let curr = this;\n            while (curr.next) {\n                if (filter(curr.next.value)) {\n                    curr = curr.next;\n                }\n                else {\n                    curr.next = curr.next.next;\n                }\n            }\n            curr.next = tail;\n        }\n        else {\n            this.next = tail;\n        }\n    }\n    /**\n     * Remove and return the next queued event value.\n     * @returns The next event value in the queue.\n     */\n    dequeue() {\n        const { next } = this;\n        this.next = next?.next || null;\n        return next?.value;\n    }\n}\n//# sourceMappingURL=AsyncDispatch.js.map","export function distinct(a, b) {\n    return a === b ? false\n        : a instanceof Date && b instanceof Date ? +a !== +b\n            : Array.isArray(a) && Array.isArray(b) ? distinctArray(a, b)\n                : true;\n}\nexport function distinctArray(a, b) {\n    if (a.length !== b.length)\n        return true;\n    for (let i = 0; i < a.length; ++i) {\n        if (a[i] !== b[i])\n            return true;\n    }\n    return false;\n}\n//# sourceMappingURL=distinct.js.map","import { AsyncDispatch } from './util/AsyncDispatch.js';\nimport { distinct } from './util/distinct.js';\n/**\n * Test if a value is a Param instance.\n * @param x The value to test.\n * @returns True if the input is a Param, false otherwise.\n */\nexport function isParam(x) {\n    return x instanceof Param;\n}\n/**\n * Represents a dynamic parameter that dispatches updates\n * upon parameter changes.\n */\nexport class Param extends AsyncDispatch {\n    _value;\n    /**\n     * Create a new Param instance.\n     * @param value The initial value of the Param.\n     */\n    constructor(value) {\n        super();\n        this._value = value;\n    }\n    /**\n     * Create a new Param instance with the given initial value.\n     * @param value The initial value of the Param.\n     * @returns The new Param instance.\n     */\n    static value(value) {\n        return new Param(value);\n    }\n    /**\n     * Create a new Param instance over an array of initial values,\n     * which may contain nested Params.\n     * @param values The initial values of the Param.\n     * @returns The new Param instance.\n     */\n    static array(values) {\n        if (values.some(v => isParam(v))) {\n            const p = new Param();\n            const update = () => {\n                p.update(values.map(v => isParam(v) ? v.value : v));\n            };\n            update();\n            values.forEach(v => isParam(v) ? v.addEventListener('value', update) : 0);\n            return p;\n        }\n        return new Param(values);\n    }\n    /**\n     * The current value of the Param.\n     */\n    get value() {\n        return this._value;\n    }\n    /**\n     * Update the Param value\n     * @param value The new value of the Param.\n     * @param options The update options.\n     * @param options.force A boolean flag indicating if the Param\n     *  should emit a 'value' event even if the internal value is unchanged.\n     * @returns This Param instance.\n     */\n    update(value, { force } = {}) {\n        const shouldEmit = distinct(this._value, value) || force;\n        if (shouldEmit) {\n            this.emit('value', value);\n        }\n        else {\n            this.cancel('value');\n        }\n        return this;\n    }\n    /**\n     * Upon value-typed updates, sets the current value to the input value\n     * immediately prior to the event value being emitted to listeners.\n     * @param type The event type.\n     * @param value The input event value.\n     * @returns The input event value.\n     */\n    willEmit(type, value) {\n        if (type === 'value') {\n            this._value = value;\n        }\n        return value;\n    }\n}\n//# sourceMappingURL=Param.js.map","import { literal, or } from '@uwdata/mosaic-sql';\nimport { Param } from './Param.js';\n/**\n * Test if a value is a Selection instance.\n * @param x The value to test.\n * @returns True if the input is a Selection, false otherwise.\n */\nexport function isSelection(x) {\n    return x instanceof Selection;\n}\nfunction create(options, include) {\n    return new Selection(new SelectionResolver(options), include ? [include].flat() : undefined);\n}\n/**\n * Represents a dynamic set of query filter predicates.\n */\nexport class Selection extends Param {\n    _resolved;\n    _resolver;\n    _relay;\n    /**\n     * Create a new Selection instance with an\n     * intersect (conjunction) resolution strategy.\n     * @param options The selection options.\n     * @returns The new Selection instance.\n     */\n    static intersect({ cross = false, empty = false, include = [] } = {}) {\n        return create({ cross, empty }, include);\n    }\n    /**\n     * Create a new Selection instance with a\n     * union (disjunction) resolution strategy.\n     * @param options The selection options.\n     * @returns The new Selection instance.\n     */\n    static union({ cross = false, empty = false, include = [] } = {}) {\n        return create({ cross, empty, union: true }, include);\n    }\n    /**\n     * Create a new Selection instance with a singular resolution strategy\n     * that keeps only the most recent selection clause.\n     * @param options The selection options.\n     * @returns The new Selection instance.\n     */\n    static single({ cross = false, empty = false, include = [] } = {}) {\n        return create({ cross, empty, single: true }, include);\n    }\n    /**\n     * Create a new Selection instance with a\n     * cross-filtered intersect resolution strategy.\n     * @param options The selection options.\n     * @returns The new Selection instance.\n     */\n    static crossfilter({ empty = false, include = [] } = {}) {\n        return create({ cross: true, empty }, include);\n    }\n    /**\n     * Create a new Selection instance.\n     * @param resolver The selection resolution\n     *  strategy to apply.\n     * @param include Upstream selections whose clauses\n     * should be included as part of this selection. Any clauses published\n     * to these upstream selections will be relayed to this selection.\n     */\n    constructor(resolver = new SelectionResolver(), include = []) {\n        super([]);\n        this._resolved = this._value;\n        this._resolver = resolver;\n        this._relay = new Set();\n        if (Array.isArray(include)) {\n            for (const sel of include) {\n                sel._relay.add(this);\n            }\n        }\n    }\n    /**\n     * Create a cloned copy of this Selection instance.\n     * @returns A clone of this selection.\n     */\n    clone() {\n        const s = new Selection(this._resolver);\n        s._value = s._resolved = this._value;\n        return s;\n    }\n    /**\n     * Create a clone of this Selection with clauses corresponding\n     * to the provided source removed.\n     * @param source The clause source to remove.\n     * @returns A cloned and updated Selection.\n     */\n    remove(source) {\n        const s = this.clone();\n        s._value = s._resolved = s._resolver.resolve(this._resolved, { source });\n        s._value.active = { source };\n        return s;\n    }\n    /**\n     * The selection clause resolver.\n     */\n    get resolver() {\n        return this._resolver;\n    }\n    /**\n     * Indicate if this selection has a single resolution strategy.\n     */\n    get single() {\n        return this._resolver.single;\n    }\n    /**\n     * The current array of selection clauses.\n     */\n    get clauses() {\n        return super.value;\n    }\n    /**\n     * The current active (most recently updated) selection clause.\n     */\n    get active() {\n        return this.clauses.active;\n    }\n    /**\n     * The value corresponding to the current active selection clause.\n     * This method ensures compatibility where a normal Param is expected.\n     */\n    // @ts-expect-error return type differs from Param parent class\n    get value() {\n        return this.active?.value;\n    }\n    /**\n     * The value corresponding to a given source. Returns undefined if\n     * this selection does not include a clause from this source.\n     * @param source The clause source to look up the value for.\n     */\n    valueFor(source) {\n        return this.clauses.find(c => c.source === source)?.value;\n    }\n    /**\n     * Emit an activate event with the given selection clause.\n     * @param clause The clause representing the potential activation.\n     */\n    activate(clause) {\n        // @ts-expect-error selection operates differently than scalar param\n        this.emit('activate', clause);\n        this._relay.forEach(sel => sel.activate(clause));\n    }\n    /**\n     * Update the selection with a new selection clause.\n     * @param clause The selection clause to add.\n     * @returns This Selection instance.\n     */\n    // @ts-expect-error selection and param use differing value types\n    update(clause) {\n        // we maintain an up-to-date list of all resolved clauses\n        // this ensures consistent clause state across unemitted event values\n        this._resolved = this._resolver.resolve(this._resolved, clause, true);\n        this._resolved.active = clause;\n        this._relay.forEach(sel => sel.update(clause));\n        return super.update(this._resolved);\n    }\n    /**\n     * Reset the selection state by removing all provided clauses. If no clause\n     * array is provided as an argument, all current clauses are removed. The\n     * reset method (if defined) is invoked on all corresponding clause sources.\n     * The reset is relayed to downstream selections that include this selection.\n     * @param clauses The clauses to remove. If unspecified, all current clauses are removed.\n     * @returns This selection instance.\n     */\n    reset(clauses) {\n        clauses ??= this._resolved;\n        clauses.forEach(c => c.source?.reset?.());\n        this._resolved = this._resolved.filter(c => clauses.includes(c));\n        this._relay.forEach(sel => sel.reset(clauses));\n        return super.update(this._resolved = []);\n    }\n    /**\n     * Upon value-typed updates, sets the current clause list to the\n     * input value and returns the active clause value.\n     * @param type The event type.\n     * @param value The input event value.\n     * @returns For value-typed events, returns the active clause\n     *  values. Otherwise returns the input event value as-is.\n     */\n    // @ts-expect-error selection and param use differing value types\n    willEmit(type, value) {\n        if (type === 'value') {\n            this._value = value;\n            return this.value;\n        }\n        return value;\n    }\n    /**\n     * Upon value-typed updates, returns a dispatch queue filter function.\n     * The return value depends on the selection resolution strategy.\n     * @param type The event type.\n     * @param value The new event value that will be enqueued.\n     * @returns A dispatch queue filter function. For non-value events,\n     *  returns a function that always returns null (no filtering).\n     */\n    // @ts-expect-error selection and param use differing value types\n    emitQueueFilter(type, value) {\n        return type === 'value'\n            ? this._resolver.queueFilter(value)\n            : null;\n    }\n    /**\n     * Indicates if a selection clause should not be applied to a given client.\n     * The return value depends on the selection resolution strategy.\n     * @param client The client to test. If null or undefined, return false.\n     * @param clause The selection clause.\n     * @returns True if the client should be skipped, false otherwise.\n     */\n    skip(client, clause) {\n        return this._resolver.skip(client, clause);\n    }\n    /**\n     * Return a selection query predicate for the given client.\n     * @param client The client whose data may be filtered. If null or undefined, return a predicate with all clauses.\n     * @param noSkip Disable skipping of active\n     *  cross-filtered sources. If set true, the source of the active\n     *  clause in a cross-filtered selection will not be skipped.\n     * @returns The query predicate for filtering client data,\n     *  based on the current state of this selection.\n     */\n    predicate(client = undefined, noSkip = false) {\n        const { clauses } = this;\n        const active = noSkip ? null : clauses.active;\n        return this._resolver.predicate(clauses, active, client);\n    }\n}\n/**\n * Implements selection clause resolution strategies.\n */\nexport class SelectionResolver {\n    union;\n    cross;\n    single;\n    empty;\n    /**\n     * Create a new selection resolved instance.\n     * @param options The resolution strategy options.\n     * @param options.union Boolean flag to indicate a union strategy.\n     *  If false, an intersection strategy is used.\n     * @param options.cross Boolean flag to indicate cross-filtering.\n     * @param options.single Boolean flag to indicate single clauses only.\n     * @param options.empty Boolean flag indicating if a lack\n     *  of clauses should correspond to an empty selection with no records. This\n     *  setting determines the default selection state.\n     */\n    constructor({ union, cross, single, empty } = {}) {\n        this.union = !!union;\n        this.cross = !!cross;\n        this.single = !!single;\n        this.empty = !!empty;\n    }\n    /**\n     * Resolve a list of selection clauses according to the resolution strategy.\n     * @param clauseList An array of selection clauses.\n     * @param clause A new selection clause to add.\n     * @returns An updated array of selection clauses.\n     */\n    resolve(clauseList, clause, reset = false) {\n        const { source, predicate } = clause;\n        const filtered = clauseList.filter(c => source !== c.source);\n        const clauses = this.single ? [] : filtered;\n        if (this.single && reset)\n            filtered.forEach(c => c.source?.reset?.());\n        if (predicate)\n            clauses.push(clause);\n        return clauses;\n    }\n    /**\n     * Indicates if a selection clause should not be applied to a given client.\n     * The return value depends on the resolution strategy.\n     * @param client The client to test. If null or undefined, return false.\n     * @param clause The selection clause.\n     * @returns True if the client should be skipped, false otherwise.\n     */\n    skip(client, clause) {\n        if (client == null) {\n            return false;\n        }\n        return Boolean(this.cross && clause?.clients?.has(client));\n    }\n    /**\n     * Return a selection query predicate for the given client.\n     * @param clauseList An array of selection clauses.\n     * @param active The current active selection clause.\n     * @param client The client whose data may be filtered. If null or undefined, return all clauses.\n     * @returns The query predicate for filtering client data,\n     *  based on the current state of this selection.\n     */\n    predicate(clauseList, active, client) {\n        const { empty, union } = this;\n        if (empty && !clauseList.length) {\n            return [literal(false)];\n        }\n        // do nothing if cross-filtering and client is currently active\n        if (this.skip(client, active))\n            return undefined;\n        // remove client-specific predicates if cross-filtering\n        const predicates = clauseList\n            .filter(clause => !this.skip(client, clause))\n            .map(clause => clause.predicate);\n        // return appropriate conjunction or disjunction\n        // an array of predicates is implicitly conjunctive\n        return union && predicates.length > 1 ? or(predicates) : predicates;\n    }\n    /**\n     * Returns a filter function for queued selection updates.\n     * @param value The new event value that will be enqueued.\n     * @returns A dispatch queue filter\n     *  function, or null if all unemitted event values should be filtered.\n     */\n    queueFilter(value) {\n        if (this.cross) {\n            const source = value.active?.source;\n            return value => value.active?.source !== source;\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=Selection.js.map","import { decodeIPC } from '../util/decode-ipc.js';\n/**\n * Connect to a DuckDB server over an HTTP REST interface.\n * @param options Connector options.\n * @param options.uri The URI for the DuckDB REST server.\n * @param options.ipc Arrow IPC extraction options.\n * @returns A connector instance.\n */\nexport function restConnector(options) {\n    return new RestConnector(options);\n}\nexport class RestConnector {\n    _uri;\n    _ipc;\n    constructor({ uri = 'http://localhost:3000/', ipc = undefined } = {}) {\n        this._uri = uri;\n        this._ipc = ipc;\n    }\n    async query(query) {\n        const req = fetch(this._uri, {\n            method: 'POST',\n            mode: 'cors',\n            cache: 'no-cache',\n            credentials: 'omit',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(query)\n        });\n        const res = await req;\n        if (!res.ok) {\n            throw new Error(`Query failed with HTTP status ${res.status}: ${await res.text()}`);\n        }\n        return query.type === 'exec' ? req\n            : query.type === 'arrow' ? decodeIPC(await res.arrayBuffer(), this._ipc)\n                : res.json();\n    }\n}\n//# sourceMappingURL=rest.js.map","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nconst decoder = new TextDecoder('utf-8');\n/** @ignore */\nexport const decodeUtf8 = (buffer) => decoder.decode(buffer);\nconst encoder = new TextEncoder();\n/** @ignore */\nexport const encodeUtf8 = (value) => encoder.encode(value);\n\n//# sourceMappingURL=utf8.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n/** @ignore */ const isNumber = (x) => typeof x === 'number';\n/** @ignore */ const isBoolean = (x) => typeof x === 'boolean';\n/** @ignore */ const isFunction = (x) => typeof x === 'function';\n/** @ignore */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const isObject = (x) => x != null && Object(x) === x;\n/** @ignore */\nexport const isPromise = (x) => {\n    return isObject(x) && isFunction(x.then);\n};\n/** @ignore */\nexport const isObservable = (x) => {\n    return isObject(x) && isFunction(x.subscribe);\n};\n/** @ignore */\nexport const isIterable = (x) => {\n    return isObject(x) && isFunction(x[Symbol.iterator]);\n};\n/** @ignore */\nexport const isAsyncIterable = (x) => {\n    return isObject(x) && isFunction(x[Symbol.asyncIterator]);\n};\n/** @ignore */\nexport const isArrowJSON = (x) => {\n    return isObject(x) && isObject(x['schema']);\n};\n/** @ignore */\nexport const isArrayLike = (x) => {\n    return isObject(x) && isNumber(x['length']);\n};\n/** @ignore */\nexport const isIteratorResult = (x) => {\n    return isObject(x) && ('done' in x) && ('value' in x);\n};\n/** @ignore */\nexport const isUnderlyingSink = (x) => {\n    return isObject(x) &&\n        isFunction(x['abort']) &&\n        isFunction(x['close']) &&\n        isFunction(x['start']) &&\n        isFunction(x['write']);\n};\n/** @ignore */\nexport const isFileHandle = (x) => {\n    return isObject(x) && isFunction(x['stat']) && isNumber(x['fd']);\n};\n/** @ignore */\nexport const isFSReadStream = (x) => {\n    return isReadableNodeStream(x) && isNumber(x['bytesRead']);\n};\n/** @ignore */\nexport const isFetchResponse = (x) => {\n    return isObject(x) && isReadableDOMStream(x['body']);\n};\nconst isReadableInterop = (x) => ('_getDOMStream' in x && '_getNodeStream' in x);\n/** @ignore */\nexport const isWritableDOMStream = (x) => {\n    return isObject(x) &&\n        isFunction(x['abort']) &&\n        isFunction(x['getWriter']) &&\n        !isReadableInterop(x);\n};\n/** @ignore */\nexport const isReadableDOMStream = (x) => {\n    return isObject(x) &&\n        isFunction(x['cancel']) &&\n        isFunction(x['getReader']) &&\n        !isReadableInterop(x);\n};\n/** @ignore */\nexport const isWritableNodeStream = (x) => {\n    return isObject(x) &&\n        isFunction(x['end']) &&\n        isFunction(x['write']) &&\n        isBoolean(x['writable']) &&\n        !isReadableInterop(x);\n};\n/** @ignore */\nexport const isReadableNodeStream = (x) => {\n    return isObject(x) &&\n        isFunction(x['read']) &&\n        isFunction(x['pipe']) &&\n        isBoolean(x['readable']) &&\n        !isReadableInterop(x);\n};\n/** @ignore */\nexport const isFlatbuffersByteBuffer = (x) => {\n    return isObject(x) &&\n        isFunction(x['clear']) &&\n        isFunction(x['bytes']) &&\n        isFunction(x['position']) &&\n        isFunction(x['setPosition']) &&\n        isFunction(x['capacity']) &&\n        isFunction(x['getBufferIdentifier']) &&\n        isFunction(x['createLong']);\n};\n\n//# sourceMappingURL=compat.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { __asyncDelegator, __asyncGenerator, __asyncValues, __await } from \"tslib\";\nimport { encodeUtf8 } from '../util/utf8.mjs';\nimport { isPromise, isIterable, isAsyncIterable, isIteratorResult, isFlatbuffersByteBuffer } from './compat.mjs';\n/** @ignore */\nconst SharedArrayBuf = (typeof SharedArrayBuffer !== 'undefined' ? SharedArrayBuffer : ArrayBuffer);\n/** @ignore */\nfunction collapseContiguousByteRanges(chunks) {\n    const result = chunks[0] ? [chunks[0]] : [];\n    let xOffset, yOffset, xLen, yLen;\n    for (let x, y, i = 0, j = 0, n = chunks.length; ++i < n;) {\n        x = result[j];\n        y = chunks[i];\n        // continue if x and y don't share the same underlying ArrayBuffer, or if x isn't before y\n        if (!x || !y || x.buffer !== y.buffer || y.byteOffset < x.byteOffset) {\n            y && (result[++j] = y);\n            continue;\n        }\n        ({ byteOffset: xOffset, byteLength: xLen } = x);\n        ({ byteOffset: yOffset, byteLength: yLen } = y);\n        // continue if the byte ranges of x and y aren't contiguous\n        if ((xOffset + xLen) < yOffset || (yOffset + yLen) < xOffset) {\n            y && (result[++j] = y);\n            continue;\n        }\n        result[j] = new Uint8Array(x.buffer, xOffset, yOffset - xOffset + yLen);\n    }\n    return result;\n}\n/** @ignore */\nexport function memcpy(target, source, targetByteOffset = 0, sourceByteLength = source.byteLength) {\n    const targetByteLength = target.byteLength;\n    const dst = new Uint8Array(target.buffer, target.byteOffset, targetByteLength);\n    const src = new Uint8Array(source.buffer, source.byteOffset, Math.min(sourceByteLength, targetByteLength));\n    dst.set(src, targetByteOffset);\n    return target;\n}\n/** @ignore */\nexport function joinUint8Arrays(chunks, size) {\n    // collapse chunks that share the same underlying ArrayBuffer and whose byte ranges overlap,\n    // to avoid unnecessarily copying the bytes to do this buffer join. This is a common case during\n    // streaming, where we may be reading partial byte ranges out of the same underlying ArrayBuffer\n    const result = collapseContiguousByteRanges(chunks);\n    const byteLength = result.reduce((x, b) => x + b.byteLength, 0);\n    let source, sliced, buffer;\n    let offset = 0, index = -1;\n    const length = Math.min(size || Number.POSITIVE_INFINITY, byteLength);\n    for (const n = result.length; ++index < n;) {\n        source = result[index];\n        sliced = source.subarray(0, Math.min(source.length, length - offset));\n        if (length <= (offset + sliced.length)) {\n            if (sliced.length < source.length) {\n                result[index] = source.subarray(sliced.length);\n            }\n            else if (sliced.length === source.length) {\n                index++;\n            }\n            buffer ? memcpy(buffer, sliced, offset) : (buffer = sliced);\n            break;\n        }\n        memcpy(buffer || (buffer = new Uint8Array(length)), sliced, offset);\n        offset += sliced.length;\n    }\n    return [buffer || new Uint8Array(0), result.slice(index), byteLength - (buffer ? buffer.byteLength : 0)];\n}\n/** @ignore */\nexport function toArrayBufferView(ArrayBufferViewCtor, input) {\n    let value = isIteratorResult(input) ? input.value : input;\n    if (value instanceof ArrayBufferViewCtor) {\n        if (ArrayBufferViewCtor === Uint8Array) {\n            // Node's `Buffer` class passes the `instanceof Uint8Array` check, but we need\n            // a real Uint8Array, since Buffer#slice isn't the same as Uint8Array#slice :/\n            return new ArrayBufferViewCtor(value.buffer, value.byteOffset, value.byteLength);\n        }\n        return value;\n    }\n    if (!value) {\n        return new ArrayBufferViewCtor(0);\n    }\n    if (typeof value === 'string') {\n        value = encodeUtf8(value);\n    }\n    if (value instanceof ArrayBuffer) {\n        return new ArrayBufferViewCtor(value);\n    }\n    if (value instanceof SharedArrayBuf) {\n        return new ArrayBufferViewCtor(value);\n    }\n    if (isFlatbuffersByteBuffer(value)) {\n        return toArrayBufferView(ArrayBufferViewCtor, value.bytes());\n    }\n    return !ArrayBuffer.isView(value) ? ArrayBufferViewCtor.from(value) : (value.byteLength <= 0 ? new ArrayBufferViewCtor(0)\n        : new ArrayBufferViewCtor(value.buffer, value.byteOffset, value.byteLength / ArrayBufferViewCtor.BYTES_PER_ELEMENT));\n}\n/** @ignore */ export const toInt8Array = (input) => toArrayBufferView(Int8Array, input);\n/** @ignore */ export const toInt16Array = (input) => toArrayBufferView(Int16Array, input);\n/** @ignore */ export const toInt32Array = (input) => toArrayBufferView(Int32Array, input);\n/** @ignore */ export const toBigInt64Array = (input) => toArrayBufferView(BigInt64Array, input);\n/** @ignore */ export const toUint8Array = (input) => toArrayBufferView(Uint8Array, input);\n/** @ignore */ export const toUint16Array = (input) => toArrayBufferView(Uint16Array, input);\n/** @ignore */ export const toUint32Array = (input) => toArrayBufferView(Uint32Array, input);\n/** @ignore */ export const toBigUint64Array = (input) => toArrayBufferView(BigUint64Array, input);\n/** @ignore */ export const toFloat32Array = (input) => toArrayBufferView(Float32Array, input);\n/** @ignore */ export const toFloat64Array = (input) => toArrayBufferView(Float64Array, input);\n/** @ignore */ export const toUint8ClampedArray = (input) => toArrayBufferView(Uint8ClampedArray, input);\n/** @ignore */\nconst pump = (iterator) => { iterator.next(); return iterator; };\n/** @ignore */\nexport function* toArrayBufferViewIterator(ArrayCtor, source) {\n    const wrap = function* (x) { yield x; };\n    const buffers = (typeof source === 'string') ? wrap(source)\n        : (ArrayBuffer.isView(source)) ? wrap(source)\n            : (source instanceof ArrayBuffer) ? wrap(source)\n                : (source instanceof SharedArrayBuf) ? wrap(source)\n                    : !isIterable(source) ? wrap(source) : source;\n    yield* pump((function* (it) {\n        let r = null;\n        do {\n            r = it.next(yield toArrayBufferView(ArrayCtor, r));\n        } while (!r.done);\n    })(buffers[Symbol.iterator]()));\n    return new ArrayCtor();\n}\n/** @ignore */ export const toInt8ArrayIterator = (input) => toArrayBufferViewIterator(Int8Array, input);\n/** @ignore */ export const toInt16ArrayIterator = (input) => toArrayBufferViewIterator(Int16Array, input);\n/** @ignore */ export const toInt32ArrayIterator = (input) => toArrayBufferViewIterator(Int32Array, input);\n/** @ignore */ export const toUint8ArrayIterator = (input) => toArrayBufferViewIterator(Uint8Array, input);\n/** @ignore */ export const toUint16ArrayIterator = (input) => toArrayBufferViewIterator(Uint16Array, input);\n/** @ignore */ export const toUint32ArrayIterator = (input) => toArrayBufferViewIterator(Uint32Array, input);\n/** @ignore */ export const toFloat32ArrayIterator = (input) => toArrayBufferViewIterator(Float32Array, input);\n/** @ignore */ export const toFloat64ArrayIterator = (input) => toArrayBufferViewIterator(Float64Array, input);\n/** @ignore */ export const toUint8ClampedArrayIterator = (input) => toArrayBufferViewIterator(Uint8ClampedArray, input);\n/** @ignore */\nexport function toArrayBufferViewAsyncIterator(ArrayCtor, source) {\n    return __asyncGenerator(this, arguments, function* toArrayBufferViewAsyncIterator_1() {\n        // if a Promise, unwrap the Promise and iterate the resolved value\n        if (isPromise(source)) {\n            return yield __await(yield __await(yield* __asyncDelegator(__asyncValues(toArrayBufferViewAsyncIterator(ArrayCtor, yield __await(source))))));\n        }\n        const wrap = function (x) { return __asyncGenerator(this, arguments, function* () { yield yield __await(yield __await(x)); }); };\n        const emit = function (source) {\n            return __asyncGenerator(this, arguments, function* () {\n                yield __await(yield* __asyncDelegator(__asyncValues(pump((function* (it) {\n                    let r = null;\n                    do {\n                        r = it.next(yield r === null || r === void 0 ? void 0 : r.value);\n                    } while (!r.done);\n                })(source[Symbol.iterator]())))));\n            });\n        };\n        const buffers = (typeof source === 'string') ? wrap(source) // if string, wrap in an AsyncIterableIterator\n            : (ArrayBuffer.isView(source)) ? wrap(source) // if TypedArray, wrap in an AsyncIterableIterator\n                : (source instanceof ArrayBuffer) ? wrap(source) // if ArrayBuffer, wrap in an AsyncIterableIterator\n                    : (source instanceof SharedArrayBuf) ? wrap(source) // if SharedArrayBuffer, wrap in an AsyncIterableIterator\n                        : isIterable(source) ? emit(source) // If Iterable, wrap in an AsyncIterableIterator and compose the `next` values\n                            : !isAsyncIterable(source) ? wrap(source) // If not an AsyncIterable, treat as a sentinel and wrap in an AsyncIterableIterator\n                                : source; // otherwise if AsyncIterable, use it\n        yield __await(// otherwise if AsyncIterable, use it\n        yield* __asyncDelegator(__asyncValues(pump((function (it) {\n            return __asyncGenerator(this, arguments, function* () {\n                let r = null;\n                do {\n                    r = yield __await(it.next(yield yield __await(toArrayBufferView(ArrayCtor, r))));\n                } while (!r.done);\n            });\n        })(buffers[Symbol.asyncIterator]())))));\n        return yield __await(new ArrayCtor());\n    });\n}\n/** @ignore */ export const toInt8ArrayAsyncIterator = (input) => toArrayBufferViewAsyncIterator(Int8Array, input);\n/** @ignore */ export const toInt16ArrayAsyncIterator = (input) => toArrayBufferViewAsyncIterator(Int16Array, input);\n/** @ignore */ export const toInt32ArrayAsyncIterator = (input) => toArrayBufferViewAsyncIterator(Int32Array, input);\n/** @ignore */ export const toUint8ArrayAsyncIterator = (input) => toArrayBufferViewAsyncIterator(Uint8Array, input);\n/** @ignore */ export const toUint16ArrayAsyncIterator = (input) => toArrayBufferViewAsyncIterator(Uint16Array, input);\n/** @ignore */ export const toUint32ArrayAsyncIterator = (input) => toArrayBufferViewAsyncIterator(Uint32Array, input);\n/** @ignore */ export const toFloat32ArrayAsyncIterator = (input) => toArrayBufferViewAsyncIterator(Float32Array, input);\n/** @ignore */ export const toFloat64ArrayAsyncIterator = (input) => toArrayBufferViewAsyncIterator(Float64Array, input);\n/** @ignore */ export const toUint8ClampedArrayAsyncIterator = (input) => toArrayBufferViewAsyncIterator(Uint8ClampedArray, input);\nexport function rebaseValueOffsets(offset, length, valueOffsets) {\n    // If we have a non-zero offset, create a new offsets array with the values\n    // shifted by the start offset, such that the new start offset is 0\n    if (offset !== 0) {\n        valueOffsets = valueOffsets.slice(0, length);\n        for (let i = -1, n = valueOffsets.length; ++i < n;) {\n            valueOffsets[i] += offset;\n        }\n    }\n    return valueOffsets.subarray(0, length);\n}\n/** @ignore */\nexport function compareArrayLike(a, b) {\n    let i = 0;\n    const n = a.length;\n    if (n !== b.length) {\n        return false;\n    }\n    if (n > 0) {\n        do {\n            if (a[i] !== b[i]) {\n                return false;\n            }\n        } while (++i < n);\n    }\n    return true;\n}\n\n//# sourceMappingURL=buffer.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { __asyncGenerator, __await, __awaiter } from \"tslib\";\nimport { toUint8Array, joinUint8Arrays, toUint8ArrayIterator, toUint8ArrayAsyncIterator } from '../util/buffer.mjs';\n/** @ignore */\nexport default {\n    fromIterable(source) {\n        return pump(fromIterable(source));\n    },\n    fromAsyncIterable(source) {\n        return pump(fromAsyncIterable(source));\n    },\n    fromDOMStream(source) {\n        return pump(fromDOMStream(source));\n    },\n    fromNodeStream(stream) {\n        return pump(fromNodeStream(stream));\n    },\n    // @ts-ignore\n    toDOMStream(source, options) {\n        throw new Error(`\"toDOMStream\" not available in this environment`);\n    },\n    // @ts-ignore\n    toNodeStream(source, options) {\n        throw new Error(`\"toNodeStream\" not available in this environment`);\n    },\n};\n/** @ignore */\nconst pump = (iterator) => { iterator.next(); return iterator; };\n/** @ignore */\nfunction* fromIterable(source) {\n    let done, threw = false;\n    let buffers = [], buffer;\n    let cmd, size, bufferLength = 0;\n    function byteRange() {\n        if (cmd === 'peek') {\n            return joinUint8Arrays(buffers, size)[0];\n        }\n        [buffer, buffers, bufferLength] = joinUint8Arrays(buffers, size);\n        return buffer;\n    }\n    // Yield so the caller can inject the read command before creating the source Iterator\n    ({ cmd, size } = (yield (() => null)()) || { cmd: 'read', size: 0 });\n    // initialize the iterator\n    const it = toUint8ArrayIterator(source)[Symbol.iterator]();\n    try {\n        do {\n            // read the next value\n            ({ done, value: buffer } = Number.isNaN(size - bufferLength) ?\n                it.next() : it.next(size - bufferLength));\n            // if chunk is not null or empty, push it onto the queue\n            if (!done && buffer.byteLength > 0) {\n                buffers.push(buffer);\n                bufferLength += buffer.byteLength;\n            }\n            // If we have enough bytes in our buffer, yield chunks until we don't\n            if (done || size <= bufferLength) {\n                do {\n                    ({ cmd, size } = yield byteRange());\n                } while (size < bufferLength);\n            }\n        } while (!done);\n    }\n    catch (e) {\n        (threw = true) && (typeof it.throw === 'function') && (it.throw(e));\n    }\n    finally {\n        (threw === false) && (typeof it.return === 'function') && (it.return(null));\n    }\n    return null;\n}\n/** @ignore */\nfunction fromAsyncIterable(source) {\n    return __asyncGenerator(this, arguments, function* fromAsyncIterable_1() {\n        let done, threw = false;\n        let buffers = [], buffer;\n        let cmd, size, bufferLength = 0;\n        function byteRange() {\n            if (cmd === 'peek') {\n                return joinUint8Arrays(buffers, size)[0];\n            }\n            [buffer, buffers, bufferLength] = joinUint8Arrays(buffers, size);\n            return buffer;\n        }\n        // Yield so the caller can inject the read command before creating the source AsyncIterator\n        ({ cmd, size } = (yield yield __await((() => null)())) || { cmd: 'read', size: 0 });\n        // initialize the iterator\n        const it = toUint8ArrayAsyncIterator(source)[Symbol.asyncIterator]();\n        try {\n            do {\n                // read the next value\n                ({ done, value: buffer } = Number.isNaN(size - bufferLength)\n                    ? yield __await(it.next())\n                    : yield __await(it.next(size - bufferLength)));\n                // if chunk is not null or empty, push it onto the queue\n                if (!done && buffer.byteLength > 0) {\n                    buffers.push(buffer);\n                    bufferLength += buffer.byteLength;\n                }\n                // If we have enough bytes in our buffer, yield chunks until we don't\n                if (done || size <= bufferLength) {\n                    do {\n                        ({ cmd, size } = yield yield __await(byteRange()));\n                    } while (size < bufferLength);\n                }\n            } while (!done);\n        }\n        catch (e) {\n            (threw = true) && (typeof it.throw === 'function') && (yield __await(it.throw(e)));\n        }\n        finally {\n            (threw === false) && (typeof it.return === 'function') && (yield __await(it.return(new Uint8Array(0))));\n        }\n        return yield __await(null);\n    });\n}\n// All this manual Uint8Array chunk management can be avoided if/when engines\n// add support for ArrayBuffer.transfer() or ArrayBuffer.prototype.realloc():\n// https://github.com/domenic/proposal-arraybuffer-transfer\n/** @ignore */\nfunction fromDOMStream(source) {\n    return __asyncGenerator(this, arguments, function* fromDOMStream_1() {\n        let done = false, threw = false;\n        let buffers = [], buffer;\n        let cmd, size, bufferLength = 0;\n        function byteRange() {\n            if (cmd === 'peek') {\n                return joinUint8Arrays(buffers, size)[0];\n            }\n            [buffer, buffers, bufferLength] = joinUint8Arrays(buffers, size);\n            return buffer;\n        }\n        // Yield so the caller can inject the read command before we establish the ReadableStream lock\n        ({ cmd, size } = (yield yield __await((() => null)())) || { cmd: 'read', size: 0 });\n        // initialize the reader and lock the stream\n        const it = new AdaptiveByteReader(source);\n        try {\n            do {\n                // read the next value\n                ({ done, value: buffer } = Number.isNaN(size - bufferLength)\n                    ? yield __await(it['read']())\n                    : yield __await(it['read'](size - bufferLength)));\n                // if chunk is not null or empty, push it onto the queue\n                if (!done && buffer.byteLength > 0) {\n                    buffers.push(toUint8Array(buffer));\n                    bufferLength += buffer.byteLength;\n                }\n                // If we have enough bytes in our buffer, yield chunks until we don't\n                if (done || size <= bufferLength) {\n                    do {\n                        ({ cmd, size } = yield yield __await(byteRange()));\n                    } while (size < bufferLength);\n                }\n            } while (!done);\n        }\n        catch (e) {\n            (threw = true) && (yield __await(it['cancel'](e)));\n        }\n        finally {\n            (threw === false) ? (yield __await(it['cancel']()))\n                : source['locked'] && it.releaseLock();\n        }\n        return yield __await(null);\n    });\n}\n/** @ignore */\nclass AdaptiveByteReader {\n    constructor(source) {\n        this.source = source;\n        this.reader = null;\n        this.reader = this.source['getReader']();\n        // We have to catch and swallow errors here to avoid uncaught promise rejection exceptions\n        // that seem to be raised when we call `releaseLock()` on this reader. I'm still mystified\n        // about why these errors are raised, but I'm sure there's some important spec reason that\n        // I haven't considered. I hate to employ such an anti-pattern here, but it seems like the\n        // only solution in this case :/\n        this.reader['closed'].catch(() => { });\n    }\n    get closed() {\n        return this.reader ? this.reader['closed'].catch(() => { }) : Promise.resolve();\n    }\n    releaseLock() {\n        if (this.reader) {\n            this.reader.releaseLock();\n        }\n        this.reader = null;\n    }\n    cancel(reason) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { reader, source } = this;\n            reader && (yield reader['cancel'](reason).catch(() => { }));\n            source && (source['locked'] && this.releaseLock());\n        });\n    }\n    read(size) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (size === 0) {\n                return { done: this.reader == null, value: new Uint8Array(0) };\n            }\n            const result = yield this.reader.read();\n            !result.done && (result.value = toUint8Array(result));\n            return result;\n        });\n    }\n}\n/** @ignore */\nconst onEvent = (stream, event) => {\n    const handler = (_) => resolve([event, _]);\n    let resolve;\n    return [event, handler, new Promise((r) => (resolve = r) && stream['once'](event, handler))];\n};\n/** @ignore */\nfunction fromNodeStream(stream) {\n    return __asyncGenerator(this, arguments, function* fromNodeStream_1() {\n        const events = [];\n        let event = 'error';\n        let done = false, err = null;\n        let cmd, size, bufferLength = 0;\n        let buffers = [], buffer;\n        function byteRange() {\n            if (cmd === 'peek') {\n                return joinUint8Arrays(buffers, size)[0];\n            }\n            [buffer, buffers, bufferLength] = joinUint8Arrays(buffers, size);\n            return buffer;\n        }\n        // Yield so the caller can inject the read command before we\n        // add the listener for the source stream's 'readable' event.\n        ({ cmd, size } = (yield yield __await((() => null)())) || { cmd: 'read', size: 0 });\n        // ignore stdin if it's a TTY\n        if (stream['isTTY']) {\n            yield yield __await(new Uint8Array(0));\n            return yield __await(null);\n        }\n        try {\n            // initialize the stream event handlers\n            events[0] = onEvent(stream, 'end');\n            events[1] = onEvent(stream, 'error');\n            do {\n                events[2] = onEvent(stream, 'readable');\n                // wait on the first message event from the stream\n                [event, err] = yield __await(Promise.race(events.map((x) => x[2])));\n                // if the stream emitted an Error, rethrow it\n                if (event === 'error') {\n                    break;\n                }\n                if (!(done = event === 'end')) {\n                    // If the size is NaN, request to read everything in the stream's internal buffer\n                    if (!Number.isFinite(size - bufferLength)) {\n                        buffer = toUint8Array(stream['read']());\n                    }\n                    else {\n                        buffer = toUint8Array(stream['read'](size - bufferLength));\n                        // If the byteLength is 0, then the requested amount is more than the stream has\n                        // in its internal buffer. In this case the stream needs a \"kick\" to tell it to\n                        // continue emitting readable events, so request to read everything the stream\n                        // has in its internal buffer right now.\n                        if (buffer.byteLength < (size - bufferLength)) {\n                            buffer = toUint8Array(stream['read']());\n                        }\n                    }\n                    // if chunk is not null or empty, push it onto the queue\n                    if (buffer.byteLength > 0) {\n                        buffers.push(buffer);\n                        bufferLength += buffer.byteLength;\n                    }\n                }\n                // If we have enough bytes in our buffer, yield chunks until we don't\n                if (done || size <= bufferLength) {\n                    do {\n                        ({ cmd, size } = yield yield __await(byteRange()));\n                    } while (size < bufferLength);\n                }\n            } while (!done);\n        }\n        finally {\n            yield __await(cleanup(events, event === 'error' ? err : null));\n        }\n        return yield __await(null);\n        function cleanup(events, err) {\n            buffer = buffers = null;\n            return new Promise((resolve, reject) => {\n                for (const [evt, fn] of events) {\n                    stream['off'](evt, fn);\n                }\n                try {\n                    // Some stream implementations don't call the destroy callback,\n                    // because it's really a node-internal API. Just calling `destroy`\n                    // here should be enough to conform to the ReadableStream contract\n                    const destroy = stream['destroy'];\n                    destroy && destroy.call(stream, err);\n                    err = undefined;\n                }\n                catch (e) {\n                    err = e || err;\n                }\n                finally {\n                    err != null ? reject(err) : resolve();\n                }\n            });\n        }\n    });\n}\n\n//# sourceMappingURL=adapters.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\n/**\n * Logical types, vector layouts, and schemas\n * Format Version History.\n * Version 1.0 - Forward and backwards compatibility guaranteed.\n * Version 1.1 - Add Decimal256.\n * Version 1.2 - Add Interval MONTH_DAY_NANO.\n * Version 1.3 - Add Run-End Encoded.\n */\nexport var MetadataVersion;\n(function (MetadataVersion) {\n    /**\n     * 0.1.0 (October 2016).\n     */\n    MetadataVersion[MetadataVersion[\"V1\"] = 0] = \"V1\";\n    /**\n     * 0.2.0 (February 2017). Non-backwards compatible with V1.\n     */\n    MetadataVersion[MetadataVersion[\"V2\"] = 1] = \"V2\";\n    /**\n     * 0.3.0 -> 0.7.1 (May - December 2017). Non-backwards compatible with V2.\n     */\n    MetadataVersion[MetadataVersion[\"V3\"] = 2] = \"V3\";\n    /**\n     * >= 0.8.0 (December 2017). Non-backwards compatible with V3.\n     */\n    MetadataVersion[MetadataVersion[\"V4\"] = 3] = \"V4\";\n    /**\n     * >= 1.0.0 (July 2020. Backwards compatible with V4 (V5 readers can read V4\n     * metadata and IPC messages). Implementations are recommended to provide a\n     * V4 compatibility mode with V5 format changes disabled.\n     *\n     * Incompatible changes between V4 and V5:\n     * - Union buffer layout has changed. In V5, Unions don't have a validity\n     *   bitmap buffer.\n     */\n    MetadataVersion[MetadataVersion[\"V5\"] = 4] = \"V5\";\n})(MetadataVersion || (MetadataVersion = {}));\n\n//# sourceMappingURL=metadata-version.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nexport var UnionMode;\n(function (UnionMode) {\n    UnionMode[UnionMode[\"Sparse\"] = 0] = \"Sparse\";\n    UnionMode[UnionMode[\"Dense\"] = 1] = \"Dense\";\n})(UnionMode || (UnionMode = {}));\n\n//# sourceMappingURL=union-mode.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nexport var Precision;\n(function (Precision) {\n    Precision[Precision[\"HALF\"] = 0] = \"HALF\";\n    Precision[Precision[\"SINGLE\"] = 1] = \"SINGLE\";\n    Precision[Precision[\"DOUBLE\"] = 2] = \"DOUBLE\";\n})(Precision || (Precision = {}));\n\n//# sourceMappingURL=precision.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nexport var DateUnit;\n(function (DateUnit) {\n    DateUnit[DateUnit[\"DAY\"] = 0] = \"DAY\";\n    DateUnit[DateUnit[\"MILLISECOND\"] = 1] = \"MILLISECOND\";\n})(DateUnit || (DateUnit = {}));\n\n//# sourceMappingURL=date-unit.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nexport var TimeUnit;\n(function (TimeUnit) {\n    TimeUnit[TimeUnit[\"SECOND\"] = 0] = \"SECOND\";\n    TimeUnit[TimeUnit[\"MILLISECOND\"] = 1] = \"MILLISECOND\";\n    TimeUnit[TimeUnit[\"MICROSECOND\"] = 2] = \"MICROSECOND\";\n    TimeUnit[TimeUnit[\"NANOSECOND\"] = 3] = \"NANOSECOND\";\n})(TimeUnit || (TimeUnit = {}));\n\n//# sourceMappingURL=time-unit.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nexport var IntervalUnit;\n(function (IntervalUnit) {\n    IntervalUnit[IntervalUnit[\"YEAR_MONTH\"] = 0] = \"YEAR_MONTH\";\n    IntervalUnit[IntervalUnit[\"DAY_TIME\"] = 1] = \"DAY_TIME\";\n    IntervalUnit[IntervalUnit[\"MONTH_DAY_NANO\"] = 2] = \"MONTH_DAY_NANO\";\n})(IntervalUnit || (IntervalUnit = {}));\n\n//# sourceMappingURL=interval-unit.mjs.map\n","export const SIZEOF_SHORT = 2;\nexport const SIZEOF_INT = 4;\nexport const FILE_IDENTIFIER_LENGTH = 4;\nexport const SIZE_PREFIX_LENGTH = 4;\n","export const int32 = new Int32Array(2);\nexport const float32 = new Float32Array(int32.buffer);\nexport const float64 = new Float64Array(int32.buffer);\nexport const isLittleEndian = new Uint16Array(new Uint8Array([1, 0]).buffer)[0] === 1;\n","export var Encoding;\n(function (Encoding) {\n    Encoding[Encoding[\"UTF8_BYTES\"] = 1] = \"UTF8_BYTES\";\n    Encoding[Encoding[\"UTF16_STRING\"] = 2] = \"UTF16_STRING\";\n})(Encoding || (Encoding = {}));\n","import { FILE_IDENTIFIER_LENGTH, SIZEOF_INT } from \"./constants.js\";\nimport { int32, isLittleEndian, float32, float64 } from \"./utils.js\";\nimport { Encoding } from \"./encoding.js\";\nexport class ByteBuffer {\n    /**\n     * Create a new ByteBuffer with a given array of bytes (`Uint8Array`)\n     */\n    constructor(bytes_) {\n        this.bytes_ = bytes_;\n        this.position_ = 0;\n        this.text_decoder_ = new TextDecoder();\n    }\n    /**\n     * Create and allocate a new ByteBuffer with a given size.\n     */\n    static allocate(byte_size) {\n        return new ByteBuffer(new Uint8Array(byte_size));\n    }\n    clear() {\n        this.position_ = 0;\n    }\n    /**\n     * Get the underlying `Uint8Array`.\n     */\n    bytes() {\n        return this.bytes_;\n    }\n    /**\n     * Get the buffer's position.\n     */\n    position() {\n        return this.position_;\n    }\n    /**\n     * Set the buffer's position.\n     */\n    setPosition(position) {\n        this.position_ = position;\n    }\n    /**\n     * Get the buffer's capacity.\n     */\n    capacity() {\n        return this.bytes_.length;\n    }\n    readInt8(offset) {\n        return this.readUint8(offset) << 24 >> 24;\n    }\n    readUint8(offset) {\n        return this.bytes_[offset];\n    }\n    readInt16(offset) {\n        return this.readUint16(offset) << 16 >> 16;\n    }\n    readUint16(offset) {\n        return this.bytes_[offset] | this.bytes_[offset + 1] << 8;\n    }\n    readInt32(offset) {\n        return this.bytes_[offset] | this.bytes_[offset + 1] << 8 | this.bytes_[offset + 2] << 16 | this.bytes_[offset + 3] << 24;\n    }\n    readUint32(offset) {\n        return this.readInt32(offset) >>> 0;\n    }\n    readInt64(offset) {\n        return BigInt.asIntN(64, BigInt(this.readUint32(offset)) + (BigInt(this.readUint32(offset + 4)) << BigInt(32)));\n    }\n    readUint64(offset) {\n        return BigInt.asUintN(64, BigInt(this.readUint32(offset)) + (BigInt(this.readUint32(offset + 4)) << BigInt(32)));\n    }\n    readFloat32(offset) {\n        int32[0] = this.readInt32(offset);\n        return float32[0];\n    }\n    readFloat64(offset) {\n        int32[isLittleEndian ? 0 : 1] = this.readInt32(offset);\n        int32[isLittleEndian ? 1 : 0] = this.readInt32(offset + 4);\n        return float64[0];\n    }\n    writeInt8(offset, value) {\n        this.bytes_[offset] = value;\n    }\n    writeUint8(offset, value) {\n        this.bytes_[offset] = value;\n    }\n    writeInt16(offset, value) {\n        this.bytes_[offset] = value;\n        this.bytes_[offset + 1] = value >> 8;\n    }\n    writeUint16(offset, value) {\n        this.bytes_[offset] = value;\n        this.bytes_[offset + 1] = value >> 8;\n    }\n    writeInt32(offset, value) {\n        this.bytes_[offset] = value;\n        this.bytes_[offset + 1] = value >> 8;\n        this.bytes_[offset + 2] = value >> 16;\n        this.bytes_[offset + 3] = value >> 24;\n    }\n    writeUint32(offset, value) {\n        this.bytes_[offset] = value;\n        this.bytes_[offset + 1] = value >> 8;\n        this.bytes_[offset + 2] = value >> 16;\n        this.bytes_[offset + 3] = value >> 24;\n    }\n    writeInt64(offset, value) {\n        this.writeInt32(offset, Number(BigInt.asIntN(32, value)));\n        this.writeInt32(offset + 4, Number(BigInt.asIntN(32, value >> BigInt(32))));\n    }\n    writeUint64(offset, value) {\n        this.writeUint32(offset, Number(BigInt.asUintN(32, value)));\n        this.writeUint32(offset + 4, Number(BigInt.asUintN(32, value >> BigInt(32))));\n    }\n    writeFloat32(offset, value) {\n        float32[0] = value;\n        this.writeInt32(offset, int32[0]);\n    }\n    writeFloat64(offset, value) {\n        float64[0] = value;\n        this.writeInt32(offset, int32[isLittleEndian ? 0 : 1]);\n        this.writeInt32(offset + 4, int32[isLittleEndian ? 1 : 0]);\n    }\n    /**\n     * Return the file identifier.   Behavior is undefined for FlatBuffers whose\n     * schema does not include a file_identifier (likely points at padding or the\n     * start of a the root vtable).\n     */\n    getBufferIdentifier() {\n        if (this.bytes_.length < this.position_ + SIZEOF_INT +\n            FILE_IDENTIFIER_LENGTH) {\n            throw new Error('FlatBuffers: ByteBuffer is too short to contain an identifier.');\n        }\n        let result = \"\";\n        for (let i = 0; i < FILE_IDENTIFIER_LENGTH; i++) {\n            result += String.fromCharCode(this.readInt8(this.position_ + SIZEOF_INT + i));\n        }\n        return result;\n    }\n    /**\n     * Look up a field in the vtable, return an offset into the object, or 0 if the\n     * field is not present.\n     */\n    __offset(bb_pos, vtable_offset) {\n        const vtable = bb_pos - this.readInt32(bb_pos);\n        return vtable_offset < this.readInt16(vtable) ? this.readInt16(vtable + vtable_offset) : 0;\n    }\n    /**\n     * Initialize any Table-derived type to point to the union at the given offset.\n     */\n    __union(t, offset) {\n        t.bb_pos = offset + this.readInt32(offset);\n        t.bb = this;\n        return t;\n    }\n    /**\n     * Create a JavaScript string from UTF-8 data stored inside the FlatBuffer.\n     * This allocates a new string and converts to wide chars upon each access.\n     *\n     * To avoid the conversion to string, pass Encoding.UTF8_BYTES as the\n     * \"optionalEncoding\" argument. This is useful for avoiding conversion when\n     * the data will just be packaged back up in another FlatBuffer later on.\n     *\n     * @param offset\n     * @param opt_encoding Defaults to UTF16_STRING\n     */\n    __string(offset, opt_encoding) {\n        offset += this.readInt32(offset);\n        const length = this.readInt32(offset);\n        offset += SIZEOF_INT;\n        const utf8bytes = this.bytes_.subarray(offset, offset + length);\n        if (opt_encoding === Encoding.UTF8_BYTES)\n            return utf8bytes;\n        else\n            return this.text_decoder_.decode(utf8bytes);\n    }\n    /**\n     * Handle unions that can contain string as its member, if a Table-derived type then initialize it,\n     * if a string then return a new one\n     *\n     * WARNING: strings are immutable in JS so we can't change the string that the user gave us, this\n     * makes the behaviour of __union_with_string different compared to __union\n     */\n    __union_with_string(o, offset) {\n        if (typeof o === 'string') {\n            return this.__string(offset);\n        }\n        return this.__union(o, offset);\n    }\n    /**\n     * Retrieve the relative offset stored at \"offset\"\n     */\n    __indirect(offset) {\n        return offset + this.readInt32(offset);\n    }\n    /**\n     * Get the start of data of a vector whose offset is stored at \"offset\" in this object.\n     */\n    __vector(offset) {\n        return offset + this.readInt32(offset) + SIZEOF_INT; // data starts after the length\n    }\n    /**\n     * Get the length of a vector whose offset is stored at \"offset\" in this object.\n     */\n    __vector_len(offset) {\n        return this.readInt32(offset + this.readInt32(offset));\n    }\n    __has_identifier(ident) {\n        if (ident.length != FILE_IDENTIFIER_LENGTH) {\n            throw new Error('FlatBuffers: file identifier must be length ' +\n                FILE_IDENTIFIER_LENGTH);\n        }\n        for (let i = 0; i < FILE_IDENTIFIER_LENGTH; i++) {\n            if (ident.charCodeAt(i) != this.readInt8(this.position() + SIZEOF_INT + i)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * A helper function for generating list for obj api\n     */\n    createScalarList(listAccessor, listLength) {\n        const ret = [];\n        for (let i = 0; i < listLength; ++i) {\n            const val = listAccessor(i);\n            if (val !== null) {\n                ret.push(val);\n            }\n        }\n        return ret;\n    }\n    /**\n     * A helper function for generating list for obj api\n     * @param listAccessor function that accepts an index and return data at that index\n     * @param listLength listLength\n     * @param res result list\n     */\n    createObjList(listAccessor, listLength) {\n        const ret = [];\n        for (let i = 0; i < listLength; ++i) {\n            const val = listAccessor(i);\n            if (val !== null) {\n                ret.push(val.unpack());\n            }\n        }\n        return ret;\n    }\n}\n","import { ByteBuffer } from \"./byte-buffer.js\";\nimport { SIZEOF_SHORT, SIZE_PREFIX_LENGTH, SIZEOF_INT, FILE_IDENTIFIER_LENGTH } from \"./constants.js\";\nexport class Builder {\n    /**\n     * Create a FlatBufferBuilder.\n     */\n    constructor(opt_initial_size) {\n        /** Minimum alignment encountered so far. */\n        this.minalign = 1;\n        /** The vtable for the current table. */\n        this.vtable = null;\n        /** The amount of fields we're actually using. */\n        this.vtable_in_use = 0;\n        /** Whether we are currently serializing a table. */\n        this.isNested = false;\n        /** Starting offset of the current struct/table. */\n        this.object_start = 0;\n        /** List of offsets of all vtables. */\n        this.vtables = [];\n        /** For the current vector being built. */\n        this.vector_num_elems = 0;\n        /** False omits default values from the serialized data */\n        this.force_defaults = false;\n        this.string_maps = null;\n        this.text_encoder = new TextEncoder();\n        let initial_size;\n        if (!opt_initial_size) {\n            initial_size = 1024;\n        }\n        else {\n            initial_size = opt_initial_size;\n        }\n        /**\n         * @type {ByteBuffer}\n         * @private\n         */\n        this.bb = ByteBuffer.allocate(initial_size);\n        this.space = initial_size;\n    }\n    clear() {\n        this.bb.clear();\n        this.space = this.bb.capacity();\n        this.minalign = 1;\n        this.vtable = null;\n        this.vtable_in_use = 0;\n        this.isNested = false;\n        this.object_start = 0;\n        this.vtables = [];\n        this.vector_num_elems = 0;\n        this.force_defaults = false;\n        this.string_maps = null;\n    }\n    /**\n     * In order to save space, fields that are set to their default value\n     * don't get serialized into the buffer. Forcing defaults provides a\n     * way to manually disable this optimization.\n     *\n     * @param forceDefaults true always serializes default values\n     */\n    forceDefaults(forceDefaults) {\n        this.force_defaults = forceDefaults;\n    }\n    /**\n     * Get the ByteBuffer representing the FlatBuffer. Only call this after you've\n     * called finish(). The actual data starts at the ByteBuffer's current position,\n     * not necessarily at 0.\n     */\n    dataBuffer() {\n        return this.bb;\n    }\n    /**\n     * Get the bytes representing the FlatBuffer. Only call this after you've\n     * called finish().\n     */\n    asUint8Array() {\n        return this.bb.bytes().subarray(this.bb.position(), this.bb.position() + this.offset());\n    }\n    /**\n     * Prepare to write an element of `size` after `additional_bytes` have been\n     * written, e.g. if you write a string, you need to align such the int length\n     * field is aligned to 4 bytes, and the string data follows it directly. If all\n     * you need to do is alignment, `additional_bytes` will be 0.\n     *\n     * @param size This is the of the new element to write\n     * @param additional_bytes The padding size\n     */\n    prep(size, additional_bytes) {\n        // Track the biggest thing we've ever aligned to.\n        if (size > this.minalign) {\n            this.minalign = size;\n        }\n        // Find the amount of alignment needed such that `size` is properly\n        // aligned after `additional_bytes`\n        const align_size = ((~(this.bb.capacity() - this.space + additional_bytes)) + 1) & (size - 1);\n        // Reallocate the buffer if needed.\n        while (this.space < align_size + size + additional_bytes) {\n            const old_buf_size = this.bb.capacity();\n            this.bb = Builder.growByteBuffer(this.bb);\n            this.space += this.bb.capacity() - old_buf_size;\n        }\n        this.pad(align_size);\n    }\n    pad(byte_size) {\n        for (let i = 0; i < byte_size; i++) {\n            this.bb.writeInt8(--this.space, 0);\n        }\n    }\n    writeInt8(value) {\n        this.bb.writeInt8(this.space -= 1, value);\n    }\n    writeInt16(value) {\n        this.bb.writeInt16(this.space -= 2, value);\n    }\n    writeInt32(value) {\n        this.bb.writeInt32(this.space -= 4, value);\n    }\n    writeInt64(value) {\n        this.bb.writeInt64(this.space -= 8, value);\n    }\n    writeFloat32(value) {\n        this.bb.writeFloat32(this.space -= 4, value);\n    }\n    writeFloat64(value) {\n        this.bb.writeFloat64(this.space -= 8, value);\n    }\n    /**\n     * Add an `int8` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `int8` to add the buffer.\n     */\n    addInt8(value) {\n        this.prep(1, 0);\n        this.writeInt8(value);\n    }\n    /**\n     * Add an `int16` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `int16` to add the buffer.\n     */\n    addInt16(value) {\n        this.prep(2, 0);\n        this.writeInt16(value);\n    }\n    /**\n     * Add an `int32` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `int32` to add the buffer.\n     */\n    addInt32(value) {\n        this.prep(4, 0);\n        this.writeInt32(value);\n    }\n    /**\n     * Add an `int64` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `int64` to add the buffer.\n     */\n    addInt64(value) {\n        this.prep(8, 0);\n        this.writeInt64(value);\n    }\n    /**\n     * Add a `float32` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `float32` to add the buffer.\n     */\n    addFloat32(value) {\n        this.prep(4, 0);\n        this.writeFloat32(value);\n    }\n    /**\n     * Add a `float64` to the buffer, properly aligned, and grows the buffer (if necessary).\n     * @param value The `float64` to add the buffer.\n     */\n    addFloat64(value) {\n        this.prep(8, 0);\n        this.writeFloat64(value);\n    }\n    addFieldInt8(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addInt8(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldInt16(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addInt16(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldInt32(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addInt32(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldInt64(voffset, value, defaultValue) {\n        if (this.force_defaults || value !== defaultValue) {\n            this.addInt64(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldFloat32(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addFloat32(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldFloat64(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addFloat64(value);\n            this.slot(voffset);\n        }\n    }\n    addFieldOffset(voffset, value, defaultValue) {\n        if (this.force_defaults || value != defaultValue) {\n            this.addOffset(value);\n            this.slot(voffset);\n        }\n    }\n    /**\n     * Structs are stored inline, so nothing additional is being added. `d` is always 0.\n     */\n    addFieldStruct(voffset, value, defaultValue) {\n        if (value != defaultValue) {\n            this.nested(value);\n            this.slot(voffset);\n        }\n    }\n    /**\n     * Structures are always stored inline, they need to be created right\n     * where they're used.  You'll get this assertion failure if you\n     * created it elsewhere.\n     */\n    nested(obj) {\n        if (obj != this.offset()) {\n            throw new TypeError('FlatBuffers: struct must be serialized inline.');\n        }\n    }\n    /**\n     * Should not be creating any other object, string or vector\n     * while an object is being constructed\n     */\n    notNested() {\n        if (this.isNested) {\n            throw new TypeError('FlatBuffers: object serialization must not be nested.');\n        }\n    }\n    /**\n     * Set the current vtable at `voffset` to the current location in the buffer.\n     */\n    slot(voffset) {\n        if (this.vtable !== null)\n            this.vtable[voffset] = this.offset();\n    }\n    /**\n     * @returns Offset relative to the end of the buffer.\n     */\n    offset() {\n        return this.bb.capacity() - this.space;\n    }\n    /**\n     * Doubles the size of the backing ByteBuffer and copies the old data towards\n     * the end of the new buffer (since we build the buffer backwards).\n     *\n     * @param bb The current buffer with the existing data\n     * @returns A new byte buffer with the old data copied\n     * to it. The data is located at the end of the buffer.\n     *\n     * uint8Array.set() formally takes {Array<number>|ArrayBufferView}, so to pass\n     * it a uint8Array we need to suppress the type check:\n     * @suppress {checkTypes}\n     */\n    static growByteBuffer(bb) {\n        const old_buf_size = bb.capacity();\n        // Ensure we don't grow beyond what fits in an int.\n        if (old_buf_size & 0xC0000000) {\n            throw new Error('FlatBuffers: cannot grow buffer beyond 2 gigabytes.');\n        }\n        const new_buf_size = old_buf_size << 1;\n        const nbb = ByteBuffer.allocate(new_buf_size);\n        nbb.setPosition(new_buf_size - old_buf_size);\n        nbb.bytes().set(bb.bytes(), new_buf_size - old_buf_size);\n        return nbb;\n    }\n    /**\n     * Adds on offset, relative to where it will be written.\n     *\n     * @param offset The offset to add.\n     */\n    addOffset(offset) {\n        this.prep(SIZEOF_INT, 0); // Ensure alignment is already done.\n        this.writeInt32(this.offset() - offset + SIZEOF_INT);\n    }\n    /**\n     * Start encoding a new object in the buffer.  Users will not usually need to\n     * call this directly. The FlatBuffers compiler will generate helper methods\n     * that call this method internally.\n     */\n    startObject(numfields) {\n        this.notNested();\n        if (this.vtable == null) {\n            this.vtable = [];\n        }\n        this.vtable_in_use = numfields;\n        for (let i = 0; i < numfields; i++) {\n            this.vtable[i] = 0; // This will push additional elements as needed\n        }\n        this.isNested = true;\n        this.object_start = this.offset();\n    }\n    /**\n     * Finish off writing the object that is under construction.\n     *\n     * @returns The offset to the object inside `dataBuffer`\n     */\n    endObject() {\n        if (this.vtable == null || !this.isNested) {\n            throw new Error('FlatBuffers: endObject called without startObject');\n        }\n        this.addInt32(0);\n        const vtableloc = this.offset();\n        // Trim trailing zeroes.\n        let i = this.vtable_in_use - 1;\n        // eslint-disable-next-line no-empty\n        for (; i >= 0 && this.vtable[i] == 0; i--) { }\n        const trimmed_size = i + 1;\n        // Write out the current vtable.\n        for (; i >= 0; i--) {\n            // Offset relative to the start of the table.\n            this.addInt16(this.vtable[i] != 0 ? vtableloc - this.vtable[i] : 0);\n        }\n        const standard_fields = 2; // The fields below:\n        this.addInt16(vtableloc - this.object_start);\n        const len = (trimmed_size + standard_fields) * SIZEOF_SHORT;\n        this.addInt16(len);\n        // Search for an existing vtable that matches the current one.\n        let existing_vtable = 0;\n        const vt1 = this.space;\n        outer_loop: for (i = 0; i < this.vtables.length; i++) {\n            const vt2 = this.bb.capacity() - this.vtables[i];\n            if (len == this.bb.readInt16(vt2)) {\n                for (let j = SIZEOF_SHORT; j < len; j += SIZEOF_SHORT) {\n                    if (this.bb.readInt16(vt1 + j) != this.bb.readInt16(vt2 + j)) {\n                        continue outer_loop;\n                    }\n                }\n                existing_vtable = this.vtables[i];\n                break;\n            }\n        }\n        if (existing_vtable) {\n            // Found a match:\n            // Remove the current vtable.\n            this.space = this.bb.capacity() - vtableloc;\n            // Point table to existing vtable.\n            this.bb.writeInt32(this.space, existing_vtable - vtableloc);\n        }\n        else {\n            // No match:\n            // Add the location of the current vtable to the list of vtables.\n            this.vtables.push(this.offset());\n            // Point table to current vtable.\n            this.bb.writeInt32(this.bb.capacity() - vtableloc, this.offset() - vtableloc);\n        }\n        this.isNested = false;\n        return vtableloc;\n    }\n    /**\n     * Finalize a buffer, poiting to the given `root_table`.\n     */\n    finish(root_table, opt_file_identifier, opt_size_prefix) {\n        const size_prefix = opt_size_prefix ? SIZE_PREFIX_LENGTH : 0;\n        if (opt_file_identifier) {\n            const file_identifier = opt_file_identifier;\n            this.prep(this.minalign, SIZEOF_INT +\n                FILE_IDENTIFIER_LENGTH + size_prefix);\n            if (file_identifier.length != FILE_IDENTIFIER_LENGTH) {\n                throw new TypeError('FlatBuffers: file identifier must be length ' +\n                    FILE_IDENTIFIER_LENGTH);\n            }\n            for (let i = FILE_IDENTIFIER_LENGTH - 1; i >= 0; i--) {\n                this.writeInt8(file_identifier.charCodeAt(i));\n            }\n        }\n        this.prep(this.minalign, SIZEOF_INT + size_prefix);\n        this.addOffset(root_table);\n        if (size_prefix) {\n            this.addInt32(this.bb.capacity() - this.space);\n        }\n        this.bb.setPosition(this.space);\n    }\n    /**\n     * Finalize a size prefixed buffer, pointing to the given `root_table`.\n     */\n    finishSizePrefixed(root_table, opt_file_identifier) {\n        this.finish(root_table, opt_file_identifier, true);\n    }\n    /**\n     * This checks a required field has been set in a given table that has\n     * just been constructed.\n     */\n    requiredField(table, field) {\n        const table_start = this.bb.capacity() - table;\n        const vtable_start = table_start - this.bb.readInt32(table_start);\n        const ok = field < this.bb.readInt16(vtable_start) &&\n            this.bb.readInt16(vtable_start + field) != 0;\n        // If this fails, the caller will show what field needs to be set.\n        if (!ok) {\n            throw new TypeError('FlatBuffers: field ' + field + ' must be set');\n        }\n    }\n    /**\n     * Start a new array/vector of objects.  Users usually will not call\n     * this directly. The FlatBuffers compiler will create a start/end\n     * method for vector types in generated code.\n     *\n     * @param elem_size The size of each element in the array\n     * @param num_elems The number of elements in the array\n     * @param alignment The alignment of the array\n     */\n    startVector(elem_size, num_elems, alignment) {\n        this.notNested();\n        this.vector_num_elems = num_elems;\n        this.prep(SIZEOF_INT, elem_size * num_elems);\n        this.prep(alignment, elem_size * num_elems); // Just in case alignment > int.\n    }\n    /**\n     * Finish off the creation of an array and all its elements. The array must be\n     * created with `startVector`.\n     *\n     * @returns The offset at which the newly created array\n     * starts.\n     */\n    endVector() {\n        this.writeInt32(this.vector_num_elems);\n        return this.offset();\n    }\n    /**\n     * Encode the string `s` in the buffer using UTF-8. If the string passed has\n     * already been seen, we return the offset of the already written string\n     *\n     * @param s The string to encode\n     * @return The offset in the buffer where the encoded string starts\n     */\n    createSharedString(s) {\n        if (!s) {\n            return 0;\n        }\n        if (!this.string_maps) {\n            this.string_maps = new Map();\n        }\n        if (this.string_maps.has(s)) {\n            return this.string_maps.get(s);\n        }\n        const offset = this.createString(s);\n        this.string_maps.set(s, offset);\n        return offset;\n    }\n    /**\n     * Encode the string `s` in the buffer using UTF-8. If a Uint8Array is passed\n     * instead of a string, it is assumed to contain valid UTF-8 encoded data.\n     *\n     * @param s The string to encode\n     * @return The offset in the buffer where the encoded string starts\n     */\n    createString(s) {\n        if (s === null || s === undefined) {\n            return 0;\n        }\n        let utf8;\n        if (s instanceof Uint8Array) {\n            utf8 = s;\n        }\n        else {\n            utf8 = this.text_encoder.encode(s);\n        }\n        this.addInt8(0);\n        this.startVector(1, utf8.length, 1);\n        this.bb.setPosition(this.space -= utf8.length);\n        this.bb.bytes().set(utf8, this.space);\n        return this.endVector();\n    }\n    /**\n     * Create a byte vector.\n     *\n     * @param v The bytes to add\n     * @returns The offset in the buffer where the byte vector starts\n     */\n    createByteVector(v) {\n        if (v === null || v === undefined) {\n            return 0;\n        }\n        this.startVector(1, v.length, 1);\n        this.bb.setPosition(this.space -= v.length);\n        this.bb.bytes().set(v, this.space);\n        return this.endVector();\n    }\n    /**\n     * A helper function to pack an object\n     *\n     * @returns offset of obj\n     */\n    createObjectOffset(obj) {\n        if (obj === null) {\n            return 0;\n        }\n        if (typeof obj === 'string') {\n            return this.createString(obj);\n        }\n        else {\n            return obj.pack(this);\n        }\n    }\n    /**\n     * A helper function to pack a list of object\n     *\n     * @returns list of offsets of each non null object\n     */\n    createObjectOffsetList(list) {\n        const ret = [];\n        for (let i = 0; i < list.length; ++i) {\n            const val = list[i];\n            if (val !== null) {\n                ret.push(this.createObjectOffset(val));\n            }\n            else {\n                throw new TypeError('FlatBuffers: Argument for createObjectOffsetList cannot contain null.');\n            }\n        }\n        return ret;\n    }\n    createStructOffsetList(list, startFunc) {\n        startFunc(this, list.length);\n        this.createObjectOffsetList(list.slice().reverse());\n        return this.endVector();\n    }\n}\n","// automatically generated by the FlatBuffers compiler, do not modify\n/**\n * Provided for forward compatibility in case we need to support different\n * strategies for compressing the IPC message body (like whole-body\n * compression rather than buffer-level) in the future\n */\nexport var BodyCompressionMethod;\n(function (BodyCompressionMethod) {\n    /**\n     * Each constituent buffer is first compressed with the indicated\n     * compressor, and then written with the uncompressed length in the first 8\n     * bytes as a 64-bit little-endian signed integer followed by the compressed\n     * buffer bytes (and then padding as required by the protocol). The\n     * uncompressed length may be set to -1 to indicate that the data that\n     * follows is not compressed, which can be useful for cases where\n     * compression does not yield appreciable savings.\n     */\n    BodyCompressionMethod[BodyCompressionMethod[\"BUFFER\"] = 0] = \"BUFFER\";\n})(BodyCompressionMethod || (BodyCompressionMethod = {}));\n\n//# sourceMappingURL=body-compression-method.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nexport var CompressionType;\n(function (CompressionType) {\n    CompressionType[CompressionType[\"LZ4_FRAME\"] = 0] = \"LZ4_FRAME\";\n    CompressionType[CompressionType[\"ZSTD\"] = 1] = \"ZSTD\";\n})(CompressionType || (CompressionType = {}));\n\n//# sourceMappingURL=compression-type.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { BodyCompressionMethod } from './body-compression-method.mjs';\nimport { CompressionType } from './compression-type.mjs';\n/**\n * Optional compression for the memory buffers constituting IPC message\n * bodies. Intended for use with RecordBatch but could be used for other\n * message types\n */\nexport class BodyCompression {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsBodyCompression(bb, obj) {\n        return (obj || new BodyCompression()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsBodyCompression(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new BodyCompression()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    /**\n     * Compressor library.\n     * For LZ4_FRAME, each compressed buffer must consist of a single frame.\n     */\n    codec() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt8(this.bb_pos + offset) : CompressionType.LZ4_FRAME;\n    }\n    /**\n     * Indicates the way the record batch body was compressed\n     */\n    method() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.readInt8(this.bb_pos + offset) : BodyCompressionMethod.BUFFER;\n    }\n    static startBodyCompression(builder) {\n        builder.startObject(2);\n    }\n    static addCodec(builder, codec) {\n        builder.addFieldInt8(0, codec, CompressionType.LZ4_FRAME);\n    }\n    static addMethod(builder, method) {\n        builder.addFieldInt8(1, method, BodyCompressionMethod.BUFFER);\n    }\n    static endBodyCompression(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createBodyCompression(builder, codec, method) {\n        BodyCompression.startBodyCompression(builder);\n        BodyCompression.addCodec(builder, codec);\n        BodyCompression.addMethod(builder, method);\n        return BodyCompression.endBodyCompression(builder);\n    }\n}\n\n//# sourceMappingURL=body-compression.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\n/**\n * ----------------------------------------------------------------------\n * A Buffer represents a single contiguous memory segment\n */\nexport class Buffer {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    /**\n     * The relative offset into the shared memory page where the bytes for this\n     * buffer starts\n     */\n    offset() {\n        return this.bb.readInt64(this.bb_pos);\n    }\n    /**\n     * The absolute length (in bytes) of the memory buffer. The memory is found\n     * from offset (inclusive) to offset + length (non-inclusive). When building\n     * messages using the encapsulated IPC message, padding bytes may be written\n     * after a buffer, but such padding bytes do not need to be accounted for in\n     * the size here.\n     */\n    length() {\n        return this.bb.readInt64(this.bb_pos + 8);\n    }\n    static sizeOf() {\n        return 16;\n    }\n    static createBuffer(builder, offset, length) {\n        builder.prep(8, 16);\n        builder.writeInt64(BigInt(length !== null && length !== void 0 ? length : 0));\n        builder.writeInt64(BigInt(offset !== null && offset !== void 0 ? offset : 0));\n        return builder.offset();\n    }\n}\n\n//# sourceMappingURL=buffer.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\n/**\n * ----------------------------------------------------------------------\n * Data structures for describing a table row batch (a collection of\n * equal-length Arrow arrays)\n * Metadata about a field at some level of a nested type tree (but not\n * its children).\n *\n * For example, a List<Int16> with values `[[1, 2, 3], null, [4], [5, 6], null]`\n * would have {length: 5, null_count: 2} for its List node, and {length: 6,\n * null_count: 0} for its Int16 node, as separate FieldNode structs\n */\nexport class FieldNode {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    /**\n     * The number of value slots in the Arrow array at this level of a nested\n     * tree\n     */\n    length() {\n        return this.bb.readInt64(this.bb_pos);\n    }\n    /**\n     * The number of observed nulls. Fields with null_count == 0 may choose not\n     * to write their physical validity bitmap out as a materialized buffer,\n     * instead setting the length of the bitmap buffer to 0.\n     */\n    nullCount() {\n        return this.bb.readInt64(this.bb_pos + 8);\n    }\n    static sizeOf() {\n        return 16;\n    }\n    static createFieldNode(builder, length, null_count) {\n        builder.prep(8, 16);\n        builder.writeInt64(BigInt(null_count !== null && null_count !== void 0 ? null_count : 0));\n        builder.writeInt64(BigInt(length !== null && length !== void 0 ? length : 0));\n        return builder.offset();\n    }\n}\n\n//# sourceMappingURL=field-node.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { BodyCompression } from './body-compression.mjs';\nimport { Buffer } from './buffer.mjs';\nimport { FieldNode } from './field-node.mjs';\n/**\n * A data header describing the shared memory layout of a \"record\" or \"row\"\n * batch. Some systems call this a \"row batch\" internally and others a \"record\n * batch\".\n */\nexport class RecordBatch {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsRecordBatch(bb, obj) {\n        return (obj || new RecordBatch()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsRecordBatch(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new RecordBatch()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    /**\n     * number of records / rows. The arrays in the batch should all have this\n     * length\n     */\n    length() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt64(this.bb_pos + offset) : BigInt('0');\n    }\n    /**\n     * Nodes correspond to the pre-ordered flattened logical schema\n     */\n    nodes(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? (obj || new FieldNode()).__init(this.bb.__vector(this.bb_pos + offset) + index * 16, this.bb) : null;\n    }\n    nodesLength() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    /**\n     * Buffers correspond to the pre-ordered flattened buffer tree\n     *\n     * The number of buffers appended to this list depends on the schema. For\n     * example, most primitive arrays will have 2 buffers, 1 for the validity\n     * bitmap and 1 for the values. For struct arrays, there will only be a\n     * single buffer for the validity (nulls) bitmap\n     */\n    buffers(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? (obj || new Buffer()).__init(this.bb.__vector(this.bb_pos + offset) + index * 16, this.bb) : null;\n    }\n    buffersLength() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    /**\n     * Optional compression of the message body\n     */\n    compression(obj) {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? (obj || new BodyCompression()).__init(this.bb.__indirect(this.bb_pos + offset), this.bb) : null;\n    }\n    static startRecordBatch(builder) {\n        builder.startObject(4);\n    }\n    static addLength(builder, length) {\n        builder.addFieldInt64(0, length, BigInt('0'));\n    }\n    static addNodes(builder, nodesOffset) {\n        builder.addFieldOffset(1, nodesOffset, 0);\n    }\n    static startNodesVector(builder, numElems) {\n        builder.startVector(16, numElems, 8);\n    }\n    static addBuffers(builder, buffersOffset) {\n        builder.addFieldOffset(2, buffersOffset, 0);\n    }\n    static startBuffersVector(builder, numElems) {\n        builder.startVector(16, numElems, 8);\n    }\n    static addCompression(builder, compressionOffset) {\n        builder.addFieldOffset(3, compressionOffset, 0);\n    }\n    static endRecordBatch(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n}\n\n//# sourceMappingURL=record-batch.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { RecordBatch } from './record-batch.mjs';\n/**\n * For sending dictionary encoding information. Any Field can be\n * dictionary-encoded, but in this case none of its children may be\n * dictionary-encoded.\n * There is one vector / column per dictionary, but that vector / column\n * may be spread across multiple dictionary batches by using the isDelta\n * flag\n */\nexport class DictionaryBatch {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsDictionaryBatch(bb, obj) {\n        return (obj || new DictionaryBatch()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsDictionaryBatch(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new DictionaryBatch()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    id() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt64(this.bb_pos + offset) : BigInt('0');\n    }\n    data(obj) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? (obj || new RecordBatch()).__init(this.bb.__indirect(this.bb_pos + offset), this.bb) : null;\n    }\n    /**\n     * If isDelta is true the values in the dictionary are to be appended to a\n     * dictionary with the indicated id. If isDelta is false this dictionary\n     * should replace the existing dictionary.\n     */\n    isDelta() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    static startDictionaryBatch(builder) {\n        builder.startObject(3);\n    }\n    static addId(builder, id) {\n        builder.addFieldInt64(0, id, BigInt('0'));\n    }\n    static addData(builder, dataOffset) {\n        builder.addFieldOffset(1, dataOffset, 0);\n    }\n    static addIsDelta(builder, isDelta) {\n        builder.addFieldInt8(2, +isDelta, +false);\n    }\n    static endDictionaryBatch(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n}\n\n//# sourceMappingURL=dictionary-batch.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\n/**\n * ----------------------------------------------------------------------\n * Endianness of the platform producing the data\n */\nexport var Endianness;\n(function (Endianness) {\n    Endianness[Endianness[\"Little\"] = 0] = \"Little\";\n    Endianness[Endianness[\"Big\"] = 1] = \"Big\";\n})(Endianness || (Endianness = {}));\n\n//# sourceMappingURL=endianness.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\n/**\n * ----------------------------------------------------------------------\n * Dictionary encoding metadata\n * Maintained for forwards compatibility, in the future\n * Dictionaries might be explicit maps between integers and values\n * allowing for non-contiguous index values\n */\nexport var DictionaryKind;\n(function (DictionaryKind) {\n    DictionaryKind[DictionaryKind[\"DenseArray\"] = 0] = \"DenseArray\";\n})(DictionaryKind || (DictionaryKind = {}));\n\n//# sourceMappingURL=dictionary-kind.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nexport class Int {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsInt(bb, obj) {\n        return (obj || new Int()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsInt(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Int()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    bitWidth() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : 0;\n    }\n    isSigned() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    static startInt(builder) {\n        builder.startObject(2);\n    }\n    static addBitWidth(builder, bitWidth) {\n        builder.addFieldInt32(0, bitWidth, 0);\n    }\n    static addIsSigned(builder, isSigned) {\n        builder.addFieldInt8(1, +isSigned, +false);\n    }\n    static endInt(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createInt(builder, bitWidth, isSigned) {\n        Int.startInt(builder);\n        Int.addBitWidth(builder, bitWidth);\n        Int.addIsSigned(builder, isSigned);\n        return Int.endInt(builder);\n    }\n}\n\n//# sourceMappingURL=int.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { DictionaryKind } from './dictionary-kind.mjs';\nimport { Int } from './int.mjs';\nexport class DictionaryEncoding {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsDictionaryEncoding(bb, obj) {\n        return (obj || new DictionaryEncoding()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsDictionaryEncoding(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new DictionaryEncoding()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    /**\n     * The known dictionary id in the application where this data is used. In\n     * the file or streaming formats, the dictionary ids are found in the\n     * DictionaryBatch messages\n     */\n    id() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt64(this.bb_pos + offset) : BigInt('0');\n    }\n    /**\n     * The dictionary indices are constrained to be non-negative integers. If\n     * this field is null, the indices must be signed int32. To maximize\n     * cross-language compatibility and performance, implementations are\n     * recommended to prefer signed integer types over unsigned integer types\n     * and to avoid uint64 indices unless they are required by an application.\n     */\n    indexType(obj) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? (obj || new Int()).__init(this.bb.__indirect(this.bb_pos + offset), this.bb) : null;\n    }\n    /**\n     * By default, dictionaries are not ordered, or the order does not have\n     * semantic meaning. In some statistical, applications, dictionary-encoding\n     * is used to represent ordered categorical data, and we provide a way to\n     * preserve that metadata here\n     */\n    isOrdered() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    dictionaryKind() {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : DictionaryKind.DenseArray;\n    }\n    static startDictionaryEncoding(builder) {\n        builder.startObject(4);\n    }\n    static addId(builder, id) {\n        builder.addFieldInt64(0, id, BigInt('0'));\n    }\n    static addIndexType(builder, indexTypeOffset) {\n        builder.addFieldOffset(1, indexTypeOffset, 0);\n    }\n    static addIsOrdered(builder, isOrdered) {\n        builder.addFieldInt8(2, +isOrdered, +false);\n    }\n    static addDictionaryKind(builder, dictionaryKind) {\n        builder.addFieldInt16(3, dictionaryKind, DictionaryKind.DenseArray);\n    }\n    static endDictionaryEncoding(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n}\n\n//# sourceMappingURL=dictionary-encoding.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\n/**\n * ----------------------------------------------------------------------\n * user defined key value pairs to add custom metadata to arrow\n * key namespacing is the responsibility of the user\n */\nexport class KeyValue {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsKeyValue(bb, obj) {\n        return (obj || new KeyValue()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsKeyValue(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new KeyValue()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    key(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    value(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    static startKeyValue(builder) {\n        builder.startObject(2);\n    }\n    static addKey(builder, keyOffset) {\n        builder.addFieldOffset(0, keyOffset, 0);\n    }\n    static addValue(builder, valueOffset) {\n        builder.addFieldOffset(1, valueOffset, 0);\n    }\n    static endKeyValue(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createKeyValue(builder, keyOffset, valueOffset) {\n        KeyValue.startKeyValue(builder);\n        KeyValue.addKey(builder, keyOffset);\n        KeyValue.addValue(builder, valueOffset);\n        return KeyValue.endKeyValue(builder);\n    }\n}\n\n//# sourceMappingURL=key-value.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\n/**\n * Opaque binary data\n */\nexport class Binary {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsBinary(bb, obj) {\n        return (obj || new Binary()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsBinary(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Binary()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static startBinary(builder) {\n        builder.startObject(0);\n    }\n    static endBinary(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createBinary(builder) {\n        Binary.startBinary(builder);\n        return Binary.endBinary(builder);\n    }\n}\n\n//# sourceMappingURL=binary.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nexport class Bool {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsBool(bb, obj) {\n        return (obj || new Bool()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsBool(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Bool()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static startBool(builder) {\n        builder.startObject(0);\n    }\n    static endBool(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createBool(builder) {\n        Bool.startBool(builder);\n        return Bool.endBool(builder);\n    }\n}\n\n//# sourceMappingURL=bool.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { DateUnit } from './date-unit.mjs';\n/**\n * Date is either a 32-bit or 64-bit signed integer type representing an\n * elapsed time since UNIX epoch (1970-01-01), stored in either of two units:\n *\n * * Milliseconds (64 bits) indicating UNIX time elapsed since the epoch (no\n *   leap seconds), where the values are evenly divisible by 86400000\n * * Days (32 bits) since the UNIX epoch\n */\nexport class Date {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsDate(bb, obj) {\n        return (obj || new Date()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsDate(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Date()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    unit() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : DateUnit.MILLISECOND;\n    }\n    static startDate(builder) {\n        builder.startObject(1);\n    }\n    static addUnit(builder, unit) {\n        builder.addFieldInt16(0, unit, DateUnit.MILLISECOND);\n    }\n    static endDate(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createDate(builder, unit) {\n        Date.startDate(builder);\n        Date.addUnit(builder, unit);\n        return Date.endDate(builder);\n    }\n}\n\n//# sourceMappingURL=date.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\n/**\n * Exact decimal value represented as an integer value in two's\n * complement. Currently only 128-bit (16-byte) and 256-bit (32-byte) integers\n * are used. The representation uses the endianness indicated\n * in the Schema.\n */\nexport class Decimal {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsDecimal(bb, obj) {\n        return (obj || new Decimal()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsDecimal(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Decimal()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    /**\n     * Total number of decimal digits\n     */\n    precision() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : 0;\n    }\n    /**\n     * Number of digits after the decimal point \".\"\n     */\n    scale() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : 0;\n    }\n    /**\n     * Number of bits per value. The only accepted widths are 128 and 256.\n     * We use bitWidth for consistency with Int::bitWidth.\n     */\n    bitWidth() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : 128;\n    }\n    static startDecimal(builder) {\n        builder.startObject(3);\n    }\n    static addPrecision(builder, precision) {\n        builder.addFieldInt32(0, precision, 0);\n    }\n    static addScale(builder, scale) {\n        builder.addFieldInt32(1, scale, 0);\n    }\n    static addBitWidth(builder, bitWidth) {\n        builder.addFieldInt32(2, bitWidth, 128);\n    }\n    static endDecimal(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createDecimal(builder, precision, scale, bitWidth) {\n        Decimal.startDecimal(builder);\n        Decimal.addPrecision(builder, precision);\n        Decimal.addScale(builder, scale);\n        Decimal.addBitWidth(builder, bitWidth);\n        return Decimal.endDecimal(builder);\n    }\n}\n\n//# sourceMappingURL=decimal.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { TimeUnit } from './time-unit.mjs';\nexport class Duration {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsDuration(bb, obj) {\n        return (obj || new Duration()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsDuration(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Duration()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    unit() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : TimeUnit.MILLISECOND;\n    }\n    static startDuration(builder) {\n        builder.startObject(1);\n    }\n    static addUnit(builder, unit) {\n        builder.addFieldInt16(0, unit, TimeUnit.MILLISECOND);\n    }\n    static endDuration(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createDuration(builder, unit) {\n        Duration.startDuration(builder);\n        Duration.addUnit(builder, unit);\n        return Duration.endDuration(builder);\n    }\n}\n\n//# sourceMappingURL=duration.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nexport class FixedSizeBinary {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsFixedSizeBinary(bb, obj) {\n        return (obj || new FixedSizeBinary()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsFixedSizeBinary(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new FixedSizeBinary()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    /**\n     * Number of bytes per value\n     */\n    byteWidth() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : 0;\n    }\n    static startFixedSizeBinary(builder) {\n        builder.startObject(1);\n    }\n    static addByteWidth(builder, byteWidth) {\n        builder.addFieldInt32(0, byteWidth, 0);\n    }\n    static endFixedSizeBinary(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createFixedSizeBinary(builder, byteWidth) {\n        FixedSizeBinary.startFixedSizeBinary(builder);\n        FixedSizeBinary.addByteWidth(builder, byteWidth);\n        return FixedSizeBinary.endFixedSizeBinary(builder);\n    }\n}\n\n//# sourceMappingURL=fixed-size-binary.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nexport class FixedSizeList {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsFixedSizeList(bb, obj) {\n        return (obj || new FixedSizeList()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsFixedSizeList(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new FixedSizeList()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    /**\n     * Number of list items per value\n     */\n    listSize() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : 0;\n    }\n    static startFixedSizeList(builder) {\n        builder.startObject(1);\n    }\n    static addListSize(builder, listSize) {\n        builder.addFieldInt32(0, listSize, 0);\n    }\n    static endFixedSizeList(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createFixedSizeList(builder, listSize) {\n        FixedSizeList.startFixedSizeList(builder);\n        FixedSizeList.addListSize(builder, listSize);\n        return FixedSizeList.endFixedSizeList(builder);\n    }\n}\n\n//# sourceMappingURL=fixed-size-list.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { Precision } from './precision.mjs';\nexport class FloatingPoint {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsFloatingPoint(bb, obj) {\n        return (obj || new FloatingPoint()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsFloatingPoint(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new FloatingPoint()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    precision() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : Precision.HALF;\n    }\n    static startFloatingPoint(builder) {\n        builder.startObject(1);\n    }\n    static addPrecision(builder, precision) {\n        builder.addFieldInt16(0, precision, Precision.HALF);\n    }\n    static endFloatingPoint(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createFloatingPoint(builder, precision) {\n        FloatingPoint.startFloatingPoint(builder);\n        FloatingPoint.addPrecision(builder, precision);\n        return FloatingPoint.endFloatingPoint(builder);\n    }\n}\n\n//# sourceMappingURL=floating-point.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { IntervalUnit } from './interval-unit.mjs';\nexport class Interval {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsInterval(bb, obj) {\n        return (obj || new Interval()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsInterval(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Interval()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    unit() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : IntervalUnit.YEAR_MONTH;\n    }\n    static startInterval(builder) {\n        builder.startObject(1);\n    }\n    static addUnit(builder, unit) {\n        builder.addFieldInt16(0, unit, IntervalUnit.YEAR_MONTH);\n    }\n    static endInterval(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createInterval(builder, unit) {\n        Interval.startInterval(builder);\n        Interval.addUnit(builder, unit);\n        return Interval.endInterval(builder);\n    }\n}\n\n//# sourceMappingURL=interval.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\n/**\n * Same as Binary, but with 64-bit offsets, allowing to represent\n * extremely large data values.\n */\nexport class LargeBinary {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsLargeBinary(bb, obj) {\n        return (obj || new LargeBinary()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsLargeBinary(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new LargeBinary()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static startLargeBinary(builder) {\n        builder.startObject(0);\n    }\n    static endLargeBinary(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createLargeBinary(builder) {\n        LargeBinary.startLargeBinary(builder);\n        return LargeBinary.endLargeBinary(builder);\n    }\n}\n\n//# sourceMappingURL=large-binary.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\n/**\n * Same as Utf8, but with 64-bit offsets, allowing to represent\n * extremely large data values.\n */\nexport class LargeUtf8 {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsLargeUtf8(bb, obj) {\n        return (obj || new LargeUtf8()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsLargeUtf8(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new LargeUtf8()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static startLargeUtf8(builder) {\n        builder.startObject(0);\n    }\n    static endLargeUtf8(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createLargeUtf8(builder) {\n        LargeUtf8.startLargeUtf8(builder);\n        return LargeUtf8.endLargeUtf8(builder);\n    }\n}\n\n//# sourceMappingURL=large-utf8.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nexport class List {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsList(bb, obj) {\n        return (obj || new List()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsList(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new List()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static startList(builder) {\n        builder.startObject(0);\n    }\n    static endList(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createList(builder) {\n        List.startList(builder);\n        return List.endList(builder);\n    }\n}\n\n//# sourceMappingURL=list.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\n/**\n * A Map is a logical nested type that is represented as\n *\n * List<entries: Struct<key: K, value: V>>\n *\n * In this layout, the keys and values are each respectively contiguous. We do\n * not constrain the key and value types, so the application is responsible\n * for ensuring that the keys are hashable and unique. Whether the keys are sorted\n * may be set in the metadata for this field.\n *\n * In a field with Map type, the field has a child Struct field, which then\n * has two children: key type and the second the value type. The names of the\n * child fields may be respectively \"entries\", \"key\", and \"value\", but this is\n * not enforced.\n *\n * Map\n * ```text\n *   - child[0] entries: Struct\n *     - child[0] key: K\n *     - child[1] value: V\n * ```\n * Neither the \"entries\" field nor the \"key\" field may be nullable.\n *\n * The metadata is structured so that Arrow systems without special handling\n * for Map can make Map an alias for List. The \"layout\" attribute for the Map\n * field must have the same contents as a List.\n */\nexport class Map {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsMap(bb, obj) {\n        return (obj || new Map()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsMap(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Map()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    /**\n     * Set to true if the keys within each value are sorted\n     */\n    keysSorted() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    static startMap(builder) {\n        builder.startObject(1);\n    }\n    static addKeysSorted(builder, keysSorted) {\n        builder.addFieldInt8(0, +keysSorted, +false);\n    }\n    static endMap(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createMap(builder, keysSorted) {\n        Map.startMap(builder);\n        Map.addKeysSorted(builder, keysSorted);\n        return Map.endMap(builder);\n    }\n}\n\n//# sourceMappingURL=map.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\n/**\n * These are stored in the flatbuffer in the Type union below\n */\nexport class Null {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsNull(bb, obj) {\n        return (obj || new Null()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsNull(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Null()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static startNull(builder) {\n        builder.startObject(0);\n    }\n    static endNull(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createNull(builder) {\n        Null.startNull(builder);\n        return Null.endNull(builder);\n    }\n}\n\n//# sourceMappingURL=null.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\n/**\n * A Struct_ in the flatbuffer metadata is the same as an Arrow Struct\n * (according to the physical memory layout). We used Struct_ here as\n * Struct is a reserved word in Flatbuffers\n */\nexport class Struct_ {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsStruct_(bb, obj) {\n        return (obj || new Struct_()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsStruct_(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Struct_()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static startStruct_(builder) {\n        builder.startObject(0);\n    }\n    static endStruct_(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createStruct_(builder) {\n        Struct_.startStruct_(builder);\n        return Struct_.endStruct_(builder);\n    }\n}\n\n//# sourceMappingURL=struct-.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { TimeUnit } from './time-unit.mjs';\n/**\n * Time is either a 32-bit or 64-bit signed integer type representing an\n * elapsed time since midnight, stored in either of four units: seconds,\n * milliseconds, microseconds or nanoseconds.\n *\n * The integer `bitWidth` depends on the `unit` and must be one of the following:\n * * SECOND and MILLISECOND: 32 bits\n * * MICROSECOND and NANOSECOND: 64 bits\n *\n * The allowed values are between 0 (inclusive) and 86400 (=24*60*60) seconds\n * (exclusive), adjusted for the time unit (for example, up to 86400000\n * exclusive for the MILLISECOND unit).\n * This definition doesn't allow for leap seconds. Time values from\n * measurements with leap seconds will need to be corrected when ingesting\n * into Arrow (for example by replacing the value 86400 with 86399).\n */\nexport class Time {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsTime(bb, obj) {\n        return (obj || new Time()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsTime(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Time()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    unit() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : TimeUnit.MILLISECOND;\n    }\n    bitWidth() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.readInt32(this.bb_pos + offset) : 32;\n    }\n    static startTime(builder) {\n        builder.startObject(2);\n    }\n    static addUnit(builder, unit) {\n        builder.addFieldInt16(0, unit, TimeUnit.MILLISECOND);\n    }\n    static addBitWidth(builder, bitWidth) {\n        builder.addFieldInt32(1, bitWidth, 32);\n    }\n    static endTime(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createTime(builder, unit, bitWidth) {\n        Time.startTime(builder);\n        Time.addUnit(builder, unit);\n        Time.addBitWidth(builder, bitWidth);\n        return Time.endTime(builder);\n    }\n}\n\n//# sourceMappingURL=time.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { TimeUnit } from './time-unit.mjs';\n/**\n * Timestamp is a 64-bit signed integer representing an elapsed time since a\n * fixed epoch, stored in either of four units: seconds, milliseconds,\n * microseconds or nanoseconds, and is optionally annotated with a timezone.\n *\n * Timestamp values do not include any leap seconds (in other words, all\n * days are considered 86400 seconds long).\n *\n * Timestamps with a non-empty timezone\n * ------------------------------------\n *\n * If a Timestamp column has a non-empty timezone value, its epoch is\n * 1970-01-01 00:00:00 (January 1st 1970, midnight) in the *UTC* timezone\n * (the Unix epoch), regardless of the Timestamp's own timezone.\n *\n * Therefore, timestamp values with a non-empty timezone correspond to\n * physical points in time together with some additional information about\n * how the data was obtained and/or how to display it (the timezone).\n *\n *   For example, the timestamp value 0 with the timezone string \"Europe/Paris\"\n *   corresponds to \"January 1st 1970, 00h00\" in the UTC timezone, but the\n *   application may prefer to display it as \"January 1st 1970, 01h00\" in\n *   the Europe/Paris timezone (which is the same physical point in time).\n *\n * One consequence is that timestamp values with a non-empty timezone\n * can be compared and ordered directly, since they all share the same\n * well-known point of reference (the Unix epoch).\n *\n * Timestamps with an unset / empty timezone\n * -----------------------------------------\n *\n * If a Timestamp column has no timezone value, its epoch is\n * 1970-01-01 00:00:00 (January 1st 1970, midnight) in an *unknown* timezone.\n *\n * Therefore, timestamp values without a timezone cannot be meaningfully\n * interpreted as physical points in time, but only as calendar / clock\n * indications (\"wall clock time\") in an unspecified timezone.\n *\n *   For example, the timestamp value 0 with an empty timezone string\n *   corresponds to \"January 1st 1970, 00h00\" in an unknown timezone: there\n *   is not enough information to interpret it as a well-defined physical\n *   point in time.\n *\n * One consequence is that timestamp values without a timezone cannot\n * be reliably compared or ordered, since they may have different points of\n * reference.  In particular, it is *not* possible to interpret an unset\n * or empty timezone as the same as \"UTC\".\n *\n * Conversion between timezones\n * ----------------------------\n *\n * If a Timestamp column has a non-empty timezone, changing the timezone\n * to a different non-empty value is a metadata-only operation:\n * the timestamp values need not change as their point of reference remains\n * the same (the Unix epoch).\n *\n * However, if a Timestamp column has no timezone value, changing it to a\n * non-empty value requires to think about the desired semantics.\n * One possibility is to assume that the original timestamp values are\n * relative to the epoch of the timezone being set; timestamp values should\n * then adjusted to the Unix epoch (for example, changing the timezone from\n * empty to \"Europe/Paris\" would require converting the timestamp values\n * from \"Europe/Paris\" to \"UTC\", which seems counter-intuitive but is\n * nevertheless correct).\n *\n * Guidelines for encoding data from external libraries\n * ----------------------------------------------------\n *\n * Date & time libraries often have multiple different data types for temporal\n * data. In order to ease interoperability between different implementations the\n * Arrow project has some recommendations for encoding these types into a Timestamp\n * column.\n *\n * An \"instant\" represents a physical point in time that has no relevant timezone\n * (for example, astronomical data). To encode an instant, use a Timestamp with\n * the timezone string set to \"UTC\", and make sure the Timestamp values\n * are relative to the UTC epoch (January 1st 1970, midnight).\n *\n * A \"zoned date-time\" represents a physical point in time annotated with an\n * informative timezone (for example, the timezone in which the data was\n * recorded).  To encode a zoned date-time, use a Timestamp with the timezone\n * string set to the name of the timezone, and make sure the Timestamp values\n * are relative to the UTC epoch (January 1st 1970, midnight).\n *\n *  (There is some ambiguity between an instant and a zoned date-time with the\n *   UTC timezone.  Both of these are stored the same in Arrow.  Typically,\n *   this distinction does not matter.  If it does, then an application should\n *   use custom metadata or an extension type to distinguish between the two cases.)\n *\n * An \"offset date-time\" represents a physical point in time combined with an\n * explicit offset from UTC.  To encode an offset date-time, use a Timestamp\n * with the timezone string set to the numeric timezone offset string\n * (e.g. \"+03:00\"), and make sure the Timestamp values are relative to\n * the UTC epoch (January 1st 1970, midnight).\n *\n * A \"naive date-time\" (also called \"local date-time\" in some libraries)\n * represents a wall clock time combined with a calendar date, but with\n * no indication of how to map this information to a physical point in time.\n * Naive date-times must be handled with care because of this missing\n * information, and also because daylight saving time (DST) may make\n * some values ambiguous or nonexistent. A naive date-time may be\n * stored as a struct with Date and Time fields. However, it may also be\n * encoded into a Timestamp column with an empty timezone. The timestamp\n * values should be computed \"as if\" the timezone of the date-time values\n * was UTC; for example, the naive date-time \"January 1st 1970, 00h00\" would\n * be encoded as timestamp value 0.\n */\nexport class Timestamp {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsTimestamp(bb, obj) {\n        return (obj || new Timestamp()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsTimestamp(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Timestamp()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    unit() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : TimeUnit.SECOND;\n    }\n    timezone(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    static startTimestamp(builder) {\n        builder.startObject(2);\n    }\n    static addUnit(builder, unit) {\n        builder.addFieldInt16(0, unit, TimeUnit.SECOND);\n    }\n    static addTimezone(builder, timezoneOffset) {\n        builder.addFieldOffset(1, timezoneOffset, 0);\n    }\n    static endTimestamp(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createTimestamp(builder, unit, timezoneOffset) {\n        Timestamp.startTimestamp(builder);\n        Timestamp.addUnit(builder, unit);\n        Timestamp.addTimezone(builder, timezoneOffset);\n        return Timestamp.endTimestamp(builder);\n    }\n}\n\n//# sourceMappingURL=timestamp.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { UnionMode } from './union-mode.mjs';\n/**\n * A union is a complex type with children in Field\n * By default ids in the type vector refer to the offsets in the children\n * optionally typeIds provides an indirection between the child offset and the type id\n * for each child `typeIds[offset]` is the id used in the type vector\n */\nexport class Union {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsUnion(bb, obj) {\n        return (obj || new Union()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsUnion(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Union()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    mode() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : UnionMode.Sparse;\n    }\n    typeIds(index) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.readInt32(this.bb.__vector(this.bb_pos + offset) + index * 4) : 0;\n    }\n    typeIdsLength() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    typeIdsArray() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? new Int32Array(this.bb.bytes().buffer, this.bb.bytes().byteOffset + this.bb.__vector(this.bb_pos + offset), this.bb.__vector_len(this.bb_pos + offset)) : null;\n    }\n    static startUnion(builder) {\n        builder.startObject(2);\n    }\n    static addMode(builder, mode) {\n        builder.addFieldInt16(0, mode, UnionMode.Sparse);\n    }\n    static addTypeIds(builder, typeIdsOffset) {\n        builder.addFieldOffset(1, typeIdsOffset, 0);\n    }\n    static createTypeIdsVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addInt32(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startTypeIdsVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static endUnion(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createUnion(builder, mode, typeIdsOffset) {\n        Union.startUnion(builder);\n        Union.addMode(builder, mode);\n        Union.addTypeIds(builder, typeIdsOffset);\n        return Union.endUnion(builder);\n    }\n}\n\n//# sourceMappingURL=union.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\n/**\n * Unicode with UTF-8 encoding\n */\nexport class Utf8 {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsUtf8(bb, obj) {\n        return (obj || new Utf8()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsUtf8(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Utf8()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static startUtf8(builder) {\n        builder.startObject(0);\n    }\n    static endUtf8(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static createUtf8(builder) {\n        Utf8.startUtf8(builder);\n        return Utf8.endUtf8(builder);\n    }\n}\n\n//# sourceMappingURL=utf8.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport { Binary } from './binary.mjs';\nimport { Bool } from './bool.mjs';\nimport { Date } from './date.mjs';\nimport { Decimal } from './decimal.mjs';\nimport { Duration } from './duration.mjs';\nimport { FixedSizeBinary } from './fixed-size-binary.mjs';\nimport { FixedSizeList } from './fixed-size-list.mjs';\nimport { FloatingPoint } from './floating-point.mjs';\nimport { Int } from './int.mjs';\nimport { Interval } from './interval.mjs';\nimport { LargeBinary } from './large-binary.mjs';\nimport { LargeList } from './large-list.mjs';\nimport { LargeUtf8 } from './large-utf8.mjs';\nimport { List } from './list.mjs';\nimport { Map } from './map.mjs';\nimport { Null } from './null.mjs';\nimport { RunEndEncoded } from './run-end-encoded.mjs';\nimport { Struct_ } from './struct-.mjs';\nimport { Time } from './time.mjs';\nimport { Timestamp } from './timestamp.mjs';\nimport { Union } from './union.mjs';\nimport { Utf8 } from './utf8.mjs';\n/**\n * ----------------------------------------------------------------------\n * Top-level Type value, enabling extensible type-specific metadata. We can\n * add new logical types to Type without breaking backwards compatibility\n */\nexport var Type;\n(function (Type) {\n    Type[Type[\"NONE\"] = 0] = \"NONE\";\n    Type[Type[\"Null\"] = 1] = \"Null\";\n    Type[Type[\"Int\"] = 2] = \"Int\";\n    Type[Type[\"FloatingPoint\"] = 3] = \"FloatingPoint\";\n    Type[Type[\"Binary\"] = 4] = \"Binary\";\n    Type[Type[\"Utf8\"] = 5] = \"Utf8\";\n    Type[Type[\"Bool\"] = 6] = \"Bool\";\n    Type[Type[\"Decimal\"] = 7] = \"Decimal\";\n    Type[Type[\"Date\"] = 8] = \"Date\";\n    Type[Type[\"Time\"] = 9] = \"Time\";\n    Type[Type[\"Timestamp\"] = 10] = \"Timestamp\";\n    Type[Type[\"Interval\"] = 11] = \"Interval\";\n    Type[Type[\"List\"] = 12] = \"List\";\n    Type[Type[\"Struct_\"] = 13] = \"Struct_\";\n    Type[Type[\"Union\"] = 14] = \"Union\";\n    Type[Type[\"FixedSizeBinary\"] = 15] = \"FixedSizeBinary\";\n    Type[Type[\"FixedSizeList\"] = 16] = \"FixedSizeList\";\n    Type[Type[\"Map\"] = 17] = \"Map\";\n    Type[Type[\"Duration\"] = 18] = \"Duration\";\n    Type[Type[\"LargeBinary\"] = 19] = \"LargeBinary\";\n    Type[Type[\"LargeUtf8\"] = 20] = \"LargeUtf8\";\n    Type[Type[\"LargeList\"] = 21] = \"LargeList\";\n    Type[Type[\"RunEndEncoded\"] = 22] = \"RunEndEncoded\";\n})(Type || (Type = {}));\nexport function unionToType(type, accessor) {\n    switch (Type[type]) {\n        case 'NONE': return null;\n        case 'Null': return accessor(new Null());\n        case 'Int': return accessor(new Int());\n        case 'FloatingPoint': return accessor(new FloatingPoint());\n        case 'Binary': return accessor(new Binary());\n        case 'Utf8': return accessor(new Utf8());\n        case 'Bool': return accessor(new Bool());\n        case 'Decimal': return accessor(new Decimal());\n        case 'Date': return accessor(new Date());\n        case 'Time': return accessor(new Time());\n        case 'Timestamp': return accessor(new Timestamp());\n        case 'Interval': return accessor(new Interval());\n        case 'List': return accessor(new List());\n        case 'Struct_': return accessor(new Struct_());\n        case 'Union': return accessor(new Union());\n        case 'FixedSizeBinary': return accessor(new FixedSizeBinary());\n        case 'FixedSizeList': return accessor(new FixedSizeList());\n        case 'Map': return accessor(new Map());\n        case 'Duration': return accessor(new Duration());\n        case 'LargeBinary': return accessor(new LargeBinary());\n        case 'LargeUtf8': return accessor(new LargeUtf8());\n        case 'LargeList': return accessor(new LargeList());\n        case 'RunEndEncoded': return accessor(new RunEndEncoded());\n        default: return null;\n    }\n}\nexport function unionListToType(type, accessor, index) {\n    switch (Type[type]) {\n        case 'NONE': return null;\n        case 'Null': return accessor(index, new Null());\n        case 'Int': return accessor(index, new Int());\n        case 'FloatingPoint': return accessor(index, new FloatingPoint());\n        case 'Binary': return accessor(index, new Binary());\n        case 'Utf8': return accessor(index, new Utf8());\n        case 'Bool': return accessor(index, new Bool());\n        case 'Decimal': return accessor(index, new Decimal());\n        case 'Date': return accessor(index, new Date());\n        case 'Time': return accessor(index, new Time());\n        case 'Timestamp': return accessor(index, new Timestamp());\n        case 'Interval': return accessor(index, new Interval());\n        case 'List': return accessor(index, new List());\n        case 'Struct_': return accessor(index, new Struct_());\n        case 'Union': return accessor(index, new Union());\n        case 'FixedSizeBinary': return accessor(index, new FixedSizeBinary());\n        case 'FixedSizeList': return accessor(index, new FixedSizeList());\n        case 'Map': return accessor(index, new Map());\n        case 'Duration': return accessor(index, new Duration());\n        case 'LargeBinary': return accessor(index, new LargeBinary());\n        case 'LargeUtf8': return accessor(index, new LargeUtf8());\n        case 'LargeList': return accessor(index, new LargeList());\n        case 'RunEndEncoded': return accessor(index, new RunEndEncoded());\n        default: return null;\n    }\n}\n\n//# sourceMappingURL=type.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { DictionaryEncoding } from './dictionary-encoding.mjs';\nimport { KeyValue } from './key-value.mjs';\nimport { Type } from './type.mjs';\n/**\n * ----------------------------------------------------------------------\n * A field represents a named column in a record / row batch or child of a\n * nested type.\n */\nexport class Field {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsField(bb, obj) {\n        return (obj || new Field()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsField(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Field()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    name(optionalEncoding) {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.__string(this.bb_pos + offset, optionalEncoding) : null;\n    }\n    /**\n     * Whether or not this field can contain nulls. Should be true in general.\n     */\n    nullable() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? !!this.bb.readInt8(this.bb_pos + offset) : false;\n    }\n    typeType() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.readUint8(this.bb_pos + offset) : Type.NONE;\n    }\n    /**\n     * This is the type of the decoded value if the field is dictionary encoded.\n     */\n    type(obj) {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? this.bb.__union(obj, this.bb_pos + offset) : null;\n    }\n    /**\n     * Present only if the field is dictionary encoded.\n     */\n    dictionary(obj) {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? (obj || new DictionaryEncoding()).__init(this.bb.__indirect(this.bb_pos + offset), this.bb) : null;\n    }\n    /**\n     * children apply only to nested data types like Struct, List and Union. For\n     * primitive types children will have length 0.\n     */\n    children(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 14);\n        return offset ? (obj || new Field()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos + offset) + index * 4), this.bb) : null;\n    }\n    childrenLength() {\n        const offset = this.bb.__offset(this.bb_pos, 14);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    /**\n     * User-defined metadata\n     */\n    customMetadata(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 16);\n        return offset ? (obj || new KeyValue()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos + offset) + index * 4), this.bb) : null;\n    }\n    customMetadataLength() {\n        const offset = this.bb.__offset(this.bb_pos, 16);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    static startField(builder) {\n        builder.startObject(7);\n    }\n    static addName(builder, nameOffset) {\n        builder.addFieldOffset(0, nameOffset, 0);\n    }\n    static addNullable(builder, nullable) {\n        builder.addFieldInt8(1, +nullable, +false);\n    }\n    static addTypeType(builder, typeType) {\n        builder.addFieldInt8(2, typeType, Type.NONE);\n    }\n    static addType(builder, typeOffset) {\n        builder.addFieldOffset(3, typeOffset, 0);\n    }\n    static addDictionary(builder, dictionaryOffset) {\n        builder.addFieldOffset(4, dictionaryOffset, 0);\n    }\n    static addChildren(builder, childrenOffset) {\n        builder.addFieldOffset(5, childrenOffset, 0);\n    }\n    static createChildrenVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addOffset(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startChildrenVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static addCustomMetadata(builder, customMetadataOffset) {\n        builder.addFieldOffset(6, customMetadataOffset, 0);\n    }\n    static createCustomMetadataVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addOffset(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startCustomMetadataVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static endField(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n}\n\n//# sourceMappingURL=field.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { Endianness } from './endianness.mjs';\nimport { Field } from './field.mjs';\nimport { KeyValue } from './key-value.mjs';\n/**\n * ----------------------------------------------------------------------\n * A Schema describes the columns in a row batch\n */\nexport class Schema {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsSchema(bb, obj) {\n        return (obj || new Schema()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsSchema(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Schema()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    /**\n     * endianness of the buffer\n     * it is Little Endian by default\n     * if endianness doesn't match the underlying system then the vectors need to be converted\n     */\n    endianness() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : Endianness.Little;\n    }\n    fields(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? (obj || new Field()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos + offset) + index * 4), this.bb) : null;\n    }\n    fieldsLength() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    customMetadata(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? (obj || new KeyValue()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos + offset) + index * 4), this.bb) : null;\n    }\n    customMetadataLength() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    /**\n     * Features used in the stream/file.\n     */\n    features(index) {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? this.bb.readInt64(this.bb.__vector(this.bb_pos + offset) + index * 8) : BigInt(0);\n    }\n    featuresLength() {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    static startSchema(builder) {\n        builder.startObject(4);\n    }\n    static addEndianness(builder, endianness) {\n        builder.addFieldInt16(0, endianness, Endianness.Little);\n    }\n    static addFields(builder, fieldsOffset) {\n        builder.addFieldOffset(1, fieldsOffset, 0);\n    }\n    static createFieldsVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addOffset(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startFieldsVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static addCustomMetadata(builder, customMetadataOffset) {\n        builder.addFieldOffset(2, customMetadataOffset, 0);\n    }\n    static createCustomMetadataVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addOffset(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startCustomMetadataVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static addFeatures(builder, featuresOffset) {\n        builder.addFieldOffset(3, featuresOffset, 0);\n    }\n    static createFeaturesVector(builder, data) {\n        builder.startVector(8, data.length, 8);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addInt64(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startFeaturesVector(builder, numElems) {\n        builder.startVector(8, numElems, 8);\n    }\n    static endSchema(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static finishSchemaBuffer(builder, offset) {\n        builder.finish(offset);\n    }\n    static finishSizePrefixedSchemaBuffer(builder, offset) {\n        builder.finish(offset, undefined, true);\n    }\n    static createSchema(builder, endianness, fieldsOffset, customMetadataOffset, featuresOffset) {\n        Schema.startSchema(builder);\n        Schema.addEndianness(builder, endianness);\n        Schema.addFields(builder, fieldsOffset);\n        Schema.addCustomMetadata(builder, customMetadataOffset);\n        Schema.addFeatures(builder, featuresOffset);\n        return Schema.endSchema(builder);\n    }\n}\n\n//# sourceMappingURL=schema.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport { DictionaryBatch } from './dictionary-batch.mjs';\nimport { RecordBatch } from './record-batch.mjs';\nimport { Schema } from './schema.mjs';\nimport { SparseTensor } from './sparse-tensor.mjs';\nimport { Tensor } from './tensor.mjs';\n/**\n * ----------------------------------------------------------------------\n * The root Message type\n * This union enables us to easily send different message types without\n * redundant storage, and in the future we can easily add new message types.\n *\n * Arrow implementations do not need to implement all of the message types,\n * which may include experimental metadata types. For maximum compatibility,\n * it is best to send data using RecordBatch\n */\nexport var MessageHeader;\n(function (MessageHeader) {\n    MessageHeader[MessageHeader[\"NONE\"] = 0] = \"NONE\";\n    MessageHeader[MessageHeader[\"Schema\"] = 1] = \"Schema\";\n    MessageHeader[MessageHeader[\"DictionaryBatch\"] = 2] = \"DictionaryBatch\";\n    MessageHeader[MessageHeader[\"RecordBatch\"] = 3] = \"RecordBatch\";\n    MessageHeader[MessageHeader[\"Tensor\"] = 4] = \"Tensor\";\n    MessageHeader[MessageHeader[\"SparseTensor\"] = 5] = \"SparseTensor\";\n})(MessageHeader || (MessageHeader = {}));\nexport function unionToMessageHeader(type, accessor) {\n    switch (MessageHeader[type]) {\n        case 'NONE': return null;\n        case 'Schema': return accessor(new Schema());\n        case 'DictionaryBatch': return accessor(new DictionaryBatch());\n        case 'RecordBatch': return accessor(new RecordBatch());\n        case 'Tensor': return accessor(new Tensor());\n        case 'SparseTensor': return accessor(new SparseTensor());\n        default: return null;\n    }\n}\nexport function unionListToMessageHeader(type, accessor, index) {\n    switch (MessageHeader[type]) {\n        case 'NONE': return null;\n        case 'Schema': return accessor(index, new Schema());\n        case 'DictionaryBatch': return accessor(index, new DictionaryBatch());\n        case 'RecordBatch': return accessor(index, new RecordBatch());\n        case 'Tensor': return accessor(index, new Tensor());\n        case 'SparseTensor': return accessor(index, new SparseTensor());\n        default: return null;\n    }\n}\n\n//# sourceMappingURL=message-header.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nexport { MetadataVersion } from './fb/metadata-version.mjs';\nexport { UnionMode } from './fb/union-mode.mjs';\nexport { Precision } from './fb/precision.mjs';\nexport { DateUnit } from './fb/date-unit.mjs';\nexport { TimeUnit } from './fb/time-unit.mjs';\nexport { IntervalUnit } from './fb/interval-unit.mjs';\nexport { MessageHeader } from './fb/message-header.mjs';\n/**\n * Main data type enumeration.\n *\n * Data types in this library are all *logical*. They can be expressed as\n * either a primitive physical type (bytes or bits of some fixed size), a\n * nested type consisting of other data types, or another data type (e.g. a\n * timestamp encoded as an int64).\n *\n * **Note**: Only non-negative enum values are written to an Arrow IPC payload.\n *\n * The rest of the values are specified here so TypeScript can narrow the type\n * signatures further beyond the base Arrow Types. The Arrow DataTypes include\n * metadata like `bitWidth` that impact the type signatures of the values we\n * accept and return.\n *\n * For example, the `Int8Vector` reads 1-byte numbers from an `Int8Array`, an\n * `Int32Vector` reads a 4-byte number from an `Int32Array`, and an `Int64Vector`\n * reads a pair of 4-byte lo, hi 32-bit integers as a zero-copy slice from the\n * underlying `Int32Array`.\n *\n * Library consumers benefit by knowing the narrowest type, since we can ensure\n * the types across all public methods are propagated, and never bail to `any`.\n * These values are _never_ used at runtime, and they will _never_ be written\n * to the flatbuffers metadata of serialized Arrow IPC payloads.\n */\nexport var Type;\n(function (Type) {\n    Type[Type[\"NONE\"] = 0] = \"NONE\";\n    Type[Type[\"Null\"] = 1] = \"Null\";\n    Type[Type[\"Int\"] = 2] = \"Int\";\n    Type[Type[\"Float\"] = 3] = \"Float\";\n    Type[Type[\"Binary\"] = 4] = \"Binary\";\n    Type[Type[\"Utf8\"] = 5] = \"Utf8\";\n    Type[Type[\"Bool\"] = 6] = \"Bool\";\n    Type[Type[\"Decimal\"] = 7] = \"Decimal\";\n    Type[Type[\"Date\"] = 8] = \"Date\";\n    Type[Type[\"Time\"] = 9] = \"Time\";\n    Type[Type[\"Timestamp\"] = 10] = \"Timestamp\";\n    Type[Type[\"Interval\"] = 11] = \"Interval\";\n    Type[Type[\"List\"] = 12] = \"List\";\n    Type[Type[\"Struct\"] = 13] = \"Struct\";\n    Type[Type[\"Union\"] = 14] = \"Union\";\n    Type[Type[\"FixedSizeBinary\"] = 15] = \"FixedSizeBinary\";\n    Type[Type[\"FixedSizeList\"] = 16] = \"FixedSizeList\";\n    Type[Type[\"Map\"] = 17] = \"Map\";\n    Type[Type[\"Duration\"] = 18] = \"Duration\";\n    Type[Type[\"LargeBinary\"] = 19] = \"LargeBinary\";\n    Type[Type[\"LargeUtf8\"] = 20] = \"LargeUtf8\";\n    Type[Type[\"Dictionary\"] = -1] = \"Dictionary\";\n    Type[Type[\"Int8\"] = -2] = \"Int8\";\n    Type[Type[\"Int16\"] = -3] = \"Int16\";\n    Type[Type[\"Int32\"] = -4] = \"Int32\";\n    Type[Type[\"Int64\"] = -5] = \"Int64\";\n    Type[Type[\"Uint8\"] = -6] = \"Uint8\";\n    Type[Type[\"Uint16\"] = -7] = \"Uint16\";\n    Type[Type[\"Uint32\"] = -8] = \"Uint32\";\n    Type[Type[\"Uint64\"] = -9] = \"Uint64\";\n    Type[Type[\"Float16\"] = -10] = \"Float16\";\n    Type[Type[\"Float32\"] = -11] = \"Float32\";\n    Type[Type[\"Float64\"] = -12] = \"Float64\";\n    Type[Type[\"DateDay\"] = -13] = \"DateDay\";\n    Type[Type[\"DateMillisecond\"] = -14] = \"DateMillisecond\";\n    Type[Type[\"TimestampSecond\"] = -15] = \"TimestampSecond\";\n    Type[Type[\"TimestampMillisecond\"] = -16] = \"TimestampMillisecond\";\n    Type[Type[\"TimestampMicrosecond\"] = -17] = \"TimestampMicrosecond\";\n    Type[Type[\"TimestampNanosecond\"] = -18] = \"TimestampNanosecond\";\n    Type[Type[\"TimeSecond\"] = -19] = \"TimeSecond\";\n    Type[Type[\"TimeMillisecond\"] = -20] = \"TimeMillisecond\";\n    Type[Type[\"TimeMicrosecond\"] = -21] = \"TimeMicrosecond\";\n    Type[Type[\"TimeNanosecond\"] = -22] = \"TimeNanosecond\";\n    Type[Type[\"DenseUnion\"] = -23] = \"DenseUnion\";\n    Type[Type[\"SparseUnion\"] = -24] = \"SparseUnion\";\n    Type[Type[\"IntervalDayTime\"] = -25] = \"IntervalDayTime\";\n    Type[Type[\"IntervalYearMonth\"] = -26] = \"IntervalYearMonth\";\n    Type[Type[\"DurationSecond\"] = -27] = \"DurationSecond\";\n    Type[Type[\"DurationMillisecond\"] = -28] = \"DurationMillisecond\";\n    Type[Type[\"DurationMicrosecond\"] = -29] = \"DurationMicrosecond\";\n    Type[Type[\"DurationNanosecond\"] = -30] = \"DurationNanosecond\";\n})(Type || (Type = {}));\nexport var BufferType;\n(function (BufferType) {\n    /**\n     * used in List type, Dense Union and variable length primitive types (String, Binary)\n     */\n    BufferType[BufferType[\"OFFSET\"] = 0] = \"OFFSET\";\n    /**\n     * actual data, either fixed width primitive types in slots or variable width delimited by an OFFSET vector\n     */\n    BufferType[BufferType[\"DATA\"] = 1] = \"DATA\";\n    /**\n     * Bit vector indicating if each value is null\n     */\n    BufferType[BufferType[\"VALIDITY\"] = 2] = \"VALIDITY\";\n    /**\n     * Type vector used in Union type\n     */\n    BufferType[BufferType[\"TYPE\"] = 3] = \"TYPE\";\n})(BufferType || (BufferType = {}));\n\n//# sourceMappingURL=enum.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n/** @ignore */ const undf = void (0);\n/** @ignore */\nexport function valueToString(x) {\n    if (x === null) {\n        return 'null';\n    }\n    if (x === undf) {\n        return 'undefined';\n    }\n    switch (typeof x) {\n        case 'number': return `${x}`;\n        case 'bigint': return `${x}`;\n        case 'string': return `\"${x}\"`;\n    }\n    // If [Symbol.toPrimitive] is implemented (like in BN)\n    // use it instead of JSON.stringify(). This ensures we\n    // print BigInts, Decimals, and Binary in their native\n    // representation\n    if (typeof x[Symbol.toPrimitive] === 'function') {\n        return x[Symbol.toPrimitive]('string');\n    }\n    if (ArrayBuffer.isView(x)) {\n        if (x instanceof BigInt64Array || x instanceof BigUint64Array) {\n            return `[${[...x].map(x => valueToString(x))}]`;\n        }\n        return `[${x}]`;\n    }\n    return ArrayBuffer.isView(x) ? `[${x}]` : JSON.stringify(x, (_, y) => typeof y === 'bigint' ? `${y}` : y);\n}\n\n//# sourceMappingURL=pretty.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n/**\n * Converts an integer as a number or bigint to a number, throwing an error if the input cannot safely be represented as a number.\n */\nexport function bigIntToNumber(number) {\n    if (typeof number === 'bigint' && (number < Number.MIN_SAFE_INTEGER || number > Number.MAX_SAFE_INTEGER)) {\n        throw new TypeError(`${number} is not safe to convert to a number.`);\n    }\n    return Number(number);\n}\n/**\n * Duivides the bigint number by the divisor and returns the result as a number.\n * Dividing bigints always results in bigints so we don't get the remainder.\n * This function gives us the remainder but assumes that the result fits into a number.\n *\n * @param number The number to divide.\n * @param divisor The divisor.\n * @returns The result of the division as a number.\n */\nexport function divideBigInts(number, divisor) {\n    return bigIntToNumber(number / divisor) + bigIntToNumber(number % divisor) / bigIntToNumber(divisor);\n}\n\n//# sourceMappingURL=bigint.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { toArrayBufferView } from './buffer.mjs';\nimport { bigIntToNumber } from './bigint.mjs';\n/** @ignore */\nexport const isArrowBigNumSymbol = Symbol.for('isArrowBigNum');\n/** @ignore */\nfunction BigNum(x, ...xs) {\n    if (xs.length === 0) {\n        return Object.setPrototypeOf(toArrayBufferView(this['TypedArray'], x), this.constructor.prototype);\n    }\n    return Object.setPrototypeOf(new this['TypedArray'](x, ...xs), this.constructor.prototype);\n}\nBigNum.prototype[isArrowBigNumSymbol] = true;\nBigNum.prototype.toJSON = function () { return `\"${bigNumToString(this)}\"`; };\nBigNum.prototype.valueOf = function (scale) { return bigNumToNumber(this, scale); };\nBigNum.prototype.toString = function () { return bigNumToString(this); };\nBigNum.prototype[Symbol.toPrimitive] = function (hint = 'default') {\n    switch (hint) {\n        case 'number': return bigNumToNumber(this);\n        case 'string': return bigNumToString(this);\n        case 'default': return bigNumToBigInt(this);\n    }\n    // @ts-ignore\n    return bigNumToString(this);\n};\n/** @ignore */\nfunction SignedBigNum(...args) { return BigNum.apply(this, args); }\n/** @ignore */\nfunction UnsignedBigNum(...args) { return BigNum.apply(this, args); }\n/** @ignore */\nfunction DecimalBigNum(...args) { return BigNum.apply(this, args); }\nObject.setPrototypeOf(SignedBigNum.prototype, Object.create(Int32Array.prototype));\nObject.setPrototypeOf(UnsignedBigNum.prototype, Object.create(Uint32Array.prototype));\nObject.setPrototypeOf(DecimalBigNum.prototype, Object.create(Uint32Array.prototype));\nObject.assign(SignedBigNum.prototype, BigNum.prototype, { 'constructor': SignedBigNum, 'signed': true, 'TypedArray': Int32Array, 'BigIntArray': BigInt64Array });\nObject.assign(UnsignedBigNum.prototype, BigNum.prototype, { 'constructor': UnsignedBigNum, 'signed': false, 'TypedArray': Uint32Array, 'BigIntArray': BigUint64Array });\nObject.assign(DecimalBigNum.prototype, BigNum.prototype, { 'constructor': DecimalBigNum, 'signed': true, 'TypedArray': Uint32Array, 'BigIntArray': BigUint64Array });\n//FOR ES2020 COMPATIBILITY\nconst TWO_TO_THE_64 = BigInt(4294967296) * BigInt(4294967296); // 2^64 = 0x10000000000000000n\nconst TWO_TO_THE_64_MINUS_1 = TWO_TO_THE_64 - BigInt(1); // (2^32 * 2^32) - 1 = 0xFFFFFFFFFFFFFFFFn\n/** @ignore */\nexport function bigNumToNumber(bn, scale) {\n    const { buffer, byteOffset, byteLength, 'signed': signed } = bn;\n    const words = new BigUint64Array(buffer, byteOffset, byteLength / 8);\n    const negative = signed && words.at(-1) & (BigInt(1) << BigInt(63));\n    let number = BigInt(0);\n    let i = 0;\n    if (negative) {\n        for (const word of words) {\n            number |= (word ^ TWO_TO_THE_64_MINUS_1) * (BigInt(1) << BigInt(64 * i++));\n        }\n        number *= BigInt(-1);\n        number -= BigInt(1);\n    }\n    else {\n        for (const word of words) {\n            number |= word * (BigInt(1) << BigInt(64 * i++));\n        }\n    }\n    if (typeof scale === 'number') {\n        const denominator = BigInt(Math.pow(10, scale));\n        const quotient = number / denominator;\n        const remainder = number % denominator;\n        return bigIntToNumber(quotient) + (bigIntToNumber(remainder) / bigIntToNumber(denominator));\n    }\n    return bigIntToNumber(number);\n}\n/** @ignore */\nexport function bigNumToString(a) {\n    // use BigInt native implementation\n    if (a.byteLength === 8) {\n        const bigIntArray = new a['BigIntArray'](a.buffer, a.byteOffset, 1);\n        return `${bigIntArray[0]}`;\n    }\n    // unsigned numbers\n    if (!a['signed']) {\n        return unsignedBigNumToString(a);\n    }\n    let array = new Uint16Array(a.buffer, a.byteOffset, a.byteLength / 2);\n    // detect positive numbers\n    const highOrderWord = new Int16Array([array.at(-1)])[0];\n    if (highOrderWord >= 0) {\n        return unsignedBigNumToString(a);\n    }\n    // flip the negative value\n    array = array.slice();\n    let carry = 1;\n    for (let i = 0; i < array.length; i++) {\n        const elem = array[i];\n        const updated = ~elem + carry;\n        array[i] = updated;\n        carry &= elem === 0 ? 1 : 0;\n    }\n    const negated = unsignedBigNumToString(array);\n    return `-${negated}`;\n}\n/** @ignore */\nexport function bigNumToBigInt(a) {\n    if (a.byteLength === 8) {\n        const bigIntArray = new a['BigIntArray'](a.buffer, a.byteOffset, 1);\n        return bigIntArray[0];\n    }\n    else {\n        return bigNumToString(a);\n    }\n}\n/** @ignore */\nfunction unsignedBigNumToString(a) {\n    let digits = '';\n    const base64 = new Uint32Array(2);\n    let base32 = new Uint16Array(a.buffer, a.byteOffset, a.byteLength / 2);\n    const checks = new Uint32Array((base32 = new Uint16Array(base32).reverse()).buffer);\n    let i = -1;\n    const n = base32.length - 1;\n    do {\n        for (base64[0] = base32[i = 0]; i < n;) {\n            base32[i++] = base64[1] = base64[0] / 10;\n            base64[0] = ((base64[0] - base64[1] * 10) << 16) + base32[i];\n        }\n        base32[i] = base64[1] = base64[0] / 10;\n        base64[0] = base64[0] - base64[1] * 10;\n        digits = `${base64[0]}${digits}`;\n    } while (checks[0] || checks[1] || checks[2] || checks[3]);\n    return digits !== null && digits !== void 0 ? digits : `0`;\n}\n/** @ignore */\nexport class BN {\n    /** @nocollapse */\n    static new(num, isSigned) {\n        switch (isSigned) {\n            case true: return new SignedBigNum(num);\n            case false: return new UnsignedBigNum(num);\n        }\n        switch (num.constructor) {\n            case Int8Array:\n            case Int16Array:\n            case Int32Array:\n            case BigInt64Array:\n                return new SignedBigNum(num);\n        }\n        if (num.byteLength === 16) {\n            return new DecimalBigNum(num);\n        }\n        return new UnsignedBigNum(num);\n    }\n    /** @nocollapse */\n    static signed(num) {\n        return new SignedBigNum(num);\n    }\n    /** @nocollapse */\n    static unsigned(num) {\n        return new UnsignedBigNum(num);\n    }\n    /** @nocollapse */\n    static decimal(num) {\n        return new DecimalBigNum(num);\n    }\n    constructor(num, isSigned) {\n        return BN.new(num, isSigned);\n    }\n}\n\n//# sourceMappingURL=bn.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nvar _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\nimport { bigIntToNumber } from './util/bigint.mjs';\nimport { Type, Precision, UnionMode, DateUnit, TimeUnit, IntervalUnit } from './enum.mjs';\n/**\n * An abstract base class for classes that encapsulate metadata about each of\n * the logical types that Arrow can represent.\n */\nexport class DataType {\n    /** @nocollapse */ static isNull(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Null; }\n    /** @nocollapse */ static isInt(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Int; }\n    /** @nocollapse */ static isFloat(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Float; }\n    /** @nocollapse */ static isBinary(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Binary; }\n    /** @nocollapse */ static isLargeBinary(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.LargeBinary; }\n    /** @nocollapse */ static isUtf8(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Utf8; }\n    /** @nocollapse */ static isLargeUtf8(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.LargeUtf8; }\n    /** @nocollapse */ static isBool(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Bool; }\n    /** @nocollapse */ static isDecimal(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Decimal; }\n    /** @nocollapse */ static isDate(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Date; }\n    /** @nocollapse */ static isTime(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Time; }\n    /** @nocollapse */ static isTimestamp(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Timestamp; }\n    /** @nocollapse */ static isInterval(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Interval; }\n    /** @nocollapse */ static isDuration(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Duration; }\n    /** @nocollapse */ static isList(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.List; }\n    /** @nocollapse */ static isStruct(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Struct; }\n    /** @nocollapse */ static isUnion(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Union; }\n    /** @nocollapse */ static isFixedSizeBinary(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.FixedSizeBinary; }\n    /** @nocollapse */ static isFixedSizeList(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.FixedSizeList; }\n    /** @nocollapse */ static isMap(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Map; }\n    /** @nocollapse */ static isDictionary(x) { return (x === null || x === void 0 ? void 0 : x.typeId) === Type.Dictionary; }\n    /** @nocollapse */ static isDenseUnion(x) { return DataType.isUnion(x) && x.mode === UnionMode.Dense; }\n    /** @nocollapse */ static isSparseUnion(x) { return DataType.isUnion(x) && x.mode === UnionMode.Sparse; }\n    constructor(typeId) {\n        this.typeId = typeId;\n    }\n}\n_a = Symbol.toStringTag;\nDataType[_a] = ((proto) => {\n    proto.children = null;\n    proto.ArrayType = Array;\n    proto.OffsetArrayType = Int32Array;\n    return proto[Symbol.toStringTag] = 'DataType';\n})(DataType.prototype);\n/** @ignore */\nexport class Null extends DataType {\n    constructor() {\n        super(Type.Null);\n    }\n    toString() { return `Null`; }\n}\n_b = Symbol.toStringTag;\nNull[_b] = ((proto) => proto[Symbol.toStringTag] = 'Null')(Null.prototype);\n/** @ignore */\nclass Int_ extends DataType {\n    constructor(isSigned, bitWidth) {\n        super(Type.Int);\n        this.isSigned = isSigned;\n        this.bitWidth = bitWidth;\n    }\n    get ArrayType() {\n        switch (this.bitWidth) {\n            case 8: return this.isSigned ? Int8Array : Uint8Array;\n            case 16: return this.isSigned ? Int16Array : Uint16Array;\n            case 32: return this.isSigned ? Int32Array : Uint32Array;\n            case 64: return this.isSigned ? BigInt64Array : BigUint64Array;\n        }\n        throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`);\n    }\n    toString() { return `${this.isSigned ? `I` : `Ui`}nt${this.bitWidth}`; }\n}\n_c = Symbol.toStringTag;\nInt_[_c] = ((proto) => {\n    proto.isSigned = null;\n    proto.bitWidth = null;\n    return proto[Symbol.toStringTag] = 'Int';\n})(Int_.prototype);\nexport { Int_ as Int };\n/** @ignore */\nexport class Int8 extends Int_ {\n    constructor() { super(true, 8); }\n    get ArrayType() { return Int8Array; }\n}\n/** @ignore */\nexport class Int16 extends Int_ {\n    constructor() { super(true, 16); }\n    get ArrayType() { return Int16Array; }\n}\n/** @ignore */\nexport class Int32 extends Int_ {\n    constructor() { super(true, 32); }\n    get ArrayType() { return Int32Array; }\n}\n/** @ignore */\nexport class Int64 extends Int_ {\n    constructor() { super(true, 64); }\n    get ArrayType() { return BigInt64Array; }\n}\n/** @ignore */\nexport class Uint8 extends Int_ {\n    constructor() { super(false, 8); }\n    get ArrayType() { return Uint8Array; }\n}\n/** @ignore */\nexport class Uint16 extends Int_ {\n    constructor() { super(false, 16); }\n    get ArrayType() { return Uint16Array; }\n}\n/** @ignore */\nexport class Uint32 extends Int_ {\n    constructor() { super(false, 32); }\n    get ArrayType() { return Uint32Array; }\n}\n/** @ignore */\nexport class Uint64 extends Int_ {\n    constructor() { super(false, 64); }\n    get ArrayType() { return BigUint64Array; }\n}\nObject.defineProperty(Int8.prototype, 'ArrayType', { value: Int8Array });\nObject.defineProperty(Int16.prototype, 'ArrayType', { value: Int16Array });\nObject.defineProperty(Int32.prototype, 'ArrayType', { value: Int32Array });\nObject.defineProperty(Int64.prototype, 'ArrayType', { value: BigInt64Array });\nObject.defineProperty(Uint8.prototype, 'ArrayType', { value: Uint8Array });\nObject.defineProperty(Uint16.prototype, 'ArrayType', { value: Uint16Array });\nObject.defineProperty(Uint32.prototype, 'ArrayType', { value: Uint32Array });\nObject.defineProperty(Uint64.prototype, 'ArrayType', { value: BigUint64Array });\n/** @ignore */\nexport class Float extends DataType {\n    constructor(precision) {\n        super(Type.Float);\n        this.precision = precision;\n    }\n    get ArrayType() {\n        switch (this.precision) {\n            case Precision.HALF: return Uint16Array;\n            case Precision.SINGLE: return Float32Array;\n            case Precision.DOUBLE: return Float64Array;\n        }\n        // @ts-ignore\n        throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`);\n    }\n    toString() { return `Float${(this.precision << 5) || 16}`; }\n}\n_d = Symbol.toStringTag;\nFloat[_d] = ((proto) => {\n    proto.precision = null;\n    return proto[Symbol.toStringTag] = 'Float';\n})(Float.prototype);\n/** @ignore */\nexport class Float16 extends Float {\n    constructor() { super(Precision.HALF); }\n}\n/** @ignore */\nexport class Float32 extends Float {\n    constructor() { super(Precision.SINGLE); }\n}\n/** @ignore */\nexport class Float64 extends Float {\n    constructor() { super(Precision.DOUBLE); }\n}\nObject.defineProperty(Float16.prototype, 'ArrayType', { value: Uint16Array });\nObject.defineProperty(Float32.prototype, 'ArrayType', { value: Float32Array });\nObject.defineProperty(Float64.prototype, 'ArrayType', { value: Float64Array });\n/** @ignore */\nexport class Binary extends DataType {\n    constructor() {\n        super(Type.Binary);\n    }\n    toString() { return `Binary`; }\n}\n_e = Symbol.toStringTag;\nBinary[_e] = ((proto) => {\n    proto.ArrayType = Uint8Array;\n    return proto[Symbol.toStringTag] = 'Binary';\n})(Binary.prototype);\n/** @ignore */\nexport class LargeBinary extends DataType {\n    constructor() {\n        super(Type.LargeBinary);\n    }\n    toString() { return `LargeBinary`; }\n}\n_f = Symbol.toStringTag;\nLargeBinary[_f] = ((proto) => {\n    proto.ArrayType = Uint8Array;\n    proto.OffsetArrayType = BigInt64Array;\n    return proto[Symbol.toStringTag] = 'LargeBinary';\n})(LargeBinary.prototype);\n/** @ignore */\nexport class Utf8 extends DataType {\n    constructor() {\n        super(Type.Utf8);\n    }\n    toString() { return `Utf8`; }\n}\n_g = Symbol.toStringTag;\nUtf8[_g] = ((proto) => {\n    proto.ArrayType = Uint8Array;\n    return proto[Symbol.toStringTag] = 'Utf8';\n})(Utf8.prototype);\n/** @ignore */\nexport class LargeUtf8 extends DataType {\n    constructor() {\n        super(Type.LargeUtf8);\n    }\n    toString() { return `LargeUtf8`; }\n}\n_h = Symbol.toStringTag;\nLargeUtf8[_h] = ((proto) => {\n    proto.ArrayType = Uint8Array;\n    proto.OffsetArrayType = BigInt64Array;\n    return proto[Symbol.toStringTag] = 'LargeUtf8';\n})(LargeUtf8.prototype);\n/** @ignore */\nexport class Bool extends DataType {\n    constructor() {\n        super(Type.Bool);\n    }\n    toString() { return `Bool`; }\n}\n_j = Symbol.toStringTag;\nBool[_j] = ((proto) => {\n    proto.ArrayType = Uint8Array;\n    return proto[Symbol.toStringTag] = 'Bool';\n})(Bool.prototype);\n/** @ignore */\nexport class Decimal extends DataType {\n    constructor(scale, precision, bitWidth = 128) {\n        super(Type.Decimal);\n        this.scale = scale;\n        this.precision = precision;\n        this.bitWidth = bitWidth;\n    }\n    toString() { return `Decimal[${this.precision}e${this.scale > 0 ? `+` : ``}${this.scale}]`; }\n}\n_k = Symbol.toStringTag;\nDecimal[_k] = ((proto) => {\n    proto.scale = null;\n    proto.precision = null;\n    proto.ArrayType = Uint32Array;\n    return proto[Symbol.toStringTag] = 'Decimal';\n})(Decimal.prototype);\n/** @ignore */\nexport class Date_ extends DataType {\n    constructor(unit) {\n        super(Type.Date);\n        this.unit = unit;\n    }\n    toString() { return `Date${(this.unit + 1) * 32}<${DateUnit[this.unit]}>`; }\n    get ArrayType() {\n        return this.unit === DateUnit.DAY ? Int32Array : BigInt64Array;\n    }\n}\n_l = Symbol.toStringTag;\nDate_[_l] = ((proto) => {\n    proto.unit = null;\n    return proto[Symbol.toStringTag] = 'Date';\n})(Date_.prototype);\n/** @ignore */\nexport class DateDay extends Date_ {\n    constructor() { super(DateUnit.DAY); }\n}\n/**\n * A signed 64-bit date representing the elapsed time since UNIX epoch (1970-01-01) in milliseconds.\n * According to the specification, this should be treated as the number of days, in milliseconds,  since the UNIX epoch.\n * Therefore, values must be evenly divisible by `86_400_000` (the number of milliseconds in a standard day).\n *\n * Practically, validation that values of this type are evenly divisible by `86_400_000` is not enforced by this library\n * for performance and usability reasons.\n *\n * Users should prefer to use {@link DateDay} to cleanly represent the number of days. For JS dates,\n * {@link TimestampMillisecond} is the preferred type.\n *\n * @ignore\n */\nexport class DateMillisecond extends Date_ {\n    constructor() { super(DateUnit.MILLISECOND); }\n}\n/** @ignore */\nclass Time_ extends DataType {\n    constructor(unit, bitWidth) {\n        super(Type.Time);\n        this.unit = unit;\n        this.bitWidth = bitWidth;\n    }\n    toString() { return `Time${this.bitWidth}<${TimeUnit[this.unit]}>`; }\n    get ArrayType() {\n        switch (this.bitWidth) {\n            case 32: return Int32Array;\n            case 64: return BigInt64Array;\n        }\n        // @ts-ignore\n        throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`);\n    }\n}\n_m = Symbol.toStringTag;\nTime_[_m] = ((proto) => {\n    proto.unit = null;\n    proto.bitWidth = null;\n    return proto[Symbol.toStringTag] = 'Time';\n})(Time_.prototype);\nexport { Time_ as Time };\n/** @ignore */\nexport class TimeSecond extends Time_ {\n    constructor() { super(TimeUnit.SECOND, 32); }\n}\n/** @ignore */\nexport class TimeMillisecond extends Time_ {\n    constructor() { super(TimeUnit.MILLISECOND, 32); }\n}\n/** @ignore */\nexport class TimeMicrosecond extends Time_ {\n    constructor() { super(TimeUnit.MICROSECOND, 64); }\n}\n/** @ignore */\nexport class TimeNanosecond extends Time_ {\n    constructor() { super(TimeUnit.NANOSECOND, 64); }\n}\n/** @ignore */\nclass Timestamp_ extends DataType {\n    constructor(unit, timezone) {\n        super(Type.Timestamp);\n        this.unit = unit;\n        this.timezone = timezone;\n    }\n    toString() { return `Timestamp<${TimeUnit[this.unit]}${this.timezone ? `, ${this.timezone}` : ``}>`; }\n}\n_o = Symbol.toStringTag;\nTimestamp_[_o] = ((proto) => {\n    proto.unit = null;\n    proto.timezone = null;\n    proto.ArrayType = BigInt64Array;\n    return proto[Symbol.toStringTag] = 'Timestamp';\n})(Timestamp_.prototype);\nexport { Timestamp_ as Timestamp };\n/** @ignore */\nexport class TimestampSecond extends Timestamp_ {\n    constructor(timezone) { super(TimeUnit.SECOND, timezone); }\n}\n/** @ignore */\nexport class TimestampMillisecond extends Timestamp_ {\n    constructor(timezone) { super(TimeUnit.MILLISECOND, timezone); }\n}\n/** @ignore */\nexport class TimestampMicrosecond extends Timestamp_ {\n    constructor(timezone) { super(TimeUnit.MICROSECOND, timezone); }\n}\n/** @ignore */\nexport class TimestampNanosecond extends Timestamp_ {\n    constructor(timezone) { super(TimeUnit.NANOSECOND, timezone); }\n}\n/** @ignore */\nclass Interval_ extends DataType {\n    constructor(unit) {\n        super(Type.Interval);\n        this.unit = unit;\n    }\n    toString() { return `Interval<${IntervalUnit[this.unit]}>`; }\n}\n_p = Symbol.toStringTag;\nInterval_[_p] = ((proto) => {\n    proto.unit = null;\n    proto.ArrayType = Int32Array;\n    return proto[Symbol.toStringTag] = 'Interval';\n})(Interval_.prototype);\nexport { Interval_ as Interval };\n/** @ignore */\nexport class IntervalDayTime extends Interval_ {\n    constructor() { super(IntervalUnit.DAY_TIME); }\n}\n/** @ignore */\nexport class IntervalYearMonth extends Interval_ {\n    constructor() { super(IntervalUnit.YEAR_MONTH); }\n}\n/** @ignore */\nexport class Duration extends DataType {\n    constructor(unit) {\n        super(Type.Duration);\n        this.unit = unit;\n    }\n    toString() { return `Duration<${TimeUnit[this.unit]}>`; }\n}\n_q = Symbol.toStringTag;\nDuration[_q] = ((proto) => {\n    proto.unit = null;\n    proto.ArrayType = BigInt64Array;\n    return proto[Symbol.toStringTag] = 'Duration';\n})(Duration.prototype);\n/** @ignore */\nexport class DurationSecond extends Duration {\n    constructor() { super(TimeUnit.SECOND); }\n}\n/** @ignore */\nexport class DurationMillisecond extends Duration {\n    constructor() { super(TimeUnit.MILLISECOND); }\n}\n/** @ignore */\nexport class DurationMicrosecond extends Duration {\n    constructor() { super(TimeUnit.MICROSECOND); }\n}\n/** @ignore */\nexport class DurationNanosecond extends Duration {\n    constructor() { super(TimeUnit.NANOSECOND); }\n}\n/** @ignore */\nexport class List extends DataType {\n    constructor(child) {\n        super(Type.List);\n        this.children = [child];\n    }\n    toString() { return `List<${this.valueType}>`; }\n    get valueType() { return this.children[0].type; }\n    get valueField() { return this.children[0]; }\n    get ArrayType() { return this.valueType.ArrayType; }\n}\n_r = Symbol.toStringTag;\nList[_r] = ((proto) => {\n    proto.children = null;\n    return proto[Symbol.toStringTag] = 'List';\n})(List.prototype);\n/** @ignore */\nexport class Struct extends DataType {\n    constructor(children) {\n        super(Type.Struct);\n        this.children = children;\n    }\n    toString() { return `Struct<{${this.children.map((f) => `${f.name}:${f.type}`).join(`, `)}}>`; }\n}\n_s = Symbol.toStringTag;\nStruct[_s] = ((proto) => {\n    proto.children = null;\n    return proto[Symbol.toStringTag] = 'Struct';\n})(Struct.prototype);\n/** @ignore */\nclass Union_ extends DataType {\n    constructor(mode, typeIds, children) {\n        super(Type.Union);\n        this.mode = mode;\n        this.children = children;\n        this.typeIds = typeIds = Int32Array.from(typeIds);\n        this.typeIdToChildIndex = typeIds.reduce((typeIdToChildIndex, typeId, idx) => (typeIdToChildIndex[typeId] = idx) && typeIdToChildIndex || typeIdToChildIndex, Object.create(null));\n    }\n    toString() {\n        return `${this[Symbol.toStringTag]}<${this.children.map((x) => `${x.type}`).join(` | `)}>`;\n    }\n}\n_t = Symbol.toStringTag;\nUnion_[_t] = ((proto) => {\n    proto.mode = null;\n    proto.typeIds = null;\n    proto.children = null;\n    proto.typeIdToChildIndex = null;\n    proto.ArrayType = Int8Array;\n    return proto[Symbol.toStringTag] = 'Union';\n})(Union_.prototype);\nexport { Union_ as Union };\n/** @ignore */\nexport class DenseUnion extends Union_ {\n    constructor(typeIds, children) {\n        super(UnionMode.Dense, typeIds, children);\n    }\n}\n/** @ignore */\nexport class SparseUnion extends Union_ {\n    constructor(typeIds, children) {\n        super(UnionMode.Sparse, typeIds, children);\n    }\n}\n/** @ignore */\nexport class FixedSizeBinary extends DataType {\n    constructor(byteWidth) {\n        super(Type.FixedSizeBinary);\n        this.byteWidth = byteWidth;\n    }\n    toString() { return `FixedSizeBinary[${this.byteWidth}]`; }\n}\n_u = Symbol.toStringTag;\nFixedSizeBinary[_u] = ((proto) => {\n    proto.byteWidth = null;\n    proto.ArrayType = Uint8Array;\n    return proto[Symbol.toStringTag] = 'FixedSizeBinary';\n})(FixedSizeBinary.prototype);\n/** @ignore */\nexport class FixedSizeList extends DataType {\n    constructor(listSize, child) {\n        super(Type.FixedSizeList);\n        this.listSize = listSize;\n        this.children = [child];\n    }\n    get valueType() { return this.children[0].type; }\n    get valueField() { return this.children[0]; }\n    get ArrayType() { return this.valueType.ArrayType; }\n    toString() { return `FixedSizeList[${this.listSize}]<${this.valueType}>`; }\n}\n_v = Symbol.toStringTag;\nFixedSizeList[_v] = ((proto) => {\n    proto.children = null;\n    proto.listSize = null;\n    return proto[Symbol.toStringTag] = 'FixedSizeList';\n})(FixedSizeList.prototype);\n/** @ignore */\nexport class Map_ extends DataType {\n    constructor(entries, keysSorted = false) {\n        var _y, _z, _0;\n        super(Type.Map);\n        this.children = [entries];\n        this.keysSorted = keysSorted;\n        // ARROW-8716\n        // https://github.com/apache/arrow/issues/17168\n        if (entries) {\n            entries['name'] = 'entries';\n            if ((_y = entries === null || entries === void 0 ? void 0 : entries.type) === null || _y === void 0 ? void 0 : _y.children) {\n                const key = (_z = entries === null || entries === void 0 ? void 0 : entries.type) === null || _z === void 0 ? void 0 : _z.children[0];\n                if (key) {\n                    key['name'] = 'key';\n                }\n                const val = (_0 = entries === null || entries === void 0 ? void 0 : entries.type) === null || _0 === void 0 ? void 0 : _0.children[1];\n                if (val) {\n                    val['name'] = 'value';\n                }\n            }\n        }\n    }\n    get keyType() { return this.children[0].type.children[0].type; }\n    get valueType() { return this.children[0].type.children[1].type; }\n    get childType() { return this.children[0].type; }\n    toString() { return `Map<{${this.children[0].type.children.map((f) => `${f.name}:${f.type}`).join(`, `)}}>`; }\n}\n_w = Symbol.toStringTag;\nMap_[_w] = ((proto) => {\n    proto.children = null;\n    proto.keysSorted = null;\n    return proto[Symbol.toStringTag] = 'Map_';\n})(Map_.prototype);\n/** @ignore */\nconst getId = ((atomicDictionaryId) => () => ++atomicDictionaryId)(-1);\n/** @ignore */\nexport class Dictionary extends DataType {\n    constructor(dictionary, indices, id, isOrdered) {\n        super(Type.Dictionary);\n        this.indices = indices;\n        this.dictionary = dictionary;\n        this.isOrdered = isOrdered || false;\n        this.id = id == null ? getId() : bigIntToNumber(id);\n    }\n    get children() { return this.dictionary.children; }\n    get valueType() { return this.dictionary; }\n    get ArrayType() { return this.dictionary.ArrayType; }\n    toString() { return `Dictionary<${this.indices}, ${this.dictionary}>`; }\n}\n_x = Symbol.toStringTag;\nDictionary[_x] = ((proto) => {\n    proto.id = null;\n    proto.indices = null;\n    proto.isOrdered = null;\n    proto.dictionary = null;\n    return proto[Symbol.toStringTag] = 'Dictionary';\n})(Dictionary.prototype);\n/** @ignore */\nexport function strideForType(type) {\n    const t = type;\n    switch (type.typeId) {\n        case Type.Decimal: return type.bitWidth / 32;\n        case Type.Interval: return 1 + t.unit;\n        // case Type.Int: return 1 + +((t as Int_).bitWidth > 32);\n        // case Type.Time: return 1 + +((t as Time_).bitWidth > 32);\n        case Type.FixedSizeList: return t.listSize;\n        case Type.FixedSizeBinary: return t.byteWidth;\n        default: return 1;\n    }\n}\n\n//# sourceMappingURL=type.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Type, Precision, DateUnit, TimeUnit, IntervalUnit, UnionMode } from './enum.mjs';\nimport { DataType } from './type.mjs';\nexport class Visitor {\n    visitMany(nodes, ...args) {\n        return nodes.map((node, i) => this.visit(node, ...args.map((x) => x[i])));\n    }\n    visit(...args) {\n        return this.getVisitFn(args[0], false).apply(this, args);\n    }\n    getVisitFn(node, throwIfNotFound = true) {\n        return getVisitFn(this, node, throwIfNotFound);\n    }\n    getVisitFnByTypeId(typeId, throwIfNotFound = true) {\n        return getVisitFnByTypeId(this, typeId, throwIfNotFound);\n    }\n    visitNull(_node, ..._args) { return null; }\n    visitBool(_node, ..._args) { return null; }\n    visitInt(_node, ..._args) { return null; }\n    visitFloat(_node, ..._args) { return null; }\n    visitUtf8(_node, ..._args) { return null; }\n    visitLargeUtf8(_node, ..._args) { return null; }\n    visitBinary(_node, ..._args) { return null; }\n    visitLargeBinary(_node, ..._args) { return null; }\n    visitFixedSizeBinary(_node, ..._args) { return null; }\n    visitDate(_node, ..._args) { return null; }\n    visitTimestamp(_node, ..._args) { return null; }\n    visitTime(_node, ..._args) { return null; }\n    visitDecimal(_node, ..._args) { return null; }\n    visitList(_node, ..._args) { return null; }\n    visitStruct(_node, ..._args) { return null; }\n    visitUnion(_node, ..._args) { return null; }\n    visitDictionary(_node, ..._args) { return null; }\n    visitInterval(_node, ..._args) { return null; }\n    visitDuration(_node, ..._args) { return null; }\n    visitFixedSizeList(_node, ..._args) { return null; }\n    visitMap(_node, ..._args) { return null; }\n}\n/** @ignore */\nfunction getVisitFn(visitor, node, throwIfNotFound = true) {\n    if (typeof node === 'number') {\n        return getVisitFnByTypeId(visitor, node, throwIfNotFound);\n    }\n    if (typeof node === 'string' && (node in Type)) {\n        return getVisitFnByTypeId(visitor, Type[node], throwIfNotFound);\n    }\n    if (node && (node instanceof DataType)) {\n        return getVisitFnByTypeId(visitor, inferDType(node), throwIfNotFound);\n    }\n    if ((node === null || node === void 0 ? void 0 : node.type) && (node.type instanceof DataType)) {\n        return getVisitFnByTypeId(visitor, inferDType(node.type), throwIfNotFound);\n    }\n    return getVisitFnByTypeId(visitor, Type.NONE, throwIfNotFound);\n}\n/** @ignore */\nfunction getVisitFnByTypeId(visitor, dtype, throwIfNotFound = true) {\n    let fn = null;\n    switch (dtype) {\n        case Type.Null:\n            fn = visitor.visitNull;\n            break;\n        case Type.Bool:\n            fn = visitor.visitBool;\n            break;\n        case Type.Int:\n            fn = visitor.visitInt;\n            break;\n        case Type.Int8:\n            fn = visitor.visitInt8 || visitor.visitInt;\n            break;\n        case Type.Int16:\n            fn = visitor.visitInt16 || visitor.visitInt;\n            break;\n        case Type.Int32:\n            fn = visitor.visitInt32 || visitor.visitInt;\n            break;\n        case Type.Int64:\n            fn = visitor.visitInt64 || visitor.visitInt;\n            break;\n        case Type.Uint8:\n            fn = visitor.visitUint8 || visitor.visitInt;\n            break;\n        case Type.Uint16:\n            fn = visitor.visitUint16 || visitor.visitInt;\n            break;\n        case Type.Uint32:\n            fn = visitor.visitUint32 || visitor.visitInt;\n            break;\n        case Type.Uint64:\n            fn = visitor.visitUint64 || visitor.visitInt;\n            break;\n        case Type.Float:\n            fn = visitor.visitFloat;\n            break;\n        case Type.Float16:\n            fn = visitor.visitFloat16 || visitor.visitFloat;\n            break;\n        case Type.Float32:\n            fn = visitor.visitFloat32 || visitor.visitFloat;\n            break;\n        case Type.Float64:\n            fn = visitor.visitFloat64 || visitor.visitFloat;\n            break;\n        case Type.Utf8:\n            fn = visitor.visitUtf8;\n            break;\n        case Type.LargeUtf8:\n            fn = visitor.visitLargeUtf8;\n            break;\n        case Type.Binary:\n            fn = visitor.visitBinary;\n            break;\n        case Type.LargeBinary:\n            fn = visitor.visitLargeBinary;\n            break;\n        case Type.FixedSizeBinary:\n            fn = visitor.visitFixedSizeBinary;\n            break;\n        case Type.Date:\n            fn = visitor.visitDate;\n            break;\n        case Type.DateDay:\n            fn = visitor.visitDateDay || visitor.visitDate;\n            break;\n        case Type.DateMillisecond:\n            fn = visitor.visitDateMillisecond || visitor.visitDate;\n            break;\n        case Type.Timestamp:\n            fn = visitor.visitTimestamp;\n            break;\n        case Type.TimestampSecond:\n            fn = visitor.visitTimestampSecond || visitor.visitTimestamp;\n            break;\n        case Type.TimestampMillisecond:\n            fn = visitor.visitTimestampMillisecond || visitor.visitTimestamp;\n            break;\n        case Type.TimestampMicrosecond:\n            fn = visitor.visitTimestampMicrosecond || visitor.visitTimestamp;\n            break;\n        case Type.TimestampNanosecond:\n            fn = visitor.visitTimestampNanosecond || visitor.visitTimestamp;\n            break;\n        case Type.Time:\n            fn = visitor.visitTime;\n            break;\n        case Type.TimeSecond:\n            fn = visitor.visitTimeSecond || visitor.visitTime;\n            break;\n        case Type.TimeMillisecond:\n            fn = visitor.visitTimeMillisecond || visitor.visitTime;\n            break;\n        case Type.TimeMicrosecond:\n            fn = visitor.visitTimeMicrosecond || visitor.visitTime;\n            break;\n        case Type.TimeNanosecond:\n            fn = visitor.visitTimeNanosecond || visitor.visitTime;\n            break;\n        case Type.Decimal:\n            fn = visitor.visitDecimal;\n            break;\n        case Type.List:\n            fn = visitor.visitList;\n            break;\n        case Type.Struct:\n            fn = visitor.visitStruct;\n            break;\n        case Type.Union:\n            fn = visitor.visitUnion;\n            break;\n        case Type.DenseUnion:\n            fn = visitor.visitDenseUnion || visitor.visitUnion;\n            break;\n        case Type.SparseUnion:\n            fn = visitor.visitSparseUnion || visitor.visitUnion;\n            break;\n        case Type.Dictionary:\n            fn = visitor.visitDictionary;\n            break;\n        case Type.Interval:\n            fn = visitor.visitInterval;\n            break;\n        case Type.IntervalDayTime:\n            fn = visitor.visitIntervalDayTime || visitor.visitInterval;\n            break;\n        case Type.IntervalYearMonth:\n            fn = visitor.visitIntervalYearMonth || visitor.visitInterval;\n            break;\n        case Type.Duration:\n            fn = visitor.visitDuration;\n            break;\n        case Type.DurationSecond:\n            fn = visitor.visitDurationSecond || visitor.visitDuration;\n            break;\n        case Type.DurationMillisecond:\n            fn = visitor.visitDurationMillisecond || visitor.visitDuration;\n            break;\n        case Type.DurationMicrosecond:\n            fn = visitor.visitDurationMicrosecond || visitor.visitDuration;\n            break;\n        case Type.DurationNanosecond:\n            fn = visitor.visitDurationNanosecond || visitor.visitDuration;\n            break;\n        case Type.FixedSizeList:\n            fn = visitor.visitFixedSizeList;\n            break;\n        case Type.Map:\n            fn = visitor.visitMap;\n            break;\n    }\n    if (typeof fn === 'function')\n        return fn;\n    if (!throwIfNotFound)\n        return () => null;\n    throw new Error(`Unrecognized type '${Type[dtype]}'`);\n}\n/** @ignore */\nfunction inferDType(type) {\n    switch (type.typeId) {\n        case Type.Null: return Type.Null;\n        case Type.Int: {\n            const { bitWidth, isSigned } = type;\n            switch (bitWidth) {\n                case 8: return isSigned ? Type.Int8 : Type.Uint8;\n                case 16: return isSigned ? Type.Int16 : Type.Uint16;\n                case 32: return isSigned ? Type.Int32 : Type.Uint32;\n                case 64: return isSigned ? Type.Int64 : Type.Uint64;\n            }\n            // @ts-ignore\n            return Type.Int;\n        }\n        case Type.Float:\n            switch (type.precision) {\n                case Precision.HALF: return Type.Float16;\n                case Precision.SINGLE: return Type.Float32;\n                case Precision.DOUBLE: return Type.Float64;\n            }\n            // @ts-ignore\n            return Type.Float;\n        case Type.Binary: return Type.Binary;\n        case Type.LargeBinary: return Type.LargeBinary;\n        case Type.Utf8: return Type.Utf8;\n        case Type.LargeUtf8: return Type.LargeUtf8;\n        case Type.Bool: return Type.Bool;\n        case Type.Decimal: return Type.Decimal;\n        case Type.Time:\n            switch (type.unit) {\n                case TimeUnit.SECOND: return Type.TimeSecond;\n                case TimeUnit.MILLISECOND: return Type.TimeMillisecond;\n                case TimeUnit.MICROSECOND: return Type.TimeMicrosecond;\n                case TimeUnit.NANOSECOND: return Type.TimeNanosecond;\n            }\n            // @ts-ignore\n            return Type.Time;\n        case Type.Timestamp:\n            switch (type.unit) {\n                case TimeUnit.SECOND: return Type.TimestampSecond;\n                case TimeUnit.MILLISECOND: return Type.TimestampMillisecond;\n                case TimeUnit.MICROSECOND: return Type.TimestampMicrosecond;\n                case TimeUnit.NANOSECOND: return Type.TimestampNanosecond;\n            }\n            // @ts-ignore\n            return Type.Timestamp;\n        case Type.Date:\n            switch (type.unit) {\n                case DateUnit.DAY: return Type.DateDay;\n                case DateUnit.MILLISECOND: return Type.DateMillisecond;\n            }\n            // @ts-ignore\n            return Type.Date;\n        case Type.Interval:\n            switch (type.unit) {\n                case IntervalUnit.DAY_TIME: return Type.IntervalDayTime;\n                case IntervalUnit.YEAR_MONTH: return Type.IntervalYearMonth;\n            }\n            // @ts-ignore\n            return Type.Interval;\n        case Type.Duration:\n            switch (type.unit) {\n                case TimeUnit.SECOND: return Type.DurationSecond;\n                case TimeUnit.MILLISECOND: return Type.DurationMillisecond;\n                case TimeUnit.MICROSECOND: return Type.DurationMicrosecond;\n                case TimeUnit.NANOSECOND: return Type.DurationNanosecond;\n            }\n            // @ts-ignore\n            return Type.Duration;\n        case Type.Map: return Type.Map;\n        case Type.List: return Type.List;\n        case Type.Struct: return Type.Struct;\n        case Type.Union:\n            switch (type.mode) {\n                case UnionMode.Dense: return Type.DenseUnion;\n                case UnionMode.Sparse: return Type.SparseUnion;\n            }\n            // @ts-ignore\n            return Type.Union;\n        case Type.FixedSizeBinary: return Type.FixedSizeBinary;\n        case Type.FixedSizeList: return Type.FixedSizeList;\n        case Type.Dictionary: return Type.Dictionary;\n    }\n    throw new Error(`Unrecognized type '${Type[type.typeId]}'`);\n}\n// Add these here so they're picked up by the externs creator\n// in the build, and closure-compiler doesn't minify them away\nVisitor.prototype.visitInt8 = null;\nVisitor.prototype.visitInt16 = null;\nVisitor.prototype.visitInt32 = null;\nVisitor.prototype.visitInt64 = null;\nVisitor.prototype.visitUint8 = null;\nVisitor.prototype.visitUint16 = null;\nVisitor.prototype.visitUint32 = null;\nVisitor.prototype.visitUint64 = null;\nVisitor.prototype.visitFloat16 = null;\nVisitor.prototype.visitFloat32 = null;\nVisitor.prototype.visitFloat64 = null;\nVisitor.prototype.visitDateDay = null;\nVisitor.prototype.visitDateMillisecond = null;\nVisitor.prototype.visitTimestampSecond = null;\nVisitor.prototype.visitTimestampMillisecond = null;\nVisitor.prototype.visitTimestampMicrosecond = null;\nVisitor.prototype.visitTimestampNanosecond = null;\nVisitor.prototype.visitTimeSecond = null;\nVisitor.prototype.visitTimeMillisecond = null;\nVisitor.prototype.visitTimeMicrosecond = null;\nVisitor.prototype.visitTimeNanosecond = null;\nVisitor.prototype.visitDenseUnion = null;\nVisitor.prototype.visitSparseUnion = null;\nVisitor.prototype.visitIntervalDayTime = null;\nVisitor.prototype.visitIntervalYearMonth = null;\nVisitor.prototype.visitDuration = null;\nVisitor.prototype.visitDurationSecond = null;\nVisitor.prototype.visitDurationMillisecond = null;\nVisitor.prototype.visitDurationMicrosecond = null;\nVisitor.prototype.visitDurationNanosecond = null;\n\n//# sourceMappingURL=visitor.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nconst f64 = new Float64Array(1);\nconst u32 = new Uint32Array(f64.buffer);\n/**\n * Convert uint16 (logically a float16) to a JS float64. Inspired by numpy's `npy_half_to_double`:\n * https://github.com/numpy/numpy/blob/5a5987291dc95376bb098be8d8e5391e89e77a2c/numpy/core/src/npymath/halffloat.c#L29\n * @param h {number} the uint16 to convert\n * @private\n * @ignore\n */\nexport function uint16ToFloat64(h) {\n    const expo = (h & 0x7C00) >> 10;\n    const sigf = (h & 0x03FF) / 1024;\n    const sign = Math.pow((-1), ((h & 0x8000) >> 15));\n    switch (expo) {\n        case 0x1F: return sign * (sigf ? Number.NaN : 1 / 0);\n        case 0x00: return sign * (sigf ? 6.103515625e-5 * sigf : 0);\n    }\n    return sign * (Math.pow(2, (expo - 15))) * (1 + sigf);\n}\n/**\n * Convert a float64 to uint16 (assuming the float64 is logically a float16). Inspired by numpy's `npy_double_to_half`:\n * https://github.com/numpy/numpy/blob/5a5987291dc95376bb098be8d8e5391e89e77a2c/numpy/core/src/npymath/halffloat.c#L43\n * @param d {number} The float64 to convert\n * @private\n * @ignore\n */\nexport function float64ToUint16(d) {\n    if (d !== d) {\n        return 0x7E00;\n    } // NaN\n    f64[0] = d;\n    // Magic numbers:\n    // 0x80000000 = 10000000 00000000 00000000 00000000 -- masks the 32nd bit\n    // 0x7ff00000 = 01111111 11110000 00000000 00000000 -- masks the 21st-31st bits\n    // 0x000fffff = 00000000 00001111 11111111 11111111 -- masks the 1st-20th bit\n    const sign = (u32[1] & 0x80000000) >> 16 & 0xFFFF;\n    let expo = (u32[1] & 0x7FF00000), sigf = 0x0000;\n    if (expo >= 0x40F00000) {\n        //\n        // If exponent overflowed, the float16 is either NaN or Infinity.\n        // Rules to propagate the sign bit: mantissa > 0 ? NaN : +/-Infinity\n        //\n        // Magic numbers:\n        // 0x40F00000 = 01000000 11110000 00000000 00000000 -- 6-bit exponent overflow\n        // 0x7C000000 = 01111100 00000000 00000000 00000000 -- masks the 27th-31st bits\n        //\n        // returns:\n        // qNaN, aka 32256 decimal, 0x7E00 hex, or 01111110 00000000 binary\n        // sNaN, aka 32000 decimal, 0x7D00 hex, or 01111101 00000000 binary\n        // +inf, aka 31744 decimal, 0x7C00 hex, or 01111100 00000000 binary\n        // -inf, aka 64512 decimal, 0xFC00 hex, or 11111100 00000000 binary\n        //\n        // If mantissa is greater than 23 bits, set to +Infinity like numpy\n        if (u32[0] > 0) {\n            expo = 0x7C00;\n        }\n        else {\n            expo = (expo & 0x7C000000) >> 16;\n            sigf = (u32[1] & 0x000FFFFF) >> 10;\n        }\n    }\n    else if (expo <= 0x3F000000) {\n        //\n        // If exponent underflowed, the float is either signed zero or subnormal.\n        //\n        // Magic numbers:\n        // 0x3F000000 = 00111111 00000000 00000000 00000000 -- 6-bit exponent underflow\n        //\n        sigf = 0x100000 + (u32[1] & 0x000FFFFF);\n        sigf = 0x100000 + (sigf << ((expo >> 20) - 998)) >> 21;\n        expo = 0;\n    }\n    else {\n        //\n        // No overflow or underflow, rebase the exponent and round the mantissa\n        // Magic numbers:\n        // 0x200 = 00000010 00000000 -- masks off the 10th bit\n        //\n        // Ensure the first mantissa bit (the 10th one) is 1 and round\n        expo = (expo - 0x3F000000) >> 10;\n        sigf = ((u32[1] & 0x000FFFFF) + 0x200) >> 10;\n    }\n    return sign | expo | sigf & 0xFFFF;\n}\n\n//# sourceMappingURL=math.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Vector } from '../vector.mjs';\nimport { Visitor } from '../visitor.mjs';\nimport { bigIntToNumber } from '../util/bigint.mjs';\nimport { encodeUtf8 } from '../util/utf8.mjs';\nimport { float64ToUint16 } from '../util/math.mjs';\nimport { UnionMode, Precision, DateUnit, TimeUnit, IntervalUnit } from '../enum.mjs';\n/** @ignore */\nexport class SetVisitor extends Visitor {\n}\n/** @ignore */\nfunction wrapSet(fn) {\n    return (data, _1, _2) => {\n        if (data.setValid(_1, _2 != null)) {\n            return fn(data, _1, _2);\n        }\n    };\n}\n/** @ignore */\nexport const setEpochMsToDays = (data, index, epochMs) => { data[index] = Math.floor(epochMs / 86400000); };\n/** @ignore */\nexport const setVariableWidthBytes = (values, valueOffsets, index, value) => {\n    if (index + 1 < valueOffsets.length) {\n        const x = bigIntToNumber(valueOffsets[index]);\n        const y = bigIntToNumber(valueOffsets[index + 1]);\n        values.set(value.subarray(0, y - x), x);\n    }\n};\n/** @ignore */\nconst setBool = ({ offset, values }, index, val) => {\n    const idx = offset + index;\n    val ? (values[idx >> 3] |= (1 << (idx % 8))) // true\n        : (values[idx >> 3] &= ~(1 << (idx % 8))); // false\n};\n/** @ignore */\nexport const setInt = ({ values }, index, value) => { values[index] = value; };\n/** @ignore */\nexport const setFloat = ({ values }, index, value) => { values[index] = value; };\n/** @ignore */\nexport const setFloat16 = ({ values }, index, value) => { values[index] = float64ToUint16(value); };\n/* istanbul ignore next */\n/** @ignore */\nexport const setAnyFloat = (data, index, value) => {\n    switch (data.type.precision) {\n        case Precision.HALF:\n            return setFloat16(data, index, value);\n        case Precision.SINGLE:\n        case Precision.DOUBLE:\n            return setFloat(data, index, value);\n    }\n};\n/** @ignore */\nexport const setDateDay = ({ values }, index, value) => { setEpochMsToDays(values, index, value.valueOf()); };\n/** @ignore */\nexport const setDateMillisecond = ({ values }, index, value) => { values[index] = BigInt(value); };\n/** @ignore */\nexport const setFixedSizeBinary = ({ stride, values }, index, value) => { values.set(value.subarray(0, stride), stride * index); };\n/** @ignore */\nconst setBinary = ({ values, valueOffsets }, index, value) => setVariableWidthBytes(values, valueOffsets, index, value);\n/** @ignore */\nconst setUtf8 = ({ values, valueOffsets }, index, value) => setVariableWidthBytes(values, valueOffsets, index, encodeUtf8(value));\n/* istanbul ignore next */\nexport const setDate = (data, index, value) => {\n    data.type.unit === DateUnit.DAY\n        ? setDateDay(data, index, value)\n        : setDateMillisecond(data, index, value);\n};\n/** @ignore */\nexport const setTimestampSecond = ({ values }, index, value) => { values[index] = BigInt(value / 1000); };\n/** @ignore */\nexport const setTimestampMillisecond = ({ values }, index, value) => { values[index] = BigInt(value); };\n/** @ignore */\nexport const setTimestampMicrosecond = ({ values }, index, value) => { values[index] = BigInt(value * 1000); };\n/** @ignore */\nexport const setTimestampNanosecond = ({ values }, index, value) => { values[index] = BigInt(value * 1000000); };\n/* istanbul ignore next */\n/** @ignore */\nexport const setTimestamp = (data, index, value) => {\n    switch (data.type.unit) {\n        case TimeUnit.SECOND: return setTimestampSecond(data, index, value);\n        case TimeUnit.MILLISECOND: return setTimestampMillisecond(data, index, value);\n        case TimeUnit.MICROSECOND: return setTimestampMicrosecond(data, index, value);\n        case TimeUnit.NANOSECOND: return setTimestampNanosecond(data, index, value);\n    }\n};\n/** @ignore */\nexport const setTimeSecond = ({ values }, index, value) => { values[index] = value; };\n/** @ignore */\nexport const setTimeMillisecond = ({ values }, index, value) => { values[index] = value; };\n/** @ignore */\nexport const setTimeMicrosecond = ({ values }, index, value) => { values[index] = value; };\n/** @ignore */\nexport const setTimeNanosecond = ({ values }, index, value) => { values[index] = value; };\n/* istanbul ignore next */\n/** @ignore */\nexport const setTime = (data, index, value) => {\n    switch (data.type.unit) {\n        case TimeUnit.SECOND: return setTimeSecond(data, index, value);\n        case TimeUnit.MILLISECOND: return setTimeMillisecond(data, index, value);\n        case TimeUnit.MICROSECOND: return setTimeMicrosecond(data, index, value);\n        case TimeUnit.NANOSECOND: return setTimeNanosecond(data, index, value);\n    }\n};\n/** @ignore */\nexport const setDecimal = ({ values, stride }, index, value) => { values.set(value.subarray(0, stride), stride * index); };\n/** @ignore */\nconst setList = (data, index, value) => {\n    const values = data.children[0];\n    const valueOffsets = data.valueOffsets;\n    const set = instance.getVisitFn(values);\n    if (Array.isArray(value)) {\n        for (let idx = -1, itr = valueOffsets[index], end = valueOffsets[index + 1]; itr < end;) {\n            set(values, itr++, value[++idx]);\n        }\n    }\n    else {\n        for (let idx = -1, itr = valueOffsets[index], end = valueOffsets[index + 1]; itr < end;) {\n            set(values, itr++, value.get(++idx));\n        }\n    }\n};\n/** @ignore */\nconst setMap = (data, index, value) => {\n    const values = data.children[0];\n    const { valueOffsets } = data;\n    const set = instance.getVisitFn(values);\n    let { [index]: idx, [index + 1]: end } = valueOffsets;\n    const entries = value instanceof Map ? value.entries() : Object.entries(value);\n    for (const val of entries) {\n        set(values, idx, val);\n        if (++idx >= end)\n            break;\n    }\n};\n/** @ignore */ const _setStructArrayValue = (o, v) => (set, c, _, i) => c && set(c, o, v[i]);\n/** @ignore */ const _setStructVectorValue = (o, v) => (set, c, _, i) => c && set(c, o, v.get(i));\n/** @ignore */ const _setStructMapValue = (o, v) => (set, c, f, _) => c && set(c, o, v.get(f.name));\n/** @ignore */ const _setStructObjectValue = (o, v) => (set, c, f, _) => c && set(c, o, v[f.name]);\n/** @ignore */\nconst setStruct = (data, index, value) => {\n    const childSetters = data.type.children.map((f) => instance.getVisitFn(f.type));\n    const set = value instanceof Map ? _setStructMapValue(index, value) :\n        value instanceof Vector ? _setStructVectorValue(index, value) :\n            Array.isArray(value) ? _setStructArrayValue(index, value) :\n                _setStructObjectValue(index, value);\n    // eslint-disable-next-line unicorn/no-array-for-each\n    data.type.children.forEach((f, i) => set(childSetters[i], data.children[i], f, i));\n};\n/* istanbul ignore next */\n/** @ignore */\nconst setUnion = (data, index, value) => {\n    data.type.mode === UnionMode.Dense ?\n        setDenseUnion(data, index, value) :\n        setSparseUnion(data, index, value);\n};\n/** @ignore */\nconst setDenseUnion = (data, index, value) => {\n    const childIndex = data.type.typeIdToChildIndex[data.typeIds[index]];\n    const child = data.children[childIndex];\n    instance.visit(child, data.valueOffsets[index], value);\n};\n/** @ignore */\nconst setSparseUnion = (data, index, value) => {\n    const childIndex = data.type.typeIdToChildIndex[data.typeIds[index]];\n    const child = data.children[childIndex];\n    instance.visit(child, index, value);\n};\n/** @ignore */\nconst setDictionary = (data, index, value) => {\n    var _a;\n    (_a = data.dictionary) === null || _a === void 0 ? void 0 : _a.set(data.values[index], value);\n};\n/* istanbul ignore next */\n/** @ignore */\nexport const setIntervalValue = (data, index, value) => {\n    (data.type.unit === IntervalUnit.DAY_TIME)\n        ? setIntervalDayTime(data, index, value)\n        : setIntervalYearMonth(data, index, value);\n};\n/** @ignore */\nexport const setIntervalDayTime = ({ values }, index, value) => { values.set(value.subarray(0, 2), 2 * index); };\n/** @ignore */\nexport const setIntervalYearMonth = ({ values }, index, value) => { values[index] = (value[0] * 12) + (value[1] % 12); };\n/** @ignore */\nexport const setDurationSecond = ({ values }, index, value) => { values[index] = value; };\n/** @ignore */\nexport const setDurationMillisecond = ({ values }, index, value) => { values[index] = value; };\n/** @ignore */\nexport const setDurationMicrosecond = ({ values }, index, value) => { values[index] = value; };\n/** @ignore */\nexport const setDurationNanosecond = ({ values }, index, value) => { values[index] = value; };\n/* istanbul ignore next */\n/** @ignore */\nexport const setDuration = (data, index, value) => {\n    switch (data.type.unit) {\n        case TimeUnit.SECOND: return setDurationSecond(data, index, value);\n        case TimeUnit.MILLISECOND: return setDurationMillisecond(data, index, value);\n        case TimeUnit.MICROSECOND: return setDurationMicrosecond(data, index, value);\n        case TimeUnit.NANOSECOND: return setDurationNanosecond(data, index, value);\n    }\n};\n/** @ignore */\nconst setFixedSizeList = (data, index, value) => {\n    const { stride } = data;\n    const child = data.children[0];\n    const set = instance.getVisitFn(child);\n    if (Array.isArray(value)) {\n        for (let idx = -1, offset = index * stride; ++idx < stride;) {\n            set(child, offset + idx, value[idx]);\n        }\n    }\n    else {\n        for (let idx = -1, offset = index * stride; ++idx < stride;) {\n            set(child, offset + idx, value.get(idx));\n        }\n    }\n};\nSetVisitor.prototype.visitBool = wrapSet(setBool);\nSetVisitor.prototype.visitInt = wrapSet(setInt);\nSetVisitor.prototype.visitInt8 = wrapSet(setInt);\nSetVisitor.prototype.visitInt16 = wrapSet(setInt);\nSetVisitor.prototype.visitInt32 = wrapSet(setInt);\nSetVisitor.prototype.visitInt64 = wrapSet(setInt);\nSetVisitor.prototype.visitUint8 = wrapSet(setInt);\nSetVisitor.prototype.visitUint16 = wrapSet(setInt);\nSetVisitor.prototype.visitUint32 = wrapSet(setInt);\nSetVisitor.prototype.visitUint64 = wrapSet(setInt);\nSetVisitor.prototype.visitFloat = wrapSet(setAnyFloat);\nSetVisitor.prototype.visitFloat16 = wrapSet(setFloat16);\nSetVisitor.prototype.visitFloat32 = wrapSet(setFloat);\nSetVisitor.prototype.visitFloat64 = wrapSet(setFloat);\nSetVisitor.prototype.visitUtf8 = wrapSet(setUtf8);\nSetVisitor.prototype.visitLargeUtf8 = wrapSet(setUtf8);\nSetVisitor.prototype.visitBinary = wrapSet(setBinary);\nSetVisitor.prototype.visitLargeBinary = wrapSet(setBinary);\nSetVisitor.prototype.visitFixedSizeBinary = wrapSet(setFixedSizeBinary);\nSetVisitor.prototype.visitDate = wrapSet(setDate);\nSetVisitor.prototype.visitDateDay = wrapSet(setDateDay);\nSetVisitor.prototype.visitDateMillisecond = wrapSet(setDateMillisecond);\nSetVisitor.prototype.visitTimestamp = wrapSet(setTimestamp);\nSetVisitor.prototype.visitTimestampSecond = wrapSet(setTimestampSecond);\nSetVisitor.prototype.visitTimestampMillisecond = wrapSet(setTimestampMillisecond);\nSetVisitor.prototype.visitTimestampMicrosecond = wrapSet(setTimestampMicrosecond);\nSetVisitor.prototype.visitTimestampNanosecond = wrapSet(setTimestampNanosecond);\nSetVisitor.prototype.visitTime = wrapSet(setTime);\nSetVisitor.prototype.visitTimeSecond = wrapSet(setTimeSecond);\nSetVisitor.prototype.visitTimeMillisecond = wrapSet(setTimeMillisecond);\nSetVisitor.prototype.visitTimeMicrosecond = wrapSet(setTimeMicrosecond);\nSetVisitor.prototype.visitTimeNanosecond = wrapSet(setTimeNanosecond);\nSetVisitor.prototype.visitDecimal = wrapSet(setDecimal);\nSetVisitor.prototype.visitList = wrapSet(setList);\nSetVisitor.prototype.visitStruct = wrapSet(setStruct);\nSetVisitor.prototype.visitUnion = wrapSet(setUnion);\nSetVisitor.prototype.visitDenseUnion = wrapSet(setDenseUnion);\nSetVisitor.prototype.visitSparseUnion = wrapSet(setSparseUnion);\nSetVisitor.prototype.visitDictionary = wrapSet(setDictionary);\nSetVisitor.prototype.visitInterval = wrapSet(setIntervalValue);\nSetVisitor.prototype.visitIntervalDayTime = wrapSet(setIntervalDayTime);\nSetVisitor.prototype.visitIntervalYearMonth = wrapSet(setIntervalYearMonth);\nSetVisitor.prototype.visitDuration = wrapSet(setDuration);\nSetVisitor.prototype.visitDurationSecond = wrapSet(setDurationSecond);\nSetVisitor.prototype.visitDurationMillisecond = wrapSet(setDurationMillisecond);\nSetVisitor.prototype.visitDurationMicrosecond = wrapSet(setDurationMicrosecond);\nSetVisitor.prototype.visitDurationNanosecond = wrapSet(setDurationNanosecond);\nSetVisitor.prototype.visitFixedSizeList = wrapSet(setFixedSizeList);\nSetVisitor.prototype.visitMap = wrapSet(setMap);\n/** @ignore */\nexport const instance = new SetVisitor();\n\n//# sourceMappingURL=set.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { valueToString } from '../util/pretty.mjs';\nimport { instance as getVisitor } from '../visitor/get.mjs';\nimport { instance as setVisitor } from '../visitor/set.mjs';\n/** @ignore */ const kParent = Symbol.for('parent');\n/** @ignore */ const kRowIndex = Symbol.for('rowIndex');\nexport class StructRow {\n    constructor(parent, rowIndex) {\n        this[kParent] = parent;\n        this[kRowIndex] = rowIndex;\n        return new Proxy(this, new StructRowProxyHandler());\n    }\n    toArray() { return Object.values(this.toJSON()); }\n    toJSON() {\n        const i = this[kRowIndex];\n        const parent = this[kParent];\n        const keys = parent.type.children;\n        const json = {};\n        for (let j = -1, n = keys.length; ++j < n;) {\n            json[keys[j].name] = getVisitor.visit(parent.children[j], i);\n        }\n        return json;\n    }\n    toString() {\n        return `{${[...this].map(([key, val]) => `${valueToString(key)}: ${valueToString(val)}`).join(', ')}}`;\n    }\n    [Symbol.for('nodejs.util.inspect.custom')]() {\n        return this.toString();\n    }\n    [Symbol.iterator]() {\n        return new StructRowIterator(this[kParent], this[kRowIndex]);\n    }\n}\nclass StructRowIterator {\n    constructor(data, rowIndex) {\n        this.childIndex = 0;\n        this.children = data.children;\n        this.rowIndex = rowIndex;\n        this.childFields = data.type.children;\n        this.numChildren = this.childFields.length;\n    }\n    [Symbol.iterator]() { return this; }\n    next() {\n        const i = this.childIndex;\n        if (i < this.numChildren) {\n            this.childIndex = i + 1;\n            return {\n                done: false,\n                value: [\n                    this.childFields[i].name,\n                    getVisitor.visit(this.children[i], this.rowIndex)\n                ]\n            };\n        }\n        return { done: true, value: null };\n    }\n}\nObject.defineProperties(StructRow.prototype, {\n    [Symbol.toStringTag]: { enumerable: false, configurable: false, value: 'Row' },\n    [kParent]: { writable: true, enumerable: false, configurable: false, value: null },\n    [kRowIndex]: { writable: true, enumerable: false, configurable: false, value: -1 },\n});\nclass StructRowProxyHandler {\n    isExtensible() { return false; }\n    deleteProperty() { return false; }\n    preventExtensions() { return true; }\n    ownKeys(row) {\n        return row[kParent].type.children.map((f) => f.name);\n    }\n    has(row, key) {\n        return row[kParent].type.children.findIndex((f) => f.name === key) !== -1;\n    }\n    getOwnPropertyDescriptor(row, key) {\n        if (row[kParent].type.children.findIndex((f) => f.name === key) !== -1) {\n            return { writable: true, enumerable: true, configurable: true };\n        }\n        return;\n    }\n    get(row, key) {\n        // Look up key in row first\n        if (Reflect.has(row, key)) {\n            return row[key];\n        }\n        const idx = row[kParent].type.children.findIndex((f) => f.name === key);\n        if (idx !== -1) {\n            const val = getVisitor.visit(row[kParent].children[idx], row[kRowIndex]);\n            // Cache key/val lookups\n            Reflect.set(row, key, val);\n            return val;\n        }\n    }\n    set(row, key, val) {\n        const idx = row[kParent].type.children.findIndex((f) => f.name === key);\n        if (idx !== -1) {\n            setVisitor.visit(row[kParent].children[idx], row[kRowIndex], val);\n            // Cache key/val lookups\n            return Reflect.set(row, key, val);\n        }\n        else if (Reflect.has(row, key) || typeof key === 'symbol') {\n            return Reflect.set(row, key, val);\n        }\n        return false;\n    }\n}\n\n//# sourceMappingURL=struct.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { BN } from '../util/bn.mjs';\nimport { Vector } from '../vector.mjs';\nimport { Visitor } from '../visitor.mjs';\nimport { MapRow } from '../row/map.mjs';\nimport { StructRow } from '../row/struct.mjs';\nimport { bigIntToNumber, divideBigInts } from '../util/bigint.mjs';\nimport { decodeUtf8 } from '../util/utf8.mjs';\nimport { uint16ToFloat64 } from '../util/math.mjs';\nimport { UnionMode, Precision, DateUnit, TimeUnit, IntervalUnit } from '../enum.mjs';\n/** @ignore */\nexport class GetVisitor extends Visitor {\n}\n/** @ignore */\nfunction wrapGet(fn) {\n    return (data, _1) => data.getValid(_1) ? fn(data, _1) : null;\n}\n/** @ignore */ const epochDaysToMs = (data, index) => 86400000 * data[index];\n/** @ignore */\nconst getNull = (_data, _index) => null;\n/** @ignore */\nconst getVariableWidthBytes = (values, valueOffsets, index) => {\n    if (index + 1 >= valueOffsets.length) {\n        return null;\n    }\n    const x = bigIntToNumber(valueOffsets[index]);\n    const y = bigIntToNumber(valueOffsets[index + 1]);\n    return values.subarray(x, y);\n};\n/** @ignore */\nconst getBool = ({ offset, values }, index) => {\n    const idx = offset + index;\n    const byte = values[idx >> 3];\n    return (byte & 1 << (idx % 8)) !== 0;\n};\n/** @ignore */\nconst getDateDay = ({ values }, index) => epochDaysToMs(values, index);\n/** @ignore */\nconst getDateMillisecond = ({ values }, index) => bigIntToNumber(values[index]);\n/** @ignore */\nconst getNumeric = ({ stride, values }, index) => values[stride * index];\n/** @ignore */\nconst getFloat16 = ({ stride, values }, index) => uint16ToFloat64(values[stride * index]);\n/** @ignore */\nconst getBigInts = ({ values }, index) => values[index];\n/** @ignore */\nconst getFixedSizeBinary = ({ stride, values }, index) => values.subarray(stride * index, stride * (index + 1));\n/** @ignore */\nconst getBinary = ({ values, valueOffsets }, index) => getVariableWidthBytes(values, valueOffsets, index);\n/** @ignore */\nconst getUtf8 = ({ values, valueOffsets }, index) => {\n    const bytes = getVariableWidthBytes(values, valueOffsets, index);\n    return bytes !== null ? decodeUtf8(bytes) : null;\n};\n/* istanbul ignore next */\n/** @ignore */\nconst getInt = ({ values }, index) => values[index];\n/* istanbul ignore next */\n/** @ignore */\nconst getFloat = ({ type, values }, index) => (type.precision !== Precision.HALF ? values[index] : uint16ToFloat64(values[index]));\n/* istanbul ignore next */\n/** @ignore */\nconst getDate = (data, index) => (data.type.unit === DateUnit.DAY\n    ? getDateDay(data, index)\n    : getDateMillisecond(data, index));\n/** @ignore */\nconst getTimestampSecond = ({ values }, index) => 1000 * bigIntToNumber(values[index]);\n/** @ignore */\nconst getTimestampMillisecond = ({ values }, index) => bigIntToNumber(values[index]);\n/** @ignore */\nconst getTimestampMicrosecond = ({ values }, index) => divideBigInts(values[index], BigInt(1000));\n/** @ignore */\nconst getTimestampNanosecond = ({ values }, index) => divideBigInts(values[index], BigInt(1000000));\n/* istanbul ignore next */\n/** @ignore */\nconst getTimestamp = (data, index) => {\n    switch (data.type.unit) {\n        case TimeUnit.SECOND: return getTimestampSecond(data, index);\n        case TimeUnit.MILLISECOND: return getTimestampMillisecond(data, index);\n        case TimeUnit.MICROSECOND: return getTimestampMicrosecond(data, index);\n        case TimeUnit.NANOSECOND: return getTimestampNanosecond(data, index);\n    }\n};\n/** @ignore */\nconst getTimeSecond = ({ values }, index) => values[index];\n/** @ignore */\nconst getTimeMillisecond = ({ values }, index) => values[index];\n/** @ignore */\nconst getTimeMicrosecond = ({ values }, index) => values[index];\n/** @ignore */\nconst getTimeNanosecond = ({ values }, index) => values[index];\n/* istanbul ignore next */\n/** @ignore */\nconst getTime = (data, index) => {\n    switch (data.type.unit) {\n        case TimeUnit.SECOND: return getTimeSecond(data, index);\n        case TimeUnit.MILLISECOND: return getTimeMillisecond(data, index);\n        case TimeUnit.MICROSECOND: return getTimeMicrosecond(data, index);\n        case TimeUnit.NANOSECOND: return getTimeNanosecond(data, index);\n    }\n};\n/** @ignore */\nconst getDecimal = ({ values, stride }, index) => BN.decimal(values.subarray(stride * index, stride * (index + 1)));\n/** @ignore */\nconst getList = (data, index) => {\n    const { valueOffsets, stride, children } = data;\n    const { [index * stride]: begin, [index * stride + 1]: end } = valueOffsets;\n    const child = children[0];\n    const slice = child.slice(begin, end - begin);\n    return new Vector([slice]);\n};\n/** @ignore */\nconst getMap = (data, index) => {\n    const { valueOffsets, children } = data;\n    const { [index]: begin, [index + 1]: end } = valueOffsets;\n    const child = children[0];\n    return new MapRow(child.slice(begin, end - begin));\n};\n/** @ignore */\nconst getStruct = (data, index) => {\n    return new StructRow(data, index);\n};\n/* istanbul ignore next */\n/** @ignore */\nconst getUnion = (data, index) => {\n    return data.type.mode === UnionMode.Dense ?\n        getDenseUnion(data, index) :\n        getSparseUnion(data, index);\n};\n/** @ignore */\nconst getDenseUnion = (data, index) => {\n    const childIndex = data.type.typeIdToChildIndex[data.typeIds[index]];\n    const child = data.children[childIndex];\n    return instance.visit(child, data.valueOffsets[index]);\n};\n/** @ignore */\nconst getSparseUnion = (data, index) => {\n    const childIndex = data.type.typeIdToChildIndex[data.typeIds[index]];\n    const child = data.children[childIndex];\n    return instance.visit(child, index);\n};\n/** @ignore */\nconst getDictionary = (data, index) => {\n    var _a;\n    return (_a = data.dictionary) === null || _a === void 0 ? void 0 : _a.get(data.values[index]);\n};\n/* istanbul ignore next */\n/** @ignore */\nconst getInterval = (data, index) => (data.type.unit === IntervalUnit.DAY_TIME)\n    ? getIntervalDayTime(data, index)\n    : getIntervalYearMonth(data, index);\n/** @ignore */\nconst getIntervalDayTime = ({ values }, index) => values.subarray(2 * index, 2 * (index + 1));\n/** @ignore */\nconst getIntervalYearMonth = ({ values }, index) => {\n    const interval = values[index];\n    const int32s = new Int32Array(2);\n    int32s[0] = Math.trunc(interval / 12); /* years */\n    int32s[1] = Math.trunc(interval % 12); /* months */\n    return int32s;\n};\n/** @ignore */\nconst getDurationSecond = ({ values }, index) => values[index];\n/** @ignore */\nconst getDurationMillisecond = ({ values }, index) => values[index];\n/** @ignore */\nconst getDurationMicrosecond = ({ values }, index) => values[index];\n/** @ignore */\nconst getDurationNanosecond = ({ values }, index) => values[index];\n/* istanbul ignore next */\n/** @ignore */\nconst getDuration = (data, index) => {\n    switch (data.type.unit) {\n        case TimeUnit.SECOND: return getDurationSecond(data, index);\n        case TimeUnit.MILLISECOND: return getDurationMillisecond(data, index);\n        case TimeUnit.MICROSECOND: return getDurationMicrosecond(data, index);\n        case TimeUnit.NANOSECOND: return getDurationNanosecond(data, index);\n    }\n};\n/** @ignore */\nconst getFixedSizeList = (data, index) => {\n    const { stride, children } = data;\n    const child = children[0];\n    const slice = child.slice(index * stride, stride);\n    return new Vector([slice]);\n};\nGetVisitor.prototype.visitNull = wrapGet(getNull);\nGetVisitor.prototype.visitBool = wrapGet(getBool);\nGetVisitor.prototype.visitInt = wrapGet(getInt);\nGetVisitor.prototype.visitInt8 = wrapGet(getNumeric);\nGetVisitor.prototype.visitInt16 = wrapGet(getNumeric);\nGetVisitor.prototype.visitInt32 = wrapGet(getNumeric);\nGetVisitor.prototype.visitInt64 = wrapGet(getBigInts);\nGetVisitor.prototype.visitUint8 = wrapGet(getNumeric);\nGetVisitor.prototype.visitUint16 = wrapGet(getNumeric);\nGetVisitor.prototype.visitUint32 = wrapGet(getNumeric);\nGetVisitor.prototype.visitUint64 = wrapGet(getBigInts);\nGetVisitor.prototype.visitFloat = wrapGet(getFloat);\nGetVisitor.prototype.visitFloat16 = wrapGet(getFloat16);\nGetVisitor.prototype.visitFloat32 = wrapGet(getNumeric);\nGetVisitor.prototype.visitFloat64 = wrapGet(getNumeric);\nGetVisitor.prototype.visitUtf8 = wrapGet(getUtf8);\nGetVisitor.prototype.visitLargeUtf8 = wrapGet(getUtf8);\nGetVisitor.prototype.visitBinary = wrapGet(getBinary);\nGetVisitor.prototype.visitLargeBinary = wrapGet(getBinary);\nGetVisitor.prototype.visitFixedSizeBinary = wrapGet(getFixedSizeBinary);\nGetVisitor.prototype.visitDate = wrapGet(getDate);\nGetVisitor.prototype.visitDateDay = wrapGet(getDateDay);\nGetVisitor.prototype.visitDateMillisecond = wrapGet(getDateMillisecond);\nGetVisitor.prototype.visitTimestamp = wrapGet(getTimestamp);\nGetVisitor.prototype.visitTimestampSecond = wrapGet(getTimestampSecond);\nGetVisitor.prototype.visitTimestampMillisecond = wrapGet(getTimestampMillisecond);\nGetVisitor.prototype.visitTimestampMicrosecond = wrapGet(getTimestampMicrosecond);\nGetVisitor.prototype.visitTimestampNanosecond = wrapGet(getTimestampNanosecond);\nGetVisitor.prototype.visitTime = wrapGet(getTime);\nGetVisitor.prototype.visitTimeSecond = wrapGet(getTimeSecond);\nGetVisitor.prototype.visitTimeMillisecond = wrapGet(getTimeMillisecond);\nGetVisitor.prototype.visitTimeMicrosecond = wrapGet(getTimeMicrosecond);\nGetVisitor.prototype.visitTimeNanosecond = wrapGet(getTimeNanosecond);\nGetVisitor.prototype.visitDecimal = wrapGet(getDecimal);\nGetVisitor.prototype.visitList = wrapGet(getList);\nGetVisitor.prototype.visitStruct = wrapGet(getStruct);\nGetVisitor.prototype.visitUnion = wrapGet(getUnion);\nGetVisitor.prototype.visitDenseUnion = wrapGet(getDenseUnion);\nGetVisitor.prototype.visitSparseUnion = wrapGet(getSparseUnion);\nGetVisitor.prototype.visitDictionary = wrapGet(getDictionary);\nGetVisitor.prototype.visitInterval = wrapGet(getInterval);\nGetVisitor.prototype.visitIntervalDayTime = wrapGet(getIntervalDayTime);\nGetVisitor.prototype.visitIntervalYearMonth = wrapGet(getIntervalYearMonth);\nGetVisitor.prototype.visitDuration = wrapGet(getDuration);\nGetVisitor.prototype.visitDurationSecond = wrapGet(getDurationSecond);\nGetVisitor.prototype.visitDurationMillisecond = wrapGet(getDurationMillisecond);\nGetVisitor.prototype.visitDurationMicrosecond = wrapGet(getDurationMicrosecond);\nGetVisitor.prototype.visitDurationNanosecond = wrapGet(getDurationNanosecond);\nGetVisitor.prototype.visitFixedSizeList = wrapGet(getFixedSizeList);\nGetVisitor.prototype.visitMap = wrapGet(getMap);\n/** @ignore */\nexport const instance = new GetVisitor();\n\n//# sourceMappingURL=get.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Vector } from '../vector.mjs';\nimport { valueToString } from '../util/pretty.mjs';\nimport { instance as getVisitor } from '../visitor/get.mjs';\nimport { instance as setVisitor } from '../visitor/set.mjs';\n/** @ignore */ export const kKeys = Symbol.for('keys');\n/** @ignore */ export const kVals = Symbol.for('vals');\n/** @ignore */ export const kKeysAsStrings = Symbol.for('kKeysAsStrings');\n/** @ignore */ export const _kKeysAsStrings = Symbol.for('_kKeysAsStrings');\nexport class MapRow {\n    constructor(slice) {\n        this[kKeys] = new Vector([slice.children[0]]).memoize();\n        this[kVals] = slice.children[1];\n        return new Proxy(this, new MapRowProxyHandler());\n    }\n    /** @ignore */\n    get [kKeysAsStrings]() {\n        return this[_kKeysAsStrings] || (this[_kKeysAsStrings] = Array.from(this[kKeys].toArray(), String));\n    }\n    [Symbol.iterator]() {\n        return new MapRowIterator(this[kKeys], this[kVals]);\n    }\n    get size() { return this[kKeys].length; }\n    toArray() { return Object.values(this.toJSON()); }\n    toJSON() {\n        const keys = this[kKeys];\n        const vals = this[kVals];\n        const json = {};\n        for (let i = -1, n = keys.length; ++i < n;) {\n            json[keys.get(i)] = getVisitor.visit(vals, i);\n        }\n        return json;\n    }\n    toString() {\n        return `{${[...this].map(([key, val]) => `${valueToString(key)}: ${valueToString(val)}`).join(', ')}}`;\n    }\n    [Symbol.for('nodejs.util.inspect.custom')]() {\n        return this.toString();\n    }\n}\nclass MapRowIterator {\n    constructor(keys, vals) {\n        this.keys = keys;\n        this.vals = vals;\n        this.keyIndex = 0;\n        this.numKeys = keys.length;\n    }\n    [Symbol.iterator]() { return this; }\n    next() {\n        const i = this.keyIndex;\n        if (i === this.numKeys) {\n            return { done: true, value: null };\n        }\n        this.keyIndex++;\n        return {\n            done: false,\n            value: [\n                this.keys.get(i),\n                getVisitor.visit(this.vals, i),\n            ]\n        };\n    }\n}\n/** @ignore */\nclass MapRowProxyHandler {\n    isExtensible() { return false; }\n    deleteProperty() { return false; }\n    preventExtensions() { return true; }\n    ownKeys(row) {\n        return row[kKeysAsStrings];\n    }\n    has(row, key) {\n        return row[kKeysAsStrings].includes(key);\n    }\n    getOwnPropertyDescriptor(row, key) {\n        const idx = row[kKeysAsStrings].indexOf(key);\n        if (idx !== -1) {\n            return { writable: true, enumerable: true, configurable: true };\n        }\n        return;\n    }\n    get(row, key) {\n        // Look up key in row first\n        if (Reflect.has(row, key)) {\n            return row[key];\n        }\n        const idx = row[kKeysAsStrings].indexOf(key);\n        if (idx !== -1) {\n            const val = getVisitor.visit(Reflect.get(row, kVals), idx);\n            // Cache key/val lookups\n            Reflect.set(row, key, val);\n            return val;\n        }\n    }\n    set(row, key, val) {\n        const idx = row[kKeysAsStrings].indexOf(key);\n        if (idx !== -1) {\n            setVisitor.visit(Reflect.get(row, kVals), idx, val);\n            // Cache key/val lookups\n            return Reflect.set(row, key, val);\n        }\n        else if (Reflect.has(row, key)) {\n            return Reflect.set(row, key, val);\n        }\n        return false;\n    }\n}\nObject.defineProperties(MapRow.prototype, {\n    [Symbol.toStringTag]: { enumerable: false, configurable: false, value: 'Row' },\n    [kKeys]: { writable: true, enumerable: false, configurable: false, value: null },\n    [kVals]: { writable: true, enumerable: false, configurable: false, value: null },\n    [_kKeysAsStrings]: { writable: true, enumerable: false, configurable: false, value: null },\n});\n\n//# sourceMappingURL=map.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Vector } from '../vector.mjs';\nimport { MapRow } from '../row/map.mjs';\nimport { StructRow } from '../row/struct.mjs';\nimport { compareArrayLike } from '../util/buffer.mjs';\n/** @ignore */\nlet tmp;\n/** @ignore */\nexport function clampRange(source, begin, end, then) {\n    // Adjust args similar to Array.prototype.slice. Normalize begin/end to\n    // clamp between 0 and length, and wrap around on negative indices, e.g.\n    // slice(-1, 5) or slice(5, -1)\n    const { length: len = 0 } = source;\n    let lhs = typeof begin !== 'number' ? 0 : begin;\n    let rhs = typeof end !== 'number' ? len : end;\n    // wrap around on negative start/end positions\n    (lhs < 0) && (lhs = ((lhs % len) + len) % len);\n    (rhs < 0) && (rhs = ((rhs % len) + len) % len);\n    // ensure lhs <= rhs\n    (rhs < lhs) && (tmp = lhs, lhs = rhs, rhs = tmp);\n    // ensure rhs <= length\n    (rhs > len) && (rhs = len);\n    return then ? then(source, lhs, rhs) : [lhs, rhs];\n}\n/** @ignore */\nexport const wrapIndex = (index, len) => index < 0 ? (len + index) : index;\nconst isNaNFast = (value) => value !== value;\n/** @ignore */\nexport function createElementComparator(search) {\n    const typeofSearch = typeof search;\n    // Compare primitives\n    if (typeofSearch !== 'object' || search === null) {\n        // Compare NaN\n        if (isNaNFast(search)) {\n            return isNaNFast;\n        }\n        return (value) => value === search;\n    }\n    // Compare Dates\n    if (search instanceof Date) {\n        const valueOfSearch = search.valueOf();\n        return (value) => value instanceof Date ? (value.valueOf() === valueOfSearch) : false;\n    }\n    // Compare TypedArrays\n    if (ArrayBuffer.isView(search)) {\n        return (value) => value ? compareArrayLike(search, value) : false;\n    }\n    // Compare Maps and Rows\n    if (search instanceof Map) {\n        return createMapComparator(search);\n    }\n    // Compare Array-likes\n    if (Array.isArray(search)) {\n        return createArrayLikeComparator(search);\n    }\n    // Compare Vectors\n    if (search instanceof Vector) {\n        return createVectorComparator(search);\n    }\n    return createObjectComparator(search, true);\n    // Compare non-empty Objects\n    // return createObjectComparator(search, search instanceof Proxy);\n}\n/** @ignore */\nfunction createArrayLikeComparator(lhs) {\n    const comparators = [];\n    for (let i = -1, n = lhs.length; ++i < n;) {\n        comparators[i] = createElementComparator(lhs[i]);\n    }\n    return createSubElementsComparator(comparators);\n}\n/** @ignore */\nfunction createMapComparator(lhs) {\n    let i = -1;\n    const comparators = [];\n    for (const v of lhs.values())\n        comparators[++i] = createElementComparator(v);\n    return createSubElementsComparator(comparators);\n}\n/** @ignore */\nfunction createVectorComparator(lhs) {\n    const comparators = [];\n    for (let i = -1, n = lhs.length; ++i < n;) {\n        comparators[i] = createElementComparator(lhs.get(i));\n    }\n    return createSubElementsComparator(comparators);\n}\n/** @ignore */\nfunction createObjectComparator(lhs, allowEmpty = false) {\n    const keys = Object.keys(lhs);\n    // Only compare non-empty Objects\n    if (!allowEmpty && keys.length === 0) {\n        return () => false;\n    }\n    const comparators = [];\n    for (let i = -1, n = keys.length; ++i < n;) {\n        comparators[i] = createElementComparator(lhs[keys[i]]);\n    }\n    return createSubElementsComparator(comparators, keys);\n}\nfunction createSubElementsComparator(comparators, keys) {\n    return (rhs) => {\n        if (!rhs || typeof rhs !== 'object') {\n            return false;\n        }\n        switch (rhs.constructor) {\n            case Array: return compareArray(comparators, rhs);\n            case Map:\n                return compareObject(comparators, rhs, rhs.keys());\n            case MapRow:\n            case StructRow:\n            case Object:\n            case undefined: // support `Object.create(null)` objects\n                return compareObject(comparators, rhs, keys || Object.keys(rhs));\n        }\n        return rhs instanceof Vector ? compareVector(comparators, rhs) : false;\n    };\n}\nfunction compareArray(comparators, arr) {\n    const n = comparators.length;\n    if (arr.length !== n) {\n        return false;\n    }\n    for (let i = -1; ++i < n;) {\n        if (!(comparators[i](arr[i]))) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction compareVector(comparators, vec) {\n    const n = comparators.length;\n    if (vec.length !== n) {\n        return false;\n    }\n    for (let i = -1; ++i < n;) {\n        if (!(comparators[i](vec.get(i)))) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction compareObject(comparators, obj, keys) {\n    const lKeyItr = keys[Symbol.iterator]();\n    const rKeyItr = obj instanceof Map ? obj.keys() : Object.keys(obj)[Symbol.iterator]();\n    const rValItr = obj instanceof Map ? obj.values() : Object.values(obj)[Symbol.iterator]();\n    let i = 0;\n    const n = comparators.length;\n    let rVal = rValItr.next();\n    let lKey = lKeyItr.next();\n    let rKey = rKeyItr.next();\n    for (; i < n && !lKey.done && !rKey.done && !rVal.done; ++i, lKey = lKeyItr.next(), rKey = rKeyItr.next(), rVal = rValItr.next()) {\n        if (lKey.value !== rKey.value || !comparators[i](rVal.value)) {\n            break;\n        }\n    }\n    if (i === n && lKey.done && rKey.done && rVal.done) {\n        return true;\n    }\n    lKeyItr.return && lKeyItr.return();\n    rKeyItr.return && rKeyItr.return();\n    rValItr.return && rValItr.return();\n    return false;\n}\n\n//# sourceMappingURL=vector.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n/** @ignore */\nexport function getBool(_data, _index, byte, bit) {\n    return (byte & 1 << bit) !== 0;\n}\n/** @ignore */\nexport function getBit(_data, _index, byte, bit) {\n    return (byte & 1 << bit) >> bit;\n}\n/** @ignore */\nexport function setBool(bytes, index, value) {\n    return value ?\n        !!(bytes[index >> 3] |= (1 << (index % 8))) || true :\n        !(bytes[index >> 3] &= ~(1 << (index % 8))) && false;\n}\n/** @ignore */\nexport function truncateBitmap(offset, length, bitmap) {\n    const alignedSize = (bitmap.byteLength + 7) & ~7;\n    if (offset > 0 || bitmap.byteLength < alignedSize) {\n        const bytes = new Uint8Array(alignedSize);\n        // If the offset is a multiple of 8 bits, it's safe to slice the bitmap\n        bytes.set(offset % 8 === 0 ? bitmap.subarray(offset >> 3) :\n            // Otherwise iterate each bit from the offset and return a new one\n            packBools(new BitIterator(bitmap, offset, length, null, getBool)).subarray(0, alignedSize));\n        return bytes;\n    }\n    return bitmap;\n}\n/** @ignore */\nexport function packBools(values) {\n    const xs = [];\n    let i = 0, bit = 0, byte = 0;\n    for (const value of values) {\n        value && (byte |= 1 << bit);\n        if (++bit === 8) {\n            xs[i++] = byte;\n            byte = bit = 0;\n        }\n    }\n    if (i === 0 || bit > 0) {\n        xs[i++] = byte;\n    }\n    const b = new Uint8Array((xs.length + 7) & ~7);\n    b.set(xs);\n    return b;\n}\n/** @ignore */\nexport class BitIterator {\n    constructor(bytes, begin, length, context, get) {\n        this.bytes = bytes;\n        this.length = length;\n        this.context = context;\n        this.get = get;\n        this.bit = begin % 8;\n        this.byteIndex = begin >> 3;\n        this.byte = bytes[this.byteIndex++];\n        this.index = 0;\n    }\n    next() {\n        if (this.index < this.length) {\n            if (this.bit === 8) {\n                this.bit = 0;\n                this.byte = this.bytes[this.byteIndex++];\n            }\n            return {\n                value: this.get(this.context, this.index++, this.byte, this.bit++)\n            };\n        }\n        return { done: true, value: null };\n    }\n    [Symbol.iterator]() {\n        return this;\n    }\n}\n/**\n * Compute the population count (the number of bits set to 1) for a range of bits in a Uint8Array.\n * @param vector The Uint8Array of bits for which to compute the population count.\n * @param lhs The range's left-hand side (or start) bit\n * @param rhs The range's right-hand side (or end) bit\n */\n/** @ignore */\nexport function popcnt_bit_range(data, lhs, rhs) {\n    if (rhs - lhs <= 0) {\n        return 0;\n    }\n    // If the bit range is less than one byte, sum the 1 bits in the bit range\n    if (rhs - lhs < 8) {\n        let sum = 0;\n        for (const bit of new BitIterator(data, lhs, rhs - lhs, data, getBit)) {\n            sum += bit;\n        }\n        return sum;\n    }\n    // Get the next lowest multiple of 8 from the right hand side\n    const rhsInside = rhs >> 3 << 3;\n    // Get the next highest multiple of 8 from the left hand side\n    const lhsInside = lhs + (lhs % 8 === 0 ? 0 : 8 - lhs % 8);\n    return (\n    // Get the popcnt of bits between the left hand side, and the next highest multiple of 8\n    popcnt_bit_range(data, lhs, lhsInside) +\n        // Get the popcnt of bits between the right hand side, and the next lowest multiple of 8\n        popcnt_bit_range(data, rhsInside, rhs) +\n        // Get the popcnt of all bits between the left and right hand sides' multiples of 8\n        popcnt_array(data, lhsInside >> 3, (rhsInside - lhsInside) >> 3));\n}\n/** @ignore */\nexport function popcnt_array(arr, byteOffset, byteLength) {\n    let cnt = 0, pos = Math.trunc(byteOffset);\n    const view = new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n    const len = byteLength === void 0 ? arr.byteLength : pos + byteLength;\n    while (len - pos >= 4) {\n        cnt += popcnt_uint32(view.getUint32(pos));\n        pos += 4;\n    }\n    while (len - pos >= 2) {\n        cnt += popcnt_uint32(view.getUint16(pos));\n        pos += 2;\n    }\n    while (len - pos >= 1) {\n        cnt += popcnt_uint32(view.getUint8(pos));\n        pos += 1;\n    }\n    return cnt;\n}\n/** @ignore */\nexport function popcnt_uint32(uint32) {\n    let i = Math.trunc(uint32);\n    i = i - ((i >>> 1) & 0x55555555);\n    i = (i & 0x33333333) + ((i >>> 2) & 0x33333333);\n    return (((i + (i >>> 4)) & 0x0F0F0F0F) * 0x01010101) >>> 24;\n}\n\n//# sourceMappingURL=bit.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Vector } from './vector.mjs';\nimport { BufferType, Type, UnionMode } from './enum.mjs';\nimport { DataType, strideForType } from './type.mjs';\nimport { popcnt_bit_range, truncateBitmap } from './util/bit.mjs';\n/** @ignore */ export const kUnknownNullCount = -1;\n/**\n * Data structure underlying {@link Vector}s. Use the convenience method {@link makeData}.\n */\nexport class Data {\n    get typeId() { return this.type.typeId; }\n    get ArrayType() { return this.type.ArrayType; }\n    get buffers() {\n        return [this.valueOffsets, this.values, this.nullBitmap, this.typeIds];\n    }\n    get nullable() {\n        if (this._nullCount !== 0) {\n            const { type } = this;\n            if (DataType.isSparseUnion(type)) {\n                return this.children.some((child) => child.nullable);\n            }\n            else if (DataType.isDenseUnion(type)) {\n                return this.children.some((child) => child.nullable);\n            }\n            return this.nullBitmap && this.nullBitmap.byteLength > 0;\n        }\n        return true;\n    }\n    get byteLength() {\n        let byteLength = 0;\n        const { valueOffsets, values, nullBitmap, typeIds } = this;\n        valueOffsets && (byteLength += valueOffsets.byteLength);\n        values && (byteLength += values.byteLength);\n        nullBitmap && (byteLength += nullBitmap.byteLength);\n        typeIds && (byteLength += typeIds.byteLength);\n        return this.children.reduce((byteLength, child) => byteLength + child.byteLength, byteLength);\n    }\n    get nullCount() {\n        if (DataType.isUnion(this.type)) {\n            return this.children.reduce((nullCount, child) => nullCount + child.nullCount, 0);\n        }\n        let nullCount = this._nullCount;\n        let nullBitmap;\n        if (nullCount <= kUnknownNullCount && (nullBitmap = this.nullBitmap)) {\n            this._nullCount = nullCount = nullBitmap.length === 0 ?\n                // no null bitmap, so all values are valid\n                0 :\n                this.length - popcnt_bit_range(nullBitmap, this.offset, this.offset + this.length);\n        }\n        return nullCount;\n    }\n    constructor(type, offset, length, nullCount, buffers, children = [], dictionary) {\n        this.type = type;\n        this.children = children;\n        this.dictionary = dictionary;\n        this.offset = Math.floor(Math.max(offset || 0, 0));\n        this.length = Math.floor(Math.max(length || 0, 0));\n        this._nullCount = Math.floor(Math.max(nullCount || 0, -1));\n        let buffer;\n        if (buffers instanceof Data) {\n            this.stride = buffers.stride;\n            this.values = buffers.values;\n            this.typeIds = buffers.typeIds;\n            this.nullBitmap = buffers.nullBitmap;\n            this.valueOffsets = buffers.valueOffsets;\n        }\n        else {\n            this.stride = strideForType(type);\n            if (buffers) {\n                (buffer = buffers[0]) && (this.valueOffsets = buffer);\n                (buffer = buffers[1]) && (this.values = buffer);\n                (buffer = buffers[2]) && (this.nullBitmap = buffer);\n                (buffer = buffers[3]) && (this.typeIds = buffer);\n            }\n        }\n    }\n    getValid(index) {\n        const { type } = this;\n        if (DataType.isUnion(type)) {\n            const union = type;\n            const child = this.children[union.typeIdToChildIndex[this.typeIds[index]]];\n            const indexInChild = union.mode === UnionMode.Dense ? this.valueOffsets[index] : index;\n            return child.getValid(indexInChild);\n        }\n        if (this.nullable && this.nullCount > 0) {\n            const pos = this.offset + index;\n            const val = this.nullBitmap[pos >> 3];\n            return (val & (1 << (pos % 8))) !== 0;\n        }\n        return true;\n    }\n    setValid(index, value) {\n        let prev;\n        const { type } = this;\n        if (DataType.isUnion(type)) {\n            const union = type;\n            const child = this.children[union.typeIdToChildIndex[this.typeIds[index]]];\n            const indexInChild = union.mode === UnionMode.Dense ? this.valueOffsets[index] : index;\n            prev = child.getValid(indexInChild);\n            child.setValid(indexInChild, value);\n        }\n        else {\n            let { nullBitmap } = this;\n            const { offset, length } = this;\n            const idx = offset + index;\n            const mask = 1 << (idx % 8);\n            const byteOffset = idx >> 3;\n            // If no null bitmap, initialize one on the fly\n            if (!nullBitmap || nullBitmap.byteLength <= byteOffset) {\n                nullBitmap = new Uint8Array((((offset + length) + 63) & ~63) >> 3).fill(255);\n                // if we have a nullBitmap, truncate + slice and set it over the pre-filled 1s\n                if (this.nullCount > 0) {\n                    nullBitmap.set(truncateBitmap(offset, length, this.nullBitmap), 0);\n                    Object.assign(this, { nullBitmap });\n                }\n                else {\n                    Object.assign(this, { nullBitmap, _nullCount: 0 });\n                }\n            }\n            const byte = nullBitmap[byteOffset];\n            prev = (byte & mask) !== 0;\n            nullBitmap[byteOffset] = value ? (byte | mask) : (byte & ~mask);\n        }\n        if (prev !== !!value) {\n            // Update `_nullCount` if the new value is different from the old value.\n            this._nullCount = this.nullCount + (value ? -1 : 1);\n        }\n        return value;\n    }\n    clone(type = this.type, offset = this.offset, length = this.length, nullCount = this._nullCount, buffers = this, children = this.children) {\n        return new Data(type, offset, length, nullCount, buffers, children, this.dictionary);\n    }\n    slice(offset, length) {\n        const { stride, typeId, children } = this;\n        // +true === 1, +false === 0, so this means\n        // we keep nullCount at 0 if it's already 0,\n        // otherwise set to the invalidated flag -1\n        const nullCount = +(this._nullCount === 0) - 1;\n        const childStride = typeId === 16 /* FixedSizeList */ ? stride : 1;\n        const buffers = this._sliceBuffers(offset, length, stride, typeId);\n        return this.clone(this.type, this.offset + offset, length, nullCount, buffers, \n        // Don't slice children if we have value offsets (the variable-width types)\n        (children.length === 0 || this.valueOffsets) ? children : this._sliceChildren(children, childStride * offset, childStride * length));\n    }\n    _changeLengthAndBackfillNullBitmap(newLength) {\n        if (this.typeId === Type.Null) {\n            return this.clone(this.type, 0, newLength, 0);\n        }\n        const { length, nullCount } = this;\n        // start initialized with 0s (nulls), then fill from 0 to length with 1s (not null)\n        const bitmap = new Uint8Array(((newLength + 63) & ~63) >> 3).fill(255, 0, length >> 3);\n        // set all the bits in the last byte (up to bit `length - length % 8`) to 1 (not null)\n        bitmap[length >> 3] = (1 << (length - (length & ~7))) - 1;\n        // if we have a nullBitmap, truncate + slice and set it over the pre-filled 1s\n        if (nullCount > 0) {\n            bitmap.set(truncateBitmap(this.offset, length, this.nullBitmap), 0);\n        }\n        const buffers = this.buffers;\n        buffers[BufferType.VALIDITY] = bitmap;\n        return this.clone(this.type, 0, newLength, nullCount + (newLength - length), buffers);\n    }\n    _sliceBuffers(offset, length, stride, typeId) {\n        let arr;\n        const { buffers } = this;\n        // If typeIds exist, slice the typeIds buffer\n        (arr = buffers[BufferType.TYPE]) && (buffers[BufferType.TYPE] = arr.subarray(offset, offset + length));\n        // If offsets exist, only slice the offsets buffer\n        (arr = buffers[BufferType.OFFSET]) && (buffers[BufferType.OFFSET] = arr.subarray(offset, offset + length + 1)) ||\n            // Otherwise if no offsets, slice the data buffer. Don't slice the data vector for Booleans, since the offset goes by bits not bytes\n            (arr = buffers[BufferType.DATA]) && (buffers[BufferType.DATA] = typeId === 6 ? arr : arr.subarray(stride * offset, stride * (offset + length)));\n        return buffers;\n    }\n    _sliceChildren(children, offset, length) {\n        return children.map((child) => child.slice(offset, length));\n    }\n}\nData.prototype.children = Object.freeze([]);\nimport { Visitor } from './visitor.mjs';\nimport { toArrayBufferView, toBigInt64Array, toInt32Array, toUint8Array } from './util/buffer.mjs';\nclass MakeDataVisitor extends Visitor {\n    visit(props) {\n        return this.getVisitFn(props['type']).call(this, props);\n    }\n    visitNull(props) {\n        const { ['type']: type, ['offset']: offset = 0, ['length']: length = 0, } = props;\n        return new Data(type, offset, length, length);\n    }\n    visitBool(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.ArrayType, props['data']);\n        const { ['length']: length = data.length >> 3, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap]);\n    }\n    visitInt(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.ArrayType, props['data']);\n        const { ['length']: length = data.length, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap]);\n    }\n    visitFloat(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.ArrayType, props['data']);\n        const { ['length']: length = data.length, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap]);\n    }\n    visitUtf8(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const data = toUint8Array(props['data']);\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const valueOffsets = toInt32Array(props['valueOffsets']);\n        const { ['length']: length = valueOffsets.length - 1, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0 } = props;\n        return new Data(type, offset, length, nullCount, [valueOffsets, data, nullBitmap]);\n    }\n    visitLargeUtf8(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const data = toUint8Array(props['data']);\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const valueOffsets = toBigInt64Array(props['valueOffsets']);\n        const { ['length']: length = valueOffsets.length - 1, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0 } = props;\n        return new Data(type, offset, length, nullCount, [valueOffsets, data, nullBitmap]);\n    }\n    visitBinary(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const data = toUint8Array(props['data']);\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const valueOffsets = toInt32Array(props['valueOffsets']);\n        const { ['length']: length = valueOffsets.length - 1, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0 } = props;\n        return new Data(type, offset, length, nullCount, [valueOffsets, data, nullBitmap]);\n    }\n    visitLargeBinary(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const data = toUint8Array(props['data']);\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const valueOffsets = toBigInt64Array(props['valueOffsets']);\n        const { ['length']: length = valueOffsets.length - 1, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0 } = props;\n        return new Data(type, offset, length, nullCount, [valueOffsets, data, nullBitmap]);\n    }\n    visitFixedSizeBinary(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.ArrayType, props['data']);\n        const { ['length']: length = data.length / strideForType(type), ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap]);\n    }\n    visitDate(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.ArrayType, props['data']);\n        const { ['length']: length = data.length / strideForType(type), ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap]);\n    }\n    visitTimestamp(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.ArrayType, props['data']);\n        const { ['length']: length = data.length / strideForType(type), ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap]);\n    }\n    visitTime(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.ArrayType, props['data']);\n        const { ['length']: length = data.length / strideForType(type), ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap]);\n    }\n    visitDecimal(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.ArrayType, props['data']);\n        const { ['length']: length = data.length / strideForType(type), ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap]);\n    }\n    visitList(props) {\n        const { ['type']: type, ['offset']: offset = 0, ['child']: child } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const valueOffsets = toInt32Array(props['valueOffsets']);\n        const { ['length']: length = valueOffsets.length - 1, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0 } = props;\n        return new Data(type, offset, length, nullCount, [valueOffsets, undefined, nullBitmap], [child]);\n    }\n    visitStruct(props) {\n        const { ['type']: type, ['offset']: offset = 0, ['children']: children = [] } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const { length = children.reduce((len, { length }) => Math.max(len, length), 0), nullCount = props['nullBitmap'] ? -1 : 0 } = props;\n        return new Data(type, offset, length, nullCount, [undefined, undefined, nullBitmap], children);\n    }\n    visitUnion(props) {\n        const { ['type']: type, ['offset']: offset = 0, ['children']: children = [] } = props;\n        const typeIds = toArrayBufferView(type.ArrayType, props['typeIds']);\n        const { ['length']: length = typeIds.length, ['nullCount']: nullCount = -1, } = props;\n        if (DataType.isSparseUnion(type)) {\n            return new Data(type, offset, length, nullCount, [undefined, undefined, undefined, typeIds], children);\n        }\n        const valueOffsets = toInt32Array(props['valueOffsets']);\n        return new Data(type, offset, length, nullCount, [valueOffsets, undefined, undefined, typeIds], children);\n    }\n    visitDictionary(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.indices.ArrayType, props['data']);\n        const { ['dictionary']: dictionary = new Vector([new MakeDataVisitor().visit({ type: type.dictionary })]) } = props;\n        const { ['length']: length = data.length, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0 } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap], [], dictionary);\n    }\n    visitInterval(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.ArrayType, props['data']);\n        const { ['length']: length = data.length / strideForType(type), ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap]);\n    }\n    visitDuration(props) {\n        const { ['type']: type, ['offset']: offset = 0 } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const data = toArrayBufferView(type.ArrayType, props['data']);\n        const { ['length']: length = data.length, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [undefined, data, nullBitmap]);\n    }\n    visitFixedSizeList(props) {\n        const { ['type']: type, ['offset']: offset = 0, ['child']: child = new MakeDataVisitor().visit({ type: type.valueType }) } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const { ['length']: length = child.length / strideForType(type), ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0 } = props;\n        return new Data(type, offset, length, nullCount, [undefined, undefined, nullBitmap], [child]);\n    }\n    visitMap(props) {\n        const { ['type']: type, ['offset']: offset = 0, ['child']: child = new MakeDataVisitor().visit({ type: type.childType }) } = props;\n        const nullBitmap = toUint8Array(props['nullBitmap']);\n        const valueOffsets = toInt32Array(props['valueOffsets']);\n        const { ['length']: length = valueOffsets.length - 1, ['nullCount']: nullCount = props['nullBitmap'] ? -1 : 0, } = props;\n        return new Data(type, offset, length, nullCount, [valueOffsets, undefined, nullBitmap], [child]);\n    }\n}\nconst makeDataVisitor = new MakeDataVisitor();\nexport function makeData(props) {\n    return makeDataVisitor.visit(props);\n}\n\n//# sourceMappingURL=data.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n/** @ignore */\nexport class ChunkedIterator {\n    constructor(numChunks = 0, getChunkIterator) {\n        this.numChunks = numChunks;\n        this.getChunkIterator = getChunkIterator;\n        this.chunkIndex = 0;\n        this.chunkIterator = this.getChunkIterator(0);\n    }\n    next() {\n        while (this.chunkIndex < this.numChunks) {\n            const next = this.chunkIterator.next();\n            if (!next.done) {\n                return next;\n            }\n            if (++this.chunkIndex < this.numChunks) {\n                this.chunkIterator = this.getChunkIterator(this.chunkIndex);\n            }\n        }\n        return { done: true, value: null };\n    }\n    [Symbol.iterator]() {\n        return this;\n    }\n}\n/** @ignore */\nexport function computeChunkNullable(chunks) {\n    return chunks.some(chunk => chunk.nullable);\n}\n/** @ignore */\nexport function computeChunkNullCounts(chunks) {\n    return chunks.reduce((nullCount, chunk) => nullCount + chunk.nullCount, 0);\n}\n/** @ignore */\nexport function computeChunkOffsets(chunks) {\n    return chunks.reduce((offsets, chunk, index) => {\n        offsets[index + 1] = offsets[index] + chunk.length;\n        return offsets;\n    }, new Uint32Array(chunks.length + 1));\n}\n/** @ignore */\nexport function sliceChunks(chunks, offsets, begin, end) {\n    const slices = [];\n    for (let i = -1, n = chunks.length; ++i < n;) {\n        const chunk = chunks[i];\n        const offset = offsets[i];\n        const { length } = chunk;\n        // Stop if the child is to the right of the slice boundary\n        if (offset >= end) {\n            break;\n        }\n        // Exclude children to the left of of the slice boundary\n        if (begin >= offset + length) {\n            continue;\n        }\n        // Include entire child if between both left and right boundaries\n        if (offset >= begin && (offset + length) <= end) {\n            slices.push(chunk);\n            continue;\n        }\n        // Include the child slice that overlaps one of the slice boundaries\n        const from = Math.max(0, begin - offset);\n        const to = Math.min(end - offset, length);\n        slices.push(chunk.slice(from, to - from));\n    }\n    if (slices.length === 0) {\n        slices.push(chunks[0].slice(0, 0));\n    }\n    return slices;\n}\n/** @ignore */\nexport function binarySearch(chunks, offsets, idx, fn) {\n    let lhs = 0, mid = 0, rhs = offsets.length - 1;\n    do {\n        if (lhs >= rhs - 1) {\n            return (idx < offsets[rhs]) ? fn(chunks, lhs, idx - offsets[lhs]) : null;\n        }\n        mid = lhs + (Math.trunc((rhs - lhs) * .5));\n        idx < offsets[mid] ? (rhs = mid) : (lhs = mid);\n    } while (lhs < rhs);\n}\n/** @ignore */\nexport function isChunkedValid(data, index) {\n    return data.getValid(index);\n}\n/** @ignore */\nexport function wrapChunkedCall1(fn) {\n    function chunkedFn(chunks, i, j) { return fn(chunks[i], j); }\n    return function (index) {\n        const data = this.data;\n        return binarySearch(data, this._offsets, index, chunkedFn);\n    };\n}\n/** @ignore */\nexport function wrapChunkedCall2(fn) {\n    let _2;\n    function chunkedFn(chunks, i, j) { return fn(chunks[i], j, _2); }\n    return function (index, value) {\n        const data = this.data;\n        _2 = value;\n        const result = binarySearch(data, this._offsets, index, chunkedFn);\n        _2 = undefined;\n        return result;\n    };\n}\n/** @ignore */\nexport function wrapChunkedIndexOf(indexOf) {\n    let _1;\n    function chunkedIndexOf(data, chunkIndex, fromIndex) {\n        let begin = fromIndex, index = 0, total = 0;\n        for (let i = chunkIndex - 1, n = data.length; ++i < n;) {\n            const chunk = data[i];\n            if (~(index = indexOf(chunk, _1, begin))) {\n                return total + index;\n            }\n            begin = 0;\n            total += chunk.length;\n        }\n        return -1;\n    }\n    return function (element, offset) {\n        _1 = element;\n        const data = this.data;\n        const result = typeof offset !== 'number'\n            ? chunkedIndexOf(data, 0, 0)\n            : binarySearch(data, this._offsets, offset, chunkedIndexOf);\n        _1 = undefined;\n        return result;\n    };\n}\n\n//# sourceMappingURL=chunk.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Type } from '../enum.mjs';\nimport { Visitor } from '../visitor.mjs';\nimport { instance as getVisitor } from './get.mjs';\nimport { getBool, BitIterator } from '../util/bit.mjs';\nimport { createElementComparator } from '../util/vector.mjs';\n/** @ignore */\nexport class IndexOfVisitor extends Visitor {\n}\n/** @ignore */\nfunction nullIndexOf(data, searchElement) {\n    // if you're looking for nulls and the vector isn't empty, we've got 'em!\n    return searchElement === null && data.length > 0 ? 0 : -1;\n}\n/** @ignore */\nfunction indexOfNull(data, fromIndex) {\n    const { nullBitmap } = data;\n    if (!nullBitmap || data.nullCount <= 0) {\n        return -1;\n    }\n    let i = 0;\n    for (const isValid of new BitIterator(nullBitmap, data.offset + (fromIndex || 0), data.length, nullBitmap, getBool)) {\n        if (!isValid) {\n            return i;\n        }\n        ++i;\n    }\n    return -1;\n}\n/** @ignore */\nfunction indexOfValue(data, searchElement, fromIndex) {\n    if (searchElement === undefined) {\n        return -1;\n    }\n    if (searchElement === null) {\n        switch (data.typeId) {\n            // Unions don't have a nullBitmap of its own, so compare the `searchElement` to `get()`.\n            case Type.Union:\n                break;\n            // Dictionaries do have a nullBitmap, but their dictionary could also have null elements.\n            case Type.Dictionary:\n                break;\n            // All other types can iterate the null bitmap\n            default:\n                return indexOfNull(data, fromIndex);\n        }\n    }\n    const get = getVisitor.getVisitFn(data);\n    const compare = createElementComparator(searchElement);\n    for (let i = (fromIndex || 0) - 1, n = data.length; ++i < n;) {\n        if (compare(get(data, i))) {\n            return i;\n        }\n    }\n    return -1;\n}\n/** @ignore */\nfunction indexOfUnion(data, searchElement, fromIndex) {\n    // Unions are special -- they do have a nullBitmap, but so can their children.\n    // If the searchElement is null, we don't know whether it came from the Union's\n    // bitmap or one of its children's. So we don't interrogate the Union's bitmap,\n    // since that will report the wrong index if a child has a null before the Union.\n    const get = getVisitor.getVisitFn(data);\n    const compare = createElementComparator(searchElement);\n    for (let i = (fromIndex || 0) - 1, n = data.length; ++i < n;) {\n        if (compare(get(data, i))) {\n            return i;\n        }\n    }\n    return -1;\n}\nIndexOfVisitor.prototype.visitNull = nullIndexOf;\nIndexOfVisitor.prototype.visitBool = indexOfValue;\nIndexOfVisitor.prototype.visitInt = indexOfValue;\nIndexOfVisitor.prototype.visitInt8 = indexOfValue;\nIndexOfVisitor.prototype.visitInt16 = indexOfValue;\nIndexOfVisitor.prototype.visitInt32 = indexOfValue;\nIndexOfVisitor.prototype.visitInt64 = indexOfValue;\nIndexOfVisitor.prototype.visitUint8 = indexOfValue;\nIndexOfVisitor.prototype.visitUint16 = indexOfValue;\nIndexOfVisitor.prototype.visitUint32 = indexOfValue;\nIndexOfVisitor.prototype.visitUint64 = indexOfValue;\nIndexOfVisitor.prototype.visitFloat = indexOfValue;\nIndexOfVisitor.prototype.visitFloat16 = indexOfValue;\nIndexOfVisitor.prototype.visitFloat32 = indexOfValue;\nIndexOfVisitor.prototype.visitFloat64 = indexOfValue;\nIndexOfVisitor.prototype.visitUtf8 = indexOfValue;\nIndexOfVisitor.prototype.visitLargeUtf8 = indexOfValue;\nIndexOfVisitor.prototype.visitBinary = indexOfValue;\nIndexOfVisitor.prototype.visitLargeBinary = indexOfValue;\nIndexOfVisitor.prototype.visitFixedSizeBinary = indexOfValue;\nIndexOfVisitor.prototype.visitDate = indexOfValue;\nIndexOfVisitor.prototype.visitDateDay = indexOfValue;\nIndexOfVisitor.prototype.visitDateMillisecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimestamp = indexOfValue;\nIndexOfVisitor.prototype.visitTimestampSecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimestampMillisecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimestampMicrosecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimestampNanosecond = indexOfValue;\nIndexOfVisitor.prototype.visitTime = indexOfValue;\nIndexOfVisitor.prototype.visitTimeSecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimeMillisecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimeMicrosecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimeNanosecond = indexOfValue;\nIndexOfVisitor.prototype.visitDecimal = indexOfValue;\nIndexOfVisitor.prototype.visitList = indexOfValue;\nIndexOfVisitor.prototype.visitStruct = indexOfValue;\nIndexOfVisitor.prototype.visitUnion = indexOfValue;\nIndexOfVisitor.prototype.visitDenseUnion = indexOfUnion;\nIndexOfVisitor.prototype.visitSparseUnion = indexOfUnion;\nIndexOfVisitor.prototype.visitDictionary = indexOfValue;\nIndexOfVisitor.prototype.visitInterval = indexOfValue;\nIndexOfVisitor.prototype.visitIntervalDayTime = indexOfValue;\nIndexOfVisitor.prototype.visitIntervalYearMonth = indexOfValue;\nIndexOfVisitor.prototype.visitDuration = indexOfValue;\nIndexOfVisitor.prototype.visitDurationSecond = indexOfValue;\nIndexOfVisitor.prototype.visitDurationMillisecond = indexOfValue;\nIndexOfVisitor.prototype.visitDurationMicrosecond = indexOfValue;\nIndexOfVisitor.prototype.visitDurationNanosecond = indexOfValue;\nIndexOfVisitor.prototype.visitFixedSizeList = indexOfValue;\nIndexOfVisitor.prototype.visitMap = indexOfValue;\n/** @ignore */\nexport const instance = new IndexOfVisitor();\n\n//# sourceMappingURL=indexof.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Visitor } from '../visitor.mjs';\nimport { Precision } from '../enum.mjs';\nimport { DataType, } from '../type.mjs';\nimport { ChunkedIterator } from '../util/chunk.mjs';\n/** @ignore */\nexport class IteratorVisitor extends Visitor {\n}\n/** @ignore */\nfunction vectorIterator(vector) {\n    const { type } = vector;\n    // Fast case, defer to native iterators if possible\n    if (vector.nullCount === 0 && vector.stride === 1 && (\n    // Don't defer to native iterator for timestamps since Numbers are expected\n    // (DataType.isTimestamp(type)) && type.unit === TimeUnit.MILLISECOND ||\n    (DataType.isInt(type) && type.bitWidth !== 64) ||\n        (DataType.isTime(type) && type.bitWidth !== 64) ||\n        (DataType.isFloat(type) && type.precision !== Precision.HALF))) {\n        return new ChunkedIterator(vector.data.length, (chunkIndex) => {\n            const data = vector.data[chunkIndex];\n            return data.values.subarray(0, data.length)[Symbol.iterator]();\n        });\n    }\n    // Otherwise, iterate manually\n    let offset = 0;\n    return new ChunkedIterator(vector.data.length, (chunkIndex) => {\n        const data = vector.data[chunkIndex];\n        const length = data.length;\n        const inner = vector.slice(offset, offset + length);\n        offset += length;\n        return new VectorIterator(inner);\n    });\n}\n/** @ignore */\nclass VectorIterator {\n    constructor(vector) {\n        this.vector = vector;\n        this.index = 0;\n    }\n    next() {\n        if (this.index < this.vector.length) {\n            return {\n                value: this.vector.get(this.index++)\n            };\n        }\n        return { done: true, value: null };\n    }\n    [Symbol.iterator]() {\n        return this;\n    }\n}\nIteratorVisitor.prototype.visitNull = vectorIterator;\nIteratorVisitor.prototype.visitBool = vectorIterator;\nIteratorVisitor.prototype.visitInt = vectorIterator;\nIteratorVisitor.prototype.visitInt8 = vectorIterator;\nIteratorVisitor.prototype.visitInt16 = vectorIterator;\nIteratorVisitor.prototype.visitInt32 = vectorIterator;\nIteratorVisitor.prototype.visitInt64 = vectorIterator;\nIteratorVisitor.prototype.visitUint8 = vectorIterator;\nIteratorVisitor.prototype.visitUint16 = vectorIterator;\nIteratorVisitor.prototype.visitUint32 = vectorIterator;\nIteratorVisitor.prototype.visitUint64 = vectorIterator;\nIteratorVisitor.prototype.visitFloat = vectorIterator;\nIteratorVisitor.prototype.visitFloat16 = vectorIterator;\nIteratorVisitor.prototype.visitFloat32 = vectorIterator;\nIteratorVisitor.prototype.visitFloat64 = vectorIterator;\nIteratorVisitor.prototype.visitUtf8 = vectorIterator;\nIteratorVisitor.prototype.visitLargeUtf8 = vectorIterator;\nIteratorVisitor.prototype.visitBinary = vectorIterator;\nIteratorVisitor.prototype.visitLargeBinary = vectorIterator;\nIteratorVisitor.prototype.visitFixedSizeBinary = vectorIterator;\nIteratorVisitor.prototype.visitDate = vectorIterator;\nIteratorVisitor.prototype.visitDateDay = vectorIterator;\nIteratorVisitor.prototype.visitDateMillisecond = vectorIterator;\nIteratorVisitor.prototype.visitTimestamp = vectorIterator;\nIteratorVisitor.prototype.visitTimestampSecond = vectorIterator;\nIteratorVisitor.prototype.visitTimestampMillisecond = vectorIterator;\nIteratorVisitor.prototype.visitTimestampMicrosecond = vectorIterator;\nIteratorVisitor.prototype.visitTimestampNanosecond = vectorIterator;\nIteratorVisitor.prototype.visitTime = vectorIterator;\nIteratorVisitor.prototype.visitTimeSecond = vectorIterator;\nIteratorVisitor.prototype.visitTimeMillisecond = vectorIterator;\nIteratorVisitor.prototype.visitTimeMicrosecond = vectorIterator;\nIteratorVisitor.prototype.visitTimeNanosecond = vectorIterator;\nIteratorVisitor.prototype.visitDecimal = vectorIterator;\nIteratorVisitor.prototype.visitList = vectorIterator;\nIteratorVisitor.prototype.visitStruct = vectorIterator;\nIteratorVisitor.prototype.visitUnion = vectorIterator;\nIteratorVisitor.prototype.visitDenseUnion = vectorIterator;\nIteratorVisitor.prototype.visitSparseUnion = vectorIterator;\nIteratorVisitor.prototype.visitDictionary = vectorIterator;\nIteratorVisitor.prototype.visitInterval = vectorIterator;\nIteratorVisitor.prototype.visitIntervalDayTime = vectorIterator;\nIteratorVisitor.prototype.visitIntervalYearMonth = vectorIterator;\nIteratorVisitor.prototype.visitDuration = vectorIterator;\nIteratorVisitor.prototype.visitDurationSecond = vectorIterator;\nIteratorVisitor.prototype.visitDurationMillisecond = vectorIterator;\nIteratorVisitor.prototype.visitDurationMicrosecond = vectorIterator;\nIteratorVisitor.prototype.visitDurationNanosecond = vectorIterator;\nIteratorVisitor.prototype.visitFixedSizeList = vectorIterator;\nIteratorVisitor.prototype.visitMap = vectorIterator;\n/** @ignore */\nexport const instance = new IteratorVisitor();\n\n//# sourceMappingURL=iterator.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nvar _a;\nimport { Type } from './enum.mjs';\nimport { clampRange, wrapIndex } from './util/vector.mjs';\nimport { DataType, strideForType } from './type.mjs';\nimport { Data, makeData } from './data.mjs';\nimport { isChunkedValid, computeChunkOffsets, computeChunkNullable, computeChunkNullCounts, sliceChunks, wrapChunkedCall1, wrapChunkedCall2, wrapChunkedIndexOf, } from './util/chunk.mjs';\nimport { instance as getVisitor } from './visitor/get.mjs';\nimport { instance as setVisitor } from './visitor/set.mjs';\nimport { instance as indexOfVisitor } from './visitor/indexof.mjs';\nimport { instance as iteratorVisitor } from './visitor/iterator.mjs';\nconst visitorsByTypeId = {};\nconst vectorPrototypesByTypeId = {};\n/**\n * Array-like data structure. Use the convenience method {@link makeVector} and {@link vectorFromArray} to create vectors.\n */\nexport class Vector {\n    constructor(input) {\n        var _b, _c, _d;\n        const data = input[0] instanceof Vector\n            ? input.flatMap(x => x.data)\n            : input;\n        if (data.length === 0 || data.some((x) => !(x instanceof Data))) {\n            throw new TypeError('Vector constructor expects an Array of Data instances.');\n        }\n        const type = (_b = data[0]) === null || _b === void 0 ? void 0 : _b.type;\n        switch (data.length) {\n            case 0:\n                this._offsets = [0];\n                break;\n            case 1: {\n                // special case for unchunked vectors\n                const { get, set, indexOf } = visitorsByTypeId[type.typeId];\n                const unchunkedData = data[0];\n                this.isValid = (index) => isChunkedValid(unchunkedData, index);\n                this.get = (index) => get(unchunkedData, index);\n                this.set = (index, value) => set(unchunkedData, index, value);\n                this.indexOf = (index) => indexOf(unchunkedData, index);\n                this._offsets = [0, unchunkedData.length];\n                break;\n            }\n            default:\n                Object.setPrototypeOf(this, vectorPrototypesByTypeId[type.typeId]);\n                this._offsets = computeChunkOffsets(data);\n                break;\n        }\n        this.data = data;\n        this.type = type;\n        this.stride = strideForType(type);\n        this.numChildren = (_d = (_c = type.children) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0;\n        this.length = this._offsets.at(-1);\n    }\n    /**\n     * The aggregate size (in bytes) of this Vector's buffers and/or child Vectors.\n     */\n    get byteLength() {\n        return this.data.reduce((byteLength, data) => byteLength + data.byteLength, 0);\n    }\n    /**\n     * Whether this Vector's elements can contain null values.\n     */\n    get nullable() {\n        return computeChunkNullable(this.data);\n    }\n    /**\n     * The number of null elements in this Vector.\n     */\n    get nullCount() {\n        return computeChunkNullCounts(this.data);\n    }\n    /**\n     * The Array or TypedArray constructor used for the JS representation\n     *  of the element's values in {@link Vector.prototype.toArray `toArray()`}.\n     */\n    get ArrayType() { return this.type.ArrayType; }\n    /**\n     * The name that should be printed when the Vector is logged in a message.\n     */\n    get [Symbol.toStringTag]() {\n        return `${this.VectorName}<${this.type[Symbol.toStringTag]}>`;\n    }\n    /**\n     * The name of this Vector.\n     */\n    get VectorName() { return `${Type[this.type.typeId]}Vector`; }\n    /**\n     * Check whether an element is null.\n     * @param index The index at which to read the validity bitmap.\n     */\n    // @ts-ignore\n    isValid(index) { return false; }\n    /**\n     * Get an element value by position.\n     * @param index The index of the element to read.\n     */\n    // @ts-ignore\n    get(index) { return null; }\n    /**\n     * Get an element value by position.\n     * @param index The index of the element to read. A negative index will count back from the last element.\n     */\n    at(index) {\n        return this.get(wrapIndex(index, this.length));\n    }\n    /**\n     * Set an element value by position.\n     * @param index The index of the element to write.\n     * @param value The value to set.\n     */\n    // @ts-ignore\n    set(index, value) { return; }\n    /**\n     * Retrieve the index of the first occurrence of a value in an Vector.\n     * @param element The value to locate in the Vector.\n     * @param offset The index at which to begin the search. If offset is omitted, the search starts at index 0.\n     */\n    // @ts-ignore\n    indexOf(element, offset) { return -1; }\n    includes(element, offset) {\n        // eslint-disable-next-line unicorn/prefer-includes\n        return this.indexOf(element, offset) > -1;\n    }\n    /**\n     * Iterator for the Vector's elements.\n     */\n    [Symbol.iterator]() {\n        return iteratorVisitor.visit(this);\n    }\n    /**\n     * Combines two or more Vectors of the same type.\n     * @param others Additional Vectors to add to the end of this Vector.\n     */\n    concat(...others) {\n        return new Vector(this.data.concat(others.flatMap((x) => x.data).flat(Number.POSITIVE_INFINITY)));\n    }\n    /**\n     * Return a zero-copy sub-section of this Vector.\n     * @param start The beginning of the specified portion of the Vector.\n     * @param end The end of the specified portion of the Vector. This is exclusive of the element at the index 'end'.\n     */\n    slice(begin, end) {\n        return new Vector(clampRange(this, begin, end, ({ data, _offsets }, begin, end) => sliceChunks(data, _offsets, begin, end)));\n    }\n    toJSON() { return [...this]; }\n    /**\n     * Return a JavaScript Array or TypedArray of the Vector's elements.\n     *\n     * @note If this Vector contains a single Data chunk and the Vector's type is a\n     *  primitive numeric type corresponding to one of the JavaScript TypedArrays, this\n     *  method returns a zero-copy slice of the underlying TypedArray values. If there's\n     *  more than one chunk, the resulting TypedArray will be a copy of the data from each\n     *  chunk's underlying TypedArray values.\n     *\n     * @returns An Array or TypedArray of the Vector's elements, based on the Vector's DataType.\n     */\n    toArray() {\n        const { type, data, length, stride, ArrayType } = this;\n        // Fast case, return subarray if possible\n        switch (type.typeId) {\n            case Type.Int:\n            case Type.Float:\n            case Type.Decimal:\n            case Type.Time:\n            case Type.Timestamp:\n                switch (data.length) {\n                    case 0: return new ArrayType();\n                    case 1: return data[0].values.subarray(0, length * stride);\n                    default: return data.reduce((memo, { values, length: chunk_length }) => {\n                        memo.array.set(values.subarray(0, chunk_length * stride), memo.offset);\n                        memo.offset += chunk_length * stride;\n                        return memo;\n                    }, { array: new ArrayType(length * stride), offset: 0 }).array;\n                }\n        }\n        // Otherwise if not primitive, slow copy\n        return [...this];\n    }\n    /**\n     * Returns a string representation of the Vector.\n     *\n     * @returns A string representation of the Vector.\n     */\n    toString() {\n        return `[${[...this].join(',')}]`;\n    }\n    /**\n     * Returns a child Vector by name, or null if this Vector has no child with the given name.\n     * @param name The name of the child to retrieve.\n     */\n    getChild(name) {\n        var _b;\n        return this.getChildAt((_b = this.type.children) === null || _b === void 0 ? void 0 : _b.findIndex((f) => f.name === name));\n    }\n    /**\n     * Returns a child Vector by index, or null if this Vector has no child at the supplied index.\n     * @param index The index of the child to retrieve.\n     */\n    getChildAt(index) {\n        if (index > -1 && index < this.numChildren) {\n            return new Vector(this.data.map(({ children }) => children[index]));\n        }\n        return null;\n    }\n    get isMemoized() {\n        if (DataType.isDictionary(this.type)) {\n            return this.data[0].dictionary.isMemoized;\n        }\n        return false;\n    }\n    /**\n     * Adds memoization to the Vector's {@link get} method. For dictionary\n     * vectors, this method return a vector that memoizes only the dictionary\n     * values.\n     *\n     * Memoization is very useful when decoding a value is expensive such as\n     * Utf8. The memoization creates a cache of the size of the Vector and\n     * therefore increases memory usage.\n     *\n     * @returns A new vector that memoizes calls to {@link get}.\n     */\n    memoize() {\n        if (DataType.isDictionary(this.type)) {\n            const dictionary = new MemoizedVector(this.data[0].dictionary);\n            const newData = this.data.map((data) => {\n                const cloned = data.clone();\n                cloned.dictionary = dictionary;\n                return cloned;\n            });\n            return new Vector(newData);\n        }\n        return new MemoizedVector(this);\n    }\n    /**\n     * Returns a vector without memoization of the {@link get} method. If this\n     * vector is not memoized, this method returns this vector.\n     *\n     * @returns A new vector without memoization.\n     */\n    unmemoize() {\n        if (DataType.isDictionary(this.type) && this.isMemoized) {\n            const dictionary = this.data[0].dictionary.unmemoize();\n            const newData = this.data.map((data) => {\n                const newData = data.clone();\n                newData.dictionary = dictionary;\n                return newData;\n            });\n            return new Vector(newData);\n        }\n        return this;\n    }\n}\n_a = Symbol.toStringTag;\n// Initialize this static property via an IIFE so bundlers don't tree-shake\n// out this logic, but also so we're still compliant with `\"sideEffects\": false`\nVector[_a] = ((proto) => {\n    proto.type = DataType.prototype;\n    proto.data = [];\n    proto.length = 0;\n    proto.stride = 1;\n    proto.numChildren = 0;\n    proto._offsets = new Uint32Array([0]);\n    proto[Symbol.isConcatSpreadable] = true;\n    const typeIds = Object.keys(Type)\n        .map((T) => Type[T])\n        .filter((T) => typeof T === 'number' && T !== Type.NONE);\n    for (const typeId of typeIds) {\n        const get = getVisitor.getVisitFnByTypeId(typeId);\n        const set = setVisitor.getVisitFnByTypeId(typeId);\n        const indexOf = indexOfVisitor.getVisitFnByTypeId(typeId);\n        visitorsByTypeId[typeId] = { get, set, indexOf };\n        vectorPrototypesByTypeId[typeId] = Object.create(proto, {\n            ['isValid']: { value: wrapChunkedCall1(isChunkedValid) },\n            ['get']: { value: wrapChunkedCall1(getVisitor.getVisitFnByTypeId(typeId)) },\n            ['set']: { value: wrapChunkedCall2(setVisitor.getVisitFnByTypeId(typeId)) },\n            ['indexOf']: { value: wrapChunkedIndexOf(indexOfVisitor.getVisitFnByTypeId(typeId)) },\n        });\n    }\n    return 'Vector';\n})(Vector.prototype);\nclass MemoizedVector extends Vector {\n    constructor(vector) {\n        super(vector.data);\n        const get = this.get;\n        const set = this.set;\n        const slice = this.slice;\n        const cache = new Array(this.length);\n        Object.defineProperty(this, 'get', {\n            value(index) {\n                const cachedValue = cache[index];\n                if (cachedValue !== undefined) {\n                    return cachedValue;\n                }\n                const value = get.call(this, index);\n                cache[index] = value;\n                return value;\n            }\n        });\n        Object.defineProperty(this, 'set', {\n            value(index, value) {\n                set.call(this, index, value);\n                cache[index] = value;\n            }\n        });\n        Object.defineProperty(this, 'slice', {\n            value: (begin, end) => new MemoizedVector(slice.call(this, begin, end))\n        });\n        Object.defineProperty(this, 'isMemoized', { value: true });\n        Object.defineProperty(this, 'unmemoize', {\n            value: () => new Vector(this.data)\n        });\n        Object.defineProperty(this, 'memoize', {\n            value: () => this\n        });\n    }\n}\nimport * as dtypes from './type.mjs';\nexport function makeVector(init) {\n    if (init) {\n        if (init instanceof Data) {\n            return new Vector([init]);\n        }\n        if (init instanceof Vector) {\n            return new Vector(init.data);\n        }\n        if (init.type instanceof DataType) {\n            return new Vector([makeData(init)]);\n        }\n        if (Array.isArray(init)) {\n            return new Vector(init.flatMap(v => unwrapInputs(v)));\n        }\n        if (ArrayBuffer.isView(init)) {\n            if (init instanceof DataView) {\n                init = new Uint8Array(init.buffer);\n            }\n            const props = { offset: 0, length: init.length, nullCount: -1, data: init };\n            if (init instanceof Int8Array) {\n                return new Vector([makeData(Object.assign(Object.assign({}, props), { type: new dtypes.Int8 }))]);\n            }\n            if (init instanceof Int16Array) {\n                return new Vector([makeData(Object.assign(Object.assign({}, props), { type: new dtypes.Int16 }))]);\n            }\n            if (init instanceof Int32Array) {\n                return new Vector([makeData(Object.assign(Object.assign({}, props), { type: new dtypes.Int32 }))]);\n            }\n            if (init instanceof BigInt64Array) {\n                return new Vector([makeData(Object.assign(Object.assign({}, props), { type: new dtypes.Int64 }))]);\n            }\n            if (init instanceof Uint8Array || init instanceof Uint8ClampedArray) {\n                return new Vector([makeData(Object.assign(Object.assign({}, props), { type: new dtypes.Uint8 }))]);\n            }\n            if (init instanceof Uint16Array) {\n                return new Vector([makeData(Object.assign(Object.assign({}, props), { type: new dtypes.Uint16 }))]);\n            }\n            if (init instanceof Uint32Array) {\n                return new Vector([makeData(Object.assign(Object.assign({}, props), { type: new dtypes.Uint32 }))]);\n            }\n            if (init instanceof BigUint64Array) {\n                return new Vector([makeData(Object.assign(Object.assign({}, props), { type: new dtypes.Uint64 }))]);\n            }\n            if (init instanceof Float32Array) {\n                return new Vector([makeData(Object.assign(Object.assign({}, props), { type: new dtypes.Float32 }))]);\n            }\n            if (init instanceof Float64Array) {\n                return new Vector([makeData(Object.assign(Object.assign({}, props), { type: new dtypes.Float64 }))]);\n            }\n            throw new Error('Unrecognized input');\n        }\n    }\n    throw new Error('Unrecognized input');\n}\nfunction unwrapInputs(x) {\n    return x instanceof Data ? [x] : (x instanceof Vector ? x.data : makeVector(x).data);\n}\n\n//# sourceMappingURL=vector.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nexport class Block {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    /**\n     * Index to the start of the RecordBlock (note this is past the Message header)\n     */\n    offset() {\n        return this.bb.readInt64(this.bb_pos);\n    }\n    /**\n     * Length of the metadata\n     */\n    metaDataLength() {\n        return this.bb.readInt32(this.bb_pos + 8);\n    }\n    /**\n     * Length of the data (this is aligned so there can be a gap between this and\n     * the metadata).\n     */\n    bodyLength() {\n        return this.bb.readInt64(this.bb_pos + 16);\n    }\n    static sizeOf() {\n        return 24;\n    }\n    static createBlock(builder, offset, metaDataLength, bodyLength) {\n        builder.prep(8, 24);\n        builder.writeInt64(BigInt(bodyLength !== null && bodyLength !== void 0 ? bodyLength : 0));\n        builder.pad(4);\n        builder.writeInt32(metaDataLength);\n        builder.writeInt64(BigInt(offset !== null && offset !== void 0 ? offset : 0));\n        return builder.offset();\n    }\n}\n\n//# sourceMappingURL=block.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { Block } from './block.mjs';\nimport { KeyValue } from './key-value.mjs';\nimport { MetadataVersion } from './metadata-version.mjs';\nimport { Schema } from './schema.mjs';\n/**\n * ----------------------------------------------------------------------\n * Arrow File metadata\n *\n */\nexport class Footer {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsFooter(bb, obj) {\n        return (obj || new Footer()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsFooter(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Footer()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    version() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : MetadataVersion.V1;\n    }\n    schema(obj) {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? (obj || new Schema()).__init(this.bb.__indirect(this.bb_pos + offset), this.bb) : null;\n    }\n    dictionaries(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? (obj || new Block()).__init(this.bb.__vector(this.bb_pos + offset) + index * 24, this.bb) : null;\n    }\n    dictionariesLength() {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    recordBatches(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? (obj || new Block()).__init(this.bb.__vector(this.bb_pos + offset) + index * 24, this.bb) : null;\n    }\n    recordBatchesLength() {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    /**\n     * User-defined metadata\n     */\n    customMetadata(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? (obj || new KeyValue()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos + offset) + index * 4), this.bb) : null;\n    }\n    customMetadataLength() {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    static startFooter(builder) {\n        builder.startObject(5);\n    }\n    static addVersion(builder, version) {\n        builder.addFieldInt16(0, version, MetadataVersion.V1);\n    }\n    static addSchema(builder, schemaOffset) {\n        builder.addFieldOffset(1, schemaOffset, 0);\n    }\n    static addDictionaries(builder, dictionariesOffset) {\n        builder.addFieldOffset(2, dictionariesOffset, 0);\n    }\n    static startDictionariesVector(builder, numElems) {\n        builder.startVector(24, numElems, 8);\n    }\n    static addRecordBatches(builder, recordBatchesOffset) {\n        builder.addFieldOffset(3, recordBatchesOffset, 0);\n    }\n    static startRecordBatchesVector(builder, numElems) {\n        builder.startVector(24, numElems, 8);\n    }\n    static addCustomMetadata(builder, customMetadataOffset) {\n        builder.addFieldOffset(4, customMetadataOffset, 0);\n    }\n    static createCustomMetadataVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addOffset(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startCustomMetadataVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static endFooter(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static finishFooterBuffer(builder, offset) {\n        builder.finish(offset);\n    }\n    static finishSizePrefixedFooterBuffer(builder, offset) {\n        builder.finish(offset, undefined, true);\n    }\n}\n\n//# sourceMappingURL=footer.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { MetadataVersion } from './enum.mjs';\nimport { DataType } from './type.mjs';\nexport class Schema {\n    constructor(fields = [], metadata, dictionaries, metadataVersion = MetadataVersion.V5) {\n        this.fields = (fields || []);\n        this.metadata = metadata || new Map();\n        if (!dictionaries) {\n            dictionaries = generateDictionaryMap(this.fields);\n        }\n        this.dictionaries = dictionaries;\n        this.metadataVersion = metadataVersion;\n    }\n    get [Symbol.toStringTag]() { return 'Schema'; }\n    get names() { return this.fields.map((f) => f.name); }\n    toString() {\n        return `Schema<{ ${this.fields.map((f, i) => `${i}: ${f}`).join(', ')} }>`;\n    }\n    /**\n     * Construct a new Schema containing only specified fields.\n     *\n     * @param fieldNames Names of fields to keep.\n     * @returns A new Schema of fields matching the specified names.\n     */\n    select(fieldNames) {\n        const names = new Set(fieldNames);\n        const fields = this.fields.filter((f) => names.has(f.name));\n        return new Schema(fields, this.metadata);\n    }\n    /**\n     * Construct a new Schema containing only fields at the specified indices.\n     *\n     * @param fieldIndices Indices of fields to keep.\n     * @returns A new Schema of fields at the specified indices.\n     */\n    selectAt(fieldIndices) {\n        const fields = fieldIndices.map((i) => this.fields[i]).filter(Boolean);\n        return new Schema(fields, this.metadata);\n    }\n    assign(...args) {\n        const other = (args[0] instanceof Schema\n            ? args[0]\n            : Array.isArray(args[0])\n                ? new Schema(args[0])\n                : new Schema(args));\n        const curFields = [...this.fields];\n        const metadata = mergeMaps(mergeMaps(new Map(), this.metadata), other.metadata);\n        const newFields = other.fields.filter((f2) => {\n            const i = curFields.findIndex((f) => f.name === f2.name);\n            return ~i ? (curFields[i] = f2.clone({\n                metadata: mergeMaps(mergeMaps(new Map(), curFields[i].metadata), f2.metadata)\n            })) && false : true;\n        });\n        const newDictionaries = generateDictionaryMap(newFields, new Map());\n        return new Schema([...curFields, ...newFields], metadata, new Map([...this.dictionaries, ...newDictionaries]));\n    }\n}\n// Add these here so they're picked up by the externs creator\n// in the build, and closure-compiler doesn't minify them away\nSchema.prototype.fields = null;\nSchema.prototype.metadata = null;\nSchema.prototype.dictionaries = null;\nexport class Field {\n    /** @nocollapse */\n    static new(...args) {\n        let [name, type, nullable, metadata] = args;\n        if (args[0] && typeof args[0] === 'object') {\n            ({ name } = args[0]);\n            (type === undefined) && (type = args[0].type);\n            (nullable === undefined) && (nullable = args[0].nullable);\n            (metadata === undefined) && (metadata = args[0].metadata);\n        }\n        return new Field(`${name}`, type, nullable, metadata);\n    }\n    constructor(name, type, nullable = false, metadata) {\n        this.name = name;\n        this.type = type;\n        this.nullable = nullable;\n        this.metadata = metadata || new Map();\n    }\n    get typeId() { return this.type.typeId; }\n    get [Symbol.toStringTag]() { return 'Field'; }\n    toString() { return `${this.name}: ${this.type}`; }\n    clone(...args) {\n        let [name, type, nullable, metadata] = args;\n        (!args[0] || typeof args[0] !== 'object')\n            ? ([name = this.name, type = this.type, nullable = this.nullable, metadata = this.metadata] = args)\n            : ({ name = this.name, type = this.type, nullable = this.nullable, metadata = this.metadata } = args[0]);\n        return Field.new(name, type, nullable, metadata);\n    }\n}\n// Add these here so they're picked up by the externs creator\n// in the build, and closure-compiler doesn't minify them away\nField.prototype.type = null;\nField.prototype.name = null;\nField.prototype.nullable = null;\nField.prototype.metadata = null;\n/** @ignore */\nfunction mergeMaps(m1, m2) {\n    return new Map([...(m1 || new Map()), ...(m2 || new Map())]);\n}\n/** @ignore */\nfunction generateDictionaryMap(fields, dictionaries = new Map()) {\n    for (let i = -1, n = fields.length; ++i < n;) {\n        const field = fields[i];\n        const type = field.type;\n        if (DataType.isDictionary(type)) {\n            if (!dictionaries.has(type.id)) {\n                dictionaries.set(type.id, type.dictionary);\n            }\n            else if (dictionaries.get(type.id) !== type.dictionary) {\n                throw new Error(`Cannot create Schema containing two different dictionaries with the same Id`);\n            }\n        }\n        if (type.children && type.children.length > 0) {\n            generateDictionaryMap(type.children, dictionaries);\n        }\n    }\n    return dictionaries;\n}\n\n//# sourceMappingURL=schema.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { Block as _Block } from '../../fb/block.mjs';\nimport { Footer as _Footer } from '../../fb/footer.mjs';\nimport * as flatbuffers from 'flatbuffers';\nvar Builder = flatbuffers.Builder;\nvar ByteBuffer = flatbuffers.ByteBuffer;\nimport { Schema } from '../../schema.mjs';\nimport { MetadataVersion } from '../../enum.mjs';\nimport { toUint8Array } from '../../util/buffer.mjs';\nimport { bigIntToNumber } from '../../util/bigint.mjs';\n/** @ignore */\nclass Footer_ {\n    /** @nocollapse */\n    static decode(buf) {\n        buf = new ByteBuffer(toUint8Array(buf));\n        const footer = _Footer.getRootAsFooter(buf);\n        const schema = Schema.decode(footer.schema(), new Map(), footer.version());\n        return new OffHeapFooter(schema, footer);\n    }\n    /** @nocollapse */\n    static encode(footer) {\n        const b = new Builder();\n        const schemaOffset = Schema.encode(b, footer.schema);\n        _Footer.startRecordBatchesVector(b, footer.numRecordBatches);\n        for (const rb of [...footer.recordBatches()].slice().reverse()) {\n            FileBlock.encode(b, rb);\n        }\n        const recordBatchesOffset = b.endVector();\n        _Footer.startDictionariesVector(b, footer.numDictionaries);\n        for (const db of [...footer.dictionaryBatches()].slice().reverse()) {\n            FileBlock.encode(b, db);\n        }\n        const dictionaryBatchesOffset = b.endVector();\n        _Footer.startFooter(b);\n        _Footer.addSchema(b, schemaOffset);\n        _Footer.addVersion(b, MetadataVersion.V5);\n        _Footer.addRecordBatches(b, recordBatchesOffset);\n        _Footer.addDictionaries(b, dictionaryBatchesOffset);\n        _Footer.finishFooterBuffer(b, _Footer.endFooter(b));\n        return b.asUint8Array();\n    }\n    get numRecordBatches() { return this._recordBatches.length; }\n    get numDictionaries() { return this._dictionaryBatches.length; }\n    constructor(schema, version = MetadataVersion.V5, recordBatches, dictionaryBatches) {\n        this.schema = schema;\n        this.version = version;\n        recordBatches && (this._recordBatches = recordBatches);\n        dictionaryBatches && (this._dictionaryBatches = dictionaryBatches);\n    }\n    *recordBatches() {\n        for (let block, i = -1, n = this.numRecordBatches; ++i < n;) {\n            if (block = this.getRecordBatch(i)) {\n                yield block;\n            }\n        }\n    }\n    *dictionaryBatches() {\n        for (let block, i = -1, n = this.numDictionaries; ++i < n;) {\n            if (block = this.getDictionaryBatch(i)) {\n                yield block;\n            }\n        }\n    }\n    getRecordBatch(index) {\n        return index >= 0\n            && index < this.numRecordBatches\n            && this._recordBatches[index] || null;\n    }\n    getDictionaryBatch(index) {\n        return index >= 0\n            && index < this.numDictionaries\n            && this._dictionaryBatches[index] || null;\n    }\n}\nexport { Footer_ as Footer };\n/** @ignore */\nclass OffHeapFooter extends Footer_ {\n    get numRecordBatches() { return this._footer.recordBatchesLength(); }\n    get numDictionaries() { return this._footer.dictionariesLength(); }\n    constructor(schema, _footer) {\n        super(schema, _footer.version());\n        this._footer = _footer;\n    }\n    getRecordBatch(index) {\n        if (index >= 0 && index < this.numRecordBatches) {\n            const fileBlock = this._footer.recordBatches(index);\n            if (fileBlock) {\n                return FileBlock.decode(fileBlock);\n            }\n        }\n        return null;\n    }\n    getDictionaryBatch(index) {\n        if (index >= 0 && index < this.numDictionaries) {\n            const fileBlock = this._footer.dictionaries(index);\n            if (fileBlock) {\n                return FileBlock.decode(fileBlock);\n            }\n        }\n        return null;\n    }\n}\n/** @ignore */\nexport class FileBlock {\n    /** @nocollapse */\n    static decode(block) {\n        return new FileBlock(block.metaDataLength(), block.bodyLength(), block.offset());\n    }\n    /** @nocollapse */\n    static encode(b, fileBlock) {\n        const { metaDataLength } = fileBlock;\n        const offset = BigInt(fileBlock.offset);\n        const bodyLength = BigInt(fileBlock.bodyLength);\n        return _Block.createBlock(b, offset, metaDataLength, bodyLength);\n    }\n    constructor(metaDataLength, bodyLength, offset) {\n        this.metaDataLength = metaDataLength;\n        this.offset = bigIntToNumber(offset);\n        this.bodyLength = bigIntToNumber(bodyLength);\n    }\n}\n\n//# sourceMappingURL=file.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { __awaiter } from \"tslib\";\nimport streamAdapters from './adapters.mjs';\n/** @ignore */\nexport const ITERATOR_DONE = Object.freeze({ done: true, value: void (0) });\n/** @ignore */\nexport class ArrowJSON {\n    constructor(_json) {\n        this._json = _json;\n    }\n    get schema() { return this._json['schema']; }\n    get batches() { return (this._json['batches'] || []); }\n    get dictionaries() { return (this._json['dictionaries'] || []); }\n}\n/** @ignore */\nexport class ReadableInterop {\n    tee() {\n        return this._getDOMStream().tee();\n    }\n    pipe(writable, options) {\n        return this._getNodeStream().pipe(writable, options);\n    }\n    pipeTo(writable, options) { return this._getDOMStream().pipeTo(writable, options); }\n    pipeThrough(duplex, options) {\n        return this._getDOMStream().pipeThrough(duplex, options);\n    }\n    _getDOMStream() {\n        return this._DOMStream || (this._DOMStream = this.toDOMStream());\n    }\n    _getNodeStream() {\n        return this._nodeStream || (this._nodeStream = this.toNodeStream());\n    }\n}\n/** @ignore */\nexport class AsyncQueue extends ReadableInterop {\n    constructor() {\n        super();\n        this._values = [];\n        this.resolvers = [];\n        this._closedPromise = new Promise((r) => this._closedPromiseResolve = r);\n    }\n    get closed() { return this._closedPromise; }\n    cancel(reason) {\n        return __awaiter(this, void 0, void 0, function* () { yield this.return(reason); });\n    }\n    write(value) {\n        if (this._ensureOpen()) {\n            this.resolvers.length <= 0\n                ? (this._values.push(value))\n                : (this.resolvers.shift().resolve({ done: false, value }));\n        }\n    }\n    abort(value) {\n        if (this._closedPromiseResolve) {\n            this.resolvers.length <= 0\n                ? (this._error = { error: value })\n                : (this.resolvers.shift().reject({ done: true, value }));\n        }\n    }\n    close() {\n        if (this._closedPromiseResolve) {\n            const { resolvers } = this;\n            while (resolvers.length > 0) {\n                resolvers.shift().resolve(ITERATOR_DONE);\n            }\n            this._closedPromiseResolve();\n            this._closedPromiseResolve = undefined;\n        }\n    }\n    [Symbol.asyncIterator]() { return this; }\n    toDOMStream(options) {\n        return streamAdapters.toDOMStream((this._closedPromiseResolve || this._error)\n            ? this\n            : this._values, options);\n    }\n    toNodeStream(options) {\n        return streamAdapters.toNodeStream((this._closedPromiseResolve || this._error)\n            ? this\n            : this._values, options);\n    }\n    throw(_) {\n        return __awaiter(this, void 0, void 0, function* () { yield this.abort(_); return ITERATOR_DONE; });\n    }\n    return(_) {\n        return __awaiter(this, void 0, void 0, function* () { yield this.close(); return ITERATOR_DONE; });\n    }\n    read(size) {\n        return __awaiter(this, void 0, void 0, function* () { return (yield this.next(size, 'read')).value; });\n    }\n    peek(size) {\n        return __awaiter(this, void 0, void 0, function* () { return (yield this.next(size, 'peek')).value; });\n    }\n    next(..._args) {\n        if (this._values.length > 0) {\n            return Promise.resolve({ done: false, value: this._values.shift() });\n        }\n        else if (this._error) {\n            return Promise.reject({ done: true, value: this._error.error });\n        }\n        else if (!this._closedPromiseResolve) {\n            return Promise.resolve(ITERATOR_DONE);\n        }\n        else {\n            return new Promise((resolve, reject) => {\n                this.resolvers.push({ resolve, reject });\n            });\n        }\n    }\n    _ensureOpen() {\n        if (this._closedPromiseResolve) {\n            return true;\n        }\n        throw new Error(`AsyncQueue is closed`);\n    }\n}\n\n//# sourceMappingURL=interfaces.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { __asyncValues, __awaiter } from \"tslib\";\nimport streamAdapters from './adapters.mjs';\nimport { decodeUtf8 } from '../util/utf8.mjs';\nimport { ITERATOR_DONE, AsyncQueue } from './interfaces.mjs';\nimport { toUint8Array, joinUint8Arrays } from '../util/buffer.mjs';\nimport { isPromise, isFetchResponse, isIterable, isAsyncIterable, isReadableDOMStream, isReadableNodeStream } from '../util/compat.mjs';\n/** @ignore */\nexport class AsyncByteQueue extends AsyncQueue {\n    write(value) {\n        if ((value = toUint8Array(value)).byteLength > 0) {\n            return super.write(value);\n        }\n    }\n    toString(sync = false) {\n        return sync\n            ? decodeUtf8(this.toUint8Array(true))\n            : this.toUint8Array(false).then(decodeUtf8);\n    }\n    toUint8Array(sync = false) {\n        return sync ? joinUint8Arrays(this._values)[0] : (() => __awaiter(this, void 0, void 0, function* () {\n            var _a, e_1, _b, _c;\n            const buffers = [];\n            let byteLength = 0;\n            try {\n                for (var _d = true, _e = __asyncValues(this), _f; _f = yield _e.next(), _a = _f.done, !_a; _d = true) {\n                    _c = _f.value;\n                    _d = false;\n                    const chunk = _c;\n                    buffers.push(chunk);\n                    byteLength += chunk.byteLength;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (!_d && !_a && (_b = _e.return)) yield _b.call(_e);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return joinUint8Arrays(buffers, byteLength)[0];\n        }))();\n    }\n}\n/** @ignore */\nexport class ByteStream {\n    constructor(source) {\n        if (source) {\n            this.source = new ByteStreamSource(streamAdapters.fromIterable(source));\n        }\n    }\n    [Symbol.iterator]() { return this; }\n    next(value) { return this.source.next(value); }\n    throw(value) { return this.source.throw(value); }\n    return(value) { return this.source.return(value); }\n    peek(size) { return this.source.peek(size); }\n    read(size) { return this.source.read(size); }\n}\n/** @ignore */\nexport class AsyncByteStream {\n    constructor(source) {\n        if (source instanceof AsyncByteStream) {\n            this.source = source.source;\n        }\n        else if (source instanceof AsyncByteQueue) {\n            this.source = new AsyncByteStreamSource(streamAdapters.fromAsyncIterable(source));\n        }\n        else if (isReadableNodeStream(source)) {\n            this.source = new AsyncByteStreamSource(streamAdapters.fromNodeStream(source));\n        }\n        else if (isReadableDOMStream(source)) {\n            this.source = new AsyncByteStreamSource(streamAdapters.fromDOMStream(source));\n        }\n        else if (isFetchResponse(source)) {\n            this.source = new AsyncByteStreamSource(streamAdapters.fromDOMStream(source.body));\n        }\n        else if (isIterable(source)) {\n            this.source = new AsyncByteStreamSource(streamAdapters.fromIterable(source));\n        }\n        else if (isPromise(source)) {\n            this.source = new AsyncByteStreamSource(streamAdapters.fromAsyncIterable(source));\n        }\n        else if (isAsyncIterable(source)) {\n            this.source = new AsyncByteStreamSource(streamAdapters.fromAsyncIterable(source));\n        }\n    }\n    [Symbol.asyncIterator]() { return this; }\n    next(value) { return this.source.next(value); }\n    throw(value) { return this.source.throw(value); }\n    return(value) { return this.source.return(value); }\n    get closed() { return this.source.closed; }\n    cancel(reason) { return this.source.cancel(reason); }\n    peek(size) { return this.source.peek(size); }\n    read(size) { return this.source.read(size); }\n}\n/** @ignore */\nclass ByteStreamSource {\n    constructor(source) {\n        this.source = source;\n    }\n    cancel(reason) { this.return(reason); }\n    peek(size) { return this.next(size, 'peek').value; }\n    read(size) { return this.next(size, 'read').value; }\n    next(size, cmd = 'read') { return this.source.next({ cmd, size }); }\n    throw(value) { return Object.create((this.source.throw && this.source.throw(value)) || ITERATOR_DONE); }\n    return(value) { return Object.create((this.source.return && this.source.return(value)) || ITERATOR_DONE); }\n}\n/** @ignore */\nclass AsyncByteStreamSource {\n    constructor(source) {\n        this.source = source;\n        this._closedPromise = new Promise((r) => this._closedPromiseResolve = r);\n    }\n    cancel(reason) {\n        return __awaiter(this, void 0, void 0, function* () { yield this.return(reason); });\n    }\n    get closed() { return this._closedPromise; }\n    read(size) {\n        return __awaiter(this, void 0, void 0, function* () { return (yield this.next(size, 'read')).value; });\n    }\n    peek(size) {\n        return __awaiter(this, void 0, void 0, function* () { return (yield this.next(size, 'peek')).value; });\n    }\n    next(size_1) {\n        return __awaiter(this, arguments, void 0, function* (size, cmd = 'read') { return (yield this.source.next({ cmd, size })); });\n    }\n    throw(value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = (this.source.throw && (yield this.source.throw(value))) || ITERATOR_DONE;\n            this._closedPromiseResolve && this._closedPromiseResolve();\n            this._closedPromiseResolve = undefined;\n            return Object.create(result);\n        });\n    }\n    return(value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = (this.source.return && (yield this.source.return(value))) || ITERATOR_DONE;\n            this._closedPromiseResolve && this._closedPromiseResolve();\n            this._closedPromiseResolve = undefined;\n            return Object.create(result);\n        });\n    }\n}\n\n//# sourceMappingURL=stream.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { __awaiter } from \"tslib\";\nimport { ByteStream, AsyncByteStream } from './stream.mjs';\nimport { toUint8Array } from '../util/buffer.mjs';\n/** @ignore */\nexport class RandomAccessFile extends ByteStream {\n    constructor(buffer, byteLength) {\n        super();\n        this.position = 0;\n        this.buffer = toUint8Array(buffer);\n        this.size = byteLength === undefined ? this.buffer.byteLength : byteLength;\n    }\n    readInt32(position) {\n        const { buffer, byteOffset } = this.readAt(position, 4);\n        return new DataView(buffer, byteOffset).getInt32(0, true);\n    }\n    seek(position) {\n        this.position = Math.min(position, this.size);\n        return position < this.size;\n    }\n    read(nBytes) {\n        const { buffer, size, position } = this;\n        if (buffer && position < size) {\n            if (typeof nBytes !== 'number') {\n                nBytes = Number.POSITIVE_INFINITY;\n            }\n            this.position = Math.min(size, position + Math.min(size - position, nBytes));\n            return buffer.subarray(position, this.position);\n        }\n        return null;\n    }\n    readAt(position, nBytes) {\n        const buf = this.buffer;\n        const end = Math.min(this.size, position + nBytes);\n        return buf ? buf.subarray(position, end) : new Uint8Array(nBytes);\n    }\n    close() { this.buffer && (this.buffer = null); }\n    throw(value) { this.close(); return { done: true, value }; }\n    return(value) { this.close(); return { done: true, value }; }\n}\n/** @ignore */\nexport class AsyncRandomAccessFile extends AsyncByteStream {\n    constructor(file, byteLength) {\n        super();\n        this.position = 0;\n        this._handle = file;\n        if (typeof byteLength === 'number') {\n            this.size = byteLength;\n        }\n        else {\n            this._pending = (() => __awaiter(this, void 0, void 0, function* () {\n                this.size = (yield file.stat()).size;\n                delete this._pending;\n            }))();\n        }\n    }\n    readInt32(position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { buffer, byteOffset } = yield this.readAt(position, 4);\n            return new DataView(buffer, byteOffset).getInt32(0, true);\n        });\n    }\n    seek(position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._pending && (yield this._pending);\n            this.position = Math.min(position, this.size);\n            return position < this.size;\n        });\n    }\n    read(nBytes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._pending && (yield this._pending);\n            const { _handle: file, size, position } = this;\n            if (file && position < size) {\n                if (typeof nBytes !== 'number') {\n                    nBytes = Number.POSITIVE_INFINITY;\n                }\n                let pos = position, offset = 0, bytesRead = 0;\n                const end = Math.min(size, pos + Math.min(size - pos, nBytes));\n                const buffer = new Uint8Array(Math.max(0, (this.position = end) - pos));\n                while ((pos += bytesRead) < end && (offset += bytesRead) < buffer.byteLength) {\n                    ({ bytesRead } = yield file.read(buffer, offset, buffer.byteLength - offset, pos));\n                }\n                return buffer;\n            }\n            return null;\n        });\n    }\n    readAt(position, nBytes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._pending && (yield this._pending);\n            const { _handle: file, size } = this;\n            if (file && (position + nBytes) < size) {\n                const end = Math.min(size, position + nBytes);\n                const buffer = new Uint8Array(end - position);\n                return (yield file.read(buffer, 0, nBytes, position)).buffer;\n            }\n            return new Uint8Array(nBytes);\n        });\n    }\n    close() {\n        return __awaiter(this, void 0, void 0, function* () { const f = this._handle; this._handle = null; f && (yield f.close()); });\n    }\n    throw(value) {\n        return __awaiter(this, void 0, void 0, function* () { yield this.close(); return { done: true, value }; });\n    }\n    return(value) {\n        return __awaiter(this, void 0, void 0, function* () { yield this.close(); return { done: true, value }; });\n    }\n}\n\n//# sourceMappingURL=file.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n/** @ignore */\nconst carryBit16 = 1 << 16;\n/** @ignore */\nfunction intAsHex(value) {\n    if (value < 0) {\n        value = 0xFFFFFFFF + value + 1;\n    }\n    return `0x${value.toString(16)}`;\n}\n/** @ignore */\nconst kInt32DecimalDigits = 8;\n/** @ignore */\nconst kPowersOfTen = [\n    1,\n    10,\n    100,\n    1000,\n    10000,\n    100000,\n    1000000,\n    10000000,\n    100000000\n];\n/** @ignore */\nexport class BaseInt64 {\n    constructor(buffer) {\n        this.buffer = buffer;\n    }\n    high() { return this.buffer[1]; }\n    low() { return this.buffer[0]; }\n    _times(other) {\n        // Break the left and right numbers into 16 bit chunks\n        // so that we can multiply them without overflow.\n        const L = new Uint32Array([\n            this.buffer[1] >>> 16,\n            this.buffer[1] & 0xFFFF,\n            this.buffer[0] >>> 16,\n            this.buffer[0] & 0xFFFF\n        ]);\n        const R = new Uint32Array([\n            other.buffer[1] >>> 16,\n            other.buffer[1] & 0xFFFF,\n            other.buffer[0] >>> 16,\n            other.buffer[0] & 0xFFFF\n        ]);\n        let product = L[3] * R[3];\n        this.buffer[0] = product & 0xFFFF;\n        let sum = product >>> 16;\n        product = L[2] * R[3];\n        sum += product;\n        product = (L[3] * R[2]) >>> 0;\n        sum += product;\n        this.buffer[0] += sum << 16;\n        this.buffer[1] = (sum >>> 0 < product ? carryBit16 : 0);\n        this.buffer[1] += sum >>> 16;\n        this.buffer[1] += L[1] * R[3] + L[2] * R[2] + L[3] * R[1];\n        this.buffer[1] += (L[0] * R[3] + L[1] * R[2] + L[2] * R[1] + L[3] * R[0]) << 16;\n        return this;\n    }\n    _plus(other) {\n        const sum = (this.buffer[0] + other.buffer[0]) >>> 0;\n        this.buffer[1] += other.buffer[1];\n        if (sum < (this.buffer[0] >>> 0)) {\n            ++this.buffer[1];\n        }\n        this.buffer[0] = sum;\n    }\n    lessThan(other) {\n        return this.buffer[1] < other.buffer[1] ||\n            (this.buffer[1] === other.buffer[1] && this.buffer[0] < other.buffer[0]);\n    }\n    equals(other) {\n        return this.buffer[1] === other.buffer[1] && this.buffer[0] == other.buffer[0];\n    }\n    greaterThan(other) {\n        return other.lessThan(this);\n    }\n    hex() {\n        return `${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`;\n    }\n}\n/** @ignore */\nexport class Uint64 extends BaseInt64 {\n    times(other) {\n        this._times(other);\n        return this;\n    }\n    plus(other) {\n        this._plus(other);\n        return this;\n    }\n    /** @nocollapse */\n    static from(val, out_buffer = new Uint32Array(2)) {\n        return Uint64.fromString(typeof (val) === 'string' ? val : val.toString(), out_buffer);\n    }\n    /** @nocollapse */\n    static fromNumber(num, out_buffer = new Uint32Array(2)) {\n        // Always parse numbers as strings - pulling out high and low bits\n        // directly seems to lose precision sometimes\n        // For example:\n        //     > -4613034156400212000 >>> 0\n        //     721782784\n        // The correct lower 32-bits are 721782752\n        return Uint64.fromString(num.toString(), out_buffer);\n    }\n    /** @nocollapse */\n    static fromString(str, out_buffer = new Uint32Array(2)) {\n        const length = str.length;\n        const out = new Uint64(out_buffer);\n        for (let posn = 0; posn < length;) {\n            const group = kInt32DecimalDigits < length - posn ?\n                kInt32DecimalDigits : length - posn;\n            const chunk = new Uint64(new Uint32Array([Number.parseInt(str.slice(posn, posn + group), 10), 0]));\n            const multiple = new Uint64(new Uint32Array([kPowersOfTen[group], 0]));\n            out.times(multiple);\n            out.plus(chunk);\n            posn += group;\n        }\n        return out;\n    }\n    /** @nocollapse */\n    static convertArray(values) {\n        const data = new Uint32Array(values.length * 2);\n        for (let i = -1, n = values.length; ++i < n;) {\n            Uint64.from(values[i], new Uint32Array(data.buffer, data.byteOffset + 2 * i * 4, 2));\n        }\n        return data;\n    }\n    /** @nocollapse */\n    static multiply(left, right) {\n        const rtrn = new Uint64(new Uint32Array(left.buffer));\n        return rtrn.times(right);\n    }\n    /** @nocollapse */\n    static add(left, right) {\n        const rtrn = new Uint64(new Uint32Array(left.buffer));\n        return rtrn.plus(right);\n    }\n}\n/** @ignore */\nexport class Int64 extends BaseInt64 {\n    negate() {\n        this.buffer[0] = ~this.buffer[0] + 1;\n        this.buffer[1] = ~this.buffer[1];\n        if (this.buffer[0] == 0) {\n            ++this.buffer[1];\n        }\n        return this;\n    }\n    times(other) {\n        this._times(other);\n        return this;\n    }\n    plus(other) {\n        this._plus(other);\n        return this;\n    }\n    lessThan(other) {\n        // force high bytes to be signed\n        // eslint-disable-next-line unicorn/prefer-math-trunc\n        const this_high = this.buffer[1] << 0;\n        // eslint-disable-next-line unicorn/prefer-math-trunc\n        const other_high = other.buffer[1] << 0;\n        return this_high < other_high ||\n            (this_high === other_high && this.buffer[0] < other.buffer[0]);\n    }\n    /** @nocollapse */\n    static from(val, out_buffer = new Uint32Array(2)) {\n        return Int64.fromString(typeof (val) === 'string' ? val : val.toString(), out_buffer);\n    }\n    /** @nocollapse */\n    static fromNumber(num, out_buffer = new Uint32Array(2)) {\n        // Always parse numbers as strings - pulling out high and low bits\n        // directly seems to lose precision sometimes\n        // For example:\n        //     > -4613034156400212000 >>> 0\n        //     721782784\n        // The correct lower 32-bits are 721782752\n        return Int64.fromString(num.toString(), out_buffer);\n    }\n    /** @nocollapse */\n    static fromString(str, out_buffer = new Uint32Array(2)) {\n        // TODO: Assert that out_buffer is 0 and length = 2\n        const negate = str.startsWith('-');\n        const length = str.length;\n        const out = new Int64(out_buffer);\n        for (let posn = negate ? 1 : 0; posn < length;) {\n            const group = kInt32DecimalDigits < length - posn ?\n                kInt32DecimalDigits : length - posn;\n            const chunk = new Int64(new Uint32Array([Number.parseInt(str.slice(posn, posn + group), 10), 0]));\n            const multiple = new Int64(new Uint32Array([kPowersOfTen[group], 0]));\n            out.times(multiple);\n            out.plus(chunk);\n            posn += group;\n        }\n        return negate ? out.negate() : out;\n    }\n    /** @nocollapse */\n    static convertArray(values) {\n        const data = new Uint32Array(values.length * 2);\n        for (let i = -1, n = values.length; ++i < n;) {\n            Int64.from(values[i], new Uint32Array(data.buffer, data.byteOffset + 2 * i * 4, 2));\n        }\n        return data;\n    }\n    /** @nocollapse */\n    static multiply(left, right) {\n        const rtrn = new Int64(new Uint32Array(left.buffer));\n        return rtrn.times(right);\n    }\n    /** @nocollapse */\n    static add(left, right) {\n        const rtrn = new Int64(new Uint32Array(left.buffer));\n        return rtrn.plus(right);\n    }\n}\n/** @ignore */\nexport class Int128 {\n    constructor(buffer) {\n        this.buffer = buffer;\n        // buffer[3] MSB (high)\n        // buffer[2]\n        // buffer[1]\n        // buffer[0] LSB (low)\n    }\n    high() {\n        return new Int64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset + 8, 2));\n    }\n    low() {\n        return new Int64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset, 2));\n    }\n    negate() {\n        this.buffer[0] = ~this.buffer[0] + 1;\n        this.buffer[1] = ~this.buffer[1];\n        this.buffer[2] = ~this.buffer[2];\n        this.buffer[3] = ~this.buffer[3];\n        if (this.buffer[0] == 0) {\n            ++this.buffer[1];\n        }\n        if (this.buffer[1] == 0) {\n            ++this.buffer[2];\n        }\n        if (this.buffer[2] == 0) {\n            ++this.buffer[3];\n        }\n        return this;\n    }\n    times(other) {\n        // Break the left and right numbers into 32 bit chunks\n        // so that we can multiply them without overflow.\n        const L0 = new Uint64(new Uint32Array([this.buffer[3], 0]));\n        const L1 = new Uint64(new Uint32Array([this.buffer[2], 0]));\n        const L2 = new Uint64(new Uint32Array([this.buffer[1], 0]));\n        const L3 = new Uint64(new Uint32Array([this.buffer[0], 0]));\n        const R0 = new Uint64(new Uint32Array([other.buffer[3], 0]));\n        const R1 = new Uint64(new Uint32Array([other.buffer[2], 0]));\n        const R2 = new Uint64(new Uint32Array([other.buffer[1], 0]));\n        const R3 = new Uint64(new Uint32Array([other.buffer[0], 0]));\n        let product = Uint64.multiply(L3, R3);\n        this.buffer[0] = product.low();\n        const sum = new Uint64(new Uint32Array([product.high(), 0]));\n        product = Uint64.multiply(L2, R3);\n        sum.plus(product);\n        product = Uint64.multiply(L3, R2);\n        sum.plus(product);\n        this.buffer[1] = sum.low();\n        this.buffer[3] = (sum.lessThan(product) ? 1 : 0);\n        this.buffer[2] = sum.high();\n        const high = new Uint64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset + 8, 2));\n        high.plus(Uint64.multiply(L1, R3))\n            .plus(Uint64.multiply(L2, R2))\n            .plus(Uint64.multiply(L3, R1));\n        this.buffer[3] += Uint64.multiply(L0, R3)\n            .plus(Uint64.multiply(L1, R2))\n            .plus(Uint64.multiply(L2, R1))\n            .plus(Uint64.multiply(L3, R0)).low();\n        return this;\n    }\n    plus(other) {\n        const sums = new Uint32Array(4);\n        sums[3] = (this.buffer[3] + other.buffer[3]) >>> 0;\n        sums[2] = (this.buffer[2] + other.buffer[2]) >>> 0;\n        sums[1] = (this.buffer[1] + other.buffer[1]) >>> 0;\n        sums[0] = (this.buffer[0] + other.buffer[0]) >>> 0;\n        if (sums[0] < (this.buffer[0] >>> 0)) {\n            ++sums[1];\n        }\n        if (sums[1] < (this.buffer[1] >>> 0)) {\n            ++sums[2];\n        }\n        if (sums[2] < (this.buffer[2] >>> 0)) {\n            ++sums[3];\n        }\n        this.buffer[3] = sums[3];\n        this.buffer[2] = sums[2];\n        this.buffer[1] = sums[1];\n        this.buffer[0] = sums[0];\n        return this;\n    }\n    hex() {\n        return `${intAsHex(this.buffer[3])} ${intAsHex(this.buffer[2])} ${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`;\n    }\n    /** @nocollapse */\n    static multiply(left, right) {\n        const rtrn = new Int128(new Uint32Array(left.buffer));\n        return rtrn.times(right);\n    }\n    /** @nocollapse */\n    static add(left, right) {\n        const rtrn = new Int128(new Uint32Array(left.buffer));\n        return rtrn.plus(right);\n    }\n    /** @nocollapse */\n    static from(val, out_buffer = new Uint32Array(4)) {\n        return Int128.fromString(typeof (val) === 'string' ? val : val.toString(), out_buffer);\n    }\n    /** @nocollapse */\n    static fromNumber(num, out_buffer = new Uint32Array(4)) {\n        // Always parse numbers as strings - pulling out high and low bits\n        // directly seems to lose precision sometimes\n        // For example:\n        //     > -4613034156400212000 >>> 0\n        //     721782784\n        // The correct lower 32-bits are 721782752\n        return Int128.fromString(num.toString(), out_buffer);\n    }\n    /** @nocollapse */\n    static fromString(str, out_buffer = new Uint32Array(4)) {\n        // TODO: Assert that out_buffer is 0 and length = 4\n        const negate = str.startsWith('-');\n        const length = str.length;\n        const out = new Int128(out_buffer);\n        for (let posn = negate ? 1 : 0; posn < length;) {\n            const group = kInt32DecimalDigits < length - posn ?\n                kInt32DecimalDigits : length - posn;\n            const chunk = new Int128(new Uint32Array([Number.parseInt(str.slice(posn, posn + group), 10), 0, 0, 0]));\n            const multiple = new Int128(new Uint32Array([kPowersOfTen[group], 0, 0, 0]));\n            out.times(multiple);\n            out.plus(chunk);\n            posn += group;\n        }\n        return negate ? out.negate() : out;\n    }\n    /** @nocollapse */\n    static convertArray(values) {\n        // TODO: Distinguish between string and number at compile-time\n        const data = new Uint32Array(values.length * 4);\n        for (let i = -1, n = values.length; ++i < n;) {\n            Int128.from(values[i], new Uint32Array(data.buffer, data.byteOffset + 4 * 4 * i, 4));\n        }\n        return data;\n    }\n}\n\n//# sourceMappingURL=int.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { makeData } from '../data.mjs';\nimport { Field } from '../schema.mjs';\nimport { DataType } from '../type.mjs';\nimport { Visitor } from '../visitor.mjs';\nimport { packBools } from '../util/bit.mjs';\nimport { encodeUtf8 } from '../util/utf8.mjs';\nimport { Int64, Int128 } from '../util/int.mjs';\nimport { UnionMode, DateUnit, MetadataVersion } from '../enum.mjs';\nimport { toArrayBufferView } from '../util/buffer.mjs';\n/** @ignore */\nexport class VectorLoader extends Visitor {\n    constructor(bytes, nodes, buffers, dictionaries, metadataVersion = MetadataVersion.V5) {\n        super();\n        this.nodesIndex = -1;\n        this.buffersIndex = -1;\n        this.bytes = bytes;\n        this.nodes = nodes;\n        this.buffers = buffers;\n        this.dictionaries = dictionaries;\n        this.metadataVersion = metadataVersion;\n    }\n    visit(node) {\n        return super.visit(node instanceof Field ? node.type : node);\n    }\n    visitNull(type, { length } = this.nextFieldNode()) {\n        return makeData({ type, length });\n    }\n    visitBool(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type) });\n    }\n    visitInt(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type) });\n    }\n    visitFloat(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type) });\n    }\n    visitUtf8(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), valueOffsets: this.readOffsets(type), data: this.readData(type) });\n    }\n    visitLargeUtf8(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), valueOffsets: this.readOffsets(type), data: this.readData(type) });\n    }\n    visitBinary(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), valueOffsets: this.readOffsets(type), data: this.readData(type) });\n    }\n    visitLargeBinary(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), valueOffsets: this.readOffsets(type), data: this.readData(type) });\n    }\n    visitFixedSizeBinary(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type) });\n    }\n    visitDate(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type) });\n    }\n    visitTimestamp(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type) });\n    }\n    visitTime(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type) });\n    }\n    visitDecimal(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type) });\n    }\n    visitList(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), valueOffsets: this.readOffsets(type), 'child': this.visit(type.children[0]) });\n    }\n    visitStruct(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), children: this.visitMany(type.children) });\n    }\n    visitUnion(type, { length, nullCount } = this.nextFieldNode()) {\n        if (this.metadataVersion < MetadataVersion.V5) {\n            this.readNullBitmap(type, nullCount);\n        }\n        return type.mode === UnionMode.Sparse\n            ? this.visitSparseUnion(type, { length, nullCount })\n            : this.visitDenseUnion(type, { length, nullCount });\n    }\n    visitDenseUnion(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, typeIds: this.readTypeIds(type), valueOffsets: this.readOffsets(type), children: this.visitMany(type.children) });\n    }\n    visitSparseUnion(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, typeIds: this.readTypeIds(type), children: this.visitMany(type.children) });\n    }\n    visitDictionary(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type.indices), dictionary: this.readDictionary(type) });\n    }\n    visitInterval(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type) });\n    }\n    visitDuration(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), data: this.readData(type) });\n    }\n    visitFixedSizeList(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), 'child': this.visit(type.children[0]) });\n    }\n    visitMap(type, { length, nullCount } = this.nextFieldNode()) {\n        return makeData({ type, length, nullCount, nullBitmap: this.readNullBitmap(type, nullCount), valueOffsets: this.readOffsets(type), 'child': this.visit(type.children[0]) });\n    }\n    nextFieldNode() { return this.nodes[++this.nodesIndex]; }\n    nextBufferRange() { return this.buffers[++this.buffersIndex]; }\n    readNullBitmap(type, nullCount, buffer = this.nextBufferRange()) {\n        return nullCount > 0 && this.readData(type, buffer) || new Uint8Array(0);\n    }\n    readOffsets(type, buffer) { return this.readData(type, buffer); }\n    readTypeIds(type, buffer) { return this.readData(type, buffer); }\n    readData(_type, { length, offset } = this.nextBufferRange()) {\n        return this.bytes.subarray(offset, offset + length);\n    }\n    readDictionary(type) {\n        return this.dictionaries.get(type.id);\n    }\n}\n/** @ignore */\nexport class JSONVectorLoader extends VectorLoader {\n    constructor(sources, nodes, buffers, dictionaries, metadataVersion) {\n        super(new Uint8Array(0), nodes, buffers, dictionaries, metadataVersion);\n        this.sources = sources;\n    }\n    readNullBitmap(_type, nullCount, { offset } = this.nextBufferRange()) {\n        return nullCount <= 0 ? new Uint8Array(0) : packBools(this.sources[offset]);\n    }\n    readOffsets(_type, { offset } = this.nextBufferRange()) {\n        return toArrayBufferView(Uint8Array, toArrayBufferView(_type.OffsetArrayType, this.sources[offset]));\n    }\n    readTypeIds(type, { offset } = this.nextBufferRange()) {\n        return toArrayBufferView(Uint8Array, toArrayBufferView(type.ArrayType, this.sources[offset]));\n    }\n    readData(type, { offset } = this.nextBufferRange()) {\n        const { sources } = this;\n        if (DataType.isTimestamp(type)) {\n            return toArrayBufferView(Uint8Array, Int64.convertArray(sources[offset]));\n        }\n        else if ((DataType.isInt(type) || DataType.isTime(type)) && type.bitWidth === 64 || DataType.isDuration(type)) {\n            return toArrayBufferView(Uint8Array, Int64.convertArray(sources[offset]));\n        }\n        else if (DataType.isDate(type) && type.unit === DateUnit.MILLISECOND) {\n            return toArrayBufferView(Uint8Array, Int64.convertArray(sources[offset]));\n        }\n        else if (DataType.isDecimal(type)) {\n            return toArrayBufferView(Uint8Array, Int128.convertArray(sources[offset]));\n        }\n        else if (DataType.isBinary(type) || DataType.isLargeBinary(type) || DataType.isFixedSizeBinary(type)) {\n            return binaryDataFromJSON(sources[offset]);\n        }\n        else if (DataType.isBool(type)) {\n            return packBools(sources[offset]);\n        }\n        else if (DataType.isUtf8(type) || DataType.isLargeUtf8(type)) {\n            return encodeUtf8(sources[offset].join(''));\n        }\n        return toArrayBufferView(Uint8Array, toArrayBufferView(type.ArrayType, sources[offset].map((x) => +x)));\n    }\n}\n/** @ignore */\nfunction binaryDataFromJSON(values) {\n    // \"DATA\": [\"49BC7D5B6C47D2\",\"3F5FB6D9322026\"]\n    // There are definitely more efficient ways to do this... but it gets the\n    // job done.\n    const joined = values.join('');\n    const data = new Uint8Array(joined.length / 2);\n    for (let i = 0; i < joined.length; i += 2) {\n        data[i >> 1] = Number.parseInt(joined.slice(i, i + 2), 16);\n    }\n    return data;\n}\n\n//# sourceMappingURL=vectorloader.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Visitor } from '../visitor.mjs';\n/** @ignore */\nexport class TypeComparator extends Visitor {\n    compareSchemas(schema, other) {\n        return (schema === other) || (other instanceof schema.constructor &&\n            this.compareManyFields(schema.fields, other.fields));\n    }\n    compareManyFields(fields, others) {\n        return (fields === others) || (Array.isArray(fields) &&\n            Array.isArray(others) &&\n            fields.length === others.length &&\n            fields.every((f, i) => this.compareFields(f, others[i])));\n    }\n    compareFields(field, other) {\n        return (field === other) || (other instanceof field.constructor &&\n            field.name === other.name &&\n            field.nullable === other.nullable &&\n            this.visit(field.type, other.type));\n    }\n}\nfunction compareConstructor(type, other) {\n    return other instanceof type.constructor;\n}\nfunction compareAny(type, other) {\n    return (type === other) || compareConstructor(type, other);\n}\nfunction compareInt(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.bitWidth === other.bitWidth &&\n        type.isSigned === other.isSigned);\n}\nfunction compareFloat(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.precision === other.precision);\n}\nfunction compareFixedSizeBinary(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.byteWidth === other.byteWidth);\n}\nfunction compareDate(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.unit === other.unit);\n}\nfunction compareTimestamp(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.unit === other.unit &&\n        type.timezone === other.timezone);\n}\nfunction compareTime(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.unit === other.unit &&\n        type.bitWidth === other.bitWidth);\n}\nfunction compareList(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.children.length === other.children.length &&\n        instance.compareManyFields(type.children, other.children));\n}\nfunction compareStruct(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.children.length === other.children.length &&\n        instance.compareManyFields(type.children, other.children));\n}\nfunction compareUnion(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.mode === other.mode &&\n        type.typeIds.every((x, i) => x === other.typeIds[i]) &&\n        instance.compareManyFields(type.children, other.children));\n}\nfunction compareDictionary(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.id === other.id &&\n        type.isOrdered === other.isOrdered &&\n        instance.visit(type.indices, other.indices) &&\n        instance.visit(type.dictionary, other.dictionary));\n}\nfunction compareInterval(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.unit === other.unit);\n}\nfunction compareDuration(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.unit === other.unit);\n}\nfunction compareFixedSizeList(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.listSize === other.listSize &&\n        type.children.length === other.children.length &&\n        instance.compareManyFields(type.children, other.children));\n}\nfunction compareMap(type, other) {\n    return (type === other) || (compareConstructor(type, other) &&\n        type.keysSorted === other.keysSorted &&\n        type.children.length === other.children.length &&\n        instance.compareManyFields(type.children, other.children));\n}\nTypeComparator.prototype.visitNull = compareAny;\nTypeComparator.prototype.visitBool = compareAny;\nTypeComparator.prototype.visitInt = compareInt;\nTypeComparator.prototype.visitInt8 = compareInt;\nTypeComparator.prototype.visitInt16 = compareInt;\nTypeComparator.prototype.visitInt32 = compareInt;\nTypeComparator.prototype.visitInt64 = compareInt;\nTypeComparator.prototype.visitUint8 = compareInt;\nTypeComparator.prototype.visitUint16 = compareInt;\nTypeComparator.prototype.visitUint32 = compareInt;\nTypeComparator.prototype.visitUint64 = compareInt;\nTypeComparator.prototype.visitFloat = compareFloat;\nTypeComparator.prototype.visitFloat16 = compareFloat;\nTypeComparator.prototype.visitFloat32 = compareFloat;\nTypeComparator.prototype.visitFloat64 = compareFloat;\nTypeComparator.prototype.visitUtf8 = compareAny;\nTypeComparator.prototype.visitLargeUtf8 = compareAny;\nTypeComparator.prototype.visitBinary = compareAny;\nTypeComparator.prototype.visitLargeBinary = compareAny;\nTypeComparator.prototype.visitFixedSizeBinary = compareFixedSizeBinary;\nTypeComparator.prototype.visitDate = compareDate;\nTypeComparator.prototype.visitDateDay = compareDate;\nTypeComparator.prototype.visitDateMillisecond = compareDate;\nTypeComparator.prototype.visitTimestamp = compareTimestamp;\nTypeComparator.prototype.visitTimestampSecond = compareTimestamp;\nTypeComparator.prototype.visitTimestampMillisecond = compareTimestamp;\nTypeComparator.prototype.visitTimestampMicrosecond = compareTimestamp;\nTypeComparator.prototype.visitTimestampNanosecond = compareTimestamp;\nTypeComparator.prototype.visitTime = compareTime;\nTypeComparator.prototype.visitTimeSecond = compareTime;\nTypeComparator.prototype.visitTimeMillisecond = compareTime;\nTypeComparator.prototype.visitTimeMicrosecond = compareTime;\nTypeComparator.prototype.visitTimeNanosecond = compareTime;\nTypeComparator.prototype.visitDecimal = compareAny;\nTypeComparator.prototype.visitList = compareList;\nTypeComparator.prototype.visitStruct = compareStruct;\nTypeComparator.prototype.visitUnion = compareUnion;\nTypeComparator.prototype.visitDenseUnion = compareUnion;\nTypeComparator.prototype.visitSparseUnion = compareUnion;\nTypeComparator.prototype.visitDictionary = compareDictionary;\nTypeComparator.prototype.visitInterval = compareInterval;\nTypeComparator.prototype.visitIntervalDayTime = compareInterval;\nTypeComparator.prototype.visitIntervalYearMonth = compareInterval;\nTypeComparator.prototype.visitDuration = compareDuration;\nTypeComparator.prototype.visitDurationSecond = compareDuration;\nTypeComparator.prototype.visitDurationMillisecond = compareDuration;\nTypeComparator.prototype.visitDurationMicrosecond = compareDuration;\nTypeComparator.prototype.visitDurationNanosecond = compareDuration;\nTypeComparator.prototype.visitFixedSizeList = compareFixedSizeList;\nTypeComparator.prototype.visitMap = compareMap;\n/** @ignore */\nexport const instance = new TypeComparator();\nexport function compareSchemas(schema, other) {\n    return instance.compareSchemas(schema, other);\n}\nexport function compareFields(field, other) {\n    return instance.compareFields(field, other);\n}\nexport function compareTypes(type, other) {\n    return instance.visit(type, other);\n}\n\n//# sourceMappingURL=typecomparator.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { makeData } from '../data.mjs';\nimport { Struct } from '../type.mjs';\nimport { RecordBatch } from '../recordbatch.mjs';\n/** @ignore */\nexport function distributeVectorsIntoRecordBatches(schema, vecs) {\n    return uniformlyDistributeChunksAcrossRecordBatches(schema, vecs.map((v) => v.data.concat()));\n}\n/** @ignore */\nfunction uniformlyDistributeChunksAcrossRecordBatches(schema, cols) {\n    const fields = [...schema.fields];\n    const batches = [];\n    const memo = { numBatches: cols.reduce((n, c) => Math.max(n, c.length), 0) };\n    let numBatches = 0, batchLength = 0;\n    let i = -1;\n    const numColumns = cols.length;\n    let child, children = [];\n    while (memo.numBatches-- > 0) {\n        for (batchLength = Number.POSITIVE_INFINITY, i = -1; ++i < numColumns;) {\n            children[i] = child = cols[i].shift();\n            batchLength = Math.min(batchLength, child ? child.length : batchLength);\n        }\n        if (Number.isFinite(batchLength)) {\n            children = distributeChildren(fields, batchLength, children, cols, memo);\n            if (batchLength > 0) {\n                batches[numBatches++] = makeData({\n                    type: new Struct(fields),\n                    length: batchLength,\n                    nullCount: 0,\n                    children: children.slice()\n                });\n            }\n        }\n    }\n    return [\n        schema = schema.assign(fields),\n        batches.map((data) => new RecordBatch(schema, data))\n    ];\n}\n/** @ignore */\nfunction distributeChildren(fields, batchLength, children, columns, memo) {\n    var _a;\n    const nullBitmapSize = ((batchLength + 63) & ~63) >> 3;\n    for (let i = -1, n = columns.length; ++i < n;) {\n        const child = children[i];\n        const length = child === null || child === void 0 ? void 0 : child.length;\n        if (length >= batchLength) {\n            if (length === batchLength) {\n                children[i] = child;\n            }\n            else {\n                children[i] = child.slice(0, batchLength);\n                memo.numBatches = Math.max(memo.numBatches, columns[i].unshift(child.slice(batchLength, length - batchLength)));\n            }\n        }\n        else {\n            const field = fields[i];\n            fields[i] = field.clone({ nullable: true });\n            children[i] = (_a = child === null || child === void 0 ? void 0 : child._changeLengthAndBackfillNullBitmap(batchLength)) !== null && _a !== void 0 ? _a : makeData({\n                type: field.type,\n                length: batchLength,\n                nullCount: batchLength,\n                nullBitmap: new Uint8Array(nullBitmapSize)\n            });\n        }\n    }\n    return children;\n}\n\n//# sourceMappingURL=recordbatch.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nvar _a;\nimport { Type } from './enum.mjs';\nimport { Data, makeData } from './data.mjs';\nimport { vectorFromArray } from './factories.mjs';\nimport { makeVector, Vector } from './vector.mjs';\nimport { Field, Schema } from './schema.mjs';\nimport { Null, Struct } from './type.mjs';\nimport { compareSchemas } from './visitor/typecomparator.mjs';\nimport { distributeVectorsIntoRecordBatches } from './util/recordbatch.mjs';\nimport { isChunkedValid, computeChunkOffsets, computeChunkNullCounts, wrapChunkedCall1, wrapChunkedCall2, wrapChunkedIndexOf, sliceChunks, } from './util/chunk.mjs';\nimport { instance as getVisitor } from './visitor/get.mjs';\nimport { instance as setVisitor } from './visitor/set.mjs';\nimport { instance as indexOfVisitor } from './visitor/indexof.mjs';\nimport { instance as iteratorVisitor } from './visitor/iterator.mjs';\nimport { clampRange, wrapIndex } from './util/vector.mjs';\nimport { RecordBatch } from './recordbatch.mjs';\n/**\n * Tables are collections of {@link Vector}s and have a {@link Schema}. Use the convenience methods {@link makeTable}\n * or {@link tableFromArrays} to create a table in JavaScript. To create a table from the IPC format, use\n * {@link tableFromIPC}.\n */\nexport class Table {\n    constructor(...args) {\n        var _b, _c;\n        if (args.length === 0) {\n            this.batches = [];\n            this.schema = new Schema([]);\n            this._offsets = [0];\n            return this;\n        }\n        let schema;\n        let offsets;\n        if (args[0] instanceof Schema) {\n            schema = args.shift();\n        }\n        if (args.at(-1) instanceof Uint32Array) {\n            offsets = args.pop();\n        }\n        const unwrap = (x) => {\n            if (x) {\n                if (x instanceof RecordBatch) {\n                    return [x];\n                }\n                else if (x instanceof Table) {\n                    return x.batches;\n                }\n                else if (x instanceof Data) {\n                    if (x.type instanceof Struct) {\n                        return [new RecordBatch(new Schema(x.type.children), x)];\n                    }\n                }\n                else if (Array.isArray(x)) {\n                    return x.flatMap(v => unwrap(v));\n                }\n                else if (typeof x[Symbol.iterator] === 'function') {\n                    return [...x].flatMap(v => unwrap(v));\n                }\n                else if (typeof x === 'object') {\n                    const keys = Object.keys(x);\n                    const vecs = keys.map((k) => new Vector([x[k]]));\n                    const batchSchema = schema !== null && schema !== void 0 ? schema : new Schema(keys.map((k, i) => new Field(String(k), vecs[i].type, vecs[i].nullable)));\n                    const [, batches] = distributeVectorsIntoRecordBatches(batchSchema, vecs);\n                    return batches.length === 0 ? [new RecordBatch(x)] : batches;\n                }\n            }\n            return [];\n        };\n        const batches = args.flatMap(v => unwrap(v));\n        schema = (_c = schema !== null && schema !== void 0 ? schema : (_b = batches[0]) === null || _b === void 0 ? void 0 : _b.schema) !== null && _c !== void 0 ? _c : new Schema([]);\n        if (!(schema instanceof Schema)) {\n            throw new TypeError('Table constructor expects a [Schema, RecordBatch[]] pair.');\n        }\n        for (const batch of batches) {\n            if (!(batch instanceof RecordBatch)) {\n                throw new TypeError('Table constructor expects a [Schema, RecordBatch[]] pair.');\n            }\n            if (!compareSchemas(schema, batch.schema)) {\n                throw new TypeError('Table and inner RecordBatch schemas must be equivalent.');\n            }\n        }\n        this.schema = schema;\n        this.batches = batches;\n        this._offsets = offsets !== null && offsets !== void 0 ? offsets : computeChunkOffsets(this.data);\n    }\n    /**\n     * The contiguous {@link RecordBatch `RecordBatch`} chunks of the Table rows.\n     */\n    get data() { return this.batches.map(({ data }) => data); }\n    /**\n     * The number of columns in this Table.\n     */\n    get numCols() { return this.schema.fields.length; }\n    /**\n     * The number of rows in this Table.\n     */\n    get numRows() {\n        return this.data.reduce((numRows, data) => numRows + data.length, 0);\n    }\n    /**\n     * The number of null rows in this Table.\n     */\n    get nullCount() {\n        if (this._nullCount === -1) {\n            this._nullCount = computeChunkNullCounts(this.data);\n        }\n        return this._nullCount;\n    }\n    /**\n     * Check whether an element is null.\n     *\n     * @param index The index at which to read the validity bitmap.\n     */\n    // @ts-ignore\n    isValid(index) { return false; }\n    /**\n     * Get an element value by position.\n     *\n     * @param index The index of the element to read.\n     */\n    // @ts-ignore\n    get(index) { return null; }\n    /**\n      * Get an element value by position.\n      * @param index The index of the element to read. A negative index will count back from the last element.\n      */\n    // @ts-ignore\n    at(index) {\n        return this.get(wrapIndex(index, this.numRows));\n    }\n    /**\n     * Set an element value by position.\n     *\n     * @param index The index of the element to write.\n     * @param value The value to set.\n     */\n    // @ts-ignore\n    set(index, value) { return; }\n    /**\n     * Retrieve the index of the first occurrence of a value in an Vector.\n     *\n     * @param element The value to locate in the Vector.\n     * @param offset The index at which to begin the search. If offset is omitted, the search starts at index 0.\n     */\n    // @ts-ignore\n    indexOf(element, offset) { return -1; }\n    /**\n     * Iterator for rows in this Table.\n     */\n    [Symbol.iterator]() {\n        if (this.batches.length > 0) {\n            return iteratorVisitor.visit(new Vector(this.data));\n        }\n        return (new Array(0))[Symbol.iterator]();\n    }\n    /**\n     * Return a JavaScript Array of the Table rows.\n     *\n     * @returns An Array of Table rows.\n     */\n    toArray() {\n        return [...this];\n    }\n    /**\n     * Returns a string representation of the Table rows.\n     *\n     * @returns A string representation of the Table rows.\n     */\n    toString() {\n        return `[\\n  ${this.toArray().join(',\\n  ')}\\n]`;\n    }\n    /**\n     * Combines two or more Tables of the same schema.\n     *\n     * @param others Additional Tables to add to the end of this Tables.\n     */\n    concat(...others) {\n        const schema = this.schema;\n        const data = this.data.concat(others.flatMap(({ data }) => data));\n        return new Table(schema, data.map((data) => new RecordBatch(schema, data)));\n    }\n    /**\n     * Return a zero-copy sub-section of this Table.\n     *\n     * @param begin The beginning of the specified portion of the Table.\n     * @param end The end of the specified portion of the Table. This is exclusive of the element at the index 'end'.\n     */\n    slice(begin, end) {\n        const schema = this.schema;\n        [begin, end] = clampRange({ length: this.numRows }, begin, end);\n        const data = sliceChunks(this.data, this._offsets, begin, end);\n        return new Table(schema, data.map((chunk) => new RecordBatch(schema, chunk)));\n    }\n    /**\n     * Returns a child Vector by name, or null if this Vector has no child with the given name.\n     *\n     * @param name The name of the child to retrieve.\n     */\n    getChild(name) {\n        return this.getChildAt(this.schema.fields.findIndex((f) => f.name === name));\n    }\n    /**\n     * Returns a child Vector by index, or null if this Vector has no child at the supplied index.\n     *\n     * @param index The index of the child to retrieve.\n     */\n    getChildAt(index) {\n        if (index > -1 && index < this.schema.fields.length) {\n            const data = this.data.map((data) => data.children[index]);\n            if (data.length === 0) {\n                const { type } = this.schema.fields[index];\n                const empty = makeData({ type, length: 0, nullCount: 0 });\n                data.push(empty._changeLengthAndBackfillNullBitmap(this.numRows));\n            }\n            return new Vector(data);\n        }\n        return null;\n    }\n    /**\n     * Sets a child Vector by name.\n     *\n     * @param name The name of the child to overwrite.\n     * @returns A new Table with the supplied child for the specified name.\n     */\n    setChild(name, child) {\n        var _b;\n        return this.setChildAt((_b = this.schema.fields) === null || _b === void 0 ? void 0 : _b.findIndex((f) => f.name === name), child);\n    }\n    setChildAt(index, child) {\n        let schema = this.schema;\n        let batches = [...this.batches];\n        if (index > -1 && index < this.numCols) {\n            if (!child) {\n                child = new Vector([makeData({ type: new Null, length: this.numRows })]);\n            }\n            const fields = schema.fields.slice();\n            const field = fields[index].clone({ type: child.type });\n            const children = this.schema.fields.map((_, i) => this.getChildAt(i));\n            [fields[index], children[index]] = [field, child];\n            [schema, batches] = distributeVectorsIntoRecordBatches(schema, children);\n        }\n        return new Table(schema, batches);\n    }\n    /**\n     * Construct a new Table containing only specified columns.\n     *\n     * @param columnNames Names of columns to keep.\n     * @returns A new Table of columns matching the specified names.\n     */\n    select(columnNames) {\n        const nameToIndex = this.schema.fields.reduce((m, f, i) => m.set(f.name, i), new Map());\n        return this.selectAt(columnNames.map((columnName) => nameToIndex.get(columnName)).filter((x) => x > -1));\n    }\n    /**\n     * Construct a new Table containing only columns at the specified indices.\n     *\n     * @param columnIndices Indices of columns to keep.\n     * @returns A new Table of columns at the specified indices.\n     */\n    selectAt(columnIndices) {\n        const schema = this.schema.selectAt(columnIndices);\n        const data = this.batches.map((batch) => batch.selectAt(columnIndices));\n        return new Table(schema, data);\n    }\n    assign(other) {\n        const fields = this.schema.fields;\n        const [indices, oldToNew] = other.schema.fields.reduce((memo, f2, newIdx) => {\n            const [indices, oldToNew] = memo;\n            const i = fields.findIndex((f) => f.name === f2.name);\n            ~i ? (oldToNew[i] = newIdx) : indices.push(newIdx);\n            return memo;\n        }, [[], []]);\n        const schema = this.schema.assign(other.schema);\n        const columns = [\n            ...fields.map((_, i) => [i, oldToNew[i]]).map(([i, j]) => (j === undefined ? this.getChildAt(i) : other.getChildAt(j))),\n            ...indices.map((i) => other.getChildAt(i))\n        ].filter(Boolean);\n        return new Table(...distributeVectorsIntoRecordBatches(schema, columns));\n    }\n}\n_a = Symbol.toStringTag;\n// Initialize this static property via an IIFE so bundlers don't tree-shake\n// out this logic, but also so we're still compliant with `\"sideEffects\": false`\nTable[_a] = ((proto) => {\n    proto.schema = null;\n    proto.batches = [];\n    proto._offsets = new Uint32Array([0]);\n    proto._nullCount = -1;\n    proto[Symbol.isConcatSpreadable] = true;\n    proto['isValid'] = wrapChunkedCall1(isChunkedValid);\n    proto['get'] = wrapChunkedCall1(getVisitor.getVisitFn(Type.Struct));\n    proto['set'] = wrapChunkedCall2(setVisitor.getVisitFn(Type.Struct));\n    proto['indexOf'] = wrapChunkedIndexOf(indexOfVisitor.getVisitFn(Type.Struct));\n    return 'Table';\n})(Table.prototype);\n/**\n * Creates a new Table from an object of typed arrays.\n *\n*  @example\n * ```ts\n * const table = makeTable({\n *   a: new Int8Array([1, 2, 3]),\n * })\n * ```\n *\n * @param input Input an object of typed arrays.\n * @returns A new Table.\n */\nexport function makeTable(input) {\n    const vecs = {};\n    const inputs = Object.entries(input);\n    for (const [key, col] of inputs) {\n        vecs[key] = makeVector(col);\n    }\n    return new Table(vecs);\n}\n/**\n * Creates a new Table from an object of typed arrays or JavaScript arrays.\n *\n *  @example\n * ```ts\n * const table = tableFromArrays({\n *   a: [1, 2, 3],\n *   b: new Int8Array([1, 2, 3]),\n * })\n * ```\n *\n * @param input Input an object of typed arrays or JavaScript arrays.\n * @returns A new Table.\n */\nexport function tableFromArrays(input) {\n    const vecs = {};\n    const inputs = Object.entries(input);\n    for (const [key, col] of inputs) {\n        vecs[key] = vectorFromArray(col);\n    }\n    return new Table(vecs);\n}\n\n//# sourceMappingURL=table.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nvar _a;\nimport { Data, makeData } from './data.mjs';\nimport { Table } from './table.mjs';\nimport { Vector } from './vector.mjs';\nimport { Schema, Field } from './schema.mjs';\nimport { DataType, Struct, Null } from './type.mjs';\nimport { wrapIndex } from './util/vector.mjs';\nimport { instance as getVisitor } from './visitor/get.mjs';\nimport { instance as setVisitor } from './visitor/set.mjs';\nimport { instance as indexOfVisitor } from './visitor/indexof.mjs';\nimport { instance as iteratorVisitor } from './visitor/iterator.mjs';\n/** @ignore */\nexport class RecordBatch {\n    constructor(...args) {\n        switch (args.length) {\n            case 2: {\n                [this.schema] = args;\n                if (!(this.schema instanceof Schema)) {\n                    throw new TypeError('RecordBatch constructor expects a [Schema, Data] pair.');\n                }\n                [,\n                    this.data = makeData({\n                        nullCount: 0,\n                        type: new Struct(this.schema.fields),\n                        children: this.schema.fields.map((f) => makeData({ type: f.type, nullCount: 0 }))\n                    })\n                ] = args;\n                if (!(this.data instanceof Data)) {\n                    throw new TypeError('RecordBatch constructor expects a [Schema, Data] pair.');\n                }\n                [this.schema, this.data] = ensureSameLengthData(this.schema, this.data.children);\n                break;\n            }\n            case 1: {\n                const [obj] = args;\n                const { fields, children, length } = Object.keys(obj).reduce((memo, name, i) => {\n                    memo.children[i] = obj[name];\n                    memo.length = Math.max(memo.length, obj[name].length);\n                    memo.fields[i] = Field.new({ name, type: obj[name].type, nullable: true });\n                    return memo;\n                }, {\n                    length: 0,\n                    fields: new Array(),\n                    children: new Array(),\n                });\n                const schema = new Schema(fields);\n                const data = makeData({ type: new Struct(fields), length, children, nullCount: 0 });\n                [this.schema, this.data] = ensureSameLengthData(schema, data.children, length);\n                break;\n            }\n            default: throw new TypeError('RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.');\n        }\n    }\n    get dictionaries() {\n        return this._dictionaries || (this._dictionaries = collectDictionaries(this.schema.fields, this.data.children));\n    }\n    /**\n     * The number of columns in this RecordBatch.\n     */\n    get numCols() { return this.schema.fields.length; }\n    /**\n     * The number of rows in this RecordBatch.\n     */\n    get numRows() { return this.data.length; }\n    /**\n     * The number of null rows in this RecordBatch.\n     */\n    get nullCount() {\n        return this.data.nullCount;\n    }\n    /**\n     * Check whether an row is null.\n     * @param index The index at which to read the validity bitmap.\n     */\n    isValid(index) {\n        return this.data.getValid(index);\n    }\n    /**\n     * Get a row by position.\n     * @param index The index of the row to read.\n     */\n    get(index) {\n        return getVisitor.visit(this.data, index);\n    }\n    /**\n      * Get a row value by position.\n      * @param index The index of the row to read. A negative index will count back from the last row.\n      */\n    at(index) {\n        return this.get(wrapIndex(index, this.numRows));\n    }\n    /**\n     * Set a row by position.\n     * @param index The index of the row to write.\n     * @param value The value to set.\n     */\n    set(index, value) {\n        return setVisitor.visit(this.data, index, value);\n    }\n    /**\n     * Retrieve the index of the first occurrence of a row in an RecordBatch.\n     * @param element The row to locate in the RecordBatch.\n     * @param offset The index at which to begin the search. If offset is omitted, the search starts at index 0.\n     */\n    indexOf(element, offset) {\n        return indexOfVisitor.visit(this.data, element, offset);\n    }\n    /**\n     * Iterator for rows in this RecordBatch.\n     */\n    [Symbol.iterator]() {\n        return iteratorVisitor.visit(new Vector([this.data]));\n    }\n    /**\n     * Return a JavaScript Array of the RecordBatch rows.\n     * @returns An Array of RecordBatch rows.\n     */\n    toArray() {\n        return [...this];\n    }\n    /**\n     * Combines two or more RecordBatch of the same schema.\n     * @param others Additional RecordBatch to add to the end of this RecordBatch.\n     */\n    concat(...others) {\n        return new Table(this.schema, [this, ...others]);\n    }\n    /**\n     * Return a zero-copy sub-section of this RecordBatch.\n     * @param start The beginning of the specified portion of the RecordBatch.\n     * @param end The end of the specified portion of the RecordBatch. This is exclusive of the row at the index 'end'.\n     */\n    slice(begin, end) {\n        const [slice] = new Vector([this.data]).slice(begin, end).data;\n        return new RecordBatch(this.schema, slice);\n    }\n    /**\n     * Returns a child Vector by name, or null if this Vector has no child with the given name.\n     * @param name The name of the child to retrieve.\n     */\n    getChild(name) {\n        var _b;\n        return this.getChildAt((_b = this.schema.fields) === null || _b === void 0 ? void 0 : _b.findIndex((f) => f.name === name));\n    }\n    /**\n     * Returns a child Vector by index, or null if this Vector has no child at the supplied index.\n     * @param index The index of the child to retrieve.\n     */\n    getChildAt(index) {\n        if (index > -1 && index < this.schema.fields.length) {\n            return new Vector([this.data.children[index]]);\n        }\n        return null;\n    }\n    /**\n     * Sets a child Vector by name.\n     * @param name The name of the child to overwrite.\n     * @returns A new RecordBatch with the new child for the specified name.\n     */\n    setChild(name, child) {\n        var _b;\n        return this.setChildAt((_b = this.schema.fields) === null || _b === void 0 ? void 0 : _b.findIndex((f) => f.name === name), child);\n    }\n    setChildAt(index, child) {\n        let schema = this.schema;\n        let data = this.data;\n        if (index > -1 && index < this.numCols) {\n            if (!child) {\n                child = new Vector([makeData({ type: new Null, length: this.numRows })]);\n            }\n            const fields = schema.fields.slice();\n            const children = data.children.slice();\n            const field = fields[index].clone({ type: child.type });\n            [fields[index], children[index]] = [field, child.data[0]];\n            schema = new Schema(fields, new Map(this.schema.metadata));\n            data = makeData({ type: new Struct(fields), children });\n        }\n        return new RecordBatch(schema, data);\n    }\n    /**\n     * Construct a new RecordBatch containing only specified columns.\n     *\n     * @param columnNames Names of columns to keep.\n     * @returns A new RecordBatch of columns matching the specified names.\n     */\n    select(columnNames) {\n        const schema = this.schema.select(columnNames);\n        const type = new Struct(schema.fields);\n        const children = [];\n        for (const name of columnNames) {\n            const index = this.schema.fields.findIndex((f) => f.name === name);\n            if (~index) {\n                children[index] = this.data.children[index];\n            }\n        }\n        return new RecordBatch(schema, makeData({ type, length: this.numRows, children }));\n    }\n    /**\n     * Construct a new RecordBatch containing only columns at the specified indices.\n     *\n     * @param columnIndices Indices of columns to keep.\n     * @returns A new RecordBatch of columns matching at the specified indices.\n     */\n    selectAt(columnIndices) {\n        const schema = this.schema.selectAt(columnIndices);\n        const children = columnIndices.map((i) => this.data.children[i]).filter(Boolean);\n        const subset = makeData({ type: new Struct(schema.fields), length: this.numRows, children });\n        return new RecordBatch(schema, subset);\n    }\n}\n_a = Symbol.toStringTag;\n// Initialize this static property via an IIFE so bundlers don't tree-shake\n// out this logic, but also so we're still compliant with `\"sideEffects\": false`\nRecordBatch[_a] = ((proto) => {\n    proto._nullCount = -1;\n    proto[Symbol.isConcatSpreadable] = true;\n    return 'RecordBatch';\n})(RecordBatch.prototype);\n/** @ignore */\nfunction ensureSameLengthData(schema, chunks, maxLength = chunks.reduce((max, col) => Math.max(max, col.length), 0)) {\n    var _b;\n    const fields = [...schema.fields];\n    const children = [...chunks];\n    const nullBitmapSize = ((maxLength + 63) & ~63) >> 3;\n    for (const [idx, field] of schema.fields.entries()) {\n        const chunk = chunks[idx];\n        if (!chunk || chunk.length !== maxLength) {\n            fields[idx] = field.clone({ nullable: true });\n            children[idx] = (_b = chunk === null || chunk === void 0 ? void 0 : chunk._changeLengthAndBackfillNullBitmap(maxLength)) !== null && _b !== void 0 ? _b : makeData({\n                type: field.type,\n                length: maxLength,\n                nullCount: maxLength,\n                nullBitmap: new Uint8Array(nullBitmapSize)\n            });\n        }\n    }\n    return [\n        schema.assign(fields),\n        makeData({ type: new Struct(fields), length: maxLength, children })\n    ];\n}\n/** @ignore */\nfunction collectDictionaries(fields, children, dictionaries = new Map()) {\n    var _b, _c;\n    if (((_b = fields === null || fields === void 0 ? void 0 : fields.length) !== null && _b !== void 0 ? _b : 0) > 0 && ((fields === null || fields === void 0 ? void 0 : fields.length) === (children === null || children === void 0 ? void 0 : children.length))) {\n        for (let i = -1, n = fields.length; ++i < n;) {\n            const { type } = fields[i];\n            const data = children[i];\n            for (const next of [data, ...(((_c = data === null || data === void 0 ? void 0 : data.dictionary) === null || _c === void 0 ? void 0 : _c.data) || [])]) {\n                collectDictionaries(type.children, next === null || next === void 0 ? void 0 : next.children, dictionaries);\n            }\n            if (DataType.isDictionary(type)) {\n                const { id } = type;\n                if (!dictionaries.has(id)) {\n                    if (data === null || data === void 0 ? void 0 : data.dictionary) {\n                        dictionaries.set(id, data.dictionary);\n                    }\n                }\n                else if (dictionaries.get(id) !== data.dictionary) {\n                    throw new Error(`Cannot create Schema containing two different dictionaries with the same Id`);\n                }\n            }\n        }\n    }\n    return dictionaries;\n}\n/**\n * An internal class used by the `RecordBatchReader` and `RecordBatchWriter`\n * implementations to differentiate between a stream with valid zero-length\n * RecordBatches, and a stream with a Schema message, but no RecordBatches.\n * @see https://github.com/apache/arrow/pull/4373\n * @ignore\n * @private\n */\nexport class _InternalEmptyPlaceholderRecordBatch extends RecordBatch {\n    constructor(schema) {\n        const children = schema.fields.map((f) => makeData({ type: f.type }));\n        const data = makeData({ type: new Struct(schema.fields), nullCount: 0, children });\n        super(schema, data);\n    }\n}\n\n//# sourceMappingURL=recordbatch.mjs.map\n","// automatically generated by the FlatBuffers compiler, do not modify\nimport * as flatbuffers from 'flatbuffers';\nimport { KeyValue } from './key-value.mjs';\nimport { MessageHeader } from './message-header.mjs';\nimport { MetadataVersion } from './metadata-version.mjs';\nexport class Message {\n    constructor() {\n        this.bb = null;\n        this.bb_pos = 0;\n    }\n    __init(i, bb) {\n        this.bb_pos = i;\n        this.bb = bb;\n        return this;\n    }\n    static getRootAsMessage(bb, obj) {\n        return (obj || new Message()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    static getSizePrefixedRootAsMessage(bb, obj) {\n        bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);\n        return (obj || new Message()).__init(bb.readInt32(bb.position()) + bb.position(), bb);\n    }\n    version() {\n        const offset = this.bb.__offset(this.bb_pos, 4);\n        return offset ? this.bb.readInt16(this.bb_pos + offset) : MetadataVersion.V1;\n    }\n    headerType() {\n        const offset = this.bb.__offset(this.bb_pos, 6);\n        return offset ? this.bb.readUint8(this.bb_pos + offset) : MessageHeader.NONE;\n    }\n    header(obj) {\n        const offset = this.bb.__offset(this.bb_pos, 8);\n        return offset ? this.bb.__union(obj, this.bb_pos + offset) : null;\n    }\n    bodyLength() {\n        const offset = this.bb.__offset(this.bb_pos, 10);\n        return offset ? this.bb.readInt64(this.bb_pos + offset) : BigInt('0');\n    }\n    customMetadata(index, obj) {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? (obj || new KeyValue()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos + offset) + index * 4), this.bb) : null;\n    }\n    customMetadataLength() {\n        const offset = this.bb.__offset(this.bb_pos, 12);\n        return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;\n    }\n    static startMessage(builder) {\n        builder.startObject(5);\n    }\n    static addVersion(builder, version) {\n        builder.addFieldInt16(0, version, MetadataVersion.V1);\n    }\n    static addHeaderType(builder, headerType) {\n        builder.addFieldInt8(1, headerType, MessageHeader.NONE);\n    }\n    static addHeader(builder, headerOffset) {\n        builder.addFieldOffset(2, headerOffset, 0);\n    }\n    static addBodyLength(builder, bodyLength) {\n        builder.addFieldInt64(3, bodyLength, BigInt('0'));\n    }\n    static addCustomMetadata(builder, customMetadataOffset) {\n        builder.addFieldOffset(4, customMetadataOffset, 0);\n    }\n    static createCustomMetadataVector(builder, data) {\n        builder.startVector(4, data.length, 4);\n        for (let i = data.length - 1; i >= 0; i--) {\n            builder.addOffset(data[i]);\n        }\n        return builder.endVector();\n    }\n    static startCustomMetadataVector(builder, numElems) {\n        builder.startVector(4, numElems, 4);\n    }\n    static endMessage(builder) {\n        const offset = builder.endObject();\n        return offset;\n    }\n    static finishMessageBuffer(builder, offset) {\n        builder.finish(offset);\n    }\n    static finishSizePrefixedMessageBuffer(builder, offset) {\n        builder.finish(offset, undefined, true);\n    }\n    static createMessage(builder, version, headerType, headerOffset, bodyLength, customMetadataOffset) {\n        Message.startMessage(builder);\n        Message.addVersion(builder, version);\n        Message.addHeaderType(builder, headerType);\n        Message.addHeader(builder, headerOffset);\n        Message.addBodyLength(builder, bodyLength);\n        Message.addCustomMetadata(builder, customMetadataOffset);\n        return Message.endMessage(builder);\n    }\n}\n\n//# sourceMappingURL=message.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Visitor } from '../visitor.mjs';\nimport { Null } from '../fb/null.mjs';\nimport { Int } from '../fb/int.mjs';\nimport { FloatingPoint } from '../fb/floating-point.mjs';\nimport { Binary } from '../fb/binary.mjs';\nimport { LargeBinary } from '../fb/large-binary.mjs';\nimport { Bool } from '../fb/bool.mjs';\nimport { Utf8 } from '../fb/utf8.mjs';\nimport { LargeUtf8 } from '../fb/large-utf8.mjs';\nimport { Decimal } from '../fb/decimal.mjs';\nimport { Date } from '../fb/date.mjs';\nimport { Time } from '../fb/time.mjs';\nimport { Timestamp } from '../fb/timestamp.mjs';\nimport { Interval } from '../fb/interval.mjs';\nimport { Duration } from '../fb/duration.mjs';\nimport { List } from '../fb/list.mjs';\nimport { Struct_ as Struct } from '../fb/struct-.mjs';\nimport { Union } from '../fb/union.mjs';\nimport { DictionaryEncoding } from '../fb/dictionary-encoding.mjs';\nimport { FixedSizeBinary } from '../fb/fixed-size-binary.mjs';\nimport { FixedSizeList } from '../fb/fixed-size-list.mjs';\nimport { Map as Map_ } from '../fb/map.mjs';\n/** @ignore */\nexport class TypeAssembler extends Visitor {\n    visit(node, builder) {\n        return (node == null || builder == null) ? undefined : super.visit(node, builder);\n    }\n    visitNull(_node, b) {\n        Null.startNull(b);\n        return Null.endNull(b);\n    }\n    visitInt(node, b) {\n        Int.startInt(b);\n        Int.addBitWidth(b, node.bitWidth);\n        Int.addIsSigned(b, node.isSigned);\n        return Int.endInt(b);\n    }\n    visitFloat(node, b) {\n        FloatingPoint.startFloatingPoint(b);\n        FloatingPoint.addPrecision(b, node.precision);\n        return FloatingPoint.endFloatingPoint(b);\n    }\n    visitBinary(_node, b) {\n        Binary.startBinary(b);\n        return Binary.endBinary(b);\n    }\n    visitLargeBinary(_node, b) {\n        LargeBinary.startLargeBinary(b);\n        return LargeBinary.endLargeBinary(b);\n    }\n    visitBool(_node, b) {\n        Bool.startBool(b);\n        return Bool.endBool(b);\n    }\n    visitUtf8(_node, b) {\n        Utf8.startUtf8(b);\n        return Utf8.endUtf8(b);\n    }\n    visitLargeUtf8(_node, b) {\n        LargeUtf8.startLargeUtf8(b);\n        return LargeUtf8.endLargeUtf8(b);\n    }\n    visitDecimal(node, b) {\n        Decimal.startDecimal(b);\n        Decimal.addScale(b, node.scale);\n        Decimal.addPrecision(b, node.precision);\n        Decimal.addBitWidth(b, node.bitWidth);\n        return Decimal.endDecimal(b);\n    }\n    visitDate(node, b) {\n        Date.startDate(b);\n        Date.addUnit(b, node.unit);\n        return Date.endDate(b);\n    }\n    visitTime(node, b) {\n        Time.startTime(b);\n        Time.addUnit(b, node.unit);\n        Time.addBitWidth(b, node.bitWidth);\n        return Time.endTime(b);\n    }\n    visitTimestamp(node, b) {\n        const timezone = (node.timezone && b.createString(node.timezone)) || undefined;\n        Timestamp.startTimestamp(b);\n        Timestamp.addUnit(b, node.unit);\n        if (timezone !== undefined) {\n            Timestamp.addTimezone(b, timezone);\n        }\n        return Timestamp.endTimestamp(b);\n    }\n    visitInterval(node, b) {\n        Interval.startInterval(b);\n        Interval.addUnit(b, node.unit);\n        return Interval.endInterval(b);\n    }\n    visitDuration(node, b) {\n        Duration.startDuration(b);\n        Duration.addUnit(b, node.unit);\n        return Duration.endDuration(b);\n    }\n    visitList(_node, b) {\n        List.startList(b);\n        return List.endList(b);\n    }\n    visitStruct(_node, b) {\n        Struct.startStruct_(b);\n        return Struct.endStruct_(b);\n    }\n    visitUnion(node, b) {\n        Union.startTypeIdsVector(b, node.typeIds.length);\n        const typeIds = Union.createTypeIdsVector(b, node.typeIds);\n        Union.startUnion(b);\n        Union.addMode(b, node.mode);\n        Union.addTypeIds(b, typeIds);\n        return Union.endUnion(b);\n    }\n    visitDictionary(node, b) {\n        const indexType = this.visit(node.indices, b);\n        DictionaryEncoding.startDictionaryEncoding(b);\n        DictionaryEncoding.addId(b, BigInt(node.id));\n        DictionaryEncoding.addIsOrdered(b, node.isOrdered);\n        if (indexType !== undefined) {\n            DictionaryEncoding.addIndexType(b, indexType);\n        }\n        return DictionaryEncoding.endDictionaryEncoding(b);\n    }\n    visitFixedSizeBinary(node, b) {\n        FixedSizeBinary.startFixedSizeBinary(b);\n        FixedSizeBinary.addByteWidth(b, node.byteWidth);\n        return FixedSizeBinary.endFixedSizeBinary(b);\n    }\n    visitFixedSizeList(node, b) {\n        FixedSizeList.startFixedSizeList(b);\n        FixedSizeList.addListSize(b, node.listSize);\n        return FixedSizeList.endFixedSizeList(b);\n    }\n    visitMap(node, b) {\n        Map_.startMap(b);\n        Map_.addKeysSorted(b, node.keysSorted);\n        return Map_.endMap(b);\n    }\n}\n/** @ignore */\nexport const instance = new TypeAssembler();\n\n//# sourceMappingURL=typeassembler.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n/* eslint-disable brace-style */\nimport { Schema, Field } from '../../schema.mjs';\nimport { Dictionary, Utf8, LargeUtf8, Binary, LargeBinary, Decimal, FixedSizeBinary, List, FixedSizeList, Map_, Struct, Union, Bool, Null, Int, Float, Date_, Time, Interval, Timestamp, Int32, Duration, } from '../../type.mjs';\nimport { DictionaryBatch, RecordBatch, FieldNode, BufferRegion } from './message.mjs';\nimport { TimeUnit, Precision, IntervalUnit, UnionMode, DateUnit } from '../../enum.mjs';\n/** @ignore */\nexport function schemaFromJSON(_schema, dictionaries = new Map()) {\n    return new Schema(schemaFieldsFromJSON(_schema, dictionaries), customMetadataFromJSON(_schema['metadata']), dictionaries);\n}\n/** @ignore */\nexport function recordBatchFromJSON(b) {\n    return new RecordBatch(b['count'], fieldNodesFromJSON(b['columns']), buffersFromJSON(b['columns']));\n}\n/** @ignore */\nexport function dictionaryBatchFromJSON(b) {\n    return new DictionaryBatch(recordBatchFromJSON(b['data']), b['id'], b['isDelta']);\n}\n/** @ignore */\nfunction schemaFieldsFromJSON(_schema, dictionaries) {\n    return (_schema['fields'] || []).filter(Boolean).map((f) => Field.fromJSON(f, dictionaries));\n}\n/** @ignore */\nfunction fieldChildrenFromJSON(_field, dictionaries) {\n    return (_field['children'] || []).filter(Boolean).map((f) => Field.fromJSON(f, dictionaries));\n}\n/** @ignore */\nfunction fieldNodesFromJSON(xs) {\n    return (xs || []).reduce((fieldNodes, column) => [\n        ...fieldNodes,\n        new FieldNode(column['count'], nullCountFromJSON(column['VALIDITY'])),\n        ...fieldNodesFromJSON(column['children'])\n    ], []);\n}\n/** @ignore */\nfunction buffersFromJSON(xs, buffers = []) {\n    for (let i = -1, n = (xs || []).length; ++i < n;) {\n        const column = xs[i];\n        column['VALIDITY'] && buffers.push(new BufferRegion(buffers.length, column['VALIDITY'].length));\n        column['TYPE_ID'] && buffers.push(new BufferRegion(buffers.length, column['TYPE_ID'].length));\n        column['OFFSET'] && buffers.push(new BufferRegion(buffers.length, column['OFFSET'].length));\n        column['DATA'] && buffers.push(new BufferRegion(buffers.length, column['DATA'].length));\n        buffers = buffersFromJSON(column['children'], buffers);\n    }\n    return buffers;\n}\n/** @ignore */\nfunction nullCountFromJSON(validity) {\n    return (validity || []).reduce((sum, val) => sum + +(val === 0), 0);\n}\n/** @ignore */\nexport function fieldFromJSON(_field, dictionaries) {\n    let id;\n    let keys;\n    let field;\n    let dictMeta;\n    let type;\n    let dictType;\n    // If no dictionary encoding\n    if (!dictionaries || !(dictMeta = _field['dictionary'])) {\n        type = typeFromJSON(_field, fieldChildrenFromJSON(_field, dictionaries));\n        field = new Field(_field['name'], type, _field['nullable'], customMetadataFromJSON(_field['metadata']));\n    }\n    // If dictionary encoded and the first time we've seen this dictionary id, decode\n    // the data type and child fields, then wrap in a Dictionary type and insert the\n    // data type into the dictionary types map.\n    else if (!dictionaries.has(id = dictMeta['id'])) {\n        // a dictionary index defaults to signed 32 bit int if unspecified\n        keys = (keys = dictMeta['indexType']) ? indexTypeFromJSON(keys) : new Int32();\n        dictionaries.set(id, type = typeFromJSON(_field, fieldChildrenFromJSON(_field, dictionaries)));\n        dictType = new Dictionary(type, keys, id, dictMeta['isOrdered']);\n        field = new Field(_field['name'], dictType, _field['nullable'], customMetadataFromJSON(_field['metadata']));\n    }\n    // If dictionary encoded, and have already seen this dictionary Id in the schema, then reuse the\n    // data type and wrap in a new Dictionary type and field.\n    else {\n        // a dictionary index defaults to signed 32 bit int if unspecified\n        keys = (keys = dictMeta['indexType']) ? indexTypeFromJSON(keys) : new Int32();\n        dictType = new Dictionary(dictionaries.get(id), keys, id, dictMeta['isOrdered']);\n        field = new Field(_field['name'], dictType, _field['nullable'], customMetadataFromJSON(_field['metadata']));\n    }\n    return field || null;\n}\n/** @ignore */\nfunction customMetadataFromJSON(metadata = []) {\n    return new Map(metadata.map(({ key, value }) => [key, value]));\n}\n/** @ignore */\nfunction indexTypeFromJSON(_type) {\n    return new Int(_type['isSigned'], _type['bitWidth']);\n}\n/** @ignore */\nfunction typeFromJSON(f, children) {\n    const typeId = f['type']['name'];\n    switch (typeId) {\n        case 'NONE': return new Null();\n        case 'null': return new Null();\n        case 'binary': return new Binary();\n        case 'largebinary': return new LargeBinary();\n        case 'utf8': return new Utf8();\n        case 'largeutf8': return new LargeUtf8();\n        case 'bool': return new Bool();\n        case 'list': return new List((children || [])[0]);\n        case 'struct': return new Struct(children || []);\n        case 'struct_': return new Struct(children || []);\n    }\n    switch (typeId) {\n        case 'int': {\n            const t = f['type'];\n            return new Int(t['isSigned'], t['bitWidth']);\n        }\n        case 'floatingpoint': {\n            const t = f['type'];\n            return new Float(Precision[t['precision']]);\n        }\n        case 'decimal': {\n            const t = f['type'];\n            return new Decimal(t['scale'], t['precision'], t['bitWidth']);\n        }\n        case 'date': {\n            const t = f['type'];\n            return new Date_(DateUnit[t['unit']]);\n        }\n        case 'time': {\n            const t = f['type'];\n            return new Time(TimeUnit[t['unit']], t['bitWidth']);\n        }\n        case 'timestamp': {\n            const t = f['type'];\n            return new Timestamp(TimeUnit[t['unit']], t['timezone']);\n        }\n        case 'interval': {\n            const t = f['type'];\n            return new Interval(IntervalUnit[t['unit']]);\n        }\n        case 'duration': {\n            const t = f['type'];\n            return new Duration(TimeUnit[t['unit']]);\n        }\n        case 'union': {\n            const t = f['type'];\n            const [m, ...ms] = (t['mode'] + '').toLowerCase();\n            const mode = (m.toUpperCase() + ms.join(''));\n            return new Union(UnionMode[mode], (t['typeIds'] || []), children || []);\n        }\n        case 'fixedsizebinary': {\n            const t = f['type'];\n            return new FixedSizeBinary(t['byteWidth']);\n        }\n        case 'fixedsizelist': {\n            const t = f['type'];\n            return new FixedSizeList(t['listSize'], (children || [])[0]);\n        }\n        case 'map': {\n            const t = f['type'];\n            return new Map_((children || [])[0], t['keysSorted']);\n        }\n    }\n    throw new Error(`Unrecognized type: \"${typeId}\"`);\n}\n\n//# sourceMappingURL=json.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n/* eslint-disable brace-style */\nimport * as flatbuffers from 'flatbuffers';\nimport { Schema as _Schema } from '../../fb/schema.mjs';\nimport { Int as _Int } from '../../fb/int.mjs';\nimport { RecordBatch as _RecordBatch } from '../../fb/record-batch.mjs';\nimport { DictionaryBatch as _DictionaryBatch } from '../../fb/dictionary-batch.mjs';\nimport { Buffer as _Buffer } from '../../fb/buffer.mjs';\nimport { Field as _Field } from '../../fb/field.mjs';\nimport { FieldNode as _FieldNode } from '../../fb/field-node.mjs';\nimport { Type } from '../../fb/type.mjs';\nimport { KeyValue as _KeyValue } from '../../fb/key-value.mjs';\nimport { Endianness as _Endianness } from '../../fb/endianness.mjs';\nimport { FloatingPoint as _FloatingPoint } from '../../fb/floating-point.mjs';\nimport { Decimal as _Decimal } from '../../fb/decimal.mjs';\nimport { Date as _Date } from '../../fb/date.mjs';\nimport { Time as _Time } from '../../fb/time.mjs';\nimport { Timestamp as _Timestamp } from '../../fb/timestamp.mjs';\nimport { Interval as _Interval } from '../../fb/interval.mjs';\nimport { Duration as _Duration } from '../../fb/duration.mjs';\nimport { Union as _Union } from '../../fb/union.mjs';\nimport { FixedSizeBinary as _FixedSizeBinary } from '../../fb/fixed-size-binary.mjs';\nimport { FixedSizeList as _FixedSizeList } from '../../fb/fixed-size-list.mjs';\nimport { Map as _Map } from '../../fb/map.mjs';\nimport { Message as _Message } from '../../fb/message.mjs';\nimport { Schema, Field } from '../../schema.mjs';\nimport { toUint8Array } from '../../util/buffer.mjs';\nimport { bigIntToNumber } from '../../util/bigint.mjs';\nimport { MessageHeader, MetadataVersion } from '../../enum.mjs';\nimport { instance as typeAssembler } from '../../visitor/typeassembler.mjs';\nimport { fieldFromJSON, schemaFromJSON, recordBatchFromJSON, dictionaryBatchFromJSON } from './json.mjs';\nvar Builder = flatbuffers.Builder;\nvar ByteBuffer = flatbuffers.ByteBuffer;\nimport { DataType, Dictionary, Utf8, LargeUtf8, Binary, LargeBinary, Decimal, FixedSizeBinary, List, FixedSizeList, Map_, Struct, Union, Bool, Null, Int, Float, Date_, Time, Interval, Timestamp, Int32, Duration, } from '../../type.mjs';\n/**\n * @ignore\n * @private\n **/\nexport class Message {\n    /** @nocollapse */\n    static fromJSON(msg, headerType) {\n        const message = new Message(0, MetadataVersion.V5, headerType);\n        message._createHeader = messageHeaderFromJSON(msg, headerType);\n        return message;\n    }\n    /** @nocollapse */\n    static decode(buf) {\n        buf = new ByteBuffer(toUint8Array(buf));\n        const _message = _Message.getRootAsMessage(buf);\n        const bodyLength = _message.bodyLength();\n        const version = _message.version();\n        const headerType = _message.headerType();\n        const message = new Message(bodyLength, version, headerType);\n        message._createHeader = decodeMessageHeader(_message, headerType);\n        return message;\n    }\n    /** @nocollapse */\n    static encode(message) {\n        const b = new Builder();\n        let headerOffset = -1;\n        if (message.isSchema()) {\n            headerOffset = Schema.encode(b, message.header());\n        }\n        else if (message.isRecordBatch()) {\n            headerOffset = RecordBatch.encode(b, message.header());\n        }\n        else if (message.isDictionaryBatch()) {\n            headerOffset = DictionaryBatch.encode(b, message.header());\n        }\n        _Message.startMessage(b);\n        _Message.addVersion(b, MetadataVersion.V5);\n        _Message.addHeader(b, headerOffset);\n        _Message.addHeaderType(b, message.headerType);\n        _Message.addBodyLength(b, BigInt(message.bodyLength));\n        _Message.finishMessageBuffer(b, _Message.endMessage(b));\n        return b.asUint8Array();\n    }\n    /** @nocollapse */\n    static from(header, bodyLength = 0) {\n        if (header instanceof Schema) {\n            return new Message(0, MetadataVersion.V5, MessageHeader.Schema, header);\n        }\n        if (header instanceof RecordBatch) {\n            return new Message(bodyLength, MetadataVersion.V5, MessageHeader.RecordBatch, header);\n        }\n        if (header instanceof DictionaryBatch) {\n            return new Message(bodyLength, MetadataVersion.V5, MessageHeader.DictionaryBatch, header);\n        }\n        throw new Error(`Unrecognized Message header: ${header}`);\n    }\n    get type() { return this.headerType; }\n    get version() { return this._version; }\n    get headerType() { return this._headerType; }\n    get bodyLength() { return this._bodyLength; }\n    header() { return this._createHeader(); }\n    isSchema() { return this.headerType === MessageHeader.Schema; }\n    isRecordBatch() { return this.headerType === MessageHeader.RecordBatch; }\n    isDictionaryBatch() { return this.headerType === MessageHeader.DictionaryBatch; }\n    constructor(bodyLength, version, headerType, header) {\n        this._version = version;\n        this._headerType = headerType;\n        this.body = new Uint8Array(0);\n        header && (this._createHeader = () => header);\n        this._bodyLength = bigIntToNumber(bodyLength);\n    }\n}\n/**\n * @ignore\n * @private\n **/\nexport class RecordBatch {\n    get nodes() { return this._nodes; }\n    get length() { return this._length; }\n    get buffers() { return this._buffers; }\n    constructor(length, nodes, buffers) {\n        this._nodes = nodes;\n        this._buffers = buffers;\n        this._length = bigIntToNumber(length);\n    }\n}\n/**\n * @ignore\n * @private\n **/\nexport class DictionaryBatch {\n    get id() { return this._id; }\n    get data() { return this._data; }\n    get isDelta() { return this._isDelta; }\n    get length() { return this.data.length; }\n    get nodes() { return this.data.nodes; }\n    get buffers() { return this.data.buffers; }\n    constructor(data, id, isDelta = false) {\n        this._data = data;\n        this._isDelta = isDelta;\n        this._id = bigIntToNumber(id);\n    }\n}\n/**\n * @ignore\n * @private\n **/\nexport class BufferRegion {\n    constructor(offset, length) {\n        this.offset = bigIntToNumber(offset);\n        this.length = bigIntToNumber(length);\n    }\n}\n/**\n * @ignore\n * @private\n **/\nexport class FieldNode {\n    constructor(length, nullCount) {\n        this.length = bigIntToNumber(length);\n        this.nullCount = bigIntToNumber(nullCount);\n    }\n}\n/** @ignore */\nfunction messageHeaderFromJSON(message, type) {\n    return (() => {\n        switch (type) {\n            case MessageHeader.Schema: return Schema.fromJSON(message);\n            case MessageHeader.RecordBatch: return RecordBatch.fromJSON(message);\n            case MessageHeader.DictionaryBatch: return DictionaryBatch.fromJSON(message);\n        }\n        throw new Error(`Unrecognized Message type: { name: ${MessageHeader[type]}, type: ${type} }`);\n    });\n}\n/** @ignore */\nfunction decodeMessageHeader(message, type) {\n    return (() => {\n        switch (type) {\n            case MessageHeader.Schema: return Schema.decode(message.header(new _Schema()), new Map(), message.version());\n            case MessageHeader.RecordBatch: return RecordBatch.decode(message.header(new _RecordBatch()), message.version());\n            case MessageHeader.DictionaryBatch: return DictionaryBatch.decode(message.header(new _DictionaryBatch()), message.version());\n        }\n        throw new Error(`Unrecognized Message type: { name: ${MessageHeader[type]}, type: ${type} }`);\n    });\n}\nField['encode'] = encodeField;\nField['decode'] = decodeField;\nField['fromJSON'] = fieldFromJSON;\nSchema['encode'] = encodeSchema;\nSchema['decode'] = decodeSchema;\nSchema['fromJSON'] = schemaFromJSON;\nRecordBatch['encode'] = encodeRecordBatch;\nRecordBatch['decode'] = decodeRecordBatch;\nRecordBatch['fromJSON'] = recordBatchFromJSON;\nDictionaryBatch['encode'] = encodeDictionaryBatch;\nDictionaryBatch['decode'] = decodeDictionaryBatch;\nDictionaryBatch['fromJSON'] = dictionaryBatchFromJSON;\nFieldNode['encode'] = encodeFieldNode;\nFieldNode['decode'] = decodeFieldNode;\nBufferRegion['encode'] = encodeBufferRegion;\nBufferRegion['decode'] = decodeBufferRegion;\n/** @ignore */\nfunction decodeSchema(_schema, dictionaries = new Map(), version = MetadataVersion.V5) {\n    const fields = decodeSchemaFields(_schema, dictionaries);\n    return new Schema(fields, decodeCustomMetadata(_schema), dictionaries, version);\n}\n/** @ignore */\nfunction decodeRecordBatch(batch, version = MetadataVersion.V5) {\n    if (batch.compression() !== null) {\n        throw new Error('Record batch compression not implemented');\n    }\n    return new RecordBatch(batch.length(), decodeFieldNodes(batch), decodeBuffers(batch, version));\n}\n/** @ignore */\nfunction decodeDictionaryBatch(batch, version = MetadataVersion.V5) {\n    return new DictionaryBatch(RecordBatch.decode(batch.data(), version), batch.id(), batch.isDelta());\n}\n/** @ignore */\nfunction decodeBufferRegion(b) {\n    return new BufferRegion(b.offset(), b.length());\n}\n/** @ignore */\nfunction decodeFieldNode(f) {\n    return new FieldNode(f.length(), f.nullCount());\n}\n/** @ignore */\nfunction decodeFieldNodes(batch) {\n    const nodes = [];\n    for (let f, i = -1, j = -1, n = batch.nodesLength(); ++i < n;) {\n        if (f = batch.nodes(i)) {\n            nodes[++j] = FieldNode.decode(f);\n        }\n    }\n    return nodes;\n}\n/** @ignore */\nfunction decodeBuffers(batch, version) {\n    const bufferRegions = [];\n    for (let b, i = -1, j = -1, n = batch.buffersLength(); ++i < n;) {\n        if (b = batch.buffers(i)) {\n            // If this Arrow buffer was written before version 4,\n            // advance the buffer's bb_pos 8 bytes to skip past\n            // the now-removed page_id field\n            if (version < MetadataVersion.V4) {\n                b.bb_pos += (8 * (i + 1));\n            }\n            bufferRegions[++j] = BufferRegion.decode(b);\n        }\n    }\n    return bufferRegions;\n}\n/** @ignore */\nfunction decodeSchemaFields(schema, dictionaries) {\n    const fields = [];\n    for (let f, i = -1, j = -1, n = schema.fieldsLength(); ++i < n;) {\n        if (f = schema.fields(i)) {\n            fields[++j] = Field.decode(f, dictionaries);\n        }\n    }\n    return fields;\n}\n/** @ignore */\nfunction decodeFieldChildren(field, dictionaries) {\n    const children = [];\n    for (let f, i = -1, j = -1, n = field.childrenLength(); ++i < n;) {\n        if (f = field.children(i)) {\n            children[++j] = Field.decode(f, dictionaries);\n        }\n    }\n    return children;\n}\n/** @ignore */\nfunction decodeField(f, dictionaries) {\n    let id;\n    let field;\n    let type;\n    let keys;\n    let dictType;\n    let dictMeta;\n    // If no dictionary encoding\n    if (!dictionaries || !(dictMeta = f.dictionary())) {\n        type = decodeFieldType(f, decodeFieldChildren(f, dictionaries));\n        field = new Field(f.name(), type, f.nullable(), decodeCustomMetadata(f));\n    }\n    // If dictionary encoded and the first time we've seen this dictionary id, decode\n    // the data type and child fields, then wrap in a Dictionary type and insert the\n    // data type into the dictionary types map.\n    else if (!dictionaries.has(id = bigIntToNumber(dictMeta.id()))) {\n        // a dictionary index defaults to signed 32 bit int if unspecified\n        keys = (keys = dictMeta.indexType()) ? decodeIndexType(keys) : new Int32();\n        dictionaries.set(id, type = decodeFieldType(f, decodeFieldChildren(f, dictionaries)));\n        dictType = new Dictionary(type, keys, id, dictMeta.isOrdered());\n        field = new Field(f.name(), dictType, f.nullable(), decodeCustomMetadata(f));\n    }\n    // If dictionary encoded, and have already seen this dictionary Id in the schema, then reuse the\n    // data type and wrap in a new Dictionary type and field.\n    else {\n        // a dictionary index defaults to signed 32 bit int if unspecified\n        keys = (keys = dictMeta.indexType()) ? decodeIndexType(keys) : new Int32();\n        dictType = new Dictionary(dictionaries.get(id), keys, id, dictMeta.isOrdered());\n        field = new Field(f.name(), dictType, f.nullable(), decodeCustomMetadata(f));\n    }\n    return field || null;\n}\n/** @ignore */\nfunction decodeCustomMetadata(parent) {\n    const data = new Map();\n    if (parent) {\n        for (let entry, key, i = -1, n = Math.trunc(parent.customMetadataLength()); ++i < n;) {\n            if ((entry = parent.customMetadata(i)) && (key = entry.key()) != null) {\n                data.set(key, entry.value());\n            }\n        }\n    }\n    return data;\n}\n/** @ignore */\nfunction decodeIndexType(_type) {\n    return new Int(_type.isSigned(), _type.bitWidth());\n}\n/** @ignore */\nfunction decodeFieldType(f, children) {\n    const typeId = f.typeType();\n    switch (typeId) {\n        case Type['NONE']: return new Null();\n        case Type['Null']: return new Null();\n        case Type['Binary']: return new Binary();\n        case Type['LargeBinary']: return new LargeBinary();\n        case Type['Utf8']: return new Utf8();\n        case Type['LargeUtf8']: return new LargeUtf8();\n        case Type['Bool']: return new Bool();\n        case Type['List']: return new List((children || [])[0]);\n        case Type['Struct_']: return new Struct(children || []);\n    }\n    switch (typeId) {\n        case Type['Int']: {\n            const t = f.type(new _Int());\n            return new Int(t.isSigned(), t.bitWidth());\n        }\n        case Type['FloatingPoint']: {\n            const t = f.type(new _FloatingPoint());\n            return new Float(t.precision());\n        }\n        case Type['Decimal']: {\n            const t = f.type(new _Decimal());\n            return new Decimal(t.scale(), t.precision(), t.bitWidth());\n        }\n        case Type['Date']: {\n            const t = f.type(new _Date());\n            return new Date_(t.unit());\n        }\n        case Type['Time']: {\n            const t = f.type(new _Time());\n            return new Time(t.unit(), t.bitWidth());\n        }\n        case Type['Timestamp']: {\n            const t = f.type(new _Timestamp());\n            return new Timestamp(t.unit(), t.timezone());\n        }\n        case Type['Interval']: {\n            const t = f.type(new _Interval());\n            return new Interval(t.unit());\n        }\n        case Type['Duration']: {\n            const t = f.type(new _Duration());\n            return new Duration(t.unit());\n        }\n        case Type['Union']: {\n            const t = f.type(new _Union());\n            return new Union(t.mode(), t.typeIdsArray() || [], children || []);\n        }\n        case Type['FixedSizeBinary']: {\n            const t = f.type(new _FixedSizeBinary());\n            return new FixedSizeBinary(t.byteWidth());\n        }\n        case Type['FixedSizeList']: {\n            const t = f.type(new _FixedSizeList());\n            return new FixedSizeList(t.listSize(), (children || [])[0]);\n        }\n        case Type['Map']: {\n            const t = f.type(new _Map());\n            return new Map_((children || [])[0], t.keysSorted());\n        }\n    }\n    throw new Error(`Unrecognized type: \"${Type[typeId]}\" (${typeId})`);\n}\n/** @ignore */\nfunction encodeSchema(b, schema) {\n    const fieldOffsets = schema.fields.map((f) => Field.encode(b, f));\n    _Schema.startFieldsVector(b, fieldOffsets.length);\n    const fieldsVectorOffset = _Schema.createFieldsVector(b, fieldOffsets);\n    const metadataOffset = !(schema.metadata && schema.metadata.size > 0) ? -1 :\n        _Schema.createCustomMetadataVector(b, [...schema.metadata].map(([k, v]) => {\n            const key = b.createString(`${k}`);\n            const val = b.createString(`${v}`);\n            _KeyValue.startKeyValue(b);\n            _KeyValue.addKey(b, key);\n            _KeyValue.addValue(b, val);\n            return _KeyValue.endKeyValue(b);\n        }));\n    _Schema.startSchema(b);\n    _Schema.addFields(b, fieldsVectorOffset);\n    _Schema.addEndianness(b, platformIsLittleEndian ? _Endianness.Little : _Endianness.Big);\n    if (metadataOffset !== -1) {\n        _Schema.addCustomMetadata(b, metadataOffset);\n    }\n    return _Schema.endSchema(b);\n}\n/** @ignore */\nfunction encodeField(b, field) {\n    let nameOffset = -1;\n    let typeOffset = -1;\n    let dictionaryOffset = -1;\n    const type = field.type;\n    let typeId = field.typeId;\n    if (!DataType.isDictionary(type)) {\n        typeOffset = typeAssembler.visit(type, b);\n    }\n    else {\n        typeId = type.dictionary.typeId;\n        dictionaryOffset = typeAssembler.visit(type, b);\n        typeOffset = typeAssembler.visit(type.dictionary, b);\n    }\n    const childOffsets = (type.children || []).map((f) => Field.encode(b, f));\n    const childrenVectorOffset = _Field.createChildrenVector(b, childOffsets);\n    const metadataOffset = !(field.metadata && field.metadata.size > 0) ? -1 :\n        _Field.createCustomMetadataVector(b, [...field.metadata].map(([k, v]) => {\n            const key = b.createString(`${k}`);\n            const val = b.createString(`${v}`);\n            _KeyValue.startKeyValue(b);\n            _KeyValue.addKey(b, key);\n            _KeyValue.addValue(b, val);\n            return _KeyValue.endKeyValue(b);\n        }));\n    if (field.name) {\n        nameOffset = b.createString(field.name);\n    }\n    _Field.startField(b);\n    _Field.addType(b, typeOffset);\n    _Field.addTypeType(b, typeId);\n    _Field.addChildren(b, childrenVectorOffset);\n    _Field.addNullable(b, !!field.nullable);\n    if (nameOffset !== -1) {\n        _Field.addName(b, nameOffset);\n    }\n    if (dictionaryOffset !== -1) {\n        _Field.addDictionary(b, dictionaryOffset);\n    }\n    if (metadataOffset !== -1) {\n        _Field.addCustomMetadata(b, metadataOffset);\n    }\n    return _Field.endField(b);\n}\n/** @ignore */\nfunction encodeRecordBatch(b, recordBatch) {\n    const nodes = recordBatch.nodes || [];\n    const buffers = recordBatch.buffers || [];\n    _RecordBatch.startNodesVector(b, nodes.length);\n    for (const n of nodes.slice().reverse())\n        FieldNode.encode(b, n);\n    const nodesVectorOffset = b.endVector();\n    _RecordBatch.startBuffersVector(b, buffers.length);\n    for (const b_ of buffers.slice().reverse())\n        BufferRegion.encode(b, b_);\n    const buffersVectorOffset = b.endVector();\n    _RecordBatch.startRecordBatch(b);\n    _RecordBatch.addLength(b, BigInt(recordBatch.length));\n    _RecordBatch.addNodes(b, nodesVectorOffset);\n    _RecordBatch.addBuffers(b, buffersVectorOffset);\n    return _RecordBatch.endRecordBatch(b);\n}\n/** @ignore */\nfunction encodeDictionaryBatch(b, dictionaryBatch) {\n    const dataOffset = RecordBatch.encode(b, dictionaryBatch.data);\n    _DictionaryBatch.startDictionaryBatch(b);\n    _DictionaryBatch.addId(b, BigInt(dictionaryBatch.id));\n    _DictionaryBatch.addIsDelta(b, dictionaryBatch.isDelta);\n    _DictionaryBatch.addData(b, dataOffset);\n    return _DictionaryBatch.endDictionaryBatch(b);\n}\n/** @ignore */\nfunction encodeFieldNode(b, node) {\n    return _FieldNode.createFieldNode(b, BigInt(node.length), BigInt(node.nullCount));\n}\n/** @ignore */\nfunction encodeBufferRegion(b, node) {\n    return _Buffer.createBuffer(b, BigInt(node.offset), BigInt(node.length));\n}\n/** @ignore */\nconst platformIsLittleEndian = (() => {\n    const buffer = new ArrayBuffer(2);\n    new DataView(buffer).setInt16(0, 256, true /* littleEndian */);\n    // Int16Array uses the platform's endianness.\n    return new Int16Array(buffer)[0] === 256;\n})();\n\n//# sourceMappingURL=message.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { __awaiter } from \"tslib\";\nimport { MessageHeader } from '../enum.mjs';\nimport { ByteBuffer } from 'flatbuffers';\nimport { Message } from './metadata/message.mjs';\nimport { isFileHandle } from '../util/compat.mjs';\nimport { AsyncRandomAccessFile } from '../io/file.mjs';\nimport { toUint8Array } from '../util/buffer.mjs';\nimport { ByteStream, AsyncByteStream } from '../io/stream.mjs';\nimport { ArrowJSON, ITERATOR_DONE } from '../io/interfaces.mjs';\n/** @ignore */ const invalidMessageType = (type) => `Expected ${MessageHeader[type]} Message in stream, but was null or length 0.`;\n/** @ignore */ const nullMessage = (type) => `Header pointer of flatbuffer-encoded ${MessageHeader[type]} Message is null or length 0.`;\n/** @ignore */ const invalidMessageMetadata = (expected, actual) => `Expected to read ${expected} metadata bytes, but only read ${actual}.`;\n/** @ignore */ const invalidMessageBodyLength = (expected, actual) => `Expected to read ${expected} bytes for message body, but only read ${actual}.`;\n/** @ignore */\nexport class MessageReader {\n    constructor(source) {\n        this.source = source instanceof ByteStream ? source : new ByteStream(source);\n    }\n    [Symbol.iterator]() { return this; }\n    next() {\n        let r;\n        if ((r = this.readMetadataLength()).done) {\n            return ITERATOR_DONE;\n        }\n        // ARROW-6313: If the first 4 bytes are continuation indicator (-1), read\n        // the next 4 for the 32-bit metadata length. Otherwise, assume this is a\n        // pre-v0.15 message, where the first 4 bytes are the metadata length.\n        if ((r.value === -1) &&\n            (r = this.readMetadataLength()).done) {\n            return ITERATOR_DONE;\n        }\n        if ((r = this.readMetadata(r.value)).done) {\n            return ITERATOR_DONE;\n        }\n        return r;\n    }\n    throw(value) { return this.source.throw(value); }\n    return(value) { return this.source.return(value); }\n    readMessage(type) {\n        let r;\n        if ((r = this.next()).done) {\n            return null;\n        }\n        if ((type != null) && r.value.headerType !== type) {\n            throw new Error(invalidMessageType(type));\n        }\n        return r.value;\n    }\n    readMessageBody(bodyLength) {\n        if (bodyLength <= 0) {\n            return new Uint8Array(0);\n        }\n        const buf = toUint8Array(this.source.read(bodyLength));\n        if (buf.byteLength < bodyLength) {\n            throw new Error(invalidMessageBodyLength(bodyLength, buf.byteLength));\n        }\n        // 1. Work around bugs in fs.ReadStream's internal Buffer pooling, see: https://github.com/nodejs/node/issues/24817\n        // 2. Work around https://github.com/whatwg/streams/blob/0ebe4b042e467d9876d80ae045de3843092ad797/reference-implementation/lib/helpers.js#L126\n        return /* 1. */ (buf.byteOffset % 8 === 0) &&\n            /* 2. */ (buf.byteOffset + buf.byteLength) <= buf.buffer.byteLength ? buf : buf.slice();\n    }\n    readSchema(throwIfNull = false) {\n        const type = MessageHeader.Schema;\n        const message = this.readMessage(type);\n        const schema = message === null || message === void 0 ? void 0 : message.header();\n        if (throwIfNull && !schema) {\n            throw new Error(nullMessage(type));\n        }\n        return schema;\n    }\n    readMetadataLength() {\n        const buf = this.source.read(PADDING);\n        const bb = buf && new ByteBuffer(buf);\n        const len = (bb === null || bb === void 0 ? void 0 : bb.readInt32(0)) || 0;\n        return { done: len === 0, value: len };\n    }\n    readMetadata(metadataLength) {\n        const buf = this.source.read(metadataLength);\n        if (!buf) {\n            return ITERATOR_DONE;\n        }\n        if (buf.byteLength < metadataLength) {\n            throw new Error(invalidMessageMetadata(metadataLength, buf.byteLength));\n        }\n        return { done: false, value: Message.decode(buf) };\n    }\n}\n/** @ignore */\nexport class AsyncMessageReader {\n    constructor(source, byteLength) {\n        this.source = source instanceof AsyncByteStream ? source\n            : isFileHandle(source)\n                ? new AsyncRandomAccessFile(source, byteLength)\n                : new AsyncByteStream(source);\n    }\n    [Symbol.asyncIterator]() { return this; }\n    next() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let r;\n            if ((r = yield this.readMetadataLength()).done) {\n                return ITERATOR_DONE;\n            }\n            // ARROW-6313: If the first 4 bytes are continuation indicator (-1), read\n            // the next 4 for the 32-bit metadata length. Otherwise, assume this is a\n            // pre-v0.15 message, where the first 4 bytes are the metadata length.\n            if ((r.value === -1) &&\n                (r = yield this.readMetadataLength()).done) {\n                return ITERATOR_DONE;\n            }\n            if ((r = yield this.readMetadata(r.value)).done) {\n                return ITERATOR_DONE;\n            }\n            return r;\n        });\n    }\n    throw(value) {\n        return __awaiter(this, void 0, void 0, function* () { return yield this.source.throw(value); });\n    }\n    return(value) {\n        return __awaiter(this, void 0, void 0, function* () { return yield this.source.return(value); });\n    }\n    readMessage(type) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let r;\n            if ((r = yield this.next()).done) {\n                return null;\n            }\n            if ((type != null) && r.value.headerType !== type) {\n                throw new Error(invalidMessageType(type));\n            }\n            return r.value;\n        });\n    }\n    readMessageBody(bodyLength) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (bodyLength <= 0) {\n                return new Uint8Array(0);\n            }\n            const buf = toUint8Array(yield this.source.read(bodyLength));\n            if (buf.byteLength < bodyLength) {\n                throw new Error(invalidMessageBodyLength(bodyLength, buf.byteLength));\n            }\n            // 1. Work around bugs in fs.ReadStream's internal Buffer pooling, see: https://github.com/nodejs/node/issues/24817\n            // 2. Work around https://github.com/whatwg/streams/blob/0ebe4b042e467d9876d80ae045de3843092ad797/reference-implementation/lib/helpers.js#L126\n            return /* 1. */ (buf.byteOffset % 8 === 0) &&\n                /* 2. */ (buf.byteOffset + buf.byteLength) <= buf.buffer.byteLength ? buf : buf.slice();\n        });\n    }\n    readSchema() {\n        return __awaiter(this, arguments, void 0, function* (throwIfNull = false) {\n            const type = MessageHeader.Schema;\n            const message = yield this.readMessage(type);\n            const schema = message === null || message === void 0 ? void 0 : message.header();\n            if (throwIfNull && !schema) {\n                throw new Error(nullMessage(type));\n            }\n            return schema;\n        });\n    }\n    readMetadataLength() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const buf = yield this.source.read(PADDING);\n            const bb = buf && new ByteBuffer(buf);\n            const len = (bb === null || bb === void 0 ? void 0 : bb.readInt32(0)) || 0;\n            return { done: len === 0, value: len };\n        });\n    }\n    readMetadata(metadataLength) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const buf = yield this.source.read(metadataLength);\n            if (!buf) {\n                return ITERATOR_DONE;\n            }\n            if (buf.byteLength < metadataLength) {\n                throw new Error(invalidMessageMetadata(metadataLength, buf.byteLength));\n            }\n            return { done: false, value: Message.decode(buf) };\n        });\n    }\n}\n/** @ignore */\nexport class JSONMessageReader extends MessageReader {\n    constructor(source) {\n        super(new Uint8Array(0));\n        this._schema = false;\n        this._body = [];\n        this._batchIndex = 0;\n        this._dictionaryIndex = 0;\n        this._json = source instanceof ArrowJSON ? source : new ArrowJSON(source);\n    }\n    next() {\n        const { _json } = this;\n        if (!this._schema) {\n            this._schema = true;\n            const message = Message.fromJSON(_json.schema, MessageHeader.Schema);\n            return { done: false, value: message };\n        }\n        if (this._dictionaryIndex < _json.dictionaries.length) {\n            const batch = _json.dictionaries[this._dictionaryIndex++];\n            this._body = batch['data']['columns'];\n            const message = Message.fromJSON(batch, MessageHeader.DictionaryBatch);\n            return { done: false, value: message };\n        }\n        if (this._batchIndex < _json.batches.length) {\n            const batch = _json.batches[this._batchIndex++];\n            this._body = batch['columns'];\n            const message = Message.fromJSON(batch, MessageHeader.RecordBatch);\n            return { done: false, value: message };\n        }\n        this._body = [];\n        return ITERATOR_DONE;\n    }\n    readMessageBody(_bodyLength) {\n        return flattenDataSources(this._body);\n        function flattenDataSources(xs) {\n            return (xs || []).reduce((buffers, column) => [\n                ...buffers,\n                ...(column['VALIDITY'] && [column['VALIDITY']] || []),\n                ...(column['TYPE_ID'] && [column['TYPE_ID']] || []),\n                ...(column['OFFSET'] && [column['OFFSET']] || []),\n                ...(column['DATA'] && [column['DATA']] || []),\n                ...flattenDataSources(column['children'])\n            ], []);\n        }\n    }\n    readMessage(type) {\n        let r;\n        if ((r = this.next()).done) {\n            return null;\n        }\n        if ((type != null) && r.value.headerType !== type) {\n            throw new Error(invalidMessageType(type));\n        }\n        return r.value;\n    }\n    readSchema() {\n        const type = MessageHeader.Schema;\n        const message = this.readMessage(type);\n        const schema = message === null || message === void 0 ? void 0 : message.header();\n        if (!message || !schema) {\n            throw new Error(nullMessage(type));\n        }\n        return schema;\n    }\n}\n/** @ignore */\nexport const PADDING = 4;\n/** @ignore */\nexport const MAGIC_STR = 'ARROW1';\n/** @ignore */\nexport const MAGIC = new Uint8Array(MAGIC_STR.length);\nfor (let i = 0; i < MAGIC_STR.length; i += 1) {\n    MAGIC[i] = MAGIC_STR.codePointAt(i);\n}\n/** @ignore */\nexport function checkForMagicArrowString(buffer, index = 0) {\n    for (let i = -1, n = MAGIC.length; ++i < n;) {\n        if (MAGIC[i] !== buffer[index + i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/** @ignore */\nexport const magicLength = MAGIC.length;\n/** @ignore */\nexport const magicAndPadding = magicLength + PADDING;\n/** @ignore */\nexport const magicX2AndPadding = magicLength * 2 + PADDING;\n\n//# sourceMappingURL=message.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { __asyncDelegator, __asyncGenerator, __asyncValues, __await, __awaiter } from \"tslib\";\nimport { makeData } from '../data.mjs';\nimport { Vector } from '../vector.mjs';\nimport { Struct } from '../type.mjs';\nimport { MessageHeader } from '../enum.mjs';\nimport { Footer } from './metadata/file.mjs';\nimport streamAdapters from '../io/adapters.mjs';\nimport { ByteStream, AsyncByteStream } from '../io/stream.mjs';\nimport { RandomAccessFile, AsyncRandomAccessFile } from '../io/file.mjs';\nimport { VectorLoader, JSONVectorLoader } from '../visitor/vectorloader.mjs';\nimport { RecordBatch, _InternalEmptyPlaceholderRecordBatch } from '../recordbatch.mjs';\nimport { ITERATOR_DONE, ReadableInterop, } from '../io/interfaces.mjs';\nimport { MessageReader, AsyncMessageReader, JSONMessageReader, checkForMagicArrowString, magicLength, magicAndPadding, magicX2AndPadding } from './message.mjs';\nimport { isPromise, isIterable, isAsyncIterable, isIteratorResult, isArrowJSON, isFileHandle, isFetchResponse, isReadableDOMStream, isReadableNodeStream } from '../util/compat.mjs';\nexport class RecordBatchReader extends ReadableInterop {\n    constructor(impl) {\n        super();\n        this._impl = impl;\n    }\n    get closed() { return this._impl.closed; }\n    get schema() { return this._impl.schema; }\n    get autoDestroy() { return this._impl.autoDestroy; }\n    get dictionaries() { return this._impl.dictionaries; }\n    get numDictionaries() { return this._impl.numDictionaries; }\n    get numRecordBatches() { return this._impl.numRecordBatches; }\n    get footer() { return this._impl.isFile() ? this._impl.footer : null; }\n    isSync() { return this._impl.isSync(); }\n    isAsync() { return this._impl.isAsync(); }\n    isFile() { return this._impl.isFile(); }\n    isStream() { return this._impl.isStream(); }\n    next() {\n        return this._impl.next();\n    }\n    throw(value) {\n        return this._impl.throw(value);\n    }\n    return(value) {\n        return this._impl.return(value);\n    }\n    cancel() {\n        return this._impl.cancel();\n    }\n    reset(schema) {\n        this._impl.reset(schema);\n        this._DOMStream = undefined;\n        this._nodeStream = undefined;\n        return this;\n    }\n    open(options) {\n        const opening = this._impl.open(options);\n        return isPromise(opening) ? opening.then(() => this) : this;\n    }\n    readRecordBatch(index) {\n        return this._impl.isFile() ? this._impl.readRecordBatch(index) : null;\n    }\n    [Symbol.iterator]() {\n        return this._impl[Symbol.iterator]();\n    }\n    [Symbol.asyncIterator]() {\n        return this._impl[Symbol.asyncIterator]();\n    }\n    toDOMStream() {\n        return streamAdapters.toDOMStream((this.isSync()\n            ? { [Symbol.iterator]: () => this }\n            : { [Symbol.asyncIterator]: () => this }));\n    }\n    toNodeStream() {\n        return streamAdapters.toNodeStream((this.isSync()\n            ? { [Symbol.iterator]: () => this }\n            : { [Symbol.asyncIterator]: () => this }), { objectMode: true });\n    }\n    /** @nocollapse */\n    // @ts-ignore\n    static throughNode(options) {\n        throw new Error(`\"throughNode\" not available in this environment`);\n    }\n    /** @nocollapse */\n    static throughDOM(\n    // @ts-ignore\n    writableStrategy, \n    // @ts-ignore\n    readableStrategy) {\n        throw new Error(`\"throughDOM\" not available in this environment`);\n    }\n    /** @nocollapse */\n    static from(source) {\n        if (source instanceof RecordBatchReader) {\n            return source;\n        }\n        else if (isArrowJSON(source)) {\n            return fromArrowJSON(source);\n        }\n        else if (isFileHandle(source)) {\n            return fromFileHandle(source);\n        }\n        else if (isPromise(source)) {\n            return (() => __awaiter(this, void 0, void 0, function* () { return yield RecordBatchReader.from(yield source); }))();\n        }\n        else if (isFetchResponse(source) || isReadableDOMStream(source) || isReadableNodeStream(source) || isAsyncIterable(source)) {\n            return fromAsyncByteStream(new AsyncByteStream(source));\n        }\n        return fromByteStream(new ByteStream(source));\n    }\n    /** @nocollapse */\n    static readAll(source) {\n        if (source instanceof RecordBatchReader) {\n            return source.isSync() ? readAllSync(source) : readAllAsync(source);\n        }\n        else if (isArrowJSON(source) || ArrayBuffer.isView(source) || isIterable(source) || isIteratorResult(source)) {\n            return readAllSync(source);\n        }\n        return readAllAsync(source);\n    }\n}\n//\n// Since TS is a structural type system, we define the following subclass stubs\n// so that concrete types exist to associate with the interfaces below.\n//\n// The implementation for each RecordBatchReader is hidden away in the set of\n// `RecordBatchReaderImpl` classes in the second half of this file. This allows\n// us to export a single RecordBatchReader class, and swap out the impl based\n// on the io primitives or underlying arrow (JSON, file, or stream) at runtime.\n//\n// Async/await makes our job a bit harder, since it forces everything to be\n// either fully sync or fully async. This is why the logic for the reader impls\n// has been duplicated into both sync and async variants. Since the RBR\n// delegates to its impl, an RBR with an AsyncRecordBatchFileReaderImpl for\n// example will return async/await-friendly Promises, but one with a (sync)\n// RecordBatchStreamReaderImpl will always return values. Nothing should be\n// different about their logic, aside from the async handling. This is also why\n// this code looks highly structured, as it should be nearly identical and easy\n// to follow.\n//\n/** @ignore */\nexport class RecordBatchStreamReader extends RecordBatchReader {\n    constructor(_impl) {\n        super(_impl);\n        this._impl = _impl;\n    }\n    readAll() { return [...this]; }\n    [Symbol.iterator]() { return this._impl[Symbol.iterator](); }\n    [Symbol.asyncIterator]() { return __asyncGenerator(this, arguments, function* _a() { yield __await(yield* __asyncDelegator(__asyncValues(this[Symbol.iterator]()))); }); }\n}\n/** @ignore */\nexport class AsyncRecordBatchStreamReader extends RecordBatchReader {\n    constructor(_impl) {\n        super(_impl);\n        this._impl = _impl;\n    }\n    readAll() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, e_1, _b, _c;\n            const batches = new Array();\n            try {\n                for (var _d = true, _e = __asyncValues(this), _f; _f = yield _e.next(), _a = _f.done, !_a; _d = true) {\n                    _c = _f.value;\n                    _d = false;\n                    const batch = _c;\n                    batches.push(batch);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (!_d && !_a && (_b = _e.return)) yield _b.call(_e);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return batches;\n        });\n    }\n    [Symbol.iterator]() { throw new Error(`AsyncRecordBatchStreamReader is not Iterable`); }\n    [Symbol.asyncIterator]() { return this._impl[Symbol.asyncIterator](); }\n}\n/** @ignore */\nexport class RecordBatchFileReader extends RecordBatchStreamReader {\n    constructor(_impl) {\n        super(_impl);\n        this._impl = _impl;\n    }\n}\n/** @ignore */\nexport class AsyncRecordBatchFileReader extends AsyncRecordBatchStreamReader {\n    constructor(_impl) {\n        super(_impl);\n        this._impl = _impl;\n    }\n}\n/** @ignore */\nclass RecordBatchReaderImpl {\n    get numDictionaries() { return this._dictionaryIndex; }\n    get numRecordBatches() { return this._recordBatchIndex; }\n    constructor(dictionaries = new Map()) {\n        this.closed = false;\n        this.autoDestroy = true;\n        this._dictionaryIndex = 0;\n        this._recordBatchIndex = 0;\n        this.dictionaries = dictionaries;\n    }\n    isSync() { return false; }\n    isAsync() { return false; }\n    isFile() { return false; }\n    isStream() { return false; }\n    reset(schema) {\n        this._dictionaryIndex = 0;\n        this._recordBatchIndex = 0;\n        this.schema = schema;\n        this.dictionaries = new Map();\n        return this;\n    }\n    _loadRecordBatch(header, body) {\n        const children = this._loadVectors(header, body, this.schema.fields);\n        const data = makeData({ type: new Struct(this.schema.fields), length: header.length, children });\n        return new RecordBatch(this.schema, data);\n    }\n    _loadDictionaryBatch(header, body) {\n        const { id, isDelta } = header;\n        const { dictionaries, schema } = this;\n        const dictionary = dictionaries.get(id);\n        const type = schema.dictionaries.get(id);\n        const data = this._loadVectors(header.data, body, [type]);\n        return (dictionary && isDelta ? dictionary.concat(new Vector(data)) :\n            new Vector(data)).memoize();\n    }\n    _loadVectors(header, body, types) {\n        return new VectorLoader(body, header.nodes, header.buffers, this.dictionaries, this.schema.metadataVersion).visitMany(types);\n    }\n}\n/** @ignore */\nclass RecordBatchStreamReaderImpl extends RecordBatchReaderImpl {\n    constructor(source, dictionaries) {\n        super(dictionaries);\n        this._reader = !isArrowJSON(source)\n            ? new MessageReader(this._handle = source)\n            : new JSONMessageReader(this._handle = source);\n    }\n    isSync() { return true; }\n    isStream() { return true; }\n    [Symbol.iterator]() {\n        return this;\n    }\n    cancel() {\n        if (!this.closed && (this.closed = true)) {\n            this.reset()._reader.return();\n            this._reader = null;\n            this.dictionaries = null;\n        }\n    }\n    open(options) {\n        if (!this.closed) {\n            this.autoDestroy = shouldAutoDestroy(this, options);\n            if (!(this.schema || (this.schema = this._reader.readSchema()))) {\n                this.cancel();\n            }\n        }\n        return this;\n    }\n    throw(value) {\n        if (!this.closed && this.autoDestroy && (this.closed = true)) {\n            return this.reset()._reader.throw(value);\n        }\n        return ITERATOR_DONE;\n    }\n    return(value) {\n        if (!this.closed && this.autoDestroy && (this.closed = true)) {\n            return this.reset()._reader.return(value);\n        }\n        return ITERATOR_DONE;\n    }\n    next() {\n        if (this.closed) {\n            return ITERATOR_DONE;\n        }\n        let message;\n        const { _reader: reader } = this;\n        while (message = this._readNextMessageAndValidate()) {\n            if (message.isSchema()) {\n                this.reset(message.header());\n            }\n            else if (message.isRecordBatch()) {\n                this._recordBatchIndex++;\n                const header = message.header();\n                const buffer = reader.readMessageBody(message.bodyLength);\n                const recordBatch = this._loadRecordBatch(header, buffer);\n                return { done: false, value: recordBatch };\n            }\n            else if (message.isDictionaryBatch()) {\n                this._dictionaryIndex++;\n                const header = message.header();\n                const buffer = reader.readMessageBody(message.bodyLength);\n                const vector = this._loadDictionaryBatch(header, buffer);\n                this.dictionaries.set(header.id, vector);\n            }\n        }\n        if (this.schema && this._recordBatchIndex === 0) {\n            this._recordBatchIndex++;\n            return { done: false, value: new _InternalEmptyPlaceholderRecordBatch(this.schema) };\n        }\n        return this.return();\n    }\n    _readNextMessageAndValidate(type) {\n        return this._reader.readMessage(type);\n    }\n}\n/** @ignore */\nclass AsyncRecordBatchStreamReaderImpl extends RecordBatchReaderImpl {\n    constructor(source, dictionaries) {\n        super(dictionaries);\n        this._reader = new AsyncMessageReader(this._handle = source);\n    }\n    isAsync() { return true; }\n    isStream() { return true; }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    cancel() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.closed && (this.closed = true)) {\n                yield this.reset()._reader.return();\n                this._reader = null;\n                this.dictionaries = null;\n            }\n        });\n    }\n    open(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.closed) {\n                this.autoDestroy = shouldAutoDestroy(this, options);\n                if (!(this.schema || (this.schema = (yield this._reader.readSchema())))) {\n                    yield this.cancel();\n                }\n            }\n            return this;\n        });\n    }\n    throw(value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.closed && this.autoDestroy && (this.closed = true)) {\n                return yield this.reset()._reader.throw(value);\n            }\n            return ITERATOR_DONE;\n        });\n    }\n    return(value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.closed && this.autoDestroy && (this.closed = true)) {\n                return yield this.reset()._reader.return(value);\n            }\n            return ITERATOR_DONE;\n        });\n    }\n    next() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.closed) {\n                return ITERATOR_DONE;\n            }\n            let message;\n            const { _reader: reader } = this;\n            while (message = yield this._readNextMessageAndValidate()) {\n                if (message.isSchema()) {\n                    yield this.reset(message.header());\n                }\n                else if (message.isRecordBatch()) {\n                    this._recordBatchIndex++;\n                    const header = message.header();\n                    const buffer = yield reader.readMessageBody(message.bodyLength);\n                    const recordBatch = this._loadRecordBatch(header, buffer);\n                    return { done: false, value: recordBatch };\n                }\n                else if (message.isDictionaryBatch()) {\n                    this._dictionaryIndex++;\n                    const header = message.header();\n                    const buffer = yield reader.readMessageBody(message.bodyLength);\n                    const vector = this._loadDictionaryBatch(header, buffer);\n                    this.dictionaries.set(header.id, vector);\n                }\n            }\n            if (this.schema && this._recordBatchIndex === 0) {\n                this._recordBatchIndex++;\n                return { done: false, value: new _InternalEmptyPlaceholderRecordBatch(this.schema) };\n            }\n            return yield this.return();\n        });\n    }\n    _readNextMessageAndValidate(type) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this._reader.readMessage(type);\n        });\n    }\n}\n/** @ignore */\nclass RecordBatchFileReaderImpl extends RecordBatchStreamReaderImpl {\n    get footer() { return this._footer; }\n    get numDictionaries() { return this._footer ? this._footer.numDictionaries : 0; }\n    get numRecordBatches() { return this._footer ? this._footer.numRecordBatches : 0; }\n    constructor(source, dictionaries) {\n        super(source instanceof RandomAccessFile ? source : new RandomAccessFile(source), dictionaries);\n    }\n    isSync() { return true; }\n    isFile() { return true; }\n    open(options) {\n        if (!this.closed && !this._footer) {\n            this.schema = (this._footer = this._readFooter()).schema;\n            for (const block of this._footer.dictionaryBatches()) {\n                block && this._readDictionaryBatch(this._dictionaryIndex++);\n            }\n        }\n        return super.open(options);\n    }\n    readRecordBatch(index) {\n        var _a;\n        if (this.closed) {\n            return null;\n        }\n        if (!this._footer) {\n            this.open();\n        }\n        const block = (_a = this._footer) === null || _a === void 0 ? void 0 : _a.getRecordBatch(index);\n        if (block && this._handle.seek(block.offset)) {\n            const message = this._reader.readMessage(MessageHeader.RecordBatch);\n            if (message === null || message === void 0 ? void 0 : message.isRecordBatch()) {\n                const header = message.header();\n                const buffer = this._reader.readMessageBody(message.bodyLength);\n                const recordBatch = this._loadRecordBatch(header, buffer);\n                return recordBatch;\n            }\n        }\n        return null;\n    }\n    _readDictionaryBatch(index) {\n        var _a;\n        const block = (_a = this._footer) === null || _a === void 0 ? void 0 : _a.getDictionaryBatch(index);\n        if (block && this._handle.seek(block.offset)) {\n            const message = this._reader.readMessage(MessageHeader.DictionaryBatch);\n            if (message === null || message === void 0 ? void 0 : message.isDictionaryBatch()) {\n                const header = message.header();\n                const buffer = this._reader.readMessageBody(message.bodyLength);\n                const vector = this._loadDictionaryBatch(header, buffer);\n                this.dictionaries.set(header.id, vector);\n            }\n        }\n    }\n    _readFooter() {\n        const { _handle } = this;\n        const offset = _handle.size - magicAndPadding;\n        const length = _handle.readInt32(offset);\n        const buffer = _handle.readAt(offset - length, length);\n        return Footer.decode(buffer);\n    }\n    _readNextMessageAndValidate(type) {\n        var _a;\n        if (!this._footer) {\n            this.open();\n        }\n        if (this._footer && this._recordBatchIndex < this.numRecordBatches) {\n            const block = (_a = this._footer) === null || _a === void 0 ? void 0 : _a.getRecordBatch(this._recordBatchIndex);\n            if (block && this._handle.seek(block.offset)) {\n                return this._reader.readMessage(type);\n            }\n        }\n        return null;\n    }\n}\n/** @ignore */\nclass AsyncRecordBatchFileReaderImpl extends AsyncRecordBatchStreamReaderImpl {\n    get footer() { return this._footer; }\n    get numDictionaries() { return this._footer ? this._footer.numDictionaries : 0; }\n    get numRecordBatches() { return this._footer ? this._footer.numRecordBatches : 0; }\n    constructor(source, ...rest) {\n        const byteLength = typeof rest[0] !== 'number' ? rest.shift() : undefined;\n        const dictionaries = rest[0] instanceof Map ? rest.shift() : undefined;\n        super(source instanceof AsyncRandomAccessFile ? source : new AsyncRandomAccessFile(source, byteLength), dictionaries);\n    }\n    isFile() { return true; }\n    isAsync() { return true; }\n    open(options) {\n        const _super = Object.create(null, {\n            open: { get: () => super.open }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.closed && !this._footer) {\n                this.schema = (this._footer = yield this._readFooter()).schema;\n                for (const block of this._footer.dictionaryBatches()) {\n                    block && (yield this._readDictionaryBatch(this._dictionaryIndex++));\n                }\n            }\n            return yield _super.open.call(this, options);\n        });\n    }\n    readRecordBatch(index) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (this.closed) {\n                return null;\n            }\n            if (!this._footer) {\n                yield this.open();\n            }\n            const block = (_a = this._footer) === null || _a === void 0 ? void 0 : _a.getRecordBatch(index);\n            if (block && (yield this._handle.seek(block.offset))) {\n                const message = yield this._reader.readMessage(MessageHeader.RecordBatch);\n                if (message === null || message === void 0 ? void 0 : message.isRecordBatch()) {\n                    const header = message.header();\n                    const buffer = yield this._reader.readMessageBody(message.bodyLength);\n                    const recordBatch = this._loadRecordBatch(header, buffer);\n                    return recordBatch;\n                }\n            }\n            return null;\n        });\n    }\n    _readDictionaryBatch(index) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const block = (_a = this._footer) === null || _a === void 0 ? void 0 : _a.getDictionaryBatch(index);\n            if (block && (yield this._handle.seek(block.offset))) {\n                const message = yield this._reader.readMessage(MessageHeader.DictionaryBatch);\n                if (message === null || message === void 0 ? void 0 : message.isDictionaryBatch()) {\n                    const header = message.header();\n                    const buffer = yield this._reader.readMessageBody(message.bodyLength);\n                    const vector = this._loadDictionaryBatch(header, buffer);\n                    this.dictionaries.set(header.id, vector);\n                }\n            }\n        });\n    }\n    _readFooter() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { _handle } = this;\n            _handle._pending && (yield _handle._pending);\n            const offset = _handle.size - magicAndPadding;\n            const length = yield _handle.readInt32(offset);\n            const buffer = yield _handle.readAt(offset - length, length);\n            return Footer.decode(buffer);\n        });\n    }\n    _readNextMessageAndValidate(type) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._footer) {\n                yield this.open();\n            }\n            if (this._footer && this._recordBatchIndex < this.numRecordBatches) {\n                const block = this._footer.getRecordBatch(this._recordBatchIndex);\n                if (block && (yield this._handle.seek(block.offset))) {\n                    return yield this._reader.readMessage(type);\n                }\n            }\n            return null;\n        });\n    }\n}\n/** @ignore */\nclass RecordBatchJSONReaderImpl extends RecordBatchStreamReaderImpl {\n    constructor(source, dictionaries) {\n        super(source, dictionaries);\n    }\n    _loadVectors(header, body, types) {\n        return new JSONVectorLoader(body, header.nodes, header.buffers, this.dictionaries, this.schema.metadataVersion).visitMany(types);\n    }\n}\n//\n// Define some helper functions and static implementations down here. There's\n// a bit of branching in the static methods that can lead to the same routines\n// being executed, so we've broken those out here for readability.\n//\n/** @ignore */\nfunction shouldAutoDestroy(self, options) {\n    return options && (typeof options['autoDestroy'] === 'boolean') ? options['autoDestroy'] : self['autoDestroy'];\n}\n/** @ignore */\nfunction* readAllSync(source) {\n    const reader = RecordBatchReader.from(source);\n    try {\n        if (!reader.open({ autoDestroy: false }).closed) {\n            do {\n                yield reader;\n            } while (!(reader.reset().open()).closed);\n        }\n    }\n    finally {\n        reader.cancel();\n    }\n}\n/** @ignore */\nfunction readAllAsync(source) {\n    return __asyncGenerator(this, arguments, function* readAllAsync_1() {\n        const reader = yield __await(RecordBatchReader.from(source));\n        try {\n            if (!(yield __await(reader.open({ autoDestroy: false }))).closed) {\n                do {\n                    yield yield __await(reader);\n                } while (!(yield __await(reader.reset().open())).closed);\n            }\n        }\n        finally {\n            yield __await(reader.cancel());\n        }\n    });\n}\n/** @ignore */\nfunction fromArrowJSON(source) {\n    return new RecordBatchStreamReader(new RecordBatchJSONReaderImpl(source));\n}\n/** @ignore */\nfunction fromByteStream(source) {\n    const bytes = source.peek((magicLength + 7) & ~7);\n    return bytes && bytes.byteLength >= 4 ? !checkForMagicArrowString(bytes)\n        ? new RecordBatchStreamReader(new RecordBatchStreamReaderImpl(source))\n        : new RecordBatchFileReader(new RecordBatchFileReaderImpl(source.read()))\n        : new RecordBatchStreamReader(new RecordBatchStreamReaderImpl(function* () { }()));\n}\n/** @ignore */\nfunction fromAsyncByteStream(source) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const bytes = yield source.peek((magicLength + 7) & ~7);\n        return bytes && bytes.byteLength >= 4 ? !checkForMagicArrowString(bytes)\n            ? new AsyncRecordBatchStreamReader(new AsyncRecordBatchStreamReaderImpl(source))\n            : new RecordBatchFileReader(new RecordBatchFileReaderImpl(yield source.read()))\n            : new AsyncRecordBatchStreamReader(new AsyncRecordBatchStreamReaderImpl(function () { return __asyncGenerator(this, arguments, function* () { }); }()));\n    });\n}\n/** @ignore */\nfunction fromFileHandle(source) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { size } = yield source.stat();\n        const file = new AsyncRandomAccessFile(source, size);\n        if (size >= magicX2AndPadding && checkForMagicArrowString(yield file.readAt(0, (magicLength + 7) & ~7))) {\n            return new AsyncRecordBatchFileReader(new AsyncRecordBatchFileReaderImpl(file));\n        }\n        return new AsyncRecordBatchStreamReader(new AsyncRecordBatchStreamReaderImpl(file));\n    });\n}\n\n//# sourceMappingURL=reader.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Vector } from '../vector.mjs';\nimport { Visitor } from '../visitor.mjs';\nimport { UnionMode } from '../enum.mjs';\nimport { RecordBatch } from '../recordbatch.mjs';\nimport { rebaseValueOffsets } from '../util/buffer.mjs';\nimport { packBools, truncateBitmap } from '../util/bit.mjs';\nimport { BufferRegion, FieldNode } from '../ipc/metadata/message.mjs';\nimport { DataType, } from '../type.mjs';\nimport { bigIntToNumber } from '../util/bigint.mjs';\n/** @ignore */\nexport class VectorAssembler extends Visitor {\n    /** @nocollapse */\n    static assemble(...args) {\n        const unwrap = (nodes) => nodes.flatMap((node) => Array.isArray(node) ? unwrap(node) :\n            (node instanceof RecordBatch) ? node.data.children : node.data);\n        const assembler = new VectorAssembler();\n        assembler.visitMany(unwrap(args));\n        return assembler;\n    }\n    constructor() {\n        super();\n        this._byteLength = 0;\n        this._nodes = [];\n        this._buffers = [];\n        this._bufferRegions = [];\n    }\n    visit(data) {\n        if (data instanceof Vector) {\n            this.visitMany(data.data);\n            return this;\n        }\n        const { type } = data;\n        if (!DataType.isDictionary(type)) {\n            const { length } = data;\n            if (length > 2147483647) {\n                /* istanbul ignore next */\n                throw new RangeError('Cannot write arrays larger than 2^31 - 1 in length');\n            }\n            if (DataType.isUnion(type)) {\n                this.nodes.push(new FieldNode(length, 0));\n            }\n            else {\n                const { nullCount } = data;\n                if (!DataType.isNull(type)) {\n                    addBuffer.call(this, nullCount <= 0\n                        ? new Uint8Array(0) // placeholder validity buffer\n                        : truncateBitmap(data.offset, length, data.nullBitmap));\n                }\n                this.nodes.push(new FieldNode(length, nullCount));\n            }\n        }\n        return super.visit(data);\n    }\n    visitNull(_null) {\n        return this;\n    }\n    visitDictionary(data) {\n        // Assemble the indices here, Dictionary assembled separately.\n        return this.visit(data.clone(data.type.indices));\n    }\n    get nodes() { return this._nodes; }\n    get buffers() { return this._buffers; }\n    get byteLength() { return this._byteLength; }\n    get bufferRegions() { return this._bufferRegions; }\n}\n/** @ignore */\nfunction addBuffer(values) {\n    const byteLength = (values.byteLength + 7) & ~7; // Round up to a multiple of 8\n    this.buffers.push(values);\n    this.bufferRegions.push(new BufferRegion(this._byteLength, byteLength));\n    this._byteLength += byteLength;\n    return this;\n}\n/** @ignore */\nfunction assembleUnion(data) {\n    var _a;\n    const { type, length, typeIds, valueOffsets } = data;\n    // All Union Vectors have a typeIds buffer\n    addBuffer.call(this, typeIds);\n    // If this is a Sparse Union, treat it like all other Nested types\n    if (type.mode === UnionMode.Sparse) {\n        return assembleNestedVector.call(this, data);\n    }\n    else if (type.mode === UnionMode.Dense) {\n        // If this is a Dense Union, add the valueOffsets buffer and potentially slice the children\n        if (data.offset <= 0) {\n            // If the Vector hasn't been sliced, write the existing valueOffsets\n            addBuffer.call(this, valueOffsets);\n            // We can treat this like all other Nested types\n            return assembleNestedVector.call(this, data);\n        }\n        else {\n            // A sliced Dense Union is an unpleasant case. Because the offsets are different for\n            // each child vector, we need to \"rebase\" the valueOffsets for each child\n            // Union typeIds are not necessary 0-indexed\n            const shiftedOffsets = new Int32Array(length);\n            const childOffsets = Object.create(null);\n            const childLengths = Object.create(null);\n            // If we have a non-zero offset, then the value offsets do not start at\n            // zero. We must a) create a new offsets array with shifted offsets and\n            // b) slice the values array accordingly\n            for (let typeId, shift, index = -1; ++index < length;) {\n                if ((typeId = typeIds[index]) === undefined) {\n                    continue;\n                }\n                if ((shift = childOffsets[typeId]) === undefined) {\n                    shift = childOffsets[typeId] = valueOffsets[index];\n                }\n                shiftedOffsets[index] = valueOffsets[index] - shift;\n                childLengths[typeId] = ((_a = childLengths[typeId]) !== null && _a !== void 0 ? _a : 0) + 1;\n            }\n            addBuffer.call(this, shiftedOffsets);\n            // Slice and visit children accordingly\n            this.visitMany(data.children.map((child, childIndex) => {\n                const typeId = type.typeIds[childIndex];\n                const childOffset = childOffsets[typeId];\n                const childLength = childLengths[typeId];\n                return child.slice(childOffset, Math.min(length, childLength));\n            }));\n        }\n    }\n    return this;\n}\n/** @ignore */\nfunction assembleBoolVector(data) {\n    // Bool vector is a special case of FlatVector, as its data buffer needs to stay packed\n    let values;\n    if (data.nullCount >= data.length) {\n        // If all values are null, just insert a placeholder empty data buffer (fastest path)\n        return addBuffer.call(this, new Uint8Array(0));\n    }\n    else if ((values = data.values) instanceof Uint8Array) {\n        // If values is already a Uint8Array, slice the bitmap (fast path)\n        return addBuffer.call(this, truncateBitmap(data.offset, data.length, values));\n    }\n    // Otherwise if the underlying data *isn't* a Uint8Array, enumerate the\n    // values as bools and re-pack them into a Uint8Array. This code isn't\n    // reachable unless you're trying to manipulate the Data internals,\n    // we're only doing this for safety.\n    /* istanbul ignore next */\n    return addBuffer.call(this, packBools(data.values));\n}\n/** @ignore */\nfunction assembleFlatVector(data) {\n    return addBuffer.call(this, data.values.subarray(0, data.length * data.stride));\n}\n/** @ignore */\nfunction assembleFlatListVector(data) {\n    const { length, values, valueOffsets } = data;\n    const begin = bigIntToNumber(valueOffsets[0]);\n    const end = bigIntToNumber(valueOffsets[length]);\n    const byteLength = Math.min(end - begin, values.byteLength - begin);\n    // Push in the order FlatList types read their buffers\n    addBuffer.call(this, rebaseValueOffsets(-begin, length + 1, valueOffsets)); // valueOffsets buffer first\n    addBuffer.call(this, values.subarray(begin, begin + byteLength)); // sliced values buffer second\n    return this;\n}\n/** @ignore */\nfunction assembleListVector(data) {\n    const { length, valueOffsets } = data;\n    // If we have valueOffsets (MapVector, ListVector), push that buffer first\n    if (valueOffsets) {\n        const { [0]: begin, [length]: end } = valueOffsets;\n        addBuffer.call(this, rebaseValueOffsets(-begin, length + 1, valueOffsets));\n        // Then insert the List's values child\n        return this.visit(data.children[0].slice(begin, end - begin));\n    }\n    // Then insert the List's values child\n    return this.visit(data.children[0]);\n}\n/** @ignore */\nfunction assembleNestedVector(data) {\n    return this.visitMany(data.type.children.map((_, i) => data.children[i]).filter(Boolean))[0];\n}\nVectorAssembler.prototype.visitBool = assembleBoolVector;\nVectorAssembler.prototype.visitInt = assembleFlatVector;\nVectorAssembler.prototype.visitFloat = assembleFlatVector;\nVectorAssembler.prototype.visitUtf8 = assembleFlatListVector;\nVectorAssembler.prototype.visitLargeUtf8 = assembleFlatListVector;\nVectorAssembler.prototype.visitBinary = assembleFlatListVector;\nVectorAssembler.prototype.visitLargeBinary = assembleFlatListVector;\nVectorAssembler.prototype.visitFixedSizeBinary = assembleFlatVector;\nVectorAssembler.prototype.visitDate = assembleFlatVector;\nVectorAssembler.prototype.visitTimestamp = assembleFlatVector;\nVectorAssembler.prototype.visitTime = assembleFlatVector;\nVectorAssembler.prototype.visitDecimal = assembleFlatVector;\nVectorAssembler.prototype.visitList = assembleListVector;\nVectorAssembler.prototype.visitStruct = assembleNestedVector;\nVectorAssembler.prototype.visitUnion = assembleUnion;\nVectorAssembler.prototype.visitInterval = assembleFlatVector;\nVectorAssembler.prototype.visitDuration = assembleFlatVector;\nVectorAssembler.prototype.visitFixedSizeList = assembleListVector;\nVectorAssembler.prototype.visitMap = assembleListVector;\n\n//# sourceMappingURL=vectorassembler.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { __asyncValues, __awaiter } from \"tslib\";\nimport { Table } from '../table.mjs';\nimport { MAGIC } from './message.mjs';\nimport { Vector } from '../vector.mjs';\nimport { DataType } from '../type.mjs';\nimport { Message } from './metadata/message.mjs';\nimport * as metadata from './metadata/message.mjs';\nimport { FileBlock, Footer } from './metadata/file.mjs';\nimport { MessageHeader, MetadataVersion } from '../enum.mjs';\nimport { compareSchemas } from '../visitor/typecomparator.mjs';\nimport { AsyncByteQueue } from '../io/stream.mjs';\nimport { VectorAssembler } from '../visitor/vectorassembler.mjs';\nimport { JSONTypeAssembler } from '../visitor/jsontypeassembler.mjs';\nimport { JSONVectorAssembler } from '../visitor/jsonvectorassembler.mjs';\nimport { toUint8Array } from '../util/buffer.mjs';\nimport { RecordBatch, _InternalEmptyPlaceholderRecordBatch } from '../recordbatch.mjs';\nimport { ReadableInterop } from '../io/interfaces.mjs';\nimport { isPromise, isAsyncIterable, isWritableDOMStream, isWritableNodeStream, isIterable, isObject } from '../util/compat.mjs';\nexport class RecordBatchWriter extends ReadableInterop {\n    /** @nocollapse */\n    // @ts-ignore\n    static throughNode(options) {\n        throw new Error(`\"throughNode\" not available in this environment`);\n    }\n    /** @nocollapse */\n    static throughDOM(\n    // @ts-ignore\n    writableStrategy, \n    // @ts-ignore\n    readableStrategy) {\n        throw new Error(`\"throughDOM\" not available in this environment`);\n    }\n    constructor(options) {\n        super();\n        this._position = 0;\n        this._started = false;\n        // @ts-ignore\n        this._sink = new AsyncByteQueue();\n        this._schema = null;\n        this._dictionaryBlocks = [];\n        this._recordBatchBlocks = [];\n        this._seenDictionaries = new Map();\n        this._dictionaryDeltaOffsets = new Map();\n        isObject(options) || (options = { autoDestroy: true, writeLegacyIpcFormat: false });\n        this._autoDestroy = (typeof options.autoDestroy === 'boolean') ? options.autoDestroy : true;\n        this._writeLegacyIpcFormat = (typeof options.writeLegacyIpcFormat === 'boolean') ? options.writeLegacyIpcFormat : false;\n    }\n    toString(sync = false) {\n        return this._sink.toString(sync);\n    }\n    toUint8Array(sync = false) {\n        return this._sink.toUint8Array(sync);\n    }\n    writeAll(input) {\n        if (isPromise(input)) {\n            return input.then((x) => this.writeAll(x));\n        }\n        else if (isAsyncIterable(input)) {\n            return writeAllAsync(this, input);\n        }\n        return writeAll(this, input);\n    }\n    get closed() { return this._sink.closed; }\n    [Symbol.asyncIterator]() { return this._sink[Symbol.asyncIterator](); }\n    toDOMStream(options) { return this._sink.toDOMStream(options); }\n    toNodeStream(options) { return this._sink.toNodeStream(options); }\n    close() {\n        return this.reset()._sink.close();\n    }\n    abort(reason) {\n        return this.reset()._sink.abort(reason);\n    }\n    finish() {\n        this._autoDestroy ? this.close() : this.reset(this._sink, this._schema);\n        return this;\n    }\n    reset(sink = this._sink, schema = null) {\n        if ((sink === this._sink) || (sink instanceof AsyncByteQueue)) {\n            this._sink = sink;\n        }\n        else {\n            this._sink = new AsyncByteQueue();\n            if (sink && isWritableDOMStream(sink)) {\n                this.toDOMStream({ type: 'bytes' }).pipeTo(sink);\n            }\n            else if (sink && isWritableNodeStream(sink)) {\n                this.toNodeStream({ objectMode: false }).pipe(sink);\n            }\n        }\n        if (this._started && this._schema) {\n            this._writeFooter(this._schema);\n        }\n        this._started = false;\n        this._dictionaryBlocks = [];\n        this._recordBatchBlocks = [];\n        this._seenDictionaries = new Map();\n        this._dictionaryDeltaOffsets = new Map();\n        if (!schema || !(compareSchemas(schema, this._schema))) {\n            if (schema == null) {\n                this._position = 0;\n                this._schema = null;\n            }\n            else {\n                this._started = true;\n                this._schema = schema;\n                this._writeSchema(schema);\n            }\n        }\n        return this;\n    }\n    write(payload) {\n        let schema = null;\n        if (!this._sink) {\n            throw new Error(`RecordBatchWriter is closed`);\n        }\n        else if (payload == null) {\n            return this.finish() && undefined;\n        }\n        else if (payload instanceof Table && !(schema = payload.schema)) {\n            return this.finish() && undefined;\n        }\n        else if (payload instanceof RecordBatch && !(schema = payload.schema)) {\n            return this.finish() && undefined;\n        }\n        if (schema && !compareSchemas(schema, this._schema)) {\n            if (this._started && this._autoDestroy) {\n                return this.close();\n            }\n            this.reset(this._sink, schema);\n        }\n        if (payload instanceof RecordBatch) {\n            if (!(payload instanceof _InternalEmptyPlaceholderRecordBatch)) {\n                this._writeRecordBatch(payload);\n            }\n        }\n        else if (payload instanceof Table) {\n            this.writeAll(payload.batches);\n        }\n        else if (isIterable(payload)) {\n            this.writeAll(payload);\n        }\n    }\n    _writeMessage(message, alignment = 8) {\n        const a = alignment - 1;\n        const buffer = Message.encode(message);\n        const flatbufferSize = buffer.byteLength;\n        const prefixSize = !this._writeLegacyIpcFormat ? 8 : 4;\n        const alignedSize = (flatbufferSize + prefixSize + a) & ~a;\n        const nPaddingBytes = alignedSize - flatbufferSize - prefixSize;\n        if (message.headerType === MessageHeader.RecordBatch) {\n            this._recordBatchBlocks.push(new FileBlock(alignedSize, message.bodyLength, this._position));\n        }\n        else if (message.headerType === MessageHeader.DictionaryBatch) {\n            this._dictionaryBlocks.push(new FileBlock(alignedSize, message.bodyLength, this._position));\n        }\n        // If not in legacy pre-0.15.0 mode, write the stream continuation indicator\n        if (!this._writeLegacyIpcFormat) {\n            this._write(Int32Array.of(-1));\n        }\n        // Write the flatbuffer size prefix including padding\n        this._write(Int32Array.of(alignedSize - prefixSize));\n        // Write the flatbuffer\n        if (flatbufferSize > 0) {\n            this._write(buffer);\n        }\n        // Write any padding\n        return this._writePadding(nPaddingBytes);\n    }\n    _write(chunk) {\n        if (this._started) {\n            const buffer = toUint8Array(chunk);\n            if (buffer && buffer.byteLength > 0) {\n                this._sink.write(buffer);\n                this._position += buffer.byteLength;\n            }\n        }\n        return this;\n    }\n    _writeSchema(schema) {\n        return this._writeMessage(Message.from(schema));\n    }\n    // @ts-ignore\n    _writeFooter(schema) {\n        // eos bytes\n        return this._writeLegacyIpcFormat\n            ? this._write(Int32Array.of(0))\n            : this._write(Int32Array.of(-1, 0));\n    }\n    _writeMagic() {\n        return this._write(MAGIC);\n    }\n    _writePadding(nBytes) {\n        return nBytes > 0 ? this._write(new Uint8Array(nBytes)) : this;\n    }\n    _writeRecordBatch(batch) {\n        const { byteLength, nodes, bufferRegions, buffers } = VectorAssembler.assemble(batch);\n        const recordBatch = new metadata.RecordBatch(batch.numRows, nodes, bufferRegions);\n        const message = Message.from(recordBatch, byteLength);\n        return this\n            ._writeDictionaries(batch)\n            ._writeMessage(message)\n            ._writeBodyBuffers(buffers);\n    }\n    _writeDictionaryBatch(dictionary, id, isDelta = false) {\n        const { byteLength, nodes, bufferRegions, buffers } = VectorAssembler.assemble(new Vector([dictionary]));\n        const recordBatch = new metadata.RecordBatch(dictionary.length, nodes, bufferRegions);\n        const dictionaryBatch = new metadata.DictionaryBatch(recordBatch, id, isDelta);\n        const message = Message.from(dictionaryBatch, byteLength);\n        return this\n            ._writeMessage(message)\n            ._writeBodyBuffers(buffers);\n    }\n    _writeBodyBuffers(buffers) {\n        let buffer;\n        let size, padding;\n        for (let i = -1, n = buffers.length; ++i < n;) {\n            if ((buffer = buffers[i]) && (size = buffer.byteLength) > 0) {\n                this._write(buffer);\n                if ((padding = ((size + 7) & ~7) - size) > 0) {\n                    this._writePadding(padding);\n                }\n            }\n        }\n        return this;\n    }\n    _writeDictionaries(batch) {\n        var _a, _b;\n        for (const [id, dictionary] of batch.dictionaries) {\n            const chunks = (_a = dictionary === null || dictionary === void 0 ? void 0 : dictionary.data) !== null && _a !== void 0 ? _a : [];\n            const prevDictionary = this._seenDictionaries.get(id);\n            const offset = (_b = this._dictionaryDeltaOffsets.get(id)) !== null && _b !== void 0 ? _b : 0;\n            // * If no previous dictionary was written, write an initial DictionaryMessage.\n            // * If the current dictionary does not share chunks with the previous dictionary, write a replacement DictionaryMessage.\n            if (!prevDictionary || prevDictionary.data[0] !== chunks[0]) {\n                // * If `index > 0`, then `isDelta` is true.\n                // * If `index = 0`, then `isDelta` is false, because this is either the initial or a replacement DictionaryMessage.\n                for (const [index, chunk] of chunks.entries())\n                    this._writeDictionaryBatch(chunk, id, index > 0);\n            }\n            else if (offset < chunks.length) {\n                for (const chunk of chunks.slice(offset))\n                    this._writeDictionaryBatch(chunk, id, true);\n            }\n            this._seenDictionaries.set(id, dictionary);\n            this._dictionaryDeltaOffsets.set(id, chunks.length);\n        }\n        return this;\n    }\n}\n/** @ignore */\nexport class RecordBatchStreamWriter extends RecordBatchWriter {\n    /** @nocollapse */\n    static writeAll(input, options) {\n        const writer = new RecordBatchStreamWriter(options);\n        if (isPromise(input)) {\n            return input.then((x) => writer.writeAll(x));\n        }\n        else if (isAsyncIterable(input)) {\n            return writeAllAsync(writer, input);\n        }\n        return writeAll(writer, input);\n    }\n}\n/** @ignore */\nexport class RecordBatchFileWriter extends RecordBatchWriter {\n    /** @nocollapse */\n    static writeAll(input) {\n        const writer = new RecordBatchFileWriter();\n        if (isPromise(input)) {\n            return input.then((x) => writer.writeAll(x));\n        }\n        else if (isAsyncIterable(input)) {\n            return writeAllAsync(writer, input);\n        }\n        return writeAll(writer, input);\n    }\n    constructor() {\n        super();\n        this._autoDestroy = true;\n    }\n    // @ts-ignore\n    _writeSchema(schema) {\n        return this._writeMagic()._writePadding(2);\n    }\n    _writeDictionaryBatch(dictionary, id, isDelta = false) {\n        if (!isDelta && this._seenDictionaries.has(id)) {\n            throw new Error('The Arrow File format does not support replacement dictionaries. ');\n        }\n        return super._writeDictionaryBatch(dictionary, id, isDelta);\n    }\n    _writeFooter(schema) {\n        const buffer = Footer.encode(new Footer(schema, MetadataVersion.V5, this._recordBatchBlocks, this._dictionaryBlocks));\n        return super\n            ._writeFooter(schema) // EOS bytes for sequential readers\n            ._write(buffer) // Write the flatbuffer\n            ._write(Int32Array.of(buffer.byteLength)) // then the footer size suffix\n            ._writeMagic(); // then the magic suffix\n    }\n}\n/** @ignore */\nexport class RecordBatchJSONWriter extends RecordBatchWriter {\n    /** @nocollapse */\n    static writeAll(input) {\n        return new RecordBatchJSONWriter().writeAll(input);\n    }\n    constructor() {\n        super();\n        this._autoDestroy = true;\n        this._recordBatches = [];\n        this._recordBatchesWithDictionaries = [];\n    }\n    _writeMessage() { return this; }\n    // @ts-ignore\n    _writeFooter(schema) { return this; }\n    _writeSchema(schema) {\n        return this._write(`{\\n  \"schema\": ${JSON.stringify({ fields: schema.fields.map(field => fieldToJSON(field)) }, null, 2)}`);\n    }\n    _writeDictionaries(batch) {\n        if (batch.dictionaries.size > 0) {\n            this._recordBatchesWithDictionaries.push(batch);\n        }\n        return this;\n    }\n    _writeDictionaryBatch(dictionary, id, isDelta = false) {\n        this._write(this._dictionaryBlocks.length === 0 ? `    ` : `,\\n    `);\n        this._write(dictionaryBatchToJSON(dictionary, id, isDelta));\n        this._dictionaryBlocks.push(new FileBlock(0, 0, 0));\n        return this;\n    }\n    _writeRecordBatch(batch) {\n        this._writeDictionaries(batch);\n        this._recordBatches.push(batch);\n        return this;\n    }\n    close() {\n        if (this._recordBatchesWithDictionaries.length > 0) {\n            this._write(`,\\n  \"dictionaries\": [\\n`);\n            for (const batch of this._recordBatchesWithDictionaries) {\n                super._writeDictionaries(batch);\n            }\n            this._write(`\\n  ]`);\n        }\n        if (this._recordBatches.length > 0) {\n            for (let i = -1, n = this._recordBatches.length; ++i < n;) {\n                this._write(i === 0 ? `,\\n  \"batches\": [\\n    ` : `,\\n    `);\n                this._write(recordBatchToJSON(this._recordBatches[i]));\n                this._recordBatchBlocks.push(new FileBlock(0, 0, 0));\n            }\n            this._write(`\\n  ]`);\n        }\n        if (this._schema) {\n            this._write(`\\n}`);\n        }\n        this._recordBatchesWithDictionaries = [];\n        this._recordBatches = [];\n        return super.close();\n    }\n}\n/** @ignore */\nfunction writeAll(writer, input) {\n    let chunks = input;\n    if (input instanceof Table) {\n        chunks = input.batches;\n        writer.reset(undefined, input.schema);\n    }\n    for (const batch of chunks) {\n        writer.write(batch);\n    }\n    return writer.finish();\n}\n/** @ignore */\nfunction writeAllAsync(writer, batches) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, batches_1, batches_1_1;\n        var _b, e_1, _c, _d;\n        try {\n            for (_a = true, batches_1 = __asyncValues(batches); batches_1_1 = yield batches_1.next(), _b = batches_1_1.done, !_b; _a = true) {\n                _d = batches_1_1.value;\n                _a = false;\n                const batch = _d;\n                writer.write(batch);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (!_a && !_b && (_c = batches_1.return)) yield _c.call(batches_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return writer.finish();\n    });\n}\n/** @ignore */\nfunction fieldToJSON({ name, type, nullable }) {\n    const assembler = new JSONTypeAssembler();\n    return {\n        'name': name, 'nullable': nullable,\n        'type': assembler.visit(type),\n        'children': (type.children || []).map((field) => fieldToJSON(field)),\n        'dictionary': !DataType.isDictionary(type) ? undefined : {\n            'id': type.id,\n            'isOrdered': type.isOrdered,\n            'indexType': assembler.visit(type.indices)\n        }\n    };\n}\n/** @ignore */\nfunction dictionaryBatchToJSON(dictionary, id, isDelta = false) {\n    const [columns] = JSONVectorAssembler.assemble(new RecordBatch({ [id]: dictionary }));\n    return JSON.stringify({\n        'id': id,\n        'isDelta': isDelta,\n        'data': {\n            'count': dictionary.length,\n            'columns': columns\n        }\n    }, null, 2);\n}\n/** @ignore */\nfunction recordBatchToJSON(records) {\n    const [columns] = JSONVectorAssembler.assemble(records);\n    return JSON.stringify({\n        'count': records.numRows,\n        'columns': columns\n    }, null, 2);\n}\n\n//# sourceMappingURL=writer.mjs.map\n","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Table } from '../table.mjs';\nimport { isPromise } from '../util/compat.mjs';\nimport { RecordBatchReader } from './reader.mjs';\nimport { RecordBatchFileWriter, RecordBatchStreamWriter } from './writer.mjs';\nexport function tableFromIPC(input) {\n    const reader = RecordBatchReader.from(input);\n    if (isPromise(reader)) {\n        return reader.then((reader) => tableFromIPC(reader));\n    }\n    if (reader.isAsync()) {\n        return reader.readAll().then((xs) => new Table(xs));\n    }\n    return new Table(reader.readAll());\n}\n/**\n * Serialize a {@link Table} to the IPC format. This function is a convenience\n * wrapper for {@link RecordBatchStreamWriter} and {@link RecordBatchFileWriter}.\n * Opposite of {@link tableFromIPC}.\n *\n * @param table The Table to serialize.\n * @param type Whether to serialize the Table as a file or a stream.\n */\nexport function tableToIPC(table, type = 'stream') {\n    return (type === 'stream' ? RecordBatchStreamWriter : RecordBatchFileWriter)\n        .writeAll(table)\n        .toUint8Array(true);\n}\n\n//# sourceMappingURL=serialization.mjs.map\n","var q=Object.create;var h=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty;var z=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var J=(s,e,r,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of j(e))!V.call(s,o)&&o!==r&&h(s,o,{get:()=>e[o],enumerable:!(t=Y(e,o))||t.enumerable});return s};var X=(s,e,r)=>(r=s!=null?q(K(s)):{},J(e||!s||!s.__esModule?h(r,\"default\",{value:s,enumerable:!0}):r,s));var H=z((Ke,x)=>{x.exports=Worker});var $=(o=>(o[o.UNDEFINED=0]=\"UNDEFINED\",o[o.AUTOMATIC=1]=\"AUTOMATIC\",o[o.READ_ONLY=2]=\"READ_ONLY\",o[o.READ_WRITE=3]=\"READ_WRITE\",o))($||{});var Z=(n=>(n[n.IDENTIFIER=0]=\"IDENTIFIER\",n[n.NUMERIC_CONSTANT=1]=\"NUMERIC_CONSTANT\",n[n.STRING_CONSTANT=2]=\"STRING_CONSTANT\",n[n.OPERATOR=3]=\"OPERATOR\",n[n.KEYWORD=4]=\"KEYWORD\",n[n.COMMENT=5]=\"COMMENT\",n))(Z||{});var ee=(a=>(a[a.NONE=0]=\"NONE\",a[a.DEBUG=1]=\"DEBUG\",a[a.INFO=2]=\"INFO\",a[a.WARNING=3]=\"WARNING\",a[a.ERROR=4]=\"ERROR\",a))(ee||{}),re=(n=>(n[n.NONE=0]=\"NONE\",n[n.CONNECT=1]=\"CONNECT\",n[n.DISCONNECT=2]=\"DISCONNECT\",n[n.OPEN=3]=\"OPEN\",n[n.QUERY=4]=\"QUERY\",n[n.INSTANTIATE=5]=\"INSTANTIATE\",n))(re||{}),te=(n=>(n[n.NONE=0]=\"NONE\",n[n.OK=1]=\"OK\",n[n.ERROR=2]=\"ERROR\",n[n.START=3]=\"START\",n[n.RUN=4]=\"RUN\",n[n.CAPTURE=5]=\"CAPTURE\",n))(te||{}),se=(a=>(a[a.NONE=0]=\"NONE\",a[a.WEB_WORKER=1]=\"WEB_WORKER\",a[a.NODE_WORKER=2]=\"NODE_WORKER\",a[a.BINDINGS=3]=\"BINDINGS\",a[a.ASYNC_DUCKDB=4]=\"ASYNC_DUCKDB\",a))(se||{}),A=class{log(e){}},P=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}};function pe(s){switch(s){case 0:return\"NONE\";case 1:return\"DEBUG\";case 2:return\"INFO\";case 3:return\"WARNING\";case 4:return\"ERROR\";default:return\"?\"}}function _e(s){switch(s){case 0:return\"NONE\";case 1:return\"OK\";case 2:return\"ERROR\";case 3:return\"START\";case 4:return\"RUN\";case 5:return\"CAPTURE\";default:return\"?\"}}function Re(s){switch(s){case 1:return\"CONNECT\";case 2:return\"DISCONNECT\";case 5:return\"INSTANTIATE\";case 3:return\"OPEN\";case 4:return\"QUERY\";default:return\"?\"}}function me(s){switch(s){case 0:return\"NONE\";case 1:return\"WEB WORKER\";case 2:return\"NODE WORKER\";case 3:return\"DUCKDB BINDINGS\";case 4:return\"DUCKDB\";default:return\"?\"}}var ne=(t=>(t[t.SUCCESS=0]=\"SUCCESS\",t[t.MAX_ARROW_ERROR=255]=\"MAX_ARROW_ERROR\",t[t.DUCKDB_WASM_RETRY=256]=\"DUCKDB_WASM_RETRY\",t))(ne||{});function Ie(s){return s<=255}function be(s){return s===256}import*as u from\"apache-arrow\";var E=class{constructor(e,r){this._bindings=e,this._conn=r}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let r=await this._bindings.runQuery(this._conn,e),t=u.RecordBatchReader.from(r);return console.assert(t.isSync(),\"Reader is not sync\"),console.assert(t.isFile(),\"Reader is not file\"),new u.Table(t)}async send(e,r=!1){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e,r);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let o=new p(this._bindings,this._conn,t),a=await u.RecordBatchReader.from(o);return console.assert(a.isAsync()),console.assert(a.isStream()),a}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let r=await this._bindings.createPrepared(this._conn,e);return new I(this._bindings,this._conn,r)}async insertArrowTable(e,r){let t=u.tableToIPC(e,\"stream\");await this.insertArrowFromIPCStream(t,r)}async insertArrowFromIPCStream(e,r){await this._bindings.insertArrowFromIPCStream(this._conn,e,r)}async insertCSVFromPath(e,r){await this._bindings.insertCSVFromPath(this._conn,e,r)}async insertJSONFromPath(e,r){await this._bindings.insertJSONFromPath(this._conn,e,r)}},p=class{constructor(e,r,t){this.db=e;this.conn=r;this.header=t;this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=null;for(this._inFlight!=null&&(e=await this._inFlight,this._inFlight=null);e==null;)e=await this.db.fetchQueryResults(this.conn);return this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},I=class{constructor(e,r,t){this.bindings=e,this.connectionId=r,this.statementId=t}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let r=await this.bindings.runPrepared(this.connectionId,this.statementId,e),t=u.RecordBatchReader.from(r);return console.assert(t.isSync()),console.assert(t.isFile()),new u.Table(t)}async send(...e){let r=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),t=new p(this.bindings,this.connectionId,r),o=await u.RecordBatchReader.from(t);return console.assert(o.isAsync()),console.assert(o.isStream()),o}};var D=(c=>(c.CANCEL_PENDING_QUERY=\"CANCEL_PENDING_QUERY\",c.CLOSE_PREPARED=\"CLOSE_PREPARED\",c.COLLECT_FILE_STATISTICS=\"COLLECT_FILE_STATISTICS\",c.REGISTER_OPFS_FILE_NAME=\"REGISTER_OPFS_FILE_NAME\",c.CONNECT=\"CONNECT\",c.COPY_FILE_TO_BUFFER=\"COPY_FILE_TO_BUFFER\",c.COPY_FILE_TO_PATH=\"COPY_FILE_TO_PATH\",c.CREATE_PREPARED=\"CREATE_PREPARED\",c.DISCONNECT=\"DISCONNECT\",c.DROP_FILE=\"DROP_FILE\",c.DROP_FILES=\"DROP_FILES\",c.EXPORT_FILE_STATISTICS=\"EXPORT_FILE_STATISTICS\",c.FETCH_QUERY_RESULTS=\"FETCH_QUERY_RESULTS\",c.FLUSH_FILES=\"FLUSH_FILES\",c.GET_FEATURE_FLAGS=\"GET_FEATURE_FLAGS\",c.GET_TABLE_NAMES=\"GET_TABLE_NAMES\",c.GET_VERSION=\"GET_VERSION\",c.GLOB_FILE_INFOS=\"GLOB_FILE_INFOS\",c.INSERT_ARROW_FROM_IPC_STREAM=\"INSERT_ARROW_FROM_IPC_STREAM\",c.INSERT_CSV_FROM_PATH=\"IMPORT_CSV_FROM_PATH\",c.INSERT_JSON_FROM_PATH=\"IMPORT_JSON_FROM_PATH\",c.INSTANTIATE=\"INSTANTIATE\",c.OPEN=\"OPEN\",c.PING=\"PING\",c.POLL_PENDING_QUERY=\"POLL_PENDING_QUERY\",c.REGISTER_FILE_BUFFER=\"REGISTER_FILE_BUFFER\",c.REGISTER_FILE_HANDLE=\"REGISTER_FILE_HANDLE\",c.REGISTER_FILE_URL=\"REGISTER_FILE_URL\",c.RESET=\"RESET\",c.RUN_PREPARED=\"RUN_PREPARED\",c.RUN_QUERY=\"RUN_QUERY\",c.SEND_PREPARED=\"SEND_PREPARED\",c.START_PENDING_QUERY=\"START_PENDING_QUERY\",c.TOKENIZE=\"TOKENIZE\",c))(D||{}),L=(l=>(l.CONNECTION_INFO=\"CONNECTION_INFO\",l.ERROR=\"ERROR\",l.FEATURE_FLAGS=\"FEATURE_FLAGS\",l.FILE_BUFFER=\"FILE_BUFFER\",l.FILE_INFOS=\"FILE_INFOS\",l.FILE_SIZE=\"FILE_SIZE\",l.FILE_STATISTICS=\"FILE_STATISTICS\",l.INSTANTIATE_PROGRESS=\"INSTANTIATE_PROGRESS\",l.LOG=\"LOG\",l.PROGRESS_UPDATE=\"PROGRESS_UPDATE\",l.OK=\"OK\",l.PREPARED_STATEMENT_ID=\"PREPARED_STATEMENT_ID\",l.QUERY_PLAN=\"QUERY_PLAN\",l.QUERY_RESULT=\"QUERY_RESULT\",l.QUERY_RESULT_CHUNK=\"QUERY_RESULT_CHUNK\",l.QUERY_RESULT_HEADER=\"QUERY_RESULT_HEADER\",l.QUERY_RESULT_HEADER_OR_NULL=\"QUERY_RESULT_HEADER_OR_NULL\",l.REGISTERED_FILE=\"REGISTERED_FILE\",l.SCRIPT_TOKENS=\"SCRIPT_TOKENS\",l.SUCCESS=\"SUCCESS\",l.TABLE_NAMES=\"TABLE_NAMES\",l.VERSION_STRING=\"VERSION_STRING\",l))(L||{}),i=class{constructor(e,r){this.promiseResolver=()=>{};this.promiseRejecter=()=>{};this.type=e,this.data=r,this.promise=new Promise((t,o)=>{this.promiseResolver=t,this.promiseRejecter=o})}};import*as d from\"apache-arrow\";function _(s){switch(s.typeId){case d.Type.Binary:return{sqlType:\"binary\"};case d.Type.Bool:return{sqlType:\"bool\"};case d.Type.Date:return{sqlType:\"date\"};case d.Type.DateDay:return{sqlType:\"date32[d]\"};case d.Type.DateMillisecond:return{sqlType:\"date64[ms]\"};case d.Type.Decimal:{let e=s;return{sqlType:\"decimal\",precision:e.precision,scale:e.scale}}case d.Type.Float:return{sqlType:\"float\"};case d.Type.Float16:return{sqlType:\"float16\"};case d.Type.Float32:return{sqlType:\"float32\"};case d.Type.Float64:return{sqlType:\"float64\"};case d.Type.Int:return{sqlType:\"int32\"};case d.Type.Int16:return{sqlType:\"int16\"};case d.Type.Int32:return{sqlType:\"int32\"};case d.Type.Int64:return{sqlType:\"int64\"};case d.Type.Uint16:return{sqlType:\"uint16\"};case d.Type.Uint32:return{sqlType:\"uint32\"};case d.Type.Uint64:return{sqlType:\"uint64\"};case d.Type.Uint8:return{sqlType:\"uint8\"};case d.Type.IntervalDayTime:return{sqlType:\"interval[dt]\"};case d.Type.IntervalYearMonth:return{sqlType:\"interval[m]\"};case d.Type.List:return{sqlType:\"list\",valueType:_(s.valueType)};case d.Type.FixedSizeBinary:return{sqlType:\"fixedsizebinary\",byteWidth:s.byteWidth};case d.Type.Null:return{sqlType:\"null\"};case d.Type.Utf8:return{sqlType:\"utf8\"};case d.Type.Struct:return{sqlType:\"struct\",fields:s.children.map(r=>R(r.name,r.type))};case d.Type.Map:{let e=s;return{sqlType:\"map\",keyType:_(e.keyType),valueType:_(e.valueType)}}case d.Type.Time:return{sqlType:\"time[s]\"};case d.Type.TimeMicrosecond:return{sqlType:\"time[us]\"};case d.Type.TimeMillisecond:return{sqlType:\"time[ms]\"};case d.Type.TimeNanosecond:return{sqlType:\"time[ns]\"};case d.Type.TimeSecond:return{sqlType:\"time[s]\"};case d.Type.Timestamp:return{sqlType:\"timestamp\",timezone:s.timezone||void 0};case d.Type.TimestampSecond:return{sqlType:\"timestamp[s]\",timezone:s.timezone||void 0};case d.Type.TimestampMicrosecond:return{sqlType:\"timestamp[us]\",timezone:s.timezone||void 0};case d.Type.TimestampNanosecond:return{sqlType:\"timestamp[ns]\",timezone:s.timezone||void 0};case d.Type.TimestampMillisecond:return{sqlType:\"timestamp[ms]\",timezone:s.timezone||void 0}}throw new Error(\"unsupported arrow type: \".concat(s.toString()))}function R(s,e){let r=_(e);return r.name=s,r}var oe=new TextEncoder,O=class{constructor(e,r=null){this._onInstantiationProgress=[];this._onExecutionProgress=[];this._worker=null;this._workerShutdownPromise=null;this._workerShutdownResolver=()=>{};this._nextMessageId=0;this._pendingRequests=new Map;this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),r!=null&&this.attach(r)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener(\"message\",this._onMessageHandler),this._worker.addEventListener(\"error\",this._onErrorHandler),this._worker.addEventListener(\"close\",this._onCloseHandler),this._workerShutdownPromise=new Promise((r,t)=>{this._workerShutdownResolver=r})}detach(){this._worker&&(this._worker.removeEventListener(\"message\",this._onMessageHandler),this._worker.removeEventListener(\"error\",this._onErrorHandler),this._worker.removeEventListener(\"close\",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,r=[]){if(!this._worker){console.error(\"cannot send a message since the worker is not set!\");return}let t=this._nextMessageId++;return this._pendingRequests.set(t,e),this._worker.postMessage({messageId:t,type:e.type,data:e.data},r),await e.promise}onMessage(e){var o;let r=e.data;switch(r.type){case\"PROGRESS_UPDATE\":{for(let a of this._onExecutionProgress)a(r.data);return}case\"LOG\":{this._logger.log(r.data);return}case\"INSTANTIATE_PROGRESS\":{for(let a of this._onInstantiationProgress)a(r.data);return}}let t=this._pendingRequests.get(r.requestId);if(!t){console.warn(\"unassociated response: [\".concat(r.requestId,\", \").concat(r.type.toString(),\"]\"));return}if(this._pendingRequests.delete(r.requestId),r.type==\"ERROR\"){let a=new Error(r.data.message);a.name=r.data.name,(o=Object.getOwnPropertyDescriptor(a,\"stack\"))!=null&&o.writable&&(a.stack=r.data.stack),t.promiseRejecter(a);return}switch(t.type){case\"CLOSE_PREPARED\":case\"COLLECT_FILE_STATISTICS\":case\"REGISTER_OPFS_FILE_NAME\":case\"COPY_FILE_TO_PATH\":case\"DISCONNECT\":case\"DROP_FILE\":case\"DROP_FILES\":case\"FLUSH_FILES\":case\"INSERT_ARROW_FROM_IPC_STREAM\":case\"IMPORT_CSV_FROM_PATH\":case\"IMPORT_JSON_FROM_PATH\":case\"OPEN\":case\"PING\":case\"REGISTER_FILE_BUFFER\":case\"REGISTER_FILE_HANDLE\":case\"REGISTER_FILE_URL\":case\"RESET\":if(r.type==\"OK\"){t.promiseResolver(r.data);return}break;case\"INSTANTIATE\":if(this._onInstantiationProgress=[],r.type==\"OK\"){t.promiseResolver(r.data);return}break;case\"GLOB_FILE_INFOS\":if(r.type==\"FILE_INFOS\"){t.promiseResolver(r.data);return}break;case\"GET_VERSION\":if(r.type==\"VERSION_STRING\"){t.promiseResolver(r.data);return}break;case\"GET_FEATURE_FLAGS\":if(r.type==\"FEATURE_FLAGS\"){t.promiseResolver(r.data);return}break;case\"GET_TABLE_NAMES\":if(r.type==\"TABLE_NAMES\"){t.promiseResolver(r.data);return}break;case\"TOKENIZE\":if(r.type==\"SCRIPT_TOKENS\"){t.promiseResolver(r.data);return}break;case\"COPY_FILE_TO_BUFFER\":if(r.type==\"FILE_BUFFER\"){t.promiseResolver(r.data);return}break;case\"EXPORT_FILE_STATISTICS\":if(r.type==\"FILE_STATISTICS\"){t.promiseResolver(r.data);return}break;case\"CONNECT\":if(r.type==\"CONNECTION_INFO\"){t.promiseResolver(r.data);return}break;case\"RUN_PREPARED\":case\"RUN_QUERY\":if(r.type==\"QUERY_RESULT\"){t.promiseResolver(r.data);return}break;case\"SEND_PREPARED\":if(r.type==\"QUERY_RESULT_HEADER\"){t.promiseResolver(r.data);return}break;case\"START_PENDING_QUERY\":if(r.type==\"QUERY_RESULT_HEADER_OR_NULL\"){t.promiseResolver(r.data);return}break;case\"POLL_PENDING_QUERY\":if(r.type==\"QUERY_RESULT_HEADER_OR_NULL\"){t.promiseResolver(r.data);return}break;case\"CANCEL_PENDING_QUERY\":if(this._onInstantiationProgress=[],r.type==\"SUCCESS\"){t.promiseResolver(r.data);return}break;case\"FETCH_QUERY_RESULTS\":if(r.type==\"QUERY_RESULT_CHUNK\"){t.promiseResolver(r.data);return}break;case\"CREATE_PREPARED\":if(r.type==\"PREPARED_STATEMENT_ID\"){t.promiseResolver(r.data);return}break}t.promiseRejecter(new Error(\"unexpected response type: \".concat(r.type.toString())))}onError(e){console.error(e),console.error(\"error in duckdb worker: \".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(\"worker terminated with \".concat(this._pendingRequests.size,\" pending requests\"));return}this._pendingRequests.clear()}async reset(){let e=new i(\"RESET\",null);return await this.postTask(e)}async ping(){let e=new i(\"PING\",null);await this.postTask(e)}async dropFile(e){let r=new i(\"DROP_FILE\",e);return await this.postTask(r)}async dropFiles(){let e=new i(\"DROP_FILES\",null);return await this.postTask(e)}async flushFiles(){let e=new i(\"FLUSH_FILES\",null);return await this.postTask(e)}async instantiate(e,r=null,t=o=>{}){this._onInstantiationProgress.push(t);let o=new i(\"INSTANTIATE\",[e,r]);return await this.postTask(o)}async getVersion(){let e=new i(\"GET_VERSION\",null);return await this.postTask(e)}async getFeatureFlags(){let e=new i(\"GET_FEATURE_FLAGS\",null);return await this.postTask(e)}async open(e){let r=new i(\"OPEN\",e);await this.postTask(r)}async tokenize(e){let r=new i(\"TOKENIZE\",e);return await this.postTask(r)}async connectInternal(){let e=new i(\"CONNECT\",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new E(this,e)}async disconnect(e){let r=new i(\"DISCONNECT\",e);await this.postTask(r)}async runQuery(e,r){let t=new i(\"RUN_QUERY\",[e,r]);return await this.postTask(t)}async startPendingQuery(e,r,t=!1){let o=new i(\"START_PENDING_QUERY\",[e,r,t]);return await this.postTask(o)}async pollPendingQuery(e){let r=new i(\"POLL_PENDING_QUERY\",e);return await this.postTask(r)}async cancelPendingQuery(e){let r=new i(\"CANCEL_PENDING_QUERY\",e);return await this.postTask(r)}async fetchQueryResults(e){let r=new i(\"FETCH_QUERY_RESULTS\",e);return await this.postTask(r)}async getTableNames(e,r){let t=new i(\"GET_TABLE_NAMES\",[e,r]);return await this.postTask(t)}async createPrepared(e,r){let t=new i(\"CREATE_PREPARED\",[e,r]);return await this.postTask(t)}async closePrepared(e,r){let t=new i(\"CLOSE_PREPARED\",[e,r]);await this.postTask(t)}async runPrepared(e,r,t){let o=new i(\"RUN_PREPARED\",[e,r,t]);return await this.postTask(o)}async sendPrepared(e,r,t){let o=new i(\"SEND_PREPARED\",[e,r,t]);return await this.postTask(o)}async globFiles(e){let r=new i(\"GLOB_FILE_INFOS\",e);return await this.postTask(r)}async registerFileText(e,r){let t=oe.encode(r);await this.registerFileBuffer(e,t)}async registerFileURL(e,r,t,o){r===void 0&&(r=e);let a=new i(\"REGISTER_FILE_URL\",[e,r,t,o]);await this.postTask(a)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,r){let t=new i(\"REGISTER_FILE_BUFFER\",[e,r]);await this.postTask(t,[r.buffer])}async registerFileHandle(e,r,t,o){let a=new i(\"REGISTER_FILE_HANDLE\",[e,r,t,o]);await this.postTask(a,[])}async registerOPFSFileName(e){let r=new i(\"REGISTER_OPFS_FILE_NAME\",[e]);await this.postTask(r,[])}async collectFileStatistics(e,r){let t=new i(\"COLLECT_FILE_STATISTICS\",[e,r]);await this.postTask(t,[])}async exportFileStatistics(e){let r=new i(\"EXPORT_FILE_STATISTICS\",e);return await this.postTask(r,[])}async copyFileToBuffer(e){let r=new i(\"COPY_FILE_TO_BUFFER\",e);return await this.postTask(r)}async copyFileToPath(e,r){let t=new i(\"COPY_FILE_TO_PATH\",[e,r]);await this.postTask(t)}async insertArrowFromIPCStream(e,r,t){if(r.length==0)return;let o=new i(\"INSERT_ARROW_FROM_IPC_STREAM\",[e,r,t]);await this.postTask(o,[r.buffer])}async insertCSVFromPath(e,r,t){if(t.columns!==void 0){let a=[];for(let n in t.columns){let T=t.columns[n];a.push(R(n,T))}t.columnsFlat=a,delete t.columns}let o=new i(\"IMPORT_CSV_FROM_PATH\",[e,r,t]);await this.postTask(o)}async insertJSONFromPath(e,r,t){if(t.columns!==void 0){let a=[];for(let n in t.columns){let T=t.columns[n];a.push(R(n,T))}t.columnsFlat=a,delete t.columns}let o=new i(\"IMPORT_JSON_FROM_PATH\",[e,r,t]);await this.postTask(o)}};function ae(){let s=new TextDecoder;return e=>(typeof SharedArrayBuffer<\"u\"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),s.decode(e))}var we=ae();var F=(n=>(n[n.BUFFER=0]=\"BUFFER\",n[n.NODE_FS=1]=\"NODE_FS\",n[n.BROWSER_FILEREADER=2]=\"BROWSER_FILEREADER\",n[n.BROWSER_FSACCESS=3]=\"BROWSER_FSACCESS\",n[n.HTTP=4]=\"HTTP\",n[n.S3=5]=\"S3\",n))(F||{});var w=class{constructor(){this._bindings=null;this._nextMessageId=0}log(e){this.postMessage({messageId:this._nextMessageId++,requestId:0,type:\"LOG\",data:e},[])}sendOK(e){this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"OK\",data:null},[])}failWith(e,r){let t={name:r.name,message:r.message,stack:r.stack||void 0};this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"ERROR\",data:t},[])}async onMessage(e){switch(e.type){case\"PING\":this.sendOK(e);return;case\"INSTANTIATE\":this._bindings!=null&&this.failWith(e,new Error(\"duckdb already initialized\"));try{this._bindings=await this.instantiate(e.data[0],e.data[1],r=>{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"INSTANTIATE_PROGRESS\",data:r},[])}),this.sendOK(e)}catch(r){console.log(r),this._bindings=null,this.failWith(e,r)}return;default:break}if(!this._bindings)return this.failWith(e,new Error(\"duckdb is not initialized\"));try{switch(e.type){case\"GET_VERSION\":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"VERSION_STRING\",data:this._bindings.getVersion()},[]);break;case\"GET_FEATURE_FLAGS\":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"FEATURE_FLAGS\",data:this._bindings.getFeatureFlags()},[]);break;case\"RESET\":this._bindings.reset(),this.sendOK(e);break;case\"OPEN\":{let r=e.data.path;r!=null&&r.startsWith(\"opfs://\")&&(await this._bindings.prepareDBFileHandle(r,3),e.data.useDirectIO=!0),this._bindings.open(e.data),this.sendOK(e);break}case\"DROP_FILE\":this._bindings.dropFile(e.data),this.sendOK(e);break;case\"DROP_FILES\":this._bindings.dropFiles(),this.sendOK(e);break;case\"FLUSH_FILES\":this._bindings.flushFiles(),this.sendOK(e);break;case\"CONNECT\":{let r=this._bindings.connect();this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"CONNECTION_INFO\",data:r.useUnsafe((t,o)=>o)},[]);break}case\"DISCONNECT\":this._bindings.disconnect(e.data),this.sendOK(e);break;case\"CREATE_PREPARED\":{let r=this._bindings.createPrepared(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"PREPARED_STATEMENT_ID\",data:r},[]);break}case\"CLOSE_PREPARED\":{this._bindings.closePrepared(e.data[0],e.data[1]),this.sendOK(e);break}case\"RUN_PREPARED\":{let r=this._bindings.runPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"QUERY_RESULT\",data:r},[r.buffer]);break}case\"RUN_QUERY\":{let r=this._bindings.runQuery(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"QUERY_RESULT\",data:r},[r.buffer]);break}case\"SEND_PREPARED\":{let r=this._bindings.sendPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"QUERY_RESULT_HEADER\",data:r},[r.buffer]);break}case\"START_PENDING_QUERY\":{let r=this._bindings.startPendingQuery(e.data[0],e.data[1],e.data[2]),t=[];r&&t.push(r.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"QUERY_RESULT_HEADER_OR_NULL\",data:r},t);break}case\"POLL_PENDING_QUERY\":{let r=this._bindings.pollPendingQuery(e.data),t=[];r&&t.push(r.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"QUERY_RESULT_HEADER_OR_NULL\",data:r},t);break}case\"CANCEL_PENDING_QUERY\":{let r=this._bindings.cancelPendingQuery(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"SUCCESS\",data:r},[]);break}case\"FETCH_QUERY_RESULTS\":{let r=this._bindings.fetchQueryResults(e.data),t=r?[r.buffer]:[];this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"QUERY_RESULT_CHUNK\",data:r},t);break}case\"GET_TABLE_NAMES\":{let r=this._bindings.getTableNames(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"TABLE_NAMES\",data:r},[]);break}case\"GLOB_FILE_INFOS\":{let r=this._bindings.globFiles(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"FILE_INFOS\",data:r},[]);break}case\"REGISTER_FILE_URL\":this._bindings.registerFileURL(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case\"REGISTER_FILE_BUFFER\":this._bindings.registerFileBuffer(e.data[0],e.data[1]),this.sendOK(e);break;case\"REGISTER_FILE_HANDLE\":await this._bindings.registerFileHandleAsync(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case\"COPY_FILE_TO_PATH\":this._bindings.copyFileToPath(e.data[0],e.data[1]),this.sendOK(e);break;case\"COPY_FILE_TO_BUFFER\":{let r=this._bindings.copyFileToBuffer(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"FILE_BUFFER\",data:r},[]);break}case\"COLLECT_FILE_STATISTICS\":this._bindings.collectFileStatistics(e.data[0],e.data[1]),this.sendOK(e);break;case\"REGISTER_OPFS_FILE_NAME\":this._bindings.registerOPFSFileName(e.data[0]),this.sendOK(e);break;case\"EXPORT_FILE_STATISTICS\":{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"FILE_STATISTICS\",data:this._bindings.exportFileStatistics(e.data)},[]);break}case\"INSERT_ARROW_FROM_IPC_STREAM\":{this._bindings.insertArrowFromIPCStream(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case\"IMPORT_CSV_FROM_PATH\":{this._bindings.insertCSVFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case\"IMPORT_JSON_FROM_PATH\":{this._bindings.insertJSONFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case\"TOKENIZE\":{let r=this._bindings.tokenize(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:\"SCRIPT_TOKENS\",data:r},[]);break}}}catch(r){return console.log(r),this.failWith(e,r)}}};var f=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),C=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11]));var U=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));var W=()=>(async s=>{try{return typeof MessageChannel<\"u\"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(s)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));var m={name:\"@duckdb/duckdb-wasm\",version:\"1.30.0\",description:\"DuckDB powered by WebAssembly\",license:\"MIT\",repository:{type:\"git\",url:\"https://github.com/duckdb/duckdb-wasm.git\"},keywords:[\"sql\",\"duckdb\",\"relational\",\"database\",\"data\",\"query\",\"wasm\",\"analytics\",\"olap\",\"arrow\",\"parquet\",\"json\",\"csv\"],dependencies:{\"apache-arrow\":\"^17.0.0\"},devDependencies:{\"@types/emscripten\":\"^1.39.10\",\"@types/jasmine\":\"^5.1.4\",\"@typescript-eslint/eslint-plugin\":\"^6.21.0\",\"@typescript-eslint/parser\":\"^6.21.0\",esbuild:\"^0.20.2\",eslint:\"^8.57.0\",\"eslint-plugin-jasmine\":\"^4.1.3\",\"eslint-plugin-react\":\"^7.34.0\",\"fast-glob\":\"^3.3.2\",jasmine:\"^5.1.0\",\"jasmine-core\":\"^5.1.2\",\"jasmine-spec-reporter\":\"^7.0.0\",\"js-sha256\":\"^0.11.1\",karma:\"^6.4.2\",\"karma-chrome-launcher\":\"^3.2.0\",\"karma-coverage\":\"^2.2.1\",\"karma-firefox-launcher\":\"^2.1.3\",\"karma-jasmine\":\"^5.1.0\",\"karma-jasmine-html-reporter\":\"^2.1.0\",\"karma-sourcemap-loader\":\"^0.4.0\",\"karma-spec-reporter\":\"^0.0.36\",\"make-dir\":\"^4.0.0\",nyc:\"^15.1.0\",prettier:\"^3.2.5\",puppeteer:\"^22.8.0\",rimraf:\"^5.0.5\",s3rver:\"^3.7.1\",typedoc:\"^0.25.13\",typescript:\"^5.3.3\",\"wasm-feature-detect\":\"^1.6.1\",\"web-worker\":\"^1.2.0\"},scripts:{\"build:debug\":\"node bundle.mjs debug && tsc --emitDeclarationOnly\",\"build:release\":\"node bundle.mjs release && tsc --emitDeclarationOnly\",docs:\"typedoc\",format:'prettier --write \"**/*.+(js|ts)\"',report:\"node ./coverage.mjs\",\"test:node\":\"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs\",\"test:node:debug\":\"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs\",\"test:node:coverage\":\"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs\",\"test:firefox\":\"karma start ./karma/tests-firefox.cjs\",\"test:chrome\":\"karma start ./karma/tests-chrome.cjs\",\"test:chrome:eh\":\"karma start ./karma/tests-chrome-eh.cjs\",\"test:chrome:coverage\":\"karma start ./karma/tests-chrome-coverage.cjs\",\"test:browser\":\"karma start ./karma/tests-all.cjs\",\"test:browser:debug\":\"karma start ./karma/tests-debug.cjs\",test:\"npm run test:chrome && npm run test:node\",\"test:coverage\":\"npm run test:chrome:coverage && npm run test:node:coverage && npm run report\",lint:\"eslint src test\"},files:[\"dist\",\"!dist/tests-*\",\"!dist/duckdb-browser-mvp.worker.js.map\",\"!dist/types/test\"],main:\"dist/duckdb-browser.cjs\",module:\"dist/duckdb-browser.mjs\",types:\"dist/duckdb-browser.d.ts\",jsdelivr:\"dist/duckdb-browser.cjs\",unpkg:\"dist/duckdb-browser.mjs\",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{\"./dist/duckdb-mvp.wasm\":\"./dist/duckdb-mvp.wasm\",\"./dist/duckdb-eh.wasm\":\"./dist/duckdb-eh.wasm\",\"./dist/duckdb-coi.wasm\":\"./dist/duckdb-coi.wasm\",\"./dist/duckdb-browser\":\"./dist/duckdb-browser.mjs\",\"./dist/duckdb-browser.cjs\":\"./dist/duckdb-browser.cjs\",\"./dist/duckdb-browser.mjs\":\"./dist/duckdb-browser.mjs\",\"./dist/duckdb-browser-coi.pthread.worker.js\":\"./dist/duckdb-browser-coi.pthread.worker.js\",\"./dist/duckdb-browser-coi.worker.js\":\"./dist/duckdb-browser-coi.worker.js\",\"./dist/duckdb-browser-eh.worker.js\":\"./dist/duckdb-browser-eh.worker.js\",\"./dist/duckdb-browser-mvp.worker.js\":\"./dist/duckdb-browser-mvp.worker.js\",\"./dist/duckdb-node\":\"./dist/duckdb-node.cjs\",\"./dist/duckdb-node.cjs\":\"./dist/duckdb-node.cjs\",\"./dist/duckdb-node-blocking\":\"./dist/duckdb-node-blocking.cjs\",\"./dist/duckdb-node-blocking.cjs\":\"./dist/duckdb-node-blocking.cjs\",\"./dist/duckdb-node-eh.worker.cjs\":\"./dist/duckdb-node-eh.worker.cjs\",\"./dist/duckdb-node-mvp.worker.cjs\":\"./dist/duckdb-node-mvp.worker.cjs\",\"./blocking\":{node:{types:\"./dist/duckdb-node-blocking.d.ts\",require:\"./dist/duckdb-node-blocking.cjs\",import:\"./dist/duckdb-node-blocking.cjs\"},types:\"./dist/duckdb-node-blocking.d.ts\",import:\"./dist/duckdb-node-blocking.mjs\",require:\"./dist/duckdb-node-blocking.cjs\"},\".\":{browser:{types:\"./dist/duckdb-browser.d.ts\",import:\"./dist/duckdb-browser.mjs\",require:\"./dist/duckdb-browser.cjs\"},node:{types:\"./dist/duckdb-node.d.ts\",import:\"./dist/duckdb-node.cjs\",require:\"./dist/duckdb-node.cjs\"},types:\"./dist/duckdb-browser.d.ts\",import:\"./dist/duckdb-browser.mjs\",require:\"./dist/duckdb-browser.cjs\"}}};var v=m.name,M=m.version,b=m.version.split(\".\"),ve=b[0],Me=b[1],Be=b[2];var B=()=>typeof navigator>\"u\",G=()=>B()?\"node\":navigator.userAgent,He=()=>G().includes(\"Firefox\"),Qe=()=>/^((?!chrome|android).)*safari/i.test(G());function qe(){let s=\"https://cdn.jsdelivr.net/npm/\".concat(v,\"@\").concat(M,\"/dist/\");return{mvp:{mainModule:\"\".concat(s,\"duckdb-mvp.wasm\"),mainWorker:\"\".concat(s,\"duckdb-browser-mvp.worker.js\")},eh:{mainModule:\"\".concat(s,\"duckdb-eh.wasm\"),mainWorker:\"\".concat(s,\"duckdb-browser-eh.worker.js\")}}}var k=null,y=null,g=null,S=null,N=null;async function ce(){return k==null&&(k=typeof BigInt64Array<\"u\"),y==null&&(y=await C()),g==null&&(g=await W()),S==null&&(S=await U()),N==null&&(N=await f()),{bigInt64Array:k,crossOriginIsolated:B()||globalThis.crossOriginIsolated||!1,wasmExceptions:y,wasmSIMD:S,wasmThreads:g,wasmBulkMemory:N}}async function Ye(s){let e=await ce();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&s.coi)return{mainModule:s.coi.mainModule,mainWorker:s.coi.mainWorker,pthreadWorker:s.coi.pthreadWorker};if(s.eh)return{mainModule:s.eh.mainModule,mainWorker:s.eh.mainWorker,pthreadWorker:null}}return{mainModule:s.mvp.mainModule,mainWorker:s.mvp.mainWorker,pthreadWorker:null}}var Q=X(H());async function Ve(s){let e=new Request(s),r=await fetch(e),t=URL.createObjectURL(await r.blob());return new Q.default(t)}export{O as AsyncDuckDB,E as AsyncDuckDBConnection,w as AsyncDuckDBDispatcher,I as AsyncPreparedStatement,p as AsyncResultStreamIterator,P as ConsoleLogger,$ as DuckDBAccessMode,F as DuckDBDataProtocol,Ie as IsArrowBuffer,be as IsDuckDBWasmRetry,te as LogEvent,ee as LogLevel,se as LogOrigin,re as LogTopic,v as PACKAGE_NAME,M as PACKAGE_VERSION,ve as PACKAGE_VERSION_MAJOR,Me as PACKAGE_VERSION_MINOR,Be as PACKAGE_VERSION_PATCH,ne as StatusCode,Z as TokenType,A as VoidLogger,D as WorkerRequestType,L as WorkerResponseType,i as WorkerTask,Ve as createWorker,qe as getJsDelivrBundles,_e as getLogEventLabel,pe as getLogLevelLabel,me as getLogOriginLabel,Re as getLogTopicLabel,ce as getPlatformFeatures,He as isFirefox,B as isNode,Qe as isSafari,Ye as selectBundle};\n//# sourceMappingURL=duckdb-browser.mjs.map\n","import * as duckdb from '@duckdb/duckdb-wasm';\nimport { decodeIPC } from '../util/decode-ipc.js';\n/**\n * Connect to a DuckDB-WASM instance.\n * @param options Connector options.\n * @returns A connector instance.\n */\nexport function wasmConnector(options = {}) {\n    return new DuckDBWASMConnector(options);\n}\n/**\n * DuckDB-WASM connector.\n */\nexport class DuckDBWASMConnector {\n    _ipc;\n    _options;\n    _db;\n    _con;\n    _config;\n    _loadPromise;\n    /**\n     * Create a new DuckDB-WASM connector instance.\n     * @param options Connector options.\n     */\n    constructor(options = {}) {\n        const { ipc, duckdb, connection, config, ...opts } = options;\n        this._ipc = ipc;\n        this._options = opts;\n        this._db = duckdb;\n        this._con = connection;\n        this._config = config;\n    }\n    /**\n     * Get the backing DuckDB-WASM instance.\n     * Lazily initializes DuckDB-WASM if not already loaded.\n     * @returns The DuckDB-WASM instance.\n     */\n    async getDuckDB() {\n        if (!this._db)\n            await connect(this);\n        return this._db;\n    }\n    /**\n     * Get the backing DuckDB-WASM connection.\n     * Lazily initializes DuckDB-WASM if not already loaded.\n     * @returns The DuckDB-WASM connection.\n     */\n    async getConnection() {\n        if (!this._con)\n            await connect(this);\n        return this._con;\n    }\n    async query(query) {\n        const { type, sql } = query;\n        const con = await this.getConnection();\n        const result = await getArrowIPC(con, sql);\n        return type === 'exec' ? undefined\n            : type === 'arrow' ? decodeIPC(result, this._ipc)\n                : decodeIPC(result).toArray();\n    }\n}\n/**\n * Bypass duckdb-wasm query method to get Arrow IPC bytes directly.\n * https://github.com/duckdb/duckdb-wasm/issues/267#issuecomment-2252749509\n * @param con The DuckDB-WASM connection.\n * @param query The SQL query to run.\n */\nfunction getArrowIPC(con, query) {\n    return new Promise((resolve, reject) => {\n        con.useUnsafe(async (bindings, conn) => {\n            try {\n                const buffer = await bindings.runQuery(conn, query);\n                resolve(buffer);\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    });\n}\n/**\n * Establish a new database connection for the given connector.\n * @param c The connector.\n * @returns Connection promise.\n */\nfunction connect(c) {\n    if (!c._loadPromise) {\n        // use a loading promise to avoid race conditions\n        // synchronizes multiple callees on the same load\n        c._loadPromise = (c._db\n            ? Promise.resolve(c._db)\n            : initDatabase(c._options).then(result => c._db = result))\n            .then(db => c._config != undefined ? db.open(c._config).then(() => db) : db)\n            .then(db => db.connect())\n            .then(result => c._con = result);\n    }\n    return c._loadPromise;\n}\n/**\n * Initialize a new DuckDB-WASM instance.\n * @param options Database initialization options.\n */\nasync function initDatabase({ log = false } = {}) {\n    const JSDELIVR_BUNDLES = duckdb.getJsDelivrBundles();\n    // Select a bundle based on browser checks\n    const bundle = await duckdb.selectBundle(JSDELIVR_BUNDLES);\n    const worker_url = URL.createObjectURL(new Blob([`importScripts(\"${bundle.mainWorker}\");`], { type: 'text/javascript' }));\n    // Instantiate the asynchronous version of DuckDB-wasm\n    const worker = new Worker(worker_url);\n    const logger = log ? new duckdb.ConsoleLogger() : new duckdb.VoidLogger();\n    const db = new duckdb.AsyncDuckDB(logger, worker);\n    await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n    URL.revokeObjectURL(worker_url);\n    return db;\n}\n//# sourceMappingURL=wasm.js.map","import { isMosaicClient } from './MosaicClient.js';\nimport { and, contains, isBetween, isIn, isNotDistinct, literal, or, prefix, regexp_matches, suffix, listHasAny, listHasAll, lower } from '@uwdata/mosaic-sql';\n/**\n * Generate a selection clause for a single selected point value.\n * @param field The table column or expression to select.\n * @param value The selected value.\n * @param options Additional clause properties.\n * @param options.source The source component generating this clause.\n * @param options.clients The Mosaic clients associated\n *  with this clause. These clients are not filtered by this clause in\n *  cross-filtering contexts.\n * @returns The generated selection clause.\n */\nexport function clausePoint(field, value, { source, clients = isMosaicClient(source) ? new Set([source]) : undefined }) {\n    const predicate = value !== undefined\n        ? isIn(field, [literal(value)])\n        : null;\n    return {\n        meta: { type: 'point' },\n        source,\n        clients,\n        value,\n        predicate\n    };\n}\n/**\n * Generate a selection clause for multiple selected point values.\n * @param fields The table columns or expressions to select.\n * @param value The selected values, as an array of\n *  arrays. Each subarray contains values for each *fields* entry.\n * @param options Additional clause properties.\n * @param options.source The source component generating this clause.\n * @param options.clients The Mosaic clients associated\n *  with this clause. These clients are not filtered by this clause in\n *  cross-filtering contexts.\n * @returns The generated selection clause.\n */\nexport function clausePoints(fields, value, { source, clients = isMosaicClient(source) ? new Set([source]) : undefined }) {\n    let predicate = null;\n    if (value?.length) {\n        const clauses = value.length && fields.length === 1\n            ? [isIn(fields[0], value.map(v => literal(v[0])))]\n            : value.map(v => and(v.map((_, i) => isNotDistinct(fields[i], literal(_)))));\n        predicate = value.length === 0 ? literal(false)\n            : clauses.length > 1 ? or(clauses)\n                : clauses[0];\n    }\n    return {\n        meta: { type: 'point' },\n        source,\n        clients,\n        value,\n        predicate\n    };\n}\n/**\n * Generate a selection clause for a selected 1D interval.\n * @param field The table column or expression to select.\n * @param value The selected interval as a [lo, hi] array.\n * @param options Additional clause properties.\n * @param options.source The source component generating this clause.\n * @param options.clients The Mosaic clients associated\n *  with this clause. These clients are not filtered by this clause in\n *  cross-filtering contexts.\n * @param options.scale The scale mapping descriptor.\n * @param options.bin A binning method hint.\n * @param options.pixelSize The interactive pixel size.\n * @returns The generated selection clause.\n */\nexport function clauseInterval(field, value, { source, clients = isMosaicClient(source) ? new Set([source]) : undefined, bin, scale, pixelSize = 1 }) {\n    const predicate = value != null ? isBetween(field, value) : null;\n    const meta = {\n        type: 'interval',\n        scales: scale && [scale],\n        bin,\n        pixelSize\n    };\n    return { meta, source, clients, value, predicate };\n}\n/**\n * Generate a selection clause for multiple selected intervals.\n * @param fields The table columns or expressions to select.\n * @param value The selected intervals, as an array of extents.\n * @param options Additional clause properties.\n * @param options.source The source component generating this clause.\n * @param options.clients The Mosaic clients associated\n *  with this clause. These clients are not filtered by this clause in\n *  cross-filtering contexts.\n * @param options.scales The scale mapping descriptors,\n *  in an order matching the given *fields* and *value* extents.\n * @param options.bin A binning method hint.\n * @param options.pixelSize The interactive pixel size.\n * @returns The generated selection clause.\n */\nexport function clauseIntervals(fields, value, { source, clients = isMosaicClient(source) ? new Set([source]) : undefined, bin, scales = [], pixelSize = 1 }) {\n    const predicate = value != null\n        ? and(fields.map((f, i) => isBetween(f, value[i])))\n        : null;\n    const meta = {\n        type: 'interval',\n        scales,\n        bin,\n        pixelSize\n    };\n    return { meta, source, clients, value, predicate };\n}\nconst identity = (x) => x;\nconst MATCH_METHODS = { contains, prefix, suffix, regexp: regexp_matches };\n/**\n * Generate a selection clause for text search matching over a single column.\n * @param field The table column or expression to match.\n * @param value The selected text search query string.\n * @param options Additional clause properties.\n * @param options.source The source component generating this clause.\n * @param options.clients Mosaic clients associated with this clause.\n *  These clients are not filtered by this clause in cross-filtering contexts.\n * @param options.method The text matching method to use, default `'contains'`.\n * @param options.caseSensitive Flag for case sensitive matching, default `false`.\n * @returns The generated selection clause.\n */\nexport function clauseMatch(field, value, { source, clients = undefined, method = 'contains', caseSensitive = false }) {\n    const fn = MATCH_METHODS[method];\n    const transform = caseSensitive ? identity : lower;\n    const predicate = value ? fn(transform(field), transform(literal(value))) : null;\n    const meta = { type: 'match', method };\n    return { meta, source, clients, value, predicate };\n}\n/**\n * Generate a selection clause for text search matching over multiple columns.\n * A match will succeed if any field successfully matches.\n * @param fields The table columns or expressions to match.\n * @param value The selected text search query string.\n * @param options Additional clause properties.\n * @param options.source The source component generating this clause.\n * @param options.clients Mosaic clients associated with this clause.\n *  These clients are not filtered by this clause in cross-filtering contexts.\n * @param options.method The text matching method to use, default `'contains'`.\n * @param options.caseSensitive Flag for case sensitive matching, default `false`.\n * @returns The generated selection clause.\n */\nexport function clauseMatchAny(fields, value, { source, clients = undefined, method = 'contains', caseSensitive = false }) {\n    value = value || null;\n    const fn = MATCH_METHODS[method];\n    const transform = caseSensitive ? identity : lower;\n    const query = transform(literal(value));\n    const predicate = value\n        ? or(fields.flatMap(field => value ? fn(transform(field), query) : []))\n        : null;\n    const meta = { type: 'match', method };\n    return { meta, source, clients, value, predicate };\n}\n/**\n * Generate a selection clause for a single selected point value in a list.\n * @param field The table column or expression to select, which must be a list.\n * @param value The selected value.\n * @param options Additional clause properties.\n * @param options.source The source component generating this clause.\n * @param options.clients The Mosaic clients associated\n *  with this clause. These clients are not filtered by this clause in\n *  cross-filtering contexts.\n * @returns The generated selection clause.\n */\nexport function clauseList(field, value, { source, clients = isMosaicClient(source) ? new Set([source]) : undefined, listMatch = 'any' }) {\n    const listFn = listMatch === 'all' ? listHasAll : listHasAny;\n    const predicate = value !== undefined ? listFn(field, literal(value)) : null;\n    return { source, clients, value, predicate };\n}\n//# sourceMappingURL=SelectionClause.js.map","/**\n * Test if a value is a Flechette Arrow table.\n * We use a \"duck typing\" approach and check for a getChild function.\n * @param values The value to test\n * @returns true if the value duck types as Arrow data\n */\nexport function isArrowTable(values) {\n    // @ts-expect-error check property of unknown value\n    return typeof values?.getChild === 'function';\n}\n//# sourceMappingURL=is-arrow-table.js.map","/**\n * Synchronizer class to aid synchronization of updates on multiple pending operations.\n */\nexport class Synchronizer {\n    _set;\n    _done;\n    _promise;\n    /**\n     * Create a new synchronizer instance.\n     */\n    constructor() {\n        this._set = new Set();\n        this._done = () => { };\n        this._promise = new Promise(resolve => this._done = resolve);\n    }\n    /**\n     * Mark an item as pending.\n     * @param item An item to synchronize on.\n     */\n    pending(item) {\n        this._set.add(item);\n    }\n    /**\n     * Mark a pending item as ready, indicating it is\n     * ready for a synchronized update.\n     * @param item An item to synchronize on.\n     * @returns True if the synchronizer is ready to\n     *  resolve, false otherwise.\n     */\n    ready(item) {\n        this._set.delete(item);\n        return this._set.size === 0;\n    }\n    /**\n     * Resolve the current synchronization cycle, causing the synchronize\n     * promise to resolve and thereby trigger downstream updates.\n     */\n    resolve() {\n        this._promise = new Promise(resolve => {\n            this._done();\n            this._done = resolve;\n        });\n    }\n    /**\n     * The promise for the current synchronization cycle.\n     * @returns The synchronization promise.\n     */\n    get promise() {\n        return this._promise;\n    }\n}\n//# sourceMappingURL=synchronizer.js.map","import { isArrowTable } from './is-arrow-table.js';\n/**\n * Convert input data to a set of column arrays.\n * @param data The input data.\n * @returns An object with named column arrays.\n */\nexport function toDataColumns(data) {\n    if (isArrowTable(data)) {\n        return arrowToColumns(data);\n    }\n    else if (Array.isArray(data)) {\n        return arrayToColumns(data);\n    }\n    else {\n        throw new Error('Unrecognized data format.');\n    }\n}\n/**\n * Convert an Arrow table to a set of column arrays.\n * @param data An Arrow Table.\n * @returns An object with named column arrays.\n */\nfunction arrowToColumns(data) {\n    const { numRows } = data;\n    return { numRows, columns: data.toColumns() };\n}\n/**\n * Convert an array of values to a set of column arrays.\n * If the array values are objects, build out named columns.\n * We use the keys of the first object as the column names.\n * Otherwise, use a special \"values\" array.\n * @param data An array of data objects.\n * @returns An object with named column arrays.\n */\nfunction arrayToColumns(data) {\n    const numRows = data.length;\n    if (typeof data[0] === 'object') {\n        const names = numRows ? Object.keys(data[0]) : [];\n        const columns = {};\n        if (names.length > 0) {\n            names.forEach(name => {\n                columns[name] = data.map(d => d[name]);\n            });\n        }\n        return { numRows, columns };\n    }\n    else {\n        return { numRows, values: data };\n    }\n}\n//# sourceMappingURL=to-data-columns.js.map","/**\n * Maps a SQL data type to its corresponding JavaScript type.\n * @param type The name of a SQL data type\n * @returns The corresponding JavaScript type name\n * @throws Throws an error if the given SQL type name is unsupported or unrecognized.\n */\nexport function jsType(type) {\n    switch (type) {\n        case 'BIGINT':\n        case 'HUGEINT':\n        case 'INTEGER':\n        case 'SMALLINT':\n        case 'TINYINT':\n        case 'UBIGINT':\n        case 'UINTEGER':\n        case 'USMALLINT':\n        case 'UTINYINT': // integers\n        case 'DOUBLE':\n        case 'FLOAT':\n        case 'REAL':\n            return 'number';\n        case 'DATE':\n        case 'TIMESTAMP':\n        case 'TIMESTAMPTZ':\n        case 'TIMESTAMP WITH TIME ZONE':\n        case 'TIME':\n        case 'TIMESTAMP_NS':\n            return 'date';\n        case 'BOOLEAN':\n            return 'boolean';\n        case 'VARCHAR':\n        case 'UUID':\n        case 'JSON':\n            return 'string';\n        case 'ARRAY':\n        case 'LIST':\n            return 'array';\n        case 'BLOB':\n        case 'STRUCT':\n        case 'MAP':\n        case 'GEOMETRY':\n            return 'object';\n        default:\n            if (type.startsWith('ENUM')) {\n                return 'string';\n            }\n            else if (type.startsWith('DECIMAL')) {\n                return 'number';\n            }\n            else if (type.startsWith('STRUCT') || type.startsWith('MAP')) {\n                return 'object';\n            }\n            else if (type.endsWith(']')) {\n                return 'array';\n            }\n            throw new Error(`Unsupported type: ${type}`);\n    }\n}\n//# sourceMappingURL=js-type.js.map","import { Query, asTableRef, count, isAggregateExpression, isNode, isNull, max, min, sql } from '@uwdata/mosaic-sql';\nimport { jsType } from './js-type.js';\nexport const Count = 'count';\nexport const Nulls = 'nulls';\nexport const Max = 'max';\nexport const Min = 'min';\nexport const Distinct = 'distinct';\nexport const Stats = { Count, Nulls, Max, Min, Distinct };\nconst statMap = {\n    [Count]: count,\n    [Distinct]: column => count(column).distinct(),\n    [Max]: max,\n    [Min]: min,\n    [Nulls]: column => count().where(isNull(column))\n};\n/**\n * Get summary stats of the given column\n * @param field Field information request\n * @returns Query for field statistics\n */\nfunction summarize({ table, column, stats }) {\n    return Query\n        .from(table)\n        .select(Array.from(stats, s => ({ [s]: statMap[s](column) })));\n}\n/**\n * Queries information about fields of a table.\n * If the `fields` array contains a single field with the column set to '*',\n * the function will retrieve and return the table information using `getTableInfo`.\n * Otherwise, it will query individual field information using `getFieldInfo`\n * for each field in the `fields` array.\n * @param mc A Mosaic coordinator.\n * @param fields Array of field information requests.\n * @returns Promise resolving to array of field information.\n */\nexport async function queryFieldInfo(mc, fields) {\n    if (fields.length === 1 && fields[0].column === '*') {\n        return getTableInfo(mc, fields[0].table);\n    }\n    else {\n        return (await Promise\n            .all(fields.map(f => getFieldInfo(mc, f))))\n            .filter((x) => x !== undefined);\n    }\n}\n/**\n * Get information about a single field of a table.\n * @param mc A Mosaic coordinator.\n * @param field Field information request.\n * @returns Promise resolving to field information.\n */\nasync function getFieldInfo(mc, { table, column, stats }) {\n    // generate and issue a query for field metadata info\n    // use GROUP BY ALL to differentiate & consolidate aggregates\n    const q = Query\n        .from({ source: table })\n        .select({ column })\n        .groupby(isNode(column) && isAggregateExpression(column) ? sql `ALL` : []);\n    const [desc] = Array.from(await mc.query(Query.describe(q)));\n    const info = {\n        table,\n        column: `${column}`,\n        sqlType: desc.column_type,\n        type: jsType(desc.column_type),\n        nullable: desc.null === 'YES'\n    };\n    // no need for summary statistics\n    if (!stats?.length)\n        return info;\n    // query for summary stats\n    const [result] = await mc.query(summarize({ table, column, stats }), { persist: true });\n    // extract summary stats, copy to field info, and return\n    return Object.assign(info, result);\n}\n/**\n * Get information about the fields of a table.\n * @param mc A Mosaic coordinator.\n * @param table The table name.\n * @returns Promise resolving to array of field information.\n */\nasync function getTableInfo(mc, table) {\n    const result = Array.from(await mc.query(`DESCRIBE ${asTableRef(table)}`));\n    return result.map(desc => ({\n        table,\n        column: desc.column_name,\n        sqlType: desc.column_type,\n        type: jsType(desc.column_type),\n        nullable: desc.null === 'YES'\n    }));\n}\n//# sourceMappingURL=field-info.js.map","/**\n * Test if a value implements the Activatable interface.\n * @param value The value to test.\n * @returns True if value implements Activatable interface.\n */\nexport function isActivatable(value) {\n    // @ts-expect-error check properties of unknown value\n    return typeof value?.activate === 'function' && value.activate.length === 0;\n}\n//# sourceMappingURL=is-activatable.js.map","export const Fixed = Symbol('Fixed');\nexport const Transient = Symbol('Transient');\nexport const Transform = Symbol('Transform');\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We cant do this\n  // for a comparator (except for specific, known comparators) because we cant\n  // tell if the comparator is symmetric, and an asymmetric comparator cant be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export function blur(values, r) {\n  if (!((r = +r) >= 0)) throw new RangeError(\"invalid r\");\n  let length = values.length;\n  if (!((length = Math.floor(length)) >= 0)) throw new RangeError(\"invalid length\");\n  if (!length || !r) return values;\n  const blur = blurf(r);\n  const temp = values.slice();\n  blur(values, temp, 0, length, 1);\n  blur(temp, values, 0, length, 1);\n  blur(values, temp, 0, length, 1);\n  return values;\n}\n\nexport const blur2 = Blur2(blurf);\n\nexport const blurImage = Blur2(blurfImage);\n\nfunction Blur2(blur) {\n  return function(data, rx, ry = rx) {\n    if (!((rx = +rx) >= 0)) throw new RangeError(\"invalid rx\");\n    if (!((ry = +ry) >= 0)) throw new RangeError(\"invalid ry\");\n    let {data: values, width, height} = data;\n    if (!((width = Math.floor(width)) >= 0)) throw new RangeError(\"invalid width\");\n    if (!((height = Math.floor(height !== undefined ? height : values.length / width)) >= 0)) throw new RangeError(\"invalid height\");\n    if (!width || !height || (!rx && !ry)) return data;\n    const blurx = rx && blur(rx);\n    const blury = ry && blur(ry);\n    const temp = values.slice();\n    if (blurx && blury) {\n      blurh(blurx, temp, values, width, height);\n      blurh(blurx, values, temp, width, height);\n      blurh(blurx, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n      blurv(blury, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n    } else if (blurx) {\n      blurh(blurx, values, temp, width, height);\n      blurh(blurx, temp, values, width, height);\n      blurh(blurx, values, temp, width, height);\n    } else if (blury) {\n      blurv(blury, values, temp, width, height);\n      blurv(blury, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n    }\n    return data;\n  };\n}\n\nfunction blurh(blur, T, S, w, h) {\n  for (let y = 0, n = w * h; y < n;) {\n    blur(T, S, y, y += w, 1);\n  }\n}\n\nfunction blurv(blur, T, S, w, h) {\n  for (let x = 0, n = w * h; x < w; ++x) {\n    blur(T, S, x, x + n, w);\n  }\n}\n\nfunction blurfImage(radius) {\n  const blur = blurf(radius);\n  return (T, S, start, stop, step) => {\n    start <<= 2, stop <<= 2, step <<= 2;\n    blur(T, S, start + 0, stop + 0, step);\n    blur(T, S, start + 1, stop + 1, step);\n    blur(T, S, start + 2, stop + 2, step);\n    blur(T, S, start + 3, stop + 3, step);\n  };\n}\n\n// Given a target array T, a source array S, sets each value T[i] to the average\n// of {S[i - r], , S[i], , S[i + r]}, where r = radius, start <= i < stop,\n// for each i, i + step, i + 2 * step, etc., and where S[j] is clamped between\n// S[start] (inclusive) and S[stop] (exclusive). If the given radius is not an\n// integer, S[i - r - 1] and S[i + r + 1] are added to the sum, each weighted\n// according to r - radius.\nfunction blurf(radius) {\n  const radius0 = Math.floor(radius);\n  if (radius0 === radius) return bluri(radius);\n  const t = radius - radius0;\n  const w = 2 * radius + 1;\n  return (T, S, start, stop, step) => { // stop must be aligned!\n    if (!((stop -= step) >= start)) return; // inclusive stop\n    let sum = radius0 * S[start];\n    const s0 = step * radius0;\n    const s1 = s0 + step;\n    for (let i = start, j = start + s0; i < j; i += step) {\n      sum += S[Math.min(stop, i)];\n    }\n    for (let i = start, j = stop; i <= j; i += step) {\n      sum += S[Math.min(stop, i + s0)];\n      T[i] = (sum + t * (S[Math.max(start, i - s1)] + S[Math.min(stop, i + s1)])) / w;\n      sum -= S[Math.max(start, i - s0)];\n    }\n  };\n}\n\n// Like blurf, but optimized for integer radius.\nfunction bluri(radius) {\n  const w = 2 * radius + 1;\n  return (T, S, start, stop, step) => { // stop must be aligned!\n    if (!((stop -= step) >= start)) return; // inclusive stop\n    let sum = radius * S[start];\n    const s = step * radius;\n    for (let i = start, j = start + s; i < j; i += step) {\n      sum += S[Math.min(stop, i)];\n    }\n    for (let i = start, j = stop; i <= j; i += step) {\n      sum += S[Math.min(stop, i + s)];\n      T[i] = sum / w;\n      sum -= S[Math.max(start, i - s)];\n    }\n  };\n}\n","export default function count(values, valueof) {\n  let count = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count;\n      }\n    }\n  }\n  return count;\n}\n","function length(array) {\n  return array.length | 0;\n}\n\nfunction empty(length) {\n  return !(length > 0);\n}\n\nfunction arrayify(values) {\n  return typeof values !== \"object\" || \"length\" in values ? values : Array.from(values);\n}\n\nfunction reducer(reduce) {\n  return values => reduce(...values);\n}\n\nexport default function cross(...values) {\n  const reduce = typeof values[values.length - 1] === \"function\" && reducer(values.pop());\n  values = values.map(arrayify);\n  const lengths = values.map(length);\n  const j = values.length - 1;\n  const index = new Array(j + 1).fill(0);\n  const product = [];\n  if (j < 0 || lengths.some(empty)) return product;\n  while (true) {\n    product.push(index.map((j, i) => values[i][j]));\n    let i = j;\n    while (++index[i] === lengths[i]) {\n      if (i === 0) return reduce ? product.map(reduce) : product;\n      index[i--] = 0;\n    }\n  }\n}\n","export default function cumsum(values, valueof) {\n  var sum = 0, index = 0;\n  return Float64Array.from(values, valueof === undefined\n    ? v => (sum += +v || 0)\n    : v => (sum += +valueof(v, index++, values) || 0));\n}","export default function variance(values, valueof) {\n  let count = 0;\n  let delta;\n  let mean = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n  if (count > 1) return sum / (count - 1);\n}\n","import variance from \"./variance.js\";\n\nexport default function deviation(values, valueof) {\n  const v = variance(values, valueof);\n  return v ? Math.sqrt(v) : v;\n}\n","export default function extent(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","export default function identity(x) {\n  return x;\n}\n","import {InternMap} from \"internmap\";\nimport identity from \"./identity.js\";\n\nexport default function group(values, ...keys) {\n  return nest(values, identity, identity, keys);\n}\n\nexport function groups(values, ...keys) {\n  return nest(values, Array.from, identity, keys);\n}\n\nfunction flatten(groups, keys) {\n  for (let i = 1, n = keys.length; i < n; ++i) {\n    groups = groups.flatMap(g => g.pop().map(([key, value]) => [...g, key, value]));\n  }\n  return groups;\n}\n\nexport function flatGroup(values, ...keys) {\n  return flatten(groups(values, ...keys), keys);\n}\n\nexport function flatRollup(values, reduce, ...keys) {\n  return flatten(rollups(values, reduce, ...keys), keys);\n}\n\nexport function rollup(values, reduce, ...keys) {\n  return nest(values, identity, reduce, keys);\n}\n\nexport function rollups(values, reduce, ...keys) {\n  return nest(values, Array.from, reduce, keys);\n}\n\nexport function index(values, ...keys) {\n  return nest(values, identity, unique, keys);\n}\n\nexport function indexes(values, ...keys) {\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return (function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    const groups = new InternMap();\n    const keyof = keys[i++];\n    let index = -1;\n    for (const value of values) {\n      const key = keyof(value, ++index, values);\n      const group = groups.get(key);\n      if (group) group.push(value);\n      else groups.set(key, [value]);\n    }\n    for (const [key, values] of groups) {\n      groups.set(key, regroup(values, i));\n    }\n    return map(groups);\n  })(values, 0);\n}\n","export default function permute(source, keys) {\n  return Array.from(keys, key => source[key]);\n}\n","import ascending from \"./ascending.js\";\nimport permute from \"./permute.js\";\n\nexport default function sort(values, ...F) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  values = Array.from(values);\n  let [f] = F;\n  if ((f && f.length !== 2) || F.length > 1) {\n    const index = Uint32Array.from(values, (d, i) => i);\n    if (F.length > 1) {\n      F = F.map(f => values.map(f));\n      index.sort((i, j) => {\n        for (const f of F) {\n          const c = ascendingDefined(f[i], f[j]);\n          if (c) return c;\n        }\n      });\n    } else {\n      f = values.map(f);\n      index.sort((i, j) => ascendingDefined(f[i], f[j]));\n    }\n    return permute(values, index);\n  }\n  return values.sort(compareDefined(f));\n}\n\nexport function compareDefined(compare = ascending) {\n  if (compare === ascending) return ascendingDefined;\n  if (typeof compare !== \"function\") throw new TypeError(\"compare is not a function\");\n  return (a, b) => {\n    const x = compare(a, b);\n    if (x || x === 0) return x;\n    return (compare(b, b) === 0) - (compare(a, a) === 0);\n  };\n}\n\nexport function ascendingDefined(a, b) {\n  return (a == null || !(a >= a)) - (b == null || !(b >= b)) || (a < b ? -1 : a > b ? 1 : 0);\n}\n","import ascending from \"./ascending.js\";\nimport group, {rollup} from \"./group.js\";\nimport sort from \"./sort.js\";\n\nexport default function groupSort(values, reduce, key) {\n  return (reduce.length !== 2\n    ? sort(rollup(values, reduce, key), (([ak, av], [bk, bv]) => ascending(av, bv) || ascending(ak, bk)))\n    : sort(group(values, key), (([ak, av], [bk, bv]) => reduce(av, bv) || ascending(ak, bk))))\n    .map(([key]) => key);\n}\n","const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nfunction tickSpec(start, stop, count) {\n  const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n  let i1, i2, inc;\n  if (power < 0) {\n    inc = Math.pow(10, -power) / factor;\n    i1 = Math.round(start * inc);\n    i2 = Math.round(stop * inc);\n    if (i1 / inc < start) ++i1;\n    if (i2 / inc > stop) --i2;\n    inc = -inc;\n  } else {\n    inc = Math.pow(10, power) * factor;\n    i1 = Math.round(start / inc);\n    i2 = Math.round(stop / inc);\n    if (i1 * inc < start) ++i1;\n    if (i2 * inc > stop) --i2;\n  }\n  if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n  return [i1, i2, inc];\n}\n\nexport default function ticks(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  if (!(count > 0)) return [];\n  if (start === stop) return [start];\n  const reverse = stop < start, [i1, i2, inc] = reverse ? tickSpec(stop, start, count) : tickSpec(start, stop, count);\n  if (!(i2 >= i1)) return [];\n  const n = i2 - i1 + 1, ticks = new Array(n);\n  if (reverse) {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) * inc;\n  } else {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) * inc;\n  }\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  return tickSpec(start, stop, count)[2];\n}\n\nexport function tickStep(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  const reverse = stop < start, inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n}\n","import {tickIncrement} from \"./ticks.js\";\n\nexport default function nice(start, stop, count) {\n  let prestep;\n  while (true) {\n    const step = tickIncrement(start, stop, count);\n    if (step === prestep || step === 0 || !isFinite(step)) {\n      return [start, stop];\n    } else if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n    }\n    prestep = step;\n  }\n}\n","import count from \"../count.js\";\n\nexport default function thresholdSturges(values) {\n  return Math.max(1, Math.ceil(Math.log(count(values)) / Math.LN2) + 1);\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function maxIndex(values, valueof) {\n  let max;\n  let maxIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  }\n  return maxIndex;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function minIndex(values, valueof) {\n  let min;\n  let minIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  }\n  return minIndex;\n}\n","import {ascendingDefined, compareDefined} from \"./sort.js\";\n\n// Based on https://github.com/mourner/quickselect\n// ISC license, Copyright 2018 Vladimir Agafonkin.\nexport default function quickselect(array, k, left = 0, right = Infinity, compare) {\n  k = Math.floor(k);\n  left = Math.floor(Math.max(0, left));\n  right = Math.floor(Math.min(array.length - 1, right));\n\n  if (!(left <= k && k <= right)) return array;\n\n  compare = compare === undefined ? ascendingDefined : compareDefined(compare);\n\n  while (right > left) {\n    if (right - left > 600) {\n      const n = right - left + 1;\n      const m = k - left + 1;\n      const z = Math.log(n);\n      const s = 0.5 * Math.exp(2 * z / 3);\n      const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n      const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n      const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n      quickselect(array, k, newLeft, newRight, compare);\n    }\n\n    const t = array[k];\n    let i = left;\n    let j = right;\n\n    swap(array, left, k);\n    if (compare(array[right], t) > 0) swap(array, left, right);\n\n    while (i < j) {\n      swap(array, i, j), ++i, --j;\n      while (compare(array[i], t) < 0) ++i;\n      while (compare(array[j], t) > 0) --j;\n    }\n\n    if (compare(array[left], t) === 0) swap(array, left, j);\n    else ++j, swap(array, j, right);\n\n    if (j <= k) left = j + 1;\n    if (k <= j) right = j - 1;\n  }\n\n  return array;\n}\n\nfunction swap(array, i, j) {\n  const t = array[i];\n  array[i] = array[j];\n  array[j] = t;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function greatest(values, compare = ascending) {\n  let max;\n  let defined = false;\n  if (compare.length === 1) {\n    let maxValue;\n    for (const element of values) {\n      const value = compare(element);\n      if (defined\n          ? ascending(value, maxValue) > 0\n          : ascending(value, value) === 0) {\n        max = element;\n        maxValue = value;\n        defined = true;\n      }\n    }\n  } else {\n    for (const value of values) {\n      if (defined\n          ? compare(value, max) > 0\n          : compare(value, value) === 0) {\n        max = value;\n        defined = true;\n      }\n    }\n  }\n  return max;\n}\n","import max from \"./max.js\";\nimport maxIndex from \"./maxIndex.js\";\nimport min from \"./min.js\";\nimport minIndex from \"./minIndex.js\";\nimport quickselect from \"./quickselect.js\";\nimport number, {numbers} from \"./number.js\";\nimport {ascendingDefined} from \"./sort.js\";\nimport greatest from \"./greatest.js\";\n\nexport default function quantile(values, p, valueof) {\n  values = Float64Array.from(numbers(values, valueof));\n  if (!(n = values.length) || isNaN(p = +p)) return;\n  if (p <= 0 || n < 2) return min(values);\n  if (p >= 1) return max(values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),\n      value1 = min(values.subarray(i0 + 1));\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileSorted(values, p, valueof = number) {\n  if (!(n = values.length) || isNaN(p = +p)) return;\n  if (p <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileIndex(values, p, valueof = number) {\n  if (isNaN(p = +p)) return;\n  numbers = Float64Array.from(values, (_, i) => number(valueof(values[i], i, values)));\n  if (p <= 0) return minIndex(numbers);\n  if (p >= 1) return maxIndex(numbers);\n  var numbers,\n      index = Uint32Array.from(values, (_, i) => i),\n      j = numbers.length - 1,\n      i = Math.floor(j * p);\n  quickselect(index, i, 0, j, (i, j) => ascendingDefined(numbers[i], numbers[j]));\n  i = greatest(index.subarray(0, i + 1), (i) => numbers[i]);\n  return i >= 0 ? i : -1;\n}\n","import count from \"../count.js\";\nimport quantile from \"../quantile.js\";\n\nexport default function thresholdFreedmanDiaconis(values, min, max) {\n  const c = count(values), d = quantile(values, 0.75) - quantile(values, 0.25);\n  return c && d ? Math.ceil((max - min) / (2 * d * Math.pow(c, -1 / 3))) : 1;\n}\n","import count from \"../count.js\";\nimport deviation from \"../deviation.js\";\n\nexport default function thresholdScott(values, min, max) {\n  const c = count(values), d = deviation(values);\n  return c && d ? Math.ceil((max - min) * Math.cbrt(c) / (3.49 * d)) : 1;\n}\n","export default function mean(values, valueof) {\n  let count = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  }\n  if (count) return sum / count;\n}\n","import quantile, {quantileIndex} from \"./quantile.js\";\n\nexport default function median(values, valueof) {\n  return quantile(values, 0.5, valueof);\n}\n\nexport function medianIndex(values, valueof) {\n  return quantileIndex(values, 0.5, valueof);\n}\n","function* flatten(arrays) {\n  for (const array of arrays) {\n    yield* array;\n  }\n}\n\nexport default function merge(arrays) {\n  return Array.from(flatten(arrays));\n}\n","import {InternMap} from \"internmap\";\n\nexport default function mode(values, valueof) {\n  const counts = new InternMap();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && value >= value) {\n        counts.set(value, (counts.get(value) || 0) + 1);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && value >= value) {\n        counts.set(value, (counts.get(value) || 0) + 1);\n      }\n    }\n  }\n  let modeValue;\n  let modeCount = 0;\n  for (const [value, count] of counts) {\n    if (count > modeCount) {\n      modeCount = count;\n      modeValue = value;\n    }\n  }\n  return modeValue;\n}\n","export default function pairs(values, pairof = pair) {\n  const pairs = [];\n  let previous;\n  let first = false;\n  for (const value of values) {\n    if (first) pairs.push(pairof(previous, value));\n    previous = value;\n    first = true;\n  }\n  return pairs;\n}\n\nexport function pair(a, b) {\n  return [a, b];\n}\n","export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import ascending from \"./ascending.js\";\nimport {ascendingDefined, compareDefined} from \"./sort.js\";\n\nexport default function rank(values, valueof = ascending) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  let V = Array.from(values);\n  const R = new Float64Array(V.length);\n  if (valueof.length !== 2) V = V.map(valueof), valueof = ascending;\n  const compareIndex = (i, j) => valueof(V[i], V[j]);\n  let k, r;\n  values = Uint32Array.from(V, (_, i) => i);\n  // Risky chaining due to Safari 14 https://github.com/d3/d3-array/issues/123\n  values.sort(valueof === ascending ? (i, j) => ascendingDefined(V[i], V[j]) : compareDefined(compareIndex));\n  values.forEach((j, i) => {\n      const c = compareIndex(j, k === undefined ? j : k);\n      if (c >= 0) {\n        if (k === undefined || c > 0) k = j, r = i;\n        R[j] = r;\n      } else {\n        R[j] = NaN;\n      }\n    });\n  return R;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function least(values, compare = ascending) {\n  let min;\n  let defined = false;\n  if (compare.length === 1) {\n    let minValue;\n    for (const element of values) {\n      const value = compare(element);\n      if (defined\n          ? ascending(value, minValue) < 0\n          : ascending(value, value) === 0) {\n        min = element;\n        minValue = value;\n        defined = true;\n      }\n    }\n  } else {\n    for (const value of values) {\n      if (defined\n          ? compare(value, min) < 0\n          : compare(value, value) === 0) {\n        min = value;\n        defined = true;\n      }\n    }\n  }\n  return min;\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","export default function reverse(values) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  return Array.from(values).reverse();\n}\n","export default function(x) {\n  return x;\n}\n","import identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + x + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + offset,\n        range1 = +range[range.length - 1] + offset,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d + offset) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform((p && isFinite(p = p(d)) ? p : position(d)) + offset); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient === right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H\" + offset + \"V\" + range1 + \"H\" + k * tickSizeOuter : \"M\" + offset + \",\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V\" + offset + \"H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",\" + offset + \"H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d) + offset); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = Array.from(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nconst K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * degrees;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * radians;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb() {\n    return hcl2lab(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * degrees - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n","import {lab as colorLab} from \"d3-color\";\nimport color from \"./color.js\";\n\nexport default function lab(start, end) {\n  var l = color((start = colorLab(start)).l, (end = colorLab(end)).l),\n      a = color(start.a, end.a),\n      b = color(start.b, end.b),\n      opacity = color(start.opacity, end.opacity);\n  return function(t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import {default as value} from \"./value.js\";\n\nexport default function piecewise(interpolate, values) {\n  if (values === undefined) values = interpolate, interpolate = value;\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n","export default function(interpolator, n) {\n  var samples = new Array(n);\n  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n  return samples;\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","export default x => () => x;\n","export default function BrushEvent(type, {\n  sourceEvent,\n  target,\n  selection,\n  mode,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    selection: {value: selection, enumerable: true, configurable: true},\n    mode: {value: mode, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name __brush rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction append(strings) {\n  this._ += strings[0];\n  for (let i = 1, n = strings.length; i < n; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  let d = Math.floor(digits);\n  if (!(d >= 0)) throw new Error(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  const k = 10 ** d;\n  return function(strings) {\n    this._ += strings[0];\n    for (let i = 1, n = strings.length; i < n; ++i) {\n      this._ += Math.round(arguments[i] * k) / k + strings[i];\n    }\n  };\n}\n\nexport class Path {\n  constructor(digits) {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n    this._append = digits == null ? append : appendRound(digits);\n  }\n  moveTo(x, y) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._append`Z`;\n    }\n  }\n  lineTo(x, y) {\n    this._append`L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  quadraticCurveTo(x1, y1, x, y) {\n    this._append`Q${+x1},${+y1},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._append`C${+x1},${+y1},${+x2},${+y2},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._append`M${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._append`L${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      let x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._append`L${x1 + t01 * x01},${y1 + t01 * y01}`;\n      }\n\n      this._append`A${r},${r},0,0,${+(y01 * x20 > x01 * y20)},${this._x1 = x1 + t21 * x21},${this._y1 = y1 + t21 * y21}`;\n    }\n  }\n  arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._append`M${x0},${y0}`;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._append`L${x0},${y0}`;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._append`A${r},${r},0,1,${cw},${x - dx},${y - dy}A${r},${r},0,1,${cw},${this._x1 = x0},${this._y1 = y0}`;\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._append`A${r},${r},0,${+(da >= pi)},${cw},${this._x1 = x + r * Math.cos(a1)},${this._y1 = y + r * Math.sin(a1)}`;\n    }\n  }\n  rect(x, y, w, h) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${w = +w}v${+h}h${-w}Z`;\n  }\n  toString() {\n    return this._;\n  }\n}\n\nexport function path() {\n  return new Path;\n}\n\n// Allow instanceof d3.path\npath.prototype = Path.prototype;\n\nexport function pathRound(digits = 3) {\n  return new Path(+digits);\n}\n","var array = Array.prototype;\n\nexport var slice = array.slice;\n","export default function(a, b) {\n  return a - b;\n}\n","export default function(ring) {\n  var i = 0, n = ring.length, area = ring[n - 1][1] * ring[0][0] - ring[n - 1][0] * ring[0][1];\n  while (++i < n) area += ring[i - 1][1] * ring[i][0] - ring[i - 1][0] * ring[i][1];\n  return area;\n}\n","export default x => () => x;\n","export default function(ring, hole) {\n  var i = -1, n = hole.length, c;\n  while (++i < n) if (c = ringContains(ring, hole[i])) return c;\n  return 0;\n}\n\nfunction ringContains(ring, point) {\n  var x = point[0], y = point[1], contains = -1;\n  for (var i = 0, n = ring.length, j = n - 1; i < n; j = i++) {\n    var pi = ring[i], xi = pi[0], yi = pi[1], pj = ring[j], xj = pj[0], yj = pj[1];\n    if (segmentContains(pi, pj, point)) return 0;\n    if (((yi > y) !== (yj > y)) && ((x < (xj - xi) * (y - yi) / (yj - yi) + xi))) contains = -contains;\n  }\n  return contains;\n}\n\nfunction segmentContains(a, b, c) {\n  var i; return collinear(a, b, c) && within(a[i = +(a[0] === b[0])], c[i], b[i]);\n}\n\nfunction collinear(a, b, c) {\n  return (b[0] - a[0]) * (c[1] - a[1]) === (c[0] - a[0]) * (b[1] - a[1]);\n}\n\nfunction within(p, q, r) {\n  return p <= q && q <= r || r <= q && q <= p;\n}\n","export default function() {}\n","import {extent, nice, thresholdSturges, ticks} from \"d3-array\";\nimport {slice} from \"./array.js\";\nimport ascending from \"./ascending.js\";\nimport area from \"./area.js\";\nimport constant from \"./constant.js\";\nimport contains from \"./contains.js\";\nimport noop from \"./noop.js\";\n\nvar cases = [\n  [],\n  [[[1.0, 1.5], [0.5, 1.0]]],\n  [[[1.5, 1.0], [1.0, 1.5]]],\n  [[[1.5, 1.0], [0.5, 1.0]]],\n  [[[1.0, 0.5], [1.5, 1.0]]],\n  [[[1.0, 1.5], [0.5, 1.0]], [[1.0, 0.5], [1.5, 1.0]]],\n  [[[1.0, 0.5], [1.0, 1.5]]],\n  [[[1.0, 0.5], [0.5, 1.0]]],\n  [[[0.5, 1.0], [1.0, 0.5]]],\n  [[[1.0, 1.5], [1.0, 0.5]]],\n  [[[0.5, 1.0], [1.0, 0.5]], [[1.5, 1.0], [1.0, 1.5]]],\n  [[[1.5, 1.0], [1.0, 0.5]]],\n  [[[0.5, 1.0], [1.5, 1.0]]],\n  [[[1.0, 1.5], [1.5, 1.0]]],\n  [[[0.5, 1.0], [1.0, 1.5]]],\n  []\n];\n\nexport default function() {\n  var dx = 1,\n      dy = 1,\n      threshold = thresholdSturges,\n      smooth = smoothLinear;\n\n  function contours(values) {\n    var tz = threshold(values);\n\n    // Convert number of thresholds into uniform thresholds.\n    if (!Array.isArray(tz)) {\n      const e = extent(values, finite);\n      tz = ticks(...nice(e[0], e[1], tz), tz);\n      while (tz[tz.length - 1] >= e[1]) tz.pop();\n      while (tz[1] < e[0]) tz.shift();\n    } else {\n      tz = tz.slice().sort(ascending);\n    }\n\n    return tz.map(value => contour(values, value));\n  }\n\n  // Accumulate, smooth contour rings, assign holes to exterior rings.\n  // Based on https://github.com/mbostock/shapefile/blob/v0.6.2/shp/polygon.js\n  function contour(values, value) {\n    const v = value == null ? NaN : +value;\n    if (isNaN(v)) throw new Error(`invalid value: ${value}`);\n\n    var polygons = [],\n        holes = [];\n\n    isorings(values, v, function(ring) {\n      smooth(ring, values, v);\n      if (area(ring) > 0) polygons.push([ring]);\n      else holes.push(ring);\n    });\n\n    holes.forEach(function(hole) {\n      for (var i = 0, n = polygons.length, polygon; i < n; ++i) {\n        if (contains((polygon = polygons[i])[0], hole) !== -1) {\n          polygon.push(hole);\n          return;\n        }\n      }\n    });\n\n    return {\n      type: \"MultiPolygon\",\n      value: value,\n      coordinates: polygons\n    };\n  }\n\n  // Marching squares with isolines stitched into rings.\n  // Based on https://github.com/topojson/topojson-client/blob/v3.0.0/src/stitch.js\n  function isorings(values, value, callback) {\n    var fragmentByStart = new Array,\n        fragmentByEnd = new Array,\n        x, y, t0, t1, t2, t3;\n\n    // Special case for the first row (y = -1, t2 = t3 = 0).\n    x = y = -1;\n    t1 = above(values[0], value);\n    cases[t1 << 1].forEach(stitch);\n    while (++x < dx - 1) {\n      t0 = t1, t1 = above(values[x + 1], value);\n      cases[t0 | t1 << 1].forEach(stitch);\n    }\n    cases[t1 << 0].forEach(stitch);\n\n    // General case for the intermediate rows.\n    while (++y < dy - 1) {\n      x = -1;\n      t1 = above(values[y * dx + dx], value);\n      t2 = above(values[y * dx], value);\n      cases[t1 << 1 | t2 << 2].forEach(stitch);\n      while (++x < dx - 1) {\n        t0 = t1, t1 = above(values[y * dx + dx + x + 1], value);\n        t3 = t2, t2 = above(values[y * dx + x + 1], value);\n        cases[t0 | t1 << 1 | t2 << 2 | t3 << 3].forEach(stitch);\n      }\n      cases[t1 | t2 << 3].forEach(stitch);\n    }\n\n    // Special case for the last row (y = dy - 1, t0 = t1 = 0).\n    x = -1;\n    t2 = values[y * dx] >= value;\n    cases[t2 << 2].forEach(stitch);\n    while (++x < dx - 1) {\n      t3 = t2, t2 = above(values[y * dx + x + 1], value);\n      cases[t2 << 2 | t3 << 3].forEach(stitch);\n    }\n    cases[t2 << 3].forEach(stitch);\n\n    function stitch(line) {\n      var start = [line[0][0] + x, line[0][1] + y],\n          end = [line[1][0] + x, line[1][1] + y],\n          startIndex = index(start),\n          endIndex = index(end),\n          f, g;\n      if (f = fragmentByEnd[startIndex]) {\n        if (g = fragmentByStart[endIndex]) {\n          delete fragmentByEnd[f.end];\n          delete fragmentByStart[g.start];\n          if (f === g) {\n            f.ring.push(end);\n            callback(f.ring);\n          } else {\n            fragmentByStart[f.start] = fragmentByEnd[g.end] = {start: f.start, end: g.end, ring: f.ring.concat(g.ring)};\n          }\n        } else {\n          delete fragmentByEnd[f.end];\n          f.ring.push(end);\n          fragmentByEnd[f.end = endIndex] = f;\n        }\n      } else if (f = fragmentByStart[endIndex]) {\n        if (g = fragmentByEnd[startIndex]) {\n          delete fragmentByStart[f.start];\n          delete fragmentByEnd[g.end];\n          if (f === g) {\n            f.ring.push(end);\n            callback(f.ring);\n          } else {\n            fragmentByStart[g.start] = fragmentByEnd[f.end] = {start: g.start, end: f.end, ring: g.ring.concat(f.ring)};\n          }\n        } else {\n          delete fragmentByStart[f.start];\n          f.ring.unshift(start);\n          fragmentByStart[f.start = startIndex] = f;\n        }\n      } else {\n        fragmentByStart[startIndex] = fragmentByEnd[endIndex] = {start: startIndex, end: endIndex, ring: [start, end]};\n      }\n    }\n  }\n\n  function index(point) {\n    return point[0] * 2 + point[1] * (dx + 1) * 4;\n  }\n\n  function smoothLinear(ring, values, value) {\n    ring.forEach(function(point) {\n      var x = point[0],\n          y = point[1],\n          xt = x | 0,\n          yt = y | 0,\n          v1 = valid(values[yt * dx + xt]);\n      if (x > 0 && x < dx && xt === x) {\n        point[0] = smooth1(x, valid(values[yt * dx + xt - 1]), v1, value);\n      }\n      if (y > 0 && y < dy && yt === y) {\n        point[1] = smooth1(y, valid(values[(yt - 1) * dx + xt]), v1, value);\n      }\n    });\n  }\n\n  contours.contour = contour;\n\n  contours.size = function(_) {\n    if (!arguments.length) return [dx, dy];\n    var _0 = Math.floor(_[0]), _1 = Math.floor(_[1]);\n    if (!(_0 >= 0 && _1 >= 0)) throw new Error(\"invalid size\");\n    return dx = _0, dy = _1, contours;\n  };\n\n  contours.thresholds = function(_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), contours) : threshold;\n  };\n\n  contours.smooth = function(_) {\n    return arguments.length ? (smooth = _ ? smoothLinear : noop, contours) : smooth === smoothLinear;\n  };\n\n  return contours;\n}\n\n// When computing the extent, ignore infinite values (as well as invalid ones).\nfunction finite(x) {\n  return isFinite(x) ? x : NaN;\n}\n\n// Is the (possibly invalid) x greater than or equal to the (known valid) value?\n// Treat any invalid value as below negative infinity.\nfunction above(x, value) {\n  return x == null ? false : +x >= value;\n}\n\n// During smoothing, treat any invalid value as negative infinity.\nfunction valid(v) {\n  return v == null || isNaN(v = +v) ? -Infinity : v;\n}\n\nfunction smooth1(x, v0, v1, value) {\n  const a = value - v0;\n  const b = v1 - v0;\n  const d = isFinite(a) || isFinite(b) ? a / b : Math.sign(a) / Math.sign(b);\n  return isNaN(d) ? x : x + d - 0.5;\n}\n","import {blur2, max, ticks} from \"d3-array\";\nimport {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport Contours from \"./contours.js\";\n\nfunction defaultX(d) {\n  return d[0];\n}\n\nfunction defaultY(d) {\n  return d[1];\n}\n\nfunction defaultWeight() {\n  return 1;\n}\n\nexport default function() {\n  var x = defaultX,\n      y = defaultY,\n      weight = defaultWeight,\n      dx = 960,\n      dy = 500,\n      r = 20, // blur radius\n      k = 2, // log2(grid cell size)\n      o = r * 3, // grid offset, to pad for blur\n      n = (dx + o * 2) >> k, // grid width\n      m = (dy + o * 2) >> k, // grid height\n      threshold = constant(20);\n\n  function grid(data) {\n    var values = new Float32Array(n * m),\n        pow2k = Math.pow(2, -k),\n        i = -1;\n\n    for (const d of data) {\n      var xi = (x(d, ++i, data) + o) * pow2k,\n          yi = (y(d, i, data) + o) * pow2k,\n          wi = +weight(d, i, data);\n      if (wi && xi >= 0 && xi < n && yi >= 0 && yi < m) {\n        var x0 = Math.floor(xi),\n            y0 = Math.floor(yi),\n            xt = xi - x0 - 0.5,\n            yt = yi - y0 - 0.5;\n        values[x0 + y0 * n] += (1 - xt) * (1 - yt) * wi;\n        values[x0 + 1 + y0 * n] += xt * (1 - yt) * wi;\n        values[x0 + 1 + (y0 + 1) * n] += xt * yt * wi;\n        values[x0 + (y0 + 1) * n] += (1 - xt) * yt * wi;\n      }\n    }\n\n    blur2({data: values, width: n, height: m}, r * pow2k);\n    return values;\n  }\n\n  function density(data) {\n    var values = grid(data),\n        tz = threshold(values),\n        pow4k = Math.pow(2, 2 * k);\n\n    // Convert number of thresholds into uniform thresholds.\n    if (!Array.isArray(tz)) {\n      tz = ticks(Number.MIN_VALUE, max(values) / pow4k, tz);\n    }\n\n    return Contours()\n        .size([n, m])\n        .thresholds(tz.map(d => d * pow4k))\n      (values)\n        .map((c, i) => (c.value = +tz[i], transform(c)));\n  }\n\n  density.contours = function(data) {\n    var values = grid(data),\n        contours = Contours().size([n, m]),\n        pow4k = Math.pow(2, 2 * k),\n        contour = value => {\n          value = +value;\n          var c = transform(contours.contour(values, value * pow4k));\n          c.value = value; // preserve exact threshold value\n          return c;\n        };\n    Object.defineProperty(contour, \"max\", {get: () => max(values) / pow4k});\n    return contour;\n  };\n\n  function transform(geometry) {\n    geometry.coordinates.forEach(transformPolygon);\n    return geometry;\n  }\n\n  function transformPolygon(coordinates) {\n    coordinates.forEach(transformRing);\n  }\n\n  function transformRing(coordinates) {\n    coordinates.forEach(transformPoint);\n  }\n\n  // TODO Optimize.\n  function transformPoint(coordinates) {\n    coordinates[0] = coordinates[0] * Math.pow(2, k) - o;\n    coordinates[1] = coordinates[1] * Math.pow(2, k) - o;\n  }\n\n  function resize() {\n    o = r * 3;\n    n = (dx + o * 2) >> k;\n    m = (dy + o * 2) >> k;\n    return density;\n  }\n\n  density.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), density) : x;\n  };\n\n  density.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), density) : y;\n  };\n\n  density.weight = function(_) {\n    return arguments.length ? (weight = typeof _ === \"function\" ? _ : constant(+_), density) : weight;\n  };\n\n  density.size = function(_) {\n    if (!arguments.length) return [dx, dy];\n    var _0 = +_[0], _1 = +_[1];\n    if (!(_0 >= 0 && _1 >= 0)) throw new Error(\"invalid size\");\n    return dx = _0, dy = _1, resize();\n  };\n\n  density.cellSize = function(_) {\n    if (!arguments.length) return 1 << k;\n    if (!((_ = +_) >= 1)) throw new Error(\"invalid cell size\");\n    return k = Math.floor(Math.log(_) / Math.LN2), resize();\n  };\n\n  density.thresholds = function(_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), density) : threshold;\n  };\n\n  density.bandwidth = function(_) {\n    if (!arguments.length) return Math.sqrt(r * (r + 1));\n    if (!((_ = +_) >= 0)) throw new Error(\"invalid bandwidth\");\n    return r = (Math.sqrt(4 * _ * _ + 1) - 1) / 2, resize();\n  };\n\n  return density;\n}\n","export const epsilon = 1.1102230246251565e-16;\nexport const splitter = 134217729;\nexport const resulterrbound = (3 + 8 * epsilon) * epsilon;\n\n// fast_expansion_sum_zeroelim routine from oritinal code\nexport function sum(elen, e, flen, f, h) {\n    let Q, Qnew, hh, bvirt;\n    let enow = e[0];\n    let fnow = f[0];\n    let eindex = 0;\n    let findex = 0;\n    if ((fnow > enow) === (fnow > -enow)) {\n        Q = enow;\n        enow = e[++eindex];\n    } else {\n        Q = fnow;\n        fnow = f[++findex];\n    }\n    let hindex = 0;\n    if (eindex < elen && findex < flen) {\n        if ((fnow > enow) === (fnow > -enow)) {\n            Qnew = enow + Q;\n            hh = Q - (Qnew - enow);\n            enow = e[++eindex];\n        } else {\n            Qnew = fnow + Q;\n            hh = Q - (Qnew - fnow);\n            fnow = f[++findex];\n        }\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n        while (eindex < elen && findex < flen) {\n            if ((fnow > enow) === (fnow > -enow)) {\n                Qnew = Q + enow;\n                bvirt = Qnew - Q;\n                hh = Q - (Qnew - bvirt) + (enow - bvirt);\n                enow = e[++eindex];\n            } else {\n                Qnew = Q + fnow;\n                bvirt = Qnew - Q;\n                hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n                fnow = f[++findex];\n            }\n            Q = Qnew;\n            if (hh !== 0) {\n                h[hindex++] = hh;\n            }\n        }\n    }\n    while (eindex < elen) {\n        Qnew = Q + enow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (enow - bvirt);\n        enow = e[++eindex];\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    while (findex < flen) {\n        Qnew = Q + fnow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n        fnow = f[++findex];\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    if (Q !== 0 || hindex === 0) {\n        h[hindex++] = Q;\n    }\n    return hindex;\n}\n\nexport function sum_three(alen, a, blen, b, clen, c, tmp, out) {\n    return sum(sum(alen, a, blen, b, tmp), tmp, clen, c, out);\n}\n\n// scale_expansion_zeroelim routine from oritinal code\nexport function scale(elen, e, b, h) {\n    let Q, sum, hh, product1, product0;\n    let bvirt, c, ahi, alo, bhi, blo;\n\n    c = splitter * b;\n    bhi = c - (c - b);\n    blo = b - bhi;\n    let enow = e[0];\n    Q = enow * b;\n    c = splitter * enow;\n    ahi = c - (c - enow);\n    alo = enow - ahi;\n    hh = alo * blo - (Q - ahi * bhi - alo * bhi - ahi * blo);\n    let hindex = 0;\n    if (hh !== 0) {\n        h[hindex++] = hh;\n    }\n    for (let i = 1; i < elen; i++) {\n        enow = e[i];\n        product1 = enow * b;\n        c = splitter * enow;\n        ahi = c - (c - enow);\n        alo = enow - ahi;\n        product0 = alo * blo - (product1 - ahi * bhi - alo * bhi - ahi * blo);\n        sum = Q + product0;\n        bvirt = sum - Q;\n        hh = Q - (sum - bvirt) + (product0 - bvirt);\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n        Q = product1 + sum;\n        hh = sum - (Q - product1);\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    if (Q !== 0 || hindex === 0) {\n        h[hindex++] = Q;\n    }\n    return hindex;\n}\n\nexport function negate(elen, e) {\n    for (let i = 0; i < elen; i++) e[i] = -e[i];\n    return elen;\n}\n\nexport function estimate(elen, e) {\n    let Q = e[0];\n    for (let i = 1; i < elen; i++) Q += e[i];\n    return Q;\n}\n\nexport function vec(n) {\n    return new Float64Array(n);\n}\n","import {epsilon, splitter, resulterrbound, estimate, vec, sum} from './util.js';\n\nconst ccwerrboundA = (3 + 16 * epsilon) * epsilon;\nconst ccwerrboundB = (2 + 12 * epsilon) * epsilon;\nconst ccwerrboundC = (9 + 64 * epsilon) * epsilon * epsilon;\n\nconst B = vec(4);\nconst C1 = vec(8);\nconst C2 = vec(12);\nconst D = vec(16);\nconst u = vec(4);\n\nfunction orient2dadapt(ax, ay, bx, by, cx, cy, detsum) {\n    let acxtail, acytail, bcxtail, bcytail;\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n    const acx = ax - cx;\n    const bcx = bx - cx;\n    const acy = ay - cy;\n    const bcy = by - cy;\n\n    s1 = acx * bcy;\n    c = splitter * acx;\n    ahi = c - (c - acx);\n    alo = acx - ahi;\n    c = splitter * bcy;\n    bhi = c - (c - bcy);\n    blo = bcy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acy * bcx;\n    c = splitter * acy;\n    ahi = c - (c - acy);\n    alo = acy - ahi;\n    c = splitter * bcx;\n    bhi = c - (c - bcx);\n    blo = bcx - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    B[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    B[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    B[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    B[3] = u3;\n\n    let det = estimate(4, B);\n    let errbound = ccwerrboundB * detsum;\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    bvirt = ax - acx;\n    acxtail = ax - (acx + bvirt) + (bvirt - cx);\n    bvirt = bx - bcx;\n    bcxtail = bx - (bcx + bvirt) + (bvirt - cx);\n    bvirt = ay - acy;\n    acytail = ay - (acy + bvirt) + (bvirt - cy);\n    bvirt = by - bcy;\n    bcytail = by - (bcy + bvirt) + (bvirt - cy);\n\n    if (acxtail === 0 && acytail === 0 && bcxtail === 0 && bcytail === 0) {\n        return det;\n    }\n\n    errbound = ccwerrboundC * detsum + resulterrbound * Math.abs(det);\n    det += (acx * bcytail + bcy * acxtail) - (acy * bcxtail + bcx * acytail);\n    if (det >= errbound || -det >= errbound) return det;\n\n    s1 = acxtail * bcy;\n    c = splitter * acxtail;\n    ahi = c - (c - acxtail);\n    alo = acxtail - ahi;\n    c = splitter * bcy;\n    bhi = c - (c - bcy);\n    blo = bcy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acytail * bcx;\n    c = splitter * acytail;\n    ahi = c - (c - acytail);\n    alo = acytail - ahi;\n    c = splitter * bcx;\n    bhi = c - (c - bcx);\n    blo = bcx - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const C1len = sum(4, B, 4, u, C1);\n\n    s1 = acx * bcytail;\n    c = splitter * acx;\n    ahi = c - (c - acx);\n    alo = acx - ahi;\n    c = splitter * bcytail;\n    bhi = c - (c - bcytail);\n    blo = bcytail - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acy * bcxtail;\n    c = splitter * acy;\n    ahi = c - (c - acy);\n    alo = acy - ahi;\n    c = splitter * bcxtail;\n    bhi = c - (c - bcxtail);\n    blo = bcxtail - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const C2len = sum(C1len, C1, 4, u, C2);\n\n    s1 = acxtail * bcytail;\n    c = splitter * acxtail;\n    ahi = c - (c - acxtail);\n    alo = acxtail - ahi;\n    c = splitter * bcytail;\n    bhi = c - (c - bcytail);\n    blo = bcytail - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acytail * bcxtail;\n    c = splitter * acytail;\n    ahi = c - (c - acytail);\n    alo = acytail - ahi;\n    c = splitter * bcxtail;\n    bhi = c - (c - bcxtail);\n    blo = bcxtail - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const Dlen = sum(C2len, C2, 4, u, D);\n\n    return D[Dlen - 1];\n}\n\nexport function orient2d(ax, ay, bx, by, cx, cy) {\n    const detleft = (ay - cy) * (bx - cx);\n    const detright = (ax - cx) * (by - cy);\n    const det = detleft - detright;\n\n    const detsum = Math.abs(detleft + detright);\n    if (Math.abs(det) >= ccwerrboundA * detsum) return det;\n\n    return -orient2dadapt(ax, ay, bx, by, cx, cy, detsum);\n}\n\nexport function orient2dfast(ax, ay, bx, by, cx, cy) {\n    return (ay - cy) * (bx - cx) - (ax - cx) * (by - cy);\n}\n","\nconst EPSILON = Math.pow(2, -52);\nconst EDGE_STACK = new Uint32Array(512);\n\nimport {orient2d} from 'robust-predicates';\n\nexport default class Delaunator {\n\n    static from(points, getX = defaultGetX, getY = defaultGetY) {\n        const n = points.length;\n        const coords = new Float64Array(n * 2);\n\n        for (let i = 0; i < n; i++) {\n            const p = points[i];\n            coords[2 * i] = getX(p);\n            coords[2 * i + 1] = getY(p);\n        }\n\n        return new Delaunator(coords);\n    }\n\n    constructor(coords) {\n        const n = coords.length >> 1;\n        if (n > 0 && typeof coords[0] !== 'number') throw new Error('Expected coords to contain numbers.');\n\n        this.coords = coords;\n\n        // arrays that will store the triangulation graph\n        const maxTriangles = Math.max(2 * n - 5, 0);\n        this._triangles = new Uint32Array(maxTriangles * 3);\n        this._halfedges = new Int32Array(maxTriangles * 3);\n\n        // temporary arrays for tracking the edges of the advancing convex hull\n        this._hashSize = Math.ceil(Math.sqrt(n));\n        this._hullPrev = new Uint32Array(n); // edge to prev edge\n        this._hullNext = new Uint32Array(n); // edge to next edge\n        this._hullTri = new Uint32Array(n); // edge to adjacent triangle\n        this._hullHash = new Int32Array(this._hashSize); // angular edge hash\n\n        // temporary arrays for sorting points\n        this._ids = new Uint32Array(n);\n        this._dists = new Float64Array(n);\n\n        this.update();\n    }\n\n    update() {\n        const {coords, _hullPrev: hullPrev, _hullNext: hullNext, _hullTri: hullTri, _hullHash: hullHash} =  this;\n        const n = coords.length >> 1;\n\n        // populate an array of point indices; calculate input data bbox\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n\n        for (let i = 0; i < n; i++) {\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            this._ids[i] = i;\n        }\n        const cx = (minX + maxX) / 2;\n        const cy = (minY + maxY) / 2;\n\n        let i0, i1, i2;\n\n        // pick a seed point close to the center\n        for (let i = 0, minDist = Infinity; i < n; i++) {\n            const d = dist(cx, cy, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist) {\n                i0 = i;\n                minDist = d;\n            }\n        }\n        const i0x = coords[2 * i0];\n        const i0y = coords[2 * i0 + 1];\n\n        // find the point closest to the seed\n        for (let i = 0, minDist = Infinity; i < n; i++) {\n            if (i === i0) continue;\n            const d = dist(i0x, i0y, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist && d > 0) {\n                i1 = i;\n                minDist = d;\n            }\n        }\n        let i1x = coords[2 * i1];\n        let i1y = coords[2 * i1 + 1];\n\n        let minRadius = Infinity;\n\n        // find the third point which forms the smallest circumcircle with the first two\n        for (let i = 0; i < n; i++) {\n            if (i === i0 || i === i1) continue;\n            const r = circumradius(i0x, i0y, i1x, i1y, coords[2 * i], coords[2 * i + 1]);\n            if (r < minRadius) {\n                i2 = i;\n                minRadius = r;\n            }\n        }\n        let i2x = coords[2 * i2];\n        let i2y = coords[2 * i2 + 1];\n\n        if (minRadius === Infinity) {\n            // order collinear points by dx (or dy if all x are identical)\n            // and return the list as a hull\n            for (let i = 0; i < n; i++) {\n                this._dists[i] = (coords[2 * i] - coords[0]) || (coords[2 * i + 1] - coords[1]);\n            }\n            quicksort(this._ids, this._dists, 0, n - 1);\n            const hull = new Uint32Array(n);\n            let j = 0;\n            for (let i = 0, d0 = -Infinity; i < n; i++) {\n                const id = this._ids[i];\n                const d = this._dists[id];\n                if (d > d0) {\n                    hull[j++] = id;\n                    d0 = d;\n                }\n            }\n            this.hull = hull.subarray(0, j);\n            this.triangles = new Uint32Array(0);\n            this.halfedges = new Uint32Array(0);\n            return;\n        }\n\n        // swap the order of the seed points for counter-clockwise orientation\n        if (orient2d(i0x, i0y, i1x, i1y, i2x, i2y) < 0) {\n            const i = i1;\n            const x = i1x;\n            const y = i1y;\n            i1 = i2;\n            i1x = i2x;\n            i1y = i2y;\n            i2 = i;\n            i2x = x;\n            i2y = y;\n        }\n\n        const center = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);\n        this._cx = center.x;\n        this._cy = center.y;\n\n        for (let i = 0; i < n; i++) {\n            this._dists[i] = dist(coords[2 * i], coords[2 * i + 1], center.x, center.y);\n        }\n\n        // sort the points by distance from the seed triangle circumcenter\n        quicksort(this._ids, this._dists, 0, n - 1);\n\n        // set up the seed triangle as the starting hull\n        this._hullStart = i0;\n        let hullSize = 3;\n\n        hullNext[i0] = hullPrev[i2] = i1;\n        hullNext[i1] = hullPrev[i0] = i2;\n        hullNext[i2] = hullPrev[i1] = i0;\n\n        hullTri[i0] = 0;\n        hullTri[i1] = 1;\n        hullTri[i2] = 2;\n\n        hullHash.fill(-1);\n        hullHash[this._hashKey(i0x, i0y)] = i0;\n        hullHash[this._hashKey(i1x, i1y)] = i1;\n        hullHash[this._hashKey(i2x, i2y)] = i2;\n\n        this.trianglesLen = 0;\n        this._addTriangle(i0, i1, i2, -1, -1, -1);\n\n        for (let k = 0, xp, yp; k < this._ids.length; k++) {\n            const i = this._ids[k];\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n\n            // skip near-duplicate points\n            if (k > 0 && Math.abs(x - xp) <= EPSILON && Math.abs(y - yp) <= EPSILON) continue;\n            xp = x;\n            yp = y;\n\n            // skip seed triangle points\n            if (i === i0 || i === i1 || i === i2) continue;\n\n            // find a visible edge on the convex hull using edge hash\n            let start = 0;\n            for (let j = 0, key = this._hashKey(x, y); j < this._hashSize; j++) {\n                start = hullHash[(key + j) % this._hashSize];\n                if (start !== -1 && start !== hullNext[start]) break;\n            }\n\n            start = hullPrev[start];\n            let e = start, q;\n            while (q = hullNext[e], orient2d(x, y, coords[2 * e], coords[2 * e + 1], coords[2 * q], coords[2 * q + 1]) >= 0) {\n                e = q;\n                if (e === start) {\n                    e = -1;\n                    break;\n                }\n            }\n            if (e === -1) continue; // likely a near-duplicate point; skip it\n\n            // add the first triangle from the point\n            let t = this._addTriangle(e, i, hullNext[e], -1, -1, hullTri[e]);\n\n            // recursively flip triangles from the point until they satisfy the Delaunay condition\n            hullTri[i] = this._legalize(t + 2);\n            hullTri[e] = t; // keep track of boundary triangles on the hull\n            hullSize++;\n\n            // walk forward through the hull, adding more triangles and flipping recursively\n            let n = hullNext[e];\n            while (q = hullNext[n], orient2d(x, y, coords[2 * n], coords[2 * n + 1], coords[2 * q], coords[2 * q + 1]) < 0) {\n                t = this._addTriangle(n, i, q, hullTri[i], -1, hullTri[n]);\n                hullTri[i] = this._legalize(t + 2);\n                hullNext[n] = n; // mark as removed\n                hullSize--;\n                n = q;\n            }\n\n            // walk backward from the other side, adding more triangles and flipping\n            if (e === start) {\n                while (q = hullPrev[e], orient2d(x, y, coords[2 * q], coords[2 * q + 1], coords[2 * e], coords[2 * e + 1]) < 0) {\n                    t = this._addTriangle(q, i, e, -1, hullTri[e], hullTri[q]);\n                    this._legalize(t + 2);\n                    hullTri[q] = t;\n                    hullNext[e] = e; // mark as removed\n                    hullSize--;\n                    e = q;\n                }\n            }\n\n            // update the hull indices\n            this._hullStart = hullPrev[i] = e;\n            hullNext[e] = hullPrev[n] = i;\n            hullNext[i] = n;\n\n            // save the two new edges in the hash table\n            hullHash[this._hashKey(x, y)] = i;\n            hullHash[this._hashKey(coords[2 * e], coords[2 * e + 1])] = e;\n        }\n\n        this.hull = new Uint32Array(hullSize);\n        for (let i = 0, e = this._hullStart; i < hullSize; i++) {\n            this.hull[i] = e;\n            e = hullNext[e];\n        }\n\n        // trim typed triangle mesh arrays\n        this.triangles = this._triangles.subarray(0, this.trianglesLen);\n        this.halfedges = this._halfedges.subarray(0, this.trianglesLen);\n    }\n\n    _hashKey(x, y) {\n        return Math.floor(pseudoAngle(x - this._cx, y - this._cy) * this._hashSize) % this._hashSize;\n    }\n\n    _legalize(a) {\n        const {_triangles: triangles, _halfedges: halfedges, coords} = this;\n\n        let i = 0;\n        let ar = 0;\n\n        // recursion eliminated with a fixed-size stack\n        while (true) {\n            const b = halfedges[a];\n\n            /* if the pair of triangles doesn't satisfy the Delaunay condition\n             * (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n             * then do the same check/flip recursively for the new pair of triangles\n             *\n             *           pl                    pl\n             *          /||\\                  /  \\\n             *       al/ || \\bl            al/    \\a\n             *        /  ||  \\              /      \\\n             *       /  a||b  \\    flip    /___ar___\\\n             *     p0\\   ||   /p1   =>   p0\\---bl---/p1\n             *        \\  ||  /              \\      /\n             *       ar\\ || /br             b\\    /br\n             *          \\||/                  \\  /\n             *           pr                    pr\n             */\n            const a0 = a - a % 3;\n            ar = a0 + (a + 2) % 3;\n\n            if (b === -1) { // convex hull edge\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n                continue;\n            }\n\n            const b0 = b - b % 3;\n            const al = a0 + (a + 1) % 3;\n            const bl = b0 + (b + 2) % 3;\n\n            const p0 = triangles[ar];\n            const pr = triangles[a];\n            const pl = triangles[al];\n            const p1 = triangles[bl];\n\n            const illegal = inCircle(\n                coords[2 * p0], coords[2 * p0 + 1],\n                coords[2 * pr], coords[2 * pr + 1],\n                coords[2 * pl], coords[2 * pl + 1],\n                coords[2 * p1], coords[2 * p1 + 1]);\n\n            if (illegal) {\n                triangles[a] = p1;\n                triangles[b] = p0;\n\n                const hbl = halfedges[bl];\n\n                // edge swapped on the other side of the hull (rare); fix the halfedge reference\n                if (hbl === -1) {\n                    let e = this._hullStart;\n                    do {\n                        if (this._hullTri[e] === bl) {\n                            this._hullTri[e] = a;\n                            break;\n                        }\n                        e = this._hullPrev[e];\n                    } while (e !== this._hullStart);\n                }\n                this._link(a, hbl);\n                this._link(b, halfedges[ar]);\n                this._link(ar, bl);\n\n                const br = b0 + (b + 1) % 3;\n\n                // don't worry about hitting the cap: it can only happen on extremely degenerate input\n                if (i < EDGE_STACK.length) {\n                    EDGE_STACK[i++] = br;\n                }\n            } else {\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n            }\n        }\n\n        return ar;\n    }\n\n    _link(a, b) {\n        this._halfedges[a] = b;\n        if (b !== -1) this._halfedges[b] = a;\n    }\n\n    // add a new triangle given vertex indices and adjacent half-edge ids\n    _addTriangle(i0, i1, i2, a, b, c) {\n        const t = this.trianglesLen;\n\n        this._triangles[t] = i0;\n        this._triangles[t + 1] = i1;\n        this._triangles[t + 2] = i2;\n\n        this._link(t, a);\n        this._link(t + 1, b);\n        this._link(t + 2, c);\n\n        this.trianglesLen += 3;\n\n        return t;\n    }\n}\n\n// monotonically increases with real angle, but doesn't need expensive trigonometry\nfunction pseudoAngle(dx, dy) {\n    const p = dx / (Math.abs(dx) + Math.abs(dy));\n    return (dy > 0 ? 3 - p : 1 + p) / 4; // [0..1]\n}\n\nfunction dist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n    const dx = ax - px;\n    const dy = ay - py;\n    const ex = bx - px;\n    const ey = by - py;\n    const fx = cx - px;\n    const fy = cy - py;\n\n    const ap = dx * dx + dy * dy;\n    const bp = ex * ex + ey * ey;\n    const cp = fx * fx + fy * fy;\n\n    return dx * (ey * cp - bp * fy) -\n           dy * (ex * cp - bp * fx) +\n           ap * (ex * fy - ey * fx) < 0;\n}\n\nfunction circumradius(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = (ey * bl - dy * cl) * d;\n    const y = (dx * cl - ex * bl) * d;\n\n    return x * x + y * y;\n}\n\nfunction circumcenter(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = ax + (ey * bl - dy * cl) * d;\n    const y = ay + (dx * cl - ex * bl) * d;\n\n    return {x, y};\n}\n\nfunction quicksort(ids, dists, left, right) {\n    if (right - left <= 20) {\n        for (let i = left + 1; i <= right; i++) {\n            const temp = ids[i];\n            const tempDist = dists[temp];\n            let j = i - 1;\n            while (j >= left && dists[ids[j]] > tempDist) ids[j + 1] = ids[j--];\n            ids[j + 1] = temp;\n        }\n    } else {\n        const median = (left + right) >> 1;\n        let i = left + 1;\n        let j = right;\n        swap(ids, median, i);\n        if (dists[ids[left]] > dists[ids[right]]) swap(ids, left, right);\n        if (dists[ids[i]] > dists[ids[right]]) swap(ids, i, right);\n        if (dists[ids[left]] > dists[ids[i]]) swap(ids, left, i);\n\n        const temp = ids[i];\n        const tempDist = dists[temp];\n        while (true) {\n            do i++; while (dists[ids[i]] < tempDist);\n            do j--; while (dists[ids[j]] > tempDist);\n            if (j < i) break;\n            swap(ids, i, j);\n        }\n        ids[left + 1] = ids[j];\n        ids[j] = temp;\n\n        if (right - i + 1 >= j - left) {\n            quicksort(ids, dists, i, right);\n            quicksort(ids, dists, left, j - 1);\n        } else {\n            quicksort(ids, dists, left, j - 1);\n            quicksort(ids, dists, i, right);\n        }\n    }\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultGetX(p) {\n    return p[0];\n}\nfunction defaultGetY(p) {\n    return p[1];\n}\n","const epsilon = 1e-6;\n\nexport default class Path {\n  constructor() {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n  }\n  moveTo(x, y) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  }\n  lineTo(x, y) {\n    this._ += `L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arc(x, y, r) {\n    x = +x, y = +y, r = +r;\n    const x0 = x + r;\n    const y0 = y;\n    if (r < 0) throw new Error(\"negative radius\");\n    if (this._x1 === null) this._ += `M${x0},${y0}`;\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) this._ += \"L\" + x0 + \",\" + y0;\n    if (!r) return;\n    this._ += `A${r},${r},0,1,1,${x - r},${y}A${r},${r},0,1,1,${this._x1 = x0},${this._y1 = y0}`;\n  }\n  rect(x, y, w, h) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${+w}v${+h}h${-w}Z`;\n  }\n  value() {\n    return this._ || null;\n  }\n}\n","export default class Polygon {\n  constructor() {\n    this._ = [];\n  }\n  moveTo(x, y) {\n    this._.push([x, y]);\n  }\n  closePath() {\n    this._.push(this._[0].slice());\n  }\n  lineTo(x, y) {\n    this._.push([x, y]);\n  }\n  value() {\n    return this._.length ? this._ : null;\n  }\n}\n","import Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\n\nexport default class Voronoi {\n  constructor(delaunay, [xmin, ymin, xmax, ymax] = [0, 0, 960, 500]) {\n    if (!((xmax = +xmax) >= (xmin = +xmin)) || !((ymax = +ymax) >= (ymin = +ymin))) throw new Error(\"invalid bounds\");\n    this.delaunay = delaunay;\n    this._circumcenters = new Float64Array(delaunay.points.length * 2);\n    this.vectors = new Float64Array(delaunay.points.length * 2);\n    this.xmax = xmax, this.xmin = xmin;\n    this.ymax = ymax, this.ymin = ymin;\n    this._init();\n  }\n  update() {\n    this.delaunay.update();\n    this._init();\n    return this;\n  }\n  _init() {\n    const {delaunay: {points, hull, triangles}, vectors} = this;\n    let bx, by; // lazily computed barycenter of the hull\n\n    // Compute circumcenters.\n    const circumcenters = this.circumcenters = this._circumcenters.subarray(0, triangles.length / 3 * 2);\n    for (let i = 0, j = 0, n = triangles.length, x, y; i < n; i += 3, j += 2) {\n      const t1 = triangles[i] * 2;\n      const t2 = triangles[i + 1] * 2;\n      const t3 = triangles[i + 2] * 2;\n      const x1 = points[t1];\n      const y1 = points[t1 + 1];\n      const x2 = points[t2];\n      const y2 = points[t2 + 1];\n      const x3 = points[t3];\n      const y3 = points[t3 + 1];\n\n      const dx = x2 - x1;\n      const dy = y2 - y1;\n      const ex = x3 - x1;\n      const ey = y3 - y1;\n      const ab = (dx * ey - dy * ex) * 2;\n\n      if (Math.abs(ab) < 1e-9) {\n        // For a degenerate triangle, the circumcenter is at the infinity, in a\n        // direction orthogonal to the halfedge and away from the center of\n        // the diagram <bx, by>, defined as the hulls barycenter.\n        if (bx === undefined) {\n          bx = by = 0;\n          for (const i of hull) bx += points[i * 2], by += points[i * 2 + 1];\n          bx /= hull.length, by /= hull.length;\n        }\n        const a = 1e9 * Math.sign((bx - x1) * ey - (by - y1) * ex);\n        x = (x1 + x3) / 2 - a * ey;\n        y = (y1 + y3) / 2 + a * ex;\n      } else {\n        const d = 1 / ab;\n        const bl = dx * dx + dy * dy;\n        const cl = ex * ex + ey * ey;\n        x = x1 + (ey * bl - dy * cl) * d;\n        y = y1 + (dx * cl - ex * bl) * d;\n      }\n      circumcenters[j] = x;\n      circumcenters[j + 1] = y;\n    }\n\n    // Compute exterior cell rays.\n    let h = hull[hull.length - 1];\n    let p0, p1 = h * 4;\n    let x0, x1 = points[2 * h];\n    let y0, y1 = points[2 * h + 1];\n    vectors.fill(0);\n    for (let i = 0; i < hull.length; ++i) {\n      h = hull[i];\n      p0 = p1, x0 = x1, y0 = y1;\n      p1 = h * 4, x1 = points[2 * h], y1 = points[2 * h + 1];\n      vectors[p0 + 2] = vectors[p1] = y0 - y1;\n      vectors[p0 + 3] = vectors[p1 + 1] = x1 - x0;\n    }\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {delaunay: {halfedges, inedges, hull}, circumcenters, vectors} = this;\n    if (hull.length <= 1) return null;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = Math.floor(i / 3) * 2;\n      const tj = Math.floor(j / 3) * 2;\n      const xi = circumcenters[ti];\n      const yi = circumcenters[ti + 1];\n      const xj = circumcenters[tj];\n      const yj = circumcenters[tj + 1];\n      this._renderSegment(xi, yi, xj, yj, context);\n    }\n    let h0, h1 = hull[hull.length - 1];\n    for (let i = 0; i < hull.length; ++i) {\n      h0 = h1, h1 = hull[i];\n      const t = Math.floor(inedges[h1] / 3) * 2;\n      const x = circumcenters[t];\n      const y = circumcenters[t + 1];\n      const v = h0 * 4;\n      const p = this._project(x, y, vectors[v + 2], vectors[v + 3]);\n      if (p) this._renderSegment(x, y, p[0], p[1], context);\n    }\n    return buffer && buffer.value();\n  }\n  renderBounds(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    context.rect(this.xmin, this.ymin, this.xmax - this.xmin, this.ymax - this.ymin);\n    return buffer && buffer.value();\n  }\n  renderCell(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const points = this._clip(i);\n    if (points === null || !points.length) return;\n    context.moveTo(points[0], points[1]);\n    let n = points.length;\n    while (points[0] === points[n-2] && points[1] === points[n-1] && n > 1) n -= 2;\n    for (let i = 2; i < n; i += 2) {\n      if (points[i] !== points[i-2] || points[i+1] !== points[i-1])\n        context.lineTo(points[i], points[i + 1]);\n    }\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *cellPolygons() {\n    const {delaunay: {points}} = this;\n    for (let i = 0, n = points.length / 2; i < n; ++i) {\n      const cell = this.cellPolygon(i);\n      if (cell) cell.index = i, yield cell;\n    }\n  }\n  cellPolygon(i) {\n    const polygon = new Polygon;\n    this.renderCell(i, polygon);\n    return polygon.value();\n  }\n  _renderSegment(x0, y0, x1, y1, context) {\n    let S;\n    const c0 = this._regioncode(x0, y0);\n    const c1 = this._regioncode(x1, y1);\n    if (c0 === 0 && c1 === 0) {\n      context.moveTo(x0, y0);\n      context.lineTo(x1, y1);\n    } else if (S = this._clipSegment(x0, y0, x1, y1, c0, c1)) {\n      context.moveTo(S[0], S[1]);\n      context.lineTo(S[2], S[3]);\n    }\n  }\n  contains(i, x, y) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return false;\n    return this.delaunay._step(i, x, y) === i;\n  }\n  *neighbors(i) {\n    const ci = this._clip(i);\n    if (ci) for (const j of this.delaunay.neighbors(i)) {\n      const cj = this._clip(j);\n      // find the common edge\n      if (cj) loop: for (let ai = 0, li = ci.length; ai < li; ai += 2) {\n        for (let aj = 0, lj = cj.length; aj < lj; aj += 2) {\n          if (ci[ai] === cj[aj]\n              && ci[ai + 1] === cj[aj + 1]\n              && ci[(ai + 2) % li] === cj[(aj + lj - 2) % lj]\n              && ci[(ai + 3) % li] === cj[(aj + lj - 1) % lj]) {\n            yield j;\n            break loop;\n          }\n        }\n      }\n    }\n  }\n  _cell(i) {\n    const {circumcenters, delaunay: {inedges, halfedges, triangles}} = this;\n    const e0 = inedges[i];\n    if (e0 === -1) return null; // coincident point\n    const points = [];\n    let e = e0;\n    do {\n      const t = Math.floor(e / 3);\n      points.push(circumcenters[t * 2], circumcenters[t * 2 + 1]);\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) break; // bad triangulation\n      e = halfedges[e];\n    } while (e !== e0 && e !== -1);\n    return points;\n  }\n  _clip(i) {\n    // degenerate case (1 valid point: return the box)\n    if (i === 0 && this.delaunay.hull.length === 1) {\n      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n    }\n    const points = this._cell(i);\n    if (points === null) return null;\n    const {vectors: V} = this;\n    const v = i * 4;\n    return this._simplify(V[v] || V[v + 1]\n        ? this._clipInfinite(i, points, V[v], V[v + 1], V[v + 2], V[v + 3])\n        : this._clipFinite(i, points));\n  }\n  _clipFinite(i, points) {\n    const n = points.length;\n    let P = null;\n    let x0, y0, x1 = points[n - 2], y1 = points[n - 1];\n    let c0, c1 = this._regioncode(x1, y1);\n    let e0, e1 = 0;\n    for (let j = 0; j < n; j += 2) {\n      x0 = x1, y0 = y1, x1 = points[j], y1 = points[j + 1];\n      c0 = c1, c1 = this._regioncode(x1, y1);\n      if (c0 === 0 && c1 === 0) {\n        e0 = e1, e1 = 0;\n        if (P) P.push(x1, y1);\n        else P = [x1, y1];\n      } else {\n        let S, sx0, sy0, sx1, sy1;\n        if (c0 === 0) {\n          if ((S = this._clipSegment(x0, y0, x1, y1, c0, c1)) === null) continue;\n          [sx0, sy0, sx1, sy1] = S;\n        } else {\n          if ((S = this._clipSegment(x1, y1, x0, y0, c1, c0)) === null) continue;\n          [sx1, sy1, sx0, sy0] = S;\n          e0 = e1, e1 = this._edgecode(sx0, sy0);\n          if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n          if (P) P.push(sx0, sy0);\n          else P = [sx0, sy0];\n        }\n        e0 = e1, e1 = this._edgecode(sx1, sy1);\n        if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n        if (P) P.push(sx1, sy1);\n        else P = [sx1, sy1];\n      }\n    }\n    if (P) {\n      e0 = e1, e1 = this._edgecode(P[0], P[1]);\n      if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n    }\n    return P;\n  }\n  _clipSegment(x0, y0, x1, y1, c0, c1) {\n    // for more robustness, always consider the segment in the same order\n    const flip = c0 < c1;\n    if (flip) [x0, y0, x1, y1, c0, c1] = [x1, y1, x0, y0, c1, c0];\n    while (true) {\n      if (c0 === 0 && c1 === 0) return flip ? [x1, y1, x0, y0] : [x0, y0, x1, y1];\n      if (c0 & c1) return null;\n      let x, y, c = c0 || c1;\n      if (c & 0b1000) x = x0 + (x1 - x0) * (this.ymax - y0) / (y1 - y0), y = this.ymax;\n      else if (c & 0b0100) x = x0 + (x1 - x0) * (this.ymin - y0) / (y1 - y0), y = this.ymin;\n      else if (c & 0b0010) y = y0 + (y1 - y0) * (this.xmax - x0) / (x1 - x0), x = this.xmax;\n      else y = y0 + (y1 - y0) * (this.xmin - x0) / (x1 - x0), x = this.xmin;\n      if (c0) x0 = x, y0 = y, c0 = this._regioncode(x0, y0);\n      else x1 = x, y1 = y, c1 = this._regioncode(x1, y1);\n    }\n  }\n  _clipInfinite(i, points, vx0, vy0, vxn, vyn) {\n    let P = Array.from(points), p;\n    if (p = this._project(P[0], P[1], vx0, vy0)) P.unshift(p[0], p[1]);\n    if (p = this._project(P[P.length - 2], P[P.length - 1], vxn, vyn)) P.push(p[0], p[1]);\n    if (P = this._clipFinite(i, P)) {\n      for (let j = 0, n = P.length, c0, c1 = this._edgecode(P[n - 2], P[n - 1]); j < n; j += 2) {\n        c0 = c1, c1 = this._edgecode(P[j], P[j + 1]);\n        if (c0 && c1) j = this._edge(i, c0, c1, P, j), n = P.length;\n      }\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      P = [this.xmin, this.ymin, this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax];\n    }\n    return P;\n  }\n  _edge(i, e0, e1, P, j) {\n    while (e0 !== e1) {\n      let x, y;\n      switch (e0) {\n        case 0b0101: e0 = 0b0100; continue; // top-left\n        case 0b0100: e0 = 0b0110, x = this.xmax, y = this.ymin; break; // top\n        case 0b0110: e0 = 0b0010; continue; // top-right\n        case 0b0010: e0 = 0b1010, x = this.xmax, y = this.ymax; break; // right\n        case 0b1010: e0 = 0b1000; continue; // bottom-right\n        case 0b1000: e0 = 0b1001, x = this.xmin, y = this.ymax; break; // bottom\n        case 0b1001: e0 = 0b0001; continue; // bottom-left\n        case 0b0001: e0 = 0b0101, x = this.xmin, y = this.ymin; break; // left\n      }\n      // Note: this implicitly checks for out of bounds: if P[j] or P[j+1] are\n      // undefined, the conditional statement will be executed.\n      if ((P[j] !== x || P[j + 1] !== y) && this.contains(i, x, y)) {\n        P.splice(j, 0, x, y), j += 2;\n      }\n    }\n    return j;\n  }\n  _project(x0, y0, vx, vy) {\n    let t = Infinity, c, x, y;\n    if (vy < 0) { // top\n      if (y0 <= this.ymin) return null;\n      if ((c = (this.ymin - y0) / vy) < t) y = this.ymin, x = x0 + (t = c) * vx;\n    } else if (vy > 0) { // bottom\n      if (y0 >= this.ymax) return null;\n      if ((c = (this.ymax - y0) / vy) < t) y = this.ymax, x = x0 + (t = c) * vx;\n    }\n    if (vx > 0) { // right\n      if (x0 >= this.xmax) return null;\n      if ((c = (this.xmax - x0) / vx) < t) x = this.xmax, y = y0 + (t = c) * vy;\n    } else if (vx < 0) { // left\n      if (x0 <= this.xmin) return null;\n      if ((c = (this.xmin - x0) / vx) < t) x = this.xmin, y = y0 + (t = c) * vy;\n    }\n    return [x, y];\n  }\n  _edgecode(x, y) {\n    return (x === this.xmin ? 0b0001\n        : x === this.xmax ? 0b0010 : 0b0000)\n        | (y === this.ymin ? 0b0100\n        : y === this.ymax ? 0b1000 : 0b0000);\n  }\n  _regioncode(x, y) {\n    return (x < this.xmin ? 0b0001\n        : x > this.xmax ? 0b0010 : 0b0000)\n        | (y < this.ymin ? 0b0100\n        : y > this.ymax ? 0b1000 : 0b0000);\n  }\n  _simplify(P) {\n    if (P && P.length > 4) {\n      for (let i = 0; i < P.length; i+= 2) {\n        const j = (i + 2) % P.length, k = (i + 4) % P.length;\n        if (P[i] === P[j] && P[j] === P[k] || P[i + 1] === P[j + 1] && P[j + 1] === P[k + 1]) {\n          P.splice(j, 2), i -= 2;\n        }\n      }\n      if (!P.length) P = null;\n    }\n    return P;\n  }\n}\n","import Delaunator from \"delaunator\";\nimport Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\nimport Voronoi from \"./voronoi.js\";\n\nconst tau = 2 * Math.PI, pow = Math.pow;\n\nfunction pointX(p) {\n  return p[0];\n}\n\nfunction pointY(p) {\n  return p[1];\n}\n\n// A triangulation is collinear if all its triangles have a non-null area\nfunction collinear(d) {\n  const {triangles, coords} = d;\n  for (let i = 0; i < triangles.length; i += 3) {\n    const a = 2 * triangles[i],\n          b = 2 * triangles[i + 1],\n          c = 2 * triangles[i + 2],\n          cross = (coords[c] - coords[a]) * (coords[b + 1] - coords[a + 1])\n                - (coords[b] - coords[a]) * (coords[c + 1] - coords[a + 1]);\n    if (cross > 1e-10) return false;\n  }\n  return true;\n}\n\nfunction jitter(x, y, r) {\n  return [x + Math.sin(x + y) * r, y + Math.cos(x - y) * r];\n}\n\nexport default class Delaunay {\n  static from(points, fx = pointX, fy = pointY, that) {\n    return new Delaunay(\"length\" in points\n        ? flatArray(points, fx, fy, that)\n        : Float64Array.from(flatIterable(points, fx, fy, that)));\n  }\n  constructor(points) {\n    this._delaunator = new Delaunator(points);\n    this.inedges = new Int32Array(points.length / 2);\n    this._hullIndex = new Int32Array(points.length / 2);\n    this.points = this._delaunator.coords;\n    this._init();\n  }\n  update() {\n    this._delaunator.update();\n    this._init();\n    return this;\n  }\n  _init() {\n    const d = this._delaunator, points = this.points;\n\n    // check for collinear\n    if (d.hull && d.hull.length > 2 && collinear(d)) {\n      this.collinear = Int32Array.from({length: points.length/2}, (_,i) => i)\n        .sort((i, j) => points[2 * i] - points[2 * j] || points[2 * i + 1] - points[2 * j + 1]); // for exact neighbors\n      const e = this.collinear[0], f = this.collinear[this.collinear.length - 1],\n        bounds = [ points[2 * e], points[2 * e + 1], points[2 * f], points[2 * f + 1] ],\n        r = 1e-8 * Math.hypot(bounds[3] - bounds[1], bounds[2] - bounds[0]);\n      for (let i = 0, n = points.length / 2; i < n; ++i) {\n        const p = jitter(points[2 * i], points[2 * i + 1], r);\n        points[2 * i] = p[0];\n        points[2 * i + 1] = p[1];\n      }\n      this._delaunator = new Delaunator(points);\n    } else {\n      delete this.collinear;\n    }\n\n    const halfedges = this.halfedges = this._delaunator.halfedges;\n    const hull = this.hull = this._delaunator.hull;\n    const triangles = this.triangles = this._delaunator.triangles;\n    const inedges = this.inedges.fill(-1);\n    const hullIndex = this._hullIndex.fill(-1);\n\n    // Compute an index from each point to an (arbitrary) incoming halfedge\n    // Used to give the first neighbor of each point; for this reason,\n    // on the hull we give priority to exterior halfedges\n    for (let e = 0, n = halfedges.length; e < n; ++e) {\n      const p = triangles[e % 3 === 2 ? e - 2 : e + 1];\n      if (halfedges[e] === -1 || inedges[p] === -1) inedges[p] = e;\n    }\n    for (let i = 0, n = hull.length; i < n; ++i) {\n      hullIndex[hull[i]] = i;\n    }\n\n    // degenerate case: 1 or 2 (distinct) points\n    if (hull.length <= 2 && hull.length > 0) {\n      this.triangles = new Int32Array(3).fill(-1);\n      this.halfedges = new Int32Array(3).fill(-1);\n      this.triangles[0] = hull[0];\n      inedges[hull[0]] = 1;\n      if (hull.length === 2) {\n        inedges[hull[1]] = 0;\n        this.triangles[1] = hull[1];\n        this.triangles[2] = hull[1];\n      }\n    }\n  }\n  voronoi(bounds) {\n    return new Voronoi(this, bounds);\n  }\n  *neighbors(i) {\n    const {inedges, hull, _hullIndex, halfedges, triangles, collinear} = this;\n\n    // degenerate case with several collinear points\n    if (collinear) {\n      const l = collinear.indexOf(i);\n      if (l > 0) yield collinear[l - 1];\n      if (l < collinear.length - 1) yield collinear[l + 1];\n      return;\n    }\n\n    const e0 = inedges[i];\n    if (e0 === -1) return; // coincident point\n    let e = e0, p0 = -1;\n    do {\n      yield p0 = triangles[e];\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) return; // bad triangulation\n      e = halfedges[e];\n      if (e === -1) {\n        const p = hull[(_hullIndex[i] + 1) % hull.length];\n        if (p !== p0) yield p;\n        return;\n      }\n    } while (e !== e0);\n  }\n  find(x, y, i = 0) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return -1;\n    const i0 = i;\n    let c;\n    while ((c = this._step(i, x, y)) >= 0 && c !== i && c !== i0) i = c;\n    return c;\n  }\n  _step(i, x, y) {\n    const {inedges, hull, _hullIndex, halfedges, triangles, points} = this;\n    if (inedges[i] === -1 || !points.length) return (i + 1) % (points.length >> 1);\n    let c = i;\n    let dc = pow(x - points[i * 2], 2) + pow(y - points[i * 2 + 1], 2);\n    const e0 = inedges[i];\n    let e = e0;\n    do {\n      let t = triangles[e];\n      const dt = pow(x - points[t * 2], 2) + pow(y - points[t * 2 + 1], 2);\n      if (dt < dc) dc = dt, c = t;\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) break; // bad triangulation\n      e = halfedges[e];\n      if (e === -1) {\n        e = hull[(_hullIndex[i] + 1) % hull.length];\n        if (e !== t) {\n          if (pow(x - points[e * 2], 2) + pow(y - points[e * 2 + 1], 2) < dc) return e;\n        }\n        break;\n      }\n    } while (e !== e0);\n    return c;\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, halfedges, triangles} = this;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = triangles[i] * 2;\n      const tj = triangles[j] * 2;\n      context.moveTo(points[ti], points[ti + 1]);\n      context.lineTo(points[tj], points[tj + 1]);\n    }\n    this.renderHull(context);\n    return buffer && buffer.value();\n  }\n  renderPoints(context, r) {\n    if (r === undefined && (!context || typeof context.moveTo !== \"function\")) r = context, context = null;\n    r = r == undefined ? 2 : +r;\n    const buffer = context == null ? context = new Path : undefined;\n    const {points} = this;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i], y = points[i + 1];\n      context.moveTo(x + r, y);\n      context.arc(x, y, r, 0, tau);\n    }\n    return buffer && buffer.value();\n  }\n  renderHull(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {hull, points} = this;\n    const h = hull[0] * 2, n = hull.length;\n    context.moveTo(points[h], points[h + 1]);\n    for (let i = 1; i < n; ++i) {\n      const h = 2 * hull[i];\n      context.lineTo(points[h], points[h + 1]);\n    }\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  hullPolygon() {\n    const polygon = new Polygon;\n    this.renderHull(polygon);\n    return polygon.value();\n  }\n  renderTriangle(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, triangles} = this;\n    const t0 = triangles[i *= 3] * 2;\n    const t1 = triangles[i + 1] * 2;\n    const t2 = triangles[i + 2] * 2;\n    context.moveTo(points[t0], points[t0 + 1]);\n    context.lineTo(points[t1], points[t1 + 1]);\n    context.lineTo(points[t2], points[t2 + 1]);\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *trianglePolygons() {\n    const {triangles} = this;\n    for (let i = 0, n = triangles.length / 3; i < n; ++i) {\n      yield this.trianglePolygon(i);\n    }\n  }\n  trianglePolygon(i) {\n    const polygon = new Polygon;\n    this.renderTriangle(i, polygon);\n    return polygon.value();\n  }\n}\n\nfunction flatArray(points, fx, fy, that) {\n  const n = points.length;\n  const array = new Float64Array(n * 2);\n  for (let i = 0; i < n; ++i) {\n    const p = points[i];\n    array[i * 2] = fx.call(that, p, i, points);\n    array[i * 2 + 1] = fy.call(that, p, i, points);\n  }\n  return array;\n}\n\nfunction* flatIterable(points, fx, fy, that) {\n  let i = 0;\n  for (const p of points) {\n    yield fx.call(that, p, i, points);\n    yield fy.call(that, p, i, points);\n    ++i;\n  }\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","import {Adder} from \"d3-array\";\nimport {asin, atan2, cos, degrees, epsilon, epsilon2, hypot, radians, sin, sqrt} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nvar W0, W1,\n    X0, Y0, Z0,\n    X1, Y1, Z1,\n    X2, Y2, Z2,\n    lambda00, phi00, // first point\n    x0, y0, z0; // previous point\n\nvar centroidStream = {\n  sphere: noop,\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  }\n};\n\n// Arithmetic mean of Cartesian vectors.\nfunction centroidPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  centroidPointCartesian(cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi));\n}\n\nfunction centroidPointCartesian(x, y, z) {\n  ++W0;\n  X0 += (x - X0) / W0;\n  Y0 += (y - Y0) / W0;\n  Z0 += (z - Z0) / W0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidLinePointFirst;\n}\n\nfunction centroidLinePointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidStream.point = centroidLinePoint;\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLinePoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      w = atan2(sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\n// See J. E. Brock, The Inertia Tensor for a Spherical Triangle,\n// J. Applied Mechanics 42, 239 (1975).\nfunction centroidRingStart() {\n  centroidStream.point = centroidRingPointFirst;\n}\n\nfunction centroidRingEnd() {\n  centroidRingPoint(lambda00, phi00);\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingPointFirst(lambda, phi) {\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  centroidStream.point = centroidRingPoint;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidRingPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      cx = y0 * z - z0 * y,\n      cy = z0 * x - x0 * z,\n      cz = x0 * y - y0 * x,\n      m = hypot(cx, cy, cz),\n      w = asin(m), // line weight = angle\n      v = m && -w / m; // area weight multiplier\n  X2.add(v * cx);\n  Y2.add(v * cy);\n  Z2.add(v * cz);\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nexport default function(object) {\n  W0 = W1 =\n  X0 = Y0 = Z0 =\n  X1 = Y1 = Z1 = 0;\n  X2 = new Adder();\n  Y2 = new Adder();\n  Z2 = new Adder();\n  stream(object, centroidStream);\n\n  var x = +X2,\n      y = +Y2,\n      z = +Z2,\n      m = hypot(x, y, z);\n\n  // If the area-weighted ccentroid is undefined, fall back to length-weighted ccentroid.\n  if (m < epsilon2) {\n    x = X1, y = Y1, z = Z1;\n    // If the feature has zero length, fall back to arithmetic mean of point vectors.\n    if (W1 < epsilon) x = X0, y = Y0, z = Z0;\n    m = hypot(x, y, z);\n    // If the feature still has an undefined ccentroid, then return.\n    if (m < epsilon2) return [NaN, NaN];\n  }\n\n  return [atan2(y, x) * degrees, asin(z / m) * degrees];\n}\n","export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n","import compose from \"./compose.js\";\nimport {abs, asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n  return [lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    lambda += deltaLambda;\n    if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n    return [lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math.js\";\nimport {rotateRadians} from \"./rotation.js\";\n\n// Generates a circle centered at [0, 0], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(2),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n","import noop from \"../noop.js\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n","import {abs, epsilon} from \"./math.js\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n","import pointEqual from \"../pointEqual.js\";\nimport {epsilon} from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n        for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n        stream.lineEnd();\n        return;\n      }\n      // handle degenerate cases by moving the point\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n","import {Adder} from \"d3-array\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, epsilon2, halfPi, pi, quarterPi, sign, sin, tau} from \"./math.js\";\n\nfunction longitude(point) {\n  return abs(point[0]) <= pi ? point[0] : sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function(polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  var sum = new Adder();\n\n  if (sinPhi === 1) phi = halfPi + epsilon;\n  else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the points meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon2) ^ (winding & 1);\n}\n","import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {epsilon, halfPi} from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n","import clip from \"./index.js\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math.js\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n","import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian.js\";\nimport {circleStream} from \"../circle.js\";\nimport {abs, cos, epsilon, pi, radians, sqrt} from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\n\nexport default function(radius) {\n  var cr = cos(radius),\n      delta = 2 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2))\n            point1[2] = 1;\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1  n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n","export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n","import {abs, epsilon} from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygons polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n","import {range} from \"d3-array\";\nimport {abs, ceil, epsilon} from \"./math.js\";\n\nfunction graticuleX(y0, y1, dy) {\n  var y = range(y0, y1 - epsilon, dy).concat(y1);\n  return function(x) { return y.map(function(y) { return [x, y]; }); };\n}\n\nfunction graticuleY(x0, x1, dx) {\n  var x = range(x0, x1 - epsilon, dx).concat(x1);\n  return function(y) { return x.map(function(x) { return [x, y]; }); };\n}\n\nexport default function graticule() {\n  var x1, x0, X1, X0,\n      y1, y0, Y1, Y0,\n      dx = 10, dy = dx, DX = 90, DY = 360,\n      x, y, X, Y,\n      precision = 2.5;\n\n  function graticule() {\n    return {type: \"MultiLineString\", coordinates: lines()};\n  }\n\n  function lines() {\n    return range(ceil(X0 / DX) * DX, X1, DX).map(X)\n        .concat(range(ceil(Y0 / DY) * DY, Y1, DY).map(Y))\n        .concat(range(ceil(x0 / dx) * dx, x1, dx).filter(function(x) { return abs(x % DX) > epsilon; }).map(x))\n        .concat(range(ceil(y0 / dy) * dy, y1, dy).filter(function(y) { return abs(y % DY) > epsilon; }).map(y));\n  }\n\n  graticule.lines = function() {\n    return lines().map(function(coordinates) { return {type: \"LineString\", coordinates: coordinates}; });\n  };\n\n  graticule.outline = function() {\n    return {\n      type: \"Polygon\",\n      coordinates: [\n        X(X0).concat(\n        Y(Y1).slice(1),\n        X(X1).reverse().slice(1),\n        Y(Y0).reverse().slice(1))\n      ]\n    };\n  };\n\n  graticule.extent = function(_) {\n    if (!arguments.length) return graticule.extentMinor();\n    return graticule.extentMajor(_).extentMinor(_);\n  };\n\n  graticule.extentMajor = function(_) {\n    if (!arguments.length) return [[X0, Y0], [X1, Y1]];\n    X0 = +_[0][0], X1 = +_[1][0];\n    Y0 = +_[0][1], Y1 = +_[1][1];\n    if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n    if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.extentMinor = function(_) {\n    if (!arguments.length) return [[x0, y0], [x1, y1]];\n    x0 = +_[0][0], x1 = +_[1][0];\n    y0 = +_[0][1], y1 = +_[1][1];\n    if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n    if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.step = function(_) {\n    if (!arguments.length) return graticule.stepMinor();\n    return graticule.stepMajor(_).stepMinor(_);\n  };\n\n  graticule.stepMajor = function(_) {\n    if (!arguments.length) return [DX, DY];\n    DX = +_[0], DY = +_[1];\n    return graticule;\n  };\n\n  graticule.stepMinor = function(_) {\n    if (!arguments.length) return [dx, dy];\n    dx = +_[0], dy = +_[1];\n    return graticule;\n  };\n\n  graticule.precision = function(_) {\n    if (!arguments.length) return precision;\n    precision = +_;\n    x = graticuleX(y0, y1, 90);\n    y = graticuleY(x0, x1, precision);\n    X = graticuleX(Y0, Y1, 90);\n    Y = graticuleY(X0, X1, precision);\n    return graticule;\n  };\n\n  return graticule\n      .extentMajor([[-180, -90 + epsilon], [180, 90 - epsilon]])\n      .extentMinor([[-180, -80 - epsilon], [180, 80 + epsilon]]);\n}\n\nexport function graticule10() {\n  return graticule()();\n}\n","export default x => x;\n","import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","// Simple caching for constant-radius points.\nlet cacheDigits, cacheAppend, cacheRadius, cacheCircle;\n\nexport default class PathString {\n  constructor(digits) {\n    this._append = digits == null ? append : appendRound(digits);\n    this._radius = 4.5;\n    this._ = \"\";\n  }\n  pointRadius(_) {\n    this._radius = +_;\n    return this;\n  }\n  polygonStart() {\n    this._line = 0;\n  }\n  polygonEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line === 0) this._ += \"Z\";\n    this._point = NaN;\n  }\n  point(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._append`M${x},${y}`;\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._append`L${x},${y}`;\n        break;\n      }\n      default: {\n        this._append`M${x},${y}`;\n        if (this._radius !== cacheRadius || this._append !== cacheAppend) {\n          const r = this._radius;\n          const s = this._;\n          this._ = \"\"; // stash the old string so we can cache the circle path fragment\n          this._append`m0,${r}a${r},${r} 0 1,1 0,${-2 * r}a${r},${r} 0 1,1 0,${2 * r}z`;\n          cacheRadius = r;\n          cacheAppend = this._append;\n          cacheCircle = this._;\n          this._ = s;\n        }\n        this._ += cacheCircle;\n        break;\n      }\n    }\n  }\n  result() {\n    const result = this._;\n    this._ = \"\";\n    return result.length ? result : null;\n  }\n}\n\nfunction append(strings) {\n  let i = 1;\n  this._ += strings[0];\n  for (const j = strings.length; i < j; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  const d = Math.floor(digits);\n  if (!(d >= 0)) throw new RangeError(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  if (d !== cacheDigits) {\n    const k = 10 ** d;\n    cacheDigits = d;\n    cacheAppend = function append(strings) {\n      let i = 1;\n      this._ += strings[0];\n      for (const j = strings.length; i < j; ++i) {\n        this._ += Math.round(arguments[i] * k) / k + strings[i];\n      }\n    };\n  }\n  return cacheAppend;\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  let digits = 3,\n      pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    if (!arguments.length) return projection;\n    projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream;\n    return path;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString(digits)) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  path.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) digits = null;\n    else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    if (context === null) contextStream = new PathString(digits);\n    return path;\n  };\n\n  return path.projection(projection).digits(digits).context(context);\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import {default as geoStream} from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function(b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function(b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function(b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n","import {cartesian} from \"../cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math.js\";\nimport {transformer} from \"../transform.js\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n","import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport {cos, degrees, radians, sin, sqrt} from \"../math.js\";\nimport {rotateRadians} from \"../rotation.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport resample from \"./resample.js\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n  transform.invert = function(x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  if (!alpha) return scaleTranslate(k, dx, dy, sx, sy);\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n  transform.invert = function(x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, // pre-rotate\n      alpha = 0, // post-rotate angle\n      sx = 1, // reflectX\n      sy = 1, // reflectX\n      theta = null, preclip = clipAntimeridian, // pre-clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // post-clip extent\n      delta2 = 0.5, // precision\n      projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function(_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = scaleTranslateRotate(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n","import {degrees, pi, radians} from \"../math.js\";\nimport {projectionMutator} from \"./index.js\";\n\nexport function conicProjection(projectAt) {\n  var phi0 = 0,\n      phi1 = pi / 3,\n      m = projectionMutator(projectAt),\n      p = m(phi0, phi1);\n\n  p.parallels = function(_) {\n    return arguments.length ? m(phi0 = _[0] * radians, phi1 = _[1] * radians) : [phi0 * degrees, phi1 * degrees];\n  };\n\n  return p;\n}\n","import {asin, cos, sin} from \"../math.js\";\n\nexport function cylindricalEqualAreaRaw(phi0) {\n  var cosPhi0 = cos(phi0);\n\n  function forward(lambda, phi) {\n    return [lambda * cosPhi0, sin(phi) / cosPhi0];\n  }\n\n  forward.invert = function(x, y) {\n    return [x / cosPhi0, asin(y * cosPhi0)];\n  };\n\n  return forward;\n}\n","import {abs, asin, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {cylindricalEqualAreaRaw} from \"./cylindricalEqualArea.js\";\n\nexport function conicEqualAreaRaw(y0, y1) {\n  var sy0 = sin(y0), n = (sy0 + sin(y1)) / 2;\n\n  // Are the parallels symmetrical around the Equator?\n  if (abs(n) < epsilon) return cylindricalEqualAreaRaw(y0);\n\n  var c = 1 + sy0 * (2 * n - sy0), r0 = sqrt(c) / n;\n\n  function project(x, y) {\n    var r = sqrt(c - 2 * n * sin(y)) / n;\n    return [r * sin(x *= n), r0 - r * cos(x)];\n  }\n\n  project.invert = function(x, y) {\n    var r0y = r0 - y,\n        l = atan2(x, abs(r0y)) * sign(r0y);\n    if (r0y * n < 0)\n      l -= pi * sign(x) * sign(r0y);\n    return [l / n, asin((c - (x * x + r0y * r0y) * n * n) / (2 * n))];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEqualAreaRaw)\n      .scale(155.424)\n      .center([0, 33.6442]);\n}\n","import conicEqualArea from \"./conicEqualArea.js\";\n\nexport default function() {\n  return conicEqualArea()\n      .parallels([29.5, 45.5])\n      .scale(1070)\n      .translate([480, 250])\n      .rotate([96, 0])\n      .center([-0.6, 38.7]);\n}\n","import {epsilon} from \"../math.js\";\nimport albers from \"./albers.js\";\nimport conicEqualArea from \"./conicEqualArea.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\n\n// The projections must have mutually exclusive clip regions on the sphere,\n// as this will avoid emitting interleaving lines and polygons.\nfunction multiplex(streams) {\n  var n = streams.length;\n  return {\n    point: function(x, y) { var i = -1; while (++i < n) streams[i].point(x, y); },\n    sphere: function() { var i = -1; while (++i < n) streams[i].sphere(); },\n    lineStart: function() { var i = -1; while (++i < n) streams[i].lineStart(); },\n    lineEnd: function() { var i = -1; while (++i < n) streams[i].lineEnd(); },\n    polygonStart: function() { var i = -1; while (++i < n) streams[i].polygonStart(); },\n    polygonEnd: function() { var i = -1; while (++i < n) streams[i].polygonEnd(); }\n  };\n}\n\n// A composite projection for the United States, configured by default for\n// 960500. The projection also works quite well at 960600 if you change the\n// scale to 1285 and adjust the translate accordingly. The set of standard\n// parallels for each region comes from USGS, which is published here:\n// http://egsc.usgs.gov/isb/pubs/MapProjections/projections.html#albers\nexport default function() {\n  var cache,\n      cacheStream,\n      lower48 = albers(), lower48Point,\n      alaska = conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), alaskaPoint, // EPSG:3338\n      hawaii = conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), hawaiiPoint, // ESRI:102007\n      point, pointStream = {point: function(x, y) { point = [x, y]; }};\n\n  function albersUsa(coordinates) {\n    var x = coordinates[0], y = coordinates[1];\n    return point = null,\n        (lower48Point.point(x, y), point)\n        || (alaskaPoint.point(x, y), point)\n        || (hawaiiPoint.point(x, y), point);\n  }\n\n  albersUsa.invert = function(coordinates) {\n    var k = lower48.scale(),\n        t = lower48.translate(),\n        x = (coordinates[0] - t[0]) / k,\n        y = (coordinates[1] - t[1]) / k;\n    return (y >= 0.120 && y < 0.234 && x >= -0.425 && x < -0.214 ? alaska\n        : y >= 0.166 && y < 0.234 && x >= -0.214 && x < -0.115 ? hawaii\n        : lower48).invert(coordinates);\n  };\n\n  albersUsa.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = multiplex([lower48.stream(cacheStream = stream), alaska.stream(stream), hawaii.stream(stream)]);\n  };\n\n  albersUsa.precision = function(_) {\n    if (!arguments.length) return lower48.precision();\n    lower48.precision(_), alaska.precision(_), hawaii.precision(_);\n    return reset();\n  };\n\n  albersUsa.scale = function(_) {\n    if (!arguments.length) return lower48.scale();\n    lower48.scale(_), alaska.scale(_ * 0.35), hawaii.scale(_);\n    return albersUsa.translate(lower48.translate());\n  };\n\n  albersUsa.translate = function(_) {\n    if (!arguments.length) return lower48.translate();\n    var k = lower48.scale(), x = +_[0], y = +_[1];\n\n    lower48Point = lower48\n        .translate(_)\n        .clipExtent([[x - 0.455 * k, y - 0.238 * k], [x + 0.455 * k, y + 0.238 * k]])\n        .stream(pointStream);\n\n    alaskaPoint = alaska\n        .translate([x - 0.307 * k, y + 0.201 * k])\n        .clipExtent([[x - 0.425 * k + epsilon, y + 0.120 * k + epsilon], [x - 0.214 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    hawaiiPoint = hawaii\n        .translate([x - 0.205 * k, y + 0.212 * k])\n        .clipExtent([[x - 0.214 * k + epsilon, y + 0.166 * k + epsilon], [x - 0.115 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    return reset();\n  };\n\n  albersUsa.fitExtent = function(extent, object) {\n    return fitExtent(albersUsa, extent, object);\n  };\n\n  albersUsa.fitSize = function(size, object) {\n    return fitSize(albersUsa, size, object);\n  };\n\n  albersUsa.fitWidth = function(width, object) {\n    return fitWidth(albersUsa, width, object);\n  };\n\n  albersUsa.fitHeight = function(height, object) {\n    return fitHeight(albersUsa, height, object);\n  };\n\n  function reset() {\n    cache = cacheStream = null;\n    return albersUsa;\n  }\n\n  return albersUsa.scale(1070);\n}\n","import {asin, atan2, cos, sin, sqrt} from \"../math.js\";\n\nexport function azimuthalRaw(scale) {\n  return function(x, y) {\n    var cx = cos(x),\n        cy = cos(y),\n        k = scale(cx * cy);\n        if (k === Infinity) return [2, 0];\n    return [\n      k * cy * sin(x),\n      k * sin(y)\n    ];\n  }\n}\n\nexport function azimuthalInvert(angle) {\n  return function(x, y) {\n    var z = sqrt(x * x + y * y),\n        c = angle(z),\n        sc = sin(c),\n        cc = cos(c);\n    return [\n      atan2(x * sc, z * cc),\n      asin(z && y * sc / z)\n    ];\n  }\n}\n","import {asin, sqrt} from \"../math.js\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport var azimuthalEqualAreaRaw = azimuthalRaw(function(cxcy) {\n  return sqrt(2 / (1 + cxcy));\n});\n\nazimuthalEqualAreaRaw.invert = azimuthalInvert(function(z) {\n  return 2 * asin(z / 2);\n});\n\nexport default function() {\n  return projection(azimuthalEqualAreaRaw)\n      .scale(124.75)\n      .clipAngle(180 - 1e-3);\n}\n","import {acos, sin} from \"../math.js\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport var azimuthalEquidistantRaw = azimuthalRaw(function(c) {\n  return (c = acos(c)) && c / sin(c);\n});\n\nazimuthalEquidistantRaw.invert = azimuthalInvert(function(z) {\n  return z;\n});\n\nexport default function() {\n  return projection(azimuthalEquidistantRaw)\n      .scale(79.4188)\n      .clipAngle(180 - 1e-3);\n}\n","import {atan, exp, halfPi, log, pi, tan, tau} from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\n\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function(x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function() {\n  return mercatorProjection(mercatorRaw)\n      .scale(961 / tau);\n}\n\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null, y0, x1, y1; // clip extent\n\n  m.scale = function(_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function(_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function(_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function(_) {\n    return arguments.length ? ((_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1])), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null\n        ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw\n        ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]]\n        : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}\n","import {abs, atan, atan2, cos, epsilon, halfPi, log, pi, pow, sign, sin, sqrt, tan} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {mercatorRaw} from \"./mercator.js\";\n\nfunction tany(y) {\n  return tan((halfPi + y) / 2);\n}\n\nexport function conicConformalRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : log(cy0 / cos(y1)) / log(tany(y1) / tany(y0)),\n      f = cy0 * pow(tany(y0), n) / n;\n\n  if (!n) return mercatorRaw;\n\n  function project(x, y) {\n    if (f > 0) { if (y < -halfPi + epsilon) y = -halfPi + epsilon; }\n    else { if (y > halfPi - epsilon) y = halfPi - epsilon; }\n    var r = f / pow(tany(y), n);\n    return [r * sin(n * x), f - r * cos(n * x)];\n  }\n\n  project.invert = function(x, y) {\n    var fy = f - y, r = sign(n) * sqrt(x * x + fy * fy),\n      l = atan2(x, abs(fy)) * sign(fy);\n    if (fy * n < 0)\n      l -= pi * sign(x) * sign(fy);\n    return [l / n, 2 * atan(pow(f / r, 1 / n)) - halfPi];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicConformalRaw)\n      .scale(109.5)\n      .parallels([30, 30]);\n}\n","import projection from \"./index.js\";\n\nexport function equirectangularRaw(lambda, phi) {\n  return [lambda, phi];\n}\n\nequirectangularRaw.invert = equirectangularRaw;\n\nexport default function() {\n  return projection(equirectangularRaw)\n      .scale(152.63);\n}\n","import {abs, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {equirectangularRaw} from \"./equirectangular.js\";\n\nexport function conicEquidistantRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : (cy0 - cos(y1)) / (y1 - y0),\n      g = cy0 / n + y0;\n\n  if (abs(n) < epsilon) return equirectangularRaw;\n\n  function project(x, y) {\n    var gy = g - y, nx = n * x;\n    return [gy * sin(nx), g - gy * cos(nx)];\n  }\n\n  project.invert = function(x, y) {\n    var gy = g - y,\n        l = atan2(x, abs(gy)) * sign(gy);\n    if (gy * n < 0)\n      l -= pi * sign(x) * sign(gy);\n    return [l / n, g - sign(n) * sqrt(x * x + gy * gy)];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEquidistantRaw)\n      .scale(131.154)\n      .center([0, 13.9389]);\n}\n","import projection from \"./index.js\";\nimport {abs, asin, cos, epsilon2, sin, sqrt} from \"../math.js\";\n\nvar A1 = 1.340264,\n    A2 = -0.081106,\n    A3 = 0.000893,\n    A4 = 0.003796,\n    M = sqrt(3) / 2,\n    iterations = 12;\n\nexport function equalEarthRaw(lambda, phi) {\n  var l = asin(M * sin(phi)), l2 = l * l, l6 = l2 * l2 * l2;\n  return [\n    lambda * cos(l) / (M * (A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2))),\n    l * (A1 + A2 * l2 + l6 * (A3 + A4 * l2))\n  ];\n}\n\nequalEarthRaw.invert = function(x, y) {\n  var l = y, l2 = l * l, l6 = l2 * l2 * l2;\n  for (var i = 0, delta, fy, fpy; i < iterations; ++i) {\n    fy = l * (A1 + A2 * l2 + l6 * (A3 + A4 * l2)) - y;\n    fpy = A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2);\n    l -= delta = fy / fpy, l2 = l * l, l6 = l2 * l2 * l2;\n    if (abs(delta) < epsilon2) break;\n  }\n  return [\n    M * x * (A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2)) / cos(l),\n    asin(sin(l) / M)\n  ];\n};\n\nexport default function() {\n  return projection(equalEarthRaw)\n      .scale(177.158);\n}\n","import {atan, cos, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function gnomonicRaw(x, y) {\n  var cy = cos(y), k = cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\ngnomonicRaw.invert = azimuthalInvert(atan);\n\nexport default function() {\n  return projection(gnomonicRaw)\n      .scale(144.049)\n      .clipAngle(60);\n}\n","import {asin, cos, epsilon, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function orthographicRaw(x, y) {\n  return [cos(y) * sin(x), sin(y)];\n}\n\northographicRaw.invert = azimuthalInvert(asin);\n\nexport default function() {\n  return projection(orthographicRaw)\n      .scale(249.5)\n      .clipAngle(90 + epsilon);\n}\n","import {atan, cos, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function stereographicRaw(x, y) {\n  var cy = cos(y), k = 1 + cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\nstereographicRaw.invert = azimuthalInvert(function(z) {\n  return 2 * atan(z);\n});\n\nexport default function() {\n  return projection(stereographicRaw)\n      .scale(250)\n      .clipAngle(142);\n}\n","import {atan, exp, halfPi, log, tan} from \"../math.js\";\nimport {mercatorProjection} from \"./mercator.js\";\n\nexport function transverseMercatorRaw(lambda, phi) {\n  return [log(tan((halfPi + phi) / 2)), -lambda];\n}\n\ntransverseMercatorRaw.invert = function(x, y) {\n  return [-y, 2 * atan(exp(x)) - halfPi];\n};\n\nexport default function() {\n  var m = mercatorProjection(transverseMercatorRaw),\n      center = m.center,\n      rotate = m.rotate;\n\n  m.center = function(_) {\n    return arguments.length ? center([-_[1], _[0]]) : (_ = center(), [_[1], -_[0]]);\n  };\n\n  m.rotate = function(_) {\n    return arguments.length ? rotate([_[0], _[1], _.length > 2 ? _[2] + 90 : 90]) : (_ = rotate(), [_[0], _[1], _[2] - 90]);\n  };\n\n  return rotate([0, 0, 90])\n      .scale(159.155);\n}\n","function defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\nfunction meanX(children) {\n  return children.reduce(meanXReduce, 0) / children.length;\n}\n\nfunction meanXReduce(x, c) {\n  return x + c.x;\n}\n\nfunction maxY(children) {\n  return 1 + children.reduce(maxYReduce, 0);\n}\n\nfunction maxYReduce(y, c) {\n  return Math.max(y, c.y);\n}\n\nfunction leafLeft(node) {\n  var children;\n  while (children = node.children) node = children[0];\n  return node;\n}\n\nfunction leafRight(node) {\n  var children;\n  while (children = node.children) node = children[children.length - 1];\n  return node;\n}\n\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = false;\n\n  function cluster(root) {\n    var previousNode,\n        x = 0;\n\n    // First walk, computing the initial x & y values.\n    root.eachAfter(function(node) {\n      var children = node.children;\n      if (children) {\n        node.x = meanX(children);\n        node.y = maxY(children);\n      } else {\n        node.x = previousNode ? x += separation(node, previousNode) : 0;\n        node.y = 0;\n        previousNode = node;\n      }\n    });\n\n    var left = leafLeft(root),\n        right = leafRight(root),\n        x0 = left.x - separation(left, right) / 2,\n        x1 = right.x + separation(right, left) / 2;\n\n    // Second walk, normalizing x & y to the desired size.\n    return root.eachAfter(nodeSize ? function(node) {\n      node.x = (node.x - root.x) * dx;\n      node.y = (root.y - node.y) * dy;\n    } : function(node) {\n      node.x = (node.x - x0) / (x1 - x0) * dx;\n      node.y = (1 - (root.y ? node.y / root.y : 1)) * dy;\n    });\n  }\n\n  cluster.separation = function(x) {\n    return arguments.length ? (separation = x, cluster) : separation;\n  };\n\n  cluster.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], cluster) : (nodeSize ? null : [dx, dy]);\n  };\n\n  cluster.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], cluster) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return cluster;\n}\n","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Dont include the roots parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n","export function optional(f) {\n  return f == null ? null : required(f);\n}\n\nexport function required(f) {\n  if (typeof f !== \"function\") throw new Error;\n  return f;\n}\n","import {optional} from \"./accessors.js\";\nimport {Node, computeHeight} from \"./hierarchy/index.js\";\n\nvar preroot = {depth: -1},\n    ambiguous = {},\n    imputed = {};\n\nfunction defaultId(d) {\n  return d.id;\n}\n\nfunction defaultParentId(d) {\n  return d.parentId;\n}\n\nexport default function() {\n  var id = defaultId,\n      parentId = defaultParentId,\n      path;\n\n  function stratify(data) {\n    var nodes = Array.from(data),\n        currentId = id,\n        currentParentId = parentId,\n        n,\n        d,\n        i,\n        root,\n        parent,\n        node,\n        nodeId,\n        nodeKey,\n        nodeByKey = new Map;\n\n    if (path != null) {\n      const I = nodes.map((d, i) => normalize(path(d, i, data)));\n      const P = I.map(parentof);\n      const S = new Set(I).add(\"\");\n      for (const i of P) {\n        if (!S.has(i)) {\n          S.add(i);\n          I.push(i);\n          P.push(parentof(i));\n          nodes.push(imputed);\n        }\n      }\n      currentId = (_, i) => I[i];\n      currentParentId = (_, i) => P[i];\n    }\n\n    for (i = 0, n = nodes.length; i < n; ++i) {\n      d = nodes[i], node = nodes[i] = new Node(d);\n      if ((nodeId = currentId(d, i, data)) != null && (nodeId += \"\")) {\n        nodeKey = node.id = nodeId;\n        nodeByKey.set(nodeKey, nodeByKey.has(nodeKey) ? ambiguous : node);\n      }\n      if ((nodeId = currentParentId(d, i, data)) != null && (nodeId += \"\")) {\n        node.parent = nodeId;\n      }\n    }\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i];\n      if (nodeId = node.parent) {\n        parent = nodeByKey.get(nodeId);\n        if (!parent) throw new Error(\"missing: \" + nodeId);\n        if (parent === ambiguous) throw new Error(\"ambiguous: \" + nodeId);\n        if (parent.children) parent.children.push(node);\n        else parent.children = [node];\n        node.parent = parent;\n      } else {\n        if (root) throw new Error(\"multiple roots\");\n        root = node;\n      }\n    }\n\n    if (!root) throw new Error(\"no root\");\n\n    // When imputing internal nodes, only introduce roots if needed.\n    // Then replace the imputed marker data with null.\n    if (path != null) {\n      while (root.data === imputed && root.children.length === 1) {\n        root = root.children[0], --n;\n      }\n      for (let i = nodes.length - 1; i >= 0; --i) {\n        node = nodes[i];\n        if (node.data !== imputed) break;\n        node.data = null;\n      }\n    }\n\n    root.parent = preroot;\n    root.eachBefore(function(node) { node.depth = node.parent.depth + 1; --n; }).eachBefore(computeHeight);\n    root.parent = null;\n    if (n > 0) throw new Error(\"cycle\");\n\n    return root;\n  }\n\n  stratify.id = function(x) {\n    return arguments.length ? (id = optional(x), stratify) : id;\n  };\n\n  stratify.parentId = function(x) {\n    return arguments.length ? (parentId = optional(x), stratify) : parentId;\n  };\n\n  stratify.path = function(x) {\n    return arguments.length ? (path = optional(x), stratify) : path;\n  };\n\n  return stratify;\n}\n\n// To normalize a path, we coerce to a string, strip the trailing slash if any\n// (as long as the trailing slash is not immediately preceded by another slash),\n// and add leading slash if missing.\nfunction normalize(path) {\n  path = `${path}`;\n  let i = path.length;\n  if (slash(path, i - 1) && !slash(path, i - 2)) path = path.slice(0, -1);\n  return path[0] === \"/\" ? path : `/${path}`;\n}\n\n// Walk backwards to find the first slash that is not the leading slash, e.g.:\n// \"/foo/bar\"  \"/foo\", \"/foo\"  \"/\", \"/\"  \"\". (The root is special-cased\n// because the id of the root must be a truthy value.)\nfunction parentof(path) {\n  let i = path.length;\n  if (i < 2) return \"\";\n  while (--i > 1) if (slash(path, i)) break;\n  return path.slice(0, i);\n}\n\n// Slashes can be escaped; to determine whether a slash is a path delimiter, we\n// count the number of preceding backslashes escaping the forward slash: an odd\n// number indicates an escaped forward slash.\nfunction slash(path, i) {\n  if (path[i] === \"/\") {\n    let k = 0;\n    while (i > 0 && path[--i] === \"\\\\\") ++k;\n    if ((k & 1) === 0) return true;\n  }\n  return false;\n}\n","import {Node} from \"./hierarchy/index.js\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-s ancestor is a sibling of v, returns vi-s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst mul = 0x19660D;\nconst inc = 0x3C6EF35F;\nconst eps = 1 / 0x100000000;\n\nexport default function lcg(seed = Math.random()) {\n  let state = (0 <= seed && seed < 1 ? seed / eps : Math.abs(seed)) | 0;\n  return () => (state = mul * state + inc | 0, eps * (state >>> 0));\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {linearish} from \"./linear.js\";\nimport number from \"./number.js\";\n\nexport default function identity(domain) {\n  var unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : x;\n  }\n\n  scale.invert = scale;\n\n  scale.domain = scale.range = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), scale) : domain.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return identity(domain).unknown(unknown);\n  };\n\n  domain = arguments.length ? Array.from(domain, number) : [0, 1];\n\n  return linearish(scale);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {ticks} from \"d3-array\";\nimport {format, formatSpecifier} from \"d3-format\";\nimport nice from \"./nice.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : x => Math.pow(base, x);\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), x => Math.log(x) / base);\n}\n\nfunction reflect(f) {\n  return (x, k) => -f(-x, k);\n}\n\nexport function loggish(transform) {\n  const scale = transform(transformLog, transformExp);\n  const domain = scale.domain;\n  let base = 10;\n  let logs;\n  let pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = count => {\n    const d = domain();\n    let u = d[0];\n    let v = d[d.length - 1];\n    const r = v < u;\n\n    if (r) ([u, v] = [v, u]);\n\n    let i = logs(u);\n    let j = logs(v);\n    let k;\n    let t;\n    const n = count == null ? 10 : +count;\n    let z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1; k < base; ++k) {\n          t = i < 0 ? k / pows(-i) : k * pows(i);\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1; k >= 1; --k) {\n          t = i > 0 ? k / pows(-i) : k * pows(i);\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = (count, specifier) => {\n    if (count == null) count = 10;\n    if (specifier == null) specifier = base === 10 ? \"s\" : \",\";\n    if (typeof specifier !== \"function\") {\n      if (!(base % 1) && (specifier = formatSpecifier(specifier)).precision == null) specifier.trim = true;\n      specifier = format(specifier);\n    }\n    if (count === Infinity) return specifier;\n    const k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return d => {\n      let i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = () => {\n    return domain(nice(domain(), {\n      floor: x => pows(Math.floor(logs(x))),\n      ceil: x => pows(Math.ceil(logs(x)))\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  const scale = loggish(transformer()).domain([1, 10]);\n  scale.copy = () => copy(scale, log()).base(scale.base());\n  initRange.apply(scale, arguments);\n  return scale;\n}\n","import {linearish} from \"./linear.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformSymlog(c) {\n  return function(x) {\n    return Math.sign(x) * Math.log1p(Math.abs(x / c));\n  };\n}\n\nfunction transformSymexp(c) {\n  return function(x) {\n    return Math.sign(x) * Math.expm1(Math.abs(x)) * c;\n  };\n}\n\nexport function symlogish(transform) {\n  var c = 1, scale = transform(transformSymlog(c), transformSymexp(c));\n\n  scale.constant = function(_) {\n    return arguments.length ? transform(transformSymlog(c = +_), transformSymexp(c)) : c;\n  };\n\n  return linearish(scale);\n}\n\nexport default function symlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, symlog()).constant(scale.constant());\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","import {linearish} from \"./linear.js\";\nimport {copy, identity, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n","import {ascending, bisect, quantileSorted as threshold} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport default function quantile() {\n  var domain = [],\n      range = [],\n      thresholds = [],\n      unknown;\n\n  function rescale() {\n    var i = 0, n = Math.max(1, range.length);\n    thresholds = new Array(n - 1);\n    while (++i < n) thresholds[i - 1] = threshold(domain, i / n);\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : range[bisect(thresholds, x)];\n  }\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN] : [\n      i > 0 ? thresholds[i - 1] : domain[0],\n      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\n    ];\n  };\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [];\n    for (let d of _) if (d != null && !isNaN(d = +d)) domain.push(d);\n    domain.sort(ascending);\n    return rescale();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.quantiles = function() {\n    return thresholds.slice();\n  };\n\n  scale.copy = function() {\n    return quantile()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","import {bisect} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      unknown,\n      n = 1;\n\n  function scale(x) {\n    return x != null && x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","const t0 = new Date, t1 = new Date;\n\nexport function timeInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = (date) => {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = (date) => {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = (date) => {\n    const d0 = interval(date), d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = (date, step) => {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = (start, stop, step) => {\n    const range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    let previous;\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = (test) => {\n    return timeInterval((date) => {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, (date, step) => {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = (start, end) => {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = (step) => {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? (d) => field(d) % step === 0\n              : (d) => interval.count(0, d) % step === 0);\n    };\n  }\n\n  return interval;\n}\n","import {timeInterval} from \"./interval.js\";\n\nexport const millisecond = timeInterval(() => {\n  // noop\n}, (date, step) => {\n  date.setTime(+date + step);\n}, (start, end) => {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = (k) => {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return timeInterval((date) => {\n    date.setTime(Math.floor(date / k) * k);\n  }, (date, step) => {\n    date.setTime(+date + step * k);\n  }, (start, end) => {\n    return (end - start) / k;\n  });\n};\n\nexport const milliseconds = millisecond.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import {timeInterval} from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nexport const second = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds());\n}, (date, step) => {\n  date.setTime(+date + step * durationSecond);\n}, (start, end) => {\n  return (end - start) / durationSecond;\n}, (date) => {\n  return date.getUTCSeconds();\n});\n\nexport const seconds = second.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeMinute = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getMinutes();\n});\n\nexport const timeMinutes = timeMinute.range;\n\nexport const utcMinute = timeInterval((date) => {\n  date.setUTCSeconds(0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getUTCMinutes();\n});\n\nexport const utcMinutes = utcMinute.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeHour = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getHours();\n});\n\nexport const timeHours = timeHour.range;\n\nexport const utcHour = timeInterval((date) => {\n  date.setUTCMinutes(0, 0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getUTCHours();\n});\n\nexport const utcHours = utcHour.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nexport const timeDay = timeInterval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport const timeDays = timeDay.range;\n\nexport const utcDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return date.getUTCDate() - 1;\n});\n\nexport const utcDays = utcDay.range;\n\nexport const unixDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return Math.floor(date / durationDay);\n});\n\nexport const unixDays = unixDay.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction timeWeekday(i) {\n  return timeInterval((date) => {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setDate(date.getDate() + step * 7);\n  }, (start, end) => {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport const timeSunday = timeWeekday(0);\nexport const timeMonday = timeWeekday(1);\nexport const timeTuesday = timeWeekday(2);\nexport const timeWednesday = timeWeekday(3);\nexport const timeThursday = timeWeekday(4);\nexport const timeFriday = timeWeekday(5);\nexport const timeSaturday = timeWeekday(6);\n\nexport const timeSundays = timeSunday.range;\nexport const timeMondays = timeMonday.range;\nexport const timeTuesdays = timeTuesday.range;\nexport const timeWednesdays = timeWednesday.range;\nexport const timeThursdays = timeThursday.range;\nexport const timeFridays = timeFriday.range;\nexport const timeSaturdays = timeSaturday.range;\n\nfunction utcWeekday(i) {\n  return timeInterval((date) => {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, (start, end) => {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport const utcSunday = utcWeekday(0);\nexport const utcMonday = utcWeekday(1);\nexport const utcTuesday = utcWeekday(2);\nexport const utcWednesday = utcWeekday(3);\nexport const utcThursday = utcWeekday(4);\nexport const utcFriday = utcWeekday(5);\nexport const utcSaturday = utcWeekday(6);\n\nexport const utcSundays = utcSunday.range;\nexport const utcMondays = utcMonday.range;\nexport const utcTuesdays = utcTuesday.range;\nexport const utcWednesdays = utcWednesday.range;\nexport const utcThursdays = utcThursday.range;\nexport const utcFridays = utcFriday.range;\nexport const utcSaturdays = utcSaturday.range;\n","import {timeInterval} from \"./interval.js\";\n\nexport const timeMonth = timeInterval((date) => {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setMonth(date.getMonth() + step);\n}, (start, end) => {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, (date) => {\n  return date.getMonth();\n});\n\nexport const timeMonths = timeMonth.range;\n\nexport const utcMonth = timeInterval((date) => {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, (start, end) => {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, (date) => {\n  return date.getUTCMonth();\n});\n\nexport const utcMonths = utcMonth.range;\n","import {timeInterval} from \"./interval.js\";\n\nexport const timeYear = timeInterval((date) => {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setFullYear(date.getFullYear() + step);\n}, (start, end) => {\n  return end.getFullYear() - start.getFullYear();\n}, (date) => {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\ntimeYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport const timeYears = timeYear.range;\n\nexport const utcYear = timeInterval((date) => {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, (start, end) => {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, (date) => {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport const utcYears = utcYear.range;\n","import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport {millisecond} from \"./millisecond.js\";\nimport {second} from \"./second.js\";\nimport {timeMinute, utcMinute} from \"./minute.js\";\nimport {timeHour, utcHour} from \"./hour.js\";\nimport {timeDay, unixDay} from \"./day.js\";\nimport {timeSunday, utcSunday} from \"./week.js\";\nimport {timeMonth, utcMonth} from \"./month.js\";\nimport {timeYear, utcYear} from \"./year.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, unixDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(timeYear, timeMonth, timeSunday, timeDay, timeHour, timeMinute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","import {utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcTicks, utcTickInterval} from \"d3-time\";\nimport {utcFormat} from \"d3-time-format\";\nimport {calendar} from \"./time.js\";\nimport {initRange} from \"./init.js\";\n\nexport default function utcTime() {\n  return initRange.apply(calendar(utcTicks, utcTickInterval, utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]), arguments);\n}\n","import {interpolate, interpolateRound} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1;\n      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n","import {interpolate, interpolateRound, piecewise} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {copy} from \"./sequential.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 0.5,\n      x2 = 1,\n      s = 1,\n      t0,\n      t1,\n      t2,\n      k10,\n      k21,\n      interpolator = identity,\n      transform,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (x = 0.5 + ((x = +transform(x)) - t1) * (s * x < s * t1 ? k10 : k21), interpolator(clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1, x2] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), t2 = transform(x2 = +x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), s = t1 < t0 ? -1 : 1, scale) : [x0, x1, x2];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1, r2;\n      return arguments.length ? ([r0, r1, r2] = _, interpolator = piecewise(interpolate, [r0, r1, r2]), scale) : [interpolator(0), interpolator(0.5), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), t2 = t(x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), s = t1 < t0 ? -1 : 1;\n    return scale;\n  };\n}\n\nexport default function diverging() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, diverging());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingLog() {\n  var scale = loggish(transformer()).domain([0.1, 1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, divergingLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, divergingSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, divergingPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingSqrt() {\n  return divergingPow.apply(null, arguments).exponent(0.5);\n}\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors.js\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab\");\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default scheme => interpolateRgbBasis(scheme[scheme.length - 1]);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","export default function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(-4.54 - t * (35.34 - t * (2381.73 - t * (6402.7 - t * (7024.72 - t * 2710.57))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(32.49 + t * (170.73 + t * (52.82 - t * (131.46 - t * (176.58 - t * 67.37))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(81.24 + t * (442.36 - t * (2482.43 - t * (6167.24 - t * (6614.94 - t * 2475.67)))))))\n      + \")\";\n}\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import {rgb} from \"d3-color\";\n\nvar c = rgb(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\nexport default function(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n}\n","export default function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(34.61 + t * (1172.33 - t * (10793.56 - t * (33300.12 - t * (38394.49 - t * 14825.05))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(23.31 + t * (557.33 + t * (1225.33 - t * (3574.96 - t * (1073.77 + t * 707.56))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(27.2 + t * (3211.1 - t * (15327.97 - t * (27814 - t * (22569.18 - t * 6838.66)))))))\n      + \")\";\n}\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export const abs = Math.abs;\nexport const atan2 = Math.atan2;\nexport const cos = Math.cos;\nexport const max = Math.max;\nexport const min = Math.min;\nexport const sin = Math.sin;\nexport const sqrt = Math.sqrt;\n\nexport const epsilon = 1e-12;\nexport const pi = Math.PI;\nexport const halfPi = pi / 2;\nexport const tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {Path} from \"d3-path\";\n\nexport function withPath(shape) {\n  let digits = 3;\n\n  shape.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) {\n      digits = null;\n    } else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    return shape;\n  };\n\n  return () => new Path(digits);\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(line);\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(area);\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","import pointRadial from \"../pointRadial.js\";\n\nclass Bump {\n  constructor(context, x) {\n    this._context = context;\n    this._x = x;\n  }\n  areaStart() {\n    this._line = 0;\n  }\n  areaEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  }\n  point(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: {\n        this._point = 1;\n        if (this._line) this._context.lineTo(x, y);\n        else this._context.moveTo(x, y);\n        break;\n      }\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._x) this._context.bezierCurveTo(this._x0 = (this._x0 + x) / 2, this._y0, this._x0, y, x, y);\n        else this._context.bezierCurveTo(this._x0, this._y0 = (this._y0 + y) / 2, x, this._y0, x, y);\n        break;\n      }\n    }\n    this._x0 = x, this._y0 = y;\n  }\n}\n\nclass BumpRadial {\n  constructor(context) {\n    this._context = context;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {}\n  point(x, y) {\n    x = +x, y = +y;\n    if (this._point === 0) {\n      this._point = 1;\n    } else {\n      const p0 = pointRadial(this._x0, this._y0);\n      const p1 = pointRadial(this._x0, this._y0 = (this._y0 + y) / 2);\n      const p2 = pointRadial(x, this._y0);\n      const p3 = pointRadial(x, y);\n      this._context.moveTo(...p0);\n      this._context.bezierCurveTo(...p1, ...p2, ...p3);\n    }\n    this._x0 = x, this._y0 = y;\n  }\n}\n\nexport function bumpX(context) {\n  return new Bump(context, true);\n}\n\nexport function bumpY(context) {\n  return new Bump(context, false);\n}\n\nexport function bumpRadial(context) {\n  return new BumpRadial(context);\n}\n","import {min, sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size + min(size / 28, 0.75)) * 0.59436;\n    const t = r / 2;\n    const u = t * sqrt3;\n    context.moveTo(0, r);\n    context.lineTo(0, -r);\n    context.moveTo(-u, -t);\n    context.lineTo(u, t);\n    context.moveTo(-u, t);\n    context.lineTo(u, -t);\n  }\n};\n","import {pi, sqrt, tau} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / pi);\n    context.moveTo(r, 0);\n    context.arc(0, 0, r, 0, tau);\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / 5) / 2;\n    context.moveTo(-3 * r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, -3 * r);\n    context.lineTo(r, -3 * r);\n    context.lineTo(r, -r);\n    context.lineTo(3 * r, -r);\n    context.lineTo(3 * r, r);\n    context.lineTo(r, r);\n    context.lineTo(r, 3 * r);\n    context.lineTo(-r, 3 * r);\n    context.lineTo(-r, r);\n    context.lineTo(-3 * r, r);\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nconst tan30 = sqrt(1 / 3);\nconst tan30_2 = tan30 * 2;\n\nexport default {\n  draw(context, size) {\n    const y = sqrt(size / tan30_2);\n    const x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size) * 0.62625;\n    context.moveTo(0, -r);\n    context.lineTo(r, 0);\n    context.lineTo(0, r);\n    context.lineTo(-r, 0);\n    context.closePath();\n  }\n};\n","import {min, sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size - min(size / 7, 2)) * 0.87559;\n    context.moveTo(-r, 0);\n    context.lineTo(r, 0);\n    context.moveTo(0, r);\n    context.lineTo(0, -r);\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const w = sqrt(size);\n    const x = -w / 2;\n    context.rect(x, x, w, w);\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size) * 0.4431;\n    context.moveTo(r, r);\n    context.lineTo(r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, r);\n    context.closePath();\n  }\n};\n","import {sin, cos, sqrt, pi, tau} from \"../math.js\";\n\nconst ka = 0.89081309152928522810;\nconst kr = sin(pi / 10) / sin(7 * pi / 10);\nconst kx = sin(tau / 10) * kr;\nconst ky = -cos(tau / 10) * kr;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size * ka);\n    const x = kx * r;\n    const y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (let i = 1; i < 5; ++i) {\n      const a = tau * i / 5;\n      const c = cos(a);\n      const s = sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const y = -sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const s = sqrt(size) * 0.6824;\n    const t = s  / 2;\n    const u = (s * sqrt3) / 2; // cos(Math.PI / 6)\n    context.moveTo(0, -s);\n    context.lineTo(u, t);\n    context.lineTo(-u, t);\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nconst c = -0.5;\nconst s = sqrt(3) / 2;\nconst k = 1 / sqrt(12);\nconst a = (k / 2 + 1) * 3;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / a);\n    const x0 = r / 2, y0 = r * k;\n    const x1 = x0, y1 = r * k + r;\n    const x2 = -x1, y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n","import {min, sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size - min(size / 6, 1.7)) * 0.6189;\n    context.moveTo(-r, -r);\n    context.lineTo(r, r);\n    context.moveTo(-r, r);\n    context.lineTo(r, -r);\n  }\n};\n","import constant from \"./constant.js\";\nimport {withPath} from \"./path.js\";\nimport asterisk from \"./symbol/asterisk.js\";\nimport circle from \"./symbol/circle.js\";\nimport cross from \"./symbol/cross.js\";\nimport diamond from \"./symbol/diamond.js\";\nimport diamond2 from \"./symbol/diamond2.js\";\nimport plus from \"./symbol/plus.js\";\nimport square from \"./symbol/square.js\";\nimport square2 from \"./symbol/square2.js\";\nimport star from \"./symbol/star.js\";\nimport triangle from \"./symbol/triangle.js\";\nimport triangle2 from \"./symbol/triangle2.js\";\nimport wye from \"./symbol/wye.js\";\nimport times from \"./symbol/times.js\";\n\n// These symbols are designed to be filled.\nexport const symbolsFill = [\n  circle,\n  cross,\n  diamond,\n  square,\n  star,\n  triangle,\n  wye\n];\n\n// These symbols are designed to be stroked (with a width of 1.5px and round caps).\nexport const symbolsStroke = [\n  circle,\n  plus,\n  times,\n  triangle2,\n  asterisk,\n  square2,\n  diamond2\n];\n\nexport default function Symbol(type, size) {\n  let context = null,\n      path = withPath(symbol);\n\n  type = typeof type === \"function\" ? type : constant(type || circle);\n  size = typeof size === \"function\" ? size : constant(size === undefined ? 64 : +size);\n\n  function symbol() {\n    let buffer;\n    if (!context) context = buffer = path();\n    type.apply(this, arguments).draw(context, +size.apply(this, arguments));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  symbol.type = function(_) {\n    return arguments.length ? (type = typeof _ === \"function\" ? _ : constant(_), symbol) : type;\n  };\n\n  symbol.size = function(_) {\n    return arguments.length ? (size = typeof _ === \"function\" ? _ : constant(+_), symbol) : size;\n  };\n\n  symbol.context = function(_) {\n    return arguments.length ? (context = _ == null ? null : _, symbol) : context;\n  };\n\n  return symbol;\n}\n","export default function() {}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // falls through\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import noop from \"../noop.js\";\nimport {point} from \"./basis.js\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n","import {point} from \"./basis.js\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n","import {Basis} from \"./basis.js\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import noop from \"../noop.js\";\nimport {point} from \"./cardinal.js\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {point} from \"./cardinal.js\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalClosed} from \"./cardinalClosed.js\";\nimport noop from \"../noop.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalOpen} from \"./cardinalOpen.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import noop from \"../noop.js\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import {ascending, descending} from \"d3\";\n\nexport function defined(x) {\n  return x != null && !Number.isNaN(x);\n}\n\nexport function ascendingDefined(a, b) {\n  return +defined(b) - +defined(a) || ascending(a, b);\n}\n\nexport function descendingDefined(a, b) {\n  return +defined(b) - +defined(a) || descending(a, b);\n}\n\nexport function nonempty(x) {\n  return x != null && `${x}` !== \"\";\n}\n\nexport function finite(x) {\n  return isFinite(x) ? x : NaN;\n}\n\nexport function positive(x) {\n  return x > 0 && isFinite(x) ? x : NaN;\n}\n\nexport function negative(x) {\n  return x < 0 && isFinite(x) ? x : NaN;\n}\n","export default function format(date, fallback) {\n  if (!(date instanceof Date)) date = new Date(+date);\n  if (isNaN(date)) return typeof fallback === \"function\" ? fallback(date) : fallback;\n  const hours = date.getUTCHours();\n  const minutes = date.getUTCMinutes();\n  const seconds = date.getUTCSeconds();\n  const milliseconds = date.getUTCMilliseconds();\n  return `${formatYear(date.getUTCFullYear(), 4)}-${pad(date.getUTCMonth() + 1, 2)}-${pad(date.getUTCDate(), 2)}${\n    hours || minutes || seconds || milliseconds ? `T${pad(hours, 2)}:${pad(minutes, 2)}${\n      seconds || milliseconds ? `:${pad(seconds, 2)}${\n        milliseconds ? `.${pad(milliseconds, 3)}` : ``\n      }` : ``\n    }Z` : ``\n  }`;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? `-${pad(-year, 6)}`\n    : year > 9999 ? `+${pad(year, 6)}`\n    : pad(year, 4);\n}\n\nfunction pad(value, width) {\n  return `${value}`.padStart(width, \"0\");\n}\n","const re = /^(?:[-+]\\d{2})?\\d{4}(?:-\\d{2}(?:-\\d{2})?)?(?:T\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d{3})?)?(?:Z|[-+]\\d{2}:?\\d{2})?)?$/;\n\nexport default function parse(string, fallback) {\n  if (!re.test(string += \"\")) return typeof fallback === \"function\" ? fallback(string) : fallback;\n  return new Date(string);\n}\n","import {descending} from \"d3\";\n\n// Like a sort comparator, returns a positive value if the given array of values\n// is in ascending order, a negative value if the values are in descending\n// order. Assumes monotonicity; only tests the first and last values.\nexport function orderof(values) {\n  if (values == null) return;\n  const first = values[0];\n  const last = values[values.length - 1];\n  return descending(first, last);\n}\n","import {bisector, max, pairs, timeFormat, utcFormat} from \"d3\";\nimport {utcSecond, utcMinute, utcHour, unixDay, utcWeek, utcMonth, utcYear} from \"d3\";\nimport {utcMonday, utcTuesday, utcWednesday, utcThursday, utcFriday, utcSaturday, utcSunday} from \"d3\";\nimport {timeSecond, timeMinute, timeHour, timeDay, timeWeek, timeMonth, timeYear} from \"d3\";\nimport {timeMonday, timeTuesday, timeWednesday, timeThursday, timeFriday, timeSaturday, timeSunday} from \"d3\";\nimport {orderof} from \"./order.js\";\n\nconst durationSecond = 1000;\nconst durationMinute = durationSecond * 60;\nconst durationHour = durationMinute * 60;\nconst durationDay = durationHour * 24;\nconst durationWeek = durationDay * 7;\nconst durationMonth = durationDay * 30;\nconst durationYear = durationDay * 365;\n\n// See https://github.com/d3/d3-time/blob/9e8dc940f38f78d7588aad68a54a25b1f0c2d97b/src/ticks.js#L14-L33\nconst tickIntervals = [\n  [\"millisecond\", 1],\n  [\"2 milliseconds\", 2],\n  [\"5 milliseconds\", 5],\n  [\"10 milliseconds\", 10],\n  [\"20 milliseconds\", 20],\n  [\"50 milliseconds\", 50],\n  [\"100 milliseconds\", 100],\n  [\"200 milliseconds\", 200],\n  [\"500 milliseconds\", 500],\n  [\"second\", durationSecond],\n  [\"5 seconds\", 5 * durationSecond],\n  [\"15 seconds\", 15 * durationSecond],\n  [\"30 seconds\", 30 * durationSecond],\n  [\"minute\", durationMinute],\n  [\"5 minutes\", 5 * durationMinute],\n  [\"15 minutes\", 15 * durationMinute],\n  [\"30 minutes\", 30 * durationMinute],\n  [\"hour\", durationHour],\n  [\"3 hours\", 3 * durationHour],\n  [\"6 hours\", 6 * durationHour],\n  [\"12 hours\", 12 * durationHour],\n  [\"day\", durationDay],\n  [\"2 days\", 2 * durationDay],\n  [\"week\", durationWeek],\n  [\"2 weeks\", 2 * durationWeek], // https://github.com/d3/d3-time/issues/46\n  [\"month\", durationMonth],\n  [\"3 months\", 3 * durationMonth],\n  [\"6 months\", 6 * durationMonth], // https://github.com/d3/d3-time/issues/46\n  [\"year\", durationYear],\n  [\"2 years\", 2 * durationYear],\n  [\"5 years\", 5 * durationYear],\n  [\"10 years\", 10 * durationYear],\n  [\"20 years\", 20 * durationYear],\n  [\"50 years\", 50 * durationYear],\n  [\"100 years\", 100 * durationYear] // TODO generalize to longer time scales\n];\n\nconst durations = new Map([\n  [\"second\", durationSecond],\n  [\"minute\", durationMinute],\n  [\"hour\", durationHour],\n  [\"day\", durationDay],\n  [\"monday\", durationWeek],\n  [\"tuesday\", durationWeek],\n  [\"wednesday\", durationWeek],\n  [\"thursday\", durationWeek],\n  [\"friday\", durationWeek],\n  [\"saturday\", durationWeek],\n  [\"sunday\", durationWeek],\n  [\"week\", durationWeek],\n  [\"month\", durationMonth],\n  [\"year\", durationYear]\n]);\n\nconst timeIntervals = new Map([\n  [\"second\", timeSecond],\n  [\"minute\", timeMinute],\n  [\"hour\", timeHour],\n  [\"day\", timeDay], // https://github.com/d3/d3-time/issues/62\n  [\"monday\", timeMonday],\n  [\"tuesday\", timeTuesday],\n  [\"wednesday\", timeWednesday],\n  [\"thursday\", timeThursday],\n  [\"friday\", timeFriday],\n  [\"saturday\", timeSaturday],\n  [\"sunday\", timeSunday],\n  [\"week\", timeWeek],\n  [\"month\", timeMonth],\n  [\"year\", timeYear]\n]);\n\nconst utcIntervals = new Map([\n  [\"second\", utcSecond],\n  [\"minute\", utcMinute],\n  [\"hour\", utcHour],\n  [\"day\", unixDay],\n  [\"monday\", utcMonday],\n  [\"tuesday\", utcTuesday],\n  [\"wednesday\", utcWednesday],\n  [\"thursday\", utcThursday],\n  [\"friday\", utcFriday],\n  [\"saturday\", utcSaturday],\n  [\"sunday\", utcSunday],\n  [\"week\", utcWeek],\n  [\"month\", utcMonth],\n  [\"year\", utcYear]\n]);\n\n// These hidden fields describe standard intervals so that we can, for example,\n// generalize a scales time interval to a larger ticks time interval to reduce\n// the number of displayed ticks. TODO We could instead allow the interval\n// implementation to expose a generalize method that returns a larger, aligned\n// interval; that would allow us to move this logic to D3, and allow\n// generalization even when a custom interval is provided.\nexport const intervalDuration = Symbol(\"intervalDuration\");\nexport const intervalType = Symbol(\"intervalType\");\n\n// We greedily mutate D3s standard intervals on load so that the hidden fields\n// are available even if specified as e.g. d3.utcMonth instead of \"month\".\nfor (const [name, interval] of timeIntervals) {\n  interval[intervalDuration] = durations.get(name);\n  interval[intervalType] = \"time\";\n}\nfor (const [name, interval] of utcIntervals) {\n  interval[intervalDuration] = durations.get(name);\n  interval[intervalType] = \"utc\";\n}\n\nconst utcFormatIntervals = [\n  [\"year\", utcYear, \"utc\"],\n  [\"month\", utcMonth, \"utc\"],\n  [\"day\", unixDay, \"utc\", 6 * durationMonth],\n  [\"hour\", utcHour, \"utc\", 3 * durationDay],\n  [\"minute\", utcMinute, \"utc\", 6 * durationHour],\n  [\"second\", utcSecond, \"utc\", 30 * durationMinute]\n];\n\nconst timeFormatIntervals = [\n  [\"year\", timeYear, \"time\"],\n  [\"month\", timeMonth, \"time\"],\n  [\"day\", timeDay, \"time\", 6 * durationMonth],\n  [\"hour\", timeHour, \"time\", 3 * durationDay],\n  [\"minute\", timeMinute, \"time\", 6 * durationHour],\n  [\"second\", timeSecond, \"time\", 30 * durationMinute]\n];\n\n// An interleaved array of UTC and local time intervals, in descending order\n// from largest to smallest, used to determine the most specific standard time\n// format for a given array of dates. This is a subset of the tick intervals\n// listed above; we only need the breakpoints where the format changes.\nconst formatIntervals = [\n  utcFormatIntervals[0],\n  timeFormatIntervals[0],\n  utcFormatIntervals[1],\n  timeFormatIntervals[1],\n  utcFormatIntervals[2],\n  timeFormatIntervals[2],\n  // Below day, local time typically has an hourly offset from UTC and hence the\n  // two are aligned and indistinguishable; therefore, we only consider UTC, and\n  // we dont consider these if the domain only has a single value.\n  ...utcFormatIntervals.slice(3)\n];\n\nexport function parseTimeInterval(input) {\n  let name = `${input}`.toLowerCase();\n  if (name.endsWith(\"s\")) name = name.slice(0, -1); // drop plural\n  let period = 1;\n  const match = /^(?:(\\d+)\\s+)/.exec(name);\n  if (match) {\n    name = name.slice(match[0].length);\n    period = +match[1];\n  }\n  switch (name) {\n    case \"quarter\":\n      name = \"month\";\n      period *= 3;\n      break;\n    case \"half\":\n      name = \"month\";\n      period *= 6;\n      break;\n  }\n  let interval = utcIntervals.get(name);\n  if (!interval) throw new Error(`unknown interval: ${input}`);\n  if (period > 1 && !interval.every) throw new Error(`non-periodic interval: ${name}`);\n  return [name, period];\n}\n\nexport function timeInterval(input) {\n  return asInterval(parseTimeInterval(input), \"time\");\n}\n\nexport function utcInterval(input) {\n  return asInterval(parseTimeInterval(input), \"utc\");\n}\n\nfunction asInterval([name, period], type) {\n  let interval = (type === \"time\" ? timeIntervals : utcIntervals).get(name);\n  if (period > 1) {\n    interval = interval.every(period);\n    interval[intervalDuration] = durations.get(name) * period;\n    interval[intervalType] = type;\n  }\n  return interval;\n}\n\n// If the given interval is a standard time interval, we may be able to promote\n// it a larger aligned time interval, rather than showing every nth tick.\nexport function generalizeTimeInterval(interval, n) {\n  if (!(n > 1)) return; // no need to generalize\n  const duration = interval[intervalDuration];\n  if (!tickIntervals.some(([, d]) => d === duration)) return; // nonstandard or unknown interval\n  if (duration % durationDay === 0 && durationDay < duration && duration < durationMonth) return; // not generalizable\n  const [i] = tickIntervals[bisector(([, step]) => Math.log(step)).center(tickIntervals, Math.log(duration * n))];\n  return (interval[intervalType] === \"time\" ? timeInterval : utcInterval)(i);\n}\n\nfunction formatTimeInterval(name, type, anchor) {\n  const format = type === \"time\" ? timeFormat : utcFormat;\n  // For tips and legends, use a format that doesnt require context.\n  if (anchor == null) {\n    return format(\n      name === \"year\"\n        ? \"%Y\"\n        : name === \"month\"\n        ? \"%Y-%m\"\n        : name === \"day\"\n        ? \"%Y-%m-%d\"\n        : name === \"hour\" || name === \"minute\"\n        ? \"%Y-%m-%dT%H:%M\"\n        : name === \"second\"\n        ? \"%Y-%m-%dT%H:%M:%S\"\n        : \"%Y-%m-%dT%H:%M:%S.%L\"\n    );\n  }\n  // Otherwise, assume that this is for axis ticks.\n  const template = getTimeTemplate(anchor);\n  switch (name) {\n    case \"millisecond\":\n      return formatConditional(format(\".%L\"), format(\":%M:%S\"), template);\n    case \"second\":\n      return formatConditional(format(\":%S\"), format(\"%-I:%M\"), template);\n    case \"minute\":\n      return formatConditional(format(\"%-I:%M\"), format(\"%p\"), template);\n    case \"hour\":\n      return formatConditional(format(\"%-I %p\"), format(\"%b %-d\"), template);\n    case \"day\":\n      return formatConditional(format(\"%-d\"), format(\"%b\"), template);\n    case \"month\":\n      return formatConditional(format(\"%b\"), format(\"%Y\"), template);\n    case \"year\":\n      return format(\"%Y\");\n  }\n  throw new Error(\"unable to format time ticks\");\n}\n\nfunction getTimeTemplate(anchor) {\n  return anchor === \"left\" || anchor === \"right\"\n    ? (f1, f2) => `\\n${f1}\\n${f2}` // extra newline to keep f1 centered\n    : anchor === \"top\"\n    ? (f1, f2) => `${f2}\\n${f1}`\n    : (f1, f2) => `${f1}\\n${f2}`;\n}\n\nfunction getFormatIntervals(type) {\n  return type === \"time\" ? timeFormatIntervals : type === \"utc\" ? utcFormatIntervals : formatIntervals;\n}\n\n// Given an array of dates, returns the largest compatible standard time\n// interval. If no standard interval is compatible (other than milliseconds,\n// which is universally compatible), returns undefined.\nexport function inferTimeFormat(type, dates, anchor) {\n  const step = max(pairs(dates, (a, b) => Math.abs(b - a))); // maybe undefined!\n  if (step < 1000) return formatTimeInterval(\"millisecond\", \"utc\", anchor);\n  for (const [name, interval, intervalType, maxStep] of getFormatIntervals(type)) {\n    if (step > maxStep) break; // e.g., 52 weeks\n    if (name === \"hour\" && !step) break; // e.g., domain with a single date\n    if (dates.every((d) => interval.floor(d) >= d)) return formatTimeInterval(name, intervalType, anchor);\n  }\n}\n\nfunction formatConditional(format1, format2, template) {\n  return (x, i, X) => {\n    const f1 = format1(x, i); // always shown\n    const f2 = format2(x, i); // only shown if different\n    const j = i - orderof(X); // detect reversed domains\n    return i !== j && X[j] !== undefined && f2 === format2(X[j], j) ? f1 : template(f1, f2);\n  };\n}\n","import {quantile, range as rangei} from \"d3\";\nimport {parse as isoParse} from \"isoformat\";\nimport {defined} from \"./defined.js\";\nimport {timeInterval, utcInterval} from \"./time.js\";\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray\nexport const TypedArray = Object.getPrototypeOf(Uint8Array);\nconst objectToString = Object.prototype.toString;\n\nexport function isArray(value) {\n  return value instanceof Array || value instanceof TypedArray;\n}\n\nfunction isNumberArray(value) {\n  return value instanceof TypedArray && !isBigIntArray(value);\n}\n\nfunction isNumberType(type) {\n  return type?.prototype instanceof TypedArray && !isBigIntType(type);\n}\n\nfunction isBigIntArray(value) {\n  return value instanceof BigInt64Array || value instanceof BigUint64Array;\n}\n\nfunction isBigIntType(type) {\n  return type === BigInt64Array || type === BigUint64Array;\n}\n\n// If a reindex is attached to the data, channel values expressed as arrays will\n// be reindexed when the channels are instantiated. See exclusiveFacets.\nexport const reindex = Symbol(\"reindex\");\n\nexport function valueof(data, value, type) {\n  const valueType = typeof value;\n  return valueType === \"string\"\n    ? isArrowTable(data)\n      ? maybeTypedArrowify(data.getChild(value), type)\n      : maybeTypedMap(data, field(value), type)\n    : valueType === \"function\"\n    ? maybeTypedMap(data, value, type)\n    : valueType === \"number\" || value instanceof Date || valueType === \"boolean\"\n    ? map(data, constant(value), type)\n    : typeof value?.transform === \"function\"\n    ? maybeTypedArrayify(value.transform(data), type)\n    : maybeTake(maybeTypedArrayify(value, type), data?.[reindex]);\n}\n\nfunction maybeTake(values, index) {\n  return values != null && index ? take(values, index) : values;\n}\n\nfunction maybeTypedMap(data, f, type) {\n  return map(data, isNumberType(type) ? (d, i) => coerceNumber(f(d, i)) : f, type); // allow conversion from BigInt\n}\n\nfunction maybeTypedArrayify(data, type) {\n  return type === undefined\n    ? arrayify(data) // preserve undefined type\n    : isArrowVector(data)\n    ? maybeTypedArrowify(data, type)\n    : data instanceof type\n    ? data\n    : type.from(data, isNumberType(type) && !isNumberArray(data) ? coerceNumber : undefined);\n}\n\nfunction maybeTypedArrowify(vector, type) {\n  return vector == null\n    ? vector\n    : (type === undefined || type === Array) && isArrowDateType(vector.type)\n    ? coerceDates(vectorToArray(vector))\n    : maybeTypedArrayify(vectorToArray(vector), type);\n}\n\nfunction vectorToArray(vector) {\n  return vector.nullCount ? vector.toJSON() : vector.toArray();\n}\n\nexport const singleton = [null]; // for data-less decoration marks, e.g. frame\nexport const field = (name) => (d) => { const v = d[name]; return v === undefined && d.type === \"Feature\" ? d.properties?.[name] : v; }; // prettier-ignore\nexport const indexOf = {transform: range};\nexport const identity = {transform: (d) => d};\nexport const zero = () => 0;\nexport const one = () => 1;\nexport const yes = () => true;\nexport const string = (x) => (x == null ? x : `${x}`);\nexport const number = (x) => (x == null ? x : +x);\nexport const boolean = (x) => (x == null ? x : !!x);\nexport const first = (x) => (x ? x[0] : undefined);\nexport const second = (x) => (x ? x[1] : undefined);\nexport const third = (x) => (x ? x[2] : undefined);\nexport const constant = (x) => () => x;\n\n// Converts a string like p25 into a function that takes an index I and an\n// accessor function f, returning the corresponding percentile value.\nexport function percentile(reduce) {\n  const p = +`${reduce}`.slice(1) / 100;\n  return (I, f) => quantile(I, p, f);\n}\n\n// If the values are specified as a typed array, no coercion is required.\nexport function coerceNumbers(values) {\n  return isNumberArray(values) ? values : map(values, coerceNumber, Float64Array);\n}\n\n// Unlike Marks number, here we want to convert null and undefined to NaN since\n// the result will be stored in a Float64Array and we dont want null to be\n// coerced to zero. We use Number instead of unary + to allow BigInt coercion.\nfunction coerceNumber(x) {\n  return x == null ? NaN : Number(x);\n}\n\nexport function coerceDates(values) {\n  return map(values, coerceDate);\n}\n\n// When coercing strings to dates, we only want to allow the ISO 8601 format\n// since the built-in string parsing of the Date constructor varies across\n// browsers. (In the future, this could be made more liberal if desired, though\n// it is still generally preferable to do date parsing yourself explicitly,\n// rather than rely on Plot.) Any non-string values are coerced to number first\n// and treated as milliseconds since UNIX epoch.\nexport function coerceDate(x) {\n  return x instanceof Date && !isNaN(x)\n    ? x\n    : typeof x === \"string\"\n    ? isoParse(x)\n    : x == null || isNaN((x = Number(x))) // allow conversion from BigInt\n    ? undefined\n    : new Date(x);\n}\n\n// Some channels may allow a string constant to be specified; to differentiate\n// string constants (e.g., \"red\") from named fields (e.g., \"date\"), this\n// function tests whether the given value is a CSS color string and returns a\n// tuple [channel, constant] where one of the two is undefined, and the other is\n// the given value. If you wish to reference a named field that is also a valid\n// CSS color, use an accessor (d => d.red) instead.\nexport function maybeColorChannel(value, defaultValue) {\n  if (value === undefined) value = defaultValue;\n  return value === null ? [undefined, \"none\"] : isColor(value) ? [undefined, value] : [value, undefined];\n}\n\n// Similar to maybeColorChannel, this tests whether the given value is a number\n// indicating a constant, and otherwise assumes that its a channel value.\nexport function maybeNumberChannel(value, defaultValue) {\n  if (value === undefined) value = defaultValue;\n  return value === null || typeof value === \"number\" ? [undefined, value] : [value, undefined];\n}\n\n// Validates the specified optional string against the allowed list of keywords.\nexport function maybeKeyword(input, name, allowed) {\n  if (input != null) return keyword(input, name, allowed);\n}\n\n// Validates the specified required string against the allowed list of keywords.\nexport function keyword(input, name, allowed) {\n  const i = `${input}`.toLowerCase();\n  if (!allowed.includes(i)) throw new Error(`invalid ${name}: ${input}`);\n  return i;\n}\n\n// Like arrayify, but also allows data to be an Apache Arrow Table.\nexport function dataify(data) {\n  return isArrowTable(data) ? data : arrayify(data);\n}\n\n// Promotes the specified data to an array as needed.\nexport function arrayify(values) {\n  if (values == null || isArray(values)) return values;\n  if (isArrowVector(values)) return maybeTypedArrowify(values);\n  if (isGeoJSON(values)) {\n    switch (values.type) {\n      case \"FeatureCollection\":\n        return values.features;\n      case \"GeometryCollection\":\n        return values.geometries;\n      default:\n        return [values];\n    }\n  }\n  return Array.from(values);\n}\n\n// Duck typing test for GeoJSON\nfunction isGeoJSON(x) {\n  switch (x?.type) {\n    case \"FeatureCollection\":\n    case \"GeometryCollection\":\n    case \"Feature\":\n    case \"LineString\":\n    case \"MultiLineString\":\n    case \"MultiPoint\":\n    case \"MultiPolygon\":\n    case \"Point\":\n    case \"Polygon\":\n    case \"Sphere\":\n      return true;\n    default:\n      return false;\n  }\n}\n\n// An optimization of type.from(values, f): if the given values are already an\n// instanceof the desired array type, the faster values.map method is used.\nexport function map(values, f, type = Array) {\n  return values == null ? values : values instanceof type ? values.map(f) : type.from(values, f);\n}\n\n// An optimization of type.from(values): if the given values are already an\n// instanceof the desired array type, the faster values.slice method is used.\nexport function slice(values, type = Array) {\n  return values instanceof type ? values.slice() : type.from(values);\n}\n\n// Returns true if any of x, x1, or x2 is not (strictly) undefined.\nexport function hasX({x, x1, x2}) {\n  return x !== undefined || x1 !== undefined || x2 !== undefined;\n}\n\n// Returns true if any of y, y1, or y2 is not (strictly) undefined.\nexport function hasY({y, y1, y2}) {\n  return y !== undefined || y1 !== undefined || y2 !== undefined;\n}\n\n// Returns true if has x or y, or if interval is not (strictly) undefined.\nexport function hasXY(options) {\n  return hasX(options) || hasY(options) || options.interval !== undefined;\n}\n\n// Disambiguates an options object (e.g., {y: \"x2\"}) from a primitive value.\nexport function isObject(option) {\n  return option?.toString === objectToString;\n}\n\n// Disambiguates a scale options object (e.g., {color: {type: \"linear\"}}) from\n// some other option (e.g., {color: \"red\"}). When creating standalone legends,\n// this is used to test whether a scale is defined; this should be consistent\n// with inferScaleType when there are no channels associated with the scale, and\n// if this returns true, then normalizeScale must return non-null.\nexport function isScaleOptions(option) {\n  return isObject(option) && (option.type !== undefined || option.domain !== undefined);\n}\n\n// Disambiguates an options object (e.g., {y: \"x2\"}) from a channel value\n// definition expressed as a channel transform (e.g., {transform: }).\n// TODO Check typeof option[Symbol.iterator] !== \"function\"?\nexport function isOptions(option) {\n  return isObject(option) && typeof option.transform !== \"function\";\n}\n\n// Disambiguates a sort transform (e.g., {sort: \"date\"}) from a channel domain\n// sort definition (e.g., {sort: {y: \"x\"}}).\nexport function isDomainSort(sort) {\n  return isOptions(sort) && sort.value === undefined && sort.channel === undefined;\n}\n\n// For marks specified either as [0, x] or [x1, x2], such as areas and bars.\nexport function maybeZero(x, x1, x2, x3 = identity) {\n  if (x1 === undefined && x2 === undefined) {\n    // {x} or {}\n    (x1 = 0), (x2 = x === undefined ? x3 : x);\n  } else if (x1 === undefined) {\n    // {x, x2} or {x2}\n    x1 = x === undefined ? 0 : x;\n  } else if (x2 === undefined) {\n    // {x, x1} or {x1}\n    x2 = x === undefined ? 0 : x;\n  }\n  return [x1, x2];\n}\n\n// For marks that have x and y channels (e.g., cell, dot, line, text).\nexport function maybeTuple(x, y) {\n  return x === undefined && y === undefined ? [first, second] : [x, y];\n}\n\n// A helper for extracting the z channel, if it is variable. Used by transforms\n// that require series, such as moving average and normalize.\nexport function maybeZ({z, fill, stroke} = {}) {\n  if (z === undefined) [z] = maybeColorChannel(fill);\n  if (z === undefined) [z] = maybeColorChannel(stroke);\n  return z;\n}\n\nexport function lengthof(data) {\n  return isArray(data) ? data.length : data?.numRows;\n}\n\n// Returns a Uint32Array with elements [0, 1, 2,  data.length - 1].\nexport function range(data) {\n  const n = lengthof(data);\n  const r = new Uint32Array(n);\n  for (let i = 0; i < n; ++i) r[i] = i;\n  return r;\n}\n\n// Returns an array [values[index[0]], values[index[1]], ].\nexport function take(values, index) {\n  return isArray(values) ? map(index, (i) => values[i], values.constructor) : map(index, (i) => values.at(i));\n}\n\n// If f does not take exactly one argument, wraps it in a function that uses take.\nexport function taker(f) {\n  return f.length === 1 ? (index, values) => f(take(values, index)) : f;\n}\n\n// Uses subarray if available, and otherwise slice.\nexport function subarray(I, i, j) {\n  return I.subarray ? I.subarray(i, j) : I.slice(i, j);\n}\n\n// Based on InternMap (d3.group).\nexport function keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n\nexport function maybeInput(key, options) {\n  if (options[key] !== undefined) return options[key];\n  switch (key) {\n    case \"x1\":\n    case \"x2\":\n      key = \"x\";\n      break;\n    case \"y1\":\n    case \"y2\":\n      key = \"y\";\n      break;\n  }\n  return options[key];\n}\n\nexport function column(source) {\n  // Defines a column whose values are lazily populated by calling the returned\n  // setter. If the given source is labeled, the label is propagated to the\n  // returned column definition.\n  let value;\n  return [\n    {\n      transform: () => value,\n      label: labelof(source)\n    },\n    (v) => (value = v)\n  ];\n}\n\n// Like column, but allows the source to be null.\nexport function maybeColumn(source) {\n  return source == null ? [source] : column(source);\n}\n\nexport function labelof(value, defaultValue) {\n  return typeof value === \"string\" ? value : value && value.label !== undefined ? value.label : defaultValue;\n}\n\n// Assuming that both x1 and x2 and lazy columns (per above), this derives a new\n// a column thats the average of the two, and which inherits the column label\n// (if any). Both input columns are assumed to be quantitative. If either column\n// is temporal, the returned column is also temporal.\nexport function mid(x1, x2) {\n  return {\n    transform(data) {\n      const X1 = x1.transform(data);\n      const X2 = x2.transform(data);\n      return isTemporal(X1) || isTemporal(X2)\n        ? map(X1, (_, i) => new Date((+X1[i] + +X2[i]) / 2))\n        : map(X1, (_, i) => (+X1[i] + +X2[i]) / 2, Float64Array);\n    },\n    label: x1.label\n  };\n}\n\n// If the scale options declare an interval, applies it to the values V.\nexport function maybeApplyInterval(V, scale) {\n  const t = maybeIntervalTransform(scale?.interval, scale?.type);\n  return t ? map(V, t) : V;\n}\n\n// Returns the equivalent scale transform for the specified interval option.\nexport function maybeIntervalTransform(interval, type) {\n  const i = maybeInterval(interval, type);\n  return i && ((v) => (defined(v) ? i.floor(v) : v));\n}\n\n// If interval is not nullish, converts interval shorthand such as a number (for\n// multiples) or a time interval name (such as day) to a {floor, offset,\n// range} object similar to a D3 time interval.\nexport function maybeInterval(interval, type) {\n  if (interval == null) return;\n  if (typeof interval === \"number\") return numberInterval(interval);\n  if (typeof interval === \"string\") return (type === \"time\" ? timeInterval : utcInterval)(interval);\n  if (typeof interval.floor !== \"function\") throw new Error(\"invalid interval; missing floor method\");\n  if (typeof interval.offset !== \"function\") throw new Error(\"invalid interval; missing offset method\");\n  return interval;\n}\n\nexport function numberInterval(interval) {\n  interval = +interval;\n  if (0 < interval && interval < 1 && Number.isInteger(1 / interval)) interval = -1 / interval;\n  const n = Math.abs(interval);\n  return interval < 0\n    ? {\n        floor: (d) => Math.floor(d * n) / n,\n        offset: (d, s = 1) => (d * n + Math.floor(s)) / n,\n        range: (lo, hi) => rangei(Math.ceil(lo * n), hi * n).map((x) => x / n)\n      }\n    : {\n        floor: (d) => Math.floor(d / n) * n,\n        offset: (d, s = 1) => d + n * Math.floor(s),\n        range: (lo, hi) => rangei(Math.ceil(lo / n), hi / n).map((x) => x * n)\n      };\n}\n\n// Like maybeInterval, but requires a range method too.\nexport function maybeRangeInterval(interval, type) {\n  interval = maybeInterval(interval, type);\n  if (interval && typeof interval.range !== \"function\") throw new Error(\"invalid interval: missing range method\");\n  return interval;\n}\n\n// Like maybeRangeInterval, but requires a ceil method too.\nexport function maybeNiceInterval(interval, type) {\n  interval = maybeRangeInterval(interval, type);\n  if (interval && typeof interval.ceil !== \"function\") throw new Error(\"invalid interval: missing ceil method\");\n  return interval;\n}\n\nexport function isTimeInterval(t) {\n  return isInterval(t) && typeof t?.floor === \"function\" && t.floor() instanceof Date;\n}\n\nexport function isInterval(t) {\n  return typeof t?.range === \"function\";\n}\n\n// This distinguishes between per-dimension options and a standalone value.\nexport function maybeValue(value) {\n  return value === undefined || isOptions(value) ? value : {value};\n}\n\n// Coerces the given channel values (if any) to numbers. This is useful when\n// values will be interpolated into other code, such as an SVG transform, and\n// where we dont wish to allow unexpected behavior for weird input.\nexport function numberChannel(source) {\n  return source == null\n    ? null\n    : {\n        transform: (data) => valueof(data, source, Float64Array),\n        label: labelof(source)\n      };\n}\n\nexport function isTuples(data) {\n  if (!isIterable(data)) return false;\n  for (const d of data) {\n    if (d == null) continue;\n    return typeof d === \"object\" && \"0\" in d && \"1\" in d;\n  }\n}\n\nexport function isIterable(value) {\n  return value && typeof value[Symbol.iterator] === \"function\";\n}\n\nexport function isTextual(values) {\n  for (const value of values) {\n    if (value == null) continue;\n    return typeof value !== \"object\" || value instanceof Date;\n  }\n}\n\nexport function isOrdinal(values) {\n  for (const value of values) {\n    if (value == null) continue;\n    const type = typeof value;\n    return type === \"string\" || type === \"boolean\";\n  }\n}\n\nexport function isTemporal(values) {\n  for (const value of values) {\n    if (value == null) continue;\n    return value instanceof Date;\n  }\n}\n\n// Are these strings that might represent dates? This is stricter than ISO 8601\n// because we want to ignore false positives on numbers; for example, the string\n// \"1192\" is more likely to represent a number than a date even though it is\n// valid ISO 8601 representing 1192-01-01.\nexport function isTemporalString(values) {\n  for (const value of values) {\n    if (value == null) continue;\n    return typeof value === \"string\" && isNaN(value) && isoParse(value);\n  }\n}\n\n// Are these strings that might represent numbers? This is stricter than\n// coercion because we want to ignore false positives on e.g. empty strings.\nexport function isNumericString(values) {\n  for (const value of values) {\n    if (value == null) continue;\n    if (typeof value !== \"string\") return false;\n    if (!value.trim()) continue;\n    return !isNaN(value);\n  }\n}\n\nexport function isNumeric(values) {\n  for (const value of values) {\n    if (value == null) continue;\n    return typeof value === \"number\";\n  }\n}\n\n// Returns true if every non-null value in the specified iterable of values\n// passes the specified predicate, and there is at least one non-null value;\n// returns false if at least one non-null value does not pass the specified\n// predicate; otherwise returns undefined (as if all values are null).\nexport function isEvery(values, is) {\n  let every;\n  for (const value of values) {\n    if (value == null) continue;\n    if (!is(value)) return false;\n    every = true;\n  }\n  return every;\n}\n\nconst namedColors = new Set(\"none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow\".split(\",\")); // prettier-ignore\n\n// Returns true if value is a valid CSS color string. This is intentionally lax\n// because the CSS color spec keeps growing, and we dont need to parse these\n// colorswe just need to disambiguate them from column names.\n// https://www.w3.org/TR/SVG11/painting.html#SpecifyingPaint\n// https://www.w3.org/TR/css-color-5/\nexport function isColor(value) {\n  if (typeof value !== \"string\") return false;\n  value = value.toLowerCase().trim();\n  return (\n    /^#[0-9a-f]{3,8}$/.test(value) || // hex rgb, rgba, rrggbb, rrggbbaa\n    /^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\\(.*\\)$/.test(value) || // <funciri>, CSS variable, color, etc.\n    namedColors.has(value) // currentColor, red, etc.\n  );\n}\n\nexport function isOpacity(value) {\n  return typeof value === \"number\" && ((0 <= value && value <= 1) || isNaN(value));\n}\n\nexport function isNoneish(value) {\n  return value == null || isNone(value);\n}\n\nexport function isNone(value) {\n  return /^\\s*none\\s*$/i.test(value);\n}\n\nexport function isRound(value) {\n  return /^\\s*round\\s*$/i.test(value);\n}\n\nexport function maybeAnchor(value, name) {\n  return maybeKeyword(value, name, [\n    \"middle\",\n    \"top-left\",\n    \"top\",\n    \"top-right\",\n    \"right\",\n    \"bottom-right\",\n    \"bottom\",\n    \"bottom-left\",\n    \"left\"\n  ]);\n}\n\nexport function maybeFrameAnchor(value = \"middle\") {\n  return maybeAnchor(value, \"frameAnchor\");\n}\n\n// Unlike {...defaults, ...options}, this ensures that any undefined (but\n// present) properties in options inherit the given default value.\nexport function inherit(options = {}, ...rest) {\n  let o = options;\n  for (const defaults of rest) {\n    for (const key in defaults) {\n      if (o[key] === undefined) {\n        const value = defaults[key];\n        if (o === options) o = {...o, [key]: value};\n        else o[key] = value;\n      }\n    }\n  }\n  return o;\n}\n\n// Given an iterable of named things (objects with a name property), returns a\n// corresponding object with properties associated with the given name.\nexport function named(things) {\n  console.warn(\"named iterables are deprecated; please use an object instead\");\n  const names = new Set();\n  return Object.fromEntries(\n    Array.from(things, (thing) => {\n      const {name} = thing;\n      if (name == null) throw new Error(\"missing name\");\n      const key = `${name}`;\n      if (key === \"__proto__\") throw new Error(`illegal name: ${key}`);\n      if (names.has(key)) throw new Error(`duplicate name: ${key}`);\n      names.add(key);\n      return [name, thing];\n    })\n  );\n}\n\nexport function maybeNamed(things) {\n  return isIterable(things) ? named(things) : things;\n}\n\nexport function maybeClip(clip) {\n  if (clip === true) clip = \"frame\";\n  else if (clip === false) clip = null;\n  else if (!isGeoJSON(clip) && clip != null) {\n    clip = keyword(clip, \"clip\", [\"frame\", \"sphere\"]);\n    if (clip === \"sphere\") clip = {type: \"Sphere\"};\n  }\n  return clip;\n}\n\n// https://github.com/observablehq/stdlib/blob/746ca2e69135df6178e4f3a17244def35d8d6b20/src/arrow.js#L4C1-L17C1\nfunction isArrowTable(value) {\n  return (\n    value &&\n    typeof value.getChild === \"function\" &&\n    typeof value.toArray === \"function\" &&\n    value.schema &&\n    Array.isArray(value.schema.fields)\n  );\n}\n\nfunction isArrowVector(value) {\n  return value && typeof value.toArray === \"function\" && value.type;\n}\n\n// Apache Arrow now represents dates as numbers. We currently only support\n// implicit coercion to JavaScript Date objects when the numbers represent\n// milliseconds since Unix epoch.\nfunction isArrowDateType(type) {\n  return (\n    type &&\n    (type.typeId === 8 || // date\n      type.typeId === 10) && // timestamp\n    type.unit === 1 // millisecond\n  );\n}\n","// Positional scales have associated axes, and for ordinal data, a point or band\n// scale is used instead of an ordinal scale.\nexport const position = Symbol(\"position\");\n\n// Color scales default to the turbo interpolator for quantitative data, and to\n// the Tableau10 scheme for ordinal data. Color scales may also have an\n// associated legend.\nexport const color = Symbol(\"color\");\n\n// Radius scales default to the sqrt type, have a default range of [0, 3], and a\n// default domain from 0 to the median first quartile of associated channels.\nexport const radius = Symbol(\"radius\");\n\n// Length scales default to the linear type, have a default range of [0, 12],\n// and a default domain from 0 to the median median of associated channels.\nexport const length = Symbol(\"length\");\n\n// Opacity scales have a default range of [0, 1], and a default domain from 0 to\n// the maximum value of associated channels.\nexport const opacity = Symbol(\"opacity\");\n\n// Symbol scales have a default range of categorical symbols.\nexport const symbol = Symbol(\"symbol\");\n\n// There isnt really a projection scale; this represents x and y for geometry.\n// This is used to denote channels that should be projected.\nexport const projection = Symbol(\"projection\");\n\n// TODO Rather than hard-coding the list of known scale names, collect the names\n// and categories for each plot specification, so that custom marks can register\n// custom scales.\nexport const registry = new Map([\n  [\"x\", position],\n  [\"y\", position],\n  [\"fx\", position],\n  [\"fy\", position],\n  [\"r\", radius],\n  [\"color\", color],\n  [\"opacity\", opacity],\n  [\"symbol\", symbol],\n  [\"length\", length],\n  [\"projection\", projection]\n]);\n\nexport function isPosition(kind) {\n  return kind === position || kind === projection;\n}\n\nexport function hasNumericRange(kind) {\n  return kind === position || kind === radius || kind === length || kind === opacity;\n}\n","import {symbolAsterisk, symbolDiamond2, symbolPlus, symbolSquare2, symbolTriangle2, symbolTimes} from \"d3\";\nimport {symbolCircle, symbolCross, symbolDiamond, symbolSquare, symbolStar, symbolTriangle, symbolWye} from \"d3\";\n\nexport const sqrt3 = Math.sqrt(3);\nexport const sqrt4_3 = 2 / sqrt3;\n\nconst symbolHexagon = {\n  draw(context, size) {\n    const rx = Math.sqrt(size / Math.PI),\n      ry = rx * sqrt4_3,\n      hy = ry / 2;\n    context.moveTo(0, ry);\n    context.lineTo(rx, hy);\n    context.lineTo(rx, -hy);\n    context.lineTo(0, -ry);\n    context.lineTo(-rx, -hy);\n    context.lineTo(-rx, hy);\n    context.closePath();\n  }\n};\n\nconst symbols = new Map([\n  [\"asterisk\", symbolAsterisk],\n  [\"circle\", symbolCircle],\n  [\"cross\", symbolCross],\n  [\"diamond\", symbolDiamond],\n  [\"diamond2\", symbolDiamond2],\n  [\"hexagon\", symbolHexagon],\n  [\"plus\", symbolPlus],\n  [\"square\", symbolSquare],\n  [\"square2\", symbolSquare2],\n  [\"star\", symbolStar],\n  [\"times\", symbolTimes],\n  [\"triangle\", symbolTriangle],\n  [\"triangle2\", symbolTriangle2],\n  [\"wye\", symbolWye]\n]);\n\nfunction isSymbolObject(value) {\n  return value && typeof value.draw === \"function\";\n}\n\nexport function isSymbol(value) {\n  if (isSymbolObject(value)) return true;\n  if (typeof value !== \"string\") return false;\n  return symbols.has(value.toLowerCase());\n}\n\nexport function maybeSymbol(symbol) {\n  if (symbol == null || isSymbolObject(symbol)) return symbol;\n  const value = symbols.get(`${symbol}`.toLowerCase());\n  if (value) return value;\n  throw new Error(`invalid symbol: ${symbol}`);\n}\n\nexport function maybeSymbolChannel(symbol) {\n  if (symbol == null || isSymbolObject(symbol)) return [undefined, symbol];\n  if (typeof symbol === \"string\") {\n    const value = symbols.get(`${symbol}`.toLowerCase());\n    if (value) return [undefined, value];\n  }\n  return [symbol, undefined];\n}\n","import {randomLcg} from \"d3\";\nimport {ascendingDefined, descendingDefined} from \"../defined.js\";\nimport {isArray, isDomainSort, isOptions} from \"../options.js\";\nimport {dataify, maybeValue, valueof} from \"../options.js\";\n\nexport function basic({filter: f1, sort: s1, reverse: r1, transform: t1, initializer: i1, ...options} = {}, transform) {\n  // If both t1 and t2 are defined, returns a composite transform that first\n  // applies t1 and then applies t2.\n  if (t1 === undefined) {\n    // explicit transform overrides filter, sort, and reverse\n    if (f1 != null) t1 = filterTransform(f1);\n    if (s1 != null && !isDomainSort(s1)) t1 = composeTransform(t1, sortTransform(s1));\n    if (r1) t1 = composeTransform(t1, reverseTransform);\n  }\n  if (transform != null && i1 != null) throw new Error(\"transforms cannot be applied after initializers\");\n  return {\n    ...options,\n    ...((s1 === null || isDomainSort(s1)) && {sort: s1}),\n    transform: composeTransform(t1, transform)\n  };\n}\n\nexport function initializer({filter: f1, sort: s1, reverse: r1, initializer: i1, ...options} = {}, initializer) {\n  // If both i1 and i2 are defined, returns a composite initializer that first\n  // applies i1 and then applies i2.\n  if (i1 === undefined) {\n    // explicit initializer overrides filter, sort, and reverse\n    if (f1 != null) i1 = filterTransform(f1);\n    if (s1 != null && !isDomainSort(s1)) i1 = composeInitializer(i1, sortTransform(s1));\n    if (r1) i1 = composeInitializer(i1, reverseTransform);\n  }\n  return {\n    ...options,\n    ...((s1 === null || isDomainSort(s1)) && {sort: s1}),\n    initializer: composeInitializer(i1, initializer)\n  };\n}\n\nfunction composeTransform(t1, t2) {\n  if (t1 == null) return t2 === null ? undefined : t2;\n  if (t2 == null) return t1 === null ? undefined : t1;\n  return function (data, facets, plotOptions) {\n    ({data, facets} = t1.call(this, data, facets, plotOptions));\n    return t2.call(this, dataify(data), facets, plotOptions);\n  };\n}\n\nfunction composeInitializer(i1, i2) {\n  if (i1 == null) return i2 === null ? undefined : i2;\n  if (i2 == null) return i1 === null ? undefined : i1;\n  return function (data, facets, channels, ...args) {\n    let c1, d1, f1, c2, d2, f2;\n    ({data: d1 = data, facets: f1 = facets, channels: c1} = i1.call(this, data, facets, channels, ...args));\n    ({data: d2 = d1, facets: f2 = f1, channels: c2} = i2.call(this, d1, f1, {...channels, ...c1}, ...args));\n    return {data: d2, facets: f2, channels: {...c1, ...c2}};\n  };\n}\n\nfunction apply(options, t) {\n  return (options.initializer != null ? initializer : basic)(options, t);\n}\n\nexport function filter(test, options) {\n  return apply(options, filterTransform(test));\n}\n\nfunction filterTransform(value) {\n  return (data, facets) => {\n    const V = valueof(data, value);\n    return {data, facets: facets.map((I) => I.filter((i) => V[i]))};\n  };\n}\n\nexport function reverse({sort, ...options} = {}) {\n  return {\n    ...apply(options, reverseTransform),\n    sort: isDomainSort(sort) ? sort : null\n  };\n}\n\nfunction reverseTransform(data, facets) {\n  return {data, facets: facets.map((I) => I.slice().reverse())};\n}\n\nexport function shuffle({seed, sort, ...options} = {}) {\n  return {\n    ...apply(options, sortValue(seed == null ? Math.random : randomLcg(seed))),\n    sort: isDomainSort(sort) ? sort : null\n  };\n}\n\nexport function sort(order, {sort, ...options} = {}) {\n  return {\n    ...(isOptions(order) && order.channel !== undefined ? initializer : apply)(options, sortTransform(order)),\n    sort: isDomainSort(sort) ? sort : null\n  };\n}\n\nfunction sortTransform(value) {\n  return (typeof value === \"function\" && value.length !== 1 ? sortData : sortValue)(value);\n}\n\nfunction sortData(compare) {\n  return (data, facets) => {\n    const compareData = isArray(data)\n      ? (i, j) => compare(data[i], data[j])\n      : (i, j) => compare(data.get(i), data.get(j));\n    return {data, facets: facets.map((I) => I.slice().sort(compareData))};\n  };\n}\n\nfunction sortValue(value) {\n  let channel, order;\n  ({channel, value, order} = {...maybeValue(value)});\n  const negate = channel?.startsWith(\"-\");\n  if (negate) channel = channel.slice(1);\n  if (order === undefined) order = negate ? descendingDefined : ascendingDefined;\n  if (typeof order !== \"function\") {\n    switch (`${order}`.toLowerCase()) {\n      case \"ascending\":\n        order = ascendingDefined;\n        break;\n      case \"descending\":\n        order = descendingDefined;\n        break;\n      default:\n        throw new Error(`invalid order: ${order}`);\n    }\n  }\n  return (data, facets, channels) => {\n    let V;\n    if (channel === undefined) {\n      V = valueof(data, value);\n    } else {\n      if (channels === undefined) throw new Error(\"channel sort requires an initializer\");\n      V = channels[channel];\n      if (!V) return {}; // ignore missing channel\n      V = V.value;\n    }\n    const compareValue = (i, j) => order(V[i], V[j]);\n    return {data, facets: facets.map((I) => I.slice().sort(compareValue))};\n  };\n}\n","import {InternSet, group as grouper, rollup, sort} from \"d3\";\nimport {deviation, max, maxIndex, mean, median, min, minIndex, mode, sum, variance} from \"d3\";\nimport {ascendingDefined} from \"../defined.js\";\nimport {maybeApplyInterval, maybeColorChannel, maybeColumn, maybeInput, maybeTuple} from \"../options.js\";\nimport {isArray, isObject, isTemporal} from \"../options.js\";\nimport {column, identity, labelof, percentile, range, second, take, valueof} from \"../options.js\";\nimport {basic} from \"./basic.js\";\n\n// Group on {z, fill, stroke}.\nexport function groupZ(outputs, options) {\n  return groupn(null, null, outputs, options);\n}\n\n// Group on {z, fill, stroke}, then on x.\nexport function groupX(outputs = {y: \"count\"}, options = {}) {\n  const {x = identity} = options;\n  if (x == null) throw new Error(\"missing channel: x\");\n  return groupn(x, null, outputs, options);\n}\n\n// Group on {z, fill, stroke}, then on y.\nexport function groupY(outputs = {x: \"count\"}, options = {}) {\n  const {y = identity} = options;\n  if (y == null) throw new Error(\"missing channel: y\");\n  return groupn(null, y, outputs, options);\n}\n\n// Group on {z, fill, stroke}, then on x and y.\nexport function group(outputs = {fill: \"count\"}, options = {}) {\n  let {x, y} = options;\n  [x, y] = maybeTuple(x, y);\n  if (x == null) throw new Error(\"missing channel: x\");\n  if (y == null) throw new Error(\"missing channel: y\");\n  return groupn(x, y, outputs, options);\n}\n\nfunction groupn(\n  x, // optionally group on x\n  y, // optionally group on y\n  {\n    data: reduceData = reduceIdentity,\n    filter,\n    sort,\n    reverse,\n    ...outputs // output channel definitions\n  } = {},\n  inputs = {} // input channels and options\n) {\n  // Compute the outputs.\n  outputs = maybeGroupOutputs(outputs, inputs);\n  reduceData = maybeGroupReduce(reduceData, identity);\n  sort = sort == null ? undefined : maybeGroupOutput(\"sort\", sort, inputs);\n  filter = filter == null ? undefined : maybeGroupEvaluator(\"filter\", filter, inputs);\n\n  // Produce x and y output channels as appropriate.\n  const [GX, setGX] = maybeColumn(x);\n  const [GY, setGY] = maybeColumn(y);\n\n  // Greedily materialize the z, fill, and stroke channels (if channels and not\n  // constants) so that we can reference them for subdividing groups without\n  // computing them more than once.\n  const {\n    z,\n    fill,\n    stroke,\n    x1,\n    x2, // consumed if x is an output\n    y1,\n    y2, // consumed if y is an output\n    ...options\n  } = inputs;\n  const [GZ, setGZ] = maybeColumn(z);\n  const [vfill] = maybeColorChannel(fill);\n  const [vstroke] = maybeColorChannel(stroke);\n  const [GF, setGF] = maybeColumn(vfill);\n  const [GS, setGS] = maybeColumn(vstroke);\n\n  return {\n    ...(\"z\" in inputs && {z: GZ || z}),\n    ...(\"fill\" in inputs && {fill: GF || fill}),\n    ...(\"stroke\" in inputs && {stroke: GS || stroke}),\n    ...basic(options, (data, facets, plotOptions) => {\n      const X = maybeApplyInterval(valueof(data, x), plotOptions?.x);\n      const Y = maybeApplyInterval(valueof(data, y), plotOptions?.y);\n      const Z = valueof(data, z);\n      const F = valueof(data, vfill);\n      const S = valueof(data, vstroke);\n      const G = maybeSubgroup(outputs, {z: Z, fill: F, stroke: S});\n      const groupFacets = [];\n      const groupData = [];\n      const GX = X && setGX([]);\n      const GY = Y && setGY([]);\n      const GZ = Z && setGZ([]);\n      const GF = F && setGF([]);\n      const GS = S && setGS([]);\n      let i = 0;\n      for (const o of outputs) o.initialize(data);\n      if (sort) sort.initialize(data);\n      if (filter) filter.initialize(data);\n      for (const facet of facets) {\n        const groupFacet = [];\n        for (const o of outputs) o.scope(\"facet\", facet);\n        if (sort) sort.scope(\"facet\", facet);\n        if (filter) filter.scope(\"facet\", facet);\n        for (const [f, I] of maybeGroup(facet, G)) {\n          for (const [y, gg] of maybeGroup(I, Y)) {\n            for (const [x, g] of maybeGroup(gg, X)) {\n              const extent = {data};\n              if (X) extent.x = x;\n              if (Y) extent.y = y;\n              if (G) extent.z = f;\n              if (filter && !filter.reduce(g, extent)) continue;\n              groupFacet.push(i++);\n              groupData.push(reduceData.reduceIndex(g, data, extent));\n              if (X) GX.push(x);\n              if (Y) GY.push(y);\n              if (Z) GZ.push(G === Z ? f : Z[g[0]]);\n              if (F) GF.push(G === F ? f : F[g[0]]);\n              if (S) GS.push(G === S ? f : S[g[0]]);\n              for (const o of outputs) o.reduce(g, extent);\n              if (sort) sort.reduce(g, extent);\n            }\n          }\n        }\n        groupFacets.push(groupFacet);\n      }\n      maybeSort(groupFacets, sort, reverse);\n      return {data: groupData, facets: groupFacets};\n    }),\n    ...(!hasOutput(outputs, \"x\") && (GX ? {x: GX} : {x1, x2})),\n    ...(!hasOutput(outputs, \"y\") && (GY ? {y: GY} : {y1, y2})),\n    ...Object.fromEntries(outputs.map(({name, output}) => [name, output]))\n  };\n}\n\nexport function hasOutput(outputs, ...names) {\n  for (const {name} of outputs) {\n    if (names.includes(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function maybeOutputs(outputs, inputs, asOutput = maybeOutput) {\n  const entries = Object.entries(outputs);\n  // Propagate standard mark channels by default.\n  if (inputs.title != null && outputs.title === undefined) entries.push([\"title\", reduceTitle]);\n  if (inputs.href != null && outputs.href === undefined) entries.push([\"href\", reduceFirst]);\n  return entries\n    .filter(([, reduce]) => reduce !== undefined)\n    .map(([name, reduce]) => (reduce === null ? nullOutput(name) : asOutput(name, reduce, inputs)));\n}\n\nexport function maybeOutput(name, reduce, inputs, asEvaluator = maybeEvaluator) {\n  let scale; // optional per-channel scale override\n  if (isObject(reduce) && \"reduce\" in reduce) (scale = reduce.scale), (reduce = reduce.reduce); // N.B. array.reduce\n  const evaluator = asEvaluator(name, reduce, inputs);\n  const [output, setOutput] = column(evaluator.label);\n  let O;\n  return {\n    name,\n    output: scale === undefined ? output : {value: output, scale},\n    initialize(data) {\n      evaluator.initialize(data);\n      O = setOutput([]);\n    },\n    scope(scope, I) {\n      evaluator.scope(scope, I);\n    },\n    reduce(I, extent) {\n      O.push(evaluator.reduce(I, extent));\n    }\n  };\n}\n\nfunction nullOutput(name) {\n  return {name, initialize() {}, scope() {}, reduce() {}};\n}\n\nexport function maybeEvaluator(name, reduce, inputs, asReduce = maybeReduce) {\n  const input = maybeInput(name, inputs);\n  const reducer = asReduce(reduce, input);\n  let V, context;\n  return {\n    label: labelof(reducer === reduceCount ? null : input, reducer.label),\n    initialize(data) {\n      V = input === undefined ? data : valueof(data, input);\n      if (reducer.scope === \"data\") {\n        context = reducer.reduceIndex(range(data), V);\n      }\n    },\n    scope(scope, I) {\n      if (reducer.scope === scope) {\n        context = reducer.reduceIndex(I, V);\n      }\n    },\n    reduce(I, extent) {\n      return reducer.scope == null ? reducer.reduceIndex(I, V, extent) : reducer.reduceIndex(I, V, context, extent);\n    }\n  };\n}\n\nexport function maybeGroup(I, X) {\n  return X ? grouper(I, (i) => X[i]) : [[, I]];\n}\n\nexport function maybeReduce(reduce, value, fallback = invalidReduce) {\n  if (reduce == null) return fallback(reduce);\n  if (typeof reduce.reduceIndex === \"function\") return reduce;\n  if (typeof reduce.reduce === \"function\" && isObject(reduce)) return reduceReduce(reduce); // N.B. array.reduce\n  if (typeof reduce === \"function\") return reduceFunction(reduce);\n  if (/^p\\d{2}$/i.test(reduce)) return reduceAccessor(percentile(reduce));\n  switch (`${reduce}`.toLowerCase()) {\n    case \"first\":\n      return reduceFirst;\n    case \"last\":\n      return reduceLast;\n    case \"identity\":\n      return reduceIdentity;\n    case \"count\":\n      return reduceCount;\n    case \"distinct\":\n      return reduceDistinct;\n    case \"sum\":\n      return value == null ? reduceCount : reduceSum;\n    case \"proportion\":\n      return reduceProportion(value, \"data\");\n    case \"proportion-facet\":\n      return reduceProportion(value, \"facet\");\n    case \"deviation\":\n      return reduceAccessor(deviation);\n    case \"min\":\n      return reduceAccessor(min);\n    case \"min-index\":\n      return reduceAccessor(minIndex);\n    case \"max\":\n      return reduceAccessor(max);\n    case \"max-index\":\n      return reduceAccessor(maxIndex);\n    case \"mean\":\n      return reduceMaybeTemporalAccessor(mean);\n    case \"median\":\n      return reduceMaybeTemporalAccessor(median);\n    case \"variance\":\n      return reduceAccessor(variance);\n    case \"mode\":\n      return reduceAccessor(mode);\n  }\n  return fallback(reduce);\n}\n\nfunction invalidReduce(reduce) {\n  throw new Error(`invalid reduce: ${reduce}`);\n}\n\nexport function maybeGroupOutputs(outputs, inputs) {\n  return maybeOutputs(outputs, inputs, maybeGroupOutput);\n}\n\nfunction maybeGroupOutput(name, reduce, inputs) {\n  return maybeOutput(name, reduce, inputs, maybeGroupEvaluator);\n}\n\nfunction maybeGroupEvaluator(name, reduce, inputs) {\n  return maybeEvaluator(name, reduce, inputs, maybeGroupReduce);\n}\n\nfunction maybeGroupReduce(reduce, value) {\n  return maybeReduce(reduce, value, maybeGroupReduceFallback);\n}\n\nfunction maybeGroupReduceFallback(reduce) {\n  switch (`${reduce}`.toLowerCase()) {\n    case \"x\":\n      return reduceX;\n    case \"y\":\n      return reduceY;\n    case \"z\":\n      return reduceZ;\n  }\n  throw new Error(`invalid group reduce: ${reduce}`);\n}\n\nexport function maybeSubgroup(outputs, inputs) {\n  for (const name in inputs) {\n    const value = inputs[name];\n    if (value !== undefined && !outputs.some((o) => o.name === name)) {\n      return value;\n    }\n  }\n}\n\nexport function maybeSort(facets, sort, reverse) {\n  if (sort) {\n    const S = sort.output.transform();\n    const compare = (i, j) => ascendingDefined(S[i], S[j]);\n    facets.forEach((f) => f.sort(compare));\n  }\n  if (reverse) {\n    facets.forEach((f) => f.reverse());\n  }\n}\n\nfunction reduceReduce(reduce) {\n  console.warn(\"deprecated reduce interface; implement reduceIndex instead.\");\n  return {...reduce, reduceIndex: reduce.reduce.bind(reduce)};\n}\n\nfunction reduceFunction(f) {\n  return {\n    reduceIndex(I, X, extent) {\n      return f(take(X, I), extent);\n    }\n  };\n}\n\nfunction reduceAccessor(f) {\n  return {\n    reduceIndex(I, X) {\n      return f(I, (i) => X[i]);\n    }\n  };\n}\n\nfunction reduceMaybeTemporalAccessor(f) {\n  return {\n    reduceIndex(I, X) {\n      const x = f(I, (i) => X[i]);\n      return isTemporal(X) ? new Date(x) : x;\n    }\n  };\n}\n\nexport const reduceIdentity = {\n  reduceIndex(I, X) {\n    return take(X, I);\n  }\n};\n\nexport const reduceFirst = {\n  reduceIndex(I, X) {\n    return X[I[0]];\n  }\n};\n\nconst reduceTitle = {\n  reduceIndex(I, X) {\n    const n = 5;\n    const groups = sort(\n      rollup(\n        I,\n        (V) => V.length,\n        (i) => X[i]\n      ),\n      second\n    );\n    const top = groups.slice(-n).reverse();\n    if (top.length < groups.length) {\n      const bottom = groups.slice(0, 1 - n);\n      top[n - 1] = [` ${bottom.length.toLocaleString(\"en-US\")} more`, sum(bottom, second)];\n    }\n    return top.map(([key, value]) => `${key} (${value.toLocaleString(\"en-US\")})`).join(\"\\n\");\n  }\n};\n\nconst reduceLast = {\n  reduceIndex(I, X) {\n    return X[I[I.length - 1]];\n  }\n};\n\nexport const reduceCount = {\n  label: \"Frequency\",\n  reduceIndex(I) {\n    return I.length;\n  }\n};\n\nconst reduceDistinct = {\n  label: \"Distinct\",\n  reduceIndex(I, X) {\n    const s = new InternSet();\n    for (const i of I) s.add(X[i]);\n    return s.size;\n  }\n};\n\nconst reduceSum = reduceAccessor(sum);\n\nfunction reduceProportion(value, scope) {\n  return value == null\n    ? {scope, label: \"Frequency\", reduceIndex: (I, V, basis = 1) => I.length / basis}\n    : {scope, reduceIndex: (I, V, basis = 1) => sum(I, (i) => V[i]) / basis};\n}\n\nconst reduceX = {\n  reduceIndex(I, X, {x}) {\n    return x;\n  }\n};\n\nconst reduceY = {\n  reduceIndex(I, X, {y}) {\n    return y;\n  }\n};\n\nexport const reduceZ = {\n  reduceIndex(I, X, {z}) {\n    return z;\n  }\n};\n\nexport function find(test) {\n  if (typeof test !== \"function\") throw new Error(`invalid test function: ${test}`);\n  return {\n    reduceIndex(I, V, {data}) {\n      return V[I.find(isArray(data) ? (i) => test(data[i], i, data) : (i) => test(data.get(i), i, data))];\n    }\n  };\n}\n","import {InternSet, rollups} from \"d3\";\nimport {ascendingDefined, descendingDefined} from \"./defined.js\";\nimport {first, isColor, isEvery, isIterable, isOpacity, labelof, map, maybeValue, range, valueof} from \"./options.js\";\nimport {registry} from \"./scales/index.js\";\nimport {isSymbol, maybeSymbol} from \"./symbol.js\";\nimport {maybeReduce} from \"./transforms/group.js\";\n\nexport function createChannel(data, {scale, type, value, filter, hint, label = labelof(value)}, name) {\n  if (hint === undefined && typeof value?.transform === \"function\") hint = value.hint;\n  return inferChannelScale(name, {\n    scale,\n    type,\n    value: valueof(data, value),\n    label,\n    filter,\n    hint\n  });\n}\n\nexport function createChannels(channels, data) {\n  return Object.fromEntries(\n    Object.entries(channels).map(([name, channel]) => [name, createChannel(data, channel, name)])\n  );\n}\n\n// TODO Use Float64Array for scales with numeric ranges, e.g. position?\nexport function valueObject(channels, scales) {\n  const values = Object.fromEntries(\n    Object.entries(channels).map(([name, {scale: scaleName, value}]) => {\n      const scale = scaleName == null ? null : scales[scaleName];\n      return [name, scale == null ? value : map(value, scale)];\n    })\n  );\n  values.channels = channels; // expose channel state for advanced usage\n  return values;\n}\n\n// If the channel uses the \"auto\" scale (or equivalently true), infer the scale\n// from the channel name and the provided values. For color and symbol channels,\n// no scale is applied if the values are literal; however for symbols, we must\n// promote symbol names (e.g., \"plus\") to symbol implementations (symbolPlus).\n// Note: mutates channel!\nexport function inferChannelScale(name, channel) {\n  const {scale, value} = channel;\n  if (scale === true || scale === \"auto\") {\n    switch (name) {\n      case \"fill\":\n      case \"stroke\":\n      case \"color\":\n        channel.scale = scale !== true && isEvery(value, isColor) ? null : \"color\";\n        channel.defaultScale = \"color\";\n        break;\n      case \"fillOpacity\":\n      case \"strokeOpacity\":\n      case \"opacity\":\n        channel.scale = scale !== true && isEvery(value, isOpacity) ? null : \"opacity\";\n        channel.defaultScale = \"opacity\";\n        break;\n      case \"symbol\":\n        if (scale !== true && isEvery(value, isSymbol)) {\n          channel.scale = null;\n          channel.value = map(value, maybeSymbol);\n        } else {\n          channel.scale = \"symbol\";\n        }\n        channel.defaultScale = \"symbol\";\n        break;\n      default:\n        channel.scale = registry.has(name) ? name : null;\n        break;\n    }\n  } else if (scale === false) {\n    channel.scale = null;\n  } else if (scale != null && !registry.has(scale)) {\n    throw new Error(`unknown scale: ${scale}`);\n  }\n  return channel;\n}\n\n// Note: mutates channel.domain! This is set to a function so that it is lazily\n// computed; i.e., if the scales domain is set explicitly, that takes priority\n// over the sort option, and we dont need to do additional work.\nexport function channelDomain(data, facets, channels, facetChannels, options) {\n  const {order: defaultOrder, reverse: defaultReverse, reduce: defaultReduce = true, limit: defaultLimit} = options;\n  for (const x in options) {\n    if (!registry.has(x)) continue; // ignore unknown scale keys (including generic options)\n    let {value: y, order = defaultOrder, reverse = defaultReverse, reduce = defaultReduce, limit = defaultLimit} = maybeValue(options[x]); // prettier-ignore\n    const negate = y?.startsWith(\"-\");\n    if (negate) y = y.slice(1);\n    order = order === undefined ? negate !== (y === \"width\" || y === \"height\") ? descendingGroup : ascendingGroup : maybeOrder(order); // prettier-ignore\n    if (reduce == null || reduce === false) continue; // disabled reducer\n    const X = x === \"fx\" || x === \"fy\" ? reindexFacetChannel(facets, facetChannels[x]) : findScaleChannel(channels, x);\n    if (!X) throw new Error(`missing channel for scale: ${x}`);\n    const XV = X.value;\n    const [lo = 0, hi = Infinity] = isIterable(limit) ? limit : limit < 0 ? [limit] : [0, limit];\n    if (y == null) {\n      X.domain = () => {\n        let domain = Array.from(new InternSet(XV)); // remove any duplicates\n        if (reverse) domain = domain.reverse();\n        if (lo !== 0 || hi !== Infinity) domain = domain.slice(lo, hi);\n        return domain;\n      };\n    } else {\n      const YV =\n        y === \"data\"\n          ? data\n          : y === \"height\"\n          ? difference(channels, \"y1\", \"y2\")\n          : y === \"width\"\n          ? difference(channels, \"x1\", \"x2\")\n          : values(channels, y, y === \"y\" ? \"y2\" : y === \"x\" ? \"x2\" : undefined);\n      const reducer = maybeReduce(reduce === true ? \"max\" : reduce, YV);\n      X.domain = () => {\n        let domain = rollups(\n          range(XV),\n          (I) => reducer.reduceIndex(I, YV),\n          (i) => XV[i]\n        );\n        if (order) domain.sort(order);\n        if (reverse) domain.reverse();\n        if (lo !== 0 || hi !== Infinity) domain = domain.slice(lo, hi);\n        return domain.map(first);\n      };\n    }\n  }\n}\n\nfunction findScaleChannel(channels, scale) {\n  for (const name in channels) {\n    const channel = channels[name];\n    if (channel.scale === scale) return channel;\n  }\n}\n\n// Facet channels are not affected by transforms; so, to compute the domain of a\n// facet scale, we must first re-index the facet channel according to the\n// transformed mark index. Note: mutates channel, but that should be safe here?\nfunction reindexFacetChannel(facets, channel) {\n  const originalFacets = facets.original;\n  if (originalFacets === facets) return channel; // not transformed\n  const V1 = channel.value;\n  const V2 = (channel.value = []); // mutates channel!\n  for (let i = 0; i < originalFacets.length; ++i) {\n    const vi = V1[originalFacets[i][0]];\n    for (const j of facets[i]) V2[j] = vi;\n  }\n  return channel;\n}\n\nfunction difference(channels, k1, k2) {\n  const X1 = values(channels, k1);\n  const X2 = values(channels, k2);\n  return map(X2, (x2, i) => Math.abs(x2 - X1[i]), Float64Array);\n}\n\nfunction values(channels, name, alias) {\n  let channel = channels[name];\n  if (!channel && alias !== undefined) channel = channels[alias];\n  if (channel) return channel.value;\n  throw new Error(`missing channel: ${name}`);\n}\n\nfunction maybeOrder(order) {\n  if (order == null || typeof order === \"function\") return order;\n  switch (`${order}`.toLowerCase()) {\n    case \"ascending\":\n      return ascendingGroup;\n    case \"descending\":\n      return descendingGroup;\n  }\n  throw new Error(`invalid order: ${order}`);\n}\n\nfunction ascendingGroup([ak, av], [bk, bv]) {\n  return ascendingDefined(av, bv) || ascendingDefined(ak, bk);\n}\n\nfunction descendingGroup([ak, av], [bk, bv]) {\n  return descendingDefined(av, bv) || ascendingDefined(ak, bk);\n}\n\nexport function getSource(channels, key) {\n  let channel = channels[key];\n  if (!channel) return;\n  while (channel.source) channel = channel.source;\n  return channel.source === null ? null : channel;\n}\n","import {\n  interpolateBlues,\n  interpolateBrBG,\n  interpolateBuGn,\n  interpolateBuPu,\n  interpolateGnBu,\n  interpolateGreens,\n  interpolateGreys,\n  interpolateOranges,\n  interpolateOrRd,\n  interpolatePiYG,\n  interpolatePRGn,\n  interpolatePuBu,\n  interpolatePuBuGn,\n  interpolatePuOr,\n  interpolatePuRd,\n  interpolatePurples,\n  interpolateRdBu,\n  interpolateRdGy,\n  interpolateRdPu,\n  interpolateRdYlBu,\n  interpolateRdYlGn,\n  interpolateReds,\n  interpolateSpectral,\n  interpolateYlGn,\n  interpolateYlGnBu,\n  interpolateYlOrBr,\n  interpolateYlOrRd,\n  interpolateTurbo,\n  interpolateViridis,\n  interpolateMagma,\n  interpolateInferno,\n  interpolatePlasma,\n  interpolateCividis,\n  interpolateCubehelixDefault,\n  interpolateWarm,\n  interpolateCool,\n  interpolateRainbow,\n  interpolateSinebow,\n  quantize,\n  schemeAccent,\n  schemeBlues,\n  schemeBrBG,\n  schemeBuGn,\n  schemeBuPu,\n  schemeCategory10,\n  schemeDark2,\n  schemeGnBu,\n  schemeGreens,\n  schemeGreys,\n  schemeObservable10,\n  schemeOranges,\n  schemeOrRd,\n  schemePaired,\n  schemePastel1,\n  schemePastel2,\n  schemePiYG,\n  schemePRGn,\n  schemePuBu,\n  schemePuBuGn,\n  schemePuOr,\n  schemePuRd,\n  schemePurples,\n  schemeRdBu,\n  schemeRdGy,\n  schemeRdPu,\n  schemeRdYlBu,\n  schemeRdYlGn,\n  schemeReds,\n  schemeSet1,\n  schemeSet2,\n  schemeSet3,\n  schemeSpectral,\n  schemeTableau10,\n  schemeYlGn,\n  schemeYlGnBu,\n  schemeYlOrBr,\n  schemeYlOrRd\n} from \"d3\";\n\nconst categoricalSchemes = new Map([\n  [\"accent\", schemeAccent],\n  [\"category10\", schemeCategory10],\n  [\"dark2\", schemeDark2],\n  [\"observable10\", schemeObservable10],\n  [\"paired\", schemePaired],\n  [\"pastel1\", schemePastel1],\n  [\"pastel2\", schemePastel2],\n  [\"set1\", schemeSet1],\n  [\"set2\", schemeSet2],\n  [\"set3\", schemeSet3],\n  [\"tableau10\", schemeTableau10]\n]);\n\nexport function isCategoricalScheme(scheme) {\n  return scheme != null && categoricalSchemes.has(`${scheme}`.toLowerCase());\n}\n\nconst ordinalSchemes = new Map([\n  ...categoricalSchemes,\n\n  // diverging\n  [\"brbg\", scheme11(schemeBrBG, interpolateBrBG)],\n  [\"prgn\", scheme11(schemePRGn, interpolatePRGn)],\n  [\"piyg\", scheme11(schemePiYG, interpolatePiYG)],\n  [\"puor\", scheme11(schemePuOr, interpolatePuOr)],\n  [\"rdbu\", scheme11(schemeRdBu, interpolateRdBu)],\n  [\"rdgy\", scheme11(schemeRdGy, interpolateRdGy)],\n  [\"rdylbu\", scheme11(schemeRdYlBu, interpolateRdYlBu)],\n  [\"rdylgn\", scheme11(schemeRdYlGn, interpolateRdYlGn)],\n  [\"spectral\", scheme11(schemeSpectral, interpolateSpectral)],\n\n  // reversed diverging (for temperature data)\n  [\"burd\", scheme11r(schemeRdBu, interpolateRdBu)],\n  [\"buylrd\", scheme11r(schemeRdYlBu, interpolateRdYlBu)],\n\n  // sequential (single-hue)\n  [\"blues\", scheme9(schemeBlues, interpolateBlues)],\n  [\"greens\", scheme9(schemeGreens, interpolateGreens)],\n  [\"greys\", scheme9(schemeGreys, interpolateGreys)],\n  [\"oranges\", scheme9(schemeOranges, interpolateOranges)],\n  [\"purples\", scheme9(schemePurples, interpolatePurples)],\n  [\"reds\", scheme9(schemeReds, interpolateReds)],\n\n  // sequential (multi-hue)\n  [\"turbo\", schemei(interpolateTurbo)],\n  [\"viridis\", schemei(interpolateViridis)],\n  [\"magma\", schemei(interpolateMagma)],\n  [\"inferno\", schemei(interpolateInferno)],\n  [\"plasma\", schemei(interpolatePlasma)],\n  [\"cividis\", schemei(interpolateCividis)],\n  [\"cubehelix\", schemei(interpolateCubehelixDefault)],\n  [\"warm\", schemei(interpolateWarm)],\n  [\"cool\", schemei(interpolateCool)],\n  [\"bugn\", scheme9(schemeBuGn, interpolateBuGn)],\n  [\"bupu\", scheme9(schemeBuPu, interpolateBuPu)],\n  [\"gnbu\", scheme9(schemeGnBu, interpolateGnBu)],\n  [\"orrd\", scheme9(schemeOrRd, interpolateOrRd)],\n  [\"pubu\", scheme9(schemePuBu, interpolatePuBu)],\n  [\"pubugn\", scheme9(schemePuBuGn, interpolatePuBuGn)],\n  [\"purd\", scheme9(schemePuRd, interpolatePuRd)],\n  [\"rdpu\", scheme9(schemeRdPu, interpolateRdPu)],\n  [\"ylgn\", scheme9(schemeYlGn, interpolateYlGn)],\n  [\"ylgnbu\", scheme9(schemeYlGnBu, interpolateYlGnBu)],\n  [\"ylorbr\", scheme9(schemeYlOrBr, interpolateYlOrBr)],\n  [\"ylorrd\", scheme9(schemeYlOrRd, interpolateYlOrRd)],\n\n  // cyclical\n  [\"rainbow\", schemeicyclical(interpolateRainbow)],\n  [\"sinebow\", schemeicyclical(interpolateSinebow)]\n]);\n\nfunction scheme9(scheme, interpolate) {\n  return ({length: n}) => {\n    if (n === 1) return [scheme[3][1]]; // favor midpoint\n    if (n === 2) return [scheme[3][1], scheme[3][2]]; // favor darker\n    n = Math.max(3, Math.floor(n));\n    return n > 9 ? quantize(interpolate, n) : scheme[n];\n  };\n}\n\nfunction scheme11(scheme, interpolate) {\n  return ({length: n}) => {\n    if (n === 2) return [scheme[3][0], scheme[3][2]]; // favor diverging extrema\n    n = Math.max(3, Math.floor(n));\n    return n > 11 ? quantize(interpolate, n) : scheme[n];\n  };\n}\n\nfunction scheme11r(scheme, interpolate) {\n  return ({length: n}) => {\n    if (n === 2) return [scheme[3][2], scheme[3][0]]; // favor diverging extrema\n    n = Math.max(3, Math.floor(n));\n    return n > 11 ? quantize((t) => interpolate(1 - t), n) : scheme[n].slice().reverse();\n  };\n}\n\nfunction schemei(interpolate) {\n  return ({length: n}) => quantize(interpolate, Math.max(2, Math.floor(n)));\n}\n\nfunction schemeicyclical(interpolate) {\n  return ({length: n}) => quantize(interpolate, Math.floor(n) + 1).slice(0, -1);\n}\n\nexport function ordinalScheme(scheme) {\n  const s = `${scheme}`.toLowerCase();\n  if (!ordinalSchemes.has(s)) throw new Error(`unknown ordinal scheme: ${s}`);\n  return ordinalSchemes.get(s);\n}\n\nexport function ordinalRange(scheme, length) {\n  const s = ordinalScheme(scheme);\n  const r = typeof s === \"function\" ? s({length}) : s;\n  return r.length !== length ? r.slice(0, length) : r;\n}\n\n// If the specified domain contains only booleans (ignoring null and undefined),\n// returns a corresponding range where false is mapped to the low color and true\n// is mapped to the high color of the specified scheme.\nexport function maybeBooleanRange(domain, scheme = \"greys\") {\n  const range = new Set();\n  const [f, t] = ordinalRange(scheme, 2);\n  for (const value of domain) {\n    if (value == null) continue;\n    if (value === true) range.add(t);\n    else if (value === false) range.add(f);\n    else return;\n  }\n  return [...range];\n}\n\nconst quantitativeSchemes = new Map([\n  // diverging\n  [\"brbg\", interpolateBrBG],\n  [\"prgn\", interpolatePRGn],\n  [\"piyg\", interpolatePiYG],\n  [\"puor\", interpolatePuOr],\n  [\"rdbu\", interpolateRdBu],\n  [\"rdgy\", interpolateRdGy],\n  [\"rdylbu\", interpolateRdYlBu],\n  [\"rdylgn\", interpolateRdYlGn],\n  [\"spectral\", interpolateSpectral],\n\n  // reversed diverging (for temperature data)\n  [\"burd\", (t) => interpolateRdBu(1 - t)],\n  [\"buylrd\", (t) => interpolateRdYlBu(1 - t)],\n\n  // sequential (single-hue)\n  [\"blues\", interpolateBlues],\n  [\"greens\", interpolateGreens],\n  [\"greys\", interpolateGreys],\n  [\"purples\", interpolatePurples],\n  [\"reds\", interpolateReds],\n  [\"oranges\", interpolateOranges],\n\n  // sequential (multi-hue)\n  [\"turbo\", interpolateTurbo],\n  [\"viridis\", interpolateViridis],\n  [\"magma\", interpolateMagma],\n  [\"inferno\", interpolateInferno],\n  [\"plasma\", interpolatePlasma],\n  [\"cividis\", interpolateCividis],\n  [\"cubehelix\", interpolateCubehelixDefault],\n  [\"warm\", interpolateWarm],\n  [\"cool\", interpolateCool],\n  [\"bugn\", interpolateBuGn],\n  [\"bupu\", interpolateBuPu],\n  [\"gnbu\", interpolateGnBu],\n  [\"orrd\", interpolateOrRd],\n  [\"pubugn\", interpolatePuBuGn],\n  [\"pubu\", interpolatePuBu],\n  [\"purd\", interpolatePuRd],\n  [\"rdpu\", interpolateRdPu],\n  [\"ylgnbu\", interpolateYlGnBu],\n  [\"ylgn\", interpolateYlGn],\n  [\"ylorbr\", interpolateYlOrBr],\n  [\"ylorrd\", interpolateYlOrRd],\n\n  // cyclical\n  [\"rainbow\", interpolateRainbow],\n  [\"sinebow\", interpolateSinebow]\n]);\n\nexport function quantitativeScheme(scheme) {\n  const s = `${scheme}`.toLowerCase();\n  if (!quantitativeSchemes.has(s)) throw new Error(`unknown quantitative scheme: ${s}`);\n  return quantitativeSchemes.get(s);\n}\n\nconst divergingSchemes = new Set([\n  \"brbg\",\n  \"prgn\",\n  \"piyg\",\n  \"puor\",\n  \"rdbu\",\n  \"rdgy\",\n  \"rdylbu\",\n  \"rdylgn\",\n  \"spectral\",\n  \"burd\",\n  \"buylrd\"\n]);\n\nexport function isDivergingScheme(scheme) {\n  return scheme != null && divergingSchemes.has(`${scheme}`.toLowerCase());\n}\n","import {\n  descending,\n  extent,\n  interpolateHcl,\n  interpolateHsl,\n  interpolateLab,\n  interpolateNumber,\n  interpolateRgb,\n  interpolateRound,\n  max,\n  median,\n  min,\n  piecewise,\n  quantile,\n  quantize,\n  reverse as reverseof,\n  scaleIdentity,\n  scaleLinear,\n  scaleLog,\n  scalePow,\n  scaleQuantile,\n  scaleSymlog,\n  scaleThreshold,\n  ticks\n} from \"d3\";\nimport {finite, negative, positive} from \"../defined.js\";\nimport {arrayify, constant, maybeNiceInterval, maybeRangeInterval, slice} from \"../options.js\";\nimport {orderof} from \"../order.js\";\nimport {color, length, opacity, radius, registry, hasNumericRange} from \"./index.js\";\nimport {ordinalRange, quantitativeScheme} from \"./schemes.js\";\n\nexport const flip = (i) => (t) => i(1 - t);\nconst unit = [0, 1];\n\nconst interpolators = new Map([\n  // numbers\n  [\"number\", interpolateNumber],\n\n  // color spaces\n  [\"rgb\", interpolateRgb],\n  [\"hsl\", interpolateHsl],\n  [\"hcl\", interpolateHcl],\n  [\"lab\", interpolateLab]\n]);\n\nexport function maybeInterpolator(interpolate) {\n  const i = `${interpolate}`.toLowerCase();\n  if (!interpolators.has(i)) throw new Error(`unknown interpolator: ${i}`);\n  return interpolators.get(i);\n}\n\nexport function createScaleQ(\n  key,\n  scale,\n  channels,\n  {\n    type,\n    nice,\n    clamp,\n    zero,\n    domain = inferAutoDomain(key, channels),\n    unknown,\n    round,\n    scheme,\n    interval,\n    range = registry.get(key) === radius\n      ? inferRadialRange(channels, domain)\n      : registry.get(key) === length\n      ? inferLengthRange(channels, domain)\n      : registry.get(key) === opacity\n      ? unit\n      : undefined,\n    interpolate = registry.get(key) === color\n      ? scheme == null && range !== undefined\n        ? interpolateRgb\n        : quantitativeScheme(scheme !== undefined ? scheme : type === \"cyclical\" ? \"rainbow\" : \"turbo\")\n      : round\n      ? interpolateRound\n      : interpolateNumber,\n    reverse\n  }\n) {\n  domain = maybeRepeat(domain);\n  interval = maybeRangeInterval(interval, type);\n  if (type === \"cyclical\" || type === \"sequential\") type = \"linear\"; // shorthand for color schemes\n  if (typeof interpolate !== \"function\") interpolate = maybeInterpolator(interpolate); // named interpolator\n  reverse = !!reverse;\n\n  // If an explicit range is specified, and it has a different length than the\n  // domain, then redistribute the range using a piecewise interpolator.\n  if (range !== undefined) {\n    const n = domain.length;\n    const m = (range = maybeRepeat(range)).length;\n    if (n !== m) {\n      if (interpolate.length === 1) throw new Error(\"invalid piecewise interpolator\"); // e.g., turbo\n      interpolate = piecewise(interpolate, range);\n      range = undefined;\n    }\n  }\n\n  // Disambiguate between a two-argument interpolator that is used in\n  // conjunction with the range, and a one-argument fixed interpolator on the\n  // [0, 1] interval as with the RdBu color scheme.\n  if (interpolate.length === 1) {\n    if (reverse) {\n      interpolate = flip(interpolate);\n      reverse = false;\n    }\n    if (range === undefined) {\n      range = Float64Array.from(domain, (_, i) => i / (domain.length - 1));\n      if (range.length === 2) range = unit; // optimize common case of [0, 1]\n    }\n    scale.interpolate((range === unit ? constant : interpolatePiecewise)(interpolate));\n  } else {\n    scale.interpolate(interpolate);\n  }\n\n  // If a zero option is specified, we assume that the domain is numeric, and we\n  // want to ensure that the domain crosses zero. However, note that the domain\n  // may be reversed (descending) so we shouldnt assume that the first value is\n  // smaller than the last; and also its possible that the domain has more than\n  // two values for a poly scale. And lastly be careful not to mutate input!\n  if (zero) {\n    const [min, max] = extent(domain);\n    if (min > 0 || max < 0) {\n      domain = slice(domain);\n      const o = orderof(domain) || 1; // treat degenerate as ascending\n      if (o === Math.sign(min)) domain[0] = 0; // [1, 2] or [-1, -2]\n      else domain[domain.length - 1] = 0; // [2, 1] or [-2, -1]\n    }\n  }\n\n  if (reverse) domain = reverseof(domain);\n  scale.domain(domain).unknown(unknown);\n  if (nice) scale.nice(maybeNice(nice, type)), (domain = scale.domain());\n  if (range !== undefined) scale.range(range);\n  if (clamp) scale.clamp(clamp);\n  return {type, domain, range, scale, interpolate, interval};\n}\n\nfunction maybeRepeat(values) {\n  values = arrayify(values);\n  return values.length >= 2 ? values : [values[0], values[0]];\n}\n\nfunction maybeNice(nice, type) {\n  return nice === true ? undefined : typeof nice === \"number\" ? nice : maybeNiceInterval(nice, type);\n}\n\nexport function createScaleLinear(key, channels, options) {\n  return createScaleQ(key, scaleLinear(), channels, options);\n}\n\nexport function createScaleSqrt(key, channels, options) {\n  return createScalePow(key, channels, {...options, exponent: 0.5});\n}\n\nexport function createScalePow(key, channels, {exponent = 1, ...options}) {\n  return createScaleQ(key, scalePow().exponent(exponent), channels, {...options, type: \"pow\"});\n}\n\nexport function createScaleLog(key, channels, {base = 10, domain = inferLogDomain(channels), ...options}) {\n  return createScaleQ(key, scaleLog().base(base), channels, {...options, domain});\n}\n\nexport function createScaleSymlog(key, channels, {constant = 1, ...options}) {\n  return createScaleQ(key, scaleSymlog().constant(constant), channels, options);\n}\n\nexport function createScaleQuantile(\n  key,\n  channels,\n  {\n    range,\n    quantiles = range === undefined ? 5 : (range = [...range]).length, // deprecated; use n instead\n    n = quantiles,\n    scheme = \"rdylbu\",\n    domain = inferQuantileDomain(channels),\n    unknown,\n    interpolate,\n    reverse\n  }\n) {\n  if (range === undefined) {\n    range =\n      interpolate !== undefined\n        ? quantize(interpolate, n)\n        : registry.get(key) === color\n        ? ordinalRange(scheme, n)\n        : undefined;\n  }\n  if (domain.length > 0) {\n    domain = scaleQuantile(domain, range === undefined ? {length: n} : range).quantiles();\n  }\n  return createScaleThreshold(key, channels, {domain, range, reverse, unknown});\n}\n\nexport function createScaleQuantize(\n  key,\n  channels,\n  {\n    range,\n    n = range === undefined ? 5 : (range = [...range]).length,\n    scheme = \"rdylbu\",\n    domain = inferAutoDomain(key, channels),\n    unknown,\n    interpolate,\n    reverse\n  }\n) {\n  const [min, max] = extent(domain);\n  let thresholds;\n  if (range === undefined) {\n    thresholds = ticks(min, max, n); // approximate number of nice, round thresholds\n    if (thresholds[0] <= min) thresholds.splice(0, 1); // drop exact lower bound\n    if (thresholds[thresholds.length - 1] >= max) thresholds.pop(); // drop exact upper bound\n    n = thresholds.length + 1;\n    range =\n      interpolate !== undefined\n        ? quantize(interpolate, n)\n        : registry.get(key) === color\n        ? ordinalRange(scheme, n)\n        : undefined;\n  } else {\n    thresholds = quantize(interpolateNumber(min, max), n + 1).slice(1, -1); // exactly n - 1 thresholds to match range\n    if (min instanceof Date) thresholds = thresholds.map((x) => new Date(x)); // preserve date types\n  }\n  if (orderof(arrayify(domain)) < 0) thresholds.reverse(); // preserve descending domain\n  return createScaleThreshold(key, channels, {domain: thresholds, range, reverse, unknown});\n}\n\nexport function createScaleThreshold(\n  key,\n  channels,\n  {\n    domain = [0], // explicit thresholds in ascending order\n    unknown,\n    scheme = \"rdylbu\",\n    interpolate,\n    range = interpolate !== undefined\n      ? quantize(interpolate, domain.length + 1)\n      : registry.get(key) === color\n      ? ordinalRange(scheme, domain.length + 1)\n      : undefined,\n    reverse\n  }\n) {\n  domain = arrayify(domain);\n  const sign = orderof(domain); // preserve descending domain\n  if (!isNaN(sign) && !isOrdered(domain, sign)) throw new Error(`the ${key} scale has a non-monotonic domain`);\n  if (reverse) range = reverseof(range); // domain ascending, so reverse range\n  return {\n    type: \"threshold\",\n    scale: scaleThreshold(sign < 0 ? reverseof(domain) : domain, range === undefined ? [] : range).unknown(unknown),\n    domain,\n    range\n  };\n}\n\nfunction isOrdered(domain, sign) {\n  for (let i = 1, n = domain.length, d = domain[0]; i < n; ++i) {\n    const s = descending(d, (d = domain[i]));\n    if (s !== 0 && s !== sign) return false;\n  }\n  return true;\n}\n\n// For non-numeric identity scales such as color and symbol, we cant use D3s\n// identity scale because it coerces to number; and we cant compute the domain\n// (and equivalently range) since we cant know whether the values are\n// continuous or discrete.\nexport function createScaleIdentity(key) {\n  return {type: \"identity\", scale: hasNumericRange(registry.get(key)) ? scaleIdentity() : (d) => d};\n}\n\nexport function inferDomain(channels, f = finite) {\n  return channels.length\n    ? [\n        min(channels, ({value}) => (value === undefined ? value : min(value, f))),\n        max(channels, ({value}) => (value === undefined ? value : max(value, f)))\n      ]\n    : [0, 1];\n}\n\nfunction inferAutoDomain(key, channels) {\n  const type = registry.get(key);\n  return (type === radius || type === opacity || type === length ? inferZeroDomain : inferDomain)(channels);\n}\n\nfunction inferZeroDomain(channels) {\n  return [0, channels.length ? max(channels, ({value}) => (value === undefined ? value : max(value, finite))) : 1];\n}\n\n// We dont want the upper bound of the radial domain to be zero, as this would\n// be degenerate, so we ignore nonpositive values. We also dont want the\n// maximum default radius to exceed 30px.\nfunction inferRadialRange(channels, domain) {\n  const hint = channels.find(({radius}) => radius !== undefined);\n  if (hint !== undefined) return [0, hint.radius]; // a natural maximum radius, e.g. hexbins\n  const h25 = quantile(channels, 0.5, ({value}) => (value === undefined ? NaN : quantile(value, 0.25, positive)));\n  const range = domain.map((d) => 3 * Math.sqrt(d / h25));\n  const k = 30 / max(range);\n  return k < 1 ? range.map((r) => r * k) : range;\n}\n\n// We want a length scales domain to go from zero to a positive value, and to\n// treat negative lengths if any as inverted vectors of equivalent magnitude. We\n// also dont want the maximum default length to exceed 60px.\nfunction inferLengthRange(channels, domain) {\n  const h50 = median(channels, ({value}) => (value === undefined ? NaN : median(value, Math.abs)));\n  const range = domain.map((d) => (12 * d) / h50);\n  const k = 60 / max(range);\n  return k < 1 ? range.map((r) => r * k) : range;\n}\n\nfunction inferLogDomain(channels) {\n  for (const {value} of channels) {\n    if (value !== undefined) {\n      for (let v of value) {\n        if (v > 0) return inferDomain(channels, positive);\n        if (v < 0) return inferDomain(channels, negative);\n      }\n    }\n  }\n  return [1, 10];\n}\n\nfunction inferQuantileDomain(channels) {\n  const domain = [];\n  for (const {value} of channels) {\n    if (value === undefined) continue;\n    for (const v of value) domain.push(v);\n  }\n  return domain;\n}\n\nexport function interpolatePiecewise(interpolate) {\n  return (i, j) => (t) => interpolate(i + t * (j - i));\n}\n","let warnings = 0;\nlet lastMessage;\n\nexport function consumeWarnings() {\n  const w = warnings;\n  warnings = 0;\n  lastMessage = undefined;\n  return w;\n}\n\nexport function warn(message) {\n  if (message === lastMessage) return;\n  lastMessage = message;\n  console.warn(message);\n  ++warnings;\n}\n","import {\n  descending,\n  interpolateNumber,\n  interpolateRgb,\n  piecewise,\n  scaleDiverging,\n  scaleDivergingLog,\n  scaleDivergingPow,\n  scaleDivergingSymlog\n} from \"d3\";\nimport {negative, positive} from \"../defined.js\";\nimport {arrayify} from \"../options.js\";\nimport {warn} from \"../warnings.js\";\nimport {color, registry} from \"./index.js\";\nimport {flip, inferDomain, interpolatePiecewise, maybeInterpolator} from \"./quantitative.js\";\nimport {quantitativeScheme} from \"./schemes.js\";\n\nfunction createScaleD(\n  key,\n  scale,\n  transform,\n  channels,\n  {\n    type,\n    nice,\n    clamp,\n    domain = inferDomain(channels),\n    unknown,\n    pivot = 0,\n    scheme,\n    range,\n    symmetric = true,\n    interpolate = registry.get(key) === color\n      ? scheme == null && range !== undefined\n        ? interpolateRgb\n        : quantitativeScheme(scheme !== undefined ? scheme : \"rdbu\")\n      : interpolateNumber,\n    reverse\n  }\n) {\n  pivot = +pivot;\n  domain = arrayify(domain);\n  let [min, max] = domain;\n  if (domain.length > 2) warn(`Warning: the diverging ${key} scale domain contains extra elements.`);\n\n  if (descending(min, max) < 0) ([min, max] = [max, min]), (reverse = !reverse);\n  min = Math.min(min, pivot);\n  max = Math.max(max, pivot);\n\n  // Sometimes interpolate is a named interpolator, such as \"lab\" for Lab color\n  // space. Other times interpolate is a function that takes two arguments and\n  // is used in conjunction with the range. And other times the interpolate\n  // function is a fixed interpolator on the [0, 1] interval, as when a\n  // color scheme such as interpolateRdBu is used.\n  if (typeof interpolate !== \"function\") {\n    interpolate = maybeInterpolator(interpolate);\n  }\n\n  // If an explicit range is specified, promote it to a piecewise interpolator.\n  if (range !== undefined) {\n    interpolate =\n      interpolate.length === 1 ? interpolatePiecewise(interpolate)(...range) : piecewise(interpolate, range);\n  }\n\n  // Reverse before normalization.\n  if (reverse) interpolate = flip(interpolate);\n\n  // Normalize the interpolator for symmetric difference around the pivot.\n  if (symmetric) {\n    const mid = transform.apply(pivot);\n    const mindelta = mid - transform.apply(min);\n    const maxdelta = transform.apply(max) - mid;\n    if (mindelta < maxdelta) min = transform.invert(mid - maxdelta);\n    else if (mindelta > maxdelta) max = transform.invert(mid + mindelta);\n  }\n\n  scale.domain([min, pivot, max]).unknown(unknown).interpolator(interpolate);\n  if (clamp) scale.clamp(clamp);\n  if (nice) scale.nice(nice);\n  return {type, domain: [min, max], pivot, interpolate, scale};\n}\n\nexport function createScaleDiverging(key, channels, options) {\n  return createScaleD(key, scaleDiverging(), transformIdentity, channels, options);\n}\n\nexport function createScaleDivergingSqrt(key, channels, options) {\n  return createScaleDivergingPow(key, channels, {...options, exponent: 0.5});\n}\n\nexport function createScaleDivergingPow(key, channels, {exponent = 1, ...options}) {\n  return createScaleD(key, scaleDivergingPow().exponent((exponent = +exponent)), transformPow(exponent), channels, {\n    ...options,\n    type: \"diverging-pow\"\n  });\n}\n\nexport function createScaleDivergingLog(\n  key,\n  channels,\n  {base = 10, pivot = 1, domain = inferDomain(channels, pivot < 0 ? negative : positive), ...options}\n) {\n  return createScaleD(key, scaleDivergingLog().base((base = +base)), transformLog, channels, {\n    domain,\n    pivot,\n    ...options\n  });\n}\n\nexport function createScaleDivergingSymlog(key, channels, {constant = 1, ...options}) {\n  return createScaleD(\n    key,\n    scaleDivergingSymlog().constant((constant = +constant)),\n    transformSymlog(constant),\n    channels,\n    options\n  );\n}\n\nconst transformIdentity = {\n  apply(x) {\n    return x;\n  },\n  invert(x) {\n    return x;\n  }\n};\n\nconst transformLog = {\n  apply: Math.log,\n  invert: Math.exp\n};\n\nconst transformSqrt = {\n  apply(x) {\n    return Math.sign(x) * Math.sqrt(Math.abs(x));\n  },\n  invert(x) {\n    return Math.sign(x) * (x * x);\n  }\n};\n\nfunction transformPow(exponent) {\n  return exponent === 0.5\n    ? transformSqrt\n    : {\n        apply(x) {\n          return Math.sign(x) * Math.pow(Math.abs(x), exponent);\n        },\n        invert(x) {\n          return Math.sign(x) * Math.pow(Math.abs(x), 1 / exponent);\n        }\n      };\n}\n\nfunction transformSymlog(constant) {\n  return {\n    apply(x) {\n      return Math.sign(x) * Math.log1p(Math.abs(x / constant));\n    },\n    invert(x) {\n      return Math.sign(x) * Math.expm1(Math.abs(x)) * constant;\n    }\n  };\n}\n","import {scaleTime, scaleUtc} from \"d3\";\nimport {createScaleQ} from \"./quantitative.js\";\n\nfunction createScaleT(key, scale, channels, options) {\n  return createScaleQ(key, scale, channels, options);\n}\n\nexport function createScaleTime(key, channels, options) {\n  return createScaleT(key, scaleTime(), channels, options);\n}\n\nexport function createScaleUtc(key, channels, options) {\n  return createScaleT(key, scaleUtc(), channels, options);\n}\n","import {InternSet, extent, quantize, reverse as reverseof, sort, symbolsFill, symbolsStroke} from \"d3\";\nimport {scaleBand, scaleOrdinal, scalePoint, scaleImplicit} from \"d3\";\nimport {ascendingDefined} from \"../defined.js\";\nimport {isNoneish, map, maybeRangeInterval} from \"../options.js\";\nimport {maybeSymbol} from \"../symbol.js\";\nimport {registry, color, position, symbol} from \"./index.js\";\nimport {maybeBooleanRange, ordinalScheme, quantitativeScheme} from \"./schemes.js\";\n\n// This denotes an implicitly ordinal color scale: the scale type was not set,\n// but the associated values are strings or booleans. If the associated defined\n// values are entirely boolean, the range will default to greys. You can opt out\n// of this by setting the type explicitly.\nexport const ordinalImplicit = Symbol(\"ordinal\");\n\nfunction createScaleO(key, scale, channels, {type, interval, domain, range, reverse, hint}) {\n  interval = maybeRangeInterval(interval, type);\n  if (domain === undefined) domain = inferDomain(channels, interval, key);\n  if (type === \"categorical\" || type === ordinalImplicit) type = \"ordinal\"; // shorthand for color schemes\n  if (reverse) domain = reverseof(domain);\n  domain = scale.domain(domain).domain(); // deduplicate\n  if (range !== undefined) {\n    // If the range is specified as a function, pass it the domain.\n    if (typeof range === \"function\") range = range(domain);\n    scale.range(range);\n  }\n  return {type, domain, range, scale, hint, interval};\n}\n\nexport function createScaleOrdinal(key, channels, {type, interval, domain, range, scheme, unknown, ...options}) {\n  interval = maybeRangeInterval(interval, type);\n  if (domain === undefined) domain = inferDomain(channels, interval, key);\n  let hint;\n  if (registry.get(key) === symbol) {\n    hint = inferSymbolHint(channels);\n    range = range === undefined ? inferSymbolRange(hint) : map(range, maybeSymbol);\n  } else if (registry.get(key) === color) {\n    if (range === undefined && (type === \"ordinal\" || type === ordinalImplicit)) {\n      range = maybeBooleanRange(domain, scheme);\n      if (range !== undefined) scheme = undefined; // Dont re-apply scheme.\n    }\n    if (scheme === undefined && range === undefined) {\n      scheme = type === \"ordinal\" ? \"turbo\" : \"observable10\";\n    }\n    if (scheme !== undefined) {\n      if (range !== undefined) {\n        const interpolate = quantitativeScheme(scheme);\n        const t0 = range[0],\n          d = range[1] - range[0];\n        range = ({length: n}) => quantize((t) => interpolate(t0 + d * t), n);\n      } else {\n        range = ordinalScheme(scheme);\n      }\n    }\n  }\n  if (unknown === scaleImplicit) {\n    throw new Error(`implicit unknown on ${key} scale is not supported`);\n  }\n  return createScaleO(key, scaleOrdinal().unknown(unknown), channels, {...options, type, domain, range, hint});\n}\n\nexport function createScalePoint(key, channels, {align = 0.5, padding = 0.5, ...options}) {\n  return maybeRound(scalePoint().align(align).padding(padding), channels, options, key);\n}\n\nexport function createScaleBand(\n  key,\n  channels,\n  {\n    align = 0.5,\n    padding = 0.1,\n    paddingInner = padding,\n    paddingOuter = key === \"fx\" || key === \"fy\" ? 0 : padding,\n    ...options\n  }\n) {\n  return maybeRound(\n    scaleBand().align(align).paddingInner(paddingInner).paddingOuter(paddingOuter),\n    channels,\n    options,\n    key\n  );\n}\n\nfunction maybeRound(scale, channels, options, key) {\n  let {round} = options;\n  if (round !== undefined) scale.round((round = !!round));\n  scale = createScaleO(key, scale, channels, options);\n  scale.round = round; // preserve for autoScaleRound\n  return scale;\n}\n\nfunction inferDomain(channels, interval, key) {\n  const values = new InternSet();\n  for (const {value, domain} of channels) {\n    if (domain !== undefined) return domain(); // see channelDomain\n    if (value === undefined) continue;\n    for (const v of value) values.add(v);\n  }\n  if (interval !== undefined) {\n    const [min, max] = extent(values).map(interval.floor, interval);\n    return interval.range(min, interval.offset(max));\n  }\n  if (values.size > 10e3 && registry.get(key) === position) {\n    throw new Error(`implicit ordinal domain of ${key} scale has more than 10,000 values`);\n  }\n  return sort(values, ascendingDefined);\n}\n\n// If all channels provide a consistent hint, propagate it to the scale.\nfunction inferHint(channels, key) {\n  let value;\n  for (const {hint} of channels) {\n    const candidate = hint?.[key];\n    if (candidate === undefined) continue; // no hint here\n    if (value === undefined) value = candidate; // first hint\n    else if (value !== candidate) return; // inconsistent hint\n  }\n  return value;\n}\n\nfunction inferSymbolHint(channels) {\n  return {\n    fill: inferHint(channels, \"fill\"),\n    stroke: inferHint(channels, \"stroke\")\n  };\n}\n\nfunction inferSymbolRange(hint) {\n  return isNoneish(hint.fill) ? symbolsStroke : symbolsFill;\n}\n","import {\n  isOrdinal,\n  isTemporal,\n  isTemporalString,\n  isNumericString,\n  isScaleOptions,\n  map,\n  slice,\n  coerceNumbers,\n  coerceDates\n} from \"./options.js\";\nimport {orderof} from \"./order.js\";\nimport {registry, color, position, radius, opacity, symbol, length} from \"./scales/index.js\";\nimport {\n  createScaleLinear,\n  createScaleSqrt,\n  createScalePow,\n  createScaleLog,\n  createScaleSymlog,\n  createScaleQuantile,\n  createScaleQuantize,\n  createScaleThreshold,\n  createScaleIdentity\n} from \"./scales/quantitative.js\";\nimport {\n  createScaleDiverging,\n  createScaleDivergingSqrt,\n  createScaleDivergingPow,\n  createScaleDivergingLog,\n  createScaleDivergingSymlog\n} from \"./scales/diverging.js\";\nimport {isCategoricalScheme, isDivergingScheme} from \"./scales/schemes.js\";\nimport {createScaleTime, createScaleUtc} from \"./scales/temporal.js\";\nimport {createScaleOrdinal, createScalePoint, createScaleBand, ordinalImplicit} from \"./scales/ordinal.js\";\nimport {maybeSymbol} from \"./symbol.js\";\nimport {warn} from \"./warnings.js\";\n\nexport function createScales(\n  channelsByScale,\n  {\n    label: globalLabel,\n    inset: globalInset = 0,\n    insetTop: globalInsetTop = globalInset,\n    insetRight: globalInsetRight = globalInset,\n    insetBottom: globalInsetBottom = globalInset,\n    insetLeft: globalInsetLeft = globalInset,\n    round,\n    nice,\n    clamp,\n    zero,\n    align,\n    padding,\n    projection,\n    facet: {label: facetLabel = globalLabel} = {},\n    ...options\n  } = {}\n) {\n  const scales = {};\n  for (const [key, channels] of channelsByScale) {\n    const scaleOptions = options[key];\n    const scale = createScale(key, channels, {\n      round: registry.get(key) === position ? round : undefined, // only for position\n      nice,\n      clamp,\n      zero,\n      align,\n      padding,\n      projection,\n      ...scaleOptions\n    });\n    if (scale) {\n      // populate generic scale options (percent, transform, insets)\n      let {\n        label = key === \"fx\" || key === \"fy\" ? facetLabel : globalLabel,\n        percent,\n        transform,\n        inset,\n        insetTop = inset !== undefined ? inset : key === \"y\" ? globalInsetTop : 0, // not fy\n        insetRight = inset !== undefined ? inset : key === \"x\" ? globalInsetRight : 0, // not fx\n        insetBottom = inset !== undefined ? inset : key === \"y\" ? globalInsetBottom : 0, // not fy\n        insetLeft = inset !== undefined ? inset : key === \"x\" ? globalInsetLeft : 0 // not fx\n      } = scaleOptions || {};\n      if (transform == null) transform = undefined;\n      else if (typeof transform !== \"function\") throw new Error(\"invalid scale transform; not a function\");\n      scale.percent = !!percent;\n      scale.label = label === undefined ? inferScaleLabel(channels, scale) : label;\n      scale.transform = transform;\n      if (key === \"x\" || key === \"fx\") {\n        scale.insetLeft = +insetLeft;\n        scale.insetRight = +insetRight;\n      } else if (key === \"y\" || key === \"fy\") {\n        scale.insetTop = +insetTop;\n        scale.insetBottom = +insetBottom;\n      }\n      scales[key] = scale;\n    }\n  }\n  return scales;\n}\n\nexport function createScaleFunctions(descriptors) {\n  const scales = {};\n  const scaleFunctions = {scales};\n  for (const [key, descriptor] of Object.entries(descriptors)) {\n    const {scale, type, interval, label} = descriptor;\n    scales[key] = exposeScale(descriptor);\n    scaleFunctions[key] = scale;\n    // TODO: pass these properties, which are needed for axes, in the descriptor.\n    scale.type = type;\n    if (interval != null) scale.interval = interval;\n    if (label != null) scale.label = label;\n  }\n  return scaleFunctions;\n}\n\n// Mutates scale.range!\nexport function autoScaleRange(scales, dimensions) {\n  const {x, y, fx, fy} = scales;\n  const superdimensions = fx || fy ? outerDimensions(dimensions) : dimensions;\n  if (fx) autoScaleRangeX(fx, superdimensions);\n  if (fy) autoScaleRangeY(fy, superdimensions);\n  const subdimensions = fx || fy ? innerDimensions(scales, dimensions) : dimensions;\n  if (x) autoScaleRangeX(x, subdimensions);\n  if (y) autoScaleRangeY(y, subdimensions);\n}\n\n// Channels can have labels; if all the channels for a given scale are\n// consistently labeled (i.e., have the same value if not undefined), and the\n// corresponding scale doesnt already have an explicit label, then the\n// channels label is promoted to the scale. This inferred label should have an\n// orientation-appropriate arrow added when used as an axis, but we dont want\n// to add the arrow when the label is set explicitly as an option; so, the\n// inferred label is distinguished as an object with an inferred property.\nfunction inferScaleLabel(channels = [], scale) {\n  let label;\n  for (const {label: l} of channels) {\n    if (l === undefined) continue;\n    if (label === undefined) label = l;\n    else if (label !== l) return;\n  }\n  if (label === undefined) return;\n  if (!isOrdinalScale(scale) && scale.percent) label = `${label} (%)`;\n  return {inferred: true, toString: () => label};\n}\n\n// Determines whether the scale points in the positive (right or down) or\n// negative (left or up) direction; if the scale order cannot be determined,\n// returns NaN; used to assign an appropriate label arrow.\nexport function inferScaleOrder(scale) {\n  return Math.sign(orderof(scale.domain())) * Math.sign(orderof(scale.range()));\n}\n\n// Returns the dimensions of the outer frame; this is subdivided into facets\n// with the margins of each facet collapsing into the outer margins.\nexport function outerDimensions(dimensions) {\n  const {\n    marginTop,\n    marginRight,\n    marginBottom,\n    marginLeft,\n    width,\n    height,\n    facet: {\n      marginTop: facetMarginTop,\n      marginRight: facetMarginRight,\n      marginBottom: facetMarginBottom,\n      marginLeft: facetMarginLeft\n    }\n  } = dimensions;\n  return {\n    marginTop: Math.max(marginTop, facetMarginTop),\n    marginRight: Math.max(marginRight, facetMarginRight),\n    marginBottom: Math.max(marginBottom, facetMarginBottom),\n    marginLeft: Math.max(marginLeft, facetMarginLeft),\n    width,\n    height\n  };\n}\n\n// Returns the dimensions of each facet.\nexport function innerDimensions({fx, fy}, dimensions) {\n  const {marginTop, marginRight, marginBottom, marginLeft, width, height} = outerDimensions(dimensions);\n  return {\n    marginTop,\n    marginRight,\n    marginBottom,\n    marginLeft,\n    width: fx ? fx.scale.bandwidth() + marginLeft + marginRight : width,\n    height: fy ? fy.scale.bandwidth() + marginTop + marginBottom : height,\n    facet: {width, height}\n  };\n}\n\nfunction autoScaleRangeX(scale, dimensions) {\n  if (scale.range === undefined) {\n    const {insetLeft, insetRight} = scale;\n    const {width, marginLeft = 0, marginRight = 0} = dimensions;\n    const left = marginLeft + insetLeft;\n    const right = width - marginRight - insetRight;\n    scale.range = [left, Math.max(left, right)];\n    if (!isOrdinalScale(scale)) scale.range = piecewiseRange(scale);\n    scale.scale.range(scale.range);\n  }\n  autoScaleRound(scale);\n}\n\nfunction autoScaleRangeY(scale, dimensions) {\n  if (scale.range === undefined) {\n    const {insetTop, insetBottom} = scale;\n    const {height, marginTop = 0, marginBottom = 0} = dimensions;\n    const top = marginTop + insetTop;\n    const bottom = height - marginBottom - insetBottom;\n    scale.range = [Math.max(top, bottom), top];\n    if (!isOrdinalScale(scale)) scale.range = piecewiseRange(scale);\n    else scale.range.reverse();\n    scale.scale.range(scale.range);\n  }\n  autoScaleRound(scale);\n}\n\nfunction autoScaleRound(scale) {\n  if (scale.round === undefined && isBandScale(scale) && roundError(scale) <= 30) {\n    scale.scale.round(true);\n  }\n}\n\n// If we were to turn on rounding for this band or point scale, how much wasted\n// space would it introduce (on both ends of the range)? This must match\n// d3.scaleBands rounding behavior:\n// https://github.com/d3/d3-scale/blob/83555bd759c7314420bd4240642beda5e258db9e/src/band.js#L20-L32\nfunction roundError({scale}) {\n  const n = scale.domain().length;\n  const [start, stop] = scale.range();\n  const paddingInner = scale.paddingInner ? scale.paddingInner() : 1;\n  const paddingOuter = scale.paddingOuter ? scale.paddingOuter() : scale.padding();\n  const m = n - paddingInner;\n  const step = Math.abs(stop - start) / Math.max(1, m + paddingOuter * 2);\n  return (step - Math.floor(step)) * m;\n}\n\nfunction piecewiseRange(scale) {\n  const length = scale.scale.domain().length + isThresholdScale(scale);\n  if (!(length > 2)) return scale.range;\n  const [start, end] = scale.range;\n  return Array.from({length}, (_, i) => start + (i / (length - 1)) * (end - start));\n}\n\nexport function normalizeScale(key, scale, hint) {\n  return createScale(key, hint === undefined ? undefined : [{hint}], {...scale});\n}\n\nfunction createScale(key, channels = [], options = {}) {\n  const type = inferScaleType(key, channels, options);\n\n  // Warn for common misuses of implicit ordinal scales. We disable this test if\n  // you specify a scale interval or if you set the domain or range explicitly,\n  // since setting the domain or range (typically with a cardinality of more than\n  // two) is another indication that you intended for the scale to be ordinal; we\n  // also disable it for facet scales since these are always band scales.\n  if (\n    options.type === undefined &&\n    options.domain === undefined &&\n    options.range === undefined &&\n    options.interval == null &&\n    key !== \"fx\" &&\n    key !== \"fy\" &&\n    isOrdinalScale({type})\n  ) {\n    const values = channels.map(({value}) => value).filter((value) => value !== undefined);\n    if (values.some(isTemporal))\n      warn(\n        `Warning: some data associated with the ${key} scale are dates. Dates are typically associated with a \"utc\" or \"time\" scale rather than a \"${formatScaleType(\n          type\n        )}\" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${key} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${key} scale to \"${formatScaleType(\n          type\n        )}\".`\n      );\n    else if (values.some(isTemporalString))\n      warn(\n        `Warning: some data associated with the ${key} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a \"utc\" or \"time\" scale rather than a \"${formatScaleType(\n          type\n        )}\" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${key} scale to \"${formatScaleType(\n          type\n        )}\".`\n      );\n    else if (values.some(isNumericString))\n      warn(\n        `Warning: some data associated with the ${key} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a \"linear\" scale rather than a \"${formatScaleType(\n          type\n        )}\" scale. If you want to treat this data as ordinal, you can specify the interval of the ${key} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${key} scale to \"${formatScaleType(\n          type\n        )}\".`\n      );\n  }\n\n  options.type = type; // Mutates input!\n\n  // Once the scale type is known, coerce the associated channel values and any\n  // explicitly-specified domain to the expected type.\n  switch (type) {\n    case \"diverging\":\n    case \"diverging-sqrt\":\n    case \"diverging-pow\":\n    case \"diverging-log\":\n    case \"diverging-symlog\":\n    case \"cyclical\":\n    case \"sequential\":\n    case \"linear\":\n    case \"sqrt\":\n    case \"threshold\":\n    case \"quantile\":\n    case \"pow\":\n    case \"log\":\n    case \"symlog\":\n      options = coerceType(channels, options, coerceNumbers);\n      break;\n    case \"identity\":\n      switch (registry.get(key)) {\n        case position:\n          options = coerceType(channels, options, coerceNumbers);\n          break;\n        case symbol:\n          options = coerceType(channels, options, coerceSymbols);\n          break;\n      }\n      break;\n    case \"utc\":\n    case \"time\":\n      options = coerceType(channels, options, coerceDates);\n      break;\n  }\n\n  switch (type) {\n    case \"diverging\":\n      return createScaleDiverging(key, channels, options);\n    case \"diverging-sqrt\":\n      return createScaleDivergingSqrt(key, channels, options);\n    case \"diverging-pow\":\n      return createScaleDivergingPow(key, channels, options);\n    case \"diverging-log\":\n      return createScaleDivergingLog(key, channels, options);\n    case \"diverging-symlog\":\n      return createScaleDivergingSymlog(key, channels, options);\n    case \"categorical\":\n    case \"ordinal\":\n    case ordinalImplicit:\n      return createScaleOrdinal(key, channels, options);\n    case \"cyclical\":\n    case \"sequential\":\n    case \"linear\":\n      return createScaleLinear(key, channels, options);\n    case \"sqrt\":\n      return createScaleSqrt(key, channels, options);\n    case \"threshold\":\n      return createScaleThreshold(key, channels, options);\n    case \"quantile\":\n      return createScaleQuantile(key, channels, options);\n    case \"quantize\":\n      return createScaleQuantize(key, channels, options);\n    case \"pow\":\n      return createScalePow(key, channels, options);\n    case \"log\":\n      return createScaleLog(key, channels, options);\n    case \"symlog\":\n      return createScaleSymlog(key, channels, options);\n    case \"utc\":\n      return createScaleUtc(key, channels, options);\n    case \"time\":\n      return createScaleTime(key, channels, options);\n    case \"point\":\n      return createScalePoint(key, channels, options);\n    case \"band\":\n      return createScaleBand(key, channels, options);\n    case \"identity\":\n      return createScaleIdentity(key);\n    case undefined:\n      return;\n    default:\n      throw new Error(`unknown scale type: ${type}`);\n  }\n}\n\nfunction formatScaleType(type) {\n  return typeof type === \"symbol\" ? type.description : type;\n}\n\nfunction maybeScaleType(type) {\n  return typeof type === \"string\" ? `${type}`.toLowerCase() : type;\n}\n\n// A special type symbol when the x and y scales are replaced with a projection.\nconst typeProjection = {toString: () => \"projection\"};\n\nfunction inferScaleType(key, channels, {type, domain, range, scheme, pivot, projection}) {\n  type = maybeScaleType(type);\n\n  // The facet scales are always band scales; this cannot be changed.\n  if (key === \"fx\" || key === \"fy\") return \"band\";\n\n  // If a projection is specified, the x- and y-scales are disabled; these\n  // channels will be projected rather than scaled. (But still check that none\n  // of the associated channels are incompatible with a projection.)\n  if ((key === \"x\" || key === \"y\") && projection != null) type = typeProjection;\n\n  // If a channel dictates a scale type, make sure that it is consistent with\n  // the user-specified scale type (if any) and all other channels. For example,\n  // barY requires x to be a band scale and disallows any other scale type.\n  for (const channel of channels) {\n    const t = maybeScaleType(channel.type);\n    if (t === undefined) continue;\n    else if (type === undefined) type = t;\n    else if (type !== t) throw new Error(`scale incompatible with channel: ${type} !== ${t}`);\n  }\n\n  // If the scale, a channel, or user specified a (consistent) type, return it.\n  if (type === typeProjection) return;\n  if (type !== undefined) return type;\n\n  // If theres no data (and no type) associated with this scale, dont create a scale.\n  if (domain === undefined && !channels.some(({value}) => value !== undefined)) return;\n\n  // Some scales have default types.\n  const kind = registry.get(key);\n  if (kind === radius) return \"sqrt\";\n  if (kind === opacity || kind === length) return \"linear\";\n  if (kind === symbol) return \"ordinal\";\n\n  // If a domain or range is explicitly specified and doesnt have two values,\n  // assume its ordinal. You can still use a piecewise (or polylinear)\n  // scale, but you must set the type explicitly.\n  const n = (domain ?? range)?.length;\n  if (n < 2 || n > 2) return asOrdinalType(kind);\n\n  // Otherwise, infer the scale type from the data! Prefer the domain, if\n  // present, over channels. (The domain and channels should be consistently\n  // typed, and the domain is more explicit and typically much smaller.) We only\n  // check the first defined value for expedience and simplicity; we expect\n  // that the types are consistent.\n  if (domain !== undefined) {\n    if (isOrdinal(domain)) return asOrdinalType(kind);\n    if (isTemporal(domain)) return \"utc\";\n  } else {\n    const values = channels.map(({value}) => value).filter((value) => value !== undefined);\n    if (values.some(isOrdinal)) return asOrdinalType(kind);\n    if (values.some(isTemporal)) return \"utc\";\n  }\n\n  // For color scales, take a hint from the color scheme and pivot option.\n  if (kind === color) {\n    if (pivot != null || isDivergingScheme(scheme)) return \"diverging\";\n    if (isCategoricalScheme(scheme)) return \"categorical\";\n  }\n\n  return \"linear\";\n}\n\n// Positional scales default to a point scale instead of an ordinal scale.\nfunction asOrdinalType(kind) {\n  switch (kind) {\n    case position:\n      return \"point\";\n    case color:\n      return ordinalImplicit;\n    default:\n      return \"ordinal\";\n  }\n}\n\nexport function isTemporalScale({type}) {\n  return type === \"time\" || type === \"utc\";\n}\n\nexport function isOrdinalScale({type}) {\n  return type === \"ordinal\" || type === \"point\" || type === \"band\" || type === ordinalImplicit;\n}\n\nexport function isThresholdScale({type}) {\n  return type === \"threshold\";\n}\n\nfunction isBandScale({type}) {\n  return type === \"point\" || type === \"band\";\n}\n\nexport function isDivergingScale({type}) {\n  return /^diverging($|-)/.test(type);\n}\n\n// Certain marks have special behavior if a scale is collapsed, i.e. if the\n// domain is degenerate and represents only a single value such as [3, 3]; for\n// example, a rect will span the full extent of the chart along a collapsed\n// dimension (whereas a dot will simply be drawn in the center).\nexport function isCollapsed(scale) {\n  if (scale === undefined) return true; // treat missing scale as collapsed\n  const domain = scale.domain();\n  const value = scale(domain[0]);\n  for (let i = 1, n = domain.length; i < n; ++i) {\n    if (scale(domain[i]) - value) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// Mutates channel.value!\nfunction coerceType(channels, {domain, ...options}, coerceValues) {\n  for (const c of channels) {\n    if (c.value !== undefined) {\n      if (domain === undefined) domain = c.value?.domain; // promote channel domain\n      c.value = coerceValues(c.value);\n    }\n  }\n  return {\n    domain: domain === undefined ? domain : coerceValues(domain),\n    ...options\n  };\n}\n\nfunction coerceSymbols(values) {\n  return map(values, maybeSymbol);\n}\n\nexport function scale(options = {}) {\n  let scale;\n  for (const key in options) {\n    if (!registry.has(key)) continue; // ignore unknown properties\n    if (!isScaleOptions(options[key])) continue; // e.g., ignore {color: \"red\"}\n    if (scale !== undefined) throw new Error(\"ambiguous scale definition; multiple scales found\");\n    scale = exposeScale(normalizeScale(key, options[key]));\n  }\n  if (scale === undefined) throw new Error(\"invalid scale definition; no scale found\");\n  return scale;\n}\n\nexport function exposeScales(scales) {\n  return (key) => {\n    if (!registry.has((key = `${key}`))) throw new Error(`unknown scale: ${key}`);\n    return scales[key];\n  };\n}\n\n// Note: axis- and legend-related properties (such as label, ticks and\n// tickFormat) are not included here as they do not affect the scales behavior.\nfunction exposeScale({scale, type, domain, range, interpolate, interval, transform, percent, pivot}) {\n  if (type === \"identity\") return {type: \"identity\", apply: (d) => d, invert: (d) => d};\n  const unknown = scale.unknown ? scale.unknown() : undefined;\n  return {\n    type,\n    domain: slice(domain), // defensive copy\n    ...(range !== undefined && {range: slice(range)}), // defensive copy\n    ...(transform !== undefined && {transform}),\n    ...(percent && {percent}), // only exposed if truthy\n    ...(unknown !== undefined && {unknown}),\n    ...(interval !== undefined && {interval}),\n\n    // quantitative\n    ...(interpolate !== undefined && {interpolate}),\n    ...(scale.clamp && {clamp: scale.clamp()}),\n\n    // diverging (always asymmetric; we never want to apply the symmetric transform twice)\n    ...(pivot !== undefined && {pivot, symmetric: false}),\n\n    // log, diverging-log\n    ...(scale.base && {base: scale.base()}),\n\n    // pow, diverging-pow\n    ...(scale.exponent && {exponent: scale.exponent()}),\n\n    // symlog, diverging-symlog\n    ...(scale.constant && {constant: scale.constant()}),\n\n    // band, point\n    ...(scale.align && {align: scale.align(), round: scale.round()}),\n    ...(scale.padding &&\n      (scale.paddingInner\n        ? {paddingInner: scale.paddingInner(), paddingOuter: scale.paddingOuter()}\n        : {padding: scale.padding()})),\n    ...(scale.bandwidth && {bandwidth: scale.bandwidth(), step: scale.step()}),\n\n    // utilities\n    apply: (t) => scale(t),\n    ...(scale.invert && {invert: (t) => scale.invert(t)})\n  };\n}\n","import {InternMap, cross, rollup, sum} from \"d3\";\nimport {keyof, map, range} from \"./options.js\";\nimport {createScales} from \"./scales.js\";\n\n// Returns an array of {x?, y?, i} objects representing the facet domain.\nexport function createFacets(channelsByScale, options) {\n  const {fx, fy} = createScales(channelsByScale, options);\n  const fxDomain = fx?.scale.domain();\n  const fyDomain = fy?.scale.domain();\n  return fxDomain && fyDomain\n    ? cross(fxDomain, fyDomain).map(([x, y], i) => ({x, y, i}))\n    : fxDomain\n    ? fxDomain.map((x, i) => ({x, i}))\n    : fyDomain\n    ? fyDomain.map((y, i) => ({y, i}))\n    : undefined;\n}\n\nexport function recreateFacets(facets, {x: X, y: Y}) {\n  X &&= facetIndex(X);\n  Y &&= facetIndex(Y);\n  return facets\n    .filter(\n      X && Y // remove any facets no longer present in the domain\n        ? (f) => X.has(f.x) && Y.has(f.y)\n        : X\n        ? (f) => X.has(f.x)\n        : (f) => Y.has(f.y)\n    )\n    .sort(\n      X && Y // reorder facets to match the new scale domains\n        ? (a, b) => X.get(a.x) - X.get(b.x) || Y.get(a.y) - Y.get(b.y)\n        : X\n        ? (a, b) => X.get(a.x) - X.get(b.x)\n        : (a, b) => Y.get(a.y) - Y.get(b.y)\n    );\n}\n\n// Returns a (possibly nested) Map of [[key1, index1], [key2, index2], ]\n// representing the data indexes associated with each facet.\nexport function facetGroups(data, {fx, fy}) {\n  const I = range(data);\n  const FX = fx?.value;\n  const FY = fy?.value;\n  return fx && fy\n    ? rollup(\n        I,\n        (G) => ((G.fx = FX[G[0]]), (G.fy = FY[G[0]]), G),\n        (i) => FX[i],\n        (i) => FY[i]\n      )\n    : fx\n    ? rollup(\n        I,\n        (G) => ((G.fx = FX[G[0]]), G),\n        (i) => FX[i]\n      )\n    : rollup(\n        I,\n        (G) => ((G.fy = FY[G[0]]), G),\n        (i) => FY[i]\n      );\n}\n\nexport function facetTranslator(fx, fy, {marginTop, marginLeft}) {\n  const x = fx ? ({x}) => fx(x) - marginLeft : () => 0;\n  const y = fy ? ({y}) => fy(y) - marginTop : () => 0;\n  return function (d) {\n    if (this.tagName === \"svg\") {\n      this.setAttribute(\"x\", x(d));\n      this.setAttribute(\"y\", y(d));\n    } else {\n      this.setAttribute(\"transform\", `translate(${x(d)},${y(d)})`);\n    }\n  };\n}\n\n// Returns an index that for each facet lists all the elements present in other\n// facets in the original index. TODO Memoize to avoid repeated work?\nexport function facetExclude(index) {\n  const ex = [];\n  const e = new Uint32Array(sum(index, (d) => d.length));\n  for (const i of index) {\n    let n = 0;\n    for (const j of index) {\n      if (i === j) continue;\n      e.set(j, n);\n      n += j.length;\n    }\n    ex.push(e.slice(0, n));\n  }\n  return ex;\n}\n\nconst facetAnchors = new Map([\n  [\"top\", facetAnchorTop],\n  [\"right\", facetAnchorRight],\n  [\"bottom\", facetAnchorBottom],\n  [\"left\", facetAnchorLeft],\n  [\"top-left\", and(facetAnchorTop, facetAnchorLeft)],\n  [\"top-right\", and(facetAnchorTop, facetAnchorRight)],\n  [\"bottom-left\", and(facetAnchorBottom, facetAnchorLeft)],\n  [\"bottom-right\", and(facetAnchorBottom, facetAnchorRight)],\n  [\"top-empty\", facetAnchorTopEmpty],\n  [\"right-empty\", facetAnchorRightEmpty],\n  [\"bottom-empty\", facetAnchorBottomEmpty],\n  [\"left-empty\", facetAnchorLeftEmpty],\n  [\"empty\", facetAnchorEmpty]\n]);\n\nexport function maybeFacetAnchor(facetAnchor) {\n  if (facetAnchor == null) return null;\n  const anchor = facetAnchors.get(`${facetAnchor}`.toLowerCase());\n  if (anchor) return anchor;\n  throw new Error(`invalid facet anchor: ${facetAnchor}`);\n}\n\nconst indexCache = new WeakMap();\n\nfunction facetIndex(V) {\n  let I = indexCache.get(V);\n  if (!I) indexCache.set(V, (I = new InternMap(map(V, (v, i) => [v, i]))));\n  return I;\n}\n\n// Like V.indexOf(v), but with the same semantics as InternMap.\nfunction facetIndexOf(V, v) {\n  return facetIndex(V).get(v);\n}\n\n// Like facets.find, but with the same semantics as InternMap.\nfunction facetFind(facets, x, y) {\n  x = keyof(x);\n  y = keyof(y);\n  return facets.find((f) => Object.is(keyof(f.x), x) && Object.is(keyof(f.y), y));\n}\n\nfunction facetEmpty(facets, x, y) {\n  return facetFind(facets, x, y)?.empty;\n}\n\nfunction facetAnchorTop(facets, {y: Y}, {y}) {\n  return Y ? facetIndexOf(Y, y) === 0 : true;\n}\n\nfunction facetAnchorBottom(facets, {y: Y}, {y}) {\n  return Y ? facetIndexOf(Y, y) === Y.length - 1 : true;\n}\n\nfunction facetAnchorLeft(facets, {x: X}, {x}) {\n  return X ? facetIndexOf(X, x) === 0 : true;\n}\n\nfunction facetAnchorRight(facets, {x: X}, {x}) {\n  return X ? facetIndexOf(X, x) === X.length - 1 : true;\n}\n\nfunction facetAnchorTopEmpty(facets, {y: Y}, {x, y, empty}) {\n  if (empty) return false;\n  if (!Y) return;\n  const i = facetIndexOf(Y, y);\n  if (i > 0) return facetEmpty(facets, x, Y[i - 1]);\n}\n\nfunction facetAnchorBottomEmpty(facets, {y: Y}, {x, y, empty}) {\n  if (empty) return false;\n  if (!Y) return;\n  const i = facetIndexOf(Y, y);\n  if (i < Y.length - 1) return facetEmpty(facets, x, Y[i + 1]);\n}\n\nfunction facetAnchorLeftEmpty(facets, {x: X}, {x, y, empty}) {\n  if (empty) return false;\n  if (!X) return;\n  const i = facetIndexOf(X, x);\n  if (i > 0) return facetEmpty(facets, X[i - 1], y);\n}\n\nfunction facetAnchorRightEmpty(facets, {x: X}, {x, y, empty}) {\n  if (empty) return false;\n  if (!X) return;\n  const i = facetIndexOf(X, x);\n  if (i < X.length - 1) return facetEmpty(facets, X[i + 1], y);\n}\n\nfunction facetAnchorEmpty(facets, channels, {empty}) {\n  return empty;\n}\n\nfunction and(a, b) {\n  return function () {\n    return a.apply(null, arguments) && b.apply(null, arguments);\n  };\n}\n\n// Facet filter, by mark; for now only the \"eq\" filter is provided.\nexport function facetFilter(facets, {channels: {fx, fy}, groups}) {\n  return fx && fy\n    ? facets.map(({x, y}) => groups.get(x)?.get(y) ?? [])\n    : fx\n    ? facets.map(({x}) => groups.get(x) ?? [])\n    : facets.map(({y}) => groups.get(y) ?? []);\n}\n","import {\n  geoAlbers,\n  geoAlbersUsa,\n  geoAzimuthalEqualArea,\n  geoAzimuthalEquidistant,\n  geoClipRectangle,\n  geoConicConformal,\n  geoConicEqualArea,\n  geoConicEquidistant,\n  geoEqualEarth,\n  geoEquirectangular,\n  geoGnomonic,\n  geoMercator,\n  geoOrthographic,\n  geoPath,\n  geoStereographic,\n  geoStream,\n  geoTransform,\n  geoTransverseMercator\n} from \"d3\";\nimport {valueObject} from \"./channel.js\";\nimport {coerceNumbers, constant, isObject} from \"./options.js\";\nimport {warn} from \"./warnings.js\";\n\nconst pi = Math.PI;\nconst tau = 2 * pi;\nconst defaultAspectRatio = 0.618;\n\nexport function createProjection(\n  {\n    projection,\n    inset: globalInset = 0,\n    insetTop = globalInset,\n    insetRight = globalInset,\n    insetBottom = globalInset,\n    insetLeft = globalInset\n  } = {},\n  dimensions\n) {\n  if (projection == null) return;\n  if (typeof projection.stream === \"function\") return projection; // d3 projection\n  let options;\n  let domain;\n  let clip = \"frame\";\n\n  // If the projection was specified as an object with additional options,\n  // extract those. The order of precedence for insetTop (and other insets) is:\n  // projection.insetTop, projection.inset, (global) insetTop, (global) inset.\n  // Any other options on this object will be passed through to the initializer.\n  if (isObject(projection)) {\n    let inset;\n    ({\n      type: projection,\n      domain,\n      inset,\n      insetTop = inset !== undefined ? inset : insetTop,\n      insetRight = inset !== undefined ? inset : insetRight,\n      insetBottom = inset !== undefined ? inset : insetBottom,\n      insetLeft = inset !== undefined ? inset : insetLeft,\n      clip = clip,\n      ...options\n    } = projection);\n    if (projection == null) return;\n  }\n\n  // For named projections, retrieve the corresponding projection initializer.\n  if (typeof projection !== \"function\") ({type: projection} = namedProjection(projection));\n\n  // Compute the frame dimensions and invoke the projection initializer.\n  const {width, height, marginLeft, marginRight, marginTop, marginBottom} = dimensions;\n  const dx = width - marginLeft - marginRight - insetLeft - insetRight;\n  const dy = height - marginTop - marginBottom - insetTop - insetBottom;\n  projection = projection?.({width: dx, height: dy, clip, ...options});\n\n  // The projection initializer might decide to not use a projection.\n  if (projection == null) return;\n  clip = maybePostClip(clip, marginLeft, marginTop, width - marginRight, height - marginBottom);\n\n  // Translate the origin to the top-left corner, respecting margins and insets.\n  let tx = marginLeft + insetLeft;\n  let ty = marginTop + insetTop;\n  let transform;\n\n  // If a domain is specified, fit the projection to the frame.\n  if (domain != null) {\n    const [[x0, y0], [x1, y1]] = geoPath(projection).bounds(domain);\n    const k = Math.min(dx / (x1 - x0), dy / (y1 - y0));\n    if (k > 0) {\n      tx -= (k * (x0 + x1) - dx) / 2;\n      ty -= (k * (y0 + y1) - dy) / 2;\n      transform = geoTransform({\n        point(x, y) {\n          this.stream.point(x * k + tx, y * k + ty);\n        }\n      });\n    } else {\n      warn(`Warning: the projection could not be fit to the specified domain; using the default scale.`);\n    }\n  }\n\n  transform ??=\n    tx === 0 && ty === 0\n      ? identity()\n      : geoTransform({\n          point(x, y) {\n            this.stream.point(x + tx, y + ty);\n          }\n        });\n\n  return {stream: (s) => projection.stream(transform.stream(clip(s)))};\n}\n\nfunction namedProjection(projection) {\n  switch (`${projection}`.toLowerCase()) {\n    case \"albers-usa\":\n      return scaleProjection(geoAlbersUsa, 0.7463, 0.4673);\n    case \"albers\":\n      return conicProjection(geoAlbers, 0.7463, 0.4673);\n    case \"azimuthal-equal-area\":\n      return scaleProjection(geoAzimuthalEqualArea, 4, 4);\n    case \"azimuthal-equidistant\":\n      return scaleProjection(geoAzimuthalEquidistant, tau, tau);\n    case \"conic-conformal\":\n      return conicProjection(geoConicConformal, tau, tau);\n    case \"conic-equal-area\":\n      return conicProjection(geoConicEqualArea, 6.1702, 2.9781);\n    case \"conic-equidistant\":\n      return conicProjection(geoConicEquidistant, 7.312, 3.6282);\n    case \"equal-earth\":\n      return scaleProjection(geoEqualEarth, 5.4133, 2.6347);\n    case \"equirectangular\":\n      return scaleProjection(geoEquirectangular, tau, pi);\n    case \"gnomonic\":\n      return scaleProjection(geoGnomonic, 3.4641, 3.4641);\n    case \"identity\":\n      return {type: identity};\n    case \"reflect-y\":\n      return {type: reflectY};\n    case \"mercator\":\n      return scaleProjection(geoMercator, tau, tau);\n    case \"orthographic\":\n      return scaleProjection(geoOrthographic, 2, 2);\n    case \"stereographic\":\n      return scaleProjection(geoStereographic, 2, 2);\n    case \"transverse-mercator\":\n      return scaleProjection(geoTransverseMercator, tau, tau);\n    default:\n      throw new Error(`unknown projection type: ${projection}`);\n  }\n}\n\nfunction maybePostClip(clip, x1, y1, x2, y2) {\n  if (clip === false || clip == null || typeof clip === \"number\") return (s) => s;\n  if (clip === true) clip = \"frame\";\n  switch (`${clip}`.toLowerCase()) {\n    case \"frame\":\n      return geoClipRectangle(x1, y1, x2, y2);\n    default:\n      throw new Error(`unknown projection clip type: ${clip}`);\n  }\n}\n\nfunction scaleProjection(createProjection, kx, ky) {\n  return {\n    type: ({width, height, rotate, precision = 0.15, clip}) => {\n      const projection = createProjection();\n      if (precision != null) projection.precision?.(precision);\n      if (rotate != null) projection.rotate?.(rotate);\n      if (typeof clip === \"number\") projection.clipAngle?.(clip);\n      if (width != null) {\n        projection.scale(Math.min(width / kx, height / ky));\n        projection.translate([width / 2, height / 2]);\n      }\n      return projection;\n    },\n    aspectRatio: ky / kx\n  };\n}\n\nfunction conicProjection(createProjection, kx, ky) {\n  const {type, aspectRatio} = scaleProjection(createProjection, kx, ky);\n  return {\n    type: (options) => {\n      const {parallels, domain, width, height} = options;\n      const projection = type(options);\n      if (parallels != null) {\n        projection.parallels(parallels);\n        if (domain === undefined && width != null) {\n          projection.fitSize([width, height], {type: \"Sphere\"});\n        }\n      }\n      return projection;\n    },\n    aspectRatio\n  };\n}\n\nconst identity = constant({stream: (stream) => stream});\n\nconst reflectY = constant(\n  geoTransform({\n    point(x, y) {\n      this.stream.point(x, -y);\n    }\n  })\n);\n\n// Applies a point-wise projection to the given paired x and y channels.\n// Note: mutates values!\nexport function project(cx, cy, values, projection) {\n  const x = values[cx];\n  const y = values[cy];\n  const n = x.length;\n  const X = (values[cx] = new Float64Array(n).fill(NaN));\n  const Y = (values[cy] = new Float64Array(n).fill(NaN));\n  let i;\n  const stream = projection.stream({\n    point(x, y) {\n      X[i] = x;\n      Y[i] = y;\n    }\n  });\n  for (i = 0; i < n; ++i) {\n    stream.point(x[i], y[i]);\n  }\n}\n\n// Returns true if a projection was specified. This should match the logic of\n// createProjection above, and is called before we construct the projection.\n// (Though note that we ignore the edge case where the projection initializer\n// may return null.)\nexport function hasProjection({projection} = {}) {\n  if (projection == null) return false;\n  if (typeof projection.stream === \"function\") return true;\n  if (isObject(projection)) projection = projection.type;\n  return projection != null;\n}\n\n// When a projection is specified, we can use its aspect ratio to determine a\n// good value for the projections height based on the desired width. When we\n// dont have a way to know, the golden ratio is our best guess. Due to a\n// circular dependency (we need to know the height before we can construct the\n// projection), we have to test the raw projection option rather than the\n// materialized projection; therefore we must be extremely careful that the\n// logic of this function exactly matches createProjection above!\nexport function projectionAspectRatio(projection) {\n  if (typeof projection?.stream === \"function\") return defaultAspectRatio;\n  if (isObject(projection)) {\n    let domain, options;\n    ({domain, type: projection, ...options} = projection);\n    if (domain != null && projection != null) {\n      const type = typeof projection === \"string\" ? namedProjection(projection).type : projection;\n      const [[x0, y0], [x1, y1]] = geoPath(type({...options, width: 100, height: 100})).bounds(domain);\n      const r = (y1 - y0) / (x1 - x0);\n      return r && isFinite(r) ? (r < 0.2 ? 0.2 : r > 5 ? 5 : r) : defaultAspectRatio;\n    }\n  }\n  if (projection == null) return;\n  if (typeof projection !== \"function\") {\n    const {aspectRatio} = namedProjection(projection);\n    if (aspectRatio) return aspectRatio;\n  }\n  return defaultAspectRatio;\n}\n\n// Extract the (possibly) scaled values for the x and y channels, and apply the\n// projection if any.\nexport function applyPosition(channels, scales, {projection}) {\n  const {x, y} = channels;\n  let position = {};\n  if (x) position.x = x;\n  if (y) position.y = y;\n  position = valueObject(position, scales);\n  if (projection && x?.scale === \"x\" && y?.scale === \"y\") project(\"x\", \"y\", position, projection);\n  if (x) position.x = coerceNumbers(position.x);\n  if (y) position.y = coerceNumbers(position.y);\n  return position;\n}\n\nexport function getGeometryChannels(channel) {\n  const X = [];\n  const Y = [];\n  const x = {scale: \"x\", value: X};\n  const y = {scale: \"y\", value: Y};\n  const sink = {\n    point(x, y) {\n      X.push(x);\n      Y.push(y);\n    },\n    lineStart() {},\n    lineEnd() {},\n    polygonStart() {},\n    polygonEnd() {},\n    sphere() {}\n  };\n  for (const object of channel.value) geoStream(object, sink);\n  return [x, y];\n}\n\n// If no projection is specified, default to a projection that passes points\n// through the x and y scales, if any.\nexport function xyProjection({x: X, y: Y}) {\n  if (X || Y) {\n    X ??= (x) => x;\n    Y ??= (y) => y;\n    return geoTransform({\n      point(x, y) {\n        this.stream.point(X(x), Y(y));\n      }\n    });\n  }\n}\n","import {creator, select} from \"d3\";\nimport {maybeClip} from \"./options.js\";\n\nexport function createContext(options = {}) {\n  const {document = typeof window !== \"undefined\" ? window.document : undefined, clip} = options;\n  return {document, clip: maybeClip(clip)};\n}\n\nexport function create(name, {document}) {\n  return select(creator(name).call(document.documentElement));\n}\n","export const unset = Symbol(\"unset\");\n\nexport function memoize1(compute) {\n  return (compute.length === 1 ? memoize1Arg : memoize1Args)(compute);\n}\n\nfunction memoize1Arg(compute) {\n  let cacheValue;\n  let cacheKey = unset;\n  return (key) => {\n    if (!Object.is(cacheKey, key)) {\n      cacheKey = key;\n      cacheValue = compute(key);\n    }\n    return cacheValue;\n  };\n}\n\nfunction memoize1Args(compute) {\n  let cacheValue, cacheKeys;\n  return (...keys) => {\n    if (cacheKeys?.length !== keys.length || cacheKeys.some((k, i) => !Object.is(k, keys[i]))) {\n      cacheKeys = keys;\n      cacheValue = compute(...keys);\n    }\n    return cacheValue;\n  };\n}\n","import {format as isoFormat} from \"isoformat\";\nimport {string} from \"./options.js\";\nimport {memoize1} from \"./memoize.js\";\n\nconst numberFormat = memoize1((locale) => {\n  return new Intl.NumberFormat(locale);\n});\n\nconst monthFormat = memoize1((locale, month) => {\n  return new Intl.DateTimeFormat(locale, {timeZone: \"UTC\", ...(month && {month})});\n});\n\nconst weekdayFormat = memoize1((locale, weekday) => {\n  return new Intl.DateTimeFormat(locale, {timeZone: \"UTC\", ...(weekday && {weekday})});\n});\n\nexport function formatNumber(locale = \"en-US\") {\n  const format = numberFormat(locale);\n  return (i) => (i != null && !isNaN(i) ? format.format(i) : undefined);\n}\n\nexport function formatMonth(locale = \"en-US\", format = \"short\") {\n  const fmt = monthFormat(locale, format);\n  return (i) => (i != null && !isNaN((i = +new Date(Date.UTC(2000, +i)))) ? fmt.format(i) : undefined);\n}\n\nexport function formatWeekday(locale = \"en-US\", format = \"short\") {\n  const fmt = weekdayFormat(locale, format);\n  return (i) => (i != null && !isNaN((i = +new Date(Date.UTC(2001, 0, +i)))) ? fmt.format(i) : undefined);\n}\n\nexport function formatIsoDate(date) {\n  return isoFormat(date, \"Invalid Date\");\n}\n\nexport function formatAuto(locale = \"en-US\") {\n  const number = formatNumber(locale);\n  return (v) => (v instanceof Date ? formatIsoDate : typeof v === \"number\" ? number : string)(v);\n}\n\n// TODO When Plot supports a top-level locale option, this should be removed\n// because it lacks context to know which locale to use; formatAuto should be\n// used instead whenever possible.\nexport const formatDefault = formatAuto();\n","import {group, namespaces, select} from \"d3\";\nimport {create} from \"./context.js\";\nimport {defined, nonempty} from \"./defined.js\";\nimport {formatDefault} from \"./format.js\";\nimport {isNone, isNoneish, isRound, maybeColorChannel, maybeNumberChannel} from \"./options.js\";\nimport {keyof, number, string} from \"./options.js\";\nimport {warn} from \"./warnings.js\";\n\nexport const offset = (typeof window !== \"undefined\" ? window.devicePixelRatio > 1 : typeof it === \"undefined\") ? 0 : 0.5; // prettier-ignore\n\nlet nextClipId = 0;\nlet nextPatternId = 0;\n\nexport function getClipId() {\n  return `plot-clip-${++nextClipId}`;\n}\n\nexport function getPatternId() {\n  return `plot-pattern-${++nextPatternId}`;\n}\n\nexport function styles(\n  mark,\n  {\n    title,\n    href,\n    ariaLabel: variaLabel,\n    ariaDescription,\n    ariaHidden,\n    target,\n    fill,\n    fillOpacity,\n    stroke,\n    strokeWidth,\n    strokeOpacity,\n    strokeLinejoin,\n    strokeLinecap,\n    strokeMiterlimit,\n    strokeDasharray,\n    strokeDashoffset,\n    opacity,\n    mixBlendMode,\n    imageFilter,\n    paintOrder,\n    pointerEvents,\n    shapeRendering,\n    channels\n  },\n  {\n    ariaLabel: cariaLabel,\n    fill: defaultFill = \"currentColor\",\n    fillOpacity: defaultFillOpacity,\n    stroke: defaultStroke = \"none\",\n    strokeOpacity: defaultStrokeOpacity,\n    strokeWidth: defaultStrokeWidth,\n    strokeLinecap: defaultStrokeLinecap,\n    strokeLinejoin: defaultStrokeLinejoin,\n    strokeMiterlimit: defaultStrokeMiterlimit,\n    paintOrder: defaultPaintOrder\n  }\n) {\n  // Some marks dont support fill (e.g., tick and rule).\n  if (defaultFill === null) {\n    fill = null;\n    fillOpacity = null;\n  }\n\n  // Some marks dont support stroke (e.g., image).\n  if (defaultStroke === null) {\n    stroke = null;\n    strokeOpacity = null;\n  }\n\n  // Some marks default to fill with no stroke, while others default to stroke\n  // with no fill. For example, bar and area default to fill, while dot and line\n  // default to stroke. For marks that fill by default, the default fill only\n  // applies if the stroke is (constant) none; if you set a stroke, then the\n  // default fill becomes none. Similarly for marks that stroke by stroke, the\n  // default stroke only applies if the fill is (constant) none.\n  if (isNoneish(defaultFill)) {\n    if (!isNoneish(defaultStroke) && (!isNoneish(fill) || channels?.fill)) defaultStroke = \"none\";\n  } else {\n    if (isNoneish(defaultStroke) && (!isNoneish(stroke) || channels?.stroke)) defaultFill = \"none\";\n  }\n\n  const [vfill, cfill] = maybeColorChannel(fill, defaultFill);\n  const [vfillOpacity, cfillOpacity] = maybeNumberChannel(fillOpacity, defaultFillOpacity);\n  const [vstroke, cstroke] = maybeColorChannel(stroke, defaultStroke);\n  const [vstrokeOpacity, cstrokeOpacity] = maybeNumberChannel(strokeOpacity, defaultStrokeOpacity);\n  const [vopacity, copacity] = maybeNumberChannel(opacity);\n\n  // For styles that have no effect if there is no stroke, only apply the\n  // defaults if the stroke is not the constant none. (If stroke is a channel,\n  // then cstroke will be undefined, but theres still a stroke; hence we dont\n  // use isNoneish here.)\n  if (!isNone(cstroke)) {\n    if (strokeWidth === undefined) strokeWidth = defaultStrokeWidth;\n    if (strokeLinecap === undefined) strokeLinecap = defaultStrokeLinecap;\n    if (strokeLinejoin === undefined) strokeLinejoin = defaultStrokeLinejoin;\n\n    // The default stroke miterlimit need not be applied if the current stroke\n    // is the constant round; this only has effect on miter joins.\n    if (strokeMiterlimit === undefined && !isRound(strokeLinejoin)) strokeMiterlimit = defaultStrokeMiterlimit;\n\n    // The paint order only takes effect if there is both a fill and a stroke\n    // (at least if we ignore markers, which no built-in marks currently use).\n    if (!isNone(cfill) && paintOrder === undefined) paintOrder = defaultPaintOrder;\n  }\n\n  const [vstrokeWidth, cstrokeWidth] = maybeNumberChannel(strokeWidth);\n\n  // Some marks dont support fill (e.g., tick and rule).\n  if (defaultFill !== null) {\n    mark.fill = impliedString(cfill, \"currentColor\");\n    mark.fillOpacity = impliedNumber(cfillOpacity, 1);\n  }\n\n  // Some marks dont support stroke (e.g., image).\n  if (defaultStroke !== null) {\n    mark.stroke = impliedString(cstroke, \"none\");\n    mark.strokeWidth = impliedNumber(cstrokeWidth, 1);\n    mark.strokeOpacity = impliedNumber(cstrokeOpacity, 1);\n    mark.strokeLinejoin = impliedString(strokeLinejoin, \"miter\");\n    mark.strokeLinecap = impliedString(strokeLinecap, \"butt\");\n    mark.strokeMiterlimit = impliedNumber(strokeMiterlimit, 4);\n    mark.strokeDasharray = impliedString(strokeDasharray, \"none\");\n    mark.strokeDashoffset = impliedString(strokeDashoffset, \"0\");\n  }\n\n  mark.target = string(target);\n  mark.ariaLabel = string(cariaLabel);\n  mark.ariaDescription = string(ariaDescription);\n  mark.ariaHidden = string(ariaHidden);\n  mark.opacity = impliedNumber(copacity, 1);\n  mark.mixBlendMode = impliedString(mixBlendMode, \"normal\");\n  mark.imageFilter = impliedString(imageFilter, \"none\");\n  mark.paintOrder = impliedString(paintOrder, \"normal\");\n  mark.pointerEvents = impliedString(pointerEvents, \"auto\");\n  mark.shapeRendering = impliedString(shapeRendering, \"auto\");\n\n  return {\n    title: {value: title, optional: true, filter: null},\n    href: {value: href, optional: true, filter: null},\n    ariaLabel: {value: variaLabel, optional: true, filter: null},\n    fill: {value: vfill, scale: \"auto\", optional: true},\n    fillOpacity: {value: vfillOpacity, scale: \"auto\", optional: true},\n    stroke: {value: vstroke, scale: \"auto\", optional: true},\n    strokeOpacity: {value: vstrokeOpacity, scale: \"auto\", optional: true},\n    strokeWidth: {value: vstrokeWidth, optional: true},\n    opacity: {value: vopacity, scale: \"auto\", optional: true}\n  };\n}\n\n// Applies the specified titles via selection.call.\nexport function applyTitle(selection, L) {\n  if (L)\n    selection\n      .filter((i) => nonempty(L[i]))\n      .append(\"title\")\n      .call(applyText, L);\n}\n\n// Like applyTitle, but for grouped data (lines, areas).\nexport function applyTitleGroup(selection, L) {\n  if (L)\n    selection\n      .filter(([i]) => nonempty(L[i]))\n      .append(\"title\")\n      .call(applyTextGroup, L);\n}\n\nexport function applyText(selection, T) {\n  if (T) selection.text((i) => formatDefault(T[i]));\n}\n\nexport function applyTextGroup(selection, T) {\n  if (T) selection.text(([i]) => formatDefault(T[i]));\n}\n\nexport function applyChannelStyles(\n  selection,\n  {target, tip},\n  {\n    ariaLabel: AL,\n    title: T,\n    fill: F,\n    fillOpacity: FO,\n    stroke: S,\n    strokeOpacity: SO,\n    strokeWidth: SW,\n    opacity: O,\n    href: H\n  }\n) {\n  if (AL) applyAttr(selection, \"aria-label\", (i) => AL[i]);\n  if (F) applyAttr(selection, \"fill\", (i) => F[i]);\n  if (FO) applyAttr(selection, \"fill-opacity\", (i) => FO[i]);\n  if (S) applyAttr(selection, \"stroke\", (i) => S[i]);\n  if (SO) applyAttr(selection, \"stroke-opacity\", (i) => SO[i]);\n  if (SW) applyAttr(selection, \"stroke-width\", (i) => SW[i]);\n  if (O) applyAttr(selection, \"opacity\", (i) => O[i]);\n  if (H) applyHref(selection, (i) => H[i], target);\n  if (!tip) applyTitle(selection, T);\n}\n\nexport function applyGroupedChannelStyles(\n  selection,\n  {target, tip},\n  {\n    ariaLabel: AL,\n    title: T,\n    fill: F,\n    fillOpacity: FO,\n    stroke: S,\n    strokeOpacity: SO,\n    strokeWidth: SW,\n    opacity: O,\n    href: H\n  }\n) {\n  if (AL) applyAttr(selection, \"aria-label\", ([i]) => AL[i]);\n  if (F) applyAttr(selection, \"fill\", ([i]) => F[i]);\n  if (FO) applyAttr(selection, \"fill-opacity\", ([i]) => FO[i]);\n  if (S) applyAttr(selection, \"stroke\", ([i]) => S[i]);\n  if (SO) applyAttr(selection, \"stroke-opacity\", ([i]) => SO[i]);\n  if (SW) applyAttr(selection, \"stroke-width\", ([i]) => SW[i]);\n  if (O) applyAttr(selection, \"opacity\", ([i]) => O[i]);\n  if (H) applyHref(selection, ([i]) => H[i], target);\n  if (!tip) applyTitleGroup(selection, T);\n}\n\nfunction groupAesthetics(\n  {\n    ariaLabel: AL,\n    title: T,\n    fill: F,\n    fillOpacity: FO,\n    stroke: S,\n    strokeOpacity: SO,\n    strokeWidth: SW,\n    opacity: O,\n    href: H\n  },\n  {tip}\n) {\n  return [AL, tip ? undefined : T, F, FO, S, SO, SW, O, H].filter((c) => c !== undefined);\n}\n\nexport function groupZ(I, Z, z) {\n  const G = group(I, (i) => Z[i]);\n  if (z === undefined && G.size > (1 + I.length) >> 1) {\n    warn(\n      `Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null.`\n    );\n  }\n  return G.values();\n}\n\nexport function* groupIndex(I, position, mark, channels) {\n  const {z} = mark;\n  const {z: Z} = channels; // group channel\n  const A = groupAesthetics(channels, mark); // aesthetic channels\n  const C = [...position, ...A]; // all channels\n\n  // Group the current index by Z (if any).\n  for (const G of Z ? groupZ(I, Z, z) : [I]) {\n    let Ag; // the A-values (aesthetics) of the current group, if any\n    let Gg; // the current group index (a subset of G, and I), if any\n    out: for (const i of G) {\n      // If any channel has an undefined value for this index, skip it.\n      for (const c of C) {\n        if (!defined(c[i])) {\n          if (Gg) Gg.push(-1);\n          continue out;\n        }\n      }\n\n      // Otherwise, if this is a new group, record the aesthetics for this\n      // group. Yield the current group and start a new one.\n      if (Ag === undefined) {\n        if (Gg) yield Gg;\n        (Ag = A.map((c) => keyof(c[i]))), (Gg = [i]);\n        continue;\n      }\n\n      // Otherwise, add the current index to the current group. Then, if any of\n      // the aesthetics dont match the current group, yield the current group\n      // and start a new group of the current index.\n      Gg.push(i);\n      for (let j = 0; j < A.length; ++j) {\n        const k = keyof(A[j][i]);\n        if (k !== Ag[j]) {\n          yield Gg;\n          (Ag = A.map((c) => keyof(c[i]))), (Gg = [i]);\n          continue out;\n        }\n      }\n    }\n\n    // Yield the current group, if any.\n    if (Gg) yield Gg;\n  }\n}\n\n// Note: may mutate selection.node!\nfunction applyClip(selection, mark, dimensions, context) {\n  let clipUrl;\n  const {clip = context.clip} = mark;\n  if (clip === \"frame\") {\n    // Wrap the G element with another (untransformed) G element, applying the\n    // clip to the parent G element so that the clip path is not affected by\n    // the marks transform. To simplify the adoption of this fix, mutate the\n    // passed-in selection.node to return the parent G element.\n    selection = create(\"svg:g\", context).each(function () {\n      this.appendChild(selection.node());\n      selection.node = () => this; // Note: mutation!\n    });\n    clipUrl = getFrameClip(context, dimensions);\n  } else if (clip) {\n    clipUrl = getGeoClip(clip, context);\n  }\n\n  // Here were careful to apply the ARIA attributes to the outer G element when\n  // clipping is applied, and to apply the ARIA attributes before any other\n  // attributes (for readability).\n  applyAttr(selection, \"aria-label\", mark.ariaLabel);\n  applyAttr(selection, \"aria-description\", mark.ariaDescription);\n  applyAttr(selection, \"aria-hidden\", mark.ariaHidden);\n  applyAttr(selection, \"clip-path\", clipUrl);\n}\n\nfunction memoizeClip(clip) {\n  const cache = new WeakMap();\n  return (context, dimensions) => {\n    let url = cache.get(context);\n    if (!url) {\n      const id = getClipId();\n      select(context.ownerSVGElement).append(\"clipPath\").attr(\"id\", id).call(clip, context, dimensions);\n      cache.set(context, (url = `url(#${id})`));\n    }\n    return url;\n  };\n}\n\nconst getFrameClip = memoizeClip((clipPath, context, dimensions) => {\n  const {width, height, marginLeft, marginRight, marginTop, marginBottom} = dimensions;\n  clipPath\n    .append(\"rect\")\n    .attr(\"x\", marginLeft)\n    .attr(\"y\", marginTop)\n    .attr(\"width\", width - marginRight - marginLeft)\n    .attr(\"height\", height - marginTop - marginBottom);\n});\n\nconst geoClipCache = new WeakMap();\nconst sphere = {type: \"Sphere\"};\n\nfunction getGeoClip(geo, context) {\n  let cache, url;\n  if (!(cache = geoClipCache.get(context))) geoClipCache.set(context, (cache = new WeakMap()));\n  if (geo.type === \"Sphere\") geo = sphere; // coalesce all spheres\n  if (!(url = cache.get(geo))) {\n    const id = getClipId();\n    select(context.ownerSVGElement).append(\"clipPath\").attr(\"id\", id).append(\"path\").attr(\"d\", context.path()(geo));\n    cache.set(geo, (url = `url(#${id})`));\n  }\n  return url;\n}\n\n// Note: may mutate selection.node!\nexport function applyIndirectStyles(selection, mark, dimensions, context) {\n  applyClip(selection, mark, dimensions, context);\n  applyAttr(selection, \"class\", mark.className);\n  applyAttr(selection, \"fill\", mark.fill);\n  applyAttr(selection, \"fill-opacity\", mark.fillOpacity);\n  applyAttr(selection, \"stroke\", mark.stroke);\n  applyAttr(selection, \"stroke-width\", mark.strokeWidth);\n  applyAttr(selection, \"stroke-opacity\", mark.strokeOpacity);\n  applyAttr(selection, \"stroke-linejoin\", mark.strokeLinejoin);\n  applyAttr(selection, \"stroke-linecap\", mark.strokeLinecap);\n  applyAttr(selection, \"stroke-miterlimit\", mark.strokeMiterlimit);\n  applyAttr(selection, \"stroke-dasharray\", mark.strokeDasharray);\n  applyAttr(selection, \"stroke-dashoffset\", mark.strokeDashoffset);\n  applyAttr(selection, \"shape-rendering\", mark.shapeRendering);\n  applyAttr(selection, \"filter\", mark.imageFilter);\n  applyAttr(selection, \"paint-order\", mark.paintOrder);\n  const {pointerEvents = context.pointerSticky === false ? \"none\" : undefined} = mark;\n  applyAttr(selection, \"pointer-events\", pointerEvents);\n}\n\nexport function applyDirectStyles(selection, mark) {\n  applyStyle(selection, \"mix-blend-mode\", mark.mixBlendMode);\n  applyAttr(selection, \"opacity\", mark.opacity);\n}\n\nfunction applyHref(selection, href, target) {\n  selection.each(function (i) {\n    const h = href(i);\n    if (h != null) {\n      const a = this.ownerDocument.createElementNS(namespaces.svg, \"a\");\n      a.setAttribute(\"fill\", \"inherit\");\n      a.setAttributeNS(namespaces.xlink, \"href\", h);\n      if (target != null) a.setAttribute(\"target\", target);\n      this.parentNode.insertBefore(a, this).appendChild(this);\n    }\n  });\n}\n\nexport function applyAttr(selection, name, value) {\n  if (value != null) selection.attr(name, value);\n}\n\nexport function applyStyle(selection, name, value) {\n  if (value != null) selection.style(name, value);\n}\n\nexport function applyTransform(selection, mark, {x, y}, tx = offset, ty = offset) {\n  tx += mark.dx;\n  ty += mark.dy;\n  if (x?.bandwidth) tx += x.bandwidth() / 2;\n  if (y?.bandwidth) ty += y.bandwidth() / 2;\n  if (tx || ty) selection.attr(\"transform\", `translate(${tx},${ty})`);\n}\n\nexport function impliedString(value, impliedValue) {\n  if ((value = string(value)) !== impliedValue) return value;\n}\n\nexport function impliedNumber(value, impliedValue) {\n  if ((value = number(value)) !== impliedValue) return value;\n}\n\n// https://www.w3.org/TR/CSS21/grammar.html\nconst validClassName =\n  /^-?([_a-z]|[\\240-\\377]|\\\\[0-9a-f]{1,6}(\\r\\n|[ \\t\\r\\n\\f])?|\\\\[^\\r\\n\\f0-9a-f])([_a-z0-9-]|[\\240-\\377]|\\\\[0-9a-f]{1,6}(\\r\\n|[ \\t\\r\\n\\f])?|\\\\[^\\r\\n\\f0-9a-f])*$/i;\n\nexport function maybeClassName(name) {\n  // The default should be changed whenever the default styles are changed, so\n  // as to avoid conflict when multiple versions of Plot are on the page.\n  if (name === undefined) return \"plot-d6a7b5\";\n  name = `${name}`;\n  if (!validClassName.test(name)) throw new Error(`invalid class name: ${name}`);\n  return name;\n}\n\nexport function applyInlineStyles(selection, style) {\n  if (typeof style === \"string\") {\n    selection.property(\"style\", style);\n  } else if (style != null) {\n    for (const element of selection) {\n      Object.assign(element.style, style);\n    }\n  }\n}\n\nexport function applyFrameAnchor({frameAnchor}, {width, height, marginTop, marginRight, marginBottom, marginLeft}) {\n  return [\n    /left$/.test(frameAnchor)\n      ? marginLeft\n      : /right$/.test(frameAnchor)\n      ? width - marginRight\n      : (marginLeft + width - marginRight) / 2,\n    /^top/.test(frameAnchor)\n      ? marginTop\n      : /^bottom/.test(frameAnchor)\n      ? height - marginBottom\n      : (marginTop + height - marginBottom) / 2\n  ];\n}\n","import {channelDomain, createChannels, valueObject} from \"./channel.js\";\nimport {defined} from \"./defined.js\";\nimport {maybeFacetAnchor} from \"./facet.js\";\nimport {maybeClip, maybeNamed, maybeValue} from \"./options.js\";\nimport {dataify, isDomainSort, isObject, isOptions, keyword, range, singleton, string} from \"./options.js\";\nimport {project} from \"./projection.js\";\nimport {styles} from \"./style.js\";\nimport {basic, initializer} from \"./transforms/basic.js\";\n\nexport class Mark {\n  constructor(data, channels = {}, options = {}, defaults) {\n    const {\n      facet = \"auto\",\n      facetAnchor,\n      fx,\n      fy,\n      sort,\n      dx = 0,\n      dy = 0,\n      margin = 0,\n      marginTop = margin,\n      marginRight = margin,\n      marginBottom = margin,\n      marginLeft = margin,\n      className,\n      clip = defaults?.clip,\n      channels: extraChannels,\n      tip,\n      render\n    } = options;\n    this.data = data;\n    this.sort = isDomainSort(sort) ? sort : null;\n    this.initializer = initializer(options).initializer;\n    this.transform = this.initializer ? options.transform : basic(options).transform;\n    if (facet === null || facet === false) {\n      this.facet = null;\n    } else {\n      this.facet = keyword(facet === true ? \"include\" : facet, \"facet\", [\"auto\", \"include\", \"exclude\", \"super\"]);\n      this.fx = data === singleton && typeof fx === \"string\" ? [fx] : fx;\n      this.fy = data === singleton && typeof fy === \"string\" ? [fy] : fy;\n    }\n    this.facetAnchor = maybeFacetAnchor(facetAnchor);\n    channels = maybeNamed(channels);\n    if (extraChannels !== undefined) channels = {...maybeChannels(extraChannels), ...channels};\n    if (defaults !== undefined) channels = {...styles(this, options, defaults), ...channels};\n    this.channels = Object.fromEntries(\n      Object.entries(channels)\n        .map(([name, channel]) => {\n          if (isOptions(channel.value)) {\n            // apply scale and label overrides\n            const {value, label = channel.label, scale = channel.scale} = channel.value;\n            channel = {...channel, label, scale, value};\n          }\n          if (data === singleton && typeof channel.value === \"string\") {\n            // convert field names to singleton values for decoration marks (e.g., frame)\n            const {value} = channel;\n            channel = {...channel, value: [value]};\n          }\n          return [name, channel];\n        })\n        .filter(([name, {value, optional}]) => {\n          if (value != null) return true;\n          if (optional) return false;\n          throw new Error(`missing channel value: ${name}`);\n        })\n    );\n    this.dx = +dx;\n    this.dy = +dy;\n    this.marginTop = +marginTop;\n    this.marginRight = +marginRight;\n    this.marginBottom = +marginBottom;\n    this.marginLeft = +marginLeft;\n    this.clip = maybeClip(clip);\n    this.tip = maybeTip(tip);\n    this.className = string(className);\n    // Super-faceting currently disallow position channels; in the future, we\n    // could allow position to be specified in fx and fy in addition to (or\n    // instead of) x and y.\n    if (this.facet === \"super\") {\n      if (fx || fy) throw new Error(`super-faceting cannot use fx or fy`);\n      for (const name in this.channels) {\n        const {scale} = channels[name];\n        if (scale !== \"x\" && scale !== \"y\") continue;\n        throw new Error(`super-faceting cannot use x or y`);\n      }\n    }\n    if (render != null) {\n      this.render = composeRender(render, this.render);\n    }\n  }\n  initialize(facets, facetChannels, plotOptions) {\n    let data = dataify(this.data);\n    if (facets === undefined && data != null) facets = [range(data)];\n    const originalFacets = facets;\n    if (this.transform != null) ({facets, data} = this.transform(data, facets, plotOptions)), (data = dataify(data));\n    if (facets !== undefined) facets.original = originalFacets; // needed to read facetChannels\n    const channels = createChannels(this.channels, data);\n    if (this.sort != null) channelDomain(data, facets, channels, facetChannels, this.sort); // mutates facetChannels!\n    return {data, facets, channels};\n  }\n  filter(index, channels, values) {\n    for (const name in channels) {\n      const {filter = defined} = channels[name];\n      if (filter !== null) {\n        const value = values[name];\n        index = index.filter((i) => filter(value[i]));\n      }\n    }\n    return index;\n  }\n  // If there is a projection, and there are paired x and y channels associated\n  // with the x and y scale respectively (and not already in screen coordinates\n  // as with an initializer), then apply the projection, replacing the x and y\n  // values. Note that the x and y scales themselves dont exist if there is a\n  // projection, but whether the channels are associated with scales still\n  // determines whether the projection should apply; think of the projection as\n  // a combination xy-scale.\n  project(channels, values, context) {\n    for (const cx in channels) {\n      if (channels[cx].scale === \"x\" && /^x|x$/.test(cx)) {\n        const cy = cx.replace(/^x|x$/, \"y\");\n        if (cy in channels && channels[cy].scale === \"y\") {\n          project(cx, cy, values, context.projection);\n        }\n      }\n    }\n  }\n  scale(channels, scales, context) {\n    const values = valueObject(channels, scales);\n    if (context.projection) this.project(channels, values, context);\n    return values;\n  }\n}\n\nexport function marks(...marks) {\n  marks.plot = Mark.prototype.plot;\n  return marks;\n}\n\nexport function composeRender(r1, r2) {\n  if (r1 == null) return r2 === null ? undefined : r2;\n  if (r2 == null) return r1 === null ? undefined : r1;\n  if (typeof r1 !== \"function\") throw new TypeError(`invalid render transform: ${r1}`);\n  if (typeof r2 !== \"function\") throw new TypeError(`invalid render transform: ${r2}`);\n  return function (i, s, v, d, c, next) {\n    return r1.call(this, i, s, v, d, c, (i, s, v, d, c) => {\n      return r2.call(this, i, s, v, d, c, next); // preserve this\n    });\n  };\n}\n\nfunction maybeChannels(channels) {\n  return Object.fromEntries(\n    Object.entries(maybeNamed(channels)).map(([name, channel]) => {\n      channel = typeof channel === \"string\" ? {value: channel, label: name} : maybeValue(channel); // for shorthand extra channels, use name as label\n      if (channel.filter === undefined && channel.scale == null) channel = {...channel, filter: null};\n      return [name, channel];\n    })\n  );\n}\n\nfunction maybeTip(tip) {\n  return tip === true\n    ? \"xy\"\n    : tip === false || tip == null\n    ? null\n    : typeof tip === \"string\"\n    ? keyword(tip, \"tip\", [\"x\", \"y\", \"xy\"])\n    : tip; // tip options object\n}\n\nexport function withTip(options, pointer) {\n  return options?.tip === true\n    ? {...options, tip: pointer}\n    : isObject(options?.tip) && options.tip.pointer === undefined\n    ? {...options, tip: {...options.tip, pointer}}\n    : options;\n}\n","import {extent} from \"d3\";\nimport {projectionAspectRatio} from \"./projection.js\";\nimport {isOrdinalScale} from \"./scales.js\";\nimport {offset} from \"./style.js\";\n\nexport function createDimensions(scales, marks, options = {}) {\n  // Compute the default margins: the maximum of the marks margins. While not\n  // always used, they may be needed to compute the default height of the plot.\n  let marginTopDefault = 0.5 - offset,\n    marginRightDefault = 0.5 + offset,\n    marginBottomDefault = 0.5 + offset,\n    marginLeftDefault = 0.5 - offset;\n\n  for (const {marginTop, marginRight, marginBottom, marginLeft} of marks) {\n    if (marginTop > marginTopDefault) marginTopDefault = marginTop;\n    if (marginRight > marginRightDefault) marginRightDefault = marginRight;\n    if (marginBottom > marginBottomDefault) marginBottomDefault = marginBottom;\n    if (marginLeft > marginLeftDefault) marginLeftDefault = marginLeft;\n  }\n\n  // Compute the actual margins. The order of precedence is: the side-specific\n  // margin options, then the global margin option, then the defaults.\n  let {\n    margin,\n    marginTop = margin !== undefined ? margin : marginTopDefault,\n    marginRight = margin !== undefined ? margin : marginRightDefault,\n    marginBottom = margin !== undefined ? margin : marginBottomDefault,\n    marginLeft = margin !== undefined ? margin : marginLeftDefault\n  } = options;\n\n  // Coerce the margin options to numbers.\n  marginTop = +marginTop;\n  marginRight = +marginRight;\n  marginBottom = +marginBottom;\n  marginLeft = +marginLeft;\n\n  // Compute the outer dimensions of the plot. If the top and bottom margins are\n  // specified explicitly, adjust the automatic height accordingly.\n  let {\n    width = 640,\n    height = autoHeight(scales, options, {\n      width,\n      marginTopDefault,\n      marginRightDefault,\n      marginBottomDefault,\n      marginLeftDefault\n    }) + Math.max(0, marginTop - marginTopDefault + marginBottom - marginBottomDefault)\n  } = options;\n\n  // Coerce the width and height.\n  width = +width;\n  height = +height;\n\n  const dimensions = {\n    width,\n    height,\n    marginTop,\n    marginRight,\n    marginBottom,\n    marginLeft\n  };\n\n  // Compute the facet margins.\n  if (scales.fx || scales.fy) {\n    let {\n      margin: facetMargin,\n      marginTop: facetMarginTop = facetMargin !== undefined ? facetMargin : marginTop,\n      marginRight: facetMarginRight = facetMargin !== undefined ? facetMargin : marginRight,\n      marginBottom: facetMarginBottom = facetMargin !== undefined ? facetMargin : marginBottom,\n      marginLeft: facetMarginLeft = facetMargin !== undefined ? facetMargin : marginLeft\n    } = options.facet ?? {};\n\n    // Coerce the facet margin options to numbers.\n    facetMarginTop = +facetMarginTop;\n    facetMarginRight = +facetMarginRight;\n    facetMarginBottom = +facetMarginBottom;\n    facetMarginLeft = +facetMarginLeft;\n\n    dimensions.facet = {\n      marginTop: facetMarginTop,\n      marginRight: facetMarginRight,\n      marginBottom: facetMarginBottom,\n      marginLeft: facetMarginLeft\n    };\n  }\n\n  return dimensions;\n}\n\nfunction autoHeight(\n  {x, y, fy, fx},\n  {projection, aspectRatio},\n  {width, marginTopDefault, marginRightDefault, marginBottomDefault, marginLeftDefault}\n) {\n  const nfy = fy ? fy.scale.domain().length || 1 : 1;\n\n  // If a projection is specified, compute an aspect ratio based on the domain,\n  // defaulting to the projections natural aspect ratio (if known).\n  const ar = projectionAspectRatio(projection);\n  if (ar) {\n    const nfx = fx ? fx.scale.domain().length : 1;\n    const far = ((1.1 * nfy - 0.1) / (1.1 * nfx - 0.1)) * ar; // 0.1 is default facet padding\n    const lar = Math.max(0.1, Math.min(10, far)); // clamp the aspect ratio to a reasonable value\n    return Math.round((width - marginLeftDefault - marginRightDefault) * lar + marginTopDefault + marginBottomDefault);\n  }\n  const ny = y ? (isOrdinalScale(y) ? y.scale.domain().length || 1 : Math.max(7, 17 / nfy)) : 1;\n\n  // If a desired aspect ratio is given, compute a default height to match.\n  if (aspectRatio != null) {\n    aspectRatio = +aspectRatio;\n    if (!(isFinite(aspectRatio) && aspectRatio > 0)) throw new Error(`invalid aspectRatio: ${aspectRatio}`);\n    const ratio = aspectRatioLength(\"y\", y) / (aspectRatioLength(\"x\", x) * aspectRatio);\n    const fxb = fx ? fx.scale.bandwidth() : 1;\n    const fyb = fy ? fy.scale.bandwidth() : 1;\n    const w = fxb * (width - marginLeftDefault - marginRightDefault) - x.insetLeft - x.insetRight;\n    return (ratio * w + y.insetTop + y.insetBottom) / fyb + marginTopDefault + marginBottomDefault;\n  }\n\n  return !!(y || fy) * Math.max(1, Math.min(60, ny * nfy)) * 20 + !!fx * 30 + 60;\n}\n\nfunction aspectRatioLength(k, scale) {\n  if (!scale) throw new Error(`aspectRatio requires ${k} scale`);\n  const {type, domain} = scale;\n  let transform;\n  switch (type) {\n    case \"linear\":\n    case \"utc\":\n    case \"time\":\n      transform = Number;\n      break;\n    case \"pow\": {\n      const exponent = scale.scale.exponent();\n      transform = (x) => Math.pow(x, exponent);\n      break;\n    }\n    case \"log\":\n      transform = Math.log;\n      break;\n    case \"point\":\n    case \"band\":\n      return domain.length;\n    default:\n      throw new Error(`unsupported ${k} scale for aspectRatio: ${type}`);\n  }\n  const [min, max] = extent(domain);\n  return Math.abs(transform(max) - transform(min));\n}\n","import {pointer as pointof} from \"d3\";\nimport {composeRender} from \"../mark.js\";\nimport {isArray} from \"../options.js\";\nimport {applyFrameAnchor} from \"../style.js\";\n\nconst states = new WeakMap();\n\nfunction pointerK(kx, ky, {x, y, px, py, maxRadius = 40, channels, render, ...options} = {}) {\n  maxRadius = +maxRadius;\n  // When px or py is used, register an extra channel that the pointer\n  // interaction can use to control which point is focused; this allows pointing\n  // to function independently of where the downstream mark (e.g., a tip) is\n  // displayed. Also default x or y to null to disable maybeTuple etc.\n  if (px != null) (x ??= null), (channels = {...channels, px: {value: px, scale: \"x\"}});\n  if (py != null) (y ??= null), (channels = {...channels, py: {value: py, scale: \"y\"}});\n  return {\n    x,\n    y,\n    channels,\n    ...options,\n    // Unlike other composed transforms, the render transform must be the\n    // outermost render function because it will re-render dynamically in\n    // response to pointer events.\n    render: composeRender(function (index, scales, values, dimensions, context, next) {\n      context = {...context, pointerSticky: false};\n      const svg = context.ownerSVGElement;\n      const {data} = context.getMarkState(this);\n\n      // Isolate state per-pointer, per-plot; if the pointer is reused by\n      // multiple marks, they will share the same state (e.g., sticky modality).\n      let state = states.get(svg);\n      if (!state) states.set(svg, (state = {sticky: false, roots: [], renders: []}));\n\n      // This serves as a unique identifier of the rendered mark per-plot; it is\n      // used to record the currently-rendered elements (state.roots) so that we\n      // can tell when a rendered element is clicked on.\n      let renderIndex = state.renders.push(render) - 1;\n\n      // For faceting, we want to compute the local coordinates of each point,\n      // which means subtracting out the facet translation, if any. (Its\n      // tempting to do this using the local coordinates in SVG, but thats\n      // complicated by mark-specific transforms such as dx and dy.) Also, since\n      // band scales return the upper bound of the band, we have to offset by\n      // half the bandwidth.\n      const {x, y, fx, fy} = scales;\n      let tx = fx ? fx(index.fx) - dimensions.marginLeft : 0;\n      let ty = fy ? fy(index.fy) - dimensions.marginTop : 0;\n      if (x?.bandwidth) tx += x.bandwidth() / 2;\n      if (y?.bandwidth) ty += y.bandwidth() / 2;\n\n      // For faceting, we also need to record the closest point per facet per\n      // mark (!), since each facet has its own pointer event listeners; we only\n      // want the closest point across facets to be visible.\n      const faceted = index.fi != null;\n      let facetState;\n      if (faceted) {\n        let facetStates = state.facetStates;\n        if (!facetStates) state.facetStates = facetStates = new Map();\n        facetState = facetStates.get(this);\n        if (!facetState) facetStates.set(this, (facetState = new Map()));\n      }\n\n      // The order of precedence for the pointer position is: px & py; the\n      // middle of x1 & y1 and x2 & y2; or x1 & y1 (e.g., area); or lastly x &\n      // y. If a dimension is unspecified, the frame anchor is used.\n      const [cx, cy] = applyFrameAnchor(this, dimensions);\n      const {px: PX, py: PY} = values;\n      const px = PX ? (i) => PX[i] : anchorX(values, cx);\n      const py = PY ? (i) => PY[i] : anchorY(values, cy);\n\n      let i; // currently focused index\n      let g; // currently rendered mark\n      let s; // currently rendered stickiness\n      let f; // current animation frame\n\n      // When faceting, if more than one pointer would be visible, only show\n      // this one if it is the closest. We defer rendering using an animation\n      // frame to allow all pointer events to be received before deciding which\n      // mark to render; although when hiding, we render immediately.\n      function update(ii, ri) {\n        if (faceted) {\n          if (f) f = cancelAnimationFrame(f);\n          if (ii == null) facetState.delete(index.fi);\n          else {\n            facetState.set(index.fi, ri);\n            f = requestAnimationFrame(() => {\n              f = null;\n              for (const [fi, r] of facetState) {\n                if (r < ri || (r === ri && fi < index.fi)) {\n                  ii = null;\n                  break;\n                }\n              }\n              render(ii);\n            });\n            return;\n          }\n        }\n        render(ii);\n      }\n\n      function render(ii) {\n        if (i === ii && s === state.sticky) return; // the tooltip hasnt moved\n        i = ii;\n        s = context.pointerSticky = state.sticky;\n        const I = i == null ? [] : [i];\n        if (faceted) (I.fx = index.fx), (I.fy = index.fy), (I.fi = index.fi);\n        const r = next(I, scales, values, dimensions, context);\n        if (g) {\n          // When faceting, preserve swapped mark and facet transforms; also\n          // remove ARIA attributes since these are promoted to the parent. This\n          // is perhaps brittle in that it depends on how Plot renders facets,\n          // but it produces a cleaner and more accessible SVG structure.\n          if (faceted) {\n            const p = g.parentNode;\n            const ft = g.getAttribute(\"transform\");\n            const mt = r.getAttribute(\"transform\");\n            ft ? r.setAttribute(\"transform\", ft) : r.removeAttribute(\"transform\");\n            mt ? p.setAttribute(\"transform\", mt) : p.removeAttribute(\"transform\");\n            r.removeAttribute(\"aria-label\");\n            r.removeAttribute(\"aria-description\");\n            r.removeAttribute(\"aria-hidden\");\n          }\n          g.replaceWith(r);\n        }\n        state.roots[renderIndex] = g = r;\n\n        // Dispatch the value. When simultaneously exiting this facet and\n        // entering a new one, prioritize the entering facet.\n        if (!(i == null && facetState?.size > 1)) {\n          const value = i == null ? null : isArray(data) ? data[i] : data.get(i);\n          context.dispatchValue(value);\n        }\n\n        return r;\n      }\n\n      // Select the closest point to the mouse in the current facet; for\n      // pointerX or pointerY, the orthogonal component of the distance is\n      // squashed, selecting primarily on the dominant dimension. Across facets,\n      // use unsquashed distance to determine the winner.\n      function pointermove(event) {\n        if (state.sticky || (event.pointerType === \"mouse\" && event.buttons === 1)) return; // dragging\n        let [xp, yp] = pointof(event);\n        (xp -= tx), (yp -= ty); // correct for facets and band scales\n        const kpx = xp < dimensions.marginLeft || xp > dimensions.width - dimensions.marginRight ? 1 : kx;\n        const kpy = yp < dimensions.marginTop || yp > dimensions.height - dimensions.marginBottom ? 1 : ky;\n        let ii = null;\n        let ri = maxRadius * maxRadius;\n        for (const j of index) {\n          const dx = kpx * (px(j) - xp);\n          const dy = kpy * (py(j) - yp);\n          const rj = dx * dx + dy * dy;\n          if (rj <= ri) (ii = j), (ri = rj);\n        }\n        if (ii != null && (kx !== 1 || ky !== 1)) {\n          const dx = px(ii) - xp;\n          const dy = py(ii) - yp;\n          ri = dx * dx + dy * dy;\n        }\n        update(ii, ri);\n      }\n\n      function pointerdown(event) {\n        if (event.pointerType !== \"mouse\") return;\n        if (i == null) return; // not pointing\n        if (state.sticky && state.roots.some((r) => r?.contains(event.target))) return; // stay sticky\n        if (state.sticky) (state.sticky = false), state.renders.forEach((r) => r(null)); // clear all pointers\n        else (state.sticky = true), render(i);\n        event.stopImmediatePropagation(); // suppress other pointers\n      }\n\n      function pointerleave(event) {\n        if (event.pointerType !== \"mouse\") return;\n        if (!state.sticky) update(null);\n      }\n\n      // We listen to the svg element; listening to the window instead would let\n      // us receive pointer events from farther away, but would also make it\n      // hard to know when to remove the listeners. (Using a mutation observer\n      // to watch the entire document is likely too expensive.)\n      svg.addEventListener(\"pointerenter\", pointermove);\n      svg.addEventListener(\"pointermove\", pointermove);\n      svg.addEventListener(\"pointerdown\", pointerdown);\n      svg.addEventListener(\"pointerleave\", pointerleave);\n\n      return render(null);\n    }, render)\n  };\n}\n\nexport function pointer(options) {\n  return pointerK(1, 1, options);\n}\n\nexport function pointerX(options) {\n  return pointerK(1, 0.01, options);\n}\n\nexport function pointerY(options) {\n  return pointerK(0.01, 1, options);\n}\n\nexport function anchorX({x1: X1, x2: X2, x: X = X1}, cx) {\n  return X1 && X2 ? (i) => (X1[i] + X2[i]) / 2 : X ? (i) => X[i] : () => cx;\n}\n\nexport function anchorY({y1: Y1, y2: Y2, y: Y = Y1}, cy) {\n  return Y1 && Y2 ? (i) => (Y1[i] + Y2[i]) / 2 : Y ? (i) => Y[i] : () => cy;\n}\n","import {isOrdinalScale} from \"./scales.js\";\n\nexport function inferFontVariant(scale) {\n  return isOrdinalScale(scale) && scale.interval === undefined ? undefined : \"tabular-nums\";\n}\n","import {quantize, interpolateNumber, piecewise, format, scaleBand, scaleLinear, axisBottom} from \"d3\";\nimport {inferFontVariant} from \"../axes.js\";\nimport {createContext, create} from \"../context.js\";\nimport {map, maybeNumberChannel} from \"../options.js\";\nimport {interpolatePiecewise} from \"../scales/quantitative.js\";\nimport {applyInlineStyles, impliedString, maybeClassName} from \"../style.js\";\n\nexport function legendRamp(color, options) {\n  let {\n    label = color.label,\n    tickSize = 6,\n    width = 240,\n    height = 44 + tickSize,\n    marginTop = 18,\n    marginRight = 0,\n    marginBottom = 16 + tickSize,\n    marginLeft = 0,\n    style,\n    ticks = (width - marginLeft - marginRight) / 64,\n    tickFormat,\n    fontVariant = inferFontVariant(color),\n    round = true,\n    opacity,\n    className\n  } = options;\n  const context = createContext(options);\n  className = maybeClassName(className);\n  opacity = maybeNumberChannel(opacity)[1];\n  if (tickFormat === null) tickFormat = () => null;\n\n  const svg = create(\"svg\", context)\n    .attr(\"class\", `${className}-ramp`)\n    .attr(\"font-family\", \"system-ui, sans-serif\")\n    .attr(\"font-size\", 10)\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n    .attr(\"viewBox\", `0 0 ${width} ${height}`)\n    .call((svg) =>\n      // Warning: if you edit this, change defaultClassName.\n      svg.append(\"style\").text(\n        `:where(.${className}-ramp) {\n  display: block;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n  overflow: visible;\n}\n:where(.${className}-ramp text) {\n  white-space: pre;\n}`\n      )\n    )\n    .call(applyInlineStyles, style);\n\n  let tickAdjust = (g) => g.selectAll(\".tick line\").attr(\"y1\", marginTop + marginBottom - height);\n\n  let x;\n\n  // Some D3 scales use scale.interpolate, some scale.interpolator, and some\n  // scale.round; this normalizes the API so it works with all scale types.\n  const applyRange = round ? (x, range) => x.rangeRound(range) : (x, range) => x.range(range);\n\n  const {type, domain, range, interpolate, scale, pivot} = color;\n\n  // Continuous\n  if (interpolate) {\n    // Often interpolate is a fixed interpolator on the [0, 1] interval, as\n    // with a built-in color scheme, but sometimes it is a function that takes\n    // two arguments and is used in conjunction with the range.\n    const interpolator =\n      range === undefined\n        ? interpolate\n        : piecewise(interpolate.length === 1 ? interpolatePiecewise(interpolate) : interpolate, range);\n\n    // Construct a D3 scale of the same type, but with a range that evenly\n    // divides the horizontal extent of the legend. (In the common case, the\n    // domain.length is two, and so the range is simply the extent.) For a\n    // diverging scale, we need an extra point in the range for the pivot such\n    // that the pivot is always drawn in the middle.\n    x = applyRange(\n      scale.copy(),\n      quantize(\n        interpolateNumber(marginLeft, width - marginRight),\n        Math.min(domain.length + (pivot !== undefined), range === undefined ? Infinity : range.length)\n      )\n    );\n\n    // Construct a 2561 canvas, filling each pixel using the interpolator.\n    const n = 256;\n    const canvas = context.document.createElement(\"canvas\");\n    canvas.width = n;\n    canvas.height = 1;\n    const context2 = canvas.getContext(\"2d\");\n    for (let i = 0, j = n - 1; i < n; ++i) {\n      context2.fillStyle = interpolator(i / j);\n      context2.fillRect(i, 0, 1, 1);\n    }\n\n    svg\n      .append(\"image\")\n      .attr(\"opacity\", opacity)\n      .attr(\"x\", marginLeft)\n      .attr(\"y\", marginTop)\n      .attr(\"width\", width - marginLeft - marginRight)\n      .attr(\"height\", height - marginTop - marginBottom)\n      .attr(\"preserveAspectRatio\", \"none\")\n      .attr(\"xlink:href\", canvas.toDataURL());\n  }\n\n  // Threshold\n  else if (type === \"threshold\") {\n    const thresholds = domain;\n\n    const thresholdFormat =\n      tickFormat === undefined ? (d) => d : typeof tickFormat === \"string\" ? format(tickFormat) : tickFormat;\n\n    // Construct a linear scale with evenly-spaced ticks for each of the\n    // thresholds; the domain extends one beyond the threshold extent.\n    x = applyRange(scaleLinear().domain([-1, range.length - 1]), [marginLeft, width - marginRight]);\n\n    svg\n      .append(\"g\")\n      .attr(\"fill-opacity\", opacity)\n      .selectAll()\n      .data(range)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d, i) => x(i - 1))\n      .attr(\"y\", marginTop)\n      .attr(\"width\", (d, i) => x(i) - x(i - 1))\n      .attr(\"height\", height - marginTop - marginBottom)\n      .attr(\"fill\", (d) => d);\n\n    ticks = map(thresholds, (_, i) => i);\n    tickFormat = (i) => thresholdFormat(thresholds[i], i);\n  }\n\n  // Ordinal (hopefully!)\n  else {\n    x = applyRange(scaleBand().domain(domain), [marginLeft, width - marginRight]);\n\n    svg\n      .append(\"g\")\n      .attr(\"fill-opacity\", opacity)\n      .selectAll()\n      .data(domain)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", x)\n      .attr(\"y\", marginTop)\n      .attr(\"width\", Math.max(0, x.bandwidth() - 1))\n      .attr(\"height\", height - marginTop - marginBottom)\n      .attr(\"fill\", scale);\n\n    tickAdjust = () => {};\n  }\n\n  svg\n    .append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(\n      axisBottom(x)\n        .ticks(Array.isArray(ticks) ? null : ticks, typeof tickFormat === \"string\" ? tickFormat : undefined)\n        .tickFormat(typeof tickFormat === \"function\" ? tickFormat : undefined)\n        .tickSize(tickSize)\n        .tickValues(Array.isArray(ticks) ? ticks : null)\n    )\n    .attr(\"font-size\", null)\n    .attr(\"font-family\", null)\n    .attr(\"font-variant\", impliedString(fontVariant, \"normal\"))\n    .call(tickAdjust)\n    .call((g) => g.select(\".domain\").remove());\n\n  if (label !== undefined) {\n    svg\n      .append(\"text\")\n      .attr(\"x\", marginLeft)\n      .attr(\"y\", marginTop - 6)\n      .attr(\"fill\", \"currentColor\") // TODO move to stylesheet?\n      .attr(\"font-weight\", \"bold\")\n      .text(label);\n  }\n\n  return svg.node();\n}\n","export const radians = Math.PI / 180;\n","import {create} from \"./context.js\";\nimport {unset} from \"./memoize.js\";\nimport {keyof} from \"./options.js\";\n\nexport function markers(mark, {marker, markerStart = marker, markerMid = marker, markerEnd = marker} = {}) {\n  mark.markerStart = maybeMarker(markerStart);\n  mark.markerMid = maybeMarker(markerMid);\n  mark.markerEnd = maybeMarker(markerEnd);\n}\n\nfunction maybeMarker(marker) {\n  if (marker == null || marker === false) return null;\n  if (marker === true) return markerCircleFill;\n  if (typeof marker === \"function\") return marker;\n  switch (`${marker}`.toLowerCase()) {\n    case \"none\":\n      return null;\n    case \"arrow\":\n      return markerArrow(\"auto\");\n    case \"arrow-reverse\":\n      return markerArrow(\"auto-start-reverse\");\n    case \"dot\":\n      return markerDot;\n    case \"circle\":\n    case \"circle-fill\":\n      return markerCircleFill;\n    case \"circle-stroke\":\n      return markerCircleStroke;\n    case \"tick\":\n      return markerTick(\"auto\");\n    case \"tick-x\":\n      return markerTick(90);\n    case \"tick-y\":\n      return markerTick(0);\n  }\n  throw new Error(`invalid marker: ${marker}`);\n}\n\nfunction markerArrow(orient) {\n  return (color, context) =>\n    create(\"svg:marker\", context)\n      .attr(\"viewBox\", \"-5 -5 10 10\")\n      .attr(\"markerWidth\", 6.67)\n      .attr(\"markerHeight\", 6.67)\n      .attr(\"orient\", orient)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", color)\n      .attr(\"stroke-width\", 1.5)\n      .attr(\"stroke-linecap\", \"round\")\n      .attr(\"stroke-linejoin\", \"round\")\n      .call((marker) => marker.append(\"path\").attr(\"d\", \"M-1.5,-3l3,3l-3,3\"))\n      .node();\n}\n\nfunction markerDot(color, context) {\n  return create(\"svg:marker\", context)\n    .attr(\"viewBox\", \"-5 -5 10 10\")\n    .attr(\"markerWidth\", 6.67)\n    .attr(\"markerHeight\", 6.67)\n    .attr(\"fill\", color)\n    .attr(\"stroke\", \"none\")\n    .call((marker) => marker.append(\"circle\").attr(\"r\", 2.5))\n    .node();\n}\n\nfunction markerCircleFill(color, context) {\n  return create(\"svg:marker\", context)\n    .attr(\"viewBox\", \"-5 -5 10 10\")\n    .attr(\"markerWidth\", 6.67)\n    .attr(\"markerHeight\", 6.67)\n    .attr(\"fill\", color)\n    .attr(\"stroke\", \"var(--plot-background)\")\n    .attr(\"stroke-width\", 1.5)\n    .call((marker) => marker.append(\"circle\").attr(\"r\", 3))\n    .node();\n}\n\nfunction markerCircleStroke(color, context) {\n  return create(\"svg:marker\", context)\n    .attr(\"viewBox\", \"-5 -5 10 10\")\n    .attr(\"markerWidth\", 6.67)\n    .attr(\"markerHeight\", 6.67)\n    .attr(\"fill\", \"var(--plot-background)\")\n    .attr(\"stroke\", color)\n    .attr(\"stroke-width\", 1.5)\n    .call((marker) => marker.append(\"circle\").attr(\"r\", 3))\n    .node();\n}\n\nfunction markerTick(orient) {\n  return (color, context) =>\n    create(\"svg:marker\", context)\n      .attr(\"viewBox\", \"-3 -3 6 6\")\n      .attr(\"markerWidth\", 6)\n      .attr(\"markerHeight\", 6)\n      .attr(\"orient\", orient)\n      .attr(\"stroke\", color)\n      .call((marker) => marker.append(\"path\").attr(\"d\", \"M0,-3v6\"))\n      .node();\n}\n\nlet nextMarkerId = 0;\n\nexport function applyMarkers(path, mark, {stroke: S}, context) {\n  return applyMarkersColor(path, mark, S && ((i) => S[i]), null, context);\n}\n\nexport function applyGroupedMarkers(path, mark, {stroke: S, z: Z}, context) {\n  return applyMarkersColor(path, mark, S && (([i]) => S[i]), Z, context);\n}\n\nconst START = 1;\nconst END = 2;\n\n/**\n * When rendering lines or areas with variable aesthetics, a single series\n * produces multiple path elements. The first path element is a START segment;\n * the last path element is an END segment. When there is only a single path\n * element, it is both a START and an END segment.\n */\nfunction getGroupedOrientation(path, Z) {\n  const O = new Uint8Array(Z.length);\n  const D = path.data().filter((I) => I.length > 1);\n  const n = D.length;\n\n  // Forward pass to find start segments.\n  for (let i = 0, z = unset; i < n; ++i) {\n    const I = D[i];\n    if (I.length > 1) {\n      const i = I[0];\n      if (z !== (z = keyof(Z[i]))) O[i] |= START;\n    }\n  }\n\n  // Backwards pass to find end segments.\n  for (let i = n - 1, z = unset; i >= 0; --i) {\n    const I = D[i];\n    if (I.length > 1) {\n      const i = I[0];\n      if (z !== (z = keyof(Z[i]))) O[i] |= END;\n    }\n  }\n\n  return ([i]) => O[i];\n}\n\nfunction applyMarkersColor(path, {markerStart, markerMid, markerEnd, stroke}, strokeof = () => stroke, Z, context) {\n  if (!markerStart && !markerMid && !markerEnd) return;\n  const iriByMarkerColor = new Map();\n  const orient = Z && getGroupedOrientation(path, Z);\n\n  function applyMarker(name, marker, filter) {\n    return function (i) {\n      if (filter && !filter(i)) return;\n      const color = strokeof(i);\n      let iriByColor = iriByMarkerColor.get(marker);\n      if (!iriByColor) iriByMarkerColor.set(marker, (iriByColor = new Map()));\n      let iri = iriByColor.get(color);\n      if (!iri) {\n        const node = this.parentNode.insertBefore(marker(color, context), this);\n        const id = `plot-marker-${++nextMarkerId}`;\n        node.setAttribute(\"id\", id);\n        iriByColor.set(color, (iri = `url(#${id})`));\n      }\n      this.setAttribute(name, iri);\n    };\n  }\n\n  if (markerStart) path.each(applyMarker(\"marker-start\", markerStart, orient && ((i) => orient(i) & START)));\n  if (markerMid && orient) path.each(applyMarker(\"marker-start\", markerMid, (i) => !(orient(i) & START)));\n  if (markerMid) path.each(applyMarker(\"marker-mid\", markerMid));\n  if (markerEnd) path.each(applyMarker(\"marker-end\", markerEnd, orient && ((i) => orient(i) & END)));\n}\n","import {offset} from \"../style.js\";\n\nexport function maybeInsetX({inset, insetLeft, insetRight, ...options} = {}) {\n  [insetLeft, insetRight] = maybeInset(inset, insetLeft, insetRight);\n  return {inset, insetLeft, insetRight, ...options};\n}\n\nexport function maybeInsetY({inset, insetTop, insetBottom, ...options} = {}) {\n  [insetTop, insetBottom] = maybeInset(inset, insetTop, insetBottom);\n  return {inset, insetTop, insetBottom, ...options};\n}\n\nfunction maybeInset(inset, inset1, inset2) {\n  return inset === undefined && inset1 === undefined && inset2 === undefined\n    ? offset\n      ? [1, 0]\n      : [0.5, 0.5]\n    : [inset1, inset2];\n}\n","import {isTemporal, labelof, map, maybeInterval, maybeValue, valueof} from \"../options.js\";\nimport {maybeInsetX, maybeInsetY} from \"./inset.js\";\n\n// The interval may be specified either as x: {value, interval} or as {x,\n// interval}. The former can be used to specify separate intervals for x and y,\n// for example with Plot.rect.\nfunction maybeIntervalValue(value, {interval}) {\n  value = {...maybeValue(value)};\n  value.interval = maybeInterval(value.interval === undefined ? interval : value.interval);\n  return value;\n}\n\nfunction maybeIntervalK(k, maybeInsetK, options, trivial) {\n  const {[k]: v, [`${k}1`]: v1, [`${k}2`]: v2} = options;\n  const {value, interval} = maybeIntervalValue(v, options);\n  if (value == null || (interval == null && !trivial)) return options;\n  const label = labelof(v);\n  if (interval == null) {\n    let V;\n    const kv = {transform: (data) => V || (V = valueof(data, value)), label};\n    return {\n      ...options,\n      [k]: undefined,\n      [`${k}1`]: v1 === undefined ? kv : v1,\n      [`${k}2`]: v2 === undefined && !(v1 === v2 && trivial) ? kv : v2\n    };\n  }\n  let D1, V1;\n  function transform(data) {\n    if (V1 !== undefined && data === D1) return V1; // memoize\n    return (V1 = map(valueof((D1 = data), value), (v) => interval.floor(v)));\n  }\n  return maybeInsetK({\n    ...options,\n    [k]: undefined,\n    [`${k}1`]: v1 === undefined ? {transform, label} : v1,\n    [`${k}2`]: v2 === undefined ? {transform: (data) => transform(data).map((v) => interval.offset(v)), label} : v2\n  });\n}\n\nfunction maybeIntervalMidK(k, maybeInsetK, options) {\n  const {[k]: v} = options;\n  const {value, interval} = maybeIntervalValue(v, options);\n  if (value == null || interval == null) return options;\n  return maybeInsetK({\n    ...options,\n    [k]: {\n      label: labelof(v),\n      transform: (data) => {\n        const V1 = map(valueof(data, value), (v) => interval.floor(v));\n        const V2 = V1.map((v) => interval.offset(v));\n        return V1.map(\n          isTemporal(V1)\n            ? (v1, v2) =>\n                v1 == null || isNaN((v1 = +v1)) || ((v2 = V2[v2]), v2 == null) || isNaN((v2 = +v2))\n                  ? undefined\n                  : new Date((v1 + v2) / 2)\n            : (v1, v2) => (v1 == null || ((v2 = V2[v2]), v2 == null) ? NaN : (+v1 + +v2) / 2)\n        );\n      }\n    }\n  });\n}\n\nexport function maybeTrivialIntervalX(options = {}) {\n  return maybeIntervalK(\"x\", maybeInsetX, options, true);\n}\n\nexport function maybeTrivialIntervalY(options = {}) {\n  return maybeIntervalK(\"y\", maybeInsetY, options, true);\n}\n\nexport function maybeIntervalX(options = {}) {\n  return maybeIntervalK(\"x\", maybeInsetX, options);\n}\n\nexport function maybeIntervalY(options = {}) {\n  return maybeIntervalK(\"y\", maybeInsetY, options);\n}\n\nexport function maybeIntervalMidX(options = {}) {\n  return maybeIntervalMidK(\"x\", maybeInsetX, options);\n}\n\nexport function maybeIntervalMidY(options = {}) {\n  return maybeIntervalMidK(\"y\", maybeInsetY, options);\n}\n","import {create} from \"../context.js\";\nimport {Mark, withTip} from \"../mark.js\";\nimport {applyMarkers, markers} from \"../marker.js\";\nimport {identity, number} from \"../options.js\";\nimport {isCollapsed} from \"../scales.js\";\nimport {applyChannelStyles, applyDirectStyles, applyIndirectStyles, applyTransform, offset} from \"../style.js\";\nimport {maybeIntervalX, maybeIntervalY} from \"../transforms/interval.js\";\n\nconst defaults = {\n  ariaLabel: \"rule\",\n  fill: null,\n  stroke: \"currentColor\"\n};\n\nexport class RuleX extends Mark {\n  constructor(data, options = {}) {\n    const {x, y1, y2, inset = 0, insetTop = inset, insetBottom = inset} = options;\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", optional: true},\n        y1: {value: y1, scale: \"y\", optional: true},\n        y2: {value: y2, scale: \"y\", optional: true}\n      },\n      withTip(options, \"x\"),\n      defaults\n    );\n    this.insetTop = number(insetTop);\n    this.insetBottom = number(insetBottom);\n    markers(this, options);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x, y} = scales;\n    const {x: X, y1: Y1, y2: Y2} = channels;\n    const {width, height, marginTop, marginRight, marginLeft, marginBottom} = dimensions;\n    const {insetTop, insetBottom} = this;\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {x: X && x}, offset, 0)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(\"line\")\n          .call(applyDirectStyles, this)\n          .attr(\"x1\", X ? (i) => X[i] : (marginLeft + width - marginRight) / 2)\n          .attr(\"x2\", X ? (i) => X[i] : (marginLeft + width - marginRight) / 2)\n          .attr(\"y1\", Y1 && !isCollapsed(y) ? (i) => Y1[i] + insetTop : marginTop + insetTop)\n          .attr(\n            \"y2\",\n            Y2 && !isCollapsed(y)\n              ? y.bandwidth\n                ? (i) => Y2[i] + y.bandwidth() - insetBottom\n                : (i) => Y2[i] - insetBottom\n              : height - marginBottom - insetBottom\n          )\n          .call(applyChannelStyles, this, channels)\n          .call(applyMarkers, this, channels, context)\n      )\n      .node();\n  }\n}\n\nexport class RuleY extends Mark {\n  constructor(data, options = {}) {\n    const {x1, x2, y, inset = 0, insetRight = inset, insetLeft = inset} = options;\n    super(\n      data,\n      {\n        y: {value: y, scale: \"y\", optional: true},\n        x1: {value: x1, scale: \"x\", optional: true},\n        x2: {value: x2, scale: \"x\", optional: true}\n      },\n      withTip(options, \"y\"),\n      defaults\n    );\n    this.insetRight = number(insetRight);\n    this.insetLeft = number(insetLeft);\n    markers(this, options);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x, y} = scales;\n    const {y: Y, x1: X1, x2: X2} = channels;\n    const {width, height, marginTop, marginRight, marginLeft, marginBottom} = dimensions;\n    const {insetLeft, insetRight} = this;\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {y: Y && y}, 0, offset)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(\"line\")\n          .call(applyDirectStyles, this)\n          .attr(\"x1\", X1 && !isCollapsed(x) ? (i) => X1[i] + insetLeft : marginLeft + insetLeft)\n          .attr(\n            \"x2\",\n            X2 && !isCollapsed(x)\n              ? x.bandwidth\n                ? (i) => X2[i] + x.bandwidth() - insetRight\n                : (i) => X2[i] - insetRight\n              : width - marginRight - insetRight\n          )\n          .attr(\"y1\", Y ? (i) => Y[i] : (marginTop + height - marginBottom) / 2)\n          .attr(\"y2\", Y ? (i) => Y[i] : (marginTop + height - marginBottom) / 2)\n          .call(applyChannelStyles, this, channels)\n          .call(applyMarkers, this, channels, context)\n      )\n      .node();\n  }\n}\n\nexport function ruleX(data, options) {\n  let {x = identity, y, y1, y2, ...rest} = maybeIntervalY(options);\n  [y1, y2] = maybeOptionalZero(y, y1, y2);\n  return new RuleX(data, {...rest, x, y1, y2});\n}\n\nexport function ruleY(data, options) {\n  let {y = identity, x, x1, x2, ...rest} = maybeIntervalX(options);\n  [x1, x2] = maybeOptionalZero(x, x1, x2);\n  return new RuleY(data, {...rest, y, x1, x2});\n}\n\n// For marks specified either as [0, x] or [x1, x2], or nothing.\nfunction maybeOptionalZero(x, x1, x2) {\n  if (x == null) {\n    if (x1 === undefined) {\n      if (x2 !== undefined) return [0, x2];\n    } else {\n      if (x2 === undefined) return [0, x1];\n    }\n  } else if (x1 === undefined) {\n    return x2 === undefined ? [0, x] : [x, x2];\n  } else if (x2 === undefined) {\n    return [x, x1];\n  }\n  return [x1, x2];\n}\n","export function template(strings, ...parts) {\n  let n = parts.length;\n\n  // If any of the interpolated parameters are strings rather than functions,\n  // bake them into the template to optimize performance during render.\n  for (let j = 0, copy = true; j < n; ++j) {\n    if (typeof parts[j] !== \"function\") {\n      if (copy) {\n        strings = strings.slice(); // copy before mutate\n        copy = false;\n      }\n      strings.splice(j, 2, strings[j] + parts[j] + strings[j + 1]);\n      parts.splice(j, 1);\n      --j, --n;\n    }\n  }\n\n  return (i) => {\n    let s = strings[0];\n    for (let j = 0; j < n; ++j) {\n      s += parts[j](i) + strings[j + 1];\n    }\n    return s;\n  };\n}\n","import {namespaces} from \"d3\";\nimport {create} from \"../context.js\";\nimport {nonempty} from \"../defined.js\";\nimport {formatDefault} from \"../format.js\";\nimport {Mark} from \"../mark.js\";\nimport {\n  indexOf,\n  identity,\n  string,\n  maybeNumberChannel,\n  maybeTuple,\n  numberChannel,\n  isNumeric,\n  isTemporal,\n  keyword,\n  maybeFrameAnchor,\n  isTextual,\n  isIterable\n} from \"../options.js\";\nimport {\n  applyChannelStyles,\n  applyDirectStyles,\n  applyIndirectStyles,\n  applyAttr,\n  applyTransform,\n  impliedString,\n  applyFrameAnchor\n} from \"../style.js\";\nimport {template} from \"../template.js\";\nimport {maybeIntervalMidX, maybeIntervalMidY} from \"../transforms/interval.js\";\n\nconst defaults = {\n  ariaLabel: \"text\",\n  strokeLinejoin: \"round\",\n  strokeWidth: 3,\n  paintOrder: \"stroke\"\n};\n\nconst softHyphen = \"\\u00ad\";\n\nexport class Text extends Mark {\n  constructor(data, options = {}) {\n    const {\n      x,\n      y,\n      text = isIterable(data) && isTextual(data) ? identity : indexOf,\n      frameAnchor,\n      textAnchor = /right$/i.test(frameAnchor) ? \"end\" : /left$/i.test(frameAnchor) ? \"start\" : \"middle\",\n      lineAnchor = /^top/i.test(frameAnchor) ? \"top\" : /^bottom/i.test(frameAnchor) ? \"bottom\" : \"middle\",\n      lineHeight = 1,\n      lineWidth = Infinity,\n      textOverflow,\n      monospace,\n      fontFamily = monospace ? \"ui-monospace, monospace\" : undefined,\n      fontSize,\n      fontStyle,\n      fontVariant,\n      fontWeight,\n      rotate\n    } = options;\n    const [vrotate, crotate] = maybeNumberChannel(rotate, 0);\n    const [vfontSize, cfontSize] = maybeFontSizeChannel(fontSize);\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", optional: true},\n        y: {value: y, scale: \"y\", optional: true},\n        fontSize: {value: vfontSize, optional: true},\n        rotate: {value: numberChannel(vrotate), optional: true},\n        text: {value: text, filter: nonempty, optional: true}\n      },\n      options,\n      defaults\n    );\n    this.rotate = crotate;\n    this.textAnchor = impliedString(textAnchor, \"middle\");\n    this.lineAnchor = keyword(lineAnchor, \"lineAnchor\", [\"top\", \"middle\", \"bottom\"]);\n    this.lineHeight = +lineHeight;\n    this.lineWidth = +lineWidth;\n    this.textOverflow = maybeTextOverflow(textOverflow);\n    this.monospace = !!monospace;\n    this.fontFamily = string(fontFamily);\n    this.fontSize = cfontSize;\n    this.fontStyle = string(fontStyle);\n    this.fontVariant = string(fontVariant);\n    this.fontWeight = string(fontWeight);\n    this.frameAnchor = maybeFrameAnchor(frameAnchor);\n    if (!(this.lineWidth >= 0)) throw new Error(`invalid lineWidth: ${lineWidth}`);\n    this.splitLines = splitter(this);\n    this.clipLine = clipper(this);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x, y} = scales;\n    const {x: X, y: Y, rotate: R, text: T, title: TL, fontSize: FS} = channels;\n    const {rotate} = this;\n    const [cx, cy] = applyFrameAnchor(this, dimensions);\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyIndirectTextStyles, this, T, dimensions)\n      .call(applyTransform, this, {x: X && x, y: Y && y})\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(\"text\")\n          .call(applyDirectStyles, this)\n          .call(applyMultilineText, this, T, TL)\n          .attr(\n            \"transform\",\n            template`translate(${X ? (i) => X[i] : cx},${Y ? (i) => Y[i] : cy})${\n              R ? (i) => ` rotate(${R[i]})` : rotate ? ` rotate(${rotate})` : ``\n            }`\n          )\n          .call(applyAttr, \"font-size\", FS && ((i) => FS[i]))\n          .call(applyChannelStyles, this, channels)\n      )\n      .node();\n  }\n}\n\nexport function maybeTextOverflow(textOverflow) {\n  return textOverflow == null\n    ? null\n    : keyword(textOverflow, \"textOverflow\", [\n        \"clip\", // shorthand for clip-end\n        \"ellipsis\", //  ellipsis-end\n        \"clip-start\",\n        \"clip-end\",\n        \"ellipsis-start\",\n        \"ellipsis-middle\",\n        \"ellipsis-end\"\n      ]).replace(/^(clip|ellipsis)$/, \"$1-end\");\n}\n\nfunction applyMultilineText(selection, mark, T, TL) {\n  if (!T) return;\n  const {lineAnchor, lineHeight, textOverflow, splitLines, clipLine} = mark;\n  selection.each(function (i) {\n    const lines = splitLines(formatDefault(T[i]) ?? \"\").map(clipLine);\n    const n = lines.length;\n    const y = lineAnchor === \"top\" ? 0.71 : lineAnchor === \"bottom\" ? 1 - n : (164 - n * 100) / 200;\n    if (n > 1) {\n      let m = 0;\n      for (let i = 0; i < n; ++i) {\n        ++m;\n        if (!lines[i]) continue;\n        const tspan = this.ownerDocument.createElementNS(namespaces.svg, \"tspan\");\n        tspan.setAttribute(\"x\", 0);\n        if (i === m - 1) tspan.setAttribute(\"y\", `${(y + i) * lineHeight}em`);\n        else tspan.setAttribute(\"dy\", `${m * lineHeight}em`);\n        tspan.textContent = lines[i];\n        this.appendChild(tspan);\n        m = 0;\n      }\n    } else {\n      if (y) this.setAttribute(\"y\", `${y * lineHeight}em`);\n      this.textContent = lines[0];\n    }\n    if (textOverflow && !TL && lines[0] !== T[i]) {\n      const title = this.ownerDocument.createElementNS(namespaces.svg, \"title\");\n      title.textContent = T[i];\n      this.appendChild(title);\n    }\n  });\n}\n\nexport function text(data, {x, y, ...options} = {}) {\n  if (options.frameAnchor === undefined) [x, y] = maybeTuple(x, y);\n  return new Text(data, {...options, x, y});\n}\n\nexport function textX(data, {x = identity, ...options} = {}) {\n  return new Text(data, maybeIntervalMidY({...options, x}));\n}\n\nexport function textY(data, {y = identity, ...options} = {}) {\n  return new Text(data, maybeIntervalMidX({...options, y}));\n}\n\nexport function applyIndirectTextStyles(selection, mark, T) {\n  applyAttr(selection, \"text-anchor\", mark.textAnchor);\n  applyAttr(selection, \"font-family\", mark.fontFamily);\n  applyAttr(selection, \"font-size\", mark.fontSize);\n  applyAttr(selection, \"font-style\", mark.fontStyle);\n  applyAttr(selection, \"font-variant\", mark.fontVariant === undefined ? inferFontVariant(T) : mark.fontVariant);\n  applyAttr(selection, \"font-weight\", mark.fontWeight);\n}\n\nfunction inferFontVariant(T) {\n  return T && (isNumeric(T) || isTemporal(T)) ? \"tabular-nums\" : undefined;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\nconst fontSizes = new Set([\n  // global keywords\n  \"inherit\",\n  \"initial\",\n  \"revert\",\n  \"unset\",\n  // absolute keywords\n  \"xx-small\",\n  \"x-small\",\n  \"small\",\n  \"medium\",\n  \"large\",\n  \"x-large\",\n  \"xx-large\",\n  \"xxx-large\",\n  // relative keywords\n  \"larger\",\n  \"smaller\"\n]);\n\n// The font size may be expressed as a constant in the following forms:\n// - number in pixels\n// - string keyword: see above\n// - string <length>: e.g., \"12px\"\n// - string <percentage>: e.g., \"80%\"\n// Anything else is assumed to be a channel definition.\nfunction maybeFontSizeChannel(fontSize) {\n  if (fontSize == null || typeof fontSize === \"number\") return [undefined, fontSize];\n  if (typeof fontSize !== \"string\") return [fontSize, undefined];\n  fontSize = fontSize.trim().toLowerCase();\n  return fontSizes.has(fontSize) || /^[+-]?\\d*\\.?\\d+(e[+-]?\\d+)?(\\w*|%)$/.test(fontSize)\n    ? [undefined, fontSize]\n    : [fontSize, undefined];\n}\n\n// This is a greedy algorithm for line wrapping. It would be better to use the\n// KnuthPlass line breaking algorithm (but that would be much more complex).\n// https://en.wikipedia.org/wiki/Line_wrap_and_word_wrap\nfunction lineWrap(input, maxWidth, widthof) {\n  const lines = [];\n  let lineStart,\n    lineEnd = 0;\n  for (const [wordStart, wordEnd, required] of lineBreaks(input)) {\n    // Record the start of a line. This isnt the same as the previous lines\n    // end because we often skip spaces between lines.\n    if (lineStart === undefined) lineStart = wordStart;\n\n    // If the current line is not empty, and if adding the current word would\n    // make the line longer than the allowed width, then break the line at the\n    // previous word end.\n    if (lineEnd > lineStart && widthof(input, lineStart, wordEnd) > maxWidth) {\n      lines.push(input.slice(lineStart, lineEnd) + (input[lineEnd - 1] === softHyphen ? \"-\" : \"\"));\n      lineStart = wordStart;\n    }\n\n    // If this is a required break (a newline), emit the line and reset.\n    if (required) {\n      lines.push(input.slice(lineStart, wordEnd));\n      lineStart = undefined;\n      continue;\n    }\n\n    // Extend the current line to include the new word.\n    lineEnd = wordEnd;\n  }\n  return lines;\n}\n\n// This is a rudimentary (and U.S.-centric) algorithm for finding opportunities\n// to break lines between words. A better and far more comprehensive approach\n// would be to use the official Unicode Line Breaking Algorithm.\n// https://unicode.org/reports/tr14/\nfunction* lineBreaks(input) {\n  let i = 0,\n    j = 0;\n  const n = input.length;\n  while (j < n) {\n    let k = 1;\n    switch (input[j]) {\n      case softHyphen:\n      case \"-\": // hyphen\n        ++j;\n        yield [i, j, false];\n        i = j;\n        break;\n      case \" \":\n        yield [i, j, false];\n        while (input[++j] === \" \"); // skip multiple spaces\n        i = j;\n        break;\n      case \"\\r\":\n        if (input[j + 1] === \"\\n\") ++k; // falls through\n      case \"\\n\":\n        yield [i, j, true];\n        j += k;\n        i = j;\n        break;\n      default:\n        ++j;\n        break;\n    }\n  }\n  yield [i, j, true];\n}\n\n// Computed as round(measureText(text).width * 10) at 10px system-ui. For\n// characters that are not represented in this map, wed ideally want to use a\n// weighted average of what we expect to see. But since we dont really know\n// what that is, using e seems reasonable.\nconst defaultWidthMap = {\n  a: 56,\n  b: 63,\n  c: 57,\n  d: 63,\n  e: 58,\n  f: 37,\n  g: 62,\n  h: 60,\n  i: 26,\n  j: 26,\n  k: 55,\n  l: 26,\n  m: 88,\n  n: 60,\n  o: 60,\n  p: 62,\n  q: 62,\n  r: 39,\n  s: 54,\n  t: 38,\n  u: 60,\n  v: 55,\n  w: 79,\n  x: 54,\n  y: 55,\n  z: 55,\n  A: 69,\n  B: 67,\n  C: 73,\n  D: 74,\n  E: 61,\n  F: 58,\n  G: 76,\n  H: 75,\n  I: 28,\n  J: 55,\n  K: 67,\n  L: 58,\n  M: 89,\n  N: 75,\n  O: 78,\n  P: 65,\n  Q: 78,\n  R: 67,\n  S: 65,\n  T: 65,\n  U: 75,\n  V: 69,\n  W: 98,\n  X: 69,\n  Y: 67,\n  Z: 67,\n  0: 64,\n  1: 48,\n  2: 62,\n  3: 64,\n  4: 66,\n  5: 63,\n  6: 65,\n  7: 58,\n  8: 65,\n  9: 65,\n  \" \": 29,\n  \"!\": 32,\n  '\"': 49,\n  \"'\": 31,\n  \"(\": 39,\n  \")\": 39,\n  \",\": 31,\n  \"-\": 48,\n  \".\": 31,\n  \"/\": 32,\n  \":\": 31,\n  \";\": 31,\n  \"?\": 52,\n  \"\": 31,\n  \"\": 31,\n  \"\": 47,\n  \"\": 47,\n  \"\": 82\n};\n\n// This is a rudimentary (and U.S.-centric) algorithm for measuring the width of\n// a string based on a technique of Gregor Aisch; it assumes that individual\n// characters are laid out independently and does not implement the Unicode\n// grapheme cluster breaking algorithm. It does understand code points, though,\n// and so treats things like emoji as having the width of a lowercase e (and\n// should be equivalent to using for-of to iterate over code points, while also\n// being fast). TODO Optimize this by noting that we often re-measure characters\n// that were previously measured?\n// http://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries\n// https://exploringjs.com/impatient-js/ch_strings.html#atoms-of-text\nexport function defaultWidth(text, start = 0, end = text.length) {\n  let sum = 0;\n  for (let i = start; i < end; i = readCharacter(text, i)) {\n    sum += defaultWidthMap[text[i]] ?? (isPictographic(text, i) ? 120 : defaultWidthMap.e);\n  }\n  return sum;\n}\n\n// Even for monospaced text, we cant assume that the number of UTF-16 code\n// points (i.e., the length of a string) corresponds to the number of visible\n// characters; we still have to count graphemes. And note that pictographic\n// characters such as emojis are typically not monospaced!\nexport function monospaceWidth(text, start = 0, end = text.length) {\n  let sum = 0;\n  for (let i = start; i < end; i = readCharacter(text, i)) {\n    sum += isPictographic(text, i) ? 126 : 63;\n  }\n  return sum;\n}\n\nexport function splitter({monospace, lineWidth, textOverflow}) {\n  if (textOverflow != null || lineWidth == Infinity) return (text) => text.split(/\\r\\n?|\\n/g);\n  const widthof = monospace ? monospaceWidth : defaultWidth;\n  const maxWidth = lineWidth * 100;\n  return (text) => lineWrap(text, maxWidth, widthof);\n}\n\nexport function clipper({monospace, lineWidth, textOverflow}) {\n  if (textOverflow == null || lineWidth == Infinity) return (text) => text;\n  const widthof = monospace ? monospaceWidth : defaultWidth;\n  const maxWidth = lineWidth * 100;\n  switch (textOverflow) {\n    case \"clip-start\":\n      return (text) => clipStart(text, maxWidth, widthof, \"\");\n    case \"clip-end\":\n      return (text) => clipEnd(text, maxWidth, widthof, \"\");\n    case \"ellipsis-start\":\n      return (text) => clipStart(text, maxWidth, widthof, ellipsis);\n    case \"ellipsis-middle\":\n      return (text) => clipMiddle(text, maxWidth, widthof, ellipsis);\n    case \"ellipsis-end\":\n      return (text) => clipEnd(text, maxWidth, widthof, ellipsis);\n  }\n}\n\nexport const ellipsis = \"\";\n\n// Cuts the given text to the given width, using the specified widthof function;\n// the returned [index, error] guarantees text.slice(0, index) fits within the\n// specified width with the given error. If the text fits naturally within the\n// given width, returns [-1, 0]. If the text needs cutting, the given inset\n// specifies how much space (in the same units as width and widthof) to reserve\n// for a possible ellipsis character.\nexport function cut(text, width, widthof, inset) {\n  const I = []; // indexes of read character boundaries\n  let w = 0; // current line width\n  for (let i = 0, j = 0, n = text.length; i < n; i = j) {\n    j = readCharacter(text, i); // read the next character\n    const l = widthof(text, i, j); // current character width\n    if (w + l > width) {\n      w += inset;\n      while (w > width && i > 0) (j = i), (i = I.pop()), (w -= widthof(text, i, j)); // remove excess\n      return [i, width - w];\n    }\n    w += l;\n    I.push(i);\n  }\n  return [-1, 0];\n}\n\nexport function clipEnd(text, width, widthof, ellipsis) {\n  text = text.trim(); // ignore leading and trailing whitespace\n  const e = widthof(ellipsis);\n  const [i] = cut(text, width, widthof, e);\n  return i < 0 ? text : text.slice(0, i).trimEnd() + ellipsis;\n}\n\nexport function clipMiddle(text, width, widthof, ellipsis) {\n  text = text.trim(); // ignore leading and trailing whitespace\n  const w = widthof(text);\n  if (w <= width) return text;\n  const e = widthof(ellipsis) / 2;\n  const [i, ei] = cut(text, width / 2, widthof, e);\n  const [j] = cut(text, w - width / 2 - ei + e, widthof, -e); // TODO read spaces?\n  return j < 0 ? ellipsis : text.slice(0, i).trimEnd() + ellipsis + text.slice(readCharacter(text, j)).trimStart();\n}\n\nexport function clipStart(text, width, widthof, ellipsis) {\n  text = text.trim(); // ignore leading and trailing whitespace\n  const w = widthof(text);\n  if (w <= width) return text;\n  const e = widthof(ellipsis);\n  const [j] = cut(text, w - width + e, widthof, -e); // TODO read spaces?\n  return j < 0 ? ellipsis : ellipsis + text.slice(readCharacter(text, j)).trimStart();\n}\n\nconst reCombiner = /[\\p{Combining_Mark}\\p{Emoji_Modifier}]+/uy;\nconst rePictographic = /\\p{Extended_Pictographic}/uy;\n\n// Reads a single character element from the given text starting at the given\n// index, returning the index after the read character. Ideally, this implements\n// the Unicode text segmentation algorithm and understands grapheme cluster\n// boundaries, etc., but in practice this is only smart enough to detect UTF-16\n// surrogate pairs, combining marks, and zero-width joiner (zwj) sequences such\n// as emoji skin color modifiers. https://unicode.org/reports/tr29/\nexport function readCharacter(text, i) {\n  i += isSurrogatePair(text, i) ? 2 : 1;\n  if (isCombiner(text, i)) i = reCombiner.lastIndex;\n  if (isZeroWidthJoiner(text, i)) return readCharacter(text, i + 1);\n  return i;\n}\n\n// We avoid more expensive regex tests involving Unicode property classes by\n// first checking for the common case of 7-bit ASCII characters.\nfunction isAscii(text, i) {\n  return text.charCodeAt(i) < 0x80;\n}\n\nfunction isSurrogatePair(text, i) {\n  const hi = text.charCodeAt(i);\n  if (hi >= 0xd800 && hi < 0xdc00) {\n    const lo = text.charCodeAt(i + 1);\n    return lo >= 0xdc00 && lo < 0xe000;\n  }\n  return false;\n}\n\nfunction isZeroWidthJoiner(text, i) {\n  return text.charCodeAt(i) === 0x200d;\n}\n\nfunction isCombiner(text, i) {\n  return isAscii(text, i) ? false : ((reCombiner.lastIndex = i), reCombiner.test(text));\n}\n\nfunction isPictographic(text, i) {\n  return isAscii(text, i) ? false : ((rePictographic.lastIndex = i), rePictographic.test(text));\n}\n","import {pathRound as path} from \"d3\";\nimport {create} from \"../context.js\";\nimport {Mark} from \"../mark.js\";\nimport {maybeFrameAnchor, maybeNumberChannel, maybeTuple, keyword, identity} from \"../options.js\";\nimport {\n  applyChannelStyles,\n  applyDirectStyles,\n  applyFrameAnchor,\n  applyIndirectStyles,\n  applyTransform\n} from \"../style.js\";\nimport {template} from \"../template.js\";\n\nconst defaults = {\n  ariaLabel: \"vector\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 1.5,\n  strokeLinejoin: \"round\",\n  strokeLinecap: \"round\"\n};\n\nconst defaultRadius = 3.5;\n\n// The size of the arrowhead is proportional to its length, but we still allow\n// the relative size of the head to be controlled via the marks width option;\n// doubling the default radius will produce an arrowhead that is twice as big.\n// That said, well probably want a arrow with a fixed head size, too.\nconst wingRatio = defaultRadius * 5;\n\nconst shapeArrow = {\n  draw(context, l, r) {\n    const wing = (l * r) / wingRatio;\n    context.moveTo(0, 0);\n    context.lineTo(0, -l);\n    context.moveTo(-wing, wing - l);\n    context.lineTo(0, -l);\n    context.lineTo(wing, wing - l);\n  }\n};\n\nconst shapeSpike = {\n  draw(context, l, r) {\n    context.moveTo(-r, 0);\n    context.lineTo(0, -l);\n    context.lineTo(r, 0);\n  }\n};\n\nconst shapes = new Map([\n  [\"arrow\", shapeArrow],\n  [\"spike\", shapeSpike]\n]);\n\nfunction isShapeObject(value) {\n  return value && typeof value.draw === \"function\";\n}\n\nfunction maybeShape(shape) {\n  if (isShapeObject(shape)) return shape;\n  const value = shapes.get(`${shape}`.toLowerCase());\n  if (value) return value;\n  throw new Error(`invalid shape: ${shape}`);\n}\n\nexport class Vector extends Mark {\n  constructor(data, options = {}) {\n    const {x, y, r = defaultRadius, length, rotate, shape = shapeArrow, anchor = \"middle\", frameAnchor} = options;\n    const [vl, cl] = maybeNumberChannel(length, 12);\n    const [vr, cr] = maybeNumberChannel(rotate, 0);\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", optional: true},\n        y: {value: y, scale: \"y\", optional: true},\n        length: {value: vl, scale: \"length\", optional: true},\n        rotate: {value: vr, optional: true}\n      },\n      options,\n      defaults\n    );\n    this.r = +r;\n    this.length = cl;\n    this.rotate = cr;\n    this.shape = maybeShape(shape);\n    this.anchor = keyword(anchor, \"anchor\", [\"start\", \"middle\", \"end\"]);\n    this.frameAnchor = maybeFrameAnchor(frameAnchor);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x, y} = scales;\n    const {x: X, y: Y, length: L, rotate: A} = channels;\n    const {length, rotate, anchor, shape, r} = this;\n    const [cx, cy] = applyFrameAnchor(this, dimensions);\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {x: X && x, y: Y && y})\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(\"path\")\n          .call(applyDirectStyles, this)\n          .attr(\n            \"transform\",\n            template`translate(${X ? (i) => X[i] : cx},${Y ? (i) => Y[i] : cy})${\n              A ? (i) => ` rotate(${A[i]})` : rotate ? ` rotate(${rotate})` : ``\n            }${\n              anchor === \"start\"\n                ? ``\n                : anchor === \"end\"\n                ? L\n                  ? (i) => ` translate(0,${L[i]})`\n                  : ` translate(0,${length})`\n                : L\n                ? (i) => ` translate(0,${L[i] / 2})`\n                : ` translate(0,${length / 2})`\n            }`\n          )\n          .attr(\n            \"d\",\n            L\n              ? (i) => {\n                  const p = path();\n                  shape.draw(p, L[i], r);\n                  return p;\n                }\n              : (() => {\n                  const p = path();\n                  shape.draw(p, length, r);\n                  return p;\n                })()\n          )\n          .call(applyChannelStyles, this, channels)\n      )\n      .node();\n  }\n}\n\nexport function vector(data, options = {}) {\n  let {x, y, ...rest} = options;\n  if (options.frameAnchor === undefined) [x, y] = maybeTuple(x, y);\n  return new Vector(data, {...rest, x, y});\n}\n\nexport function vectorX(data, options = {}) {\n  const {x = identity, ...rest} = options;\n  return new Vector(data, {...rest, x});\n}\n\nexport function vectorY(data, options = {}) {\n  const {y = identity, ...rest} = options;\n  return new Vector(data, {...rest, y});\n}\n\nexport function spike(data, options = {}) {\n  const {\n    shape = shapeSpike,\n    stroke = defaults.stroke,\n    strokeWidth = 1,\n    fill = stroke,\n    fillOpacity = 0.3,\n    anchor = \"start\",\n    ...rest\n  } = options;\n  return vector(data, {...rest, shape, stroke, strokeWidth, fill, fillOpacity, anchor});\n}\n","import {InternSet, extent, format, utcFormat} from \"d3\";\nimport {formatDefault} from \"../format.js\";\nimport {marks} from \"../mark.js\";\nimport {radians} from \"../math.js\";\nimport {arrayify, constant, identity, keyword, number, range, valueof} from \"../options.js\";\nimport {isIterable, isNoneish, isTemporal, isInterval} from \"../options.js\";\nimport {maybeColorChannel, maybeNumberChannel, maybeRangeInterval} from \"../options.js\";\nimport {inferScaleOrder} from \"../scales.js\";\nimport {offset} from \"../style.js\";\nimport {generalizeTimeInterval, inferTimeFormat, intervalDuration} from \"../time.js\";\nimport {initializer} from \"../transforms/basic.js\";\nimport {warn} from \"../warnings.js\";\nimport {ruleX, ruleY} from \"./rule.js\";\nimport {text, textX, textY} from \"./text.js\";\nimport {vectorX, vectorY} from \"./vector.js\";\n\nfunction maybeData(data, options) {\n  if (arguments.length < 2 && !isIterable(data)) (options = data), (data = null);\n  if (options === undefined) options = {};\n  return [data, options];\n}\n\nfunction maybeAnchor({anchor} = {}, anchors) {\n  return anchor === undefined ? anchors[0] : keyword(anchor, \"anchor\", anchors);\n}\n\nfunction anchorY(options) {\n  return maybeAnchor(options, [\"left\", \"right\"]);\n}\n\nfunction anchorFy(options) {\n  return maybeAnchor(options, [\"right\", \"left\"]);\n}\n\nfunction anchorX(options) {\n  return maybeAnchor(options, [\"bottom\", \"top\"]);\n}\n\nfunction anchorFx(options) {\n  return maybeAnchor(options, [\"top\", \"bottom\"]);\n}\n\nexport function axisY() {\n  const [data, options] = maybeData(...arguments);\n  return axisKy(\"y\", anchorY(options), data, options);\n}\n\nexport function axisFy() {\n  const [data, options] = maybeData(...arguments);\n  return axisKy(\"fy\", anchorFy(options), data, options);\n}\n\nexport function axisX() {\n  const [data, options] = maybeData(...arguments);\n  return axisKx(\"x\", anchorX(options), data, options);\n}\n\nexport function axisFx() {\n  const [data, options] = maybeData(...arguments);\n  return axisKx(\"fx\", anchorFx(options), data, options);\n}\n\nfunction axisKy(\n  k,\n  anchor,\n  data,\n  {\n    color = \"currentColor\",\n    opacity = 1,\n    stroke = color,\n    strokeOpacity = opacity,\n    strokeWidth = 1,\n    fill = color,\n    fillOpacity = opacity,\n    textAnchor,\n    textStroke,\n    textStrokeOpacity,\n    textStrokeWidth,\n    tickSize = k === \"y\" ? 6 : 0,\n    tickPadding,\n    tickRotate,\n    x,\n    margin,\n    marginTop = margin === undefined ? 20 : margin,\n    marginRight = margin === undefined ? (anchor === \"right\" ? 40 : 0) : margin,\n    marginBottom = margin === undefined ? 20 : margin,\n    marginLeft = margin === undefined ? (anchor === \"left\" ? 40 : 0) : margin,\n    label,\n    labelAnchor,\n    labelArrow,\n    labelOffset,\n    ariaLabel = `${k}-axis`,\n    ...options\n  }\n) {\n  tickSize = number(tickSize);\n  tickPadding = number(tickPadding);\n  tickRotate = number(tickRotate);\n  if (labelAnchor !== undefined) labelAnchor = keyword(labelAnchor, \"labelAnchor\", [\"center\", \"top\", \"bottom\"]);\n  labelArrow = maybeLabelArrow(labelArrow);\n  return marks(\n    tickSize && !isNoneish(stroke)\n      ? axisTickKy(k, anchor, data, {\n          stroke,\n          strokeOpacity,\n          strokeWidth,\n          tickSize,\n          tickPadding,\n          tickRotate,\n          x,\n          ariaLabel,\n          ...options\n        })\n      : null,\n    !isNoneish(fill)\n      ? axisTextKy(k, anchor, data, {\n          fill,\n          fillOpacity,\n          stroke: textStroke,\n          strokeOpacity: textStrokeOpacity,\n          strokeWidth: textStrokeWidth,\n          textAnchor,\n          tickSize,\n          tickPadding,\n          tickRotate,\n          x,\n          marginTop,\n          marginRight,\n          marginBottom,\n          marginLeft,\n          ariaLabel,\n          ...options\n        })\n      : null,\n    !isNoneish(fill) && label !== null\n      ? text(\n          [],\n          labelOptions({fill, fillOpacity, ...options}, function (data, facets, channels, scales, dimensions) {\n            const scale = scales[k];\n            const {marginTop, marginRight, marginBottom, marginLeft} = (k === \"y\" && dimensions.inset) || dimensions;\n            const cla = labelAnchor ?? (scale.bandwidth ? \"center\" : \"top\");\n            const clo = labelOffset ?? (anchor === \"right\" ? marginRight : marginLeft) - 3;\n            if (cla === \"center\") {\n              this.textAnchor = undefined; // middle\n              this.lineAnchor = anchor === \"right\" ? \"bottom\" : \"top\";\n              this.frameAnchor = anchor;\n              this.rotate = -90;\n            } else {\n              this.textAnchor = anchor === \"right\" ? \"end\" : \"start\";\n              this.lineAnchor = cla;\n              this.frameAnchor = `${cla}-${anchor}`;\n              this.rotate = 0;\n            }\n            this.dy = cla === \"top\" ? 3 - marginTop : cla === \"bottom\" ? marginBottom - 3 : 0;\n            this.dx = anchor === \"right\" ? clo : -clo;\n            this.ariaLabel = `${ariaLabel} label`;\n            return {\n              facets: [[0]],\n              channels: {text: {value: [formatAxisLabel(k, scale, {anchor, label, labelAnchor: cla, labelArrow})]}}\n            };\n          })\n        )\n      : null\n  );\n}\n\nfunction axisKx(\n  k,\n  anchor,\n  data,\n  {\n    color = \"currentColor\",\n    opacity = 1,\n    stroke = color,\n    strokeOpacity = opacity,\n    strokeWidth = 1,\n    fill = color,\n    fillOpacity = opacity,\n    textAnchor,\n    textStroke,\n    textStrokeOpacity,\n    textStrokeWidth,\n    tickSize = k === \"x\" ? 6 : 0,\n    tickPadding,\n    tickRotate,\n    y,\n    margin,\n    marginTop = margin === undefined ? (anchor === \"top\" ? 30 : 0) : margin,\n    marginRight = margin === undefined ? 20 : margin,\n    marginBottom = margin === undefined ? (anchor === \"bottom\" ? 30 : 0) : margin,\n    marginLeft = margin === undefined ? 20 : margin,\n    label,\n    labelAnchor,\n    labelArrow,\n    labelOffset,\n    ariaLabel = `${k}-axis`,\n    ...options\n  }\n) {\n  tickSize = number(tickSize);\n  tickPadding = number(tickPadding);\n  tickRotate = number(tickRotate);\n  if (labelAnchor !== undefined) labelAnchor = keyword(labelAnchor, \"labelAnchor\", [\"center\", \"left\", \"right\"]);\n  labelArrow = maybeLabelArrow(labelArrow);\n  return marks(\n    tickSize && !isNoneish(stroke)\n      ? axisTickKx(k, anchor, data, {\n          stroke,\n          strokeOpacity,\n          strokeWidth,\n          tickSize,\n          tickPadding,\n          tickRotate,\n          y,\n          ariaLabel,\n          ...options\n        })\n      : null,\n    !isNoneish(fill)\n      ? axisTextKx(k, anchor, data, {\n          fill,\n          fillOpacity,\n          stroke: textStroke,\n          strokeOpacity: textStrokeOpacity,\n          strokeWidth: textStrokeWidth,\n          textAnchor,\n          tickSize,\n          tickPadding,\n          tickRotate,\n          y,\n          marginTop,\n          marginRight,\n          marginBottom,\n          marginLeft,\n          ariaLabel,\n          ...options\n        })\n      : null,\n    !isNoneish(fill) && label !== null\n      ? text(\n          [],\n          labelOptions({fill, fillOpacity, ...options}, function (data, facets, channels, scales, dimensions) {\n            const scale = scales[k];\n            const {marginTop, marginRight, marginBottom, marginLeft} = (k === \"x\" && dimensions.inset) || dimensions;\n            const cla = labelAnchor ?? (scale.bandwidth ? \"center\" : \"right\");\n            const clo = labelOffset ?? (anchor === \"top\" ? marginTop : marginBottom) - 3;\n            if (cla === \"center\") {\n              this.frameAnchor = anchor;\n              this.textAnchor = undefined; // middle\n            } else {\n              this.frameAnchor = `${anchor}-${cla}`;\n              this.textAnchor = cla === \"right\" ? \"end\" : \"start\";\n            }\n            this.lineAnchor = anchor;\n            this.dy = anchor === \"top\" ? -clo : clo;\n            this.dx = cla === \"right\" ? marginRight - 3 : cla === \"left\" ? 3 - marginLeft : 0;\n            this.ariaLabel = `${ariaLabel} label`;\n            return {\n              facets: [[0]],\n              channels: {text: {value: [formatAxisLabel(k, scale, {anchor, label, labelAnchor: cla, labelArrow})]}}\n            };\n          })\n        )\n      : null\n  );\n}\n\nfunction axisTickKy(\n  k,\n  anchor,\n  data,\n  {\n    strokeWidth = 1,\n    strokeLinecap = null,\n    strokeLinejoin = null,\n    facetAnchor = anchor + (k === \"y\" ? \"-empty\" : \"\"),\n    frameAnchor = anchor,\n    tickSize,\n    inset = 0,\n    insetLeft = inset,\n    insetRight = inset,\n    dx = 0,\n    y = k === \"y\" ? undefined : null,\n    ariaLabel,\n    ...options\n  }\n) {\n  return axisMark(\n    vectorY,\n    k,\n    data,\n    {\n      ariaLabel: `${ariaLabel} tick`,\n      ariaHidden: true\n    },\n    {\n      strokeWidth,\n      strokeLinecap,\n      strokeLinejoin,\n      facetAnchor,\n      frameAnchor,\n      y,\n      ...options,\n      dx: anchor === \"left\" ? +dx - offset + +insetLeft : +dx + offset - insetRight,\n      anchor: \"start\",\n      length: tickSize,\n      shape: anchor === \"left\" ? shapeTickLeft : shapeTickRight\n    }\n  );\n}\n\nfunction axisTickKx(\n  k,\n  anchor,\n  data,\n  {\n    strokeWidth = 1,\n    strokeLinecap = null,\n    strokeLinejoin = null,\n    facetAnchor = anchor + (k === \"x\" ? \"-empty\" : \"\"),\n    frameAnchor = anchor,\n    tickSize,\n    inset = 0,\n    insetTop = inset,\n    insetBottom = inset,\n    dy = 0,\n    x = k === \"x\" ? undefined : null,\n    ariaLabel,\n    ...options\n  }\n) {\n  return axisMark(\n    vectorX,\n    k,\n    data,\n    {\n      ariaLabel: `${ariaLabel} tick`,\n      ariaHidden: true\n    },\n    {\n      strokeWidth,\n      strokeLinejoin,\n      strokeLinecap,\n      facetAnchor,\n      frameAnchor,\n      x,\n      ...options,\n      dy: anchor === \"bottom\" ? +dy - offset - insetBottom : +dy + offset + +insetTop,\n      anchor: \"start\",\n      length: tickSize,\n      shape: anchor === \"bottom\" ? shapeTickBottom : shapeTickTop\n    }\n  );\n}\n\nfunction axisTextKy(\n  k,\n  anchor,\n  data,\n  {\n    facetAnchor = anchor + (k === \"y\" ? \"-empty\" : \"\"),\n    frameAnchor = anchor,\n    tickSize,\n    tickRotate = 0,\n    tickPadding = Math.max(3, 9 - tickSize) + (Math.abs(tickRotate) > 60 ? 4 * Math.cos(tickRotate * radians) : 0),\n    text,\n    textAnchor = Math.abs(tickRotate) > 60 ? \"middle\" : anchor === \"left\" ? \"end\" : \"start\",\n    lineAnchor = tickRotate > 60 ? \"top\" : tickRotate < -60 ? \"bottom\" : \"middle\",\n    fontVariant,\n    inset = 0,\n    insetLeft = inset,\n    insetRight = inset,\n    dx = 0,\n    ariaLabel,\n    y = k === \"y\" ? undefined : null,\n    ...options\n  }\n) {\n  return axisMark(\n    textY,\n    k,\n    data,\n    {ariaLabel: `${ariaLabel} tick label`},\n    {\n      facetAnchor,\n      frameAnchor,\n      text,\n      textAnchor,\n      lineAnchor,\n      fontVariant,\n      rotate: tickRotate,\n      y,\n      ...options,\n      dx: anchor === \"left\" ? +dx - tickSize - tickPadding + +insetLeft : +dx + +tickSize + +tickPadding - insetRight\n    },\n    function (scale, data, ticks, tickFormat, channels) {\n      if (fontVariant === undefined) this.fontVariant = inferFontVariant(scale);\n      if (text === undefined) channels.text = inferTextChannel(scale, data, ticks, tickFormat, anchor);\n    }\n  );\n}\n\nfunction axisTextKx(\n  k,\n  anchor,\n  data,\n  {\n    facetAnchor = anchor + (k === \"x\" ? \"-empty\" : \"\"),\n    frameAnchor = anchor,\n    tickSize,\n    tickRotate = 0,\n    tickPadding = Math.max(3, 9 - tickSize) + (Math.abs(tickRotate) >= 10 ? 4 * Math.cos(tickRotate * radians) : 0),\n    text,\n    textAnchor = Math.abs(tickRotate) >= 10 ? ((tickRotate < 0) ^ (anchor === \"bottom\") ? \"start\" : \"end\") : \"middle\",\n    lineAnchor = Math.abs(tickRotate) >= 10 ? \"middle\" : anchor === \"bottom\" ? \"top\" : \"bottom\",\n    fontVariant,\n    inset = 0,\n    insetTop = inset,\n    insetBottom = inset,\n    dy = 0,\n    x = k === \"x\" ? undefined : null,\n    ariaLabel,\n    ...options\n  }\n) {\n  return axisMark(\n    textX,\n    k,\n    data,\n    {ariaLabel: `${ariaLabel} tick label`},\n    {\n      facetAnchor,\n      frameAnchor,\n      text: text === undefined ? null : text,\n      textAnchor,\n      lineAnchor,\n      fontVariant,\n      rotate: tickRotate,\n      x,\n      ...options,\n      dy: anchor === \"bottom\" ? +dy + +tickSize + +tickPadding - insetBottom : +dy - tickSize - tickPadding + +insetTop\n    },\n    function (scale, data, ticks, tickFormat, channels) {\n      if (fontVariant === undefined) this.fontVariant = inferFontVariant(scale);\n      if (text === undefined) channels.text = inferTextChannel(scale, data, ticks, tickFormat, anchor);\n    }\n  );\n}\n\nexport function gridY() {\n  const [data, options] = maybeData(...arguments);\n  return gridKy(\"y\", anchorY(options), data, options);\n}\n\nexport function gridFy() {\n  const [data, options] = maybeData(...arguments);\n  return gridKy(\"fy\", anchorFy(options), data, options);\n}\n\nexport function gridX() {\n  const [data, options] = maybeData(...arguments);\n  return gridKx(\"x\", anchorX(options), data, options);\n}\n\nexport function gridFx() {\n  const [data, options] = maybeData(...arguments);\n  return gridKx(\"fx\", anchorFx(options), data, options);\n}\n\nfunction gridKy(\n  k,\n  anchor,\n  data,\n  {\n    y = k === \"y\" ? undefined : null,\n    x = null,\n    x1 = anchor === \"left\" ? x : null,\n    x2 = anchor === \"right\" ? x : null,\n    ariaLabel = `${k}-grid`,\n    ariaHidden = true,\n    ...options\n  }\n) {\n  return axisMark(ruleY, k, data, {ariaLabel, ariaHidden}, {y, x1, x2, ...gridDefaults(options)});\n}\n\nfunction gridKx(\n  k,\n  anchor,\n  data,\n  {\n    x = k === \"x\" ? undefined : null,\n    y = null,\n    y1 = anchor === \"top\" ? y : null,\n    y2 = anchor === \"bottom\" ? y : null,\n    ariaLabel = `${k}-grid`,\n    ariaHidden = true,\n    ...options\n  }\n) {\n  return axisMark(ruleX, k, data, {ariaLabel, ariaHidden}, {x, y1, y2, ...gridDefaults(options)});\n}\n\nfunction gridDefaults({\n  color = \"currentColor\",\n  opacity = 0.1,\n  stroke = color,\n  strokeOpacity = opacity,\n  strokeWidth = 1,\n  ...options\n}) {\n  return {stroke, strokeOpacity, strokeWidth, ...options};\n}\n\nfunction labelOptions(\n  {\n    fill,\n    fillOpacity,\n    fontFamily,\n    fontSize,\n    fontStyle,\n    fontVariant,\n    fontWeight,\n    monospace,\n    pointerEvents,\n    shapeRendering,\n    clip = false\n  },\n  initializer\n) {\n  // Only propagate these options if constant.\n  [, fill] = maybeColorChannel(fill);\n  [, fillOpacity] = maybeNumberChannel(fillOpacity);\n  return {\n    facet: \"super\",\n    x: null,\n    y: null,\n    fill,\n    fillOpacity,\n    fontFamily,\n    fontSize,\n    fontStyle,\n    fontVariant,\n    fontWeight,\n    monospace,\n    pointerEvents,\n    shapeRendering,\n    clip,\n    initializer\n  };\n}\n\nfunction axisMark(mark, k, data, properties, options, initialize) {\n  let channels;\n\n  function axisInitializer(data, facets, _channels, scales, dimensions, context) {\n    const initializeFacets = data == null && (k === \"fx\" || k === \"fy\");\n    const {[k]: scale} = scales;\n    if (!scale) throw new Error(`missing scale: ${k}`);\n    const domain = scale.domain();\n    let {interval, ticks, tickFormat, tickSpacing = k === \"x\" ? 80 : 35} = options;\n    // For a scale with a temporal domain, also allow the ticks to be specified\n    // as a string which is promoted to a time interval. In the case of ordinal\n    // scales, the interval is interpreted as UTC.\n    if (typeof ticks === \"string\" && hasTemporalDomain(scale)) (interval = ticks), (ticks = undefined);\n    // The interval axis option is an alternative method of specifying ticks;\n    // for example, for a numeric scale, ticks = 5 means about 5 ticks whereas\n    // interval = 5 means ticks every 5 units. (This is not to be confused\n    // with the interval scale option, which affects the scales behavior!)\n    // Lastly use the tickSpacing option to infer the desired tick count.\n    if (ticks === undefined) ticks = maybeRangeInterval(interval, scale.type) ?? inferTickCount(scale, tickSpacing);\n    if (data == null) {\n      if (isIterable(ticks)) {\n        // Use explicit ticks, if specified.\n        data = arrayify(ticks);\n      } else if (isInterval(ticks)) {\n        // Use the tick interval, if specified.\n        data = inclusiveRange(ticks, ...extent(domain));\n      } else if (scale.interval) {\n        // If the scale interval is a standard time interval such as \"day\", we\n        // may be able to generalize the scale interval it to a larger aligned\n        // time interval to create the desired number of ticks.\n        let interval = scale.interval;\n        if (scale.ticks) {\n          const [min, max] = extent(domain);\n          const n = (max - min) / interval[intervalDuration]; // current tick count\n          // We dont explicitly check that given interval is a time interval;\n          // in that case the generalized interval will be undefined, just like\n          // a nonstandard interval. TODO Generalize integer intervals, too.\n          interval = generalizeTimeInterval(interval, n / ticks) ?? interval;\n          data = inclusiveRange(interval, min, max);\n        } else {\n          data = domain;\n          const n = data.length; // current tick count\n          interval = generalizeTimeInterval(interval, n / ticks) ?? interval;\n          if (interval !== scale.interval) data = inclusiveRange(interval, ...extent(data));\n        }\n        if (interval === scale.interval) {\n          // If we werent able to generalize the scales interval, compute the\n          // positive number n such that taking every nth value from the scales\n          // domain produces as close as possible to the desired number of\n          // ticks. For example, if the domain has 100 values and 5 ticks are\n          // desired, n = 20.\n          const n = Math.round(data.length / ticks);\n          if (n > 1) data = data.filter((d, i) => i % n === 0);\n        }\n      } else if (scale.ticks) {\n        data = scale.ticks(ticks);\n      } else {\n        // For ordinal scales, the domain will already be generated using the\n        // scales interval, if any.\n        data = domain;\n      }\n      if (!scale.ticks && data.length && data !== domain) {\n        // For ordinal scales, intersect the ticks with the scale domain since\n        // the scale is only defined on its domain. If all of the ticks are\n        // removed, then warn that the ticks and scale domain may be misaligned\n        // (e.g., \"year\" ticks and \"4 weeks\" interval).\n        const domainSet = new InternSet(domain);\n        data = data.filter((d) => domainSet.has(d));\n        if (!data.length) warn(`Warning: the ${k}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`); // prettier-ignore\n      }\n      if (k === \"y\" || k === \"x\") {\n        facets = [range(data)];\n      } else {\n        channels[k] = {scale: k, value: identity};\n      }\n    }\n    initialize?.call(this, scale, data, ticks, tickFormat, channels);\n    const initializedChannels = Object.fromEntries(\n      Object.entries(channels).map(([name, channel]) => {\n        return [name, {...channel, value: valueof(data, channel.value)}];\n      })\n    );\n    if (initializeFacets) facets = context.filterFacets(data, initializedChannels);\n    return {data, facets, channels: initializedChannels};\n  }\n\n  // Apply any basic initializers after the axis initializer computes the ticks.\n  const basicInitializer = initializer(options).initializer;\n  const m = mark(data, initializer({...options, initializer: axisInitializer}, basicInitializer));\n  if (data == null) {\n    channels = m.channels;\n    m.channels = {};\n  } else {\n    channels = {};\n  }\n  if (properties !== undefined) Object.assign(m, properties);\n  if (m.clip === undefined) m.clip = false; // dont clip axes by default\n  return m;\n}\n\nfunction inferTickCount(scale, tickSpacing) {\n  const [min, max] = extent(scale.range());\n  return (max - min) / tickSpacing;\n}\n\nfunction inferTextChannel(scale, data, ticks, tickFormat, anchor) {\n  return {value: inferTickFormat(scale, data, ticks, tickFormat, anchor)};\n}\n\n// D3s ordinal scales simply use toString by default, but if the ordinal scale\n// domain (or ticks) are numbers or dates (say because were applying a time\n// interval to the ordinal scale), we want Plots default formatter. And for\n// time ticks, we want to use the multi-line time format (e.g., Jan 26) if\n// possible, or the default ISO format (2014-01-26). TODO We need a better way\n// to infer whether the ordinal scale is UTC or local time.\nexport function inferTickFormat(scale, data, ticks, tickFormat, anchor) {\n  return typeof tickFormat === \"function\" && !(scale.type === \"log\" && scale.tickFormat)\n    ? tickFormat\n    : tickFormat === undefined && data && isTemporal(data)\n    ? inferTimeFormat(scale.type, data, anchor) ?? formatDefault\n    : scale.tickFormat\n    ? scale.tickFormat(typeof ticks === \"number\" ? ticks : null, tickFormat)\n    : typeof tickFormat === \"string\" && scale.domain().length > 0\n    ? (isTemporal(scale.domain()) ? utcFormat : format)(tickFormat)\n    : tickFormat === undefined\n    ? formatDefault\n    : constant(tickFormat);\n}\n\nfunction inclusiveRange(interval, min, max) {\n  return interval.range(min, interval.offset(interval.floor(max)));\n}\n\nconst shapeTickBottom = {\n  draw(context, l) {\n    context.moveTo(0, 0);\n    context.lineTo(0, l);\n  }\n};\n\nconst shapeTickTop = {\n  draw(context, l) {\n    context.moveTo(0, 0);\n    context.lineTo(0, -l);\n  }\n};\n\nconst shapeTickLeft = {\n  draw(context, l) {\n    context.moveTo(0, 0);\n    context.lineTo(-l, 0);\n  }\n};\n\nconst shapeTickRight = {\n  draw(context, l) {\n    context.moveTo(0, 0);\n    context.lineTo(l, 0);\n  }\n};\n\n// TODO Unify this with the other inferFontVariant; here we only have a scale\n// function rather than a scale descriptor.\nfunction inferFontVariant(scale) {\n  return scale.bandwidth && !scale.interval ? undefined : \"tabular-nums\";\n}\n\n// Takes the scale label, and if this is not an ordinal scale and the label was\n// inferred from an associated channel, adds an orientation-appropriate arrow.\nfunction formatAxisLabel(k, scale, {anchor, label = scale.label, labelAnchor, labelArrow} = {}) {\n  if (label == null || (label.inferred && hasTemporalDomain(scale) && /^(date|time|year)$/i.test(label))) return;\n  label = String(label); // coerce to a string after checking if inferred\n  if (labelArrow === \"auto\") labelArrow = (!scale.bandwidth || scale.interval) && !/[]/.test(label);\n  if (!labelArrow) return label;\n  if (labelArrow === true) {\n    const order = inferScaleOrder(scale);\n    if (order)\n      labelArrow =\n        /x$/.test(k) || labelAnchor === \"center\"\n          ? /x$/.test(k) === order < 0\n            ? \"left\"\n            : \"right\"\n          : order < 0\n          ? \"up\"\n          : \"down\";\n  }\n  switch (labelArrow) {\n    case \"left\":\n      return ` ${label}`;\n    case \"right\":\n      return `${label} `;\n    case \"up\":\n      return anchor === \"right\" ? `${label} ` : ` ${label}`;\n    case \"down\":\n      return anchor === \"right\" ? `${label} ` : ` ${label}`;\n  }\n  return label;\n}\n\nfunction maybeLabelArrow(labelArrow = \"auto\") {\n  return isNoneish(labelArrow)\n    ? false\n    : typeof labelArrow === \"boolean\"\n    ? labelArrow\n    : keyword(labelArrow, \"labelArrow\", [\"auto\", \"up\", \"right\", \"down\", \"left\"]);\n}\n\nfunction hasTemporalDomain(scale) {\n  return isTemporal(scale.domain());\n}\n","import {pathRound as path} from \"d3\";\nimport {inferFontVariant} from \"../axes.js\";\nimport {create, createContext} from \"../context.js\";\nimport {isNoneish, maybeColorChannel, maybeNumberChannel} from \"../options.js\";\nimport {isOrdinalScale, isThresholdScale} from \"../scales.js\";\nimport {applyInlineStyles, impliedString, maybeClassName} from \"../style.js\";\nimport {inferTickFormat} from \"../marks/axis.js\";\n\nfunction maybeScale(scale, key) {\n  if (key == null) return key;\n  const s = scale(key);\n  if (!s) throw new Error(`scale not found: ${key}`);\n  return s;\n}\n\nexport function legendSwatches(color, {opacity, ...options} = {}) {\n  if (!isOrdinalScale(color) && !isThresholdScale(color))\n    throw new Error(`swatches legend requires ordinal or threshold color scale (not ${color.type})`);\n  return legendItems(color, options, (selection, scale, width, height) =>\n    selection\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .attr(\"fill\", scale.scale)\n      .attr(\"fill-opacity\", maybeNumberChannel(opacity)[1])\n      .append(\"rect\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", \"100%\")\n  );\n}\n\nexport function legendSymbols(\n  symbol,\n  {\n    fill = symbol.hint?.fill !== undefined ? symbol.hint.fill : \"none\",\n    fillOpacity = 1,\n    stroke = symbol.hint?.stroke !== undefined ? symbol.hint.stroke : isNoneish(fill) ? \"currentColor\" : \"none\",\n    strokeOpacity = 1,\n    strokeWidth = 1.5,\n    r = 4.5,\n    ...options\n  } = {},\n  scale\n) {\n  const [vf, cf] = maybeColorChannel(fill);\n  const [vs, cs] = maybeColorChannel(stroke);\n  const sf = maybeScale(scale, vf);\n  const ss = maybeScale(scale, vs);\n  const size = r * r * Math.PI;\n  fillOpacity = maybeNumberChannel(fillOpacity)[1];\n  strokeOpacity = maybeNumberChannel(strokeOpacity)[1];\n  strokeWidth = maybeNumberChannel(strokeWidth)[1];\n  return legendItems(symbol, options, (selection, scale, width, height) =>\n    selection\n      .append(\"svg\")\n      .attr(\"viewBox\", \"-8 -8 16 16\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .attr(\"fill\", vf === \"color\" ? (d) => sf.scale(d) : cf)\n      .attr(\"fill-opacity\", fillOpacity)\n      .attr(\"stroke\", vs === \"color\" ? (d) => ss.scale(d) : cs)\n      .attr(\"stroke-opacity\", strokeOpacity)\n      .attr(\"stroke-width\", strokeWidth)\n      .append(\"path\")\n      .attr(\"d\", (d) => {\n        const p = path();\n        symbol.scale(d).draw(p, size);\n        return p;\n      })\n  );\n}\n\nfunction legendItems(scale, options = {}, swatch) {\n  let {\n    columns,\n    tickFormat,\n    fontVariant = inferFontVariant(scale),\n    // TODO label,\n    swatchSize = 15,\n    swatchWidth = swatchSize,\n    swatchHeight = swatchSize,\n    marginLeft = 0,\n    className,\n    style,\n    width\n  } = options;\n  const context = createContext(options);\n  className = maybeClassName(className);\n  tickFormat = inferTickFormat(scale.scale, scale.domain, undefined, tickFormat);\n\n  const swatches = create(\"div\", context).attr(\n    \"class\",\n    `${className}-swatches ${className}-swatches-${columns != null ? \"columns\" : \"wrap\"}`\n  );\n\n  let extraStyle;\n\n  if (columns != null) {\n    extraStyle = `:where(.${className}-swatches-columns .${className}-swatch) {\n  display: flex;\n  align-items: center;\n  break-inside: avoid;\n  padding-bottom: 1px;\n}\n:where(.${className}-swatches-columns .${className}-swatch::before) {\n  flex-shrink: 0;\n}\n:where(.${className}-swatches-columns .${className}-swatch-label) {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}`;\n\n    swatches\n      .style(\"columns\", columns)\n      .selectAll()\n      .data(scale.domain)\n      .enter()\n      .append(\"div\")\n      .attr(\"class\", `${className}-swatch`)\n      .call(swatch, scale, swatchWidth, swatchHeight)\n      .call((item) =>\n        item.append(\"div\").attr(\"class\", `${className}-swatch-label`).attr(\"title\", tickFormat).text(tickFormat)\n      );\n  } else {\n    extraStyle = `:where(.${className}-swatches-wrap) {\n  display: flex;\n  align-items: center;\n  min-height: 33px;\n  flex-wrap: wrap;\n}\n:where(.${className}-swatches-wrap .${className}-swatch) {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 1em;\n}`;\n\n    swatches\n      .selectAll()\n      .data(scale.domain)\n      .enter()\n      .append(\"span\")\n      .attr(\"class\", `${className}-swatch`)\n      .call(swatch, scale, swatchWidth, swatchHeight)\n      .append(function () {\n        return this.ownerDocument.createTextNode(tickFormat.apply(this, arguments));\n      });\n  }\n\n  return swatches\n    .call((div) =>\n      div.insert(\"style\", \"*\").text(\n        `:where(.${className}-swatches) {\n  font-family: system-ui, sans-serif;\n  font-size: 10px;\n  margin-bottom: 0.5em;\n}\n:where(.${className}-swatch > svg) {\n  margin-right: 0.5em;\n  overflow: visible;\n}\n${extraStyle}`\n      )\n    )\n    .style(\"margin-left\", marginLeft ? `${+marginLeft}px` : null)\n    .style(\"width\", width === undefined ? null : `${+width}px`)\n    .style(\"font-variant\", impliedString(fontVariant, \"normal\"))\n    .call(applyInlineStyles, style)\n    .node();\n}\n","import {rgb} from \"d3\";\nimport {createContext} from \"./context.js\";\nimport {legendRamp} from \"./legends/ramp.js\";\nimport {legendSwatches, legendSymbols} from \"./legends/swatches.js\";\nimport {inherit, isScaleOptions} from \"./options.js\";\nimport {normalizeScale} from \"./scales.js\";\n\nconst legendRegistry = new Map([\n  [\"symbol\", legendSymbols],\n  [\"color\", legendColor],\n  [\"opacity\", legendOpacity]\n]);\n\nexport function legend(options = {}) {\n  for (const [key, value] of legendRegistry) {\n    const scale = options[key];\n    if (isScaleOptions(scale)) {\n      // e.g., ignore {color: \"red\"}\n      const context = createContext(options);\n      let hint;\n      // For symbol legends, pass a hint to the symbol scale.\n      if (key === \"symbol\") {\n        const {fill, stroke = fill === undefined && isScaleOptions(options.color) ? \"color\" : undefined} = options;\n        hint = {fill, stroke};\n      }\n      return value(normalizeScale(key, scale, hint), legendOptions(context, scale, options), (key) =>\n        isScaleOptions(options[key]) ? normalizeScale(key, options[key]) : null\n      );\n    }\n  }\n  throw new Error(\"unknown legend type; no scale found\");\n}\n\nexport function exposeLegends(scales, context, defaults = {}) {\n  return (key, options) => {\n    if (!legendRegistry.has(key)) throw new Error(`unknown legend type: ${key}`);\n    if (!(key in scales)) return;\n    return legendRegistry.get(key)(scales[key], legendOptions(context, defaults[key], options), (key) => scales[key]);\n  };\n}\n\nfunction legendOptions({className, ...context}, {label, ticks, tickFormat} = {}, options) {\n  return inherit(options, {className, ...context}, {label, ticks, tickFormat});\n}\n\nfunction legendColor(color, {legend = true, ...options}) {\n  if (legend === true) legend = color.type === \"ordinal\" ? \"swatches\" : \"ramp\";\n  if (color.domain === undefined) return; // no identity legend\n  switch (`${legend}`.toLowerCase()) {\n    case \"swatches\":\n      return legendSwatches(color, options);\n    case \"ramp\":\n      return legendRamp(color, options);\n    default:\n      throw new Error(`unknown legend type: ${legend}`);\n  }\n}\n\nfunction legendOpacity({type, interpolate, ...scale}, {legend = true, color = rgb(0, 0, 0), ...options}) {\n  if (!interpolate) throw new Error(`${type} opacity scales are not supported`);\n  if (legend === true) legend = \"ramp\";\n  if (`${legend}`.toLowerCase() !== \"ramp\") throw new Error(`${legend} opacity legends are not supported`);\n  return legendColor({type, ...scale, interpolate: interpolateOpacity(color)}, {legend, ...options});\n}\n\nfunction interpolateOpacity(color) {\n  const {r, g, b} = rgb(color) || rgb(0, 0, 0); // treat invalid color as black\n  return (t) => `rgba(${r},${g},${b},${t})`;\n}\n\nexport function createLegends(scales, context, options) {\n  const legends = [];\n  for (const [key, value] of legendRegistry) {\n    const o = options[key];\n    if (o?.legend && key in scales) {\n      const legend = value(scales[key], legendOptions(context, scales[key], o), (key) => scales[key]);\n      if (legend != null) legends.push(legend);\n    }\n  }\n  return legends;\n}\n","import {hasX, hasY, identity} from \"../options.js\";\n\nexport function maybeIdentityX(options = {}, k = \"x\") {\n  return hasX(options) ? options : {...options, [k]: identity};\n}\n\nexport function maybeIdentityY(options = {}, k = \"y\") {\n  return hasY(options) ? options : {...options, [k]: identity};\n}\n","import {lengthof, reindex, slice} from \"../options.js\";\n\nexport function exclusiveFacets(data, facets) {\n  if (facets.length === 1) return {data, facets}; // only one facet; trivially exclusive\n\n  const n = lengthof(data);\n  const O = new Uint8Array(n);\n  let overlaps = 0;\n\n  // Count the number of overlapping indexes across facets.\n  for (const facet of facets) {\n    for (const i of facet) {\n      if (O[i]) ++overlaps;\n      O[i] = 1;\n    }\n  }\n\n  // Do nothing if the facets are already exclusive.\n  if (overlaps === 0) return {data, facets}; // facets are exclusive\n\n  // For each overlapping index (duplicate), assign a new unique index at the\n  // end of the existing array, duplicating the datum. For example, [[0, 1, 2],\n  // [2, 1, 3]] would become [[0, 1, 2], [4, 5, 3]]. Also attach a reindex to\n  // the data to preserve the association of channel values specified as arrays.\n  data = slice(data);\n  const R = (data[reindex] = new Uint32Array(n + overlaps));\n  facets = facets.map((facet) => slice(facet, Uint32Array));\n  let j = n;\n  O.fill(0);\n  for (const facet of facets) {\n    for (let k = 0, m = facet.length; k < m; ++k) {\n      const i = facet[k];\n      if (O[i]) (facet[k] = j), (data[j] = data[i]), (R[j] = i), ++j;\n      else R[i] = i;\n      O[i] = 1;\n    }\n  }\n\n  return {data, facets};\n}\n","import {InternMap, cumsum, greatest, group, groupSort, max, min, rollup, sum} from \"d3\";\nimport {ascendingDefined, descendingDefined} from \"../defined.js\";\nimport {withTip} from \"../mark.js\";\nimport {maybeApplyInterval, maybeColumn, maybeZ, maybeZero} from \"../options.js\";\nimport {column, field, isArray, lengthof, mid, one, range, valueof} from \"../options.js\";\nimport {basic} from \"./basic.js\";\nimport {exclusiveFacets} from \"./exclusiveFacets.js\";\n\nexport function stackX(stackOptions = {}, options = {}) {\n  if (arguments.length === 1) [stackOptions, options] = mergeOptions(stackOptions);\n  const {y1, y = y1, x, ...rest} = options; // note: consumes x!\n  const [transform, Y, x1, x2] = stack(y, x, \"y\", \"x\", stackOptions, rest);\n  return {...transform, y1, y: Y, x1, x2, x: mid(x1, x2)};\n}\n\nexport function stackX1(stackOptions = {}, options = {}) {\n  if (arguments.length === 1) [stackOptions, options] = mergeOptions(stackOptions);\n  const {y1, y = y1, x} = options;\n  const [transform, Y, X] = stack(y, x, \"y\", \"x\", stackOptions, options);\n  return {...transform, y1, y: Y, x: X};\n}\n\nexport function stackX2(stackOptions = {}, options = {}) {\n  if (arguments.length === 1) [stackOptions, options] = mergeOptions(stackOptions);\n  const {y1, y = y1, x} = options;\n  const [transform, Y, , X] = stack(y, x, \"y\", \"x\", stackOptions, options);\n  return {...transform, y1, y: Y, x: X};\n}\n\nexport function stackY(stackOptions = {}, options = {}) {\n  if (arguments.length === 1) [stackOptions, options] = mergeOptions(stackOptions);\n  const {x1, x = x1, y, ...rest} = options; // note: consumes y!\n  const [transform, X, y1, y2] = stack(x, y, \"x\", \"y\", stackOptions, rest);\n  return {...transform, x1, x: X, y1, y2, y: mid(y1, y2)};\n}\n\nexport function stackY1(stackOptions = {}, options = {}) {\n  if (arguments.length === 1) [stackOptions, options] = mergeOptions(stackOptions);\n  const {x1, x = x1, y} = options;\n  const [transform, X, Y] = stack(x, y, \"x\", \"y\", stackOptions, options);\n  return {...transform, x1, x: X, y: Y};\n}\n\nexport function stackY2(stackOptions = {}, options = {}) {\n  if (arguments.length === 1) [stackOptions, options] = mergeOptions(stackOptions);\n  const {x1, x = x1, y} = options;\n  const [transform, X, , Y] = stack(x, y, \"x\", \"y\", stackOptions, options);\n  return {...transform, x1, x: X, y: Y};\n}\n\nexport function maybeStackX({x, x1, x2, ...options} = {}) {\n  options = withTip(options, \"y\");\n  if (x1 === undefined && x2 === undefined) return stackX({x, ...options});\n  [x1, x2] = maybeZero(x, x1, x2);\n  return {...options, x1, x2};\n}\n\nexport function maybeStackY({y, y1, y2, ...options} = {}) {\n  options = withTip(options, \"x\");\n  if (y1 === undefined && y2 === undefined) return stackY({y, ...options});\n  [y1, y2] = maybeZero(y, y1, y2);\n  return {...options, y1, y2};\n}\n\n// The reverse option is ambiguous: it is both a stack option and a basic\n// transform. If only one options object is specified, we interpret it as a\n// stack option, and therefore must remove it from the propagated options.\nfunction mergeOptions(options) {\n  const {offset, order, reverse, ...rest} = options;\n  return [{offset, order, reverse}, rest];\n}\n\n// This is a hint to the tooltip mark that the y1 and y2 channels (for stackY,\n// or conversely x1 and x2 for stackX) represent a stacked length, and that the\n// tooltip should therefore show y2-y1 instead of an extent.\nconst lengthy = {length: true};\n\nfunction stack(x, y = one, kx, ky, {offset, order, reverse}, options) {\n  if (y === null) throw new Error(`stack requires ${ky}`);\n  const z = maybeZ(options);\n  const [X, setX] = maybeColumn(x);\n  const [Y1, setY1] = column(y);\n  const [Y2, setY2] = column(y);\n  Y1.hint = Y2.hint = lengthy;\n  offset = maybeOffset(offset);\n  order = maybeOrder(order, offset, ky);\n  return [\n    basic(options, (data, facets, plotOptions) => {\n      ({data, facets} = exclusiveFacets(data, facets));\n      const X = x == null ? undefined : setX(maybeApplyInterval(valueof(data, x), plotOptions?.[kx]));\n      const Y = valueof(data, y, Float64Array);\n      const Z = valueof(data, z);\n      const compare = order && order(data, X, Y, Z);\n      const n = lengthof(data);\n      const Y1 = setY1(new Float64Array(n));\n      const Y2 = setY2(new Float64Array(n));\n      const facetstacks = [];\n      for (const facet of facets) {\n        const stacks = X ? Array.from(group(facet, (i) => X[i]).values()) : [facet];\n        if (compare) for (const stack of stacks) stack.sort(compare);\n        for (const stack of stacks) {\n          let yn = 0;\n          let yp = 0;\n          if (reverse) stack.reverse();\n          for (const i of stack) {\n            const y = Y[i];\n            if (y < 0) yn = Y2[i] = (Y1[i] = yn) + y;\n            else if (y > 0) yp = Y2[i] = (Y1[i] = yp) + y;\n            else Y2[i] = Y1[i] = yp; // NaN or zero\n          }\n        }\n        facetstacks.push(stacks);\n      }\n      if (offset) offset(facetstacks, Y1, Y2, Z);\n      return {data, facets};\n    }),\n    X,\n    Y1,\n    Y2\n  ];\n}\n\nfunction maybeOffset(offset) {\n  if (offset == null) return;\n  if (typeof offset === \"function\") return offset;\n  switch (`${offset}`.toLowerCase()) {\n    case \"expand\":\n    case \"normalize\":\n      return offsetExpand;\n    case \"center\":\n    case \"silhouette\":\n      return offsetCenter;\n    case \"wiggle\":\n      return offsetWiggle;\n  }\n  throw new Error(`unknown offset: ${offset}`);\n}\n\n// Given a single stack, returns the minimum and maximum values from the given\n// Y2 column. Note that this relies on Y2 always being the outer column for\n// diverging values.\nfunction extent(stack, Y2) {\n  let min = 0,\n    max = 0;\n  for (const i of stack) {\n    const y = Y2[i];\n    if (y < min) min = y;\n    if (y > max) max = y;\n  }\n  return [min, max];\n}\n\nfunction offsetExpand(facetstacks, Y1, Y2) {\n  for (const stacks of facetstacks) {\n    for (const stack of stacks) {\n      const [yn, yp] = extent(stack, Y2);\n      for (const i of stack) {\n        const m = 1 / (yp - yn || 1);\n        Y1[i] = m * (Y1[i] - yn);\n        Y2[i] = m * (Y2[i] - yn);\n      }\n    }\n  }\n}\n\nfunction offsetCenter(facetstacks, Y1, Y2) {\n  for (const stacks of facetstacks) {\n    for (const stack of stacks) {\n      const [yn, yp] = extent(stack, Y2);\n      for (const i of stack) {\n        const m = (yp + yn) / 2;\n        Y1[i] -= m;\n        Y2[i] -= m;\n      }\n    }\n    offsetZero(stacks, Y1, Y2);\n  }\n  offsetCenterFacets(facetstacks, Y1, Y2);\n}\n\nfunction offsetWiggle(facetstacks, Y1, Y2, Z) {\n  for (const stacks of facetstacks) {\n    const prev = new InternMap();\n    let y = 0;\n    for (const stack of stacks) {\n      let j = -1;\n      const Fi = stack.map((i) => Math.abs(Y2[i] - Y1[i]));\n      const Df = stack.map((i) => {\n        j = Z ? Z[i] : ++j;\n        const value = Y2[i] - Y1[i];\n        const diff = prev.has(j) ? value - prev.get(j) : 0;\n        prev.set(j, value);\n        return diff;\n      });\n      const Cf1 = [0, ...cumsum(Df)];\n      for (const i of stack) {\n        Y1[i] += y;\n        Y2[i] += y;\n      }\n      const s1 = sum(Fi);\n      if (s1) y -= sum(Fi, (d, i) => (Df[i] / 2 + Cf1[i]) * d) / s1;\n    }\n    offsetZero(stacks, Y1, Y2);\n  }\n  offsetCenterFacets(facetstacks, Y1, Y2);\n}\n\nfunction offsetZero(stacks, Y1, Y2) {\n  const m = min(stacks, (stack) => min(stack, (i) => Y1[i]));\n  for (const stack of stacks) {\n    for (const i of stack) {\n      Y1[i] -= m;\n      Y2[i] -= m;\n    }\n  }\n}\n\nfunction offsetCenterFacets(facetstacks, Y1, Y2) {\n  const n = facetstacks.length;\n  if (n === 1) return;\n  const facets = facetstacks.map((stacks) => stacks.flat());\n  const m = facets.map((I) => (min(I, (i) => Y1[i]) + max(I, (i) => Y2[i])) / 2);\n  const m0 = min(m);\n  for (let j = 0; j < n; j++) {\n    const p = m0 - m[j];\n    for (const i of facets[j]) {\n      Y1[i] += p;\n      Y2[i] += p;\n    }\n  }\n}\n\nfunction maybeOrder(order, offset, ky) {\n  if (order === undefined && offset === offsetWiggle) return orderInsideOut(ascendingDefined);\n  if (order == null) return;\n  if (typeof order === \"string\") {\n    const negate = order.startsWith(\"-\");\n    const compare = negate ? descendingDefined : ascendingDefined;\n    switch ((negate ? order.slice(1) : order).toLowerCase()) {\n      case \"value\":\n      case ky:\n        return orderY(compare);\n      case \"z\":\n        return orderZ(compare);\n      case \"sum\":\n        return orderSum(compare);\n      case \"appearance\":\n        return orderAppearance(compare);\n      case \"inside-out\":\n        return orderInsideOut(compare);\n    }\n    return orderAccessor(field(order));\n  }\n  if (typeof order === \"function\") return (order.length === 1 ? orderAccessor : orderComparator)(order);\n  if (isArray(order)) return orderGiven(order);\n  throw new Error(`invalid order: ${order}`);\n}\n\n// by value\nfunction orderY(compare) {\n  return (data, X, Y) => (i, j) => compare(Y[i], Y[j]);\n}\n\n// by location\nfunction orderZ(compare) {\n  return (data, X, Y, Z) => (i, j) => compare(Z[i], Z[j]);\n}\n\n// by sum of value (a.k.a. ascending)\nfunction orderSum(compare) {\n  return orderZDomain(compare, (data, X, Y, Z) =>\n    groupSort(\n      range(data),\n      (I) => sum(I, (i) => Y[i]),\n      (i) => Z[i]\n    )\n  );\n}\n\n// by x = argmax of value\nfunction orderAppearance(compare) {\n  return orderZDomain(compare, (data, X, Y, Z) =>\n    groupSort(\n      range(data),\n      (I) => X[greatest(I, (i) => Y[i])],\n      (i) => Z[i]\n    )\n  );\n}\n\n// by x = argmax of value, but rearranged inside-out by alternating series\n// according to the sign of a running divergence of sums\nfunction orderInsideOut(compare) {\n  return orderZDomain(compare, (data, X, Y, Z) => {\n    const I = range(data);\n    const K = groupSort(\n      I,\n      (I) => X[greatest(I, (i) => Y[i])],\n      (i) => Z[i]\n    );\n    const sums = rollup(\n      I,\n      (I) => sum(I, (i) => Y[i]),\n      (i) => Z[i]\n    );\n    const Kp = [],\n      Kn = [];\n    let s = 0;\n    for (const k of K) {\n      if (s < 0) {\n        s += sums.get(k);\n        Kp.push(k);\n      } else {\n        s -= sums.get(k);\n        Kn.push(k);\n      }\n    }\n    return Kn.reverse().concat(Kp);\n  });\n}\n\nfunction orderAccessor(f) {\n  return (data) => {\n    const O = valueof(data, f);\n    return (i, j) => ascendingDefined(O[i], O[j]);\n  };\n}\n\nfunction orderComparator(f) {\n  return (data) => {\n    return isArray(data) ? (i, j) => f(data[i], data[j]) : (i, j) => f(data.get(i), data.get(j));\n  };\n}\n\nfunction orderGiven(domain) {\n  return orderZDomain(ascendingDefined, () => domain);\n}\n\n// Given an ordering (domain) of distinct values in z that can be derived from\n// the data, returns a comparator that can be used to sort stacks. Note that\n// this is a series order: it will be consistent across stacks.\nfunction orderZDomain(compare, domain) {\n  return (data, X, Y, Z) => {\n    if (!Z) throw new Error(\"missing channel: z\");\n    const map = new InternMap(domain(data, X, Y, Z).map((d, i) => [d, i]));\n    return (i, j) => compare(map.get(Z[i]), map.get(Z[j]));\n  };\n}\n","import {create} from \"../context.js\";\nimport {Mark} from \"../mark.js\";\nimport {constant, hasXY, identity, indexOf, number} from \"../options.js\";\nimport {isCollapsed} from \"../scales.js\";\nimport {applyAttr, applyChannelStyles, applyDirectStyles, applyIndirectStyles, applyTransform} from \"../style.js\";\nimport {impliedString} from \"../style.js\";\nimport {maybeIdentityX, maybeIdentityY} from \"../transforms/identity.js\";\nimport {maybeTrivialIntervalX, maybeTrivialIntervalY} from \"../transforms/interval.js\";\nimport {maybeStackX, maybeStackY} from \"../transforms/stack.js\";\n\nconst defaults = {\n  ariaLabel: \"rect\"\n};\n\nexport class Rect extends Mark {\n  constructor(data, options = {}) {\n    const {x1, y1, x2, y2} = options;\n    super(\n      data,\n      {\n        x1: {value: x1, scale: \"x\", type: x1 != null && x2 == null ? \"band\" : undefined, optional: true},\n        y1: {value: y1, scale: \"y\", type: y1 != null && y2 == null ? \"band\" : undefined, optional: true},\n        x2: {value: x2, scale: \"x\", optional: true},\n        y2: {value: y2, scale: \"y\", optional: true}\n      },\n      options,\n      defaults\n    );\n    rectInsets(this, options);\n    rectRadii(this, options);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x, y} = scales;\n    let {x1: X1, y1: Y1, x2: X2, y2: Y2} = channels;\n    const {marginTop, marginRight, marginBottom, marginLeft, width, height} = dimensions;\n    const {projection} = context;\n    const {insetTop, insetRight, insetBottom, insetLeft} = this;\n    const {rx, ry, rx1y1, rx1y2, rx2y1, rx2y2} = this;\n    if ((X1 || X2) && !projection && isCollapsed(x)) X1 = X2 = null; // ignore if collapsed\n    if ((Y1 || Y2) && !projection && isCollapsed(y)) Y1 = Y2 = null; // ignore if collapsed\n    const bx = x?.bandwidth ? x.bandwidth() : 0;\n    const by = y?.bandwidth ? y.bandwidth() : 0;\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {}, 0, 0)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .call(\n            rx1y1 || rx1y2 || rx2y1 || rx2y2\n              ? (g) =>\n                  g\n                    .append(\"path\")\n                    .call(applyDirectStyles, this)\n                    .call(\n                      applyRoundedRect,\n                      X1 && X2\n                        ? (i) => X1[i] + (X2[i] < X1[i] ? -insetRight : insetLeft)\n                        : X1\n                        ? (i) => X1[i] + insetLeft\n                        : marginLeft + insetLeft,\n                      Y1 && Y2\n                        ? (i) => Y1[i] + (Y2[i] < Y1[i] ? -insetBottom : insetTop)\n                        : Y1\n                        ? (i) => Y1[i] + insetTop\n                        : marginTop + insetTop,\n                      X1 && X2\n                        ? (i) => X2[i] - (X2[i] < X1[i] ? -insetLeft : insetRight)\n                        : X1\n                        ? (i) => X1[i] + bx - insetRight\n                        : width - marginRight - insetRight,\n                      Y1 && Y2\n                        ? (i) => Y2[i] - (Y2[i] < Y1[i] ? -insetTop : insetBottom)\n                        : Y1\n                        ? (i) => Y1[i] + by - insetBottom\n                        : height - marginBottom - insetBottom,\n                      this\n                    )\n                    .call(applyChannelStyles, this, channels)\n              : (g) =>\n                  g\n                    .append(\"rect\")\n                    .call(applyDirectStyles, this)\n                    .attr(\n                      \"x\",\n                      X1\n                        ? X2\n                          ? (i) => Math.min(X1[i], X2[i]) + insetLeft\n                          : (i) => X1[i] + insetLeft\n                        : marginLeft + insetLeft\n                    )\n                    .attr(\n                      \"y\",\n                      Y1\n                        ? Y2\n                          ? (i) => Math.min(Y1[i], Y2[i]) + insetTop\n                          : (i) => Y1[i] + insetTop\n                        : marginTop + insetTop\n                    )\n                    .attr(\n                      \"width\",\n                      X1\n                        ? X2\n                          ? (i) => Math.max(0, Math.abs(X2[i] - X1[i]) + bx - insetLeft - insetRight)\n                          : bx - insetLeft - insetRight\n                        : width - marginRight - marginLeft - insetRight - insetLeft\n                    )\n                    .attr(\n                      \"height\",\n                      Y1\n                        ? Y2\n                          ? (i) => Math.max(0, Math.abs(Y1[i] - Y2[i]) + by - insetTop - insetBottom)\n                          : by - insetTop - insetBottom\n                        : height - marginTop - marginBottom - insetTop - insetBottom\n                    )\n                    .call(applyAttr, \"rx\", rx)\n                    .call(applyAttr, \"ry\", ry)\n                    .call(applyChannelStyles, this, channels)\n          )\n      )\n      .node();\n  }\n}\n\nexport function rectInsets(\n  mark,\n  {inset = 0, insetTop = inset, insetRight = inset, insetBottom = inset, insetLeft = inset} = {}\n) {\n  mark.insetTop = number(insetTop);\n  mark.insetRight = number(insetRight);\n  mark.insetBottom = number(insetBottom);\n  mark.insetLeft = number(insetLeft);\n}\n\nexport function rectRadii(\n  mark,\n  {\n    r,\n    rx, // for elliptic corners\n    ry, // for elliptic corners\n    rx1 = r,\n    ry1 = r,\n    rx2 = r,\n    ry2 = r,\n    rx1y1 = rx1 !== undefined ? +rx1 : ry1 !== undefined ? +ry1 : 0,\n    rx1y2 = rx1 !== undefined ? +rx1 : ry2 !== undefined ? +ry2 : 0,\n    rx2y1 = rx2 !== undefined ? +rx2 : ry1 !== undefined ? +ry1 : 0,\n    rx2y2 = rx2 !== undefined ? +rx2 : ry2 !== undefined ? +ry2 : 0\n  } = {}\n) {\n  if (rx1y1 || rx1y2 || rx2y1 || rx2y2) {\n    mark.rx1y1 = rx1y1;\n    mark.rx1y2 = rx1y2;\n    mark.rx2y1 = rx2y1;\n    mark.rx2y2 = rx2y2;\n  } else {\n    mark.rx = impliedString(rx, \"auto\"); // number or percentage\n    mark.ry = impliedString(ry, \"auto\");\n  }\n}\n\nexport function applyRoundedRect(selection, X1, Y1, X2, Y2, mark) {\n  const {rx1y1: r11, rx1y2: r12, rx2y1: r21, rx2y2: r22} = mark;\n  if (typeof X1 !== \"function\") X1 = constant(X1);\n  if (typeof Y1 !== \"function\") Y1 = constant(Y1);\n  if (typeof X2 !== \"function\") X2 = constant(X2);\n  if (typeof Y2 !== \"function\") Y2 = constant(Y2);\n  const rx = Math.max(Math.abs(r11 + r21), Math.abs(r12 + r22));\n  const ry = Math.max(Math.abs(r11 + r12), Math.abs(r21 + r22));\n  selection.attr(\"d\", (i) => {\n    const x1 = X1(i);\n    const y1 = Y1(i);\n    const x2 = X2(i);\n    const y2 = Y2(i);\n    const ix = x1 > x2;\n    const iy = y1 > y2;\n    const l = ix ? x2 : x1;\n    const r = ix ? x1 : x2;\n    const t = iy ? y2 : y1;\n    const b = iy ? y1 : y2;\n    const k = Math.min(1, (r - l) / rx, (b - t) / ry);\n    const tl = k * (ix ? (iy ? r22 : r21) : iy ? r12 : r11);\n    const tr = k * (ix ? (iy ? r12 : r11) : iy ? r22 : r21);\n    const br = k * (ix ? (iy ? r11 : r12) : iy ? r21 : r22);\n    const bl = k * (ix ? (iy ? r21 : r22) : iy ? r11 : r12);\n    return (\n      `M${l},${t + biasY(tl, bl)}A${tl},${tl} 0 0 ${tl < 0 ? 0 : 1} ${l + biasX(tl, bl)},${t}` +\n      `H${r - biasX(tr, br)}A${tr},${tr} 0 0 ${tr < 0 ? 0 : 1} ${r},${t + biasY(tr, br)}` +\n      `V${b - biasY(br, tr)}A${br},${br} 0 0 ${br < 0 ? 0 : 1} ${r - biasX(br, tr)},${b}` +\n      `H${l + biasX(bl, tl)}A${bl},${bl} 0 0 ${bl < 0 ? 0 : 1} ${l},${b - biasY(bl, tl)}` +\n      `Z`\n    );\n  });\n}\n\n/**\n * If the opposing corner has a negative radius r2, if this corner has a\n * negative radius r1, this corners wing will extend horizontally rather than\n * vertically.\n */\nfunction biasX(r1, r2) {\n  return r2 < 0 ? r1 : Math.abs(r1);\n}\n\n/**\n * If the opposing corner has a negative radius r2, if this corner has a\n * negative radius r1, this corners wing will extend horizontally rather than\n * vertically.\n */\nfunction biasY(r1, r2) {\n  return r2 < 0 ? Math.abs(r1) : r1;\n}\n\nexport function rect(data, options) {\n  return new Rect(data, maybeTrivialIntervalX(maybeTrivialIntervalY(options)));\n}\n\nexport function rectX(data, options = {}) {\n  if (!hasXY(options)) options = {...options, y: indexOf, x2: identity, interval: 1};\n  return new Rect(data, maybeStackX(maybeTrivialIntervalY(maybeIdentityX(options))));\n}\n\nexport function rectY(data, options = {}) {\n  if (!hasXY(options)) options = {...options, x: indexOf, y2: identity, interval: 1};\n  return new Rect(data, maybeStackY(maybeTrivialIntervalX(maybeIdentityY(options))));\n}\n","import {create} from \"../context.js\";\nimport {Mark} from \"../mark.js\";\nimport {maybeKeyword, singleton} from \"../options.js\";\nimport {applyChannelStyles, applyDirectStyles, applyIndirectStyles, applyTransform} from \"../style.js\";\nimport {applyRoundedRect, rectInsets, rectRadii} from \"./rect.js\";\n\nconst defaults = {\n  ariaLabel: \"frame\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  clip: false\n};\n\nconst lineDefaults = {\n  ariaLabel: \"frame\",\n  fill: null,\n  stroke: \"currentColor\",\n  strokeLinecap: \"square\",\n  clip: false\n};\n\nexport class Frame extends Mark {\n  constructor(options = {}) {\n    const {anchor = null} = options;\n    super(singleton, undefined, options, anchor == null ? defaults : lineDefaults);\n    this.anchor = maybeKeyword(anchor, \"anchor\", [\"top\", \"right\", \"bottom\", \"left\"]);\n    rectInsets(this, options);\n    if (!anchor) rectRadii(this, options);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {marginTop, marginRight, marginBottom, marginLeft, width, height} = dimensions;\n    const {anchor, insetTop, insetRight, insetBottom, insetLeft} = this;\n    const {rx, ry, rx1y1, rx1y2, rx2y1, rx2y2} = this;\n    const x1 = marginLeft + insetLeft;\n    const x2 = width - marginRight - insetRight;\n    const y1 = marginTop + insetTop;\n    const y2 = height - marginBottom - insetBottom;\n    return create(anchor ? \"svg:line\" : rx1y1 || rx1y2 || rx2y1 || rx2y2 ? \"svg:path\" : \"svg:rect\", context)\n      .datum(0)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyDirectStyles, this)\n      .call(applyChannelStyles, this, channels)\n      .call(applyTransform, this, {})\n      .call(\n        anchor === \"left\"\n          ? (line) => line.attr(\"x1\", x1).attr(\"x2\", x1).attr(\"y1\", y1).attr(\"y2\", y2)\n          : anchor === \"right\"\n          ? (line) => line.attr(\"x1\", x2).attr(\"x2\", x2).attr(\"y1\", y1).attr(\"y2\", y2)\n          : anchor === \"top\"\n          ? (line) => line.attr(\"x1\", x1).attr(\"x2\", x2).attr(\"y1\", y1).attr(\"y2\", y1)\n          : anchor === \"bottom\"\n          ? (line) => line.attr(\"x1\", x1).attr(\"x2\", x2).attr(\"y1\", y2).attr(\"y2\", y2)\n          : rx1y1 || rx1y2 || rx2y1 || rx2y2\n          ? (path) => path.call(applyRoundedRect, x1, y1, x2, y2, this)\n          : (rect) =>\n              rect\n                .attr(\"x\", x1)\n                .attr(\"y\", y1)\n                .attr(\"width\", x2 - x1)\n                .attr(\"height\", y2 - y1)\n                .attr(\"rx\", rx)\n                .attr(\"ry\", ry)\n      )\n      .node();\n  }\n}\n\nexport function frame(options) {\n  return new Frame(options);\n}\n","import {select, format as numberFormat, utcFormat} from \"d3\";\nimport {getSource} from \"../channel.js\";\nimport {create} from \"../context.js\";\nimport {defined} from \"../defined.js\";\nimport {formatDefault} from \"../format.js\";\nimport {anchorX, anchorY} from \"../interactions/pointer.js\";\nimport {Mark} from \"../mark.js\";\nimport {maybeAnchor, maybeFrameAnchor, maybeTuple, number, string} from \"../options.js\";\nimport {applyDirectStyles, applyFrameAnchor, applyIndirectStyles, applyTransform, impliedString} from \"../style.js\";\nimport {identity, isIterable, isTemporal, isTextual} from \"../options.js\";\nimport {inferTickFormat} from \"./axis.js\";\nimport {applyIndirectTextStyles, defaultWidth, ellipsis, monospaceWidth} from \"./text.js\";\nimport {cut, clipper, splitter, maybeTextOverflow} from \"./text.js\";\n\nconst defaults = {\n  ariaLabel: \"tip\",\n  fill: \"var(--plot-background)\",\n  stroke: \"currentColor\"\n};\n\n// These channels are not displayed in the default tip; see formatChannels.\nconst ignoreChannels = new Set([\"geometry\", \"href\", \"src\", \"ariaLabel\", \"scales\"]);\n\nexport class Tip extends Mark {\n  constructor(data, options = {}) {\n    if (options.tip) options = {...options, tip: false};\n    if (options.title === undefined && isIterable(data) && isTextual(data)) options = {...options, title: identity};\n    const {\n      x,\n      y,\n      x1,\n      x2,\n      y1,\n      y2,\n      anchor,\n      preferredAnchor = \"bottom\",\n      monospace,\n      fontFamily = monospace ? \"ui-monospace, monospace\" : undefined,\n      fontSize,\n      fontStyle,\n      fontVariant,\n      fontWeight,\n      lineHeight = 1,\n      lineWidth = 20,\n      frameAnchor,\n      format,\n      textAnchor = \"start\",\n      textOverflow,\n      textPadding = 8,\n      title,\n      pointerSize = 12,\n      pathFilter = \"drop-shadow(0 3px 4px rgba(0,0,0,0.2))\"\n    } = options;\n    super(\n      data,\n      {\n        x: {value: x1 != null && x2 != null ? null : x, scale: \"x\", optional: true}, // ignore midpoint\n        y: {value: y1 != null && y2 != null ? null : y, scale: \"y\", optional: true}, // ignore midpoint\n        x1: {value: x1, scale: \"x\", optional: x2 == null},\n        y1: {value: y1, scale: \"y\", optional: y2 == null},\n        x2: {value: x2, scale: \"x\", optional: x1 == null},\n        y2: {value: y2, scale: \"y\", optional: y1 == null},\n        title: {value: title, optional: true} // filter: defined\n      },\n      options,\n      defaults\n    );\n    this.anchor = maybeAnchor(anchor, \"anchor\");\n    this.preferredAnchor = maybeAnchor(preferredAnchor, \"preferredAnchor\");\n    this.frameAnchor = maybeFrameAnchor(frameAnchor);\n    this.textAnchor = impliedString(textAnchor, \"middle\");\n    this.textPadding = +textPadding;\n    this.pointerSize = +pointerSize;\n    this.pathFilter = string(pathFilter);\n    this.lineHeight = +lineHeight;\n    this.lineWidth = +lineWidth;\n    this.textOverflow = maybeTextOverflow(textOverflow);\n    this.monospace = !!monospace;\n    this.fontFamily = string(fontFamily);\n    this.fontSize = number(fontSize);\n    this.fontStyle = string(fontStyle);\n    this.fontVariant = string(fontVariant);\n    this.fontWeight = string(fontWeight);\n    for (const key in defaults) if (key in this.channels) this[key] = defaults[key]; // apply default even if channel\n    this.splitLines = splitter(this);\n    this.clipLine = clipper(this);\n    this.format = typeof format === \"string\" || typeof format === \"function\" ? {title: format} : {...format}; // defensive copy before mutate; also promote nullish to empty\n  }\n  render(index, scales, values, dimensions, context) {\n    const mark = this;\n    const {x, y, fx, fy} = scales;\n    const {ownerSVGElement: svg, document} = context;\n    const {anchor, monospace, lineHeight, lineWidth} = this;\n    const {textPadding: r, pointerSize: m, pathFilter} = this;\n    const {marginTop, marginLeft} = dimensions;\n\n    // The anchor position is the middle of x1 & y1 and x2 & y2, if available,\n    // or x & y; the former is considered more specific because its how we\n    // disable the implicit stack and interval transforms. If any dimension is\n    // unspecified, we fallback to the frame anchor. We also need to know the\n    // facet offsets to detect when the tip would draw outside the plot, and\n    // thus we need to change the orientation.\n    const {x1: X1, y1: Y1, x2: X2, y2: Y2, x: X = X1 ?? X2, y: Y = Y1 ?? Y2} = values;\n    const ox = fx ? fx(index.fx) - marginLeft : 0;\n    const oy = fy ? fy(index.fy) - marginTop : 0;\n\n    // The order of precedence for the anchor position is: the middle of x1 & y1\n    // and x2 & y2; or x1 & y1 (e.g., area); or lastly x & y. If a dimension is\n    // unspecified, the frame anchor is used.\n    const [cx, cy] = applyFrameAnchor(this, dimensions);\n    const px = anchorX(values, cx);\n    const py = anchorY(values, cy);\n\n    // Resolve the text metric implementation. We may need an ellipsis for text\n    // truncation, so we optimistically compute the ellipsis width.\n    const widthof = monospace ? monospaceWidth : defaultWidth;\n    const ee = widthof(ellipsis);\n\n    // If theres a title channel, display that as-is; otherwise, show multiple\n    // channels as name-value pairs.\n    let sources, format;\n    if (\"title\" in values) {\n      sources = getSourceChannels.call(this, {title: values.channels.title}, scales);\n      format = formatTitle;\n    } else {\n      sources = getSourceChannels.call(this, values.channels, scales);\n      format = formatChannels;\n    }\n\n    // We dont call applyChannelStyles because we only use the channels to\n    // derive the content of the tip, not its aesthetics.\n    const g = create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyIndirectTextStyles, this)\n      .call(applyTransform, this, {x: X && x, y: Y && y})\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(\"g\")\n          .attr(\"transform\", (i) => `translate(${Math.round(px(i))},${Math.round(py(i))})`) // crisp edges\n          .call(applyDirectStyles, this)\n          .call((g) => g.append(\"path\").attr(\"filter\", pathFilter))\n          .call((g) =>\n            g.append(\"text\").each(function (i) {\n              const that = select(this);\n              // prevent style inheritance (from path)\n              this.setAttribute(\"fill\", \"currentColor\");\n              this.setAttribute(\"fill-opacity\", 1);\n              this.setAttribute(\"stroke\", \"none\");\n              // iteratively render each channel value\n              const lines = format.call(mark, i, index, sources, scales, values);\n              if (typeof lines === \"string\") {\n                for (const line of mark.splitLines(lines)) {\n                  renderLine(that, {value: mark.clipLine(line)});\n                }\n              } else {\n                const labels = new Set();\n                for (const line of lines) {\n                  const {label = \"\"} = line;\n                  if (label && labels.has(label)) continue;\n                  else labels.add(label);\n                  renderLine(that, line);\n                }\n              }\n            })\n          )\n      );\n\n    // Renders a single line (a name-value pair) to the tip, truncating the text\n    // as needed, and adding a title if the text is truncated. Note that this is\n    // just the initial layout of the text; in postrender we will compute the\n    // exact text metrics and translate the text as needed once we know the\n    // tips orientation (anchor).\n    function renderLine(selection, {label, value, color, opacity}) {\n      (label ??= \"\"), (value ??= \"\");\n      const swatch = color != null || opacity != null;\n      let title;\n      let w = lineWidth * 100;\n      const [j] = cut(label, w, widthof, ee);\n      if (j >= 0) {\n        // label is truncated\n        label = label.slice(0, j).trimEnd() + ellipsis;\n        title = value.trim();\n        value = \"\";\n      } else {\n        if (label || (!value && !swatch)) value = \" \" + value;\n        const [k] = cut(value, w - widthof(label), widthof, ee);\n        if (k >= 0) {\n          // value is truncated\n          title = value.trim();\n          value = value.slice(0, k).trimEnd() + ellipsis;\n        }\n      }\n      const line = selection.append(\"tspan\").attr(\"x\", 0).attr(\"dy\", `${lineHeight}em`).text(\"\\u200b\"); // zwsp for double-click\n      if (label) line.append(\"tspan\").attr(\"font-weight\", \"bold\").text(label);\n      if (value) line.append(() => document.createTextNode(value));\n      if (swatch) line.append(\"tspan\").text(\" \").attr(\"fill\", color).attr(\"fill-opacity\", opacity).style(\"user-select\", \"none\"); // prettier-ignore\n      if (title) line.append(\"title\").text(title);\n    }\n\n    // Only after the plot is attached to the page can we compute the exact text\n    // metrics needed to determine the tip size and orientation (anchor).\n    function postrender() {\n      const {width, height} = dimensions.facet ?? dimensions;\n      g.selectChildren().each(function (i) {\n        let {x: tx, width: w, height: h} = this.getBBox();\n        (w = Math.round(w)), (h = Math.round(h)); // crisp edges\n        let a = anchor; // use the specified anchor, if any\n        if (a === undefined) {\n          const x = px(i) + ox;\n          const y = py(i) + oy;\n          const fitLeft = x + w + m + r * 2 < width;\n          const fitRight = x - w - m - r * 2 > 0;\n          const fitTop = y + h + m + r * 2 < height;\n          const fitBottom = y - h - m - r * 2 > 0;\n          a =\n            fitLeft && fitRight\n              ? fitTop && fitBottom\n                ? mark.preferredAnchor\n                : fitBottom\n                ? \"bottom\"\n                : \"top\"\n              : fitTop && fitBottom\n              ? fitLeft\n                ? \"left\"\n                : \"right\"\n              : (fitLeft || fitRight) && (fitTop || fitBottom)\n              ? `${fitBottom ? \"bottom\" : \"top\"}-${fitLeft ? \"left\" : \"right\"}`\n              : mark.preferredAnchor;\n        }\n        const path = this.firstChild; // note: assumes exactly two children!\n        const text = this.lastChild; // note: assumes exactly two children!\n        path.setAttribute(\"d\", getPath(a, m, r, w, h));\n        if (tx) for (const t of text.childNodes) t.setAttribute(\"x\", -tx);\n        text.setAttribute(\"y\", `${+getLineOffset(a, text.childNodes.length, lineHeight).toFixed(6)}em`);\n        text.setAttribute(\"transform\", `translate(${getTextTranslate(a, m, r, w, h)})`);\n      });\n      g.attr(\"visibility\", null);\n    }\n\n    // Wait until the plot is inserted into the page so that we can use getBBox\n    // to compute the exact text dimensions. If the SVG is already connected, as\n    // when the pointer interaction triggers the re-render, use a faster\n    // microtask instead of an animation frame; if this SSR (e.g., JSDOM), skip\n    // this step. Perhaps this could be done synchronously; getting the\n    // dimensions of the SVG is easy, and although accurate text metrics are\n    // hard, we could use approximate heuristics.\n    if (index.length) {\n      g.attr(\"visibility\", \"hidden\"); // hide until postrender\n      if (svg.isConnected) Promise.resolve().then(postrender);\n      else if (typeof requestAnimationFrame !== \"undefined\") requestAnimationFrame(postrender);\n    }\n\n    return g.node();\n  }\n}\n\nexport function tip(data, {x, y, ...options} = {}) {\n  if (options.frameAnchor === undefined) [x, y] = maybeTuple(x, y);\n  return new Tip(data, {...options, x, y});\n}\n\nfunction getLineOffset(anchor, length, lineHeight) {\n  return /^top(?:-|$)/.test(anchor)\n    ? 0.94 - lineHeight\n    : /^bottom(?:-|$)/\n    ? -0.29 - length * lineHeight\n    : (length / 2) * lineHeight;\n}\n\nfunction getTextTranslate(anchor, m, r, width, height) {\n  switch (anchor) {\n    case \"middle\":\n      return [-width / 2, height / 2];\n    case \"top-left\":\n      return [r, m + r];\n    case \"top\":\n      return [-width / 2, m / 2 + r];\n    case \"top-right\":\n      return [-width - r, m + r];\n    case \"right\":\n      return [-m / 2 - width - r, height / 2];\n    case \"bottom-left\":\n      return [r, -m - r];\n    case \"bottom\":\n      return [-width / 2, -m / 2 - r];\n    case \"bottom-right\":\n      return [-width - r, -m - r];\n    case \"left\":\n      return [r + m / 2, height / 2];\n  }\n}\n\nfunction getPath(anchor, m, r, width, height) {\n  const w = width + r * 2;\n  const h = height + r * 2;\n  switch (anchor) {\n    case \"middle\":\n      return `M${-w / 2},${-h / 2}h${w}v${h}h${-w}z`;\n    case \"top-left\":\n      return `M0,0l${m},${m}h${w - m}v${h}h${-w}z`;\n    case \"top\":\n      return `M0,0l${m / 2},${m / 2}h${(w - m) / 2}v${h}h${-w}v${-h}h${(w - m) / 2}z`;\n    case \"top-right\":\n      return `M0,0l${-m},${m}h${m - w}v${h}h${w}z`;\n    case \"right\":\n      return `M0,0l${-m / 2},${-m / 2}v${m / 2 - h / 2}h${-w}v${h}h${w}v${m / 2 - h / 2}z`;\n    case \"bottom-left\":\n      return `M0,0l${m},${-m}h${w - m}v${-h}h${-w}z`;\n    case \"bottom\":\n      return `M0,0l${m / 2},${-m / 2}h${(w - m) / 2}v${-h}h${-w}v${h}h${(w - m) / 2}z`;\n    case \"bottom-right\":\n      return `M0,0l${-m},${-m}h${m - w}v${-h}h${w}z`;\n    case \"left\":\n      return `M0,0l${m / 2},${-m / 2}v${m / 2 - h / 2}h${w}v${h}h${-w}v${m / 2 - h / 2}z`;\n  }\n}\n\n// Note: mutates this.format!\nfunction getSourceChannels(channels, scales) {\n  const sources = {};\n\n  // Promote x and y shorthand for paired channels (in order).\n  let format = this.format;\n  format = maybeExpandPairedFormat(format, channels, \"x\");\n  format = maybeExpandPairedFormat(format, channels, \"y\");\n  this.format = format;\n\n  // Prioritize channels with explicit formats, in the given order.\n  for (const key in format) {\n    const value = format[key];\n    if (value === null || value === false) {\n      continue;\n    } else if (key === \"fx\" || key === \"fy\") {\n      sources[key] = true;\n    } else {\n      const source = getSource(channels, key);\n      if (source) sources[key] = source;\n    }\n  }\n\n  // Then fallback to all other (non-ignored) channels.\n  for (const key in channels) {\n    if (key in sources || key in format || ignoreChannels.has(key)) continue;\n    if ((key === \"x\" || key === \"y\") && channels.geometry) continue; // ignore x & y on geo\n    const source = getSource(channels, key);\n    if (source) {\n      // Ignore color channels if the values are all literal colors.\n      if (source.scale == null && source.defaultScale === \"color\") continue;\n      sources[key] = source;\n    }\n  }\n\n  // And lastly facet channels, but only if this mark is faceted.\n  if (this.facet) {\n    if (scales.fx && !(\"fx\" in format)) sources.fx = true;\n    if (scales.fy && !(\"fy\" in format)) sources.fy = true;\n  }\n\n  // Promote shorthand string formats, and materialize default formats.\n  for (const key in sources) {\n    const format = this.format[key];\n    if (typeof format === \"string\") {\n      const value = sources[key]?.value ?? scales[key]?.domain() ?? [];\n      this.format[key] = (isTemporal(value) ? utcFormat : numberFormat)(format);\n    } else if (format === undefined || format === true) {\n      // For ordinal scales, the inferred tick format can be more concise, such\n      // as only showing the year for yearly data.\n      const scale = scales[key];\n      this.format[key] = scale?.bandwidth ? inferTickFormat(scale, scale.domain()) : formatDefault;\n    }\n  }\n\n  return sources;\n}\n\n// Promote x and y shorthand for paired channels, while preserving order.\nfunction maybeExpandPairedFormat(format, channels, key) {\n  if (!(key in format)) return format;\n  const key1 = `${key}1`;\n  const key2 = `${key}2`;\n  if ((key1 in format || !(key1 in channels)) && (key2 in format || !(key2 in channels))) return format;\n  const entries = Object.entries(format);\n  const value = format[key];\n  entries.splice(entries.findIndex(([name]) => name === key) + 1, 0, [key1, value], [key2, value]);\n  return Object.fromEntries(entries);\n}\n\nfunction formatTitle(i, index, {title}) {\n  return this.format.title(title.value[i], i);\n}\n\nfunction* formatChannels(i, index, channels, scales, values) {\n  for (const key in channels) {\n    if (key === \"fx\" || key === \"fy\") {\n      yield {\n        label: formatLabel(scales, channels, key),\n        value: this.format[key](index[key], i)\n      };\n      continue;\n    }\n    if (key === \"x1\" && \"x2\" in channels) continue;\n    if (key === \"y1\" && \"y2\" in channels) continue;\n    const channel = channels[key];\n    if (key === \"x2\" && \"x1\" in channels) {\n      yield {\n        label: formatPairLabel(scales, channels, \"x\"),\n        value: formatPair(this.format.x2, channels.x1, channel, i)\n      };\n    } else if (key === \"y2\" && \"y1\" in channels) {\n      yield {\n        label: formatPairLabel(scales, channels, \"y\"),\n        value: formatPair(this.format.y2, channels.y1, channel, i)\n      };\n    } else {\n      const value = channel.value[i];\n      const scale = channel.scale;\n      if (!defined(value) && scale == null) continue;\n      yield {\n        label: formatLabel(scales, channels, key),\n        value: this.format[key](value, i),\n        color: scale === \"color\" ? values[key][i] : null,\n        opacity: scale === \"opacity\" ? values[key][i] : null\n      };\n    }\n  }\n}\n\nfunction formatPair(formatValue, c1, c2, i) {\n  return c2.hint?.length // e.g., stackYs y1 and y2\n    ? `${formatValue(c2.value[i] - c1.value[i], i)}`\n    : `${formatValue(c1.value[i], i)}${formatValue(c2.value[i], i)}`;\n}\n\nfunction formatPairLabel(scales, channels, key) {\n  const l1 = formatLabel(scales, channels, `${key}1`, key);\n  const l2 = formatLabel(scales, channels, `${key}2`, key);\n  return l1 === l2 ? l1 : `${l1}${l2}`;\n}\n\nfunction formatLabel(scales, channels, key, defaultLabel = key) {\n  const channel = channels[key];\n  const scale = scales[channel?.scale ?? key];\n  return String(scale?.label ?? channel?.label ?? defaultLabel);\n}\n","import {creator, geoPath, select} from \"d3\";\nimport {createChannel, inferChannelScale} from \"./channel.js\";\nimport {createContext} from \"./context.js\";\nimport {createDimensions} from \"./dimensions.js\";\nimport {createFacets, recreateFacets, facetExclude, facetGroups, facetTranslator, facetFilter} from \"./facet.js\";\nimport {pointer, pointerX, pointerY} from \"./interactions/pointer.js\";\nimport {createLegends, exposeLegends} from \"./legends.js\";\nimport {Mark} from \"./mark.js\";\nimport {axisFx, axisFy, axisX, axisY, gridFx, gridFy, gridX, gridY} from \"./marks/axis.js\";\nimport {frame} from \"./marks/frame.js\";\nimport {tip} from \"./marks/tip.js\";\nimport {isColor, isIterable, isNone, isScaleOptions} from \"./options.js\";\nimport {dataify, lengthof, map, yes, maybeIntervalTransform, subarray} from \"./options.js\";\nimport {createProjection, getGeometryChannels, hasProjection, xyProjection} from \"./projection.js\";\nimport {createScales, createScaleFunctions, autoScaleRange, exposeScales} from \"./scales.js\";\nimport {innerDimensions, outerDimensions} from \"./scales.js\";\nimport {isPosition, registry as scaleRegistry} from \"./scales/index.js\";\nimport {applyInlineStyles, maybeClassName} from \"./style.js\";\nimport {initializer} from \"./transforms/basic.js\";\nimport {consumeWarnings, warn} from \"./warnings.js\";\n\nexport function plot(options = {}) {\n  const {facet, style, title, subtitle, caption, ariaLabel, ariaDescription} = options;\n\n  // className for inline styles\n  const className = maybeClassName(options.className);\n\n  // Flatten any nested marks.\n  const marks = options.marks === undefined ? [] : flatMarks(options.marks);\n\n  // Add implicit tips.\n  marks.push(...inferTips(marks));\n\n  // Compute the top-level facet state. This has roughly the same structure as\n  // mark-specific facet state, except there isnt a facetsIndex, and theres a\n  // data and dataLength so we can warn the user if a different data of the same\n  // length is used in a mark.\n  const topFacetState = maybeTopFacet(facet, options);\n\n  // Construct a map from (faceted) Mark instance to facet state, including:\n  // channels - an {fx?, fy?} object to add to the fx and fy scale\n  // groups - a possibly-nested map from facet values to indexes in the data array\n  // facetsIndex - a sparse nested array of indices corresponding to the valid facets\n  const facetStateByMark = new Map();\n  for (const mark of marks) {\n    const facetState = maybeMarkFacet(mark, topFacetState, options);\n    if (facetState) facetStateByMark.set(mark, facetState);\n  }\n\n  // Compute a Map from scale name to an array of associated channels.\n  const channelsByScale = new Map();\n  if (topFacetState) addScaleChannels(channelsByScale, [topFacetState], options);\n  addScaleChannels(channelsByScale, facetStateByMark, options);\n\n  // Add implicit axis marks. Because this happens after faceting (because it\n  // depends on whether faceting is present), we must initialize the facet state\n  // of any implicit axes, too.\n  const axes = flatMarks(inferAxes(marks, channelsByScale, options));\n  for (const mark of axes) {\n    const facetState = maybeMarkFacet(mark, topFacetState, options);\n    if (facetState) facetStateByMark.set(mark, facetState);\n  }\n  marks.unshift(...axes);\n\n  // All the possible facets are given by the domains of the fx or fy scales, or\n  // the cross-product of these domains if we facet by both x and y. We sort\n  // them in order to apply the facet filters afterwards.\n  let facets = createFacets(channelsByScale, options);\n\n  if (facets !== undefined) {\n    const topFacetsIndex = topFacetState ? facetFilter(facets, topFacetState) : undefined;\n\n    // Compute a facet index for each mark, parallel to the facets array. For\n    // mark-level facets, compute an index for that marks data and options.\n    // Otherwise, use the top-level facet index.\n    for (const mark of marks) {\n      if (mark.facet === null || mark.facet === \"super\") continue;\n      const facetState = facetStateByMark.get(mark);\n      if (facetState === undefined) continue;\n      facetState.facetsIndex = mark.fx != null || mark.fy != null ? facetFilter(facets, facetState) : topFacetsIndex;\n    }\n\n    // The cross product of the domains of fx and fy can include fx-fy\n    // combinations for which no mark has an instance associated with that\n    // combination, and therefore we dont want to render this facet (not even\n    // the frame). The same can occur if you specify the domain of fx and fy\n    // explicitly, but there is no mark instance associated with some values in\n    // the domain. Expunge empty facets, and clear the corresponding elements\n    // from the nested index in each mark.\n    const nonEmpty = new Set();\n    for (const {facetsIndex} of facetStateByMark.values()) {\n      facetsIndex?.forEach((index, i) => {\n        if (index?.length > 0) {\n          nonEmpty.add(i);\n        }\n      });\n    }\n\n    // If all the facets are empty (as when none of the marks are actually\n    // faceted), none of them are empty.\n    facets.forEach(\n      0 < nonEmpty.size && nonEmpty.size < facets.length\n        ? (f, i) => (f.empty = !nonEmpty.has(i))\n        : (f) => (f.empty = false)\n    );\n\n    // For any mark using the exclude facet mode, invert the index.\n    for (const mark of marks) {\n      if (mark.facet === \"exclude\") {\n        const facetState = facetStateByMark.get(mark);\n        if (facetState !== undefined) facetState.facetsIndex = facetExclude(facetState.facetsIndex);\n      }\n    }\n  }\n\n  // If a scale is explicitly declared in options, initialize its associated\n  // channels to the empty array; this will guarantee that a corresponding scale\n  // will be created later (even if there are no other channels). Ignore facet\n  // scale declarations, which are handled above.\n  for (const key of scaleRegistry.keys()) {\n    if (isScaleOptions(options[key]) && key !== \"fx\" && key !== \"fy\") {\n      channelsByScale.set(key, []);\n    }\n  }\n\n  // A Map from Mark instance to its render state, including:\n  // index - the data index e.g. [0, 1, 2, 3, ]\n  // channels - an array of materialized channels e.g. [[\"x\", {value}], ]\n  // faceted - a boolean indicating whether this mark is faceted\n  // values - an object of scaled values e.g. {x: [40, 32, ], }\n  const stateByMark = new Map();\n\n  // Initialize the marks state.\n  for (const mark of marks) {\n    if (stateByMark.has(mark)) throw new Error(\"duplicate mark; each mark must be unique\");\n    const {facetsIndex, channels: facetChannels} = facetStateByMark.get(mark) ?? {};\n    const {data, facets, channels} = mark.initialize(facetsIndex, facetChannels, options);\n    applyScaleTransforms(channels, options);\n    stateByMark.set(mark, {data, facets, channels});\n  }\n\n  // Initalize the scales and dimensions.\n  const scaleDescriptors = createScales(addScaleChannels(channelsByScale, stateByMark, options), options);\n  const dimensions = createDimensions(scaleDescriptors, marks, options);\n\n  autoScaleRange(scaleDescriptors, dimensions);\n\n  const scales = createScaleFunctions(scaleDescriptors);\n  const {fx, fy} = scales;\n  const subdimensions = fx || fy ? innerDimensions(scaleDescriptors, dimensions) : dimensions;\n  const superdimensions = fx || fy ? actualDimensions(scales, dimensions) : dimensions;\n\n  // Initialize the context.\n  const context = createContext(options);\n  const document = context.document;\n  const svg = creator(\"svg\").call(document.documentElement);\n  let figure = svg; // replaced with the figure element, if any\n  context.ownerSVGElement = svg;\n  context.className = className;\n  context.projection = createProjection(options, subdimensions);\n\n  // A path generator for marks that want to draw GeoJSON.\n  context.path = function () {\n    return geoPath(this.projection ?? xyProjection(scales));\n  };\n\n  // Allows e.g. the axis mark to determine faceting lazily.\n  context.filterFacets = (data, channels) => {\n    return facetFilter(facets, {channels, groups: facetGroups(data, channels)});\n  };\n\n  // Allows e.g. the tip mark to reference channels and data on other marks.\n  context.getMarkState = (mark) => {\n    const state = stateByMark.get(mark);\n    const facetState = facetStateByMark.get(mark);\n    return {...state, channels: {...state.channels, ...facetState?.channels}};\n  };\n\n  // Allows e.g. the pointer transform to support viewof.\n  context.dispatchValue = (value) => {\n    if (figure.value === value) return;\n    figure.value = value;\n    figure.dispatchEvent(new context.document.defaultView.Event(\"input\", {bubbles: true}));\n  };\n\n  // Reinitialize; for deriving channels dependent on other channels.\n  const newByScale = new Set();\n  for (const [mark, state] of stateByMark) {\n    if (mark.initializer != null) {\n      const dimensions = mark.facet === \"super\" ? superdimensions : subdimensions;\n      const update = mark.initializer(state.data, state.facets, state.channels, scales, dimensions, context);\n      if (update.data !== undefined) {\n        state.data = update.data;\n      }\n      if (update.facets !== undefined) {\n        state.facets = update.facets;\n      }\n      if (update.channels !== undefined) {\n        const {fx, fy, ...channels} = update.channels; // separate facet channels\n        inferChannelScales(channels);\n        Object.assign(state.channels, channels);\n        for (const channel of Object.values(channels)) {\n          const {scale} = channel;\n          // Initializers arent allowed to redefine position scales as this\n          // would introduce a circular dependency; so simply scale these\n          // channels as-is rather than creating new scales, and assume that\n          // they already have the scales transform applied, if any (e.g., when\n          // generating ticks for the axis mark).\n          if (scale != null && !isPosition(scaleRegistry.get(scale))) {\n            applyScaleTransform(channel, options);\n            newByScale.add(scale);\n          }\n        }\n        // If the initializer returns new mark-level facet channels, we must\n        // record that the mark is now faceted. Note: we arent actually\n        // populating the facet state, but subsequently we wont need it.\n        if (fx != null || fy != null) facetStateByMark.set(mark, true);\n      }\n    }\n  }\n\n  // Reconstruct scales if new scaled channels were created during\n  // reinitialization. Preserve existing scale labels, if any.\n  if (newByScale.size) {\n    const newChannelsByScale = new Map();\n    addScaleChannels(newChannelsByScale, stateByMark, options, (key) => newByScale.has(key));\n    addScaleChannels(channelsByScale, stateByMark, options, (key) => newByScale.has(key));\n    const newScaleDescriptors = inheritScaleLabels(createScales(newChannelsByScale, options), scaleDescriptors);\n    const {scales: newExposedScales, ...newScales} = createScaleFunctions(newScaleDescriptors);\n    Object.assign(scaleDescriptors, newScaleDescriptors);\n    Object.assign(scales, newScales);\n    Object.assign(scales.scales, newExposedScales);\n  }\n\n  // Sort and filter the facets to match the fx and fy domains; this is needed\n  // because the facets were constructed prior to the fx and fy scales.\n  let facetDomains, facetTranslate;\n  if (facets !== undefined) {\n    facetDomains = {x: fx?.domain(), y: fy?.domain()};\n    facets = recreateFacets(facets, facetDomains);\n    facetTranslate = facetTranslator(fx, fy, dimensions);\n  }\n\n  // Compute value objects, applying scales and projection as needed.\n  for (const [mark, state] of stateByMark) {\n    state.values = mark.scale(state.channels, scales, context);\n  }\n\n  const {width, height} = dimensions;\n\n  select(svg)\n    .attr(\"class\", className)\n    .attr(\"fill\", \"currentColor\")\n    .attr(\"font-family\", \"system-ui, sans-serif\")\n    .attr(\"font-size\", 10)\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n    .attr(\"viewBox\", `0 0 ${width} ${height}`)\n    .attr(\"aria-label\", ariaLabel)\n    .attr(\"aria-description\", ariaDescription)\n    .call((svg) =>\n      // Warning: if you edit this, change defaultClassName.\n      svg.append(\"style\").text(\n        `:where(.${className}) {\n  --plot-background: white;\n  display: block;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n}\n:where(.${className} text),\n:where(.${className} tspan) {\n  white-space: pre;\n}`\n      )\n    )\n    .call(applyInlineStyles, style);\n\n  // Render marks.\n  for (const mark of marks) {\n    const {channels, values, facets: indexes} = stateByMark.get(mark);\n\n    // Render a non-faceted mark.\n    if (facets === undefined || mark.facet === \"super\") {\n      let index = null;\n      if (indexes) {\n        index = indexes[0];\n        index = mark.filter(index, channels, values);\n        if (index.length === 0) continue;\n      }\n      const node = mark.render(index, scales, values, superdimensions, context);\n      if (node == null) continue;\n      svg.appendChild(node);\n    }\n\n    // Render a faceted mark.\n    else {\n      let g;\n      for (const f of facets) {\n        if (!(mark.facetAnchor?.(facets, facetDomains, f) ?? !f.empty)) continue;\n        let index = null;\n        if (indexes) {\n          const faceted = facetStateByMark.has(mark);\n          index = indexes[faceted ? f.i : 0];\n          index = mark.filter(index, channels, values);\n          if (index.length === 0) continue;\n          if (!faceted && index === indexes[0]) index = subarray(index); // copy before assigning fx, fy, fi\n          (index.fx = f.x), (index.fy = f.y), (index.fi = f.i);\n        }\n        const node = mark.render(index, scales, values, subdimensions, context);\n        if (node == null) continue;\n        // Lazily construct the shared group (to drop empty marks).\n        (g ??= select(svg).append(\"g\")).append(() => node).datum(f);\n        // Promote ARIA attributes and mark transform to avoid repetition on\n        // each facet; this assumes that these attributes are consistent across\n        // facets, but that should be the case!\n        for (const name of [\"aria-label\", \"aria-description\", \"aria-hidden\", \"transform\"]) {\n          if (node.hasAttribute(name)) {\n            g.attr(name, node.getAttribute(name));\n            node.removeAttribute(name);\n          }\n        }\n      }\n      g?.selectChildren().each(facetTranslate);\n    }\n  }\n\n  // Wrap the plot in a figure, if needed.\n  const legends = createLegends(scaleDescriptors, context, options);\n  const {figure: figured = title != null || subtitle != null || caption != null || legends.length > 0} = options;\n  if (figured) {\n    figure = document.createElement(\"figure\");\n    figure.className = `${className}-figure`;\n    figure.style.maxWidth = \"initial\"; // avoid Observable default style\n    if (title != null) figure.append(createTitleElement(document, title, \"h2\"));\n    if (subtitle != null) figure.append(createTitleElement(document, subtitle, \"h3\"));\n    figure.append(...legends, svg);\n    if (caption != null) figure.append(createFigcaption(document, caption));\n    if (\"value\" in svg) (figure.value = svg.value), delete svg.value;\n  }\n\n  figure.scale = exposeScales(scales.scales);\n  figure.legend = exposeLegends(scaleDescriptors, context, options);\n\n  const w = consumeWarnings();\n  if (w > 0) {\n    select(svg)\n      .append(\"text\")\n      .attr(\"x\", width)\n      .attr(\"y\", 20)\n      .attr(\"dy\", \"-1em\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"font-family\", \"initial\") // fix emoji rendering in Chrome\n      .text(\"\\u26a0\\ufe0f\") // emoji variation selector\n      .append(\"title\")\n      .text(`${w.toLocaleString(\"en-US\")} warning${w === 1 ? \"\" : \"s\"}. Please check the console.`);\n  }\n\n  return figure;\n}\n\nfunction createTitleElement(document, contents, tag) {\n  if (contents.ownerDocument) return contents;\n  const e = document.createElement(tag);\n  e.append(contents);\n  return e;\n}\n\nfunction createFigcaption(document, caption) {\n  const e = document.createElement(\"figcaption\");\n  e.append(caption);\n  return e;\n}\n\nfunction flatMarks(marks) {\n  return marks\n    .flat(Infinity)\n    .filter((mark) => mark != null)\n    .map(markify);\n}\n\nfunction markify(mark) {\n  return typeof mark.render === \"function\" ? mark : new Render(mark);\n}\n\nclass Render extends Mark {\n  constructor(render) {\n    if (typeof render !== \"function\") throw new TypeError(\"invalid mark; missing render function\");\n    super();\n    this.render = render;\n  }\n  render() {}\n}\n\n// Note: mutates channel.value to apply the scale transform, if any.\nfunction applyScaleTransforms(channels, options) {\n  for (const name in channels) applyScaleTransform(channels[name], options);\n  return channels;\n}\n\n// Note: mutates channel.value to apply the scale transform, if any. Also sets\n// channel.transform to false to prevent duplicate transform application.\nfunction applyScaleTransform(channel, options) {\n  const {scale, transform: t = true} = channel;\n  if (scale == null || !t) return;\n  const {\n    type,\n    percent,\n    interval,\n    transform = percent ? (x) => (x == null ? NaN : x * 100) : maybeIntervalTransform(interval, type)\n  } = options[scale] ?? {};\n  if (transform == null) return;\n  channel.value = map(channel.value, transform);\n  channel.transform = false;\n}\n\n// An initializer may generate channels without knowing how the downstream mark\n// will use them. Marks are typically responsible associated scales with\n// channels, but here we assume common behavior across marks.\nfunction inferChannelScales(channels) {\n  for (const name in channels) {\n    inferChannelScale(name, channels[name]);\n  }\n}\n\nfunction addScaleChannels(channelsByScale, stateByMark, options, filter = yes) {\n  for (const {channels} of stateByMark.values()) {\n    for (const name in channels) {\n      const channel = channels[name];\n      const {scale} = channel;\n      if (scale != null && filter(scale)) {\n        // Geo marks affect the default x and y domains if there is no\n        // projection. Skip this (as an optimization) when a projection is\n        // specified, or when the domains for x and y are specified.\n        if (scale === \"projection\") {\n          if (!hasProjection(options)) {\n            const gx = options.x?.domain === undefined;\n            const gy = options.y?.domain === undefined;\n            if (gx || gy) {\n              const [x, y] = getGeometryChannels(channel);\n              if (gx) addScaleChannel(channelsByScale, \"x\", x);\n              if (gy) addScaleChannel(channelsByScale, \"y\", y);\n            }\n          }\n        } else {\n          addScaleChannel(channelsByScale, scale, channel);\n        }\n      }\n    }\n  }\n  return channelsByScale;\n}\n\nfunction addScaleChannel(channelsByScale, scale, channel) {\n  const scaleChannels = channelsByScale.get(scale);\n  if (scaleChannels !== undefined) scaleChannels.push(channel);\n  else channelsByScale.set(scale, [channel]);\n}\n\n// Returns the facet groups, and possibly fx and fy channels, associated with\n// the top-level facet option {data, x, y}.\nfunction maybeTopFacet(facet, options) {\n  if (facet == null) return;\n  const {x, y} = facet;\n  if (x == null && y == null) return;\n  const data = dataify(facet.data);\n  if (data == null) throw new Error(\"missing facet data\");\n  const channels = {};\n  if (x != null) channels.fx = createChannel(data, {value: x, scale: \"fx\"});\n  if (y != null) channels.fy = createChannel(data, {value: y, scale: \"fy\"});\n  applyScaleTransforms(channels, options);\n  const groups = facetGroups(data, channels);\n  return {channels, groups, data: facet.data};\n}\n\n// Returns the facet groups, and possibly fx and fy channels, associated with a\n// mark, either through top-level faceting or mark-level facet options {fx, fy}.\nfunction maybeMarkFacet(mark, topFacetState, options) {\n  if (mark.facet === null || mark.facet === \"super\") return;\n\n  // This mark defines a mark-level facet. TODO Theres some code duplication\n  // here with maybeTopFacet that we could reduce.\n  const {fx, fy} = mark;\n  if (fx != null || fy != null) {\n    const data = dataify(mark.data ?? fx ?? fy);\n    if (data === undefined) throw new Error(`missing facet data in ${mark.ariaLabel}`);\n    if (data === null) return; // ignore channel definitions if no data is provided TODO this right?\n    const channels = {};\n    if (fx != null) channels.fx = createChannel(data, {value: fx, scale: \"fx\"});\n    if (fy != null) channels.fy = createChannel(data, {value: fy, scale: \"fy\"});\n    applyScaleTransforms(channels, options);\n    return {channels, groups: facetGroups(data, channels)};\n  }\n\n  // This mark links to a top-level facet, if present.\n  if (topFacetState === undefined) return;\n\n  // TODO Can we link the top-level facet channels here?\n  const {channels, groups, data} = topFacetState;\n  if (mark.facet !== \"auto\" || mark.data === data) return {channels, groups};\n\n  // Warn for the common pitfall of wanting to facet mapped data with the\n  // top-level facet option.\n  if (\n    data.length > 0 &&\n    (groups.size > 1 || (groups.size === 1 && channels.fx && channels.fy && [...groups][0][1].size > 1)) &&\n    lengthof(dataify(mark.data)) === lengthof(data)\n  ) {\n    warn(\n      `Warning: the ${mark.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is \"auto\", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`\n    );\n  }\n}\n\nfunction derive(mark, options = {}) {\n  return initializer({...options, x: null, y: null}, (data, facets, channels, scales, dimensions, context) => {\n    return context.getMarkState(mark);\n  });\n}\n\nfunction inferTips(marks) {\n  const tips = [];\n  for (const mark of marks) {\n    let tipOptions = mark.tip;\n    if (tipOptions) {\n      if (tipOptions === true) tipOptions = {};\n      else if (typeof tipOptions === \"string\") tipOptions = {pointer: tipOptions};\n      let {pointer: p, preferredAnchor: a} = tipOptions;\n      p = /^x$/i.test(p) ? pointerX : /^y$/i.test(p) ? pointerY : pointer; // TODO validate?\n      tipOptions = p(derive(mark, tipOptions));\n      tipOptions.title = null; // prevent implicit title for primitive data\n      if (a === undefined) tipOptions.preferredAnchor = p === pointerY ? \"left\" : \"bottom\";\n      const t = tip(mark.data, tipOptions);\n      t.facet = mark.facet; // inherit facet settings\n      t.facetAnchor = mark.facetAnchor; // inherit facet settings\n      tips.push(t);\n    }\n  }\n  return tips;\n}\n\nfunction inferAxes(marks, channelsByScale, options) {\n  let {\n    projection,\n    x = {},\n    y = {},\n    fx = {},\n    fy = {},\n    axis,\n    grid,\n    facet = {},\n    facet: {axis: facetAxis = axis, grid: facetGrid} = facet,\n    x: {axis: xAxis = axis, grid: xGrid = xAxis === null ? null : grid} = x,\n    y: {axis: yAxis = axis, grid: yGrid = yAxis === null ? null : grid} = y,\n    fx: {axis: fxAxis = facetAxis, grid: fxGrid = fxAxis === null ? null : facetGrid} = fx,\n    fy: {axis: fyAxis = facetAxis, grid: fyGrid = fyAxis === null ? null : facetGrid} = fy\n  } = options;\n\n  // Disable axes if the corresponding scale is not present.\n  if (projection || (!isScaleOptions(x) && !hasPositionChannel(\"x\", marks))) xAxis = xGrid = null;\n  if (projection || (!isScaleOptions(y) && !hasPositionChannel(\"y\", marks))) yAxis = yGrid = null;\n  if (!channelsByScale.has(\"fx\")) fxAxis = fxGrid = null;\n  if (!channelsByScale.has(\"fy\")) fyAxis = fyGrid = null;\n\n  // Resolve the default implicit axes by checking for explicit ones.\n  if (xAxis === undefined) xAxis = !hasAxis(marks, \"x\");\n  if (yAxis === undefined) yAxis = !hasAxis(marks, \"y\");\n  if (fxAxis === undefined) fxAxis = !hasAxis(marks, \"fx\");\n  if (fyAxis === undefined) fyAxis = !hasAxis(marks, \"fy\");\n\n  // Resolve the default orientation of axes.\n  if (xAxis === true) xAxis = \"bottom\";\n  if (yAxis === true) yAxis = \"left\";\n  if (fxAxis === true) fxAxis = xAxis === \"top\" || xAxis === null ? \"bottom\" : \"top\";\n  if (fyAxis === true) fyAxis = yAxis === \"right\" || yAxis === null ? \"left\" : \"right\";\n\n  const axes = [];\n  maybeGrid(axes, fyGrid, gridFy, fy);\n  maybeAxis(axes, fyAxis, axisFy, \"right\", \"left\", facet, fy);\n  maybeGrid(axes, fxGrid, gridFx, fx);\n  maybeAxis(axes, fxAxis, axisFx, \"top\", \"bottom\", facet, fx);\n  maybeGrid(axes, yGrid, gridY, y);\n  maybeAxis(axes, yAxis, axisY, \"left\", \"right\", options, y);\n  maybeGrid(axes, xGrid, gridX, x);\n  maybeAxis(axes, xAxis, axisX, \"bottom\", \"top\", options, x);\n  return axes;\n}\n\nfunction maybeAxis(axes, axis, axisType, primary, secondary, defaults, options) {\n  if (!axis) return;\n  const both = isBoth(axis);\n  options = axisOptions(both ? primary : axis, defaults, options);\n  const {line} = options;\n  if ((axisType === axisY || axisType === axisX) && line && !isNone(line)) axes.push(frame(lineOptions(options)));\n  axes.push(axisType(options));\n  if (both) axes.push(axisType({...options, anchor: secondary, label: null}));\n}\n\nfunction maybeGrid(axes, grid, gridType, options) {\n  if (!grid || isNone(grid)) return;\n  axes.push(gridType(gridOptions(grid, options)));\n}\n\nfunction isBoth(value) {\n  return /^\\s*both\\s*$/i.test(value);\n}\n\nfunction axisOptions(\n  anchor,\n  defaults,\n  {\n    line = defaults.line,\n    ticks,\n    tickSize,\n    tickSpacing,\n    tickPadding,\n    tickFormat,\n    tickRotate,\n    fontVariant,\n    ariaLabel,\n    ariaDescription,\n    label = defaults.label,\n    labelAnchor,\n    labelArrow = defaults.labelArrow,\n    labelOffset\n  }\n) {\n  return {\n    anchor,\n    line,\n    ticks,\n    tickSize,\n    tickSpacing,\n    tickPadding,\n    tickFormat,\n    tickRotate,\n    fontVariant,\n    ariaLabel,\n    ariaDescription,\n    label,\n    labelAnchor,\n    labelArrow,\n    labelOffset\n  };\n}\n\nfunction lineOptions(options) {\n  const {anchor, line} = options;\n  return {anchor, facetAnchor: anchor + \"-empty\", stroke: line === true ? undefined : line};\n}\n\nfunction gridOptions(\n  grid,\n  {\n    stroke = isColor(grid) ? grid : undefined,\n    ticks = isGridTicks(grid) ? grid : undefined,\n    tickSpacing,\n    ariaLabel,\n    ariaDescription\n  }\n) {\n  return {\n    stroke,\n    ticks,\n    tickSpacing,\n    ariaLabel,\n    ariaDescription\n  };\n}\n\nfunction isGridTicks(grid) {\n  switch (typeof grid) {\n    case \"number\":\n      return true;\n    case \"string\":\n      return !isColor(grid);\n  }\n  return isIterable(grid) || typeof grid?.range === \"function\";\n}\n\n// Is there an explicit axis already present? TODO We probably want a more\n// explicit test than looking for the ARIA label, but it does afford some\n// flexibility in axis implementation which is nice.\nfunction hasAxis(marks, k) {\n  const prefix = `${k}-axis `;\n  return marks.some((m) => m.ariaLabel?.startsWith(prefix));\n}\n\nfunction hasPositionChannel(k, marks) {\n  for (const mark of marks) {\n    for (const key in mark.channels) {\n      const {scale} = mark.channels[key];\n      if (scale === k || scale === \"projection\") {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction inheritScaleLabels(newScales, scales) {\n  for (const key in newScales) {\n    const newScale = newScales[key];\n    const scale = scales[key];\n    if (newScale.label === undefined && scale) {\n      newScale.label = scale.label;\n    }\n  }\n  return newScales;\n}\n\n// This differs from the other outerDimensions in that it accounts for rounding\n// and outer padding in the facet scales; we want the frame to align exactly\n// with the actual range, not the desired range.\nfunction actualDimensions({fx, fy}, dimensions) {\n  const {marginTop, marginRight, marginBottom, marginLeft, width, height} = outerDimensions(dimensions);\n  const fxr = fx && outerRange(fx);\n  const fyr = fy && outerRange(fy);\n  return {\n    marginTop: fy ? fyr[0] : marginTop,\n    marginRight: fx ? width - fxr[1] : marginRight,\n    marginBottom: fy ? height - fyr[1] : marginBottom,\n    marginLeft: fx ? fxr[0] : marginLeft,\n    // Some marks, namely the x- and y-axis labels, want to know what the\n    // desired (rather than actual) margins are for positioning.\n    inset: {\n      marginTop: dimensions.marginTop,\n      marginRight: dimensions.marginRight,\n      marginBottom: dimensions.marginBottom,\n      marginLeft: dimensions.marginLeft\n    },\n    width,\n    height\n  };\n}\n\nfunction outerRange(scale) {\n  const domain = scale.domain();\n  if (domain.length === 0) return [0, scale.bandwidth()];\n  let x1 = scale(domain[0]);\n  let x2 = scale(domain[domain.length - 1]);\n  if (x2 < x1) [x1, x2] = [x2, x1];\n  return [x1, x2 + scale.bandwidth()];\n}\n","import {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveBundle,\n  curveBumpX,\n  curveBumpY,\n  curveCardinal,\n  curveCardinalClosed,\n  curveCardinalOpen,\n  curveCatmullRom,\n  curveCatmullRomClosed,\n  curveCatmullRomOpen,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore\n} from \"d3\";\n\nconst curves = new Map([\n  [\"basis\", curveBasis],\n  [\"basis-closed\", curveBasisClosed],\n  [\"basis-open\", curveBasisOpen],\n  [\"bundle\", curveBundle],\n  [\"bump-x\", curveBumpX],\n  [\"bump-y\", curveBumpY],\n  [\"cardinal\", curveCardinal],\n  [\"cardinal-closed\", curveCardinalClosed],\n  [\"cardinal-open\", curveCardinalOpen],\n  [\"catmull-rom\", curveCatmullRom],\n  [\"catmull-rom-closed\", curveCatmullRomClosed],\n  [\"catmull-rom-open\", curveCatmullRomOpen],\n  [\"linear\", curveLinear],\n  [\"linear-closed\", curveLinearClosed],\n  [\"monotone-x\", curveMonotoneX],\n  [\"monotone-y\", curveMonotoneY],\n  [\"natural\", curveNatural],\n  [\"step\", curveStep],\n  [\"step-after\", curveStepAfter],\n  [\"step-before\", curveStepBefore]\n]);\n\nexport function maybeCurve(curve = curveLinear, tension) {\n  if (typeof curve === \"function\") return curve; // custom curve\n  const c = curves.get(`${curve}`.toLowerCase());\n  if (!c) throw new Error(`unknown curve: ${curve}`);\n  if (tension !== undefined) {\n    if (\"beta\" in c) {\n      return c.beta(tension);\n    } else if (\"tension\" in c) {\n      return c.tension(tension);\n    } else if (\"alpha\" in c) {\n      return c.alpha(tension);\n    }\n  }\n  return c;\n}\n\n// For the auto curve, return a symbol instead of a curve implementation;\n// well use d3.geoPath to render if theres a projection.\nexport function maybeCurveAuto(curve = curveAuto, tension) {\n  return typeof curve !== \"function\" && `${curve}`.toLowerCase() === \"auto\" ? curveAuto : maybeCurve(curve, tension);\n}\n\n// This is a special built-in curve that will use d3.geoPath when there is a\n// projection, and the linear curve when there is not. You can explicitly\n// opt-out of d3.geoPath and instead use d3.line with the \"linear\" curve.\nexport function curveAuto(context) {\n  return curveLinear(context);\n}\n","import {\n  bisect,\n  extent,\n  thresholdFreedmanDiaconis,\n  thresholdScott,\n  thresholdSturges,\n  tickIncrement,\n  ticks,\n  utcTickInterval\n} from \"d3\";\nimport {withTip} from \"../mark.js\";\nimport {\n  coerceDate,\n  coerceNumbers,\n  identity,\n  isInterval,\n  isIterable,\n  isTemporal,\n  isTimeInterval,\n  labelof,\n  map,\n  maybeApplyInterval,\n  maybeColorChannel,\n  maybeColumn,\n  maybeRangeInterval,\n  maybeTuple,\n  maybeValue,\n  mid,\n  valueof\n} from \"../options.js\";\nimport {utcInterval} from \"../time.js\";\nimport {basic} from \"./basic.js\";\nimport {\n  hasOutput,\n  maybeEvaluator,\n  maybeGroup,\n  maybeOutput,\n  maybeOutputs,\n  maybeReduce,\n  maybeSort,\n  maybeSubgroup,\n  reduceCount,\n  reduceFirst,\n  reduceIdentity,\n  reduceZ\n} from \"./group.js\";\nimport {maybeInsetX, maybeInsetY} from \"./inset.js\";\n\n// Group on {z, fill, stroke}, then optionally on y, then bin x.\nexport function binX(outputs = {y: \"count\"}, options = {}) {\n  [outputs, options] = mergeOptions(outputs, options);\n  const {x, y} = options;\n  return binn(maybeBinValue(x, options, identity), null, null, y, outputs, maybeInsetX(options));\n}\n\n// Group on {z, fill, stroke}, then optionally on x, then bin y.\nexport function binY(outputs = {x: \"count\"}, options = {}) {\n  [outputs, options] = mergeOptions(outputs, options);\n  const {x, y} = options;\n  return binn(null, maybeBinValue(y, options, identity), x, null, outputs, maybeInsetY(options));\n}\n\n// Group on {z, fill, stroke}, then bin on x and y.\nexport function bin(outputs = {fill: \"count\"}, options = {}) {\n  [outputs, options] = mergeOptions(outputs, options);\n  const {x, y} = maybeBinValueTuple(options);\n  return binn(x, y, null, null, outputs, maybeInsetX(maybeInsetY(options)));\n}\n\nfunction maybeDenseInterval(bin, k, options = {}) {\n  if (options?.interval == null) return options;\n  const {reduce = reduceFirst} = options;\n  const outputs = {filter: null};\n  if (options[k] != null) outputs[k] = reduce;\n  if (options[`${k}1`] != null) outputs[`${k}1`] = reduce;\n  if (options[`${k}2`] != null) outputs[`${k}2`] = reduce;\n  return bin(outputs, options);\n}\n\nexport function maybeDenseIntervalX(options = {}) {\n  return maybeDenseInterval(binX, \"y\", withTip(options, \"x\"));\n}\n\nexport function maybeDenseIntervalY(options = {}) {\n  return maybeDenseInterval(binY, \"x\", withTip(options, \"y\"));\n}\n\nfunction binn(\n  bx, // optionally bin on x (exclusive with gx)\n  by, // optionally bin on y (exclusive with gy)\n  gx, // optionally group on x (exclusive with bx and gy)\n  gy, // optionally group on y (exclusive with by and gx)\n  {\n    data: reduceData = reduceIdentity, // TODO avoid materializing when unused?\n    filter = reduceCount, // return only non-empty bins by default\n    sort,\n    reverse,\n    ...outputs // output channel definitions\n  } = {},\n  inputs = {} // input channels and options\n) {\n  bx = maybeBin(bx);\n  by = maybeBin(by);\n\n  // Compute the outputs.\n  outputs = maybeBinOutputs(outputs, inputs);\n  reduceData = maybeBinReduce(reduceData, identity);\n  sort = sort == null ? undefined : maybeBinOutput(\"sort\", sort, inputs);\n  filter = filter == null ? undefined : maybeBinEvaluator(\"filter\", filter, inputs);\n\n  // Dont group on a channel if an output requires it as an input!\n  if (gx != null && hasOutput(outputs, \"x\", \"x1\", \"x2\")) gx = null;\n  if (gy != null && hasOutput(outputs, \"y\", \"y1\", \"y2\")) gy = null;\n\n  // Produce x1, x2, y1, and y2 output channels as appropriate (when binning).\n  const [BX1, setBX1] = maybeColumn(bx);\n  const [BX2, setBX2] = maybeColumn(bx);\n  const [BY1, setBY1] = maybeColumn(by);\n  const [BY2, setBY2] = maybeColumn(by);\n\n  // Produce x or y output channels as appropriate (when grouping).\n  const [k, gk] = gx != null ? [gx, \"x\"] : gy != null ? [gy, \"y\"] : [];\n  const [GK, setGK] = maybeColumn(k);\n\n  // Greedily materialize the z, fill, and stroke channels (if channels and not\n  // constants) so that we can reference them for subdividing groups without\n  // computing them more than once. We also want to consume options that should\n  // only apply to this transform rather than passing them through to the next.\n  const {\n    x,\n    y,\n    z,\n    fill,\n    stroke,\n    x1,\n    x2, // consumed if x is an output\n    y1,\n    y2, // consumed if y is an output\n    domain,\n    cumulative,\n    thresholds,\n    interval,\n    ...options\n  } = inputs;\n  const [GZ, setGZ] = maybeColumn(z);\n  const [vfill] = maybeColorChannel(fill);\n  const [vstroke] = maybeColorChannel(stroke);\n  const [GF, setGF] = maybeColumn(vfill);\n  const [GS, setGS] = maybeColumn(vstroke);\n\n  return {\n    ...(\"z\" in inputs && {z: GZ || z}),\n    ...(\"fill\" in inputs && {fill: GF || fill}),\n    ...(\"stroke\" in inputs && {stroke: GS || stroke}),\n    ...basic(options, (data, facets, plotOptions) => {\n      const K = maybeApplyInterval(valueof(data, k), plotOptions?.[gk]);\n      const Z = valueof(data, z);\n      const F = valueof(data, vfill);\n      const S = valueof(data, vstroke);\n      const G = maybeSubgroup(outputs, {z: Z, fill: F, stroke: S});\n      const groupFacets = [];\n      const groupData = [];\n      const GK = K && setGK([]);\n      const GZ = Z && setGZ([]);\n      const GF = F && setGF([]);\n      const GS = S && setGS([]);\n      const BX1 = bx && setBX1([]);\n      const BX2 = bx && setBX2([]);\n      const BY1 = by && setBY1([]);\n      const BY2 = by && setBY2([]);\n      const bin = bing(bx, by, data);\n      let i = 0;\n      for (const o of outputs) o.initialize(data);\n      if (sort) sort.initialize(data);\n      if (filter) filter.initialize(data);\n      for (const facet of facets) {\n        const groupFacet = [];\n        for (const o of outputs) o.scope(\"facet\", facet);\n        if (sort) sort.scope(\"facet\", facet);\n        if (filter) filter.scope(\"facet\", facet);\n        for (const [f, I] of maybeGroup(facet, G)) {\n          for (const [k, g] of maybeGroup(I, K)) {\n            for (const [b, extent] of bin(g)) {\n              if (G) extent.z = f;\n              if (filter && !filter.reduce(b, extent)) continue;\n              groupFacet.push(i++);\n              groupData.push(reduceData.reduceIndex(b, data, extent));\n              if (K) GK.push(k);\n              if (Z) GZ.push(G === Z ? f : Z[(b.length > 0 ? b : g)[0]]);\n              if (F) GF.push(G === F ? f : F[(b.length > 0 ? b : g)[0]]);\n              if (S) GS.push(G === S ? f : S[(b.length > 0 ? b : g)[0]]);\n              if (BX1) BX1.push(extent.x1), BX2.push(extent.x2);\n              if (BY1) BY1.push(extent.y1), BY2.push(extent.y2);\n              for (const o of outputs) o.reduce(b, extent);\n              if (sort) sort.reduce(b, extent);\n            }\n          }\n        }\n        groupFacets.push(groupFacet);\n      }\n      maybeSort(groupFacets, sort, reverse);\n      return {data: groupData, facets: groupFacets};\n    }),\n    ...(!hasOutput(outputs, \"x\") && (BX1 ? {x1: BX1, x2: BX2, x: mid(BX1, BX2)} : {x, x1, x2})),\n    ...(!hasOutput(outputs, \"y\") && (BY1 ? {y1: BY1, y2: BY2, y: mid(BY1, BY2)} : {y, y1, y2})),\n    ...(GK && {[gk]: GK}),\n    ...Object.fromEntries(outputs.map(({name, output}) => [name, output]))\n  };\n}\n\n// Allow bin options to be specified as part of outputs; merge them into options.\nfunction mergeOptions({cumulative, domain, thresholds, interval, ...outputs}, options) {\n  return [outputs, {cumulative, domain, thresholds, interval, ...options}];\n}\n\nfunction maybeBinValue(value, {cumulative, domain, thresholds, interval}, defaultValue) {\n  value = {...maybeValue(value)};\n  if (value.domain === undefined) value.domain = domain;\n  if (value.cumulative === undefined) value.cumulative = cumulative;\n  if (value.thresholds === undefined) value.thresholds = thresholds;\n  if (value.interval === undefined) value.interval = interval;\n  if (value.value === undefined) value.value = defaultValue;\n  value.thresholds = maybeThresholds(value.thresholds, value.interval);\n  return value;\n}\n\nfunction maybeBinValueTuple(options) {\n  let {x, y} = options;\n  x = maybeBinValue(x, options);\n  y = maybeBinValue(y, options);\n  [x.value, y.value] = maybeTuple(x.value, y.value);\n  return {x, y};\n}\n\nfunction maybeBin(options) {\n  if (options == null) return;\n  const {value, cumulative, domain = extent, thresholds} = options;\n  const bin = (data) => {\n    let V = valueof(data, value);\n    let T; // bin thresholds\n    if (isTemporal(V) || isTimeThresholds(thresholds)) {\n      V = map(V, coerceDate, Float64Array); // like coerceDates, but faster\n      let [min, max] = typeof domain === \"function\" ? domain(V) : domain;\n      let t = typeof thresholds === \"function\" && !isInterval(thresholds) ? thresholds(V, min, max) : thresholds;\n      if (typeof t === \"number\") t = utcTickInterval(min, max, t);\n      if (isInterval(t)) {\n        if (domain === extent) {\n          min = t.floor(min);\n          max = t.offset(t.floor(max));\n        }\n        t = t.range(min, t.offset(max));\n      }\n      T = t;\n    } else {\n      V = coerceNumbers(V);\n      let [min, max] = typeof domain === \"function\" ? domain(V) : domain;\n      let t = typeof thresholds === \"function\" && !isInterval(thresholds) ? thresholds(V, min, max) : thresholds;\n      if (typeof t === \"number\") {\n        // This differs from d3.ticks with regard to exclusive bounds: we want a\n        // first threshold less than or equal to the minimum, and a last\n        // threshold (strictly) greater than the maximum.\n        if (domain === extent) {\n          let step = tickIncrement(min, max, t);\n          if (isFinite(step)) {\n            if (step > 0) {\n              let r0 = Math.round(min / step);\n              let r1 = Math.round(max / step);\n              if (!(r0 * step <= min)) --r0;\n              if (!(r1 * step > max)) ++r1;\n              let n = r1 - r0 + 1;\n              t = new Float64Array(n);\n              for (let i = 0; i < n; ++i) t[i] = (r0 + i) * step;\n            } else if (step < 0) {\n              step = -step;\n              let r0 = Math.round(min * step);\n              let r1 = Math.round(max * step);\n              if (!(r0 / step <= min)) --r0;\n              if (!(r1 / step > max)) ++r1;\n              let n = r1 - r0 + 1;\n              t = new Float64Array(n);\n              for (let i = 0; i < n; ++i) t[i] = (r0 + i) / step;\n            } else {\n              t = [min];\n            }\n          } else {\n            t = [min];\n          }\n        } else {\n          t = ticks(min, max, t);\n        }\n      } else if (isInterval(t)) {\n        if (domain === extent) {\n          min = t.floor(min);\n          max = t.offset(t.floor(max));\n        }\n        t = t.range(min, t.offset(max));\n      }\n      T = t;\n    }\n    const E = [];\n    if (T.length === 1) E.push([T[0], T[0]]); // collapsed domain\n    else for (let i = 1; i < T.length; ++i) E.push([T[i - 1], T[i]]);\n    E.bin = (cumulative < 0 ? bin1cn : cumulative > 0 ? bin1cp : bin1)(E, T, V);\n    return E;\n  };\n  bin.label = labelof(value);\n  return bin;\n}\n\nexport function maybeThresholds(thresholds, interval, defaultThresholds = thresholdAuto) {\n  if (thresholds === undefined) {\n    return interval === undefined ? defaultThresholds : maybeRangeInterval(interval);\n  }\n  if (typeof thresholds === \"string\") {\n    switch (thresholds.toLowerCase()) {\n      case \"freedman-diaconis\":\n        return thresholdFreedmanDiaconis;\n      case \"scott\":\n        return thresholdScott;\n      case \"sturges\":\n        return thresholdSturges;\n      case \"auto\":\n        return thresholdAuto;\n    }\n    return utcInterval(thresholds);\n  }\n  return thresholds; // pass array, count, or function to bin.thresholds\n}\n\nfunction maybeBinOutputs(outputs, inputs) {\n  return maybeOutputs(outputs, inputs, maybeBinOutput);\n}\n\nfunction maybeBinOutput(name, reduce, inputs) {\n  return maybeOutput(name, reduce, inputs, maybeBinEvaluator);\n}\n\nfunction maybeBinEvaluator(name, reduce, inputs) {\n  return maybeEvaluator(name, reduce, inputs, maybeBinReduce);\n}\n\nfunction maybeBinReduce(reduce, value) {\n  return maybeReduce(reduce, value, maybeBinReduceFallback);\n}\n\nfunction maybeBinReduceFallback(reduce) {\n  switch (`${reduce}`.toLowerCase()) {\n    case \"x\":\n      return reduceX;\n    case \"x1\":\n      return reduceX1;\n    case \"x2\":\n      return reduceX2;\n    case \"y\":\n      return reduceY;\n    case \"y1\":\n      return reduceY1;\n    case \"y2\":\n      return reduceY2;\n    case \"z\":\n      return reduceZ;\n  }\n  throw new Error(`invalid bin reduce: ${reduce}`);\n}\n\nfunction thresholdAuto(values, min, max) {\n  return Math.min(200, thresholdScott(values, min, max));\n}\n\nfunction isTimeThresholds(t) {\n  return isTimeInterval(t) || (isIterable(t) && isTemporal(t));\n}\n\nfunction bing(bx, by, data) {\n  const EX = bx?.(data);\n  const EY = by?.(data);\n  return EX && EY\n    ? function* (I) {\n        const X = EX.bin(I); // first bin on x\n        for (const [ix, [x1, x2]] of EX.entries()) {\n          const Y = EY.bin(X[ix]); // then bin on y\n          for (const [iy, [y1, y2]] of EY.entries()) {\n            yield [Y[iy], {data, x1, y1, x2, y2}];\n          }\n        }\n      }\n    : EX\n    ? function* (I) {\n        const X = EX.bin(I);\n        for (const [i, [x1, x2]] of EX.entries()) {\n          yield [X[i], {data, x1, x2}];\n        }\n      }\n    : function* (I) {\n        const Y = EY.bin(I);\n        for (const [i, [y1, y2]] of EY.entries()) {\n          yield [Y[i], {data, y1, y2}];\n        }\n      };\n}\n\n// non-cumulative distribution\nfunction bin1(E, T, V) {\n  T = coerceNumbers(T); // for faster bisection\n  return (I) => {\n    const B = E.map(() => []);\n    for (const i of I) B[bisect(T, V[i]) - 1]?.push(i); // TODO quantization?\n    return B;\n  };\n}\n\n// cumulative distribution\nfunction bin1cp(E, T, V) {\n  const bin = bin1(E, T, V);\n  return (I) => {\n    const B = bin(I);\n    for (let i = 1, n = B.length; i < n; ++i) {\n      const C = B[i - 1];\n      const b = B[i];\n      for (const j of C) b.push(j);\n    }\n    return B;\n  };\n}\n\n// complementary cumulative distribution\nfunction bin1cn(E, T, V) {\n  const bin = bin1(E, T, V);\n  return (I) => {\n    const B = bin(I);\n    for (let i = B.length - 2; i >= 0; --i) {\n      const C = B[i + 1];\n      const b = B[i];\n      for (const j of C) b.push(j);\n    }\n    return B;\n  };\n}\n\nfunction mid1(x1, x2) {\n  const m = (+x1 + +x2) / 2;\n  return x1 instanceof Date ? new Date(m) : m;\n}\n\nconst reduceX = {\n  reduceIndex(I, X, {x1, x2}) {\n    return mid1(x1, x2);\n  }\n};\n\nconst reduceY = {\n  reduceIndex(I, X, {y1, y2}) {\n    return mid1(y1, y2);\n  }\n};\n\nconst reduceX1 = {\n  reduceIndex(I, X, {x1}) {\n    return x1;\n  }\n};\n\nconst reduceX2 = {\n  reduceIndex(I, X, {x2}) {\n    return x2;\n  }\n};\n\nconst reduceY1 = {\n  reduceIndex(I, X, {y1}) {\n    return y1;\n  }\n};\n\nconst reduceY2 = {\n  reduceIndex(I, X, {y2}) {\n    return y2;\n  }\n};\n","import {area as shapeArea} from \"d3\";\nimport {create} from \"../context.js\";\nimport {maybeCurve} from \"../curve.js\";\nimport {Mark} from \"../mark.js\";\nimport {first, indexOf, maybeZ, second} from \"../options.js\";\nimport {\n  applyDirectStyles,\n  applyIndirectStyles,\n  applyTransform,\n  applyGroupedChannelStyles,\n  groupIndex\n} from \"../style.js\";\nimport {maybeDenseIntervalX, maybeDenseIntervalY} from \"../transforms/bin.js\";\nimport {maybeIdentityX, maybeIdentityY} from \"../transforms/identity.js\";\nimport {maybeStackX, maybeStackY} from \"../transforms/stack.js\";\n\nconst defaults = {\n  ariaLabel: \"area\",\n  strokeWidth: 1,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeMiterlimit: 1\n};\n\nexport class Area extends Mark {\n  constructor(data, options = {}) {\n    const {x1, y1, x2, y2, z, curve, tension} = options;\n    super(\n      data,\n      {\n        x1: {value: x1, scale: \"x\"},\n        y1: {value: y1, scale: \"y\"},\n        x2: {value: x2, scale: \"x\", optional: true},\n        y2: {value: y2, scale: \"y\", optional: true},\n        z: {value: maybeZ(options), optional: true}\n      },\n      options,\n      defaults\n    );\n    this.z = z;\n    this.curve = maybeCurve(curve, tension);\n  }\n  filter(index) {\n    return index;\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x1: X1, y1: Y1, x2: X2 = X1, y2: Y2 = Y1} = channels;\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, scales, 0, 0)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(groupIndex(index, [X1, Y1, X2, Y2], this, channels))\n          .enter()\n          .append(\"path\")\n          .call(applyDirectStyles, this)\n          .call(applyGroupedChannelStyles, this, channels)\n          .attr(\n            \"d\",\n            shapeArea()\n              .curve(this.curve)\n              .defined((i) => i >= 0)\n              .x0((i) => X1[i])\n              .y0((i) => Y1[i])\n              .x1((i) => X2[i])\n              .y1((i) => Y2[i])\n          )\n      )\n      .node();\n  }\n}\n\nexport function area(data, options) {\n  if (options === undefined) return areaY(data, {x: first, y: second});\n  return new Area(data, options);\n}\n\nexport function areaX(data, options) {\n  const {y = indexOf, ...rest} = maybeDenseIntervalY(options);\n  return new Area(data, maybeStackX(maybeIdentityX({...rest, y1: y, y2: undefined}, y === indexOf ? \"x2\" : \"x\")));\n}\n\nexport function areaY(data, options) {\n  const {x = indexOf, ...rest} = maybeDenseIntervalX(options);\n  return new Area(data, maybeStackY(maybeIdentityY({...rest, x1: x, x2: undefined}, x === indexOf ? \"y2\" : \"y\")));\n}\n","import {pathRound as path} from \"d3\";\nimport {create} from \"../context.js\";\nimport {curveAuto, maybeCurveAuto} from \"../curve.js\";\nimport {Mark} from \"../mark.js\";\nimport {markers, applyMarkers} from \"../marker.js\";\nimport {coerceNumbers} from \"../options.js\";\nimport {applyChannelStyles, applyDirectStyles, applyIndirectStyles, applyTransform} from \"../style.js\";\n\nconst defaults = {\n  ariaLabel: \"link\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeMiterlimit: 1\n};\n\nexport class Link extends Mark {\n  constructor(data, options = {}) {\n    const {x1, y1, x2, y2, curve, tension} = options;\n    super(\n      data,\n      {\n        x1: {value: x1, scale: \"x\"},\n        y1: {value: y1, scale: \"y\"},\n        x2: {value: x2, scale: \"x\", optional: true},\n        y2: {value: y2, scale: \"y\", optional: true}\n      },\n      options,\n      defaults\n    );\n    this.curve = maybeCurveAuto(curve, tension);\n    markers(this, options);\n  }\n  project(channels, values, context) {\n    // For the auto curve, projection is handled at render.\n    if (this.curve !== curveAuto) {\n      super.project(channels, values, context);\n    }\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x1: X1, y1: Y1, x2: X2 = X1, y2: Y2 = Y1} = channels;\n    const {curve} = this;\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, scales)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(\"path\")\n          .call(applyDirectStyles, this)\n          .attr(\n            \"d\",\n            curve === curveAuto && context.projection\n              ? sphereLink(context.path(), X1, Y1, X2, Y2)\n              : (i) => {\n                  const p = path();\n                  const c = curve(p);\n                  c.lineStart();\n                  c.point(X1[i], Y1[i]);\n                  c.point(X2[i], Y2[i]);\n                  c.lineEnd();\n                  return p;\n                }\n          )\n          .call(applyChannelStyles, this, channels)\n          .call(applyMarkers, this, channels, context)\n      )\n      .node();\n  }\n}\n\nfunction sphereLink(path, X1, Y1, X2, Y2) {\n  X1 = coerceNumbers(X1);\n  Y1 = coerceNumbers(Y1);\n  X2 = coerceNumbers(X2);\n  Y2 = coerceNumbers(Y2);\n  return (i) =>\n    path({\n      type: \"LineString\",\n      coordinates: [\n        [X1[i], Y1[i]],\n        [X2[i], Y2[i]]\n      ]\n    });\n}\n\nexport function link(data, {x, x1, x2, y, y1, y2, ...options} = {}) {\n  [x1, x2] = maybeSameValue(x, x1, x2);\n  [y1, y2] = maybeSameValue(y, y1, y2);\n  return new Link(data, {...options, x1, x2, y1, y2});\n}\n\n// If x1 and x2 are specified, return them as {x1, x2}.\n// If x and x1 and specified, or x and x2 are specified, return them as {x1, x2}.\n// If only x, x1, or x2 are specified, return it as {x1}.\nexport function maybeSameValue(x, x1, x2) {\n  if (x === undefined) {\n    if (x1 === undefined) {\n      if (x2 !== undefined) return [x2];\n    } else {\n      if (x2 === undefined) return [x1];\n    }\n  } else if (x1 === undefined) {\n    return x2 === undefined ? [x] : [x, x2];\n  } else if (x2 === undefined) {\n    return [x, x1];\n  }\n  return [x1, x2];\n}\n","import {ascending, descending} from \"d3\";\nimport {create} from \"../context.js\";\nimport {Mark} from \"../mark.js\";\nimport {radians} from \"../math.js\";\nimport {constant, keyword} from \"../options.js\";\nimport {applyChannelStyles, applyDirectStyles, applyIndirectStyles, applyTransform} from \"../style.js\";\nimport {maybeSameValue} from \"./link.js\";\n\nconst defaults = {\n  ariaLabel: \"arrow\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeLinecap: \"round\",\n  strokeMiterlimit: 1,\n  strokeWidth: 1.5\n};\n\nexport class Arrow extends Mark {\n  constructor(data, options = {}) {\n    const {\n      x1,\n      y1,\n      x2,\n      y2,\n      bend = 0,\n      headAngle = 60,\n      headLength = 8, // Disable the arrow with headLength = 0; or, use Plot.link.\n      inset = 0,\n      insetStart = inset,\n      insetEnd = inset,\n      sweep\n    } = options;\n    super(\n      data,\n      {\n        x1: {value: x1, scale: \"x\"},\n        y1: {value: y1, scale: \"y\"},\n        x2: {value: x2, scale: \"x\", optional: true},\n        y2: {value: y2, scale: \"y\", optional: true}\n      },\n      options,\n      defaults\n    );\n    this.bend = bend === true ? 22.5 : Math.max(-90, Math.min(90, bend));\n    this.headAngle = +headAngle;\n    this.headLength = +headLength;\n    this.insetStart = +insetStart;\n    this.insetEnd = +insetEnd;\n    this.sweep = maybeSweep(sweep);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x1: X1, y1: Y1, x2: X2 = X1, y2: Y2 = Y1, SW} = channels;\n    const {strokeWidth, bend, headAngle, headLength, insetStart, insetEnd} = this;\n    const sw = SW ? (i) => SW[i] : constant(strokeWidth === undefined ? 1 : strokeWidth);\n\n    // The angle between the arrows shaft and one of the wings; the head\n    // angle between the wings is twice this value.\n    const wingAngle = (headAngle * radians) / 2;\n\n    // The length of the arrowheads wings (the line segments that extend from\n    // the end point) relative to the stroke width.\n    const wingScale = headLength / 1.5;\n\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, scales)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(\"path\")\n          .call(applyDirectStyles, this)\n          .attr(\"d\", (i) => {\n            // The start x1,y1 and end x2,y2 points may be inset, and the\n            // ending line angle may be altered for inset swoopy arrows.\n            let x1 = X1[i],\n              y1 = Y1[i],\n              x2 = X2[i],\n              y2 = Y2[i];\n            const lineLength = Math.hypot(x2 - x1, y2 - y1);\n            if (lineLength <= insetStart + insetEnd) return null;\n            let lineAngle = Math.atan2(y2 - y1, x2 - x1);\n\n            // We dont allow the wing length to be too large relative to the\n            // length of the arrow. (Plot.vector allows arbitrarily large\n            // wings, but thats okay since vectors are usually small.)\n            const headLength = Math.min(wingScale * sw(i), lineLength / 3);\n\n            // When bending, the offset between the straight line between the two points\n            // and the outgoing tangent from the start point. (Also the negative\n            // incoming tangent to the end point.) This must be within /2. A positive\n            // angle will produce a clockwise curve; a negative angle will produce a\n            // counterclockwise curve; zero will produce a straight line.\n            const bendAngle = this.sweep(x1, y1, x2, y2) * bend * radians;\n\n            // The radius of the circle that intersects with the two endpoints\n            // and has the specified bend angle.\n            const r = Math.hypot(lineLength / Math.tan(bendAngle), lineLength) / 2;\n\n            // Apply insets.\n            if (insetStart || insetEnd) {\n              if (r < 1e5) {\n                // For inset swoopy arrows, compute the circle-circle\n                // intersection between a circle centered around the\n                // respective arrow endpoint and the center of the circle\n                // segment that forms the shaft of the arrow.\n                const sign = Math.sign(bendAngle);\n                const [cx, cy] = pointPointCenter([x1, y1], [x2, y2], r, sign);\n                if (insetStart) {\n                  [x1, y1] = circleCircleIntersect([cx, cy, r], [x1, y1, insetStart], -sign * Math.sign(insetStart));\n                }\n                // For the end inset, rotate the arrowhead so that it aligns\n                // with the truncated end of the arrow. Since the arrow is a\n                // segment of the circle centered at cx,cy, we can compute\n                // the angular difference to the new endpoint.\n                if (insetEnd) {\n                  const [x, y] = circleCircleIntersect([cx, cy, r], [x2, y2, insetEnd], sign * Math.sign(insetEnd));\n                  lineAngle += Math.atan2(y - cy, x - cx) - Math.atan2(y2 - cy, x2 - cx);\n                  (x2 = x), (y2 = y);\n                }\n              } else {\n                // For inset straight arrows, offset along the straight line.\n                const dx = x2 - x1,\n                  dy = y2 - y1,\n                  d = Math.hypot(dx, dy);\n                if (insetStart) (x1 += (dx / d) * insetStart), (y1 += (dy / d) * insetStart);\n                if (insetEnd) (x2 -= (dx / d) * insetEnd), (y2 -= (dy / d) * insetEnd);\n              }\n            }\n\n            // The angle of the arrow as it approaches the endpoint, and the\n            // angles of the adjacent wings. Here left refers to if the\n            // arrow is pointing up.\n            const endAngle = lineAngle + bendAngle;\n            const leftAngle = endAngle + wingAngle;\n            const rightAngle = endAngle - wingAngle;\n\n            // The endpoints of the two wings.\n            const x3 = x2 - headLength * Math.cos(leftAngle);\n            const y3 = y2 - headLength * Math.sin(leftAngle);\n            const x4 = x2 - headLength * Math.cos(rightAngle);\n            const y4 = y2 - headLength * Math.sin(rightAngle);\n\n            // If the radius is very large (or even infinite, as when the bend\n            // angle is zero), then render a straight line.\n            const a = r < 1e5 ? `A${r},${r} 0,0,${bendAngle > 0 ? 1 : 0} ` : `L`;\n            const h = headLength ? `M${x3},${y3}L${x2},${y2}L${x4},${y4}` : \"\";\n            return `M${x1},${y1}${a}${x2},${y2}${h}`;\n          })\n          .call(applyChannelStyles, this, channels)\n      )\n      .node();\n  }\n}\n\n// Maybe flip the bend angle, depending on the arrow orientation.\nfunction maybeSweep(sweep = 1) {\n  if (typeof sweep === \"number\") return constant(Math.sign(sweep));\n  if (typeof sweep === \"function\") return (x1, y1, x2, y2) => Math.sign(sweep(x1, y1, x2, y2));\n  switch (keyword(sweep, \"sweep\", [\"+x\", \"-x\", \"+y\", \"-y\"])) {\n    case \"+x\":\n      return (x1, y1, x2) => ascending(x1, x2);\n    case \"-x\":\n      return (x1, y1, x2) => descending(x1, x2);\n    case \"+y\":\n      return (x1, y1, x2, y2) => ascending(y1, y2);\n    case \"-y\":\n      return (x1, y1, x2, y2) => descending(y1, y2);\n  }\n}\n\n// Returns the center of a circle that goes through the two given points ax,ay\n// and bx,by and has radius r. There are two such points; use the sign +1 or\n// -1 to choose between them. Returns [NaN, NaN] if r is too small.\nfunction pointPointCenter([ax, ay], [bx, by], r, sign) {\n  const dx = bx - ax,\n    dy = by - ay,\n    d = Math.hypot(dx, dy);\n  const k = (sign * Math.sqrt(r * r - (d * d) / 4)) / d;\n  return [(ax + bx) / 2 - dy * k, (ay + by) / 2 + dx * k];\n}\n\n// Given two circles, one centered at ax,ay with radius ar, and the other\n// centered at bx,by with radius br, returns a point at which the two circles\n// intersect. There are typically two such points; use the sign +1 or -1 to\n// chose between them. Returns [NaN, NaN] if there is no intersection.\n// https://mathworld.wolfram.com/Circle-CircleIntersection.html\nfunction circleCircleIntersect([ax, ay, ar], [bx, by, br], sign) {\n  const dx = bx - ax,\n    dy = by - ay,\n    d = Math.hypot(dx, dy);\n  const x = (dx * dx + dy * dy - br * br + ar * ar) / (2 * d);\n  const y = sign * Math.sqrt(ar * ar - x * x);\n  return [ax + (dx * x + dy * y) / d, ay + (dy * x - dx * y) / d];\n}\n\nexport function arrow(data, {x, x1, x2, y, y1, y2, ...options} = {}) {\n  [x1, x2] = maybeSameValue(x, x1, x2);\n  [y1, y2] = maybeSameValue(y, y1, y2);\n  return new Arrow(data, {...options, x1, x2, y1, y2});\n}\n","import {create} from \"../context.js\";\nimport {Mark} from \"../mark.js\";\nimport {hasXY, identity, indexOf} from \"../options.js\";\nimport {isCollapsed} from \"../scales.js\";\nimport {applyAttr, applyChannelStyles, applyDirectStyles, applyIndirectStyles, applyTransform} from \"../style.js\";\nimport {maybeIdentityX, maybeIdentityY} from \"../transforms/identity.js\";\nimport {maybeIntervalX, maybeIntervalY} from \"../transforms/interval.js\";\nimport {maybeStackX, maybeStackY} from \"../transforms/stack.js\";\nimport {applyRoundedRect, rectInsets, rectRadii} from \"./rect.js\";\n\nconst barDefaults = {\n  ariaLabel: \"bar\"\n};\n\nexport class AbstractBar extends Mark {\n  constructor(data, channels, options = {}, defaults = barDefaults) {\n    super(data, channels, options, defaults);\n    rectInsets(this, options);\n    rectRadii(this, options);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {rx, ry, rx1y1, rx1y2, rx2y1, rx2y2} = this;\n    const x = this._x(scales, channels, dimensions);\n    const y = this._y(scales, channels, dimensions);\n    const w = this._width(scales, channels, dimensions);\n    const h = this._height(scales, channels, dimensions);\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(this._transform, this, scales)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .call(\n            rx1y1 || rx1y2 || rx2y1 || rx2y2\n              ? (g) =>\n                  g\n                    .append(\"path\")\n                    .call(applyDirectStyles, this)\n                    .call(applyRoundedRect, x, y, add(x, w), add(y, h), this)\n                    .call(applyChannelStyles, this, channels)\n              : (g) =>\n                  g\n                    .append(\"rect\")\n                    .call(applyDirectStyles, this)\n                    .attr(\"x\", x)\n                    .attr(\"width\", w)\n                    .attr(\"y\", y)\n                    .attr(\"height\", h)\n                    .call(applyAttr, \"rx\", rx)\n                    .call(applyAttr, \"ry\", ry)\n                    .call(applyChannelStyles, this, channels)\n          )\n      )\n      .node();\n  }\n  _x(scales, {x: X}, {marginLeft}) {\n    const {insetLeft} = this;\n    return X ? (i) => X[i] + insetLeft : marginLeft + insetLeft;\n  }\n  _y(scales, {y: Y}, {marginTop}) {\n    const {insetTop} = this;\n    return Y ? (i) => Y[i] + insetTop : marginTop + insetTop;\n  }\n  _width({x}, {x: X}, {marginRight, marginLeft, width}) {\n    const {insetLeft, insetRight} = this;\n    const bandwidth = X && x ? x.bandwidth() : width - marginRight - marginLeft;\n    return Math.max(0, bandwidth - insetLeft - insetRight);\n  }\n  _height({y}, {y: Y}, {marginTop, marginBottom, height}) {\n    const {insetTop, insetBottom} = this;\n    const bandwidth = Y && y ? y.bandwidth() : height - marginTop - marginBottom;\n    return Math.max(0, bandwidth - insetTop - insetBottom);\n  }\n}\n\nfunction add(a, b) {\n  return typeof a === \"function\" && typeof b === \"function\"\n    ? (i) => a(i) + b(i)\n    : typeof a === \"function\"\n    ? (i) => a(i) + b\n    : typeof b === \"function\"\n    ? (i) => a + b(i)\n    : a + b;\n}\n\nexport class BarX extends AbstractBar {\n  constructor(data, options = {}, defaults) {\n    const {x1, x2, y} = options;\n    super(\n      data,\n      {\n        x1: {value: x1, scale: \"x\"},\n        x2: {value: x2, scale: \"x\"},\n        y: {value: y, scale: \"y\", type: \"band\", optional: true}\n      },\n      options,\n      defaults\n    );\n  }\n  _transform(selection, mark, {x}) {\n    selection.call(applyTransform, mark, {x}, 0, 0);\n  }\n  _x({x}, {x1: X1, x2: X2}, {marginLeft}) {\n    const {insetLeft} = this;\n    return isCollapsed(x) ? marginLeft + insetLeft : (i) => Math.min(X1[i], X2[i]) + insetLeft;\n  }\n  _width({x}, {x1: X1, x2: X2}, {marginRight, marginLeft, width}) {\n    const {insetLeft, insetRight} = this;\n    return isCollapsed(x)\n      ? width - marginRight - marginLeft - insetLeft - insetRight\n      : (i) => Math.max(0, Math.abs(X2[i] - X1[i]) - insetLeft - insetRight);\n  }\n}\n\nexport class BarY extends AbstractBar {\n  constructor(data, options = {}, defaults) {\n    const {x, y1, y2} = options;\n    super(\n      data,\n      {\n        y1: {value: y1, scale: \"y\"},\n        y2: {value: y2, scale: \"y\"},\n        x: {value: x, scale: \"x\", type: \"band\", optional: true}\n      },\n      options,\n      defaults\n    );\n  }\n  _transform(selection, mark, {y}) {\n    selection.call(applyTransform, mark, {y}, 0, 0);\n  }\n  _y({y}, {y1: Y1, y2: Y2}, {marginTop}) {\n    const {insetTop} = this;\n    return isCollapsed(y) ? marginTop + insetTop : (i) => Math.min(Y1[i], Y2[i]) + insetTop;\n  }\n  _height({y}, {y1: Y1, y2: Y2}, {marginTop, marginBottom, height}) {\n    const {insetTop, insetBottom} = this;\n    return isCollapsed(y)\n      ? height - marginTop - marginBottom - insetTop - insetBottom\n      : (i) => Math.max(0, Math.abs(Y2[i] - Y1[i]) - insetTop - insetBottom);\n  }\n}\n\nexport function barX(data, options = {}) {\n  if (!hasXY(options)) options = {...options, y: indexOf, x2: identity};\n  return new BarX(data, maybeStackX(maybeIntervalX(maybeIdentityX(options))));\n}\n\nexport function barY(data, options = {}) {\n  if (!hasXY(options)) options = {...options, x: indexOf, y2: identity};\n  return new BarY(data, maybeStackY(maybeIntervalY(maybeIdentityY(options))));\n}\n","import {identity, indexOf, maybeColorChannel, maybeTuple} from \"../options.js\";\nimport {applyTransform} from \"../style.js\";\nimport {AbstractBar} from \"./bar.js\";\n\nconst defaults = {\n  ariaLabel: \"cell\"\n};\n\nexport class Cell extends AbstractBar {\n  constructor(data, {x, y, ...options} = {}) {\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", type: \"band\", optional: true},\n        y: {value: y, scale: \"y\", type: \"band\", optional: true}\n      },\n      options,\n      defaults\n    );\n  }\n  _transform(selection, mark) {\n    // apply dx, dy\n    selection.call(applyTransform, mark, {}, 0, 0);\n  }\n}\n\nexport function cell(data, {x, y, ...options} = {}) {\n  [x, y] = maybeTuple(x, y);\n  return new Cell(data, {...options, x, y});\n}\n\nexport function cellX(data, {x = indexOf, fill, stroke, ...options} = {}) {\n  if (fill === undefined && maybeColorChannel(stroke)[0] === undefined) fill = identity;\n  return new Cell(data, {...options, x, fill, stroke});\n}\n\nexport function cellY(data, {y = indexOf, fill, stroke, ...options} = {}) {\n  if (fill === undefined && maybeColorChannel(stroke)[0] === undefined) fill = identity;\n  return new Cell(data, {...options, y, fill, stroke});\n}\n","import {pathRound as path, symbolCircle} from \"d3\";\nimport {create} from \"../context.js\";\nimport {negative, positive} from \"../defined.js\";\nimport {Mark} from \"../mark.js\";\nimport {identity, maybeFrameAnchor, maybeNumberChannel, maybeTuple} from \"../options.js\";\nimport {\n  applyChannelStyles,\n  applyDirectStyles,\n  applyFrameAnchor,\n  applyIndirectStyles,\n  applyTransform\n} from \"../style.js\";\nimport {maybeSymbolChannel} from \"../symbol.js\";\nimport {template} from \"../template.js\";\nimport {sort} from \"../transforms/basic.js\";\nimport {maybeIntervalMidX, maybeIntervalMidY} from \"../transforms/interval.js\";\n\nconst defaults = {\n  ariaLabel: \"dot\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 1.5\n};\n\nexport function withDefaultSort(options) {\n  return options.sort === undefined && options.reverse === undefined ? sort({channel: \"-r\"}, options) : options;\n}\n\nexport class Dot extends Mark {\n  constructor(data, options = {}) {\n    const {x, y, r, rotate, symbol = symbolCircle, frameAnchor} = options;\n    const [vrotate, crotate] = maybeNumberChannel(rotate, 0);\n    const [vsymbol, csymbol] = maybeSymbolChannel(symbol);\n    const [vr, cr] = maybeNumberChannel(r, vsymbol == null ? 3 : 4.5);\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", optional: true},\n        y: {value: y, scale: \"y\", optional: true},\n        r: {value: vr, scale: \"r\", filter: positive, optional: true},\n        rotate: {value: vrotate, optional: true},\n        symbol: {value: vsymbol, scale: \"auto\", optional: true}\n      },\n      withDefaultSort(options),\n      defaults\n    );\n    this.r = cr;\n    this.rotate = crotate;\n    this.symbol = csymbol;\n    this.frameAnchor = maybeFrameAnchor(frameAnchor);\n\n    // Give a hint to the symbol scale; this allows the symbol scale to choose\n    // appropriate default symbols based on whether the dots are filled or\n    // stroked, and for the symbol legend to match the appearance of the dots.\n    const {channels} = this;\n    const {symbol: symbolChannel} = channels;\n    if (symbolChannel) {\n      const {fill: fillChannel, stroke: strokeChannel} = channels;\n      symbolChannel.hint = {\n        fill: fillChannel\n          ? fillChannel.value === symbolChannel.value\n            ? \"color\"\n            : \"currentColor\"\n          : this.fill ?? \"currentColor\",\n        stroke: strokeChannel\n          ? strokeChannel.value === symbolChannel.value\n            ? \"color\"\n            : \"currentColor\"\n          : this.stroke ?? \"none\"\n      };\n    }\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x, y} = scales;\n    const {x: X, y: Y, r: R, rotate: A, symbol: S} = channels;\n    const {r, rotate, symbol} = this;\n    const [cx, cy] = applyFrameAnchor(this, dimensions);\n    const circle = symbol === symbolCircle;\n    const size = R ? undefined : r * r * Math.PI;\n    if (negative(r)) index = [];\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {x: X && x, y: Y && y})\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(circle ? \"circle\" : \"path\")\n          .call(applyDirectStyles, this)\n          .call(\n            circle\n              ? (selection) => {\n                  selection\n                    .attr(\"cx\", X ? (i) => X[i] : cx)\n                    .attr(\"cy\", Y ? (i) => Y[i] : cy)\n                    .attr(\"r\", R ? (i) => R[i] : r);\n                }\n              : (selection) => {\n                  selection\n                    .attr(\n                      \"transform\",\n                      template`translate(${X ? (i) => X[i] : cx},${Y ? (i) => Y[i] : cy})${\n                        A ? (i) => ` rotate(${A[i]})` : rotate ? ` rotate(${rotate})` : ``\n                      }`\n                    )\n                    .attr(\n                      \"d\",\n                      R && S\n                        ? (i) => {\n                            const p = path();\n                            S[i].draw(p, R[i] * R[i] * Math.PI);\n                            return p;\n                          }\n                        : R\n                        ? (i) => {\n                            const p = path();\n                            symbol.draw(p, R[i] * R[i] * Math.PI);\n                            return p;\n                          }\n                        : S\n                        ? (i) => {\n                            const p = path();\n                            S[i].draw(p, size);\n                            return p;\n                          }\n                        : (() => {\n                            const p = path();\n                            symbol.draw(p, size);\n                            return p;\n                          })()\n                    );\n                }\n          )\n          .call(applyChannelStyles, this, channels)\n      )\n      .node();\n  }\n}\n\nexport function dot(data, {x, y, ...options} = {}) {\n  if (options.frameAnchor === undefined) [x, y] = maybeTuple(x, y);\n  return new Dot(data, {...options, x, y});\n}\n\nexport function dotX(data, {x = identity, ...options} = {}) {\n  return new Dot(data, maybeIntervalMidY({...options, x}));\n}\n\nexport function dotY(data, {y = identity, ...options} = {}) {\n  return new Dot(data, maybeIntervalMidX({...options, y}));\n}\n\nexport function circle(data, options) {\n  return dot(data, {...options, symbol: \"circle\"});\n}\n\nexport function hexagon(data, options) {\n  return dot(data, {...options, symbol: \"hexagon\"});\n}\n","import {line as shapeLine} from \"d3\";\nimport {create} from \"../context.js\";\nimport {curveAuto, maybeCurveAuto} from \"../curve.js\";\nimport {Mark} from \"../mark.js\";\nimport {applyGroupedMarkers, markers} from \"../marker.js\";\nimport {coerceNumbers, indexOf, identity, maybeTuple, maybeZ} from \"../options.js\";\nimport {\n  applyDirectStyles,\n  applyIndirectStyles,\n  applyTransform,\n  applyGroupedChannelStyles,\n  groupIndex\n} from \"../style.js\";\nimport {maybeDenseIntervalX, maybeDenseIntervalY} from \"../transforms/bin.js\";\n\nconst defaults = {\n  ariaLabel: \"line\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeMiterlimit: 1\n};\n\nexport class Line extends Mark {\n  constructor(data, options = {}) {\n    const {x, y, z, curve, tension} = options;\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\"},\n        y: {value: y, scale: \"y\"},\n        z: {value: maybeZ(options), optional: true}\n      },\n      options,\n      defaults\n    );\n    this.z = z;\n    this.curve = maybeCurveAuto(curve, tension);\n    markers(this, options);\n  }\n  filter(index) {\n    return index;\n  }\n  project(channels, values, context) {\n    // For the auto curve, projection is handled at render.\n    if (this.curve !== curveAuto) {\n      super.project(channels, values, context);\n    }\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x: X, y: Y} = channels;\n    const {curve} = this;\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, scales)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(groupIndex(index, [X, Y], this, channels))\n          .enter()\n          .append(\"path\")\n          .call(applyDirectStyles, this)\n          .call(applyGroupedChannelStyles, this, channels)\n          .call(applyGroupedMarkers, this, channels, context)\n          .attr(\n            \"d\",\n            curve === curveAuto && context.projection\n              ? sphereLine(context.path(), X, Y)\n              : shapeLine()\n                  .curve(curve)\n                  .defined((i) => i >= 0)\n                  .x((i) => X[i])\n                  .y((i) => Y[i])\n          )\n      )\n      .node();\n  }\n}\n\nfunction sphereLine(path, X, Y) {\n  X = coerceNumbers(X);\n  Y = coerceNumbers(Y);\n  return (I) => {\n    let line = [];\n    const lines = [line];\n    for (const i of I) {\n      // Check for undefined value; see groupIndex.\n      if (i === -1) {\n        line = [];\n        lines.push(line);\n      } else {\n        line.push([X[i], Y[i]]);\n      }\n    }\n    return path({type: \"MultiLineString\", coordinates: lines});\n  };\n}\n\nexport function line(data, {x, y, ...options} = {}) {\n  [x, y] = maybeTuple(x, y);\n  return new Line(data, {...options, x, y});\n}\n\nexport function lineX(data, {x = identity, y = indexOf, ...options} = {}) {\n  return new Line(data, maybeDenseIntervalY({...options, x, y}));\n}\n\nexport function lineY(data, {x = indexOf, y = identity, ...options} = {}) {\n  return new Line(data, maybeDenseIntervalX({...options, x, y}));\n}\n","import {ascending, InternSet} from \"d3\";\nimport {marks} from \"../mark.js\";\nimport {isColor, isNumeric, isObject, isOptions, isOrdinal, labelof, valueof} from \"../options.js\";\nimport {bin, binX, binY} from \"../transforms/bin.js\";\nimport {group, groupX, groupY} from \"../transforms/group.js\";\nimport {areaX, areaY} from \"./area.js\";\nimport {barX, barY} from \"./bar.js\";\nimport {cell} from \"./cell.js\";\nimport {dot} from \"./dot.js\";\nimport {frame} from \"./frame.js\";\nimport {line, lineX, lineY} from \"./line.js\";\nimport {rect, rectX, rectY} from \"./rect.js\";\nimport {ruleX, ruleY} from \"./rule.js\";\n\nexport function autoSpec(data, options) {\n  options = normalizeOptions(options);\n\n  // Greedily materialize columns for type inference; well need them anyway to\n  // plot! Note that we dont apply any type inference to the fx and fy\n  // channels, if present; these are always ordinal (at least for now).\n  const {x, y, color, size} = options;\n  const X = materializeValue(data, x);\n  const Y = materializeValue(data, y);\n  const C = materializeValue(data, color);\n  const S = materializeValue(data, size);\n\n  // Compute the default options.\n  let {\n    fx,\n    fy,\n    x: {value: xValue, reduce: xReduce, zero: xZero, ...xOptions},\n    y: {value: yValue, reduce: yReduce, zero: yZero, ...yOptions},\n    color: {value: colorValue, color: colorColor, reduce: colorReduce},\n    size: {value: sizeValue, reduce: sizeReduce}, // TODO constant radius?\n    mark\n  } = options;\n\n  // Determine the default reducer, if any.\n  if (xReduce === undefined)\n    xReduce = yReduce == null && xValue == null && sizeValue == null && yValue != null ? \"count\" : null;\n  if (yReduce === undefined)\n    yReduce = xReduce == null && yValue == null && sizeValue == null && xValue != null ? \"count\" : null;\n\n  // Determine the default size reducer, if any.\n  if (\n    sizeReduce === undefined &&\n    sizeValue == null &&\n    colorReduce == null &&\n    xReduce == null &&\n    yReduce == null &&\n    (xValue == null || isOrdinal(X)) &&\n    (yValue == null || isOrdinal(Y))\n  ) {\n    sizeReduce = \"count\";\n  }\n\n  // Determine the default zero-ness.\n  if (xZero === undefined) xZero = isZeroReducer(xReduce) ? true : undefined;\n  if (yZero === undefined) yZero = isZeroReducer(yReduce) ? true : undefined;\n\n  // TODO Shorthand: array of primitives should result in a histogram\n  if (xValue == null && yValue == null) throw new Error(\"must specify x or y\");\n  if (xReduce != null && yValue == null) throw new Error(\"reducing x requires y\");\n  if (yReduce != null && xValue == null) throw new Error(\"reducing y requires x\");\n\n  // Determine the default mark type.\n  if (mark === undefined) {\n    mark =\n      sizeValue != null || sizeReduce != null\n        ? \"dot\"\n        : isZeroReducer(xReduce) || isZeroReducer(yReduce) || colorReduce != null // histogram or heatmap\n        ? \"bar\"\n        : xValue != null && yValue != null\n        ? isOrdinal(X) || isOrdinal(Y) || (xReduce == null && yReduce == null && !isMonotonic(X) && !isMonotonic(Y))\n          ? \"dot\"\n          : \"line\"\n        : xValue != null || yValue != null\n        ? \"rule\"\n        : null;\n  }\n\n  let Z; // may be set to null to disable series-by-color for line and area\n  let colorMode; // \"fill\" or \"stroke\"\n\n  // Determine the mark implementation.\n  let markImpl;\n  switch (mark) {\n    case \"dot\":\n      markImpl = dot;\n      colorMode = \"stroke\";\n      break;\n    case \"line\":\n      markImpl =\n        (X && Y) || xReduce != null || yReduce != null // same logic as area (see below), but default to line\n          ? yZero || yReduce != null || (X && isMonotonic(X))\n            ? lineY\n            : xZero || xReduce != null || (Y && isMonotonic(Y))\n            ? lineX\n            : line\n          : X // 1d line by index\n          ? lineX\n          : lineY;\n      colorMode = \"stroke\";\n      if (isHighCardinality(C)) Z = null; // TODO only if z not set by user\n      break;\n    case \"area\":\n      markImpl = !(yZero || yReduce != null) && (xZero || xReduce != null || (Y && isMonotonic(Y))) ? areaX : areaY; // favor areaY if unsure\n      colorMode = \"fill\";\n      if (isHighCardinality(C)) Z = null; // TODO only if z not set by user\n      break;\n    case \"rule\":\n      markImpl = X ? ruleX : ruleY;\n      colorMode = \"stroke\";\n      break;\n    case \"bar\":\n      markImpl =\n        xReduce != null // bin or group on y\n          ? isOrdinal(Y)\n            ? isSelectReducer(xReduce) && X && isOrdinal(X)\n              ? cell\n              : barX\n            : rectX\n          : yReduce != null // bin or group on x\n          ? isOrdinal(X)\n            ? isSelectReducer(yReduce) && Y && isOrdinal(Y)\n              ? cell\n              : barY\n            : rectY\n          : colorReduce != null || sizeReduce != null // bin or group on both x and y\n          ? X && isOrdinal(X) && Y && isOrdinal(Y)\n            ? cell\n            : X && isOrdinal(X)\n            ? barY\n            : Y && isOrdinal(Y)\n            ? barX\n            : rect\n          : X && isNumeric(X) && !(Y && isNumeric(Y))\n          ? barX // if y is temporal, treat as ordinal\n          : Y && isNumeric(Y) && !(X && isNumeric(X))\n          ? barY // if x is temporal, treat as ordinal\n          : cell;\n      colorMode = \"fill\";\n      break;\n    default:\n      throw new Error(`invalid mark: ${mark}`);\n  }\n\n  // Determine the mark options.\n  let markOptions = {\n    fx,\n    fy,\n    x: X ?? undefined, // treat null x as undefined for implicit stack\n    y: Y ?? undefined, // treat null y as undefined for implicit stack\n    [colorMode]: C ?? colorColor,\n    z: Z,\n    r: S ?? undefined, // treat null size as undefined for default constant radius\n    tip: true\n  };\n  let transformImpl;\n  let transformOptions = {[colorMode]: colorReduce ?? undefined, r: sizeReduce ?? undefined};\n  if (xReduce != null && yReduce != null) {\n    throw new Error(`cannot reduce both x and y`); // for now at least\n  } else if (yReduce != null) {\n    transformOptions.y = yReduce;\n    transformImpl = isOrdinal(X) ? groupX : binX;\n  } else if (xReduce != null) {\n    transformOptions.x = xReduce;\n    transformImpl = isOrdinal(Y) ? groupY : binY;\n  } else if (colorReduce != null || sizeReduce != null) {\n    if (X && Y) {\n      transformImpl = isOrdinal(X) && isOrdinal(Y) ? group : isOrdinal(X) ? binY : isOrdinal(Y) ? binX : bin;\n    } else if (X) {\n      transformImpl = isOrdinal(X) ? groupX : binX;\n    } else if (Y) {\n      transformImpl = isOrdinal(Y) ? groupY : binY;\n    }\n  }\n\n  // When using the bin transform, pass through additional options (e.g., thresholds).\n  if (transformImpl === bin || transformImpl === binX) markOptions.x = {value: X, ...xOptions};\n  if (transformImpl === bin || transformImpl === binY) markOptions.y = {value: Y, ...yOptions};\n\n  // If zero-ness is not specified, default based on whether the resolved mark\n  // type will include a zero baseline.\n  if (xZero === undefined)\n    xZero =\n      X &&\n      !(transformImpl === bin || transformImpl === binX) &&\n      (markImpl === barX || markImpl === areaX || markImpl === rectX || markImpl === ruleY);\n  if (yZero === undefined)\n    yZero =\n      Y &&\n      !(transformImpl === bin || transformImpl === binY) &&\n      (markImpl === barY || markImpl === areaY || markImpl === rectY || markImpl === ruleX);\n\n  return {\n    fx: fx ?? null,\n    fy: fy ?? null,\n    x: {\n      value: xValue ?? null,\n      reduce: xReduce ?? null,\n      zero: !!xZero,\n      ...xOptions\n    },\n    y: {\n      value: yValue ?? null,\n      reduce: yReduce ?? null,\n      zero: !!yZero,\n      ...yOptions\n    },\n    color: {\n      value: colorValue ?? null,\n      reduce: colorReduce ?? null,\n      ...(colorColor !== undefined && {color: colorColor})\n    },\n    size: {\n      value: sizeValue ?? null,\n      reduce: sizeReduce ?? null\n    },\n    mark,\n    markImpl: implNames[markImpl],\n    markOptions,\n    transformImpl: implNames[transformImpl],\n    transformOptions,\n    colorMode\n  };\n}\n\nexport function auto(data, options) {\n  const spec = autoSpec(data, options);\n  const {\n    fx,\n    fy,\n    x: {zero: xZero},\n    y: {zero: yZero},\n    markOptions,\n    transformOptions,\n    colorMode\n  } = spec;\n  const markImpl = impls[spec.markImpl];\n  const transformImpl = impls[spec.transformImpl];\n  // In the case of filled marks (particularly bars and areas) the frame and\n  // rules should come after the mark; in the case of stroked marks\n  // (particularly dots and lines) they should come before the mark.\n  const frames = fx != null || fy != null ? frame({strokeOpacity: 0.1}) : null;\n  const rules = [xZero ? ruleX([0]) : null, yZero ? ruleY([0]) : null];\n  const mark = markImpl(data, transformImpl ? transformImpl(transformOptions, markOptions) : markOptions);\n  return colorMode === \"stroke\" ? marks(frames, rules, mark) : marks(frames, mark, rules);\n}\n\n// TODO What about sorted within series?\nfunction isMonotonic(values) {\n  let previous;\n  let previousOrder;\n  for (const value of values) {\n    if (value == null) continue;\n    if (previous === undefined) {\n      previous = value;\n      continue;\n    }\n    const order = Math.sign(ascending(previous, value));\n    if (!order) continue; // skip zero, NaN\n    if (previousOrder !== undefined && order !== previousOrder) return false;\n    previous = value;\n    previousOrder = order;\n  }\n  return true;\n}\n\n// Allow x and y and other dimensions to be specified as shorthand field names\n// (but note that they can also be specified as a {transform} object such as\n// Plot.identity). We dont support reducers for the faceting, but for symmetry\n// with x and y we allow facets to be specified as {value} objects.\nfunction normalizeOptions({x, y, color, size, fx, fy, mark} = {}) {\n  if (!isOptions(x)) x = makeOptions(x);\n  if (!isOptions(y)) y = makeOptions(y);\n  if (!isOptions(color)) color = isColor(color) ? {color} : makeOptions(color);\n  if (!isOptions(size)) size = makeOptions(size);\n  if (isOptions(fx)) ({value: fx} = makeOptions(fx));\n  if (isOptions(fy)) ({value: fy} = makeOptions(fy));\n  if (mark != null) mark = `${mark}`.toLowerCase();\n  return {x, y, color, size, fx, fy, mark};\n}\n\n// To apply heuristics based on the data types (values), realize the columns. We\n// could maybe look at the data.schema here, but Plots behavior depends on the\n// actual values anyway, so this probably is what we want.\nfunction materializeValue(data, options) {\n  const V = valueof(data, options.value);\n  if (V) V.label = labelof(options.value);\n  return V;\n}\n\nfunction makeOptions(value) {\n  return isReducer(value) ? {reduce: value} : {value};\n}\n\n// The distinct, count, sum, and proportion reducers are additive (stackable).\nfunction isZeroReducer(reduce) {\n  return /^(?:distinct|count|sum|proportion)$/i.test(reduce);\n}\n\n// The first, last, and mode reducers preserve the type of the aggregated values.\nfunction isSelectReducer(reduce) {\n  return /^(?:first|last|mode)$/i.test(reduce);\n}\n\n// https://github.com/observablehq/plot/blob/818562649280e155136f730fc496e0b3d15ae464/src/transforms/group.js#L236\nfunction isReducer(reduce) {\n  if (reduce == null) return false;\n  if (typeof reduce.reduceIndex === \"function\") return true;\n  if (typeof reduce.reduce === \"function\" && isObject(reduce)) return true; // N.B. array.reduce\n  if (/^p\\d{2}$/i.test(reduce)) return true;\n  switch (`${reduce}`.toLowerCase()) {\n    case \"first\":\n    case \"last\":\n    case \"count\":\n    case \"distinct\":\n    case \"sum\":\n    case \"proportion\":\n    case \"proportion-facet\": // TODO remove me?\n    case \"deviation\":\n    case \"min\":\n    case \"min-index\": // TODO remove me?\n    case \"max\":\n    case \"max-index\": // TODO remove me?\n    case \"mean\":\n    case \"median\":\n    case \"variance\":\n    case \"mode\":\n      // These are technically reducers, but I think wed want to treat them as fields?\n      // case \"x\":\n      // case \"x1\":\n      // case \"x2\":\n      // case \"y\":\n      // case \"y1\":\n      // case \"y2\":\n      return true;\n  }\n  return false;\n}\n\nfunction isHighCardinality(value) {\n  return value ? new InternSet(value).size > value.length >> 1 : false;\n}\n\nconst impls = {\n  dot,\n  line,\n  lineX,\n  lineY,\n  areaX,\n  areaY,\n  ruleX,\n  ruleY,\n  barX,\n  barY,\n  rect,\n  rectX,\n  rectY,\n  cell,\n  bin,\n  binX,\n  binY,\n  group,\n  groupX,\n  groupY\n};\n\n// Instead of returning the mark or transform implementation directly, we return\n// the implementation name to facilitate code compilation (eject to explicit\n// marks). An implementation-to-name mapping needs to live somewhere for\n// compilation, and by having it in Plot we can more easily introduce a new mark\n// or transform implementation in Plot.auto without having to synchronize a\n// downstream change in the compiler.\nconst implNames = Object.fromEntries(Object.entries(impls).map(([name, impl]) => [impl, name]));\n","import {count, group, rank} from \"d3\";\nimport {column, identity, isObject, maybeInput, maybeZ, taker, valueof} from \"../options.js\";\nimport {basic} from \"./basic.js\";\n\nexport function mapX(mapper, options = {}) {\n  let {x, x1, x2} = options;\n  if (x === undefined && x1 === undefined && x2 === undefined) options = {...options, x: (x = identity)};\n  const outputs = {};\n  if (x != null) outputs.x = mapper;\n  if (x1 != null) outputs.x1 = mapper;\n  if (x2 != null) outputs.x2 = mapper;\n  return map(outputs, options);\n}\n\nexport function mapY(mapper, options = {}) {\n  let {y, y1, y2} = options;\n  if (y === undefined && y1 === undefined && y2 === undefined) options = {...options, y: (y = identity)};\n  const outputs = {};\n  if (y != null) outputs.y = mapper;\n  if (y1 != null) outputs.y1 = mapper;\n  if (y2 != null) outputs.y2 = mapper;\n  return map(outputs, options);\n}\n\nexport function map(outputs = {}, options = {}) {\n  const z = maybeZ(options);\n  const channels = Object.entries(outputs).map(([key, map]) => {\n    const input = maybeInput(key, options);\n    if (input == null) throw new Error(`missing channel: ${key}`);\n    const [output, setOutput] = column(input);\n    return {key, input, output, setOutput, map: maybeMap(map)};\n  });\n  return {\n    ...basic(options, (data, facets) => {\n      const Z = valueof(data, z);\n      const X = channels.map(({input}) => valueof(data, input));\n      const MX = channels.map(({setOutput}) => setOutput(new Array(data.length)));\n      for (const facet of facets) {\n        for (const I of Z ? group(facet, (i) => Z[i]).values() : [facet]) {\n          channels.forEach(({map}, i) => map.mapIndex(I, X[i], MX[i]));\n        }\n      }\n      return {data, facets};\n    }),\n    ...Object.fromEntries(channels.map(({key, output}) => [key, output]))\n  };\n}\n\nfunction maybeMap(map) {\n  if (map == null) throw new Error(\"missing map\");\n  if (typeof map.mapIndex === \"function\") return map;\n  if (typeof map.map === \"function\" && isObject(map)) return mapMap(map); // N.B. array.map\n  if (typeof map === \"function\") return mapFunction(taker(map));\n  switch (`${map}`.toLowerCase()) {\n    case \"cumsum\":\n      return mapCumsum;\n    case \"rank\":\n      return mapFunction((I, V) => rank(I, (i) => V[i]));\n    case \"quantile\":\n      return mapFunction((I, V) => rankQuantile(I, (i) => V[i]));\n  }\n  throw new Error(`invalid map: ${map}`);\n}\n\nfunction mapMap(map) {\n  console.warn(\"deprecated map interface; implement mapIndex instead.\");\n  return {mapIndex: map.map.bind(map)};\n}\n\nfunction rankQuantile(I, f) {\n  const n = count(I, f) - 1;\n  return rank(I, f).map((r) => r / n);\n}\n\nfunction mapFunction(f) {\n  return {\n    mapIndex(I, S, T) {\n      const M = f(I, S);\n      if (M.length !== I.length) throw new Error(\"map function returned a mismatched length\");\n      for (let i = 0, n = I.length; i < n; ++i) T[I[i]] = M[i];\n    }\n  };\n}\n\nconst mapCumsum = {\n  mapIndex(I, S, T) {\n    let sum = 0;\n    for (const i of I) T[i] = sum += S[i];\n  }\n};\n","import {deviation, max, median, min, mode, variance} from \"d3\";\nimport {defined} from \"../defined.js\";\nimport {percentile, subarray, taker} from \"../options.js\";\nimport {warn} from \"../warnings.js\";\nimport {mapX, mapY} from \"./map.js\";\n\nexport function windowX(windowOptions = {}, options) {\n  if (arguments.length === 1) options = windowOptions;\n  return mapX(window(windowOptions), options);\n}\n\nexport function windowY(windowOptions = {}, options) {\n  if (arguments.length === 1) options = windowOptions;\n  return mapY(window(windowOptions), options);\n}\n\nexport function window(options = {}) {\n  if (typeof options === \"number\") options = {k: options};\n  let {k, reduce, shift, anchor, strict} = options;\n  if (anchor === undefined && shift !== undefined) {\n    anchor = maybeShift(shift);\n    warn(`Warning: the shift option is deprecated; please use anchor \"${anchor}\" instead.`);\n  }\n  if (!((k = Math.floor(k)) > 0)) throw new Error(`invalid k: ${k}`);\n  return maybeReduce(reduce)(k, maybeAnchor(anchor, k), strict);\n}\n\nfunction maybeAnchor(anchor = \"middle\", k) {\n  switch (`${anchor}`.toLowerCase()) {\n    case \"middle\":\n      return (k - 1) >> 1;\n    case \"start\":\n      return 0;\n    case \"end\":\n      return k - 1;\n  }\n  throw new Error(`invalid anchor: ${anchor}`);\n}\n\nfunction maybeShift(shift) {\n  switch (`${shift}`.toLowerCase()) {\n    case \"centered\":\n      return \"middle\";\n    case \"leading\":\n      return \"start\";\n    case \"trailing\":\n      return \"end\";\n  }\n  throw new Error(`invalid shift: ${shift}`);\n}\n\nfunction maybeReduce(reduce = \"mean\") {\n  if (typeof reduce === \"string\") {\n    if (/^p\\d{2}$/i.test(reduce)) return reduceAccessor(percentile(reduce));\n    switch (reduce.toLowerCase()) {\n      case \"deviation\":\n        return reduceAccessor(deviation);\n      case \"max\":\n        return reduceArray((I, V) => max(I, (i) => V[i]));\n      case \"mean\":\n        return reduceMean;\n      case \"median\":\n        return reduceAccessor(median);\n      case \"min\":\n        return reduceArray((I, V) => min(I, (i) => V[i]));\n      case \"mode\":\n        return reduceArray((I, V) => mode(I, (i) => V[i]));\n      case \"sum\":\n        return reduceSum;\n      case \"variance\":\n        return reduceAccessor(variance);\n      case \"difference\":\n        return reduceDifference;\n      case \"ratio\":\n        return reduceRatio;\n      case \"first\":\n        return reduceFirst;\n      case \"last\":\n        return reduceLast;\n    }\n  }\n  if (typeof reduce !== \"function\") throw new Error(`invalid reduce: ${reduce}`);\n  return reduceArray(taker(reduce));\n}\n\n// Note that the subarray may include NaN in the non-strict case; we expect the\n// function f to handle that itself (e.g., by filtering as needed). The D3\n// reducers (e.g., min, max, mean, median) do, and its faster to avoid\n// redundant filtering.\nfunction reduceAccessor(f) {\n  return (k, s, strict) =>\n    strict\n      ? {\n          mapIndex(I, S, T) {\n            const v = (i) => (S[i] == null ? NaN : +S[i]);\n            let nans = 0;\n            for (let i = 0; i < k - 1; ++i) if (isNaN(v(i))) ++nans;\n            for (let i = 0, n = I.length - k + 1; i < n; ++i) {\n              if (isNaN(v(i + k - 1))) ++nans;\n              T[I[i + s]] = nans === 0 ? f(subarray(I, i, i + k), v) : NaN;\n              if (isNaN(v(i))) --nans;\n            }\n          }\n        }\n      : {\n          mapIndex(I, S, T) {\n            const v = (i) => (S[i] == null ? NaN : +S[i]);\n            for (let i = -s; i < 0; ++i) {\n              T[I[i + s]] = f(subarray(I, 0, i + k), v);\n            }\n            for (let i = 0, n = I.length - s; i < n; ++i) {\n              T[I[i + s]] = f(subarray(I, i, i + k), v);\n            }\n          }\n        };\n}\n\nfunction reduceArray(f) {\n  return (k, s, strict) =>\n    strict\n      ? {\n          mapIndex(I, S, T) {\n            let count = 0;\n            for (let i = 0; i < k - 1; ++i) count += defined(S[I[i]]);\n            for (let i = 0, n = I.length - k + 1; i < n; ++i) {\n              count += defined(S[I[i + k - 1]]);\n              if (count === k) T[I[i + s]] = f(subarray(I, i, i + k), S);\n              count -= defined(S[I[i]]);\n            }\n          }\n        }\n      : {\n          mapIndex(I, S, T) {\n            for (let i = -s; i < 0; ++i) {\n              T[I[i + s]] = f(subarray(I, 0, i + k), S);\n            }\n            for (let i = 0, n = I.length - s; i < n; ++i) {\n              T[I[i + s]] = f(subarray(I, i, i + k), S);\n            }\n          }\n        };\n}\n\nfunction reduceSum(k, s, strict) {\n  return strict\n    ? {\n        mapIndex(I, S, T) {\n          let nans = 0;\n          let sum = 0;\n          for (let i = 0; i < k - 1; ++i) {\n            const v = S[I[i]];\n            if (v === null || isNaN(v)) ++nans;\n            else sum += +v;\n          }\n          for (let i = 0, n = I.length - k + 1; i < n; ++i) {\n            const a = S[I[i]];\n            const b = S[I[i + k - 1]];\n            if (b === null || isNaN(b)) ++nans;\n            else sum += +b;\n            T[I[i + s]] = nans === 0 ? sum : NaN;\n            if (a === null || isNaN(a)) --nans;\n            else sum -= +a;\n          }\n        }\n      }\n    : {\n        mapIndex(I, S, T) {\n          let sum = 0;\n          const n = I.length;\n          for (let i = 0, j = Math.min(n, k - s - 1); i < j; ++i) {\n            sum += +S[I[i]] || 0;\n          }\n          for (let i = -s, j = n - s; i < j; ++i) {\n            sum += +S[I[i + k - 1]] || 0;\n            T[I[i + s]] = sum;\n            sum -= +S[I[i]] || 0;\n          }\n        }\n      };\n}\n\nfunction reduceMean(k, s, strict) {\n  if (strict) {\n    const sum = reduceSum(k, s, strict);\n    return {\n      mapIndex(I, S, T) {\n        sum.mapIndex(I, S, T);\n        for (let i = 0, n = I.length - k + 1; i < n; ++i) {\n          T[I[i + s]] /= k;\n        }\n      }\n    };\n  } else {\n    return {\n      mapIndex(I, S, T) {\n        let sum = 0;\n        let count = 0;\n        const n = I.length;\n        for (let i = 0, j = Math.min(n, k - s - 1); i < j; ++i) {\n          let v = S[I[i]];\n          if (v !== null && !isNaN((v = +v))) (sum += v), ++count;\n        }\n        for (let i = -s, j = n - s; i < j; ++i) {\n          let a = S[I[i + k - 1]];\n          let b = S[I[i]];\n          if (a !== null && !isNaN((a = +a))) (sum += a), ++count;\n          T[I[i + s]] = sum / count;\n          if (b !== null && !isNaN((b = +b))) (sum -= b), --count;\n        }\n      }\n    };\n  }\n}\n\nfunction firstDefined(S, I, i, k) {\n  for (let j = i + k; i < j; ++i) {\n    const v = S[I[i]];\n    if (defined(v)) return v;\n  }\n}\n\nfunction lastDefined(S, I, i, k) {\n  for (let j = i + k - 1; j >= i; --j) {\n    const v = S[I[j]];\n    if (defined(v)) return v;\n  }\n}\n\nfunction firstNumber(S, I, i, k) {\n  for (let j = i + k; i < j; ++i) {\n    let v = S[I[i]];\n    if (v !== null && !isNaN((v = +v))) return v;\n  }\n}\n\nfunction lastNumber(S, I, i, k) {\n  for (let j = i + k - 1; j >= i; --j) {\n    let v = S[I[j]];\n    if (v !== null && !isNaN((v = +v))) return v;\n  }\n}\n\nfunction reduceDifference(k, s, strict) {\n  return strict\n    ? {\n        mapIndex(I, S, T) {\n          for (let i = 0, n = I.length - k; i < n; ++i) {\n            const a = S[I[i]];\n            const b = S[I[i + k - 1]];\n            T[I[i + s]] = a === null || b === null ? NaN : b - a;\n          }\n        }\n      }\n    : {\n        mapIndex(I, S, T) {\n          for (let i = -s, n = I.length - k + s + 1; i < n; ++i) {\n            T[I[i + s]] = lastNumber(S, I, i, k) - firstNumber(S, I, i, k);\n          }\n        }\n      };\n}\n\nfunction reduceRatio(k, s, strict) {\n  return strict\n    ? {\n        mapIndex(I, S, T) {\n          for (let i = 0, n = I.length - k; i < n; ++i) {\n            const a = S[I[i]];\n            const b = S[I[i + k - 1]];\n            T[I[i + s]] = a === null || b === null ? NaN : b / a;\n          }\n        }\n      }\n    : {\n        mapIndex(I, S, T) {\n          for (let i = -s, n = I.length - k + s + 1; i < n; ++i) {\n            T[I[i + s]] = lastNumber(S, I, i, k) / firstNumber(S, I, i, k);\n          }\n        }\n      };\n}\n\nfunction reduceFirst(k, s, strict) {\n  return strict\n    ? {\n        mapIndex(I, S, T) {\n          for (let i = 0, n = I.length - k; i < n; ++i) {\n            T[I[i + s]] = S[I[i]];\n          }\n        }\n      }\n    : {\n        mapIndex(I, S, T) {\n          for (let i = -s, n = I.length - k + s + 1; i < n; ++i) {\n            T[I[i + s]] = firstDefined(S, I, i, k);\n          }\n        }\n      };\n}\n\nfunction reduceLast(k, s, strict) {\n  return strict\n    ? {\n        mapIndex(I, S, T) {\n          for (let i = 0, n = I.length - k; i < n; ++i) {\n            T[I[i + s]] = S[I[i + k - 1]];\n          }\n        }\n      }\n    : {\n        mapIndex(I, S, T) {\n          for (let i = -s, n = I.length - k + s + 1; i < n; ++i) {\n            T[I[i + s]] = lastDefined(S, I, i, k);\n          }\n        }\n      };\n}\n","import {deviation, mean} from \"d3\";\nimport {marks} from \"../mark.js\";\nimport {identity, isNoneish} from \"../options.js\";\nimport {map} from \"../transforms/map.js\";\nimport {window} from \"../transforms/window.js\";\nimport {areaX, areaY} from \"./area.js\";\nimport {lineX, lineY} from \"./line.js\";\n\nconst defaults = {\n  n: 20,\n  k: 2,\n  color: \"currentColor\",\n  opacity: 0.2,\n  strict: true,\n  anchor: \"end\"\n};\n\nexport function bollingerX(\n  data,\n  {\n    x = identity,\n    y,\n    k = defaults.k,\n    color = defaults.color,\n    opacity = defaults.opacity,\n    fill = color,\n    fillOpacity = opacity,\n    stroke = color,\n    strokeOpacity,\n    strokeWidth,\n    ...options\n  } = {}\n) {\n  return marks(\n    isNoneish(fill)\n      ? null\n      : areaX(\n          data,\n          map(\n            {x1: bollinger({k: -k, ...options}), x2: bollinger({k, ...options})},\n            {x1: x, x2: x, y, fill, fillOpacity, ...options}\n          )\n        ),\n    isNoneish(stroke)\n      ? null\n      : lineX(data, map({x: bollinger(options)}, {x, y, stroke, strokeOpacity, strokeWidth, ...options}))\n  );\n}\n\nexport function bollingerY(\n  data,\n  {\n    x,\n    y = identity,\n    k = defaults.k,\n    color = defaults.color,\n    opacity = defaults.opacity,\n    fill = color,\n    fillOpacity = opacity,\n    stroke = color,\n    strokeOpacity,\n    strokeWidth,\n    ...options\n  } = {}\n) {\n  return marks(\n    isNoneish(fill)\n      ? null\n      : areaY(\n          data,\n          map(\n            {y1: bollinger({k: -k, ...options}), y2: bollinger({k, ...options})},\n            {x, y1: y, y2: y, fill, fillOpacity, ...options}\n          )\n        ),\n    isNoneish(stroke)\n      ? null\n      : lineY(data, map({y: bollinger(options)}, {x, y, stroke, strokeOpacity, strokeWidth, ...options}))\n  );\n}\n\nexport function bollinger({n = defaults.n, k = 0, strict = defaults.strict, anchor = defaults.anchor} = {}) {\n  return window({k: n, reduce: (Y) => mean(Y) + k * (deviation(Y) || 0), strict, anchor});\n}\n","import {create} from \"../context.js\";\nimport {identity, number} from \"../options.js\";\nimport {Mark} from \"../mark.js\";\nimport {applyMarkers, markers} from \"../marker.js\";\nimport {applyDirectStyles, applyIndirectStyles, applyTransform, applyChannelStyles, offset} from \"../style.js\";\n\nconst defaults = {\n  ariaLabel: \"tick\",\n  fill: null,\n  stroke: \"currentColor\"\n};\n\nclass AbstractTick extends Mark {\n  constructor(data, channels, options) {\n    super(data, channels, options, defaults);\n    markers(this, options);\n  }\n  render(index, scales, channels, dimensions, context) {\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(this._transform, this, scales)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(\"line\")\n          .call(applyDirectStyles, this)\n          .attr(\"x1\", this._x1(scales, channels, dimensions))\n          .attr(\"x2\", this._x2(scales, channels, dimensions))\n          .attr(\"y1\", this._y1(scales, channels, dimensions))\n          .attr(\"y2\", this._y2(scales, channels, dimensions))\n          .call(applyChannelStyles, this, channels)\n          .call(applyMarkers, this, channels, context)\n      )\n      .node();\n  }\n}\n\nexport class TickX extends AbstractTick {\n  constructor(data, options = {}) {\n    const {x, y, inset = 0, insetTop = inset, insetBottom = inset} = options;\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\"},\n        y: {value: y, scale: \"y\", type: \"band\", optional: true}\n      },\n      options\n    );\n    this.insetTop = number(insetTop);\n    this.insetBottom = number(insetBottom);\n  }\n  _transform(selection, mark, {x}) {\n    selection.call(applyTransform, mark, {x}, offset, 0);\n  }\n  _x1(scales, {x: X}) {\n    return (i) => X[i];\n  }\n  _x2(scales, {x: X}) {\n    return (i) => X[i];\n  }\n  _y1({y}, {y: Y}, {marginTop}) {\n    const {insetTop} = this;\n    return Y && y ? (i) => Y[i] + insetTop : marginTop + insetTop;\n  }\n  _y2({y}, {y: Y}, {height, marginBottom}) {\n    const {insetBottom} = this;\n    return Y && y ? (i) => Y[i] + y.bandwidth() - insetBottom : height - marginBottom - insetBottom;\n  }\n}\n\nexport class TickY extends AbstractTick {\n  constructor(data, options = {}) {\n    const {x, y, inset = 0, insetRight = inset, insetLeft = inset} = options;\n    super(\n      data,\n      {\n        y: {value: y, scale: \"y\"},\n        x: {value: x, scale: \"x\", type: \"band\", optional: true}\n      },\n      options\n    );\n    this.insetRight = number(insetRight);\n    this.insetLeft = number(insetLeft);\n  }\n  _transform(selection, mark, {y}) {\n    selection.call(applyTransform, mark, {y}, 0, offset);\n  }\n  _x1({x}, {x: X}, {marginLeft}) {\n    const {insetLeft} = this;\n    return X && x ? (i) => X[i] + insetLeft : marginLeft + insetLeft;\n  }\n  _x2({x}, {x: X}, {width, marginRight}) {\n    const {insetRight} = this;\n    return X && x ? (i) => X[i] + x.bandwidth() - insetRight : width - marginRight - insetRight;\n  }\n  _y1(scales, {y: Y}) {\n    return (i) => Y[i];\n  }\n  _y2(scales, {y: Y}) {\n    return (i) => Y[i];\n  }\n}\n\nexport function tickX(data, {x = identity, ...options} = {}) {\n  return new TickX(data, {...options, x});\n}\n\nexport function tickY(data, {y = identity, ...options} = {}) {\n  return new TickY(data, {...options, y});\n}\n","import {max, min, quantile} from \"d3\";\nimport {marks} from \"../mark.js\";\nimport {identity} from \"../options.js\";\nimport {groupX, groupY, groupZ} from \"../transforms/group.js\";\nimport {map} from \"../transforms/map.js\";\nimport {barX, barY} from \"./bar.js\";\nimport {dot} from \"./dot.js\";\nimport {ruleX, ruleY} from \"./rule.js\";\nimport {tickX, tickY} from \"./tick.js\";\n\n// Returns a composite mark for producing a horizontal box plot, applying the\n// necessary statistical transforms. The boxes are grouped by y, if present.\nexport function boxX(\n  data,\n  {\n    x = identity,\n    y = null,\n    r,\n    fill = \"#ccc\",\n    fillOpacity,\n    stroke = \"currentColor\",\n    strokeOpacity,\n    strokeWidth = 2,\n    sort,\n    ...options\n  } = {}\n) {\n  const group = y != null ? groupY : groupZ;\n  return marks(\n    ruleY(data, group({x1: loqr1, x2: hiqr2}, {x, y, stroke, strokeOpacity, ...options})),\n    barX(data, group({x1: \"p25\", x2: \"p75\"}, {x, y, fill, fillOpacity, ...options})),\n    tickX(data, group({x: \"p50\"}, {x, y, stroke, strokeOpacity, strokeWidth, sort, ...options})),\n    dot(data, map({x: oqr}, {x, y, z: y, r, stroke, strokeOpacity, ...options}))\n  );\n}\n\n// Returns a composite mark for producing a vertical box plot, applying the\n// necessary statistical transforms. The boxes are grouped by x, if present.\nexport function boxY(\n  data,\n  {\n    y = identity,\n    x = null,\n    r,\n    fill = \"#ccc\",\n    fillOpacity,\n    stroke = \"currentColor\",\n    strokeOpacity,\n    strokeWidth = 2,\n    sort,\n    ...options\n  } = {}\n) {\n  const group = x != null ? groupX : groupZ;\n  return marks(\n    ruleX(data, group({y1: loqr1, y2: hiqr2}, {x, y, stroke, strokeOpacity, ...options})),\n    barY(data, group({y1: \"p25\", y2: \"p75\"}, {x, y, fill, fillOpacity, ...options})),\n    tickY(data, group({y: \"p50\"}, {x, y, stroke, strokeOpacity, strokeWidth, sort, ...options})),\n    dot(data, map({y: oqr}, {x, y, z: x, r, stroke, strokeOpacity, ...options}))\n  );\n}\n\n// A map function that returns only outliers, returning NaN for non-outliers\nfunction oqr(values) {\n  const r1 = loqr1(values);\n  const r2 = hiqr2(values);\n  return values.map((v) => (v < r1 || v > r2 ? v : NaN));\n}\n\nfunction loqr1(values) {\n  const lo = quartile1(values) * 2.5 - quartile3(values) * 1.5;\n  return min(values, (d) => (d >= lo ? d : NaN));\n}\n\nfunction hiqr2(values) {\n  const hi = quartile3(values) * 2.5 - quartile1(values) * 1.5;\n  return max(values, (d) => (d <= hi ? d : NaN));\n}\n\nfunction quartile1(values) {\n  return quantile(values, 0.25);\n}\n\nfunction quartile3(values) {\n  return quantile(values, 0.75);\n}\n","import {blurImage, Delaunay, randomLcg, rgb} from \"d3\";\nimport {valueObject} from \"../channel.js\";\nimport {create} from \"../context.js\";\nimport {map, first, second, third, isTuples, isNumeric, isTemporal, identity} from \"../options.js\";\nimport {maybeColorChannel, maybeNumberChannel} from \"../options.js\";\nimport {Mark} from \"../mark.js\";\nimport {applyAttr, applyDirectStyles, applyIndirectStyles, applyTransform, impliedString} from \"../style.js\";\nimport {initializer} from \"../transforms/basic.js\";\n\nconst defaults = {\n  ariaLabel: \"raster\",\n  stroke: null,\n  pixelSize: 1\n};\n\nfunction number(input, name) {\n  const x = +input;\n  if (isNaN(x)) throw new Error(`invalid ${name}: ${input}`);\n  return x;\n}\n\nfunction integer(input, name) {\n  const x = Math.floor(input);\n  if (isNaN(x)) throw new Error(`invalid ${name}: ${input}`);\n  return x;\n}\n\nexport class AbstractRaster extends Mark {\n  constructor(data, channels, options = {}, defaults) {\n    let {\n      width,\n      height,\n      x,\n      y,\n      x1 = x == null ? 0 : undefined,\n      y1 = y == null ? 0 : undefined,\n      x2 = x == null ? width : undefined,\n      y2 = y == null ? height : undefined,\n      pixelSize = defaults.pixelSize,\n      blur = 0,\n      interpolate\n    } = options;\n    if (width != null) width = integer(width, \"width\");\n    if (height != null) height = integer(height, \"height\");\n    // These represent the (minimum) bounds of the raster; they are not\n    // evaluated for each datum. Also, if x and y are not specified explicitly,\n    // then these bounds are used to compute the dense linear grid.\n    if (x1 != null) x1 = number(x1, \"x1\");\n    if (y1 != null) y1 = number(y1, \"y1\");\n    if (x2 != null) x2 = number(x2, \"x2\");\n    if (y2 != null) y2 = number(y2, \"y2\");\n    if (x == null && (x1 == null || x2 == null)) throw new Error(\"missing x\");\n    if (y == null && (y1 == null || y2 == null)) throw new Error(\"missing y\");\n    if (data != null && width != null && height != null) {\n      // If x and y are not given, assume the data is a dense array of samples\n      // covering the entire grid in row-major order. These defaults allow\n      // further shorthand where x and y represent grid column and row index.\n      // TODO If we know that the x and y scales are linear, then we could avoid\n      // materializing these columns to improve performance.\n      if (x === undefined && x1 != null && x2 != null) x = denseX(x1, x2, width, height);\n      if (y === undefined && y1 != null && y2 != null) y = denseY(y1, y2, width, height);\n    }\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", optional: true},\n        y: {value: y, scale: \"y\", optional: true},\n        x1: {value: x1 == null ? null : [x1], scale: \"x\", optional: true, filter: null},\n        y1: {value: y1 == null ? null : [y1], scale: \"y\", optional: true, filter: null},\n        x2: {value: x2 == null ? null : [x2], scale: \"x\", optional: true, filter: null},\n        y2: {value: y2 == null ? null : [y2], scale: \"y\", optional: true, filter: null},\n        ...channels\n      },\n      options,\n      defaults\n    );\n    this.width = width;\n    this.height = height;\n    this.pixelSize = number(pixelSize, \"pixelSize\");\n    this.blur = number(blur, \"blur\");\n    this.interpolate = x == null || y == null ? null : maybeInterpolate(interpolate); // interpolation requires x & y\n  }\n}\n\nexport class Raster extends AbstractRaster {\n  constructor(data, options = {}) {\n    const {imageRendering} = options;\n    if (data == null) {\n      const {fill, fillOpacity} = options;\n      if (maybeNumberChannel(fillOpacity)[0] !== undefined) options = sampler(\"fillOpacity\", options);\n      if (maybeColorChannel(fill)[0] !== undefined) options = sampler(\"fill\", options);\n    }\n    super(data, undefined, options, defaults);\n    this.imageRendering = impliedString(imageRendering, \"auto\");\n  }\n  // Ignore the color scale, so the fill channel is returned unscaled.\n  scale(channels, {color, ...scales}, context) {\n    return super.scale(channels, scales, context);\n  }\n  render(index, scales, values, dimensions, context) {\n    const color = scales[values.channels.fill?.scale] ?? ((x) => x);\n    const {x: X, y: Y} = values;\n    const {document} = context;\n    const [x1, y1, x2, y2] = renderBounds(values, dimensions, context);\n    const dx = x2 - x1;\n    const dy = y2 - y1;\n    const {pixelSize: k, width: w = Math.round(Math.abs(dx) / k), height: h = Math.round(Math.abs(dy) / k)} = this;\n    const n = w * h;\n\n    // Interpolate the samples to fill the raster grid. If interpolate is null,\n    // then a continuous function is being sampled, and the raster grid is\n    // already aligned with the canvas.\n    let {fill: F, fillOpacity: FO} = values;\n    let offset = 0;\n    if (this.interpolate) {\n      const kx = w / dx;\n      const ky = h / dy;\n      const IX = map(X, (x) => (x - x1) * kx, Float64Array);\n      const IY = map(Y, (y) => (y - y1) * ky, Float64Array);\n      if (F) F = this.interpolate(index, w, h, IX, IY, F);\n      if (FO) FO = this.interpolate(index, w, h, IX, IY, FO);\n    }\n\n    // When faceting without interpolation, as when sampling a continuous\n    // function, offset into the dense grid based on the current facet index.\n    else if (this.data == null && index) offset = index.fi * n;\n\n    // Render the raster grid to the canvas, blurring if needed.\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = w;\n    canvas.height = h;\n    const context2d = canvas.getContext(\"2d\");\n    const image = context2d.createImageData(w, h);\n    const imageData = image.data;\n    let {r, g, b} = rgb(this.fill) ?? {r: 0, g: 0, b: 0};\n    let a = (this.fillOpacity ?? 1) * 255;\n    for (let i = 0; i < n; ++i) {\n      const j = i << 2;\n      if (F) {\n        const fi = color(F[i + offset]);\n        if (fi == null) {\n          imageData[j + 3] = 0;\n          continue;\n        }\n        ({r, g, b} = rgb(fi));\n      }\n      if (FO) a = FO[i + offset] * 255;\n      imageData[j + 0] = r;\n      imageData[j + 1] = g;\n      imageData[j + 2] = b;\n      imageData[j + 3] = a;\n    }\n    if (this.blur > 0) blurImage(image, this.blur);\n    context2d.putImageData(image, 0, 0);\n\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, scales)\n      .call((g) =>\n        g\n          .append(\"image\")\n          .attr(\"transform\", `translate(${x1},${y1}) scale(${Math.sign(x2 - x1)},${Math.sign(y2 - y1)})`)\n          .attr(\"width\", Math.abs(dx))\n          .attr(\"height\", Math.abs(dy))\n          .attr(\"preserveAspectRatio\", \"none\")\n          .call(applyAttr, \"image-rendering\", this.imageRendering)\n          .call(applyDirectStyles, this)\n          .attr(\"xlink:href\", canvas.toDataURL())\n      )\n      .node();\n  }\n}\n\nexport function maybeTuples(k, data, options) {\n  if (arguments.length < 3) (options = data), (data = null);\n  let {x, y, [k]: z, ...rest} = options;\n  // Because we use implicit x and y when z is a function of (x, y), and when\n  // data is a dense grid, we must further disambiguate by testing whether data\n  // contains [x, y, z?] tuples. Hence you cant use this shorthand with a\n  // transform that lazily generates tuples, but that seems reasonable since\n  // this is just for convenience anyway.\n  if (x === undefined && y === undefined && isTuples(data)) {\n    (x = first), (y = second);\n    if (z === undefined) z = third;\n  }\n  return [data, {...rest, x, y, [k]: z}];\n}\n\nexport function raster() {\n  const [data, options] = maybeTuples(\"fill\", ...arguments);\n  return new Raster(\n    data,\n    data == null || options.fill !== undefined || options.fillOpacity !== undefined\n      ? options\n      : {...options, fill: identity}\n  );\n}\n\n// See rasterBounds; this version is called during render.\nfunction renderBounds({x1, y1, x2, y2}, dimensions, {projection}) {\n  const {width, height, marginTop, marginRight, marginBottom, marginLeft} = dimensions;\n  return [\n    x1 && projection == null ? x1[0] : marginLeft,\n    y1 && projection == null ? y1[0] : marginTop,\n    x2 && projection == null ? x2[0] : width - marginRight,\n    y2 && projection == null ? y2[0] : height - marginBottom\n  ];\n}\n\n// If x1, y1, x2, y2 were specified, and no projection is in use (and thus the\n// raster grid is necessarily an axis-aligned rectangle), then we can compute\n// tighter bounds for the image, improving resolution.\nexport function rasterBounds({x1, y1, x2, y2}, scales, dimensions, context) {\n  const channels = {};\n  if (x1) channels.x1 = x1;\n  if (y1) channels.y1 = y1;\n  if (x2) channels.x2 = x2;\n  if (y2) channels.y2 = y2;\n  return renderBounds(valueObject(channels, scales), dimensions, context);\n}\n\n// Evaluates the function with the given name, if it exists, on the raster grid,\n// generating a channel of the same name.\nexport function sampler(name, options = {}) {\n  const {[name]: value} = options;\n  if (typeof value !== \"function\") throw new Error(`invalid ${name}: not a function`);\n  return initializer({...options, [name]: undefined}, function (data, facets, channels, scales, dimensions, context) {\n    const {x, y} = scales;\n    // TODO Allow projections, if invertible.\n    if (!x) throw new Error(\"missing scale: x\");\n    if (!y) throw new Error(\"missing scale: y\");\n    const [x1, y1, x2, y2] = rasterBounds(channels, scales, dimensions, context);\n    const dx = x2 - x1;\n    const dy = y2 - y1;\n    const {pixelSize: k} = this;\n    // Note: this must exactly match the defaults in render above!\n    const {width: w = Math.round(Math.abs(dx) / k), height: h = Math.round(Math.abs(dy) / k)} = options;\n    // TODO Hint to use a typed array when possible?\n    const V = new Array(w * h * (facets ? facets.length : 1));\n    const kx = dx / w;\n    const ky = dy / h;\n    let i = 0;\n    for (const facet of facets ?? [undefined]) {\n      for (let yi = 0.5; yi < h; ++yi) {\n        for (let xi = 0.5; xi < w; ++xi, ++i) {\n          V[i] = value(x.invert(x1 + xi * kx), y.invert(y1 + yi * ky), facet);\n        }\n      }\n    }\n    return {data: V, facets, channels: {[name]: {value: V, scale: \"auto\"}}};\n  });\n}\n\nfunction maybeInterpolate(interpolate) {\n  if (typeof interpolate === \"function\") return interpolate;\n  if (interpolate == null) return interpolateNone;\n  switch (`${interpolate}`.toLowerCase()) {\n    case \"none\":\n      return interpolateNone;\n    case \"nearest\":\n      return interpolateNearest;\n    case \"barycentric\":\n      return interpolatorBarycentric();\n    case \"random-walk\":\n      return interpolatorRandomWalk();\n  }\n  throw new Error(`invalid interpolate: ${interpolate}`);\n}\n\n// Applies a simple forward mapping of samples, binning them into pixels without\n// any blending or interpolation. Note: if multiple samples map to the same\n// pixel, the last one wins; this can introduce bias if the points are not in\n// random order, so use Plot.shuffle to randomize the input if needed.\nexport function interpolateNone(index, width, height, X, Y, V) {\n  const W = new Array(width * height);\n  for (const i of index) {\n    if (X[i] < 0 || X[i] >= width || Y[i] < 0 || Y[i] >= height) continue;\n    W[Math.floor(Y[i]) * width + Math.floor(X[i])] = V[i];\n  }\n  return W;\n}\n\nexport function interpolatorBarycentric({random = randomLcg(42)} = {}) {\n  return (index, width, height, X, Y, V) => {\n    // Interpolate the interior of all triangles with barycentric coordinates\n    const {points, triangles, hull} = Delaunay.from(\n      index,\n      (i) => X[i],\n      (i) => Y[i]\n    );\n    const W = new V.constructor(width * height).fill(NaN);\n    const S = new Uint8Array(width * height); // 1 if pixel has been seen.\n    const mix = mixer(V, random);\n\n    for (let i = 0; i < triangles.length; i += 3) {\n      const ta = triangles[i];\n      const tb = triangles[i + 1];\n      const tc = triangles[i + 2];\n      const Ax = points[2 * ta];\n      const Bx = points[2 * tb];\n      const Cx = points[2 * tc];\n      const Ay = points[2 * ta + 1];\n      const By = points[2 * tb + 1];\n      const Cy = points[2 * tc + 1];\n      const x1 = Math.min(Ax, Bx, Cx);\n      const x2 = Math.max(Ax, Bx, Cx);\n      const y1 = Math.min(Ay, By, Cy);\n      const y2 = Math.max(Ay, By, Cy);\n      const z = (By - Cy) * (Ax - Cx) + (Ay - Cy) * (Cx - Bx);\n      if (!z) continue;\n      const va = V[index[ta]];\n      const vb = V[index[tb]];\n      const vc = V[index[tc]];\n      for (let x = Math.floor(x1); x < x2; ++x) {\n        for (let y = Math.floor(y1); y < y2; ++y) {\n          if (x < 0 || x >= width || y < 0 || y >= height) continue;\n          const xp = x + 0.5; // sample pixel centroids\n          const yp = y + 0.5;\n          const s = Math.sign(z);\n          const ga = (By - Cy) * (xp - Cx) + (yp - Cy) * (Cx - Bx);\n          if (ga * s < 0) continue;\n          const gb = (Cy - Ay) * (xp - Cx) + (yp - Cy) * (Ax - Cx);\n          if (gb * s < 0) continue;\n          const gc = z - (ga + gb);\n          if (gc * s < 0) continue;\n          const i = x + width * y;\n          W[i] = mix(va, ga / z, vb, gb / z, vc, gc / z, x, y);\n          S[i] = 1;\n        }\n      }\n    }\n    extrapolateBarycentric(W, S, X, Y, V, width, height, hull, index, mix);\n    return W;\n  };\n}\n\n// Extrapolate by finding the closest point on the hull.\nfunction extrapolateBarycentric(W, S, X, Y, V, width, height, hull, index, mix) {\n  X = Float64Array.from(hull, (i) => X[index[i]]);\n  Y = Float64Array.from(hull, (i) => Y[index[i]]);\n  V = Array.from(hull, (i) => V[index[i]]);\n  const n = X.length;\n  const rays = Array.from({length: n}, (_, j) => ray(j, X, Y));\n  let k = 0;\n  for (let y = 0; y < height; ++y) {\n    const yp = y + 0.5;\n    for (let x = 0; x < width; ++x) {\n      const i = x + width * y;\n      if (!S[i]) {\n        const xp = x + 0.5;\n        for (let l = 0; l < n; ++l) {\n          const j = (n + k + (l % 2 ? (l + 1) / 2 : -l / 2)) % n;\n          if (rays[j](xp, yp)) {\n            const t = segmentProject(X.at(j - 1), Y.at(j - 1), X[j], Y[j], xp, yp);\n            W[i] = mix(V.at(j - 1), t, V[j], 1 - t, V[j], 0, x, y);\n            k = j;\n            break;\n          }\n        }\n      }\n    }\n  }\n}\n\n// Projects a point p = [x, y] onto the line segment [p1, p2], returning the\n// projected coordinates p as t in [0, 1] with p = t p1 + (1 - t) p2.\nfunction segmentProject(x1, y1, x2, y2, x, y) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const a = dx * (x2 - x) + dy * (y2 - y);\n  const b = dx * (x - x1) + dy * (y - y1);\n  return a > 0 && b > 0 ? a / (a + b) : +(a > b);\n}\n\nfunction cross(xa, ya, xb, yb) {\n  return xa * yb - xb * ya;\n}\n\nfunction ray(j, X, Y) {\n  const n = X.length;\n  const xc = X.at(j - 2);\n  const yc = Y.at(j - 2);\n  const xa = X.at(j - 1);\n  const ya = Y.at(j - 1);\n  const xb = X[j];\n  const yb = Y[j];\n  const xd = X.at(j + 1 - n);\n  const yd = Y.at(j + 1 - n);\n  const dxab = xa - xb;\n  const dyab = ya - yb;\n  const dxca = xc - xa;\n  const dyca = yc - ya;\n  const dxbd = xb - xd;\n  const dybd = yb - yd;\n  const hab = Math.hypot(dxab, dyab);\n  const hca = Math.hypot(dxca, dyca);\n  const hbd = Math.hypot(dxbd, dybd);\n  return (x, y) => {\n    const dxa = x - xa;\n    const dya = y - ya;\n    const dxb = x - xb;\n    const dyb = y - yb;\n    return (\n      cross(dxa, dya, dxb, dyb) > -1e-6 &&\n      cross(dxa, dya, dxab, dyab) * hca - cross(dxa, dya, dxca, dyca) * hab > -1e-6 &&\n      cross(dxb, dyb, dxbd, dybd) * hab - cross(dxb, dyb, dxab, dyab) * hbd <= 0\n    );\n  };\n}\n\nexport function interpolateNearest(index, width, height, X, Y, V) {\n  const W = new V.constructor(width * height);\n  const delaunay = Delaunay.from(\n    index,\n    (i) => X[i],\n    (i) => Y[i]\n  );\n  // memoization of delaunay.find for the line start (iy) and pixel (ix)\n  let iy, ix;\n  for (let y = 0.5, k = 0; y < height; ++y) {\n    ix = iy;\n    for (let x = 0.5; x < width; ++x, ++k) {\n      ix = delaunay.find(x, y, ix);\n      if (x === 0.5) iy = ix;\n      W[k] = V[index[ix]];\n    }\n  }\n  return W;\n}\n\n// https://observablehq.com/@observablehq/walk-on-spheres-precision\nexport function interpolatorRandomWalk({random = randomLcg(42), minDistance = 0.5, maxSteps = 2} = {}) {\n  return (index, width, height, X, Y, V) => {\n    const W = new V.constructor(width * height);\n    const delaunay = Delaunay.from(\n      index,\n      (i) => X[i],\n      (i) => Y[i]\n    );\n    // memoization of delaunay.find for the line start (iy), pixel (ix), and wos step (iw)\n    let iy, ix, iw;\n    for (let y = 0.5, k = 0; y < height; ++y) {\n      ix = iy;\n      for (let x = 0.5; x < width; ++x, ++k) {\n        let cx = x;\n        let cy = y;\n        iw = ix = delaunay.find(cx, cy, ix);\n        if (x === 0.5) iy = ix;\n        let distance; // distance to closest sample\n        let step = 0; // count of steps for this walk\n        while ((distance = Math.hypot(X[index[iw]] - cx, Y[index[iw]] - cy)) > minDistance && step < maxSteps) {\n          const angle = random(x, y, step) * 2 * Math.PI;\n          cx += Math.cos(angle) * distance;\n          cy += Math.sin(angle) * distance;\n          iw = delaunay.find(cx, cy, iw);\n          ++step;\n        }\n        W[k] = V[index[iw]];\n      }\n    }\n    return W;\n  };\n}\n\nfunction blend(a, ca, b, cb, c, cc) {\n  return ca * a + cb * b + cc * c;\n}\n\nfunction pick(random) {\n  return (a, ca, b, cb, c, cc, x, y) => {\n    const u = random(x, y);\n    return u < ca ? a : u < ca + cb ? b : c;\n  };\n}\n\nfunction mixer(F, random) {\n  return isNumeric(F) || isTemporal(F) ? blend : pick(random);\n}\n\nfunction denseX(x1, x2, width) {\n  return {\n    transform(data) {\n      const n = data.length;\n      const X = new Float64Array(n);\n      const kx = (x2 - x1) / width;\n      const x0 = x1 + kx / 2;\n      for (let i = 0; i < n; ++i) X[i] = (i % width) * kx + x0;\n      return X;\n    }\n  };\n}\n\nfunction denseY(y1, y2, width, height) {\n  return {\n    transform(data) {\n      const n = data.length;\n      const Y = new Float64Array(n);\n      const ky = (y2 - y1) / height;\n      const y0 = y1 + ky / 2;\n      for (let i = 0; i < n; ++i) Y[i] = (Math.floor(i / width) % height) * ky + y0;\n      return Y;\n    }\n  };\n}\n","import {blur2, contours, geoPath, max, min, nice, range, ticks, thresholdSturges} from \"d3\";\nimport {createChannels} from \"../channel.js\";\nimport {create} from \"../context.js\";\nimport {labelof, identity, arrayify, map} from \"../options.js\";\nimport {applyPosition} from \"../projection.js\";\nimport {applyChannelStyles, applyDirectStyles, applyIndirectStyles, applyTransform, styles} from \"../style.js\";\nimport {initializer} from \"../transforms/basic.js\";\nimport {maybeThresholds} from \"../transforms/bin.js\";\nimport {AbstractRaster, maybeTuples, rasterBounds, sampler} from \"./raster.js\";\n\nconst defaults = {\n  ariaLabel: \"contour\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeMiterlimit: 1,\n  pixelSize: 2\n};\n\nexport class Contour extends AbstractRaster {\n  constructor(data, {smooth = true, value, ...options} = {}) {\n    const channels = styles({}, options, defaults);\n\n    // If value is not specified explicitly, look for a channel to promote. If\n    // more than one channel is present, throw an error. (To disambiguate,\n    // specify the value option explicitly.)\n    if (value === undefined) {\n      for (const key in channels) {\n        if (channels[key].value != null) {\n          if (value !== undefined) throw new Error(\"ambiguous contour value\");\n          value = options[key];\n          options[key] = \"value\";\n        }\n      }\n    }\n\n    // For any channel specified as the literal (contour threshold) \"value\"\n    // (maybe because of the promotion above), propagate the label from the\n    // original value definition.\n    if (value != null) {\n      const v = {transform: (D) => D.map((d) => d.value), label: labelof(value)};\n      for (const key in channels) {\n        if (options[key] === \"value\") {\n          options[key] = v;\n        }\n      }\n    }\n\n    // If the data is null, then well construct the raster grid by evaluating a\n    // function for each point in a dense grid. The value channel is populated\n    // by the sampler initializer, and hence is not passed to super to avoid\n    // computing it before theres data.\n    if (data == null) {\n      if (value == null) throw new Error(\"missing contour value\");\n      options = sampler(\"value\", {value, ...options});\n      value = null;\n    }\n\n    // Otherwise if data was provided, it represents a discrete set of spatial\n    // samples (often a grid, but not necessarily). If no interpolation method\n    // was specified, default to nearest.\n    else {\n      let {interpolate} = options;\n      if (value === undefined) value = identity;\n      if (interpolate === undefined) options.interpolate = \"nearest\";\n    }\n\n    // Wrap the options in our initializer that computes the contour geometries;\n    // this runs after any other initializers (and transforms).\n    super(data, {value: {value, optional: true}}, contourGeometry(options), defaults);\n\n    // With the exception of the x, y, x1, y1, x2, y2, and value channels, this\n    // marks channels are not evaluated on the initial data but rather on the\n    // contour multipolygons generated in the initializer.\n    const contourChannels = {geometry: {value: identity}};\n    for (const key in this.channels) {\n      const channel = this.channels[key];\n      const {scale} = channel;\n      if (scale === \"x\" || scale === \"y\" || key === \"value\") continue;\n      contourChannels[key] = channel;\n      delete this.channels[key];\n    }\n    this.contourChannels = contourChannels;\n    this.smooth = !!smooth;\n  }\n  filter(index, {x, y, value, ...channels}, values) {\n    // Only filter channels constructed by the contourGeometry initializer; the\n    // x, y, and value channels must be filtered by the initializer itself.\n    return super.filter(index, channels, values);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {geometry: G} = channels;\n    const path = geoPath();\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, scales)\n      .call((g) => {\n        g.selectAll()\n          .data(index)\n          .enter()\n          .append(\"path\")\n          .call(applyDirectStyles, this)\n          .attr(\"d\", (i) => path(G[i]))\n          .call(applyChannelStyles, this, channels);\n      })\n      .node();\n  }\n}\n\nfunction contourGeometry({thresholds, interval, ...options}) {\n  thresholds = maybeThresholds(thresholds, interval, thresholdSturges);\n  return initializer(options, function (data, facets, channels, scales, dimensions, context) {\n    const [x1, y1, x2, y2] = rasterBounds(channels, scales, dimensions, context);\n    const dx = x2 - x1;\n    const dy = y2 - y1;\n    const {pixelSize: k, width: w = Math.round(Math.abs(dx) / k), height: h = Math.round(Math.abs(dy) / k)} = this;\n    const kx = w / dx;\n    const ky = h / dy;\n    const V = channels.value.value;\n    const VV = []; // V per facet\n\n    // Interpolate the raster grid, as needed.\n    if (this.interpolate) {\n      const {x: X, y: Y} = applyPosition(channels, scales, context);\n      // Convert scaled (screen) coordinates to grid (canvas) coordinates.\n      const IX = map(X, (x) => (x - x1) * kx, Float64Array);\n      const IY = map(Y, (y) => (y - y1) * ky, Float64Array);\n      // The contour mark normally skips filtering on x, y, and value, so here\n      // were careful to use different names (0, 1, 2) when filtering.\n      const ichannels = [channels.x, channels.y, channels.value];\n      const ivalues = [IX, IY, V];\n      for (const facet of facets) {\n        const index = this.filter(facet, ichannels, ivalues);\n        VV.push(this.interpolate(index, w, h, IX, IY, V));\n      }\n    }\n\n    // Otherwise, chop up the existing dense raster grid into facets, if needed.\n    // V must be a dense grid in projected coordinates; if there are multiple\n    // facets, then V must be laid out vertically as facet 0, 1, 2 etc.\n    else if (facets) {\n      const n = w * h;\n      const m = facets.length;\n      for (let i = 0; i < m; ++i) VV.push(V.slice(i * n, i * n + n));\n    } else {\n      VV.push(V);\n    }\n\n    // Blur the raster grid, if desired.\n    if (this.blur > 0) for (const V of VV) blur2({data: V, width: w, height: h}, this.blur);\n\n    // Compute the contour thresholds.\n    const T = maybeTicks(thresholds, V, ...finiteExtent(VV));\n    if (T === null) throw new Error(`unsupported thresholds: ${thresholds}`);\n\n    // Compute the (maybe faceted) contours.\n    const {contour} = contours().size([w, h]).smooth(this.smooth);\n    const contourData = [];\n    const contourFacets = [];\n    for (const V of VV) {\n      contourFacets.push(range(contourData.length, contourData.push(...map(T, (t) => contour(V, t)))));\n    }\n\n    // Rescale the contour multipolygon from grid to screen coordinates.\n    for (const {coordinates} of contourData) {\n      for (const rings of coordinates) {\n        for (const ring of rings) {\n          for (const point of ring) {\n            point[0] = point[0] / kx + x1;\n            point[1] = point[1] / ky + y1;\n          }\n        }\n      }\n    }\n\n    // Compute the deferred channels.\n    return {\n      data: contourData,\n      facets: contourFacets,\n      channels: createChannels(this.contourChannels, contourData)\n    };\n  });\n}\n\n// Apply the thresholds interval, function, or count, and return an array of\n// ticks. d3-contour unlike d3-array doesnt pass the min and max automatically,\n// so we do that here to normalize, and also so we can share consistent\n// thresholds across facets. When an interval is used, note that the lowest\n// threshold should be below (or equal) to the lowest value, or else some data\n// will be missing.\nfunction maybeTicks(thresholds, V, min, max) {\n  if (typeof thresholds?.range === \"function\") return thresholds.range(thresholds.floor(min), max);\n  if (typeof thresholds === \"function\") thresholds = thresholds(V, min, max);\n  if (typeof thresholds !== \"number\") return arrayify(thresholds);\n  const tz = ticks(...nice(min, max, thresholds), thresholds);\n  while (tz[tz.length - 1] >= max) tz.pop();\n  while (tz[1] < min) tz.shift();\n  return tz;\n}\n\nexport function contour() {\n  return new Contour(...maybeTuples(\"value\", ...arguments));\n}\n\nfunction finiteExtent(VV) {\n  return [min(VV, (V) => min(V, finite)), max(VV, (V) => max(V, finite))];\n}\n\nfunction finite(x) {\n  return isFinite(x) ? x : NaN;\n}\n","import {getSource} from \"../channel.js\";\nimport {pointer, pointerX, pointerY} from \"../interactions/pointer.js\";\nimport {marks} from \"../mark.js\";\nimport {initializer} from \"../transforms/basic.js\";\nimport {ruleX, ruleY} from \"./rule.js\";\nimport {text} from \"./text.js\";\n\nexport function crosshair(data, options) {\n  return crosshairK(pointer, data, options);\n}\n\nexport function crosshairX(data, options = {}) {\n  return crosshairK(pointerX, data, options);\n}\n\nexport function crosshairY(data, options = {}) {\n  return crosshairK(pointerY, data, options);\n}\n\nfunction crosshairK(pointer, data, options = {}) {\n  const {x, y, maxRadius} = options;\n  const p = pointer({px: x, py: y, maxRadius});\n  const M = [];\n  if (x != null) M.push(ruleX(data, ruleOptions(\"x\", {...p, inset: -6}, options)));\n  if (y != null) M.push(ruleY(data, ruleOptions(\"y\", {...p, inset: -6}, options)));\n  if (x != null) M.push(text(data, textOptions(\"x\", {...p, dy: 9, frameAnchor: \"bottom\", lineAnchor: \"top\"}, options)));\n  if (y != null) M.push(text(data, textOptions(\"y\", {...p, dx: -9, frameAnchor: \"left\", textAnchor: \"end\"}, options)));\n  for (const m of M) m.ariaLabel = `crosshair ${m.ariaLabel}`;\n  return marks(...M);\n}\n\nfunction markOptions(\n  k,\n  {channels: pointerChannels, ...pointerOptions},\n  {facet, facetAnchor, fx, fy, [k]: p, channels, transform, initializer}\n) {\n  return {\n    ...pointerOptions,\n    facet,\n    facetAnchor,\n    fx,\n    fy,\n    [k]: p,\n    channels: {...pointerChannels, ...channels},\n    transform,\n    initializer: pxpy(k, initializer)\n  };\n}\n\n// Wrap the initializer, if any, mapping px and py to x and y temporarily (e.g.,\n// for hexbin) then mapping back to px and py for rendering.\nfunction pxpy(k, i) {\n  if (i == null) return i;\n  return function (data, facets, {x: x1, y: y1, px, py, ...c1}, ...args) {\n    const {channels: {x, y, ...c} = {}, ...rest} = i.call(this, data, facets, {...c1, x: px, y: py}, ...args);\n    return {\n      channels: {\n        ...c,\n        ...(x && {px: x, ...(k === \"x\" && {x})}),\n        ...(y && {py: y, ...(k === \"y\" && {y})})\n      },\n      ...rest\n    };\n  };\n}\n\nfunction ruleOptions(k, pointerOptions, options) {\n  const {\n    color = \"currentColor\",\n    opacity = 0.2,\n    ruleStroke: stroke = color,\n    ruleStrokeOpacity: strokeOpacity = opacity,\n    ruleStrokeWidth: strokeWidth\n  } = options;\n  return {\n    ...markOptions(k, pointerOptions, options),\n    stroke,\n    strokeOpacity,\n    strokeWidth\n  };\n}\n\nfunction textOptions(k, pointerOptions, options) {\n  const {\n    color = \"currentColor\",\n    textFill: fill = color,\n    textFillOpacity: fillOpacity,\n    textStroke: stroke = \"var(--plot-background)\",\n    textStrokeOpacity: strokeOpacity,\n    textStrokeWidth: strokeWidth = 5\n  } = options;\n  return {\n    ...markOptions(k, pointerOptions, textChannel(k, options)),\n    fill,\n    fillOpacity,\n    stroke,\n    strokeOpacity,\n    strokeWidth\n  };\n}\n\n// Rather than aliasing text to have the same definition as x and y, we use an\n// initializer to alias the channel values, such that the text channel can be\n// derived by an initializer such as hexbin.\nfunction textChannel(source, options) {\n  return initializer(options, (data, facets, channels) => {\n    return {channels: {text: {value: getSource(channels, source)?.value}}};\n  });\n}\n","import {group, pathRound as path, select, Delaunay} from \"d3\";\nimport {create} from \"../context.js\";\nimport {maybeCurve} from \"../curve.js\";\nimport {defined} from \"../defined.js\";\nimport {Mark} from \"../mark.js\";\nimport {markers, applyMarkers} from \"../marker.js\";\nimport {constant, maybeTuple, maybeZ} from \"../options.js\";\nimport {applyPosition} from \"../projection.js\";\nimport {applyFrameAnchor, applyTransform} from \"../style.js\";\nimport {applyChannelStyles, applyDirectStyles, applyIndirectStyles} from \"../style.js\";\nimport {basic, initializer} from \"../transforms/basic.js\";\nimport {exclusiveFacets} from \"../transforms/exclusiveFacets.js\";\nimport {maybeGroup} from \"../transforms/group.js\";\n\nconst delaunayLinkDefaults = {\n  ariaLabel: \"delaunay link\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeMiterlimit: 1\n};\n\nconst delaunayMeshDefaults = {\n  ariaLabel: \"delaunay mesh\",\n  fill: null,\n  stroke: \"currentColor\",\n  strokeOpacity: 0.2\n};\n\nconst hullDefaults = {\n  ariaLabel: \"hull\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 1.5,\n  strokeMiterlimit: 1\n};\n\nconst voronoiDefaults = {\n  ariaLabel: \"voronoi\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeMiterlimit: 1\n};\n\nconst voronoiMeshDefaults = {\n  ariaLabel: \"voronoi mesh\",\n  fill: null,\n  stroke: \"currentColor\",\n  strokeOpacity: 0.2\n};\n\nclass DelaunayLink extends Mark {\n  constructor(data, options = {}) {\n    const {x, y, z, curve, tension} = options;\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", optional: true},\n        y: {value: y, scale: \"y\", optional: true},\n        z: {value: z, optional: true}\n      },\n      options,\n      delaunayLinkDefaults\n    );\n    this.curve = maybeCurve(curve, tension);\n    markers(this, options);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x, y} = scales;\n    const {x: X, y: Y, z: Z} = channels;\n    const {curve} = this;\n    const [cx, cy] = applyFrameAnchor(this, dimensions);\n    const xi = X ? (i) => X[i] : constant(cx);\n    const yi = Y ? (i) => Y[i] : constant(cy);\n    const mark = this;\n\n    function links(index) {\n      let i = -1;\n      const newIndex = [];\n      const newChannels = {};\n      for (const k in channels) newChannels[k] = [];\n      const X1 = [];\n      const X2 = [];\n      const Y1 = [];\n      const Y2 = [];\n\n      function link(ti, tj) {\n        ti = index[ti];\n        tj = index[tj];\n        newIndex.push(++i);\n        X1[i] = xi(ti);\n        Y1[i] = yi(ti);\n        X2[i] = xi(tj);\n        Y2[i] = yi(tj);\n        for (const k in channels) newChannels[k].push(channels[k][tj]);\n      }\n\n      const {halfedges, hull, triangles} = Delaunay.from(index, xi, yi);\n      for (let i = 0; i < halfedges.length; ++i) {\n        // inner edges\n        const j = halfedges[i];\n        if (j > i) link(triangles[i], triangles[j]);\n      }\n      for (let i = 0; i < hull.length; ++i) {\n        // convex hull\n        link(hull[i], hull[(i + 1) % hull.length]);\n      }\n\n      select(this)\n        .selectAll()\n        .data(newIndex)\n        .enter()\n        .append(\"path\")\n        .call(applyDirectStyles, mark)\n        .attr(\"d\", (i) => {\n          const p = path();\n          const c = curve(p);\n          c.lineStart();\n          c.point(X1[i], Y1[i]);\n          c.point(X2[i], Y2[i]);\n          c.lineEnd();\n          return p;\n        })\n        .call(applyChannelStyles, mark, newChannels)\n        .call(applyMarkers, mark, newChannels, context);\n    }\n\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {x: X && x, y: Y && y})\n      .call(\n        Z\n          ? (g) =>\n              g\n                .selectAll()\n                .data(group(index, (i) => Z[i]).values())\n                .enter()\n                .append(\"g\")\n                .each(links)\n          : (g) => g.datum(index).each(links)\n      )\n      .node();\n  }\n}\n\nclass AbstractDelaunayMark extends Mark {\n  constructor(data, options = {}, defaults, zof = ({z}) => z) {\n    const {x, y} = options;\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", optional: true},\n        y: {value: y, scale: \"y\", optional: true},\n        z: {value: zof(options), optional: true}\n      },\n      options,\n      defaults\n    );\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x, y} = scales;\n    const {x: X, y: Y, z: Z} = channels;\n    const [cx, cy] = applyFrameAnchor(this, dimensions);\n    const xi = X ? (i) => X[i] : constant(cx);\n    const yi = Y ? (i) => Y[i] : constant(cy);\n    const mark = this;\n\n    function mesh(index) {\n      const delaunay = Delaunay.from(index, xi, yi);\n      select(this)\n        .append(\"path\")\n        .datum(index[0])\n        .call(applyDirectStyles, mark)\n        .attr(\"d\", mark._render(delaunay, dimensions))\n        .call(applyChannelStyles, mark, channels);\n    }\n\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {x: X && x, y: Y && y})\n      .call(\n        Z\n          ? (g) =>\n              g\n                .selectAll()\n                .data(group(index, (i) => Z[i]).values())\n                .enter()\n                .append(\"g\")\n                .each(mesh)\n          : (g) => g.datum(index).each(mesh)\n      )\n      .node();\n  }\n}\n\nclass DelaunayMesh extends AbstractDelaunayMark {\n  constructor(data, options = {}) {\n    super(data, options, delaunayMeshDefaults);\n    this.fill = \"none\";\n  }\n  _render(delaunay) {\n    return delaunay.render();\n  }\n}\n\nclass Hull extends AbstractDelaunayMark {\n  constructor(data, options = {}) {\n    super(data, options, hullDefaults, maybeZ);\n  }\n  _render(delaunay) {\n    return delaunay.renderHull();\n  }\n}\n\nclass Voronoi extends Mark {\n  constructor(data, options = {}) {\n    const {x, y, z} = options;\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", optional: true},\n        y: {value: y, scale: \"y\", optional: true},\n        z: {value: z, optional: true}\n      },\n      initializer(options, function (data, facets, channels, scales, dimensions, context) {\n        let {x: X, y: Y, z: Z} = channels;\n        ({x: X, y: Y} = applyPosition(channels, scales, context));\n        Z = Z?.value;\n        const C = new Array((X ?? Y).length).fill(null);\n        const [cx, cy] = applyFrameAnchor(this, dimensions);\n        const xi = X ? (i) => X[i] : constant(cx);\n        const yi = Y ? (i) => Y[i] : constant(cy);\n        for (let I of facets) {\n          if (X) I = I.filter((i) => defined(xi(i)));\n          if (Y) I = I.filter((i) => defined(yi(i)));\n          for (const [, J] of maybeGroup(I, Z)) {\n            const delaunay = Delaunay.from(J, xi, yi);\n            const voronoi = voronoiof(delaunay, dimensions);\n            for (let i = 0, n = J.length; i < n; ++i) {\n              C[J[i]] = voronoi.renderCell(i);\n            }\n          }\n        }\n        return {data, facets, channels: {cells: {value: C}}};\n      }),\n      voronoiDefaults\n    );\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x, y} = scales;\n    const {x: X, y: Y, cells: C} = channels;\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {x: X && x, y: Y && y})\n      .call((g) => {\n        g.selectAll()\n          .data(index)\n          .enter()\n          .append(\"path\")\n          .call(applyDirectStyles, this)\n          .attr(\"d\", (i) => C[i])\n          .call(applyChannelStyles, this, channels);\n      })\n      .node();\n  }\n}\n\nclass VoronoiMesh extends AbstractDelaunayMark {\n  constructor(data, options) {\n    super(data, options, voronoiMeshDefaults);\n    this.fill = \"none\";\n  }\n  _render(delaunay, dimensions) {\n    return voronoiof(delaunay, dimensions).render();\n  }\n}\n\nfunction voronoiof(delaunay, dimensions) {\n  const {width, height, marginTop, marginRight, marginBottom, marginLeft} = dimensions;\n  return delaunay.voronoi([marginLeft, marginTop, width - marginRight, height - marginBottom]);\n}\n\nfunction delaunayMark(DelaunayMark, data, {x, y, ...options} = {}) {\n  [x, y] = maybeTuple(x, y);\n  return new DelaunayMark(data, {...options, x, y});\n}\n\nexport function delaunayLink(data, options) {\n  return delaunayMark(DelaunayLink, data, options);\n}\n\nexport function delaunayMesh(data, options) {\n  return delaunayMark(DelaunayMesh, data, options);\n}\n\nexport function hull(data, options) {\n  return delaunayMark(Hull, data, options);\n}\n\nexport function voronoi(data, {x, y, initializer, ...options} = {}) {\n  return delaunayMark(Voronoi, data, {...basic({...options, x, y}, exclusiveFacets), initializer});\n}\n\nexport function voronoiMesh(data, options) {\n  return delaunayMark(VoronoiMesh, data, options);\n}\n","import {contourDensity, geoPath} from \"d3\";\nimport {create} from \"../context.js\";\nimport {Mark} from \"../mark.js\";\nimport {TypedArray, coerceNumbers, maybeTuple, maybeZ} from \"../options.js\";\nimport {applyPosition} from \"../projection.js\";\nimport {\n  applyChannelStyles,\n  applyDirectStyles,\n  applyFrameAnchor,\n  applyIndirectStyles,\n  applyTransform,\n  groupZ\n} from \"../style.js\";\nimport {initializer} from \"../transforms/basic.js\";\n\nconst defaults = {\n  ariaLabel: \"density\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeMiterlimit: 1\n};\n\nexport class Density extends Mark {\n  constructor(data, {x, y, z, weight, fill, stroke, ...options} = {}) {\n    // If fill or stroke is specified as density, then temporarily treat these\n    // as a literal color when computing defaults and maybeZ; below, well unset\n    // these constant colors back to undefined since they will instead be\n    // populated by a channel generated by the initializer.\n    const fillDensity = isDensity(fill) && ((fill = \"currentColor\"), true);\n    const strokeDensity = isDensity(stroke) && ((stroke = \"currentColor\"), true);\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", optional: true},\n        y: {value: y, scale: \"y\", optional: true},\n        z: {value: maybeZ({z, fill, stroke}), optional: true},\n        weight: {value: weight, optional: true}\n      },\n      densityInitializer({...options, fill, stroke}, fillDensity, strokeDensity),\n      defaults\n    );\n    if (fillDensity) this.fill = undefined;\n    if (strokeDensity) this.stroke = undefined;\n    this.z = z;\n  }\n  filter(index) {\n    return index; // dont filter contours constructed by initializer\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {contours} = channels;\n    const path = geoPath();\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {})\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(\"path\")\n          .call(applyDirectStyles, this)\n          .call(applyChannelStyles, this, channels)\n          .attr(\"d\", (i) => path(contours[i]))\n      )\n      .node();\n  }\n}\n\nexport function density(data, {x, y, ...options} = {}) {\n  [x, y] = maybeTuple(x, y);\n  return new Density(data, {...options, x, y});\n}\n\nconst dropChannels = new Set([\"x\", \"y\", \"z\", \"weight\"]);\n\nfunction densityInitializer(options, fillDensity, strokeDensity) {\n  const k = 100; // arbitrary scale factor for readability\n  let {bandwidth, thresholds} = options;\n  bandwidth = bandwidth === undefined ? 20 : +bandwidth;\n  thresholds =\n    thresholds === undefined\n      ? 20\n      : typeof thresholds?.[Symbol.iterator] === \"function\"\n      ? coerceNumbers(thresholds)\n      : +thresholds;\n  return initializer(options, function (data, facets, channels, scales, dimensions, context) {\n    const W = channels.weight ? coerceNumbers(channels.weight.value) : null;\n    const Z = channels.z?.value;\n    const {z} = this;\n    const [cx, cy] = applyFrameAnchor(this, dimensions);\n    const {width, height} = dimensions;\n\n    // Get the (either scaled or projected) xy channels.\n    const {x: X, y: Y} = applyPosition(channels, scales, context);\n\n    // Group any of the input channels according to the first index associated\n    // with each z-series or facet. Drop any channels not be needed for\n    // rendering after the contours are computed.\n    const newChannels = Object.fromEntries(\n      Object.entries(channels)\n        .filter(([key]) => !dropChannels.has(key))\n        .map(([key, channel]) => [key, {...channel, value: []}])\n    );\n\n    // If the fill or stroke encodes density, construct new output channels.\n    const FD = fillDensity && [];\n    const SD = strokeDensity && [];\n\n    const density = contourDensity()\n      .x(X ? (i) => X[i] : cx)\n      .y(Y ? (i) => Y[i] : cy)\n      .weight(W ? (i) => W[i] : 1)\n      .size([width, height])\n      .bandwidth(bandwidth);\n\n    // Compute the grid for each facet-series.\n    const facetsContours = [];\n    for (const facet of facets) {\n      const facetContours = [];\n      facetsContours.push(facetContours);\n      for (const index of Z ? groupZ(facet, Z, z) : [facet]) {\n        const contour = density.contours(index);\n        facetContours.push([index, contour]);\n      }\n    }\n\n    // If explicit thresholds were not specified, find the maximum density of\n    // all grids and use this to compute thresholds.\n    let T = thresholds;\n    if (!(T instanceof TypedArray)) {\n      let maxValue = 0;\n      for (const facetContours of facetsContours) {\n        for (const [, contour] of facetContours) {\n          const max = contour.max;\n          if (max > maxValue) maxValue = max;\n        }\n      }\n      T = Float64Array.from({length: thresholds - 1}, (_, i) => (maxValue * k * (i + 1)) / thresholds);\n    }\n\n    // Generate contours for each facet-series.\n    const newFacets = [];\n    const contours = [];\n    for (const facetContours of facetsContours) {\n      const newFacet = [];\n      newFacets.push(newFacet);\n      for (const [index, contour] of facetContours) {\n        for (const t of T) {\n          newFacet.push(contours.length);\n          contours.push(contour(t / k));\n          if (FD) FD.push(t);\n          if (SD) SD.push(t);\n          for (const key in newChannels) {\n            newChannels[key].value.push(channels[key].value[index[0]]);\n          }\n        }\n      }\n    }\n\n    // If the fill or stroke encodes density, ensure that a zero value is\n    // included so that the default color scale domain starts at zero. Otherwise\n    // if the starting range value is the same as the background color, the\n    // first contour might not be visible.\n    if (FD) FD.push(0);\n    if (SD) SD.push(0);\n\n    return {\n      data,\n      facets: newFacets,\n      channels: {\n        ...newChannels,\n        ...(FD && {fill: {value: FD, scale: \"color\"}}),\n        ...(SD && {stroke: {value: SD, scale: \"color\"}}),\n        contours: {value: contours}\n      }\n    };\n  });\n}\n\nfunction isDensity(value) {\n  return /^density$/i.test(value);\n}\n","import {create} from \"../context.js\";\nimport {composeRender, marks, withTip} from \"../mark.js\";\nimport {identity, indexOf, isNoneish, labelof, maybeColorChannel, maybeValue, valueof} from \"../options.js\";\nimport {inferScaleOrder} from \"../scales.js\";\nimport {getClipId} from \"../style.js\";\nimport {area} from \"./area.js\";\nimport {line} from \"./line.js\";\n\nexport function differenceX(data, options) {\n  return differenceK(\"x\", data, options);\n}\n\nexport function differenceY(data, options) {\n  return differenceK(\"y\", data, options);\n}\n\nfunction differenceK(\n  k,\n  data,\n  {\n    x1,\n    x2,\n    y1,\n    y2,\n    x = x1 === undefined && x2 === undefined ? (k === \"y\" ? indexOf : identity) : undefined,\n    y = y1 === undefined && y2 === undefined ? (k === \"x\" ? indexOf : identity) : undefined,\n    fill, // ignored\n    positiveFill = \"#3ca951\",\n    negativeFill = \"#4269d0\",\n    fillOpacity = 1,\n    positiveFillOpacity = fillOpacity,\n    negativeFillOpacity = fillOpacity,\n    stroke,\n    strokeOpacity,\n    z = maybeColorChannel(stroke)[0],\n    clip, // optional additional clip for area\n    tip,\n    render,\n    ...options\n  } = {}\n) {\n  [x1, x2] = memoTuple(x, x1, x2);\n  [y1, y2] = memoTuple(y, y1, y2);\n  if (x1 === x2 && y1 === y2) {\n    if (k === \"y\") y1 = memo(0);\n    else x1 = memo(0);\n  }\n  ({tip} = withTip({tip}, k === \"y\" ? \"x\" : \"y\"));\n  return marks(\n    !isNoneish(positiveFill)\n      ? Object.assign(\n          area(data, {\n            x1,\n            x2,\n            y1,\n            y2,\n            z,\n            fill: positiveFill,\n            fillOpacity: positiveFillOpacity,\n            render: composeRender(render, clipDifference(k, true)),\n            clip,\n            ...options\n          }),\n          {ariaLabel: \"positive difference\"}\n        )\n      : null,\n    !isNoneish(negativeFill)\n      ? Object.assign(\n          area(data, {\n            x1,\n            x2,\n            y1,\n            y2,\n            z,\n            fill: negativeFill,\n            fillOpacity: negativeFillOpacity,\n            render: composeRender(render, clipDifference(k, false)),\n            clip,\n            ...options\n          }),\n          {ariaLabel: \"negative difference\"}\n        )\n      : null,\n    line(data, {\n      x: x2,\n      y: y2,\n      z,\n      stroke,\n      strokeOpacity,\n      tip,\n      clip: true,\n      ...options\n    })\n  );\n}\n\nfunction memoTuple(x, x1, x2) {\n  if (x1 === undefined && x2 === undefined) {\n    // {x}  [x, x]\n    x1 = x2 = memo(x);\n  } else if (x1 === undefined) {\n    // {x2}  [x2, x2]\n    // {x, x2}  [x, x2]\n    x2 = memo(x2);\n    x1 = x === undefined ? x2 : memo(x);\n  } else if (x2 === undefined) {\n    // {x1}  [x1, x1]\n    // {x, x1}  [x1, x]\n    x1 = memo(x1);\n    x2 = x === undefined ? x1 : memo(x);\n  } else {\n    // {x1, x2}  [x1, x2]\n    x1 = memo(x1);\n    x2 = memo(x2);\n  }\n  return [x1, x2];\n}\n\nfunction memo(v) {\n  let V;\n  const {value, label = labelof(value)} = maybeValue(v);\n  return {transform: (data) => V || (V = valueof(data, value)), label};\n}\n\nfunction clipDifference(k, positive) {\n  const f = k === \"x\" ? \"y\" : \"x\"; // f is the flipped dimension\n  const f1 = `${f}1`;\n  const f2 = `${f}2`;\n  const k1 = `${k}1`;\n  const k2 = `${k}2`;\n  return (index, scales, channels, dimensions, context, next) => {\n    const {[f1]: F1, [f2]: F2} = channels;\n    const K1 = new Float32Array(F1.length);\n    const K2 = new Float32Array(F2.length);\n    const m = dimensions[k === \"y\" ? \"height\" : \"width\"];\n    (positive === inferScaleOrder(scales[k]) < 0 ? K1 : K2).fill(m);\n    const oc = next(index, scales, {...channels, [f2]: F1, [k2]: K2}, dimensions, context);\n    const og = next(index, scales, {...channels, [f1]: F2, [k1]: K1}, dimensions, context);\n    const c = oc.querySelector(\"g\") ?? oc; // applyClip\n    const g = og.querySelector(\"g\") ?? og; // applyClip\n    for (let i = 0; c.firstChild; i += 2) {\n      const id = getClipId();\n      const clipPath = create(\"svg:clipPath\", context).attr(\"id\", id).node();\n      clipPath.appendChild(c.firstChild);\n      g.childNodes[i].setAttribute(\"clip-path\", `url(#${id})`);\n      g.insertBefore(clipPath, g.childNodes[i]);\n    }\n    return og;\n  };\n}\n","import {geoCentroid as GeoCentroid} from \"d3\";\nimport {memoize1} from \"../memoize.js\";\nimport {identity, valueof} from \"../options.js\";\nimport {initializer} from \"./basic.js\";\n\nexport function centroid({geometry = identity, ...options} = {}) {\n  const getG = memoize1((data) => valueof(data, geometry));\n  return initializer(\n    // Suppress defaults for x and y since they will be computed by the initializer.\n    // Propagate the (memoized) geometry channel in case its still needed.\n    {...options, x: null, y: null, geometry: {transform: getG}},\n    (data, facets, channels, scales, dimensions, context) => {\n      const G = getG(data);\n      const n = G.length;\n      const X = new Float64Array(n);\n      const Y = new Float64Array(n);\n      const {centroid} = context.path();\n      for (let i = 0; i < n; ++i) [X[i], Y[i]] = centroid(G[i]);\n      return {\n        data,\n        facets,\n        channels: {x: {value: X, scale: null, source: null}, y: {value: Y, scale: null, source: null}}\n      };\n    }\n  );\n}\n\nexport function geoCentroid({geometry = identity, ...options} = {}) {\n  const getG = memoize1((data) => valueof(data, geometry));\n  const getC = memoize1((data) => valueof(getG(data), GeoCentroid));\n  return {\n    ...options,\n    x: {transform: (data) => Float64Array.from(getC(data), ([x]) => x)},\n    y: {transform: (data) => Float64Array.from(getC(data), ([, y]) => y)},\n    geometry: {transform: getG}\n  };\n}\n","import {geoGraticule10} from \"d3\";\nimport {create} from \"../context.js\";\nimport {negative, positive} from \"../defined.js\";\nimport {Mark} from \"../mark.js\";\nimport {identity, maybeNumberChannel} from \"../options.js\";\nimport {applyChannelStyles, applyDirectStyles, applyIndirectStyles, applyTransform} from \"../style.js\";\nimport {centroid} from \"../transforms/centroid.js\";\nimport {withDefaultSort} from \"./dot.js\";\n\nconst defaults = {\n  ariaLabel: \"geo\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 1,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeMiterlimit: 1\n};\n\nexport class Geo extends Mark {\n  constructor(data, options = {}) {\n    const [vr, cr] = maybeNumberChannel(options.r, 3);\n    super(\n      data,\n      {\n        x: {value: options.tip ? options.x : null, scale: \"x\", optional: true},\n        y: {value: options.tip ? options.y : null, scale: \"y\", optional: true},\n        r: {value: vr, scale: \"r\", filter: positive, optional: true},\n        geometry: {value: options.geometry, scale: \"projection\"}\n      },\n      withDefaultSort(options),\n      defaults\n    );\n    this.r = cr;\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {geometry: G, r: R} = channels;\n    const path = context.path();\n    const {r} = this;\n    if (negative(r)) index = [];\n    else if (r !== undefined) path.pointRadius(r);\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, scales)\n      .call((g) => {\n        g.selectAll()\n          .data(index)\n          .enter()\n          .append(\"path\")\n          .call(applyDirectStyles, this)\n          .attr(\"d\", R ? (i) => path.pointRadius(R[i])(G[i]) : (i) => path(G[i]))\n          .call(applyChannelStyles, this, channels);\n      })\n      .node();\n  }\n}\n\nexport function geo(data, options = {}) {\n  if (options.tip && options.x === undefined && options.y === undefined) options = centroid(options);\n  else if (options.geometry === undefined) options = {...options, geometry: identity};\n  return new Geo(data, options);\n}\n\nexport function sphere({strokeWidth = 1.5, ...options} = {}) {\n  return geo({type: \"Sphere\"}, {strokeWidth, ...options});\n}\n\nexport function graticule({strokeOpacity = 0.1, ...options} = {}) {\n  return geo(geoGraticule10(), {strokeOpacity, ...options});\n}\n","import {map, number, valueof} from \"../options.js\";\nimport {applyPosition} from \"../projection.js\";\nimport {sqrt3} from \"../symbol.js\";\nimport {initializer} from \"./basic.js\";\nimport {hasOutput, maybeGroup, maybeGroupOutputs, maybeSubgroup} from \"./group.js\";\n\n// We dont want the hexagons to align with the edges of the plot frame, as that\n// would cause extreme x-values (the upper bound of the default x-scale domain)\n// to be rounded up into a floating bin to the right of the plot. Therefore,\n// rather than centering the origin hexagon around 0,0 in screen coordinates,\n// we offset slightly to 0.5,0. The hexgrid mark uses the same origin.\nexport const ox = 0.5,\n  oy = 0;\n\nexport function hexbin(outputs = {fill: \"count\"}, {binWidth, ...options} = {}) {\n  const {z} = options;\n\n  // TODO filter e.g. to show empty hexbins?\n  binWidth = binWidth === undefined ? 20 : number(binWidth);\n  outputs = maybeGroupOutputs(outputs, options);\n\n  // A fill output means a fill channel; declaring the channel here instead of\n  // waiting for the initializer allows the mark constructor to determine that\n  // the stroke should default to none (assuming a mark that defaults to fill\n  // and no stroke, such as dot). Note that its safe to mutate options here\n  // because we just created it with the rest operator above.\n  if (hasOutput(outputs, \"fill\")) options.channels = {...options.channels, fill: {value: []}};\n\n  // Populate default values for the r and symbol options, as appropriate.\n  if (options.symbol === undefined) options.symbol = \"hexagon\";\n  if (options.r === undefined && !hasOutput(outputs, \"r\")) options.r = binWidth / 2;\n\n  return initializer(options, (data, facets, channels, scales, _, context) => {\n    let {x: X, y: Y, z: Z, fill: F, stroke: S, symbol: Q} = channels;\n    if (X === undefined) throw new Error(\"missing channel: x\");\n    if (Y === undefined) throw new Error(\"missing channel: y\");\n\n    // Get the (either scaled or projected) xy channels.\n    ({x: X, y: Y} = applyPosition(channels, scales, context));\n\n    // Extract the values for channels that are eligible for grouping; not all\n    // marks define a z channel, so compute one if it not already computed. If z\n    // was explicitly set to null, ensure that we dont subdivide bins.\n    Z = Z ? Z.value : valueof(data, z);\n    F = F?.value;\n    S = S?.value;\n    Q = Q?.value;\n\n    // Group on the first of z, fill, stroke, and symbol. Implicitly reduce\n    // these channels using the first corresponding value for each bin.\n    const G = maybeSubgroup(outputs, {z: Z, fill: F, stroke: S, symbol: Q});\n    const GZ = Z && [];\n    const GF = F && [];\n    const GS = S && [];\n    const GQ = Q && [];\n\n    // Construct the hexbins and populate the output channels.\n    const binFacets = [];\n    const BX = [];\n    const BY = [];\n    let i = -1;\n    for (const o of outputs) o.initialize(data);\n    for (const facet of facets) {\n      const binFacet = [];\n      for (const o of outputs) o.scope(\"facet\", facet);\n      for (const [f, I] of maybeGroup(facet, G)) {\n        for (const {index: b, extent} of hbin(data, I, X, Y, binWidth)) {\n          binFacet.push(++i);\n          BX.push(extent.x);\n          BY.push(extent.y);\n          if (Z) GZ.push(G === Z ? f : Z[b[0]]);\n          if (F) GF.push(G === F ? f : F[b[0]]);\n          if (S) GS.push(G === S ? f : S[b[0]]);\n          if (Q) GQ.push(G === Q ? f : Q[b[0]]);\n          for (const o of outputs) o.reduce(b, extent);\n        }\n      }\n      binFacets.push(binFacet);\n    }\n\n    // Construct the output channels, and populate the radius scale hint.\n    const sx = channels.x.scale;\n    const sy = channels.y.scale;\n    const binChannels = {\n      x: {value: BX, source: scales[sx] ? {value: map(BX, scales[sx].invert), scale: sx} : null},\n      y: {value: BY, source: scales[sy] ? {value: map(BY, scales[sy].invert), scale: sy} : null},\n      ...(Z && {z: {value: GZ}}),\n      ...(F && {fill: {value: GF, scale: \"auto\"}}),\n      ...(S && {stroke: {value: GS, scale: \"auto\"}}),\n      ...(Q && {symbol: {value: GQ, scale: \"auto\"}}),\n      ...Object.fromEntries(\n        outputs.map(({name, output}) => [\n          name,\n          {\n            scale: \"auto\",\n            label: output.label,\n            radius: name === \"r\" ? binWidth / 2 : undefined,\n            value: output.transform()\n          }\n        ])\n      )\n    };\n\n    return {data, facets: binFacets, channels: binChannels};\n  });\n}\n\nfunction hbin(data, I, X, Y, dx) {\n  const dy = dx * (1.5 / sqrt3);\n  const bins = new Map();\n  for (const i of I) {\n    let px = X[i],\n      py = Y[i];\n    if (isNaN(px) || isNaN(py)) continue;\n    let pj = Math.round((py = (py - oy) / dy)),\n      pi = Math.round((px = (px - ox) / dx - (pj & 1) / 2)),\n      py1 = py - pj;\n    if (Math.abs(py1) * 3 > 1) {\n      let px1 = px - pi,\n        pi2 = pi + (px < pi ? -1 : 1) / 2,\n        pj2 = pj + (py < pj ? -1 : 1),\n        px2 = px - pi2,\n        py2 = py - pj2;\n      if (px1 * px1 + py1 * py1 > px2 * px2 + py2 * py2) (pi = pi2 + (pj & 1 ? 1 : -1) / 2), (pj = pj2);\n    }\n    const key = `${pi},${pj}`;\n    let bin = bins.get(key);\n    if (bin === undefined) {\n      bin = {index: [], extent: {data, x: (pi + (pj & 1) / 2) * dx + ox, y: pj * dy + oy}};\n      bins.set(key, bin);\n    }\n    bin.index.push(i);\n  }\n  return bins.values();\n}\n","import {create} from \"../context.js\";\nimport {Mark} from \"../mark.js\";\nimport {number, singleton} from \"../options.js\";\nimport {applyChannelStyles, applyDirectStyles, applyIndirectStyles, applyTransform, offset} from \"../style.js\";\nimport {sqrt4_3} from \"../symbol.js\";\nimport {ox, oy} from \"../transforms/hexbin.js\";\n\nconst defaults = {\n  ariaLabel: \"hexgrid\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeOpacity: 0.1\n};\n\nexport function hexgrid(options) {\n  return new Hexgrid(options);\n}\n\nexport class Hexgrid extends Mark {\n  constructor({binWidth = 20, clip = true, ...options} = {}) {\n    super(singleton, undefined, {clip, ...options}, defaults);\n    this.binWidth = number(binWidth);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {binWidth} = this;\n    const {marginTop, marginRight, marginBottom, marginLeft, width, height} = dimensions;\n    const x0 = marginLeft - ox,\n      x1 = width - marginRight - ox,\n      y0 = marginTop - oy,\n      y1 = height - marginBottom - oy,\n      rx = binWidth / 2,\n      ry = rx * sqrt4_3,\n      hy = ry / 2,\n      wx = rx * 2,\n      wy = ry * 1.5,\n      i0 = Math.floor(x0 / wx),\n      i1 = Math.ceil(x1 / wx),\n      j0 = Math.floor((y0 + hy) / wy),\n      j1 = Math.ceil((y1 - hy) / wy) + 1,\n      path = `m0,${round(-ry)}l${round(rx)},${round(hy)}v${round(ry)}l${round(-rx)},${round(hy)}`;\n    let d = path;\n    for (let j = j0; j < j1; ++j) {\n      for (let i = i0; i < i1; ++i) {\n        d += `M${round(i * wx + (j & 1) * rx)},${round(j * wy)}${path}`;\n      }\n    }\n    return create(\"svg:g\", context)\n      .datum(0)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {}, offset + ox, offset + oy)\n      .call((g) => g.append(\"path\").call(applyDirectStyles, this).call(applyChannelStyles, this, channels).attr(\"d\", d))\n      .node();\n  }\n}\n\nfunction round(x) {\n  return Math.round(x * 1e3) / 1e3;\n}\n","import {create} from \"../context.js\";\nimport {positive} from \"../defined.js\";\nimport {Mark} from \"../mark.js\";\nimport {maybeFrameAnchor, maybeNumberChannel, maybeTuple, string} from \"../options.js\";\nimport {\n  applyAttr,\n  applyChannelStyles,\n  applyDirectStyles,\n  applyFrameAnchor,\n  applyIndirectStyles,\n  applyTransform,\n  impliedString\n} from \"../style.js\";\nimport {withDefaultSort} from \"./dot.js\";\nimport {template} from \"../template.js\";\n\nconst defaults = {\n  ariaLabel: \"image\",\n  fill: null,\n  stroke: null\n};\n\n// Tests if the given string is a path: does it start with a dot-slash\n// (./foo.png), dot-dot-slash (../foo.png), or slash (/foo.png)?\nfunction isPath(string) {\n  return /^\\.*\\//.test(string);\n}\n\n// Tests if the given string is a URL (e.g., https://placekitten.com/200/300).\n// The allowed protocols is overly restrictive, but we dont want to allow any\n// scheme here because it would increase the likelihood of a false positive with\n// a field name that happens to contain a colon.\nfunction isUrl(string) {\n  return /^(blob|data|file|http|https):/i.test(string);\n}\n\n// Disambiguates a constant src definition from a channel. A path or URL string\n// is assumed to be a constant; any other string is assumed to be a field name.\nfunction maybePathChannel(value) {\n  return typeof value === \"string\" && (isPath(value) || isUrl(value)) ? [undefined, value] : [value, undefined];\n}\n\nexport class Image extends Mark {\n  constructor(data, options = {}) {\n    let {x, y, r, width, height, rotate, src, preserveAspectRatio, crossOrigin, frameAnchor, imageRendering} = options;\n    if (r == null) r = undefined;\n    if (r === undefined && width === undefined && height === undefined) width = height = 16;\n    else if (width === undefined && height !== undefined) width = height;\n    else if (height === undefined && width !== undefined) height = width;\n    const [vs, cs] = maybePathChannel(src);\n    const [vr, cr] = maybeNumberChannel(r);\n    const [vw, cw] = maybeNumberChannel(width, cr !== undefined ? cr * 2 : undefined);\n    const [vh, ch] = maybeNumberChannel(height, cr !== undefined ? cr * 2 : undefined);\n    const [va, ca] = maybeNumberChannel(rotate, 0);\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\", optional: true},\n        y: {value: y, scale: \"y\", optional: true},\n        r: {value: vr, scale: \"r\", filter: positive, optional: true},\n        width: {value: vw, filter: positive, optional: true},\n        height: {value: vh, filter: positive, optional: true},\n        rotate: {value: va, optional: true},\n        src: {value: vs, optional: true}\n      },\n      withDefaultSort(options),\n      defaults\n    );\n    this.src = cs;\n    this.width = cw;\n    this.rotate = ca;\n    this.height = ch;\n    this.r = cr;\n    this.preserveAspectRatio = impliedString(preserveAspectRatio, \"xMidYMid\");\n    this.crossOrigin = string(crossOrigin);\n    this.frameAnchor = maybeFrameAnchor(frameAnchor);\n    this.imageRendering = impliedString(imageRendering, \"auto\");\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x, y} = scales;\n    const {x: X, y: Y, width: W, height: H, r: R, rotate: A, src: S} = channels;\n    const {r, width, height, rotate} = this;\n    const [cx, cy] = applyFrameAnchor(this, dimensions);\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, {x: X && x, y: Y && y})\n      .call((g) =>\n        g\n          .selectAll()\n          .data(index)\n          .enter()\n          .append(\"image\")\n          .call(applyDirectStyles, this)\n          .attr(\"x\", position(X, W, R, cx, width, r))\n          .attr(\"y\", position(Y, H, R, cy, height, r))\n          .attr(\"width\", W ? (i) => W[i] : width !== undefined ? width : R ? (i) => R[i] * 2 : r * 2)\n          .attr(\"height\", H ? (i) => H[i] : height !== undefined ? height : R ? (i) => R[i] * 2 : r * 2)\n          // TODO: combine x, y, rotate and transform-origin into a single transform\n          .attr(\"transform\", A ? (i) => `rotate(${A[i]})` : rotate ? `rotate(${rotate})` : null)\n          .attr(\"transform-origin\", A || rotate ? template`${X ? (i) => X[i] : cx}px ${Y ? (i) => Y[i] : cy}px` : null)\n          .call(applyAttr, \"href\", S ? (i) => S[i] : this.src)\n          .call(applyAttr, \"preserveAspectRatio\", this.preserveAspectRatio)\n          .call(applyAttr, \"crossorigin\", this.crossOrigin)\n          .call(applyAttr, \"image-rendering\", this.imageRendering)\n          .call(applyAttr, \"clip-path\", R ? (i) => `circle(${R[i]}px)` : r !== undefined ? `circle(${r}px)` : null)\n          .call(applyChannelStyles, this, channels)\n      )\n      .node();\n  }\n}\n\nfunction position(X, W, R, x, w, r) {\n  return W && X\n    ? (i) => X[i] - W[i] / 2\n    : W\n    ? (i) => x - W[i] / 2\n    : X && w !== undefined\n    ? (i) => X[i] - w / 2\n    : w !== undefined\n    ? x - w / 2\n    : R && X\n    ? (i) => X[i] - R[i]\n    : R\n    ? (i) => x - R[i]\n    : X\n    ? (i) => X[i] - r\n    : x - r;\n}\n\nexport function image(data, {x, y, ...options} = {}) {\n  if (options.frameAnchor === undefined) [x, y] = maybeTuple(x, y);\n  return new Image(data, {...options, x, y});\n}\n","// https://github.com/jstat/jstat\n//\n// Copyright (c) 2013 jStat\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\nexport function ibetainv(p, a, b) {\n  var EPS = 1e-8;\n  var a1 = a - 1;\n  var b1 = b - 1;\n  var j = 0;\n  var lna, lnb, pp, t, u, err, x, al, h, w, afac;\n  if (p <= 0) return 0;\n  if (p >= 1) return 1;\n  if (a >= 1 && b >= 1) {\n    pp = p < 0.5 ? p : 1 - p;\n    t = Math.sqrt(-2 * Math.log(pp));\n    x = (2.30753 + t * 0.27061) / (1 + t * (0.99229 + t * 0.04481)) - t;\n    if (p < 0.5) x = -x;\n    al = (x * x - 3) / 6;\n    h = 2 / (1 / (2 * a - 1) + 1 / (2 * b - 1));\n    w = (x * Math.sqrt(al + h)) / h - (1 / (2 * b - 1) - 1 / (2 * a - 1)) * (al + 5 / 6 - 2 / (3 * h));\n    x = a / (a + b * Math.exp(2 * w));\n  } else {\n    lna = Math.log(a / (a + b));\n    lnb = Math.log(b / (a + b));\n    t = Math.exp(a * lna) / a;\n    u = Math.exp(b * lnb) / b;\n    w = t + u;\n    if (p < t / w) x = Math.pow(a * w * p, 1 / a);\n    else x = 1 - Math.pow(b * w * (1 - p), 1 / b);\n  }\n  afac = -gammaln(a) - gammaln(b) + gammaln(a + b);\n  for (; j < 10; j++) {\n    if (x === 0 || x === 1) return x;\n    err = ibeta(x, a, b) - p;\n    t = Math.exp(a1 * Math.log(x) + b1 * Math.log(1 - x) + afac);\n    u = err / t;\n    x -= t = u / (1 - 0.5 * Math.min(1, u * (a1 / x - b1 / (1 - x))));\n    if (x <= 0) x = 0.5 * (x + t);\n    if (x >= 1) x = 0.5 * (x + t + 1);\n    if (Math.abs(t) < EPS * x && j > 0) break;\n  }\n  return x;\n}\n\nexport function ibeta(x, a, b) {\n  // Factors in front of the continued fraction.\n  var bt =\n    x === 0 || x === 1 ? 0 : Math.exp(gammaln(a + b) - gammaln(a) - gammaln(b) + a * Math.log(x) + b * Math.log(1 - x));\n  if (x < 0 || x > 1) return false;\n  if (x < (a + 1) / (a + b + 2))\n    // Use continued fraction directly.\n    return (bt * betacf(x, a, b)) / a;\n  // else use continued fraction after making the symmetry transformation.\n  return 1 - (bt * betacf(1 - x, b, a)) / b;\n}\n\nexport function betacf(x, a, b) {\n  var fpmin = 1e-30;\n  var m = 1;\n  var qab = a + b;\n  var qap = a + 1;\n  var qam = a - 1;\n  var c = 1;\n  var d = 1 - (qab * x) / qap;\n  var m2, aa, del, h;\n\n  // These q's will be used in factors that occur in the coefficients\n  if (Math.abs(d) < fpmin) d = fpmin;\n  d = 1 / d;\n  h = d;\n\n  for (; m <= 100; m++) {\n    m2 = 2 * m;\n    aa = (m * (b - m) * x) / ((qam + m2) * (a + m2));\n    // One step (the even one) of the recurrence\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin) d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin) c = fpmin;\n    d = 1 / d;\n    h *= d * c;\n    aa = (-(a + m) * (qab + m) * x) / ((a + m2) * (qap + m2));\n    // Next step of the recurrence (the odd one)\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin) d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin) c = fpmin;\n    d = 1 / d;\n    del = d * c;\n    h *= del;\n    if (Math.abs(del - 1.0) < 3e-7) break;\n  }\n\n  return h;\n}\n\nexport function gammaln(x) {\n  var j = 0;\n  var cof = [\n    76.18009172947146, -86.5053203294167, 24.01409824083091, -1.231739572450155, 0.1208650973866179e-2,\n    -0.5395239384953e-5\n  ];\n  var ser = 1.000000000190015;\n  var xx, y, tmp;\n  tmp = (y = xx = x) + 5.5;\n  tmp -= (xx + 0.5) * Math.log(tmp);\n  for (; j < 6; j++) ser += cof[j] / ++y;\n  return Math.log((2.506628274631 * ser) / xx) - tmp;\n}\n\nexport function qt(p, dof) {\n  var x = ibetainv(2 * Math.min(p, 1 - p), 0.5 * dof, 0.5);\n  x = Math.sqrt((dof * (1 - x)) / x);\n  return p > 0.5 ? x : -x;\n}\n","import {extent, range, sum, area as shapeArea, namespaces} from \"d3\";\nimport {create} from \"../context.js\";\nimport {Mark} from \"../mark.js\";\nimport {identity, indexOf, isNone, isNoneish, maybeZ} from \"../options.js\";\nimport {qt} from \"../stats.js\";\nimport {applyDirectStyles, applyGroupedChannelStyles, applyIndirectStyles, applyTransform, groupZ} from \"../style.js\";\nimport {maybeDenseIntervalX, maybeDenseIntervalY} from \"../transforms/bin.js\";\n\nconst defaults = {\n  ariaLabel: \"linear-regression\",\n  fill: \"currentColor\",\n  fillOpacity: 0.1,\n  stroke: \"currentColor\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeMiterlimit: 1\n};\n\nclass LinearRegression extends Mark {\n  constructor(data, options = {}) {\n    const {x, y, z, ci = 0.95, precision = 4} = options;\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\"},\n        y: {value: y, scale: \"y\"},\n        z: {value: maybeZ(options), optional: true}\n      },\n      options,\n      defaults\n    );\n    this.z = z;\n    this.ci = +ci;\n    this.precision = +precision;\n    if (!(0 <= this.ci && this.ci < 1)) throw new Error(`invalid ci; not in [0, 1): ${ci}`);\n    if (!(this.precision > 0)) throw new Error(`invalid precision: ${precision}`);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x: X, y: Y, z: Z} = channels;\n    const {ci} = this;\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, scales)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(Z ? groupZ(index, Z, this.z) : [index])\n          .enter()\n          .call((enter) =>\n            enter\n              .append(\"path\")\n              .attr(\"fill\", \"none\")\n              .call(applyDirectStyles, this)\n              .call(applyGroupedChannelStyles, this, {...channels, fill: null, fillOpacity: null})\n              .attr(\"d\", (I) => this._renderLine(I, X, Y))\n              .call(\n                ci && !isNone(this.fill)\n                  ? (path) =>\n                      path\n                        .select(pathBefore)\n                        .attr(\"stroke\", \"none\")\n                        .call(applyDirectStyles, this)\n                        .call(applyGroupedChannelStyles, this, {\n                          ...channels,\n                          stroke: null,\n                          strokeOpacity: null,\n                          strokeWidth: null\n                        })\n                        .attr(\"d\", (I) => this._renderBand(I, X, Y))\n                  : () => {}\n              )\n          )\n      )\n      .node();\n  }\n}\n\nfunction pathBefore() {\n  return this.parentNode.insertBefore(this.ownerDocument.createElementNS(namespaces.svg, \"path\"), this);\n}\n\nclass LinearRegressionX extends LinearRegression {\n  constructor(data, options) {\n    super(data, options);\n  }\n  _renderBand(I, X, Y) {\n    const {ci, precision} = this;\n    const [y1, y2] = extent(I, (i) => Y[i]);\n    const f = linearRegressionF(I, Y, X);\n    const g = confidenceIntervalF(I, Y, X, (1 - ci) / 2, f);\n    return shapeArea()\n      .y((y) => y)\n      .x0((y) => g(y, -1))\n      .x1((y) => g(y, +1))(range(y1, y2 - precision / 2, precision).concat(y2));\n  }\n  _renderLine(I, X, Y) {\n    const [y1, y2] = extent(I, (i) => Y[i]);\n    const f = linearRegressionF(I, Y, X);\n    return `M${f(y1)},${y1}L${f(y2)},${y2}`;\n  }\n}\n\nclass LinearRegressionY extends LinearRegression {\n  constructor(data, options) {\n    super(data, options);\n  }\n  _renderBand(I, X, Y) {\n    const {ci, precision} = this;\n    const [x1, x2] = extent(I, (i) => X[i]);\n    const f = linearRegressionF(I, X, Y);\n    const g = confidenceIntervalF(I, X, Y, (1 - ci) / 2, f);\n    return shapeArea()\n      .x((x) => x)\n      .y0((x) => g(x, -1))\n      .y1((x) => g(x, +1))(range(x1, x2 - precision / 2, precision).concat(x2));\n  }\n  _renderLine(I, X, Y) {\n    const [x1, x2] = extent(I, (i) => X[i]);\n    const f = linearRegressionF(I, X, Y);\n    return `M${x1},${f(x1)}L${x2},${f(x2)}`;\n  }\n}\n\nexport function linearRegressionX(\n  data,\n  {y = indexOf, x = identity, stroke, fill = isNoneish(stroke) ? \"currentColor\" : stroke, ...options} = {}\n) {\n  return new LinearRegressionX(data, maybeDenseIntervalY({...options, x, y, fill, stroke}));\n}\n\nexport function linearRegressionY(\n  data,\n  {x = indexOf, y = identity, stroke, fill = isNoneish(stroke) ? \"currentColor\" : stroke, ...options} = {}\n) {\n  return new LinearRegressionY(data, maybeDenseIntervalX({...options, x, y, fill, stroke}));\n}\n\nfunction linearRegressionF(I, X, Y) {\n  let sumX = 0,\n    sumY = 0,\n    sumXY = 0,\n    sumX2 = 0;\n  for (const i of I) {\n    const xi = X[i];\n    const yi = Y[i];\n    sumX += xi;\n    sumY += yi;\n    sumXY += xi * yi;\n    sumX2 += xi * xi;\n  }\n  const n = I.length;\n  const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\n  const intercept = (sumY - slope * sumX) / n;\n  return (x) => slope * x + intercept;\n}\n\nfunction confidenceIntervalF(I, X, Y, p, f) {\n  const mean = sum(I, (i) => X[i]) / I.length;\n  let a = 0,\n    b = 0;\n  for (const i of I) {\n    a += (X[i] - mean) ** 2;\n    b += (Y[i] - f(X[i])) ** 2;\n  }\n  const sy = Math.sqrt(b / (I.length - 2));\n  const t = qt(p, I.length - 2);\n  return (x, k) => {\n    const Y = f(x);\n    const se = sy * Math.sqrt(1 / I.length + (x - mean) ** 2 / a);\n    return Y + k * t * se;\n  };\n}\n","import {stratify, tree} from \"d3\";\nimport {ascendingDefined} from \"../defined.js\";\nimport {column, identity, isArray, isObject, one, valueof} from \"../options.js\";\nimport {basic} from \"./basic.js\";\n\nexport function treeNode({\n  path = identity, // the delimited path\n  delimiter, // how the path is separated\n  frameAnchor,\n  treeLayout = tree,\n  treeSort,\n  treeSeparation,\n  treeAnchor,\n  treeFilter,\n  ...options\n} = {}) {\n  treeAnchor = maybeTreeAnchor(treeAnchor);\n  treeSort = maybeTreeSort(treeSort);\n  if (treeFilter != null) treeFilter = maybeNodeValue(treeFilter);\n  if (frameAnchor === undefined) frameAnchor = treeAnchor.frameAnchor;\n  const normalize = normalizer(delimiter);\n  const outputs = treeOutputs(options, maybeNodeValue);\n  const [X, setX] = column();\n  const [Y, setY] = column();\n  return {\n    x: X,\n    y: Y,\n    frameAnchor,\n    ...basic(options, (data, facets) => {\n      const P = normalize(valueof(data, path));\n      const X = setX([]);\n      const Y = setY([]);\n      let treeIndex = -1;\n      const treeData = [];\n      const treeFacets = [];\n      const rootof = stratify().path((i) => P[i]);\n      const setData = isArray(data)\n        ? (node) => (node.data = data[node.data])\n        : (node) => (node.data = data.get(node.data));\n      const layout = treeLayout();\n      if (layout.nodeSize) layout.nodeSize([1, 1]);\n      if (layout.separation && treeSeparation !== undefined) layout.separation(treeSeparation ?? one);\n      for (const o of outputs) o[output_values] = o[output_setValues]([]);\n      for (const facet of facets) {\n        const treeFacet = [];\n        const root = rootof(facet.filter((i) => P[i] != null)).each(setData);\n        if (treeSort != null) root.sort(treeSort);\n        layout(root);\n        for (const node of root.descendants()) {\n          if (treeFilter != null && !treeFilter(node)) continue;\n          treeFacet.push(++treeIndex);\n          treeData[treeIndex] = node.data;\n          treeAnchor.position(node, treeIndex, X, Y);\n          for (const o of outputs) o[output_values][treeIndex] = o[output_evaluate](node);\n        }\n        treeFacets.push(treeFacet);\n      }\n      return {data: treeData, facets: treeFacets};\n    }),\n    ...Object.fromEntries(outputs)\n  };\n}\n\nexport function treeLink({\n  path = identity, // the delimited path\n  delimiter, // how the path is separated\n  curve = \"bump-x\",\n  stroke = \"#555\",\n  strokeWidth = 1.5,\n  strokeOpacity = 0.5,\n  treeLayout = tree,\n  treeSort,\n  treeSeparation,\n  treeAnchor,\n  treeFilter,\n  ...options\n} = {}) {\n  treeAnchor = maybeTreeAnchor(treeAnchor);\n  treeSort = maybeTreeSort(treeSort);\n  if (treeFilter != null) treeFilter = maybeLinkValue(treeFilter);\n  options = {curve, stroke, strokeWidth, strokeOpacity, ...options};\n  const normalize = normalizer(delimiter);\n  const outputs = treeOutputs(options, maybeLinkValue);\n  const [X1, setX1] = column();\n  const [X2, setX2] = column();\n  const [Y1, setY1] = column();\n  const [Y2, setY2] = column();\n  return {\n    x1: X1,\n    x2: X2,\n    y1: Y1,\n    y2: Y2,\n    ...basic(options, (data, facets) => {\n      const P = normalize(valueof(data, path));\n      const X1 = setX1([]);\n      const X2 = setX2([]);\n      const Y1 = setY1([]);\n      const Y2 = setY2([]);\n      let treeIndex = -1;\n      const treeData = [];\n      const treeFacets = [];\n      const rootof = stratify().path((i) => P[i]);\n      const layout = treeLayout();\n      if (layout.nodeSize) layout.nodeSize([1, 1]);\n      if (layout.separation && treeSeparation !== undefined) layout.separation(treeSeparation ?? one);\n      for (const o of outputs) o[output_values] = o[output_setValues]([]);\n      for (const facet of facets) {\n        const treeFacet = [];\n        const root = rootof(facet.filter((i) => P[i] != null)).each((node) => (node.data = data[node.data]));\n        if (treeSort != null) root.sort(treeSort);\n        layout(root);\n        for (const {source, target} of root.links()) {\n          if (treeFilter != null && !treeFilter(target, source)) continue;\n          treeFacet.push(++treeIndex);\n          treeData[treeIndex] = target.data;\n          treeAnchor.position(source, treeIndex, X1, Y1);\n          treeAnchor.position(target, treeIndex, X2, Y2);\n          for (const o of outputs) o[output_values][treeIndex] = o[output_evaluate](target, source);\n        }\n        treeFacets.push(treeFacet);\n      }\n      return {data: treeData, facets: treeFacets};\n    }),\n    ...Object.fromEntries(outputs)\n  };\n}\n\nexport function maybeTreeAnchor(anchor = \"left\") {\n  switch (`${anchor}`.trim().toLowerCase()) {\n    case \"left\":\n      return treeAnchorLeft;\n    case \"right\":\n      return treeAnchorRight;\n  }\n  throw new Error(`invalid tree anchor: ${anchor}`);\n}\n\nconst treeAnchorLeft = {\n  frameAnchor: \"left\",\n  dx: 6,\n  position({x, y}, i, X, Y) {\n    X[i] = y;\n    Y[i] = -x;\n  }\n};\n\nconst treeAnchorRight = {\n  frameAnchor: \"right\",\n  dx: -6,\n  position({x, y}, i, X, Y) {\n    X[i] = -y;\n    Y[i] = -x;\n  }\n};\n\nfunction maybeTreeSort(sort) {\n  return sort == null || typeof sort === \"function\"\n    ? sort\n    : `${sort}`.trim().toLowerCase().startsWith(\"node:\")\n    ? nodeSort(maybeNodeValue(sort))\n    : nodeSort(nodeData(sort));\n}\n\nfunction nodeSort(value) {\n  return (a, b) => ascendingDefined(value(a), value(b));\n}\n\nfunction nodeData(field) {\n  return (node) => node.data?.[field];\n}\n\nfunction normalizer(delimiter = \"/\") {\n  delimiter = `${delimiter}`;\n  if (delimiter === \"/\") return (P) => P; // paths are already slash-separated\n  if (delimiter.length !== 1) throw new Error(\"delimiter must be exactly one character\");\n  const delimiterCode = delimiter.charCodeAt(0);\n  return (P) => P.map((p) => slashDelimiter(p, delimiterCode));\n}\n\nconst CODE_BACKSLASH = 92;\nconst CODE_SLASH = 47;\n\nfunction slashDelimiter(input, delimiterCode) {\n  if (delimiterCode === CODE_BACKSLASH) throw new Error(\"delimiter cannot be backslash\");\n  let afterBackslash = false;\n  for (let i = 0, n = input.length; i < n; ++i) {\n    switch (input.charCodeAt(i)) {\n      case CODE_BACKSLASH:\n        if (!afterBackslash) {\n          afterBackslash = true;\n          continue;\n        }\n        break;\n      case delimiterCode:\n        if (afterBackslash) {\n          (input = input.slice(0, i - 1) + input.slice(i)), --i, --n; // remove backslash\n        } else {\n          input = input.slice(0, i) + \"/\" + input.slice(i + 1); // replace delimiter with slash\n        }\n        break;\n      case CODE_SLASH:\n        if (afterBackslash) {\n          (input = input.slice(0, i) + \"\\\\\\\\\" + input.slice(i)), (i += 2), (n += 2); // add two backslashes\n        } else {\n          (input = input.slice(0, i) + \"\\\\\" + input.slice(i)), ++i, ++n; // add backslash\n        }\n        break;\n    }\n    afterBackslash = false;\n  }\n  return input;\n}\n\nfunction slashUnescape(input) {\n  let afterBackslash = false;\n  for (let i = 0, n = input.length; i < n; ++i) {\n    switch (input.charCodeAt(i)) {\n      case CODE_BACKSLASH:\n        if (!afterBackslash) {\n          afterBackslash = true;\n          continue;\n        }\n      // eslint-disable-next-line no-fallthrough\n      case CODE_SLASH:\n        if (afterBackslash) {\n          (input = input.slice(0, i - 1) + input.slice(i)), --i, --n; // remove backslash\n        }\n        break;\n    }\n    afterBackslash = false;\n  }\n  return input;\n}\n\nfunction isNodeValue(option) {\n  return isObject(option) && typeof option.node === \"function\";\n}\n\nfunction isLinkValue(option) {\n  return isObject(option) && typeof option.link === \"function\";\n}\n\nfunction maybeNodeValue(value) {\n  if (isNodeValue(value)) return value.node;\n  value = `${value}`.trim().toLowerCase();\n  if (!value.startsWith(\"node:\")) return;\n  switch (value) {\n    case \"node:name\":\n      return nodeName;\n    case \"node:path\":\n      return nodePath;\n    case \"node:internal\":\n      return nodeInternal;\n    case \"node:external\":\n      return nodeExternal;\n    case \"node:depth\":\n      return nodeDepth;\n    case \"node:height\":\n      return nodeHeight;\n  }\n  throw new Error(`invalid node value: ${value}`);\n}\n\nfunction maybeLinkValue(value) {\n  if (isNodeValue(value)) return value.node;\n  if (isLinkValue(value)) return value.link;\n  value = `${value}`.trim().toLowerCase();\n  if (!value.startsWith(\"node:\") && !value.startsWith(\"parent:\")) return;\n  switch (value) {\n    case \"parent:name\":\n      return parentValue(nodeName);\n    case \"parent:path\":\n      return parentValue(nodePath);\n    case \"parent:depth\":\n      return parentValue(nodeDepth);\n    case \"parent:height\":\n      return parentValue(nodeHeight);\n    case \"node:name\":\n      return nodeName;\n    case \"node:path\":\n      return nodePath;\n    case \"node:internal\":\n      return nodeInternal;\n    case \"node:external\":\n      return nodeExternal;\n    case \"node:depth\":\n      return nodeDepth;\n    case \"node:height\":\n      return nodeHeight;\n  }\n  throw new Error(`invalid link value: ${value}`);\n}\n\nfunction nodePath(node) {\n  return node.id;\n}\n\nfunction nodeName(node) {\n  return nameof(node.id);\n}\n\nfunction nodeDepth(node) {\n  return node.depth;\n}\n\nfunction nodeHeight(node) {\n  return node.height;\n}\n\nfunction nodeInternal(node) {\n  return !!node.children;\n}\n\nfunction nodeExternal(node) {\n  return !node.children;\n}\n\nfunction parentValue(evaluate) {\n  return (child, parent) => (parent == null ? undefined : evaluate(parent));\n}\n\n// Walk backwards to find the first slash.\nfunction nameof(path) {\n  let i = path.length;\n  while (--i > 0) if (slash(path, i)) break;\n  return slashUnescape(path.slice(i + 1));\n}\n\n// Slashes can be escaped; to determine whether a slash is a path delimiter, we\n// count the number of preceding backslashes escaping the forward slash: an odd\n// number indicates an escaped forward slash.\nfunction slash(path, i) {\n  if (path[i] === \"/\") {\n    let k = 0;\n    while (i > 0 && path[--i] === \"\\\\\") ++k;\n    if ((k & 1) === 0) return true;\n  }\n  return false;\n}\n\n// These indexes match the array returned by nodeOutputs. The first two elements\n// are always the name of the output and its column value definition so that\n// the outputs can be passed directly to Object.fromEntries.\nconst output_setValues = 2;\nconst output_evaluate = 3;\nconst output_values = 4;\n\nfunction treeOutputs(options, maybeTreeValue) {\n  const outputs = [];\n  for (const name in options) {\n    const value = options[name];\n    const treeValue = maybeTreeValue(value);\n    if (treeValue !== undefined) {\n      outputs.push([name, ...column(value), treeValue]);\n    }\n  }\n  return outputs;\n}\n","import {cluster as Cluster, tree as Tree} from \"d3\";\nimport {marks} from \"../mark.js\";\nimport {isNoneish} from \"../options.js\";\nimport {maybeTreeAnchor, treeLink, treeNode} from \"../transforms/tree.js\";\nimport {dot} from \"./dot.js\";\nimport {link} from \"./link.js\";\nimport {text} from \"./text.js\";\nimport {keyword} from \"../options.js\";\n\nexport function tree(\n  data,\n  {\n    fill,\n    stroke,\n    strokeWidth,\n    strokeOpacity,\n    strokeLinejoin,\n    strokeLinecap,\n    strokeMiterlimit,\n    strokeDasharray,\n    strokeDashoffset,\n    marker,\n    markerStart = marker,\n    markerEnd = marker,\n    dot: dotDot = isNoneish(markerStart) && isNoneish(markerEnd),\n    text: textText = \"node:name\",\n    textStroke = \"var(--plot-background)\",\n    title = \"node:path\",\n    dx,\n    dy,\n    textAnchor,\n    treeLayout = Tree,\n    textLayout = treeLayout === Tree || treeLayout === Cluster ? \"mirrored\" : \"normal\",\n    tip,\n    ...options\n  } = {}\n) {\n  if (dx === undefined) dx = maybeTreeAnchor(options.treeAnchor).dx;\n  if (textAnchor !== undefined) throw new Error(\"textAnchor is not a configurable tree option\");\n  textLayout = keyword(textLayout, \"textLayout\", [\"mirrored\", \"normal\"]);\n\n  function treeText(textOptions) {\n    return text(\n      data,\n      treeNode({\n        treeLayout,\n        text: textText,\n        fill: fill === undefined ? \"currentColor\" : fill,\n        stroke: textStroke,\n        dx,\n        dy,\n        title,\n        ...textOptions,\n        ...options\n      })\n    );\n  }\n\n  return marks(\n    link(\n      data,\n      treeLink({\n        treeLayout,\n        markerStart,\n        markerEnd,\n        stroke: stroke !== undefined ? stroke : fill === undefined ? \"node:internal\" : fill,\n        strokeWidth,\n        strokeOpacity,\n        strokeLinejoin,\n        strokeLinecap,\n        strokeMiterlimit,\n        strokeDasharray,\n        strokeDashoffset,\n        ...options\n      })\n    ),\n    dotDot\n      ? dot(data, treeNode({treeLayout, fill: fill === undefined ? \"node:internal\" : fill, title, tip, ...options}))\n      : null,\n    textText != null\n      ? textLayout === \"mirrored\"\n        ? [\n            treeText({textAnchor: \"start\", treeFilter: \"node:external\"}),\n            treeText({textAnchor: \"end\", treeFilter: \"node:internal\", dx: -dx})\n          ]\n        : treeText()\n      : null\n  );\n}\n\nexport function cluster(data, options) {\n  return tree(data, {...options, treeLayout: Cluster});\n}\n","import {extent, namespaces} from \"d3\";\nimport {valueObject} from \"../channel.js\";\nimport {create} from \"../context.js\";\nimport {composeRender} from \"../mark.js\";\nimport {hasXY, identity, indexOf, isObject} from \"../options.js\";\nimport {applyChannelStyles, applyDirectStyles, applyIndirectStyles, getPatternId} from \"../style.js\";\nimport {template} from \"../template.js\";\nimport {initializer} from \"../transforms/basic.js\";\nimport {maybeIdentityX, maybeIdentityY} from \"../transforms/identity.js\";\nimport {maybeIntervalX, maybeIntervalY} from \"../transforms/interval.js\";\nimport {maybeStackX, maybeStackY} from \"../transforms/stack.js\";\nimport {BarX, BarY} from \"./bar.js\";\n\nconst waffleDefaults = {\n  ariaLabel: \"waffle\"\n};\n\nexport class WaffleX extends BarX {\n  constructor(data, {unit = 1, gap = 1, round, multiple, ...options} = {}) {\n    super(data, wafflePolygon(\"x\", options), waffleDefaults);\n    this.unit = Math.max(0, unit);\n    this.gap = +gap;\n    this.round = maybeRound(round);\n    this.multiple = maybeMultiple(multiple);\n  }\n}\n\nexport class WaffleY extends BarY {\n  constructor(data, {unit = 1, gap = 1, round, multiple, ...options} = {}) {\n    super(data, wafflePolygon(\"y\", options), waffleDefaults);\n    this.unit = Math.max(0, unit);\n    this.gap = +gap;\n    this.round = maybeRound(round);\n    this.multiple = maybeMultiple(multiple);\n  }\n}\n\nfunction wafflePolygon(y, options) {\n  const x = y === \"y\" ? \"x\" : \"y\";\n  const y1 = `${y}1`;\n  const y2 = `${y}2`;\n  return initializer(waffleRender(options), function (data, facets, channels, scales, dimensions) {\n    const {round, unit} = this;\n    const Y1 = channels[y1].value;\n    const Y2 = channels[y2].value;\n\n    // We might not use all the available bandwidth if the cells dont fit evenly.\n    const xy = valueObject({...(x in channels && {[x]: channels[x]}), [y1]: channels[y1], [y2]: channels[y2]}, scales);\n    const barwidth = this[y === \"y\" ? \"_width\" : \"_height\"](scales, xy, dimensions);\n    const barx = this[y === \"y\" ? \"_x\" : \"_y\"](scales, xy, dimensions);\n\n    // The length of a unit along y in pixels.\n    const scale = unit * scaleof(scales.scales[y]);\n\n    // The number of cells on each row (or column) of the waffle.\n    const {multiple = Math.max(1, Math.floor(Math.sqrt(barwidth / scale)))} = this;\n\n    // The outer size of each square cell, in pixels, including the gap.\n    const cx = Math.min(barwidth / multiple, scale * multiple);\n    const cy = scale * multiple;\n\n    // The reference position.\n    const tx = (barwidth - multiple * cx) / 2;\n    const x0 = typeof barx === \"function\" ? (i) => barx(i) + tx : barx + tx;\n    const y0 = scales[y](0);\n\n    // TODO insets?\n    const transform = y === \"y\" ? ([x, y]) => [x * cx, -y * cy] : ([x, y]) => [y * cy, x * cx];\n    const mx = typeof x0 === \"function\" ? (i) => x0(i) - barwidth / 2 : () => x0;\n    const [ix, iy] = y === \"y\" ? [0, 1] : [1, 0];\n\n    const n = Y2.length;\n    const P = new Array(n);\n    const X = new Float64Array(n);\n    const Y = new Float64Array(n);\n\n    for (let i = 0; i < n; ++i) {\n      P[i] = wafflePoints(round(Y1[i] / unit), round(Y2[i] / unit), multiple).map(transform);\n      const c = P[i].pop(); // extract the transformed centroid\n      X[i] = c[ix] + mx(i);\n      Y[i] = c[iy] + y0;\n    }\n\n    return {\n      channels: {\n        polygon: {value: P, source: null, filter: null},\n        [`c${x}`]: {value: [cx, x0], source: null, filter: null},\n        [`c${y}`]: {value: [cy, y0], source: null, filter: null},\n        [x]: {value: X, scale: null, source: null},\n        [y1]: {value: Y, scale: null, source: channels[y1]},\n        [y2]: {value: Y, scale: null, source: channels[y2]}\n      }\n    };\n  });\n}\n\nfunction waffleRender({render, ...options}) {\n  return {\n    ...options,\n    render: composeRender(render, function (index, scales, values, dimensions, context) {\n      const {gap, rx, ry} = this;\n      const {channels, ariaLabel, href, title, ...visualValues} = values;\n      const {document} = context;\n      const polygon = channels.polygon.value;\n      const [cx, x0] = channels.cx.value;\n      const [cy, y0] = channels.cy.value;\n\n      // Create a base pattern with shared attributes for cloning.\n      const patternId = getPatternId();\n      const basePattern = document.createElementNS(namespaces.svg, \"pattern\");\n      basePattern.setAttribute(\"width\", cx);\n      basePattern.setAttribute(\"height\", cy);\n      basePattern.setAttribute(\"patternUnits\", \"userSpaceOnUse\");\n      const basePatternRect = basePattern.appendChild(document.createElementNS(namespaces.svg, \"rect\"));\n      basePatternRect.setAttribute(\"x\", gap / 2);\n      basePatternRect.setAttribute(\"y\", gap / 2);\n      basePatternRect.setAttribute(\"width\", cx - gap);\n      basePatternRect.setAttribute(\"height\", cy - gap);\n      if (rx != null) basePatternRect.setAttribute(\"rx\", rx);\n      if (ry != null) basePatternRect.setAttribute(\"ry\", ry);\n\n      return create(\"svg:g\", context)\n        .call(applyIndirectStyles, this, dimensions, context)\n        .call(this._transform, this, scales)\n        .call((g) =>\n          g\n            .selectAll()\n            .data(index)\n            .enter()\n            .append(() => basePattern.cloneNode(true))\n            .attr(\"id\", (i) => `${patternId}-${i}`)\n            .select(\"rect\")\n            .call(applyDirectStyles, this)\n            .call(applyChannelStyles, this, visualValues)\n        )\n        .call((g) =>\n          g\n            .selectAll()\n            .data(index)\n            .enter()\n            .append(\"path\")\n            .attr(\"transform\", template`translate(${x0},${y0})`)\n            .attr(\"d\", (i) => `M${polygon[i].join(\"L\")}Z`)\n            .attr(\"fill\", (i) => `url(#${patternId}-${i})`)\n            .attr(\"stroke\", this.stroke == null ? null : \"none\")\n            .call(applyChannelStyles, this, {ariaLabel, href, title})\n        )\n        .node();\n    })\n  };\n}\n\n// A waffle is approximately a rectangular shape, but may have one or two corner\n// cuts if the starting or ending value is not an even multiple of the number of\n// columns (the width of the waffle in cells). We can represent any waffle by\n// 8 points; below is a waffle of five columns representing the interval 211:\n//\n// 1-0\n// |7-------6\n// |    |\n// 2---3  |\n//     4-----5\n//\n// Note that points 0 and 1 always have the same y-value, points 1 and 2 have\n// the same x-value, and so on, so we dont need to materialize the x- and y-\n// values of all points. Also note that we cant use the already-projected y-\n// values because these assume that y-values are distributed linearly along y\n// rather than wrapping around in columns.\n//\n// The corner points may be coincident. If the ending value is an even multiple\n// of the number of columns, say representing the interval 210, then points 6,\n// 7, and 0 are the same.\n//\n// 1-----0/7/6\n// |    |\n// 2---3  |\n//     4-----5\n//\n// Likewise if the starting value is an even multiple, say representing the\n// interval 010, points 24 are coincident.\n//\n// 1-----0/7/6\n// |    |\n// |    |\n// 4/3/2-----5\n//\n// Waffles can also represent fractional intervals (e.g., 2.410.1). These\n// require additional corner cuts, so the implementation below generates a few\n// more points.\n//\n// The last point describes the centroid (used for pointing)\nfunction wafflePoints(i1, i2, columns) {\n  if (i2 < i1) return wafflePoints(i2, i1, columns); // ensure i1 <= i2\n  if (i1 < 0) return wafflePointsOffset(i1, i2, columns, Math.ceil(-Math.min(i1, i2) / columns)); // ensure i1 >= 0\n  const x1f = Math.floor(i1 % columns);\n  const x1c = Math.ceil(i1 % columns);\n  const x2f = Math.floor(i2 % columns);\n  const x2c = Math.ceil(i2 % columns);\n  const y1f = Math.floor(i1 / columns);\n  const y1c = Math.ceil(i1 / columns);\n  const y2f = Math.floor(i2 / columns);\n  const y2c = Math.ceil(i2 / columns);\n  const points = [];\n  if (y2c > y1c) points.push([0, y1c]);\n  points.push([x1f, y1c], [x1f, y1f + (i1 % 1)], [x1c, y1f + (i1 % 1)]);\n  if (!(i1 % columns > columns - 1)) {\n    points.push([x1c, y1f]);\n    if (y2f > y1f) points.push([columns, y1f]);\n  }\n  if (y2f > y1f) points.push([columns, y2f]);\n  points.push([x2c, y2f], [x2c, y2f + (i2 % 1)], [x2f, y2f + (i2 % 1)]);\n  if (!(i2 % columns < 1)) {\n    points.push([x2f, y2c]);\n    if (y2c > y1c) points.push([0, y2c]);\n  }\n  points.push(waffleCentroid(i1, i2, columns));\n  return points;\n}\n\nfunction wafflePointsOffset(i1, i2, columns, k) {\n  return wafflePoints(i1 + k * columns, i2 + k * columns, columns).map(([x, y]) => [x, y - k]);\n}\n\nfunction waffleCentroid(i1, i2, columns) {\n  const r = Math.floor(i2 / columns) - Math.floor(i1 / columns);\n  return r === 0\n    ? // Single row\n      waffleRowCentroid(i1, i2, columns)\n    : r === 1\n    ? // Two incomplete rows; use the midpoint of their overlap if any, otherwise the larger row\n      Math.floor(i2 % columns) > Math.ceil(i1 % columns)\n      ? [(Math.floor(i2 % columns) + Math.ceil(i1 % columns)) / 2, Math.floor(i2 / columns)]\n      : i2 % columns > columns - (i1 % columns)\n      ? waffleRowCentroid(i2 - (i2 % columns), i2, columns)\n      : waffleRowCentroid(i1, columns * Math.ceil(i1 / columns), columns)\n    : // At least one full row; take the midpoint of all the rows that include the middle\n      [columns / 2, (Math.round(i1 / columns) + Math.round(i2 / columns)) / 2];\n}\n\nfunction waffleRowCentroid(i1, i2, columns) {\n  const c = Math.floor(i2) - Math.floor(i1);\n  return c === 0\n    ? // Single cell\n      [Math.floor(i1 % columns) + 0.5, Math.floor(i1 / columns) + (((i1 + i2) / 2) % 1)]\n    : c === 1\n    ? // Two incomplete cells; use the overlap if large enough, otherwise use the largest\n      (i2 % 1) - (i1 % 1) > 0.5\n      ? [Math.ceil(i1 % columns), Math.floor(i2 / columns) + ((i1 % 1) + (i2 % 1)) / 2]\n      : i2 % 1 > 1 - (i1 % 1)\n      ? [Math.floor(i2 % columns) + 0.5, Math.floor(i2 / columns) + (i2 % 1) / 2]\n      : [Math.floor(i1 % columns) + 0.5, Math.floor(i1 / columns) + (1 + (i1 % 1)) / 2]\n    : // At least one full cell; take the midpoint\n      [\n        Math.ceil(i1 % columns) + Math.ceil(Math.floor(i2) - Math.ceil(i1)) / 2,\n        Math.floor(i1 / columns) + (i2 >= 1 + i1 ? 0.5 : ((i1 + i2) / 2) % 1)\n      ];\n}\n\nfunction maybeRound(round) {\n  if (round === undefined || round === false) return Number;\n  if (round === true) return Math.round;\n  if (typeof round !== \"function\") throw new Error(`invalid round: ${round}`);\n  return round;\n}\n\nfunction maybeMultiple(multiple) {\n  return multiple === undefined ? undefined : Math.max(1, Math.floor(multiple));\n}\n\nfunction scaleof({domain, range}) {\n  return spread(range) / spread(domain);\n}\n\nfunction spread(domain) {\n  const [min, max] = extent(domain);\n  return max - min;\n}\n\nexport function waffleX(data, {tip, ...options} = {}) {\n  if (!hasXY(options)) options = {...options, y: indexOf, x2: identity};\n  return new WaffleX(data, {tip: waffleTip(tip), ...maybeStackX(maybeIntervalX(maybeIdentityX(options)))});\n}\n\nexport function waffleY(data, {tip, ...options} = {}) {\n  if (!hasXY(options)) options = {...options, x: indexOf, y2: identity};\n  return new WaffleY(data, {tip: waffleTip(tip), ...maybeStackY(maybeIntervalY(maybeIdentityY(options)))});\n}\n\n/**\n * Waffle tips behave a bit unpredictably because we they are driven by the\n * waffle centroid; you could be hovering over a waffle segment, but more than\n * 40px away from its centroid, or closer to the centroid of another segment.\n * Wed rather show a tip, even if its the wrong one, so we increase the\n * default maxRadius to Infinity. The right way to fix this would be to use\n * signed distance to the waffle geometry rather than the centroid.\n */\nfunction waffleTip(tip) {\n  return tip === true\n    ? {maxRadius: Infinity}\n    : isObject(tip) && tip.maxRadius === undefined\n    ? {...tip, maxRadius: Infinity}\n    : undefined;\n}\n","\"use strict\"\n\n// (a, y, c, l, h) = (array, y[, cmp, lo, hi])\n\nfunction ge(a, y, c, l, h) {\n  var i = h + 1;\n  while (l <= h) {\n    var m = (l + h) >>> 1, x = a[m];\n    var p = (c !== undefined) ? c(x, y) : (x - y);\n    if (p >= 0) { i = m; h = m - 1 } else { l = m + 1 }\n  }\n  return i;\n};\n\nfunction gt(a, y, c, l, h) {\n  var i = h + 1;\n  while (l <= h) {\n    var m = (l + h) >>> 1, x = a[m];\n    var p = (c !== undefined) ? c(x, y) : (x - y);\n    if (p > 0) { i = m; h = m - 1 } else { l = m + 1 }\n  }\n  return i;\n};\n\nfunction lt(a, y, c, l, h) {\n  var i = l - 1;\n  while (l <= h) {\n    var m = (l + h) >>> 1, x = a[m];\n    var p = (c !== undefined) ? c(x, y) : (x - y);\n    if (p < 0) { i = m; l = m + 1 } else { h = m - 1 }\n  }\n  return i;\n};\n\nfunction le(a, y, c, l, h) {\n  var i = l - 1;\n  while (l <= h) {\n    var m = (l + h) >>> 1, x = a[m];\n    var p = (c !== undefined) ? c(x, y) : (x - y);\n    if (p <= 0) { i = m; l = m + 1 } else { h = m - 1 }\n  }\n  return i;\n};\n\nfunction eq(a, y, c, l, h) {\n  while (l <= h) {\n    var m = (l + h) >>> 1, x = a[m];\n    var p = (c !== undefined) ? c(x, y) : (x - y);\n    if (p === 0) { return m }\n    if (p <= 0) { l = m + 1 } else { h = m - 1 }\n  }\n  return -1;\n};\n\nfunction norm(a, y, c, l, h, f) {\n  if (typeof c === 'function') {\n    return f(a, y, c, (l === undefined) ? 0 : l | 0, (h === undefined) ? a.length - 1 : h | 0);\n  }\n  return f(a, y, undefined, (c === undefined) ? 0 : c | 0, (l === undefined) ? a.length - 1 : l | 0);\n}\n\nmodule.exports = {\n  ge: function(a, y, c, l, h) { return norm(a, y, c, l, h, ge)},\n  gt: function(a, y, c, l, h) { return norm(a, y, c, l, h, gt)},\n  lt: function(a, y, c, l, h) { return norm(a, y, c, l, h, lt)},\n  le: function(a, y, c, l, h) { return norm(a, y, c, l, h, le)},\n  eq: function(a, y, c, l, h) { return norm(a, y, c, l, h, eq)}\n}\n","\"use strict\"\n\nvar bounds = require(\"binary-search-bounds\")\n\nvar NOT_FOUND = 0\nvar SUCCESS = 1\nvar EMPTY = 2\n\nmodule.exports = createWrapper\n\nfunction IntervalTreeNode(mid, left, right, leftPoints, rightPoints) {\n  this.mid = mid\n  this.left = left\n  this.right = right\n  this.leftPoints = leftPoints\n  this.rightPoints = rightPoints\n  this.count = (left ? left.count : 0) + (right ? right.count : 0) + leftPoints.length\n}\n\nvar proto = IntervalTreeNode.prototype\n\nfunction copy(a, b) {\n  a.mid = b.mid\n  a.left = b.left\n  a.right = b.right\n  a.leftPoints = b.leftPoints\n  a.rightPoints = b.rightPoints\n  a.count = b.count\n}\n\nfunction rebuild(node, intervals) {\n  var ntree = createIntervalTree(intervals)\n  node.mid = ntree.mid\n  node.left = ntree.left\n  node.right = ntree.right\n  node.leftPoints = ntree.leftPoints\n  node.rightPoints = ntree.rightPoints\n  node.count = ntree.count\n}\n\nfunction rebuildWithInterval(node, interval) {\n  var intervals = node.intervals([])\n  intervals.push(interval)\n  rebuild(node, intervals)    \n}\n\nfunction rebuildWithoutInterval(node, interval) {\n  var intervals = node.intervals([])\n  var idx = intervals.indexOf(interval)\n  if(idx < 0) {\n    return NOT_FOUND\n  }\n  intervals.splice(idx, 1)\n  rebuild(node, intervals)\n  return SUCCESS\n}\n\nproto.intervals = function(result) {\n  result.push.apply(result, this.leftPoints)\n  if(this.left) {\n    this.left.intervals(result)\n  }\n  if(this.right) {\n    this.right.intervals(result)\n  }\n  return result\n}\n\nproto.insert = function(interval) {\n  var weight = this.count - this.leftPoints.length\n  this.count += 1\n  if(interval[1] < this.mid) {\n    if(this.left) {\n      if(4*(this.left.count+1) > 3*(weight+1)) {\n        rebuildWithInterval(this, interval)\n      } else {\n        this.left.insert(interval)\n      }\n    } else {\n      this.left = createIntervalTree([interval])\n    }\n  } else if(interval[0] > this.mid) {\n    if(this.right) {\n      if(4*(this.right.count+1) > 3*(weight+1)) {\n        rebuildWithInterval(this, interval)\n      } else {\n        this.right.insert(interval)\n      }\n    } else {\n      this.right = createIntervalTree([interval])\n    }\n  } else {\n    var l = bounds.ge(this.leftPoints, interval, compareBegin)\n    var r = bounds.ge(this.rightPoints, interval, compareEnd)\n    this.leftPoints.splice(l, 0, interval)\n    this.rightPoints.splice(r, 0, interval)\n  }\n}\n\nproto.remove = function(interval) {\n  var weight = this.count - this.leftPoints\n  if(interval[1] < this.mid) {\n    if(!this.left) {\n      return NOT_FOUND\n    }\n    var rw = this.right ? this.right.count : 0\n    if(4 * rw > 3 * (weight-1)) {\n      return rebuildWithoutInterval(this, interval)\n    }\n    var r = this.left.remove(interval)\n    if(r === EMPTY) {\n      this.left = null\n      this.count -= 1\n      return SUCCESS\n    } else if(r === SUCCESS) {\n      this.count -= 1\n    }\n    return r\n  } else if(interval[0] > this.mid) {\n    if(!this.right) {\n      return NOT_FOUND\n    }\n    var lw = this.left ? this.left.count : 0\n    if(4 * lw > 3 * (weight-1)) {\n      return rebuildWithoutInterval(this, interval)\n    }\n    var r = this.right.remove(interval)\n    if(r === EMPTY) {\n      this.right = null\n      this.count -= 1\n      return SUCCESS\n    } else if(r === SUCCESS) {\n      this.count -= 1\n    }\n    return r\n  } else {\n    if(this.count === 1) {\n      if(this.leftPoints[0] === interval) {\n        return EMPTY\n      } else {\n        return NOT_FOUND\n      }\n    }\n    if(this.leftPoints.length === 1 && this.leftPoints[0] === interval) {\n      if(this.left && this.right) {\n        var p = this\n        var n = this.left\n        while(n.right) {\n          p = n\n          n = n.right\n        }\n        if(p === this) {\n          n.right = this.right\n        } else {\n          var l = this.left\n          var r = this.right\n          p.count -= n.count\n          p.right = n.left\n          n.left = l\n          n.right = r\n        }\n        copy(this, n)\n        this.count = (this.left?this.left.count:0) + (this.right?this.right.count:0) + this.leftPoints.length\n      } else if(this.left) {\n        copy(this, this.left)\n      } else {\n        copy(this, this.right)\n      }\n      return SUCCESS\n    }\n    for(var l = bounds.ge(this.leftPoints, interval, compareBegin); l<this.leftPoints.length; ++l) {\n      if(this.leftPoints[l][0] !== interval[0]) {\n        break\n      }\n      if(this.leftPoints[l] === interval) {\n        this.count -= 1\n        this.leftPoints.splice(l, 1)\n        for(var r = bounds.ge(this.rightPoints, interval, compareEnd); r<this.rightPoints.length; ++r) {\n          if(this.rightPoints[r][1] !== interval[1]) {\n            break\n          } else if(this.rightPoints[r] === interval) {\n            this.rightPoints.splice(r, 1)\n            return SUCCESS\n          }\n        }\n      }\n    }\n    return NOT_FOUND\n  }\n}\n\nfunction reportLeftRange(arr, hi, cb) {\n  for(var i=0; i<arr.length && arr[i][0] <= hi; ++i) {\n    var r = cb(arr[i])\n    if(r) { return r }\n  }\n}\n\nfunction reportRightRange(arr, lo, cb) {\n  for(var i=arr.length-1; i>=0 && arr[i][1] >= lo; --i) {\n    var r = cb(arr[i])\n    if(r) { return r }\n  }\n}\n\nfunction reportRange(arr, cb) {\n  for(var i=0; i<arr.length; ++i) {\n    var r = cb(arr[i])\n    if(r) { return r }\n  }\n}\n\nproto.queryPoint = function(x, cb) {\n  if(x < this.mid) {\n    if(this.left) {\n      var r = this.left.queryPoint(x, cb)\n      if(r) { return r }\n    }\n    return reportLeftRange(this.leftPoints, x, cb)\n  } else if(x > this.mid) {\n    if(this.right) {\n      var r = this.right.queryPoint(x, cb)\n      if(r) { return r }\n    }\n    return reportRightRange(this.rightPoints, x, cb)\n  } else {\n    return reportRange(this.leftPoints, cb)\n  }\n}\n\nproto.queryInterval = function(lo, hi, cb) {\n  if(lo < this.mid && this.left) {\n    var r = this.left.queryInterval(lo, hi, cb)\n    if(r) { return r }\n  }\n  if(hi > this.mid && this.right) {\n    var r = this.right.queryInterval(lo, hi, cb)\n    if(r) { return r }\n  }\n  if(hi < this.mid) {\n    return reportLeftRange(this.leftPoints, hi, cb)\n  } else if(lo > this.mid) {\n    return reportRightRange(this.rightPoints, lo, cb)\n  } else {\n    return reportRange(this.leftPoints, cb)\n  }\n}\n\nfunction compareNumbers(a, b) {\n  return a - b\n}\n\nfunction compareBegin(a, b) {\n  var d = a[0] - b[0]\n  if(d) { return d }\n  return a[1] - b[1]\n}\n\nfunction compareEnd(a, b) {\n  var d = a[1] - b[1]\n  if(d) { return d }\n  return a[0] - b[0]\n}\n\nfunction createIntervalTree(intervals) {\n  if(intervals.length === 0) {\n    return null\n  }\n  var pts = []\n  for(var i=0; i<intervals.length; ++i) {\n    pts.push(intervals[i][0], intervals[i][1])\n  }\n  pts.sort(compareNumbers)\n\n  var mid = pts[pts.length>>1]\n\n  var leftIntervals = []\n  var rightIntervals = []\n  var centerIntervals = []\n  for(var i=0; i<intervals.length; ++i) {\n    var s = intervals[i]\n    if(s[1] < mid) {\n      leftIntervals.push(s)\n    } else if(mid < s[0]) {\n      rightIntervals.push(s)\n    } else {\n      centerIntervals.push(s)\n    }\n  }\n\n  //Split center intervals\n  var leftPoints = centerIntervals\n  var rightPoints = centerIntervals.slice()\n  leftPoints.sort(compareBegin)\n  rightPoints.sort(compareEnd)\n\n  return new IntervalTreeNode(mid, \n    createIntervalTree(leftIntervals),\n    createIntervalTree(rightIntervals),\n    leftPoints,\n    rightPoints)\n}\n\n//User friendly wrapper that makes it possible to support empty trees\nfunction IntervalTree(root) {\n  this.root = root\n}\n\nvar tproto = IntervalTree.prototype\n\ntproto.insert = function(interval) {\n  if(this.root) {\n    this.root.insert(interval)\n  } else {\n    this.root = new IntervalTreeNode(interval[0], null, null, [interval], [interval])\n  }\n}\n\ntproto.remove = function(interval) {\n  if(this.root) {\n    var r = this.root.remove(interval)\n    if(r === EMPTY) {\n      this.root = null\n    }\n    return r !== NOT_FOUND\n  }\n  return false\n}\n\ntproto.queryPoint = function(p, cb) {\n  if(this.root) {\n    return this.root.queryPoint(p, cb)\n  }\n}\n\ntproto.queryInterval = function(lo, hi, cb) {\n  if(lo <= hi && this.root) {\n    return this.root.queryInterval(lo, hi, cb)\n  }\n}\n\nObject.defineProperty(tproto, \"count\", {\n  get: function() {\n    if(this.root) {\n      return this.root.count\n    }\n    return 0\n  }\n})\n\nObject.defineProperty(tproto, \"intervals\", {\n  get: function() {\n    if(this.root) {\n      return this.root.intervals([])\n    }\n    return []\n  }\n})\n\nfunction createWrapper(intervals) {\n  if(!intervals || intervals.length === 0) {\n    return new IntervalTree(null)\n  }\n  return new IntervalTree(createIntervalTree(intervals))\n}\n","import IntervalTree from \"interval-tree-1d\";\nimport {finite, positive} from \"../defined.js\";\nimport {identity, maybeNamed, number, valueof} from \"../options.js\";\nimport {initializer} from \"./basic.js\";\nimport {applyPosition} from \"../projection.js\";\n\nconst anchorXLeft = ({marginLeft}) => [1, marginLeft];\nconst anchorXRight = ({width, marginRight}) => [-1, width - marginRight];\nconst anchorXMiddle = ({width, marginLeft, marginRight}) => [0, (marginLeft + width - marginRight) / 2];\nconst anchorYTop = ({marginTop}) => [1, marginTop];\nconst anchorYBottom = ({height, marginBottom}) => [-1, height - marginBottom];\nconst anchorYMiddle = ({height, marginTop, marginBottom}) => [0, (marginTop + height - marginBottom) / 2];\n\nfunction maybeAnchor(anchor) {\n  return typeof anchor === \"string\" ? {anchor} : anchor;\n}\n\nexport function dodgeX(dodgeOptions = {}, options = {}) {\n  if (arguments.length === 1) [dodgeOptions, options] = mergeOptions(dodgeOptions);\n  let {anchor = \"left\", padding = 1, r = options.r} = maybeAnchor(dodgeOptions);\n  switch (`${anchor}`.toLowerCase()) {\n    case \"left\":\n      anchor = anchorXLeft;\n      break;\n    case \"right\":\n      anchor = anchorXRight;\n      break;\n    case \"middle\":\n      anchor = anchorXMiddle;\n      break;\n    default:\n      throw new Error(`unknown dodge anchor: ${anchor}`);\n  }\n  return dodge(\"x\", \"y\", anchor, number(padding), r, options);\n}\n\nexport function dodgeY(dodgeOptions = {}, options = {}) {\n  if (arguments.length === 1) [dodgeOptions, options] = mergeOptions(dodgeOptions);\n  let {anchor = \"bottom\", padding = 1, r = options.r} = maybeAnchor(dodgeOptions);\n  switch (`${anchor}`.toLowerCase()) {\n    case \"top\":\n      anchor = anchorYTop;\n      break;\n    case \"bottom\":\n      anchor = anchorYBottom;\n      break;\n    case \"middle\":\n      anchor = anchorYMiddle;\n      break;\n    default:\n      throw new Error(`unknown dodge anchor: ${anchor}`);\n  }\n  return dodge(\"y\", \"x\", anchor, number(padding), r, options);\n}\n\nfunction mergeOptions(options) {\n  const {anchor, padding, ...rest} = options;\n  const {r} = rest; // dont consume r; allow it to propagate\n  return [{anchor, padding, r}, rest];\n}\n\nfunction dodge(y, x, anchor, padding, r, options) {\n  if (r != null && typeof r !== \"number\") {\n    let {channels, sort, reverse} = options;\n    channels = maybeNamed(channels);\n    if (channels?.r === undefined) options = {...options, channels: {...channels, r: {value: r, scale: \"r\"}}};\n    if (sort === undefined && reverse === undefined) options.sort = {channel: \"-r\"};\n  }\n  return initializer(options, function (data, facets, channels, scales, dimensions, context) {\n    let {[x]: X, r: R} = channels;\n    if (!channels[x]) throw new Error(`missing channel: ${x}`);\n    ({[x]: X} = applyPosition(channels, scales, context));\n    const cr = R ? undefined : r !== undefined ? number(r) : this.r !== undefined ? this.r : 3;\n    if (R) R = valueof(R.value, scales[R.scale] || identity, Float64Array);\n    let [ky, ty] = anchor(dimensions);\n    const compare = ky ? compareAscending : compareSymmetric;\n    const Y = new Float64Array(X.length);\n    const radius = R ? (i) => R[i] : () => cr;\n    for (let I of facets) {\n      const tree = IntervalTree();\n      I = I.filter(R ? (i) => finite(X[i]) && positive(R[i]) : (i) => finite(X[i]));\n      const intervals = new Float64Array(2 * I.length + 2);\n      for (const i of I) {\n        const ri = radius(i);\n        const y0 = ky ? ri + padding : 0; // offset baseline for varying radius\n        const l = X[i] - ri;\n        const h = X[i] + ri;\n\n        // The first two positions are 0 to test placing the dot on the baseline.\n        let k = 2;\n\n        // For any previously placed circles that may overlap this circle, compute\n        // the y-positions that place this circle tangent to these other circles.\n        // https://observablehq.com/@mbostock/circle-offset-along-line\n        tree.queryInterval(l - padding, h + padding, ([, , j]) => {\n          const yj = Y[j] - y0;\n          const dx = X[i] - X[j];\n          const dr = padding + (R ? R[i] + R[j] : 2 * cr);\n          const dy = Math.sqrt(dr * dr - dx * dx);\n          intervals[k++] = yj - dy;\n          intervals[k++] = yj + dy;\n        });\n\n        // Find the best y-value where this circle can fit.\n        let candidates = intervals.slice(0, k);\n        if (ky) candidates = candidates.filter((y) => y >= 0);\n        out: for (const y of candidates.sort(compare)) {\n          for (let j = 0; j < k; j += 2) {\n            if (intervals[j] + 1e-6 < y && y < intervals[j + 1] - 1e-6) {\n              continue out;\n            }\n          }\n          Y[i] = y + y0;\n          break;\n        }\n\n        // Insert the placed circle into the interval tree.\n        tree.insert([l, h, i]);\n      }\n    }\n    if (!ky) ky = 1;\n    for (const I of facets) {\n      for (const i of I) {\n        Y[i] = Y[i] * ky + ty;\n      }\n    }\n    return {\n      data,\n      facets,\n      channels: {\n        [y]: {value: Y, source: null}, // dont show in tooltip\n        [x]: {value: X, source: channels[x]},\n        ...(R && {r: {value: R, source: channels.r}})\n      }\n    };\n  });\n}\n\nfunction compareSymmetric(a, b) {\n  return Math.abs(a) - Math.abs(b);\n}\n\nfunction compareAscending(a, b) {\n  return a - b;\n}\n","import {extent, deviation, max, mean, median, min, sum} from \"d3\";\nimport {defined} from \"../defined.js\";\nimport {percentile, taker} from \"../options.js\";\nimport {mapX, mapY} from \"./map.js\";\n\nexport function normalizeX(basis, options) {\n  if (arguments.length === 1) ({basis, ...options} = basis);\n  return mapX(normalize(basis), options);\n}\n\nexport function normalizeY(basis, options) {\n  if (arguments.length === 1) ({basis, ...options} = basis);\n  return mapY(normalize(basis), options);\n}\n\nexport function normalize(basis) {\n  if (basis === undefined) return normalizeFirst;\n  if (typeof basis === \"function\") return normalizeBasis(taker(basis));\n  if (/^p\\d{2}$/i.test(basis)) return normalizeAccessor(percentile(basis));\n  switch (`${basis}`.toLowerCase()) {\n    case \"deviation\":\n      return normalizeDeviation;\n    case \"first\":\n      return normalizeFirst;\n    case \"last\":\n      return normalizeLast;\n    case \"max\":\n      return normalizeMax;\n    case \"mean\":\n      return normalizeMean;\n    case \"median\":\n      return normalizeMedian;\n    case \"min\":\n      return normalizeMin;\n    case \"sum\":\n      return normalizeSum;\n    case \"extent\":\n      return normalizeExtent;\n  }\n  throw new Error(`invalid basis: ${basis}`);\n}\n\nfunction normalizeBasis(basis) {\n  return {\n    mapIndex(I, S, T) {\n      const b = +basis(I, S);\n      for (const i of I) {\n        T[i] = S[i] === null ? NaN : S[i] / b;\n      }\n    }\n  };\n}\n\nfunction normalizeAccessor(f) {\n  return normalizeBasis((I, S) => f(I, (i) => S[i]));\n}\n\nconst normalizeExtent = {\n  mapIndex(I, S, T) {\n    const [s1, s2] = extent(I, (i) => S[i]);\n    const d = s2 - s1;\n    for (const i of I) {\n      T[i] = S[i] === null ? NaN : (S[i] - s1) / d;\n    }\n  }\n};\n\nconst normalizeFirst = normalizeBasis((I, S) => {\n  for (let i = 0; i < I.length; ++i) {\n    const s = S[I[i]];\n    if (defined(s)) return s;\n  }\n});\n\nconst normalizeLast = normalizeBasis((I, S) => {\n  for (let i = I.length - 1; i >= 0; --i) {\n    const s = S[I[i]];\n    if (defined(s)) return s;\n  }\n});\n\nconst normalizeDeviation = {\n  mapIndex(I, S, T) {\n    const m = mean(I, (i) => S[i]);\n    const d = deviation(I, (i) => S[i]);\n    for (const i of I) {\n      T[i] = S[i] === null ? NaN : d ? (S[i] - m) / d : 0;\n    }\n  }\n};\n\nconst normalizeMax = normalizeAccessor(max);\nconst normalizeMean = normalizeAccessor(mean);\nconst normalizeMedian = normalizeAccessor(median);\nconst normalizeMin = normalizeAccessor(min);\nconst normalizeSum = normalizeAccessor(sum);\n","import {extent} from \"d3\";\nimport {maybeInterval} from \"../options.js\";\nimport {parseTimeInterval} from \"../time.js\";\nimport {map} from \"../transforms/map.js\";\n\nexport function shiftX(interval, options) {\n  return shiftK(\"x\", interval, options);\n}\n\nexport function shiftY(interval, options) {\n  return shiftK(\"y\", interval, options);\n}\n\nfunction shiftK(x, interval, options = {}) {\n  let offset;\n  let k = 1;\n  if (typeof interval === \"number\") {\n    k = interval;\n    offset = (x, k) => +x + k;\n  } else {\n    if (typeof interval === \"string\") {\n      const sign = interval.startsWith(\"-\") ? -1 : 1;\n      [interval, k] = parseTimeInterval(interval.replace(/^[+-]/, \"\"));\n      k *= sign;\n    }\n    interval = maybeInterval(interval);\n    offset = (x, k) => interval.offset(x, k);\n  }\n  const x1 = `${x}1`;\n  const x2 = `${x}2`;\n  const mapped = map(\n    {\n      [x1]: (D) => D.map((d) => offset(d, k)),\n      [x2]: (D) => D\n    },\n    options\n  );\n  const t = mapped[x2].transform;\n  mapped[x2].transform = () => {\n    const V = t();\n    const [x0, x1] = extent(V);\n    V.domain = k < 0 ? [x0, offset(x1, k)] : [offset(x0, k), x1];\n    return V;\n  };\n  return mapped;\n}\n","import {greatest, group, least} from \"d3\";\nimport {maybeZ, valueof} from \"../options.js\";\nimport {basic} from \"./basic.js\";\n\nexport function select(selector, options = {}) {\n  // If specified selector is a string or function, its a selector without an\n  // input channel such as first or last.\n  if (typeof selector === \"string\") {\n    switch (selector.toLowerCase()) {\n      case \"first\":\n        return selectFirst(options);\n      case \"last\":\n        return selectLast(options);\n    }\n  }\n  if (typeof selector === \"function\") {\n    return selectChannel(null, selector, options);\n  }\n  // Otherwise the selector is an option {name: value} where name is a channel\n  // name and value is a selector definition that additionally takes the given\n  // channel values as input. The selector object must have exactly one key.\n  let key, value;\n  for (key in selector) {\n    if (value !== undefined) throw new Error(\"ambiguous selector; multiple inputs\");\n    value = maybeSelector(selector[key]);\n  }\n  if (value === undefined) throw new Error(`invalid selector: ${selector}`);\n  return selectChannel(key, value, options);\n}\n\nfunction maybeSelector(selector) {\n  if (typeof selector === \"function\") return selector;\n  switch (`${selector}`.toLowerCase()) {\n    case \"min\":\n      return selectorMin;\n    case \"max\":\n      return selectorMax;\n  }\n  throw new Error(`unknown selector: ${selector}`);\n}\n\nexport function selectFirst(options) {\n  return selectChannel(null, selectorFirst, options);\n}\n\nexport function selectLast(options) {\n  return selectChannel(null, selectorLast, options);\n}\n\nexport function selectMinX(options) {\n  return selectChannel(\"x\", selectorMin, options);\n}\n\nexport function selectMinY(options) {\n  return selectChannel(\"y\", selectorMin, options);\n}\n\nexport function selectMaxX(options) {\n  return selectChannel(\"x\", selectorMax, options);\n}\n\nexport function selectMaxY(options) {\n  return selectChannel(\"y\", selectorMax, options);\n}\n\nfunction* selectorFirst(I) {\n  yield I[0];\n}\n\nfunction* selectorLast(I) {\n  yield I[I.length - 1];\n}\n\nfunction* selectorMin(I, X) {\n  yield least(I, (i) => X[i]);\n}\n\nfunction* selectorMax(I, X) {\n  yield greatest(I, (i) => X[i]);\n}\n\nfunction selectChannel(v, selector, options) {\n  if (v != null) {\n    if (options[v] == null) throw new Error(`missing channel: ${v}`);\n    v = options[v];\n  }\n  const z = maybeZ(options);\n  return basic(options, (data, facets) => {\n    const Z = valueof(data, z);\n    const V = valueof(data, v);\n    const selectFacets = [];\n    for (const facet of facets) {\n      const selectFacet = [];\n      for (const I of Z ? group(facet, (i) => Z[i]).values() : [facet]) {\n        for (const i of selector(I, V)) {\n          selectFacet.push(i);\n        }\n      }\n      selectFacets.push(selectFacet);\n    }\n    return {data, facets: selectFacets};\n  });\n}\n","import {Mark} from \"./mark.js\";\nimport {plot} from \"./plot.js\";\n\n// Note: this side effect avoids a circular dependency.\nMark.prototype.plot = function ({marks = [], ...options} = {}) {\n  return plot({...options, marks: [...marks, this]});\n};\n\nexport {plot} from \"./plot.js\";\nexport {Mark, marks} from \"./mark.js\";\nexport {Area, area, areaX, areaY} from \"./marks/area.js\";\nexport {Arrow, arrow} from \"./marks/arrow.js\";\nexport {auto, autoSpec} from \"./marks/auto.js\";\nexport {axisX, axisY, axisFx, axisFy, gridX, gridY, gridFx, gridFy} from \"./marks/axis.js\";\nexport {BarX, BarY, barX, barY} from \"./marks/bar.js\";\nexport {bollinger, bollingerX, bollingerY} from \"./marks/bollinger.js\";\nexport {boxX, boxY} from \"./marks/box.js\";\nexport {Cell, cell, cellX, cellY} from \"./marks/cell.js\";\nexport {Contour, contour} from \"./marks/contour.js\";\nexport {crosshair, crosshairX, crosshairY} from \"./marks/crosshair.js\";\nexport {delaunayLink, delaunayMesh, hull, voronoi, voronoiMesh} from \"./marks/delaunay.js\";\nexport {Density, density} from \"./marks/density.js\";\nexport {differenceX, differenceY} from \"./marks/difference.js\";\nexport {Dot, dot, dotX, dotY, circle, hexagon} from \"./marks/dot.js\";\nexport {Frame, frame} from \"./marks/frame.js\";\nexport {Geo, geo, sphere, graticule} from \"./marks/geo.js\";\nexport {Hexgrid, hexgrid} from \"./marks/hexgrid.js\";\nexport {Image, image} from \"./marks/image.js\";\nexport {Line, line, lineX, lineY} from \"./marks/line.js\";\nexport {linearRegressionX, linearRegressionY} from \"./marks/linearRegression.js\";\nexport {Link, link} from \"./marks/link.js\";\nexport {Raster, raster} from \"./marks/raster.js\";\nexport {interpolateNone, interpolatorBarycentric, interpolateNearest, interpolatorRandomWalk} from \"./marks/raster.js\";\nexport {Rect, rect, rectX, rectY} from \"./marks/rect.js\";\nexport {RuleX, RuleY, ruleX, ruleY} from \"./marks/rule.js\";\nexport {Text, text, textX, textY} from \"./marks/text.js\";\nexport {TickX, TickY, tickX, tickY} from \"./marks/tick.js\";\nexport {Tip, tip} from \"./marks/tip.js\";\nexport {tree, cluster} from \"./marks/tree.js\";\nexport {Vector, vector, vectorX, vectorY, spike} from \"./marks/vector.js\";\nexport {WaffleX, WaffleY, waffleX, waffleY} from \"./marks/waffle.js\";\nexport {valueof, column, identity, indexOf} from \"./options.js\";\nexport {filter, reverse, sort, shuffle, basic as transform, initializer} from \"./transforms/basic.js\";\nexport {bin, binX, binY} from \"./transforms/bin.js\";\nexport {centroid, geoCentroid} from \"./transforms/centroid.js\";\nexport {dodgeX, dodgeY} from \"./transforms/dodge.js\";\nexport {find, group, groupX, groupY, groupZ} from \"./transforms/group.js\";\nexport {hexbin} from \"./transforms/hexbin.js\";\nexport {normalize, normalizeX, normalizeY} from \"./transforms/normalize.js\";\nexport {map, mapX, mapY} from \"./transforms/map.js\";\nexport {shiftX, shiftY} from \"./transforms/shift.js\";\nexport {window, windowX, windowY} from \"./transforms/window.js\";\nexport {select, selectFirst, selectLast, selectMaxX, selectMaxY, selectMinX, selectMinY} from \"./transforms/select.js\";\nexport {stackX, stackX1, stackX2, stackY, stackY1, stackY2} from \"./transforms/stack.js\";\nexport {treeNode, treeLink} from \"./transforms/tree.js\";\nexport {pointer, pointerX, pointerY} from \"./interactions/pointer.js\";\nexport {formatIsoDate, formatNumber, formatWeekday, formatMonth} from \"./format.js\";\nexport {scale} from \"./scales.js\";\nexport {legend} from \"./legends.js\";\nexport {numberInterval} from \"./options.js\";\nexport {timeInterval, utcInterval} from \"./time.js\";\n","export const attributeMap = new Map([\n  ['style', 'style'],\n  ['width', 'width'],\n  ['height', 'height'],\n  ['margin', 'margin'],\n  ['marginLeft', 'marginLeft'],\n  ['marginRight', 'marginRight'],\n  ['marginTop', 'marginTop'],\n  ['marginBottom', 'marginBottom'],\n  ['align', 'align'],\n  ['aspectRatio', 'aspectRatio'],\n  ['axis', 'axis'],\n  ['inset', 'inset'],\n  ['grid', 'grid'],\n  ['label', 'label'],\n  ['padding', 'padding'],\n  ['xScale', 'x.type'],\n  ['xDomain', 'x.domain'],\n  ['xRange', 'x.range'],\n  ['xNice', 'x.nice'],\n  ['xInset', 'x.inset'],\n  ['xInsetLeft', 'x.insetLeft'],\n  ['xInsetRight', 'x.insetRight'],\n  ['xClamp', 'x.clamp'],\n  ['xRound', 'x.round'],\n  ['xAlign', 'x.align'],\n  ['xPadding', 'x.padding'],\n  ['xPaddingInner', 'x.paddingInner'],\n  ['xPaddingOuter', 'x.paddingOuter'],\n  ['xAxis', 'x.axis'],\n  ['xTicks', 'x.ticks'],\n  ['xTickSize', 'x.tickSize'],\n  ['xTickSpacing', 'x.tickSpacing'],\n  ['xTickPadding', 'x.tickPadding'],\n  ['xTickFormat', 'x.tickFormat'],\n  ['xTickRotate', 'x.tickRotate'],\n  ['xGrid', 'x.grid'],\n  ['xLine', 'x.line'],\n  ['xLabel', 'x.label'],\n  ['xLabelAnchor', 'x.labelAnchor'],\n  ['xLabelArrow', 'x.labelArrow'],\n  ['xLabelOffset', 'x.labelOffset'],\n  ['xFontVariant', 'x.fontVariant'],\n  ['xAriaLabel', 'x.ariaLabel'],\n  ['xAriaDescription', 'x.ariaDescription'],\n  ['xPercent', 'x.percent'],\n  ['xReverse', 'x.reverse'],\n  ['xZero', 'x.zero'],\n  ['xBase', 'x.base'],\n  ['xExponent', 'x.exponent'],\n  ['xConstant', 'x.constant'],\n  ['yScale', 'y.type'],\n  ['yDomain', 'y.domain'],\n  ['yRange', 'y.range'],\n  ['yNice', 'y.nice'],\n  ['yInset', 'y.inset'],\n  ['yInsetTop', 'y.insetTop'],\n  ['yInsetBottom', 'y.insetBottom'],\n  ['yClamp', 'y.clamp'],\n  ['yRound', 'y.round'],\n  ['yAlign', 'y.align'],\n  ['yPadding', 'y.padding'],\n  ['yPaddingInner', 'y.paddingInner'],\n  ['yPaddingOuter', 'y.paddingOuter'],\n  ['yAxis', 'y.axis'],\n  ['yTicks', 'y.ticks'],\n  ['yTickSize', 'y.tickSize'],\n  ['yTickSpacing', 'y.tickSpacing'],\n  ['yTickPadding', 'y.tickPadding'],\n  ['yTickFormat', 'y.tickFormat'],\n  ['yTickRotate', 'y.tickRotate'],\n  ['yGrid', 'y.grid'],\n  ['yLine', 'y.line'],\n  ['yLabel', 'y.label'],\n  ['yLabelAnchor', 'y.labelAnchor'],\n  ['yLabelArrow', 'y.labelArrow'],\n  ['yLabelOffset', 'y.labelOffset'],\n  ['yFontVariant', 'y.fontVariant'],\n  ['yAriaLabel', 'y.ariaLabel'],\n  ['yAriaDescription', 'y.ariaDescription'],\n  ['yPercent', 'y.percent'],\n  ['yReverse', 'y.reverse'],\n  ['yZero', 'y.zero'],\n  ['yBase', 'y.base'],\n  ['yExponent', 'y.exponent'],\n  ['yConstant', 'y.constant'],\n  ['facetMargin', 'facet.margin'],\n  ['facetMarginTop', 'facet.marginTop'],\n  ['facetMarginBottom', 'facet.marginBottom'],\n  ['facetMarginLeft', 'facet.marginLeft'],\n  ['facetMarginRight', 'facet.marginRight'],\n  ['facetGrid', 'facet.grid'],\n  ['facetLabel', 'facet.label'],\n  ['fxDomain', 'fx.domain'],\n  ['fxRange', 'fx.range'],\n  ['fxInset', 'fx.inset'],\n  ['fxInsetLeft', 'fx.insetLeft'],\n  ['fxInsetRight', 'fx.insetRight'],\n  ['fxRound', 'fx.round'],\n  ['fxAlign', 'fx.align'],\n  ['fxPadding', 'fx.padding'],\n  ['fxPaddingInner', 'fx.paddingInner'],\n  ['fxPaddingOuter', 'fx.paddingOuter'],\n  ['fxAxis', 'fx.axis'],\n  ['fxTicks', 'fx.ticks'],\n  ['fxTickSize', 'fx.tickSize'],\n  ['fxTickSpacing', 'fx.tickSpacing'],\n  ['fxTickPadding', 'fx.tickPadding'],\n  ['fxTickFormat', 'fx.tickFormat'],\n  ['fxTickRotate', 'fx.tickRotate'],\n  ['fxGrid', 'fx.grid'],\n  ['fxLine', 'fx.line'],\n  ['fxLabel', 'fx.label'],\n  ['fxLabelAnchor', 'fx.labelAnchor'],\n  ['fxLabelOffset', 'fx.labelOffset'],\n  ['fxFontVariant', 'fx.fontVariant'],\n  ['fxAriaLabel', 'fx.ariaLabel'],\n  ['fxAriaDescription', 'fx.ariaDescription'],\n  ['fxReverse', 'fx.reverse'],\n  ['fyDomain', 'fy.domain'],\n  ['fyRange', 'fy.range'],\n  ['fyInset', 'fy,inset'],\n  ['fyInsetTop', 'fy.insetTop'],\n  ['fyInsetBottom', 'fy.insetBottom'],\n  ['fyRound', 'fy.round'],\n  ['fyAlign', 'fy.align'],\n  ['fyPadding', 'fy.padding'],\n  ['fyPaddingInner', 'fy.paddingInner'],\n  ['fyPaddingOuter', 'fy.paddingOuter'],\n  ['fyAxis', 'fy.axis'],\n  ['fyTicks', 'fy.ticks'],\n  ['fyTickSize', 'fy.tickSize'],\n  ['fyTickSpacing', 'fy.tickSpacing'],\n  ['fyTickPadding', 'fy.tickPadding'],\n  ['fyTickFormat', 'fy.tickFormat'],\n  ['fyTickRotate', 'fy.tickRotate'],\n  ['fyGrid', 'fy.grid'],\n  ['fyLine', 'fy.line'],\n  ['fyLabel', 'fy.label'],\n  ['fyLabelAnchor', 'fy.labelAnchor'],\n  ['fyLabelOffset', 'fy.labelOffset'],\n  ['fyFontVariant', 'fy.fontVariant'],\n  ['fyAriaLabel', 'fy.ariaLabel'],\n  ['fyAriaDescription', 'fy.ariaDescription'],\n  ['fyReverse', 'fy.reverse'],\n  ['colorScale', 'color.type'],\n  ['colorDomain', 'color.domain'],\n  ['colorRange', 'color.range'],\n  ['colorClamp', 'color.clamp'],\n  ['colorN', 'color.n'],\n  ['colorNice', 'color.nice'],\n  ['colorScheme', 'color.scheme'],\n  ['colorInterpolate', 'color.interpolate'],\n  ['colorPivot', 'color.pivot'],\n  ['colorSymmetric', 'color.symmetric'],\n  ['colorLabel', 'color.label'],\n  ['colorPercent', 'color.percent'],\n  ['colorReverse', 'color.reverse'],\n  ['colorZero', 'color.zero'],\n  ['colorTickFormat', 'color.tickFormat'],\n  ['colorBase', 'color.base'],\n  ['colorExponent', 'color.exponent'],\n  ['colorConstant', 'color.constant'],\n  ['opacityScale', 'opacity.type'],\n  ['opacityDomain', 'opacity.domain'],\n  ['opacityRange', 'opacity.range'],\n  ['opacityClamp', 'opacity.clamp'],\n  ['opacityNice', 'opacity.nice'],\n  ['opacityLabel', 'opacity.label'],\n  ['opacityPercent', 'opacity.percent'],\n  ['opacityReverse', 'opacity.reverse'],\n  ['opacityZero', 'opacity.zero'],\n  ['opacityTickFormat', 'opacity.tickFormat'],\n  ['opacityBase', 'opacity.base'],\n  ['opacityExponent', 'opacity.exponent'],\n  ['opacityConstant', 'opacity.constant'],\n  ['symbolScale', 'symbol.type'],\n  ['symbolDomain', 'symbol.domain'],\n  ['symbolRange', 'symbol.range'],\n  ['rScale', 'r.type'],\n  ['rDomain', 'r.domain'],\n  ['rRange', 'r.range'],\n  ['rClamp', 'r.clamp'],\n  ['rNice', 'r.nice'],\n  ['rLabel', 'r.label'],\n  ['rPercent', 'r.percent'],\n  ['rZero', 'r.zero'],\n  ['rBase', 'r.base'],\n  ['rExponent', 'r.exponent'],\n  ['rConstant', 'r.constant'],\n  ['lengthScale', 'length.type'],\n  ['lengthDomain', 'length.domain'],\n  ['lengthRange', 'length.range'],\n  ['lengthClamp', 'length.clamp'],\n  ['lengthNice', 'length.nice'],\n  ['lengthPercent', 'length.percent'],\n  ['lengthZero', 'length.zero'],\n  ['lengthBase', 'length.base'],\n  ['lengthExponent', 'length.exponent'],\n  ['lengthConstant', 'length.constant'],\n  ['projectionType', 'projection.type'],\n  ['projectionParallels', 'projection.parallels'],\n  ['projectionPrecision', 'projection.precision'],\n  ['projectionRotate', 'projection.rotate'],\n  ['projectionDomain', 'projection.domain'],\n  ['projectionInset', 'projection.inset'],\n  ['projectionInsetLeft', 'projection.insetLeft'],\n  ['projectionInsetRight', 'projection.insetRight'],\n  ['projectionInsetTop', 'projection.insetTop'],\n  ['projectionInsetBottom', 'projection.insetBottom'],\n  ['projectionClip', 'projection.clip']\n]);\n\nfunction setProperty(object, path, value) {\n  for (let i = 0; i < path.length; ++i) {\n    const key = path[i];\n    if (i === path.length - 1) {\n      object[key] = value;\n    } else {\n      object = (object[key] || (object[key] = {}));\n    }\n  }\n}\n\nexport function setAttributes(attributes, spec, symbols) {\n  // populate top-level and scale properties\n  for (const key in attributes) {\n    const specKey = attributeMap.get(key);\n    if (specKey == null) {\n      throw new Error(`Unrecognized plot attribute: ${key}`);\n    }\n    const value = attributes[key];\n    if (typeof value === 'symbol') {\n      symbols.push(key);\n    } else if (value !== undefined) {\n      setProperty(spec, specKey.split('.'), value);\n    }\n  }\n}\n","import * as Plot from '@observablehq/plot';\nimport { setAttributes } from './plot-attributes.js';\nimport { Fixed } from './symbols.js';\n\nconst OPTIONS_ONLY_MARKS = new Set([\n  'frame',\n  'hexgrid',\n  'sphere',\n  'graticule'\n]);\n\n// @ts-ignore\nconst SELECT_TRANSFORMS = new Map([\n  ['first', Plot.selectFirst],\n  ['last', Plot.selectLast],\n  ['maxX', Plot.selectMaxX],\n  ['maxY', Plot.selectMaxY],\n  ['minX', Plot.selectMinX],\n  ['minY', Plot.selectMinY],\n  ['nearest', Plot.pointer],\n  ['nearestX', Plot.pointerX],\n  ['nearestXY', Plot.pointerY]\n]);\n\n// construct Plot output\n// see https://github.com/observablehq/plot\nexport async function plotRenderer(plot) {\n  const spec = { marks: [] };\n  const symbols = [];\n  const { attributes, marks } = plot;\n\n  // populate top-level and scale properties\n  setAttributes(attributes, spec, symbols);\n\n  // populate marks\n  const indices = [];\n  for (const mark of marks) {\n    for (const { type, data, options } of mark.plotSpecs()) {\n      // prepare mark options\n      const { select, ...rest } = options;\n      const opt = SELECT_TRANSFORMS.get(select)?.(rest) ?? rest;\n      const arg = OPTIONS_ONLY_MARKS.has(type) ? [opt] : [data, opt];\n\n      // instantiate Plot mark and add to spec\n      spec.marks.push(Plot[type](...arg));\n      indices.push(mark.index);\n    }\n  }\n\n  // infer labels\n  inferLabels(spec, plot);\n\n  // render plot\n  const svg = Plot.plot(spec);\n\n  // annotate svg with mark indices\n  annotatePlot(svg, indices);\n\n  // set symbol-valued attributes, such as fixed domains\n  setSymbolAttributes(plot, svg, attributes, symbols);\n\n  // initialize interactors\n  for (const interactor of plot.interactors) {\n    await interactor.init(svg);\n  }\n\n  return svg;\n}\n\nfunction setSymbolAttributes(plot, svg, attributes, symbols) {\n  symbols.forEach(key => {\n    const value = attributes[key];\n    if (value === Fixed) {\n      if (!key.endsWith('Domain')) {\n        throw new Error(`Unsupported fixed attribute: ${key}`);\n      }\n      const type = key.slice(0, -'Domain'.length);\n      const scale = svg.scale(type);\n      if (scale?.domain) {\n        plot.setAttribute(key, attributes[`${type}Reverse`]\n          ? scale.domain.slice().reverse()\n          : scale.domain);\n      }\n    } else {\n      throw new Error(`Unrecognized symbol: ${value}`);\n    }\n  });\n}\n\nfunction inferLabels(spec, plot) {\n  const { marks } = plot;\n  inferLabel('x', spec, marks);\n  inferLabel('y', spec, marks);\n  inferLabel('fx', spec, marks);\n  inferLabel('fy', spec, marks);\n}\n\nfunction inferLabel(key, spec, marks) {\n  const scale = spec[key] || {};\n  if (scale.axis === null || scale.label !== undefined) return; // nothing to do\n\n  const fields = marks.map(mark => mark.channelField(key)?.field);\n  if (fields.every(x => x == null)) return; // no columns found\n\n  // check for consistent label\n  let candidate;\n  for (let i = 0; i < fields.length; ++i) {\n    const label = fieldLabel(fields[i]);\n    if (label === undefined) {\n      continue;\n    } else if (candidate === undefined) {\n      candidate = label;\n    } else if (candidate !== label) {\n      candidate = undefined;\n    }\n  }\n  if (candidate === undefined) return;\n\n  // add label to spec\n  spec[key] = { ...scale, label: candidate };\n}\n\nfunction fieldLabel(field) {\n  if (!field) return undefined;\n  switch (field.type) {\n    case 'COLUMN_REF': return field.column;\n    case 'CAST': return fieldLabel(field.expr);\n    case 'FUNCTION':\n      if (field.name === 'make_date') return 'date';\n      break;\n  }\n  return exprLabel(field);\n}\n\nfunction exprLabel(field) {\n  const s = `${field}`.replaceAll('\"', '').replaceAll('(*)', '()');\n  return s.endsWith('()') ? s.slice(0, -2) : s;\n}\n\nfunction annotatePlot(svg, indices) {\n  let index = -1;\n  for (const child of svg.children) {\n    const aria = child.getAttribute('aria-label') || '';\n    const skip = child.nodeName === 'style'\n      || aria.includes('-axis')\n      || aria.includes('-grid');\n    if (!skip) {\n      child.setAttribute('data-index', indices[++index]);\n    }\n  }\n}\n","import { distinct, Synchronizer } from '@uwdata/mosaic-core';\nimport { plotRenderer } from './plot-renderer.js';\n\nconst DEFAULT_ATTRIBUTES = {\n  width: 640,\n  marginLeft: 40,\n  marginRight: 20,\n  marginTop: 20,\n  marginBottom: 30\n};\n\nexport class Plot {\n  /**\n   * @param {HTMLElement} [element]\n   */\n  constructor(element) {\n    /** @type {Record<string, any>} */\n    this.attributes = { ...DEFAULT_ATTRIBUTES };\n    this.listeners = null;\n    this.interactors = [];\n    /** @type {{ legend: import('./legend.js').Legend, include: boolean }[]} */\n    this.legends = [];\n    /** @type {import('./marks/Mark.js').Mark[]} */\n    this.marks = [];\n    /** @type {Set<import('./marks/Mark.js').Mark> | null} */\n    this.markset = null;\n    /** @type {Map<import('@uwdata/mosaic-core').Param, import('./marks/Mark.js').Mark[]>} */\n    this.params = new Map;\n    /** @type {Synchronizer} */\n    this.synch = new Synchronizer();\n\n    /** @type {HTMLElement} */\n    this.element = element || document.createElement('div');\n    this.element.setAttribute('class', 'plot');\n    this.element.style.display = 'flex';\n    Object.assign(this.element, { value: this });\n  }\n\n  margins() {\n    return {\n      left: this.getAttribute('marginLeft'),\n      top: this.getAttribute('marginTop'),\n      bottom: this.getAttribute('marginBottom'),\n      right: this.getAttribute('marginRight')\n    };\n  }\n\n  innerWidth() {\n    const { left, right } = this.margins();\n    return this.getAttribute('width') - left - right;\n  }\n\n  innerHeight(defaultValue = 400) {\n    const { top, bottom } = this.margins();\n    let h = this.getAttribute('height');\n    if (h == null) {\n      // TODO could apply more nuanced logic here?\n      h = maybeAspectRatio(this, top, bottom) || defaultValue;\n      this.setAttribute('height', h, { silent: true });\n    }\n    return h - top - bottom;\n  }\n\n  pending(mark) {\n    this.synch.pending(mark);\n  }\n\n  update(mark) {\n    if (this.synch.ready(mark) && !this.pendingRender) {\n      this.pendingRender = true;\n      requestAnimationFrame(() => this.render());\n    }\n    return this.synch.promise;\n  }\n\n  async render() {\n    this.pendingRender = false;\n    const svg = await plotRenderer(this);\n    const legends = this.legends.flatMap(({ legend, include }) => {\n      const el = legend.init(svg);\n      return include ? el : [];\n    });\n    this.element.replaceChildren(svg, ...legends);\n    this.synch.resolve();\n  }\n\n  /**\n   * @param {string} name The attribute to return.\n   * @returns {*} The value of the attribute.\n   */\n  getAttribute(name) {\n    return this.attributes[name];\n  }\n\n  /**\n   * @param {string} name The name of the attribute to set.\n   * @param {*} value The value to set.\n   * @param {{silent: boolean}} [options] Options for setting the attribute.\n   * @returns {boolean} whether the value changed.\n   */\n  setAttribute(name, value, options) {\n    if (distinct(this.attributes[name], value)) {\n      if (value === undefined) {\n        delete this.attributes[name];\n      } else {\n        this.attributes[name] = value;\n      }\n      if (!options?.silent) {\n        this.listeners?.get(name)?.forEach(cb => cb(name, value));\n      }\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {string} name The attribute name.\n   * @param {*} callback The function to call when the attribute changes.\n   * @returns {this}\n   */\n  addAttributeListener(name, callback) {\n    const map = this.listeners || (this.listeners = new Map);\n    if (!map.has(name)) map.set(name, new Set);\n    map.get(name).add(callback);\n    return this;\n  }\n\n  /**\n   * @param {string} name The attribute name.\n   * @param {*} callback The function to call when the attribute changes.\n   * @returns {void}\n   */\n  removeAttributeListener(name, callback) {\n    return this.listeners?.get(name)?.delete(callback);\n  }\n\n  addParams(mark, paramSet) {\n    const { params } = this;\n    for (const param of paramSet) {\n      if (params.has(param)) {\n        params.get(param).push(mark);\n      } else {\n        params.set(param, [mark]);\n        param.addEventListener('value', () => {\n          return Promise.allSettled(\n            params.get(param).map(mark => mark.initialize())\n          );\n        });\n      }\n    }\n  }\n\n  addMark(mark) {\n    mark.setPlot(this, this.marks.length);\n    this.marks.push(mark);\n    this.markset = null;\n    return this;\n  }\n\n  get markSet() {\n    return this.markset || (this.markset = new Set(this.marks));\n  }\n\n  addInteractor(sel) {\n    this.interactors.push(sel);\n    return this;\n  }\n\n  addLegend(legend, include = true) {\n    legend.setPlot(this);\n    this.legends.push({ legend, include });\n  }\n}\n\nfunction maybeAspectRatio(plot, top, bottom) {\n  const ar = plot.getAttribute('aspectRatio');\n  if (ar == null) return;\n  const x = plot.getAttribute('xDomain');\n  const y = plot.getAttribute('yDomain');\n  if (!x || !y) return;\n  const dx = Math.abs(x[1] - x[0]);\n  const dy = Math.abs(y[1] - y[0]);\n  return dy * plot.innerWidth() / (ar * dx) + top + bottom;\n}\n","import { color } from 'd3';\n\n// Derived from Observable Plots isColor:\n// https://github.com/observablehq/plot/blob/a063b226fec284c5b0e973701fdbbb244ef9ac2c/src/options.js#L462-L477\n\n// Mostly relies on d3-color, with a few extra color keywords. Currently this\n// strictly requires that the value be a string; we might want to apply string\n// coercion here, though note that d3-color instances would need to support\n// valueOf to work correctly with InternMap.\n// https://www.w3.org/TR/SVG11/painting.html#SpecifyingPaint\nexport function isColor(value) {\n  if (typeof value !== \"string\") return false;\n  value = value.toLowerCase().trim();\n  return (\n    value === \"none\" ||\n    value === \"currentcolor\" ||\n    (value.startsWith(\"url(\") && value.endsWith(\")\")) || // <funciri>, e.g. pattern or gradient\n    (value.startsWith(\"var(\") && value.endsWith(\")\")) || // CSS variable\n    color(value) !== null\n  );\n}\n","const constantOptions = new Set([\n  'offset',\n  'order',\n  'reverse',\n  'sort',\n  'label',\n  'anchor',\n  'curve',\n  'tension',\n  'marker',\n  'markerStart',\n  'markerMid',\n  'markerEnd',\n  'textAnchor',\n  'lineAnchor',\n  'lineHeight',\n  'textOverflow',\n  'monospace',\n  'fontFamily',\n  'fontSize',\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'frameAnchor',\n  'strokeLinejoin',\n  'strokeLinecap',\n  'strokeMiterlimit',\n  'strokeDasharray',\n  'strokeDashoffset',\n  'mixBlendMode',\n  'shapeRendering',\n  'imageRendering',\n  'preserveAspectRatio',\n  'interpolate',\n  'crossOrigin',\n  'paintOrder',\n  'pointerEvents',\n  'target',\n  'select'\n]);\n\nexport function isConstantOption(value) {\n  return constantOptions.has(value);\n}\n","const symbols = new Set([\n  'asterisk',\n  'circle',\n  'cross',\n  'diamond',\n  'diamond2',\n  'hexagon',\n  'plus',\n  'square',\n  'square2',\n  'star',\n  'times',\n  'triangle',\n  'triangle2',\n  'wye'\n]);\n\nexport function isSymbol(value) {\n  return symbols.has(`${value}`.toLowerCase());\n}\n","/** @import { SelectQuery } from '@uwdata/mosaic-sql' */\nimport { isParam, MosaicClient, queryFieldInfo, toDataColumns } from '@uwdata/mosaic-core';\nimport { Query, collectParams, column, isAggregateExpression, isColumnParam, isColumnRef, isNode, isParamLike } from '@uwdata/mosaic-sql';\nimport { isColor } from './util/is-color.js';\nimport { isConstantOption } from './util/is-constant-option.js';\nimport { isSymbol } from './util/is-symbol.js';\nimport { Transform } from '../symbols.js';\n\nconst isColorChannel = channel => channel === 'stroke' || channel === 'fill';\nconst isOpacityChannel = channel => /opacity$/i.test(channel);\nconst isSymbolChannel = channel => channel === 'symbol';\nconst isFieldObject = (channel, field) => {\n  return channel !== 'sort' && channel !== 'tip'\n    && field != null && !Array.isArray(field);\n};\nconst fieldEntry = (channel, field) => ({\n  channel,\n  field,\n  as: isColumnRef(field) && !isColumnParam(field) ? field.column : channel\n});\nconst valueEntry = (channel, value) => ({ channel, value });\n\n// checks if a data source is an explicit array of values\n// as opposed to a database table reference\nexport const isDataArray = source => Array.isArray(source);\n\nexport class Mark extends MosaicClient {\n  constructor(type, source, encodings, reqs = {}) {\n    super(source?.options?.filterBy);\n    this.type = type;\n    this.reqs = reqs;\n    this.source = source;\n\n    const channels = this.channels = [];\n    const detail = this.detail = new Set;\n    const params = this.params = new Set;\n\n    if (isDataArray(source)) {\n      this.data = toDataColumns(source);\n    } else if (isParam(source?.table)) {\n      params.add(source.table);\n    }\n\n    const process = (channel, entry) => {\n      const type = typeof entry;\n      if (channel === 'channels') {\n        for (const name in entry) {\n          detail.add(name);\n          process(name, entry[name]);\n        }\n      } else if (type === 'function' && entry[Transform]) {\n        const enc = entry(this, channel);\n        for (const key in enc) {\n          process(key, enc[key]);\n        }\n      } else if (type === 'string') {\n        if (\n          isConstantOption(channel) ||\n          isColorChannel(channel) && isColor(entry) ||\n          isSymbolChannel(channel) && isSymbol(entry)\n        ) {\n          // interpret constants and color/symbol names as values, not fields\n          channels.push(valueEntry(channel, entry));\n        } else {\n          channels.push(fieldEntry(channel, column(entry)));\n        }\n      } else if (isParamLike(entry)) {\n        const c = valueEntry(channel, entry.value);\n        channels.push(c);\n        // @ts-expect-error FIXME\n        entry.addEventListener('value', value => {\n          // update immediately, the value is simply passed to Plot\n          c.value = value;\n          return this.update();\n        });\n      } else if (isNode(entry)) {\n        collectParams(entry).forEach(p => params.add(p));\n        channels.push(fieldEntry(channel, entry))\n      } else if (type === 'object' && isFieldObject(channel, entry)) {\n        channels.push(fieldEntry(channel, entry));\n      } else if (entry !== undefined) {\n        channels.push(valueEntry(channel, entry));\n      }\n    };\n\n    for (const channel in encodings) {\n      process(channel, encodings[channel]);\n    }\n  }\n\n  /**\n   * @param {import('../plot.js').Plot} plot The plot.\n   * @param {number} index\n   */\n  setPlot(plot, index) {\n    this.plot = plot;\n    this.index = index;\n    plot.addParams(this, this.params);\n    if (this.source?.table) this.queryPending();\n  }\n\n  sourceTable() {\n    const table = this.source?.table;\n    return table ? (isParam(table) ? table.value : table) : null;\n  }\n\n  hasOwnData() {\n    return this.source == null || isDataArray(this.source);\n  }\n\n  hasFieldInfo() {\n    return !!this._fieldInfo;\n  }\n\n  channel(channel) {\n    return this.channels.find(c => c.channel === channel);\n  }\n\n  channelField(channel, { exact = false } = {}) {\n    const c = exact\n      ? this.channel(channel)\n      : this.channels.find(c => c.channel.startsWith(channel));\n    return c?.field ? c : null;\n  }\n\n  async prepare() {\n    if (this.hasOwnData()) return null;\n\n    const { channels, reqs } = this;\n    const fields = new Map;\n    for (const { channel, field } of channels) {\n      if (!field) continue;\n      const stats = field.stats?.stats || [];\n      const key = field.stats?.column ?? field;\n      const entry = fields.get(key) ?? fields.set(key, new Set).get(key);\n      stats.forEach(s => entry.add(s));\n      reqs[channel]?.forEach(s => entry.add(s));\n    }\n\n    const table = this.sourceTable();\n    const info = await queryFieldInfo(\n      this.coordinator,\n      Array.from(fields, ([c, s]) => ({ table, column: c, stats: Array.from(s) }))\n    );\n\n    const lookup = Object.fromEntries(info.map(x => [x.column, x]));\n    for (const entry of this.channels) {\n      const { field } = entry;\n      if (field) {\n        Object.assign(entry, lookup[field.stats?.column ?? field]);\n      }\n    }\n    this._fieldInfo = true;\n  }\n\n  /**\n   * Return a query specifying the data needed by this Mark client.\n   * @param {*} [filter] The filtering criteria to apply in the query.\n   * @returns {*} The client query\n   */\n  query(filter = []) {\n    if (this.hasOwnData()) return null;\n    return markQuery(this.channels, this.sourceTable()).where(filter);\n  }\n\n  queryPending() {\n    this.plot.pending(this);\n    return this;\n  }\n\n  /**\n   * Provide query result data to the mark.\n   */\n  queryResult(data) {\n    this.data = toDataColumns(data);\n    return this;\n  }\n\n  update() {\n    return this.plot.update(this);\n  }\n\n  /**\n   * Generate an array of Plot mark specifications.\n   * @returns {object[]}\n   */\n  plotSpecs() {\n    const { type, data, detail, channels } = this;\n    return markPlotSpec(type, detail, channels, data);\n  }\n}\n\n/**\n * Helper method for setting a channel option in a Plot specification.\n * Checks if a constant value or a data field is needed.\n * Also avoids misinterpretation of data values as color names.\n * @param {*} c a visual encoding channel spec\n * @param {object} columns named data column arrays\n * @returns the Plot channel option\n */\nexport function channelOption(c, columns) {\n  // use a scale override for color channels to sidestep\n  // https://github.com/observablehq/plot/issues/1593\n  const value = columns?.[c.as] ?? c.as;\n  return Object.hasOwn(c, 'value') ? c.value\n    : isColorChannel(c.channel) ? { value, scale: 'color' }\n    : isOpacityChannel(c.channel) ? { value, scale: 'opacity' }\n    : value;\n}\n\n/**\n * Default query construction for a mark.\n * Tracks aggregates by checking fields for an aggregate flag.\n * If aggregates are found, groups by all non-aggregate fields.\n * @param {*} channels array of visual encoding channel specs.\n * @param {*} table the table to query.\n * @param {*} skip an optional array of channels to skip.\n *  Mark subclasses can skip channels that require special handling.\n * @returns {SelectQuery} a Query instance\n */\nexport function markQuery(channels, table, skip = []) {\n  const q = Query.from({ source: table });\n  const dims = new Set;\n  let aggr = false;\n\n  for (const c of channels) {\n    const { channel, field, as } = c;\n    if (skip.includes(channel)) continue;\n\n    if (channel === 'orderby') {\n      q.orderby(c.value ?? field);\n    } else if (field) {\n      if (isAggregateExpression(field)) {\n        aggr = true;\n      } else {\n        if (dims.has(as)) continue;\n        dims.add(as);\n      }\n      q.select({ [as]: field });\n    }\n  }\n\n  if (aggr) {\n    q.groupby(Array.from(dims));\n  }\n\n  return q;\n}\n\n\n/**\n * Generate an array of Plot mark specifications.\n * @returns {object[]}\n */\nexport function markPlotSpec(type, detail, channels, data, options = {}) {\n  // @ts-ignore\n  const { numRows: length, values, columns } = data ?? {};\n\n  // populate plot specification options\n  const side = {};\n  for (const c of channels) {\n    const obj = detail.has(c.channel) ? side : options;\n    obj[c.channel] = channelOption(c, columns);\n  }\n  if (detail.size) options.channels = side;\n\n  // if provided raw source values (not objects) pass as-is\n  // otherwise we pass columnar data directy in the options\n  const specData = values ?? (data ? { length } : null);\n  const spec = [{ type, data: specData, options }];\n  return spec;\n}\n","import { scaleTransform } from '@uwdata/mosaic-sql';\n\nexport function channelScale(mark, channel) {\n  const { plot } = mark;\n\n  let scaleType = plot.getAttribute(`${channel}Scale`);\n  if (!scaleType) {\n    const { type } = mark.channelField(channel);\n    scaleType = type === 'date' ? 'time' : 'linear';\n  }\n\n  const options = { type: scaleType };\n  switch (scaleType) {\n    case 'log':\n      options.base = plot.getAttribute(`${channel}Base`) ?? 10;\n      break;\n    case 'pow':\n      options.exponent = plot.getAttribute(`${channel}Exponent`) ?? 1;\n      break;\n    case 'symlog':\n      options.constant = plot.getAttribute(`${channel}Constant`) ?? 1;\n      break;\n  }\n\n  return scaleTransform(options);\n}\n","import { bin1d } from '@uwdata/mosaic-sql';\nimport { channelScale } from './channel-scale.js';\n\n/**\n * Generates a SQL expression for 1D pixel-level binning.\n * Adjusts for scale transformations (log, sqrt, ...).\n * Returns a [binExpression, field] array, where field is the\n * input value being binned. Often the field is just a column\n * name. For time data, fields are mapped to millisecond timestamps.\n */\nexport function binExpr(mark, channel, n, extent, pad = 1, expr) {\n  // get base expression, the channel field unless otherwise given\n  const { field } = mark.channelField(channel);\n  expr = expr ?? field;\n\n  // extract scale information\n  const { type, apply, sqlApply } = channelScale(mark, channel);\n  const reverse = !!mark.plot.getAttribute(`${channel}Reverse`);\n\n  // return expressions for (unrounded) bin index and field\n  const [lo, hi] = extent.map(v => apply(v));\n  const v = sqlApply(expr);\n  const f = type === 'time' || type === 'utc' ? v : expr;\n  return [bin1d(v, lo, hi, n - pad, reverse), f];\n}\n","import { scaleLinear } from 'd3';\nimport { Fixed, Transient } from '../../symbols.js';\nimport { BetweenOpNode, walk } from '@uwdata/mosaic-sql';\n\nexport const xext = { x: ['min', 'max'] };\nexport const yext = { y: ['min', 'max'] };\nexport const xyext = { ...xext, ...yext };\n\nexport function plotExtent(mark, filter, channel, domainAttr, niceAttr) {\n  const { plot } = mark;\n  const domain = plot.getAttribute(domainAttr);\n  const nice = plot.getAttribute(niceAttr);\n\n  if (Array.isArray(domain) && !domain[Transient]) {\n    return domain;\n  } else {\n    const { column, min, max } = mark.channelField(channel);\n    const dom = filteredExtent(filter, column) || (nice\n      ? scaleLinear().domain([min, max]).nice().domain()\n      : [min, max]);\n    if (domain !== Fixed) dom[Transient] = true;\n    plot.setAttribute(domainAttr, dom, { silent: true });\n    return dom;\n  }\n}\n\nexport function extentX(mark, filter) {\n  return plotExtent(mark, filter, 'x', 'xDomain', 'xNice');\n}\n\nexport function extentY(mark, filter) {\n  return plotExtent(mark, filter, 'y', 'yDomain', 'yNice');\n}\n\nexport function filteredExtent(filter, column) {\n  if (!filter) return;\n\n  let lo;\n  let hi;\n\n  [filter].flat().forEach(p => walk(p, (node) => {\n    if (node instanceof BetweenOpNode && `${node.expr}` === column) {\n      // @ts-ignore\n      const extent = (node.extent ?? []).map(v => v?.value ?? v);\n      if (lo == null || extent[0] < lo) lo = extent[0];\n      if (hi == null || extent[1] > hi) hi = extent[1];\n    }\n  }));\n\n  return lo != null && hi != null && lo !== hi ? [lo, hi] : undefined;\n}\n","import { m4 } from '@uwdata/mosaic-sql';\nimport { binExpr } from './util/bin-expr.js';\nimport { filteredExtent } from './util/extent.js';\nimport { Mark } from './Mark.js';\n\nexport class ConnectedMark extends Mark {\n  constructor(type, source, encodings) {\n    const dim = type.endsWith('X') ? 'y' : type.endsWith('Y') ? 'x' : null;\n    const req = dim ? { [dim]: ['count', 'min', 'max'] } : undefined;\n    super(type, source, encodings, req);\n    this.dim = dim;\n  }\n\n  /**\n   * Return a query specifying the data needed by this Mark client.\n   * @param {*} [filter] The filtering criteria to apply in the query.\n   * @returns {*} The client query\n   */\n  query(filter = []) {\n    const { plot, dim, source } = this;\n    let optimize = source.options?.optimize;\n    const q = super.query(filter);\n    if (!dim) return q;\n\n    const ortho = dim === 'x' ? 'y' : 'x';\n    const value = this.channelField(ortho, { exact: true })?.as;\n    const { field, as, type, count, min, max } = this.channelField(dim);\n    const isContinuous = type === 'date' || type === 'number';\n\n    const size = dim === 'x' ? plot.innerWidth() : plot.innerHeight();\n    optimize ??= (count / size) > 10; // threshold for applying M4\n\n    if (optimize && isContinuous && value) {\n      // TODO: handle stacked data\n      const [lo, hi] = filteredExtent(filter, field) || [min, max];\n      const [expr] = binExpr(this, dim, size, [lo, hi], 1, as);\n      const cols = q._select\n        .map(c => c.alias)\n        .filter(c => c !== as && c !== value);\n      return m4(q, expr, as, value, cols);\n    } else {\n      return q.orderby(as);\n    }\n  }\n}\n","import { InternSet, ascending } from 'd3';\n\n/**\n * @typedef {Array | Int8Array | Uint8Array | Uint8ClampedArray\n *  | Int16Array | Uint16Array | Int32Array | Uint32Array\n *  | Float32Array | Float64Array\n * } Arrayish - an Array or TypedArray\n */\n\n/**\n * Generate a new array with designated size and type.\n * @param {number} size The size of the array\n * @param {Arrayish} [proto] A prototype object of the desired array type.\n *  This may be a typed array or standard array (the default).\n * @returns {Arrayish} The generated array.\n */\nexport function array(size, proto = []) {\n  // @ts-expect-error dynamic instantiation\n  return new proto.constructor(size);\n}\n\n/**\n * Create a 1D grid for the given sample values\n * @param {number} size The grid size.\n * @param {Arrayish} index The grid indices for sample points.\n * @param {Arrayish} value The sample point values.\n * @param {Record<string,Arrayish>} columns Named column arrays with groupby values.\n * @param {string[]} groupby The names of columns to group by.\n * @returns {{\n *  numRows: number;\n *  columns: { [key:string]: Arrayish }\n * }} Named column arrays of generated grid values.\n */\nexport function grid1d(size, index, value, columns, groupby) {\n  if (!index?.length) return { numRows: 0, columns: {} };\n  const numRows = index.length;\n  /** @type {{ [key:string]: Arrayish }} */\n  const result = {};\n  const cells = [];\n\n  // if grouped, generate per-row group indices\n  if (groupby?.length) {\n    const group = new Int32Array(numRows);\n    const gvalues = groupby.map(name => columns[name]);\n    const cellMap = {};\n    for (let row = 0; row < numRows; ++row) {\n      const key = gvalues.map(group => group[row]);\n      group[row] = cellMap[key] ??= cells.push(key) - 1;\n    }\n    for (let i = 0; i < groupby.length; ++i) {\n      result[groupby[i]] = cells.map(cell => cell[i]);\n    }\n    const G = result._grid = cells.map(() => array(size, value));\n    for (let row = 0; row < numRows; ++row) {\n      G[group[row]][index[row]] = value[row];\n    }\n  } else {\n    cells.push([]); // single group\n    const [G] = result._grid = [array(size, value)]\n    for (let row = 0; row < numRows; ++row) {\n      G[index[row]] = value[row];\n    }\n  }\n\n  return { numRows: cells.length, columns: result };\n}\n\n/**\n * Create a 2D grid for the given sample values.\n * Can handle multiple grids and groupby values per output row.\n * @param {number} w The grid width.\n * @param {number} h The grid height.\n * @param {Arrayish} index The grid indices for sample points.\n *  An index value is an integer of the form (y * w + x).\n * @param {Record<string,Arrayish>} columns Named column arrays with sample point values.\n * @param {string[]} aggregates The names of aggregate columns to grid.\n * @param {string[]} groupby The names of additional columns to group by.\n * @param {function} [interpolate] A grid interpolation function.\n *  By default sample values are directly copied to output grid arrays.\n * @returns {{\n *  numRows: number;\n *  columns: { [key:string]: Arrayish }\n * }} Named column arrays of generated grid values.\n */\nexport function grid2d(w, h, index, columns, aggregates, groupby, interpolate) {\n  if (!index?.length) return { numRows: 0, columns: {} };\n  const numRows = index.length;\n  const size = w * h;\n  const values = aggregates.map(name => columns[name]);\n  /** @type {{ [key:string]: Arrayish }} */\n  const result = {};\n  const cells = [];\n  const group = new Int32Array(numRows);\n\n  // if grouped, generate per-row group indices\n  if (groupby?.length) {\n    const gvalues = groupby.map(name => columns[name]);\n    const cellMap = {};\n    for (let row = 0; row < numRows; ++row) {\n      const key = gvalues.map(group => group[row]);\n      group[row] = cellMap[key] ??= cells.push(key) - 1;\n    }\n    for (let i = 0; i < groupby.length; ++i) {\n      result[groupby[i]] = cells.map(cell => cell[i]);\n    }\n  } else {\n    cells.push([]); // single group\n  }\n\n  if (interpolate) {\n    // prepare index arrays, then interpolate grid values\n    const X = index.map(k => k % w);\n    const Y = index.map(k => Math.floor(k / w));\n    const I = cells.map(() => []);\n    for (let row = 0; row < numRows; ++row) {\n      I[group[row]].push(row);\n    }\n    aggregates.forEach((name, i) => {\n      const V = values[i];\n      result[name] = cells.map((_, j) => interpolate(I[j], w, h, X, Y, V));\n    });\n  } else {\n    // no interpolation, copy values directly to grids\n    aggregates.forEach((name, i) => {\n      const V = values[i];\n      const G = result[name] = cells.map(() => array(size, V));\n      for (let row = 0; row < numRows; ++row) {\n        G[group[row]][index[row]] = V[row];\n      }\n    });\n  }\n\n  return { numRows: cells.length, columns: result };\n}\n\nexport function gridDomainContinuous(grids) {\n  let lo = Infinity, hi = -Infinity;\n  grids.forEach(G => {\n    const n = G.length;\n    for (let i = 0; i < n; ++i) {\n      const v = G[i];\n      if (v < lo) lo = v;\n      if (v > hi) hi = v;\n    }\n  });\n  return (Number.isFinite(lo) && Number.isFinite(hi)) ? [lo, hi] : [0, 1];\n}\n\nexport function gridDomainDiscrete(grids) {\n  // TODO: sort options?\n  const values = new InternSet();\n  grids.forEach(G => {\n    const n = G.length;\n    for (let i = 0; i < n; ++i) {\n      values.add(G[i]);\n    }\n  });\n  return Array.from(values).sort(ascending);\n}\n","import { isParam } from '@uwdata/mosaic-core';\n\n/**\n * Utility to check if a value is a Param, and if so, bind a listener.\n * @param {*} value A potentially Param-typed value.\n * @param {(value: *) => Promise|void} update Update callback\n * @returns the input value or (if a Param) the current Param value.\n */\nexport function handleParam(value, update) {\n  return isParam(value)\n    ? (value.addEventListener('value', update), value.value)\n    : value;\n}\n","// Deriche's approximation of Gaussian smoothing\n// Adapted from Getreuer's C implementation (BSD license)\n// https://www.ipol.im/pub/art/2013/87/gaussian_20131215.tgz\n// http://dev.ipol.im/~getreuer/code/doc/gaussian_20131215_doc/gaussian__conv__deriche_8c.html\n\nexport function dericheConfig(sigma, negative = false) {\n  // compute causal filter coefficients\n  const a = new Float64Array(5);\n  const bc = new Float64Array(4);\n  dericheCausalCoeff(a, bc, sigma);\n\n  // numerator coefficients of the anticausal filter\n  const ba = Float64Array.of(\n    0,\n    bc[1] - a[1] * bc[0],\n    bc[2] - a[2] * bc[0],\n    bc[3] - a[3] * bc[0],\n    -a[4] * bc[0]\n  );\n\n  // impulse response sums\n  const accum_denom = 1.0 + a[1] + a[2] + a[3] + a[4];\n  const sum_causal = (bc[0] + bc[1] + bc[2] + bc[3]) / accum_denom;\n  const sum_anticausal = (ba[1] + ba[2] + ba[3] + ba[4]) / accum_denom;\n\n  // coefficients object\n  return {\n    sigma,\n    negative,\n    a,\n    b_causal: bc,\n    b_anticausal: ba,\n    sum_causal,\n    sum_anticausal\n  };\n}\n\nfunction dericheCausalCoeff(a_out, b_out, sigma) {\n  const K = 4;\n\n  const alpha = Float64Array.of(\n    0.84, 1.8675,\n    0.84, -1.8675,\n    -0.34015, -0.1299,\n    -0.34015, 0.1299\n  );\n\n  const x1 = Math.exp(-1.783 / sigma);\n  const x2 = Math.exp(-1.723 / sigma);\n  const y1 = 0.6318 / sigma;\n  const y2 = 1.997 / sigma;\n  const beta = Float64Array.of(\n    -x1 * Math.cos( y1), x1 * Math.sin( y1),\n    -x1 * Math.cos(-y1), x1 * Math.sin(-y1),\n    -x2 * Math.cos( y2), x2 * Math.sin( y2),\n    -x2 * Math.cos(-y2), x2 * Math.sin(-y2)\n  );\n\n  const denom = sigma * 2.5066282746310007;\n\n  // initialize b/a = alpha[0] / (1 + beta[0] z^-1)\n  const b = Float64Array.of(alpha[0], alpha[1], 0, 0, 0, 0, 0, 0);\n  const a = Float64Array.of(1, 0, beta[0], beta[1], 0, 0, 0, 0, 0, 0);\n\n  let j, k;\n\n  for (k = 2; k < 8; k += 2) {\n    // add kth term, b/a += alpha[k] / (1 + beta[k] z^-1)\n    b[k]     = beta[k] * b[k - 2] - beta[k + 1] * b[k - 1];\n    b[k + 1] = beta[k] * b[k - 1] + beta[k + 1] * b[k - 2];\n    for (j = k - 2; j > 0; j -= 2) {\n      b[j]     += beta[k] * b[j - 2] - beta[k + 1] * b[j - 1];\n      b[j + 1] += beta[k] * b[j - 1] + beta[k + 1] * b[j - 2];\n    }\n    for (j = 0; j <= k; j += 2) {\n      b[j]     += alpha[k] * a[j]     - alpha[k + 1] * a[j + 1];\n      b[j + 1] += alpha[k] * a[j + 1] + alpha[k + 1] * a[j];\n    }\n\n    a[k + 2] = beta[k] * a[k]     - beta[k + 1] * a[k + 1];\n    a[k + 3] = beta[k] * a[k + 1] + beta[k + 1] * a[k];\n    for (j = k; j > 0; j -= 2) {\n      a[j]     += beta[k] * a[j - 2] - beta[k + 1] * a[j - 1];\n      a[j + 1] += beta[k] * a[j - 1] + beta[k + 1] * a[j - 2];\n    }\n  }\n\n  for (k = 0; k < K; ++k) {\n    j = k << 1;\n    b_out[k] = b[j] / denom;\n    a_out[k + 1] = a[j + 2];\n  }\n}\n\nexport function dericheConv2d(cx, cy, grid, [nx, ny]) {\n  // allocate buffers\n  const yc = new Float64Array(Math.max(nx, ny)); // causal\n  const ya = new Float64Array(Math.max(nx, ny)); // anticausal\n  const h = new Float64Array(5); // q + 1\n  const d = new Float64Array(grid.length);\n\n  // convolve rows\n  for (let row = 0, r0 = 0; row < ny; ++row, r0 += nx) {\n    const dx = d.subarray(r0);\n    dericheConv1d(cx, grid.subarray(r0), nx, 1, yc, ya, h, dx);\n  }\n\n  // convolve columns\n  for (let c0 = 0; c0 < nx; ++c0) {\n    const dy = d.subarray(c0);\n    dericheConv1d(cy, dy, ny, nx, yc, ya, h, dy);\n  }\n\n  return d;\n}\n\nexport function dericheConv1d(\n  c, src, N,\n  stride = 1,\n  y_causal = new Float64Array(N),\n  y_anticausal = new Float64Array(N),\n  h = new Float64Array(5), // q + 1\n  d = y_causal,\n  init = dericheInitZeroPad\n) {\n  const stride_2 = stride * 2;\n  const stride_3 = stride * 3;\n  const stride_4 = stride * 4;\n  const stride_N = stride * N;\n  let i, n;\n\n  // initialize causal filter on the left boundary\n  init(\n    y_causal, src, N, stride,\n    c.b_causal, 3, c.a, 4, c.sum_causal, h, c.sigma\n  );\n\n  // filter the interior samples using a 4th order filter. Implements:\n  // for n = K, ..., N - 1,\n  //   y^+(n) = \\sum_{k=0}^{K-1} b^+_k src(n - k)\n  //          - \\sum_{k=1}^K a_k y^+(n - k)\n  // variable i tracks the offset to the nth sample of src, it is\n  // updated together with n such that i = stride * n.\n  for (n = 4, i = stride_4; n < N; ++n, i += stride) {\n    y_causal[n] = c.b_causal[0] * src[i]\n      + c.b_causal[1] * src[i - stride]\n      + c.b_causal[2] * src[i - stride_2]\n      + c.b_causal[3] * src[i - stride_3]\n      - c.a[1] * y_causal[n - 1]\n      - c.a[2] * y_causal[n - 2]\n      - c.a[3] * y_causal[n - 3]\n      - c.a[4] * y_causal[n - 4];\n  }\n\n  // initialize the anticausal filter on the right boundary\n  // dest, src, N, stride, b, p, a, q, sum, h\n  init(\n    y_anticausal, src, N, -stride,\n    c.b_anticausal, 4, c.a, 4, c.sum_anticausal, h, c.sigma\n  );\n\n  // similar to the causal filter above, the following implements:\n  // for n = K, ..., N - 1,\n  //   y^-(n) = \\sum_{k=1}^K b^-_k src(N - n - 1 - k)\n  //          - \\sum_{k=1}^K a_k y^-(n - k)\n  // variable i is updated such that i = stride * (N - n - 1).\n  for (n = 4, i = stride_N - stride * 5; n < N; ++n, i -= stride) {\n    y_anticausal[n] = c.b_anticausal[1] * src[i + stride]\n      + c.b_anticausal[2] * src[i + stride_2]\n      + c.b_anticausal[3] * src[i + stride_3]\n      + c.b_anticausal[4] * src[i + stride_4]\n      - c.a[1] * y_anticausal[n - 1]\n      - c.a[2] * y_anticausal[n - 2]\n      - c.a[3] * y_anticausal[n - 3]\n      - c.a[4] * y_anticausal[n - 4];\n  }\n\n  // sum the causal and anticausal responses to obtain the final result\n  if (c.negative) {\n    // do not threshold if the input grid includes negative values\n    for (n = 0, i = 0; n < N; ++n, i += stride) {\n      d[i] = y_causal[n] + y_anticausal[N - n - 1];\n    }\n  } else {\n    // threshold to prevent small negative values due to floating point error\n    for (n = 0, i = 0; n < N; ++n, i += stride) {\n      d[i] = Math.max(0, y_causal[n] + y_anticausal[N - n - 1]);\n    }\n  }\n\n  return d;\n}\n\nexport function dericheInitZeroPad(\n  dest, src, N, stride, b, p, a, q,\n  sum, h, sigma, tol = 0.5\n) {\n  const stride_N = Math.abs(stride) * N;\n  const off = stride < 0 ? stride_N + stride : 0;\n  let i, n, m;\n\n  // compute the first q taps of the impulse response, h_0, ..., h_{q-1}\n  for (n = 0; n <= q; ++n) {\n    h[n] = (n <= p) ? b[n] : 0;\n    for (m = 1; m <= q && m <= n; ++m) {\n      h[n] -= a[m] * h[n - m];\n    }\n  }\n\n  // compute dest_m = sum_{n=1}^m h_{m-n} src_n, m = 0, ..., q-1\n  // note: q == 4\n  for (m = 0; m < q; ++m) {\n    for (dest[m] = 0, n = 1; n <= m; ++n) {\n      i = off + stride * n;\n      if (i >= 0 && i < stride_N) {\n        dest[m] += h[m - n] * src[i];\n      }\n    }\n  }\n\n  const cur = src[off];\n  const max_iter = Math.ceil(sigma * 10);\n  for (n = 0; n < max_iter; ++n) {\n    /* dest_m = dest_m + h_{n+m} src_{-n} */\n    for (m = 0; m < q; ++m) {\n      dest[m] += h[m] * cur;\n    }\n\n    sum -= Math.abs(h[0]);\n    if (sum <= tol) break;\n\n    /* Compute the next impulse response tap, h_{n+q} */\n    h[q] = (n + q <= p) ? b[n + q] : 0;\n    for (m = 1; m <= q; ++m) {\n      h[q] -= a[m] * h[q - m];\n    }\n\n    /* Shift the h array for the next iteration */\n    for (m = 0; m < q; ++m) {\n      h[m] = h[m + 1];\n    }\n  }\n\n  return;\n}\n","/** @import { ExprNode } from '@uwdata/mosaic-sql' */\nimport { interpolatorBarycentric, interpolateNearest, interpolatorRandomWalk } from '@observablehq/plot';\nimport { toDataColumns } from '@uwdata/mosaic-core';\nimport { Query, bin2d, binLinear2d, collectColumns, count, isAggregateExpression, isBetween, lt, lte, sum } from '@uwdata/mosaic-sql';\nimport { Transient } from '../symbols.js';\nimport { binExpr } from './util/bin-expr.js';\nimport { dericheConfig, dericheConv2d } from './util/density.js';\nimport { extentX, extentY, xyext } from './util/extent.js';\nimport { grid2d } from './util/grid.js';\nimport { handleParam } from './util/handle-param.js';\nimport { Mark } from './Mark.js';\n\nexport const DENSITY = 'density';\n\nexport class Grid2DMark extends Mark {\n  constructor(type, source, options) {\n    const {\n      bandwidth = 0,\n      interpolate = 'none',\n      pixelSize = 1,\n      pad = 1,\n      width,\n      height,\n      ...channels\n    } = options;\n\n    const densityMap = createDensityMap(channels);\n    super(type, source, channels, xyext);\n    this.densityMap = densityMap;\n\n    /** @type {number} */\n    this.bandwidth = handleParam(bandwidth, value => {\n      this.bandwidth = value;\n      return this.grids ? this.convolve().update() : null;\n    });\n\n    /** @type {string} */\n    this.interpolate = handleParam(interpolate, value => {\n      return (this.interpolate = value, this.requestUpdate());\n    });\n\n    /** @type {number} */\n    this.pixelSize = handleParam(pixelSize, value => {\n      return (this.pixelSize = value, this.requestUpdate());\n    });\n\n    /** @type {number} */\n    this.pad = handleParam(pad, value => {\n      return (this.pad = value, this.requestUpdate());\n    });\n\n    /** @type {number|undefined} */\n    this.width = handleParam(width, value => {\n      return (this.width = value, this.requestUpdate());\n    });\n\n    /** @type {number|undefined} */\n    this.height = handleParam(height, value => {\n      return (this.height = value, this.requestUpdate());\n    });\n  }\n\n  /**\n   * @param {import('../plot.js').Plot} plot The plot.\n   * @param {number} index\n   */\n  setPlot(plot, index) {\n    const update = () => { if (this.hasFieldInfo()) this.requestUpdate(); };\n    plot.addAttributeListener('xDomain', update);\n    plot.addAttributeListener('yDomain', update);\n    super.setPlot(plot, index);\n  }\n\n  get filterStable() {\n    const xdom = this.plot.getAttribute('xDomain');\n    const ydom = this.plot.getAttribute('yDomain');\n    return xdom && ydom && !xdom[Transient] && !ydom[Transient];\n  }\n\n  query(filter = []) {\n    const { interpolate, pad, channels, densityMap } = this;\n    const [x0, x1] = this.extentX = extentX(this, filter);\n    const [y0, y1] = this.extentY = extentY(this, filter);\n    const [nx, ny] = this.bins = this.binDimensions();\n    const [x, bx] = binExpr(this, 'x', nx, [x0, x1], pad);\n    const [y, by] = binExpr(this, 'y', ny, [y0, y1], pad);\n\n    // with padded bins, include the entire domain extent\n    // if the bins are flush, exclude the extent max\n    const bounds = pad\n      ? [isBetween(bx, [+x0, +x1]), isBetween(by, [+y0, +y1])]\n      : [lte(+x0, bx), lt(bx, +x1), lte(+y0, by), lt(by, +y1)];\n\n    const q = Query\n      .from(this.sourceTable())\n      .where(filter.concat(bounds));\n\n    /** @type {string[]} */\n    const groupby = this.groupby = [];\n    /** @type {Record<string, ExprNode>} */\n    const aggrMap = {};\n    for (const c of channels) {\n      if (Object.hasOwn(c, 'field')) {\n        const { as, channel, field } = c;\n        if (isAggregateExpression(field)) {\n          // include custom aggregate\n          aggrMap[channel] = field;\n          densityMap[channel] = true;\n        } else if (channel === 'weight') {\n          // compute weighted density\n          aggrMap[DENSITY] = sum(field);\n        } else if (channel !== 'x' && channel !== 'y') {\n          // add groupby field\n          q.select({ [as]: field });\n          groupby.push(as);\n        }\n      }\n    }\n    const aggr = this.aggr = Object.keys(aggrMap);\n\n    // check for incompatible encodings\n    if (aggrMap.density && aggr.length > 1) {\n      throw new Error('Weight option can not be used with custom aggregates.');\n    }\n\n    // if no aggregates, default to count density\n    if (!aggr.length) {\n      aggr.push(DENSITY);\n      aggrMap[DENSITY] = count();\n    }\n\n    // generate grid binning query\n    if (interpolate === 'linear') {\n      if (aggr.length > 1) {\n        throw new Error('Linear binning not applicable to multiple aggregates.');\n      }\n      if (!aggrMap[DENSITY]) {\n        throw new Error('Linear binning not applicable to custom aggregates.');\n      }\n      const weight = collectColumns(aggrMap[DENSITY])[0];\n      return binLinear2d(q, x, y, weight, nx, groupby);\n    } else {\n      return bin2d(q, x, y, aggrMap, nx, groupby);\n    }\n  }\n\n  /**\n   * @returns {[number, number]} The bin dimensions.\n   */\n  binDimensions() {\n    const { plot, pixelSize, width, height } = this;\n    return [\n      width ?? Math.round(plot.innerWidth() / pixelSize),\n      height ?? Math.round(plot.innerHeight() / pixelSize)\n    ];\n  }\n\n  queryResult(data) {\n    const [w, h] = this.bins;\n    const interp = maybeInterpolate(this.interpolate);\n    // @ts-expect-error Correct the data column type\n    const { columns } = toDataColumns(data);\n    this.grids0 = grid2d(w, h, columns.index, columns, this.aggr, this.groupby, interp);\n    return this.convolve();\n  }\n\n  convolve() {\n    const { aggr, bandwidth, bins, grids0, plot } = this;\n\n    // no smoothing as default fallback\n    this.grids = grids0;\n\n    if (bandwidth > 0 && grids0.numRows > 0) {\n      // determine which grid to smooth\n      const prop = aggr.length === 1 ? aggr[0]\n        : aggr.includes(DENSITY) ? DENSITY\n        : null;\n\n      // bail if no compatible grid found\n      if (!prop) {\n        console.warn('No compatible grid found for smoothing.');\n        return this;\n      }\n      const g = grids0.columns[prop];\n\n      // apply smoothing, bandwidth uses units of screen pixels\n      const w = plot.innerWidth();\n      const h = plot.innerHeight();\n      const [nx, ny] = bins;\n      const neg = g.some(grid => grid.some(v => v < 0));\n      const configX = dericheConfig(bandwidth * (nx - 1) / w, neg);\n      const configY = dericheConfig(bandwidth * (ny - 1) / h, neg);\n      this.grids = {\n        numRows: grids0.numRows,\n        columns: {\n          ...grids0.columns,\n          // @ts-expect-error array types\n          [prop]: g.map(grid => dericheConv2d(configX, configY, grid, bins))\n        }\n      };\n    }\n\n    return this;\n  }\n}\n\n/**\n * Extract channels that explicitly encode computed densities.\n */\nfunction createDensityMap(channels) {\n  const densityMap = {};\n  for (const key in channels) {\n    if (channels[key] === 'density') {\n      delete channels[key];\n      densityMap[key] = true;\n    }\n  }\n  return densityMap;\n}\n\nfunction maybeInterpolate(interpolate = 'none') {\n  if (typeof interpolate === 'function') return interpolate;\n  switch (interpolate.toLowerCase()) {\n    case 'none':\n    case 'linear':\n      return undefined; // no special interpolation need\n    case 'nearest':\n      return interpolateNearest;\n    case 'barycentric':\n      return interpolatorBarycentric();\n    case 'random-walk':\n      return interpolatorRandomWalk();\n  }\n  throw new Error(`invalid interpolate: ${interpolate}`);\n}\n","import { contours } from 'd3';\nimport { gridDomainContinuous } from './util/grid.js';\nimport { handleParam } from './util/handle-param.js';\nimport { Grid2DMark } from './Grid2DMark.js';\nimport { channelOption } from './Mark.js';\n\nexport class ContourMark extends Grid2DMark {\n  constructor(source, options) {\n    const { thresholds = 10, ...channels } = options;\n    super('geo', source, {\n      bandwidth: 20,\n      interpolate: 'linear',\n      pixelSize: 2,\n      ...channels\n    });\n\n    /** @type {number|number[]} */\n    this.thresholds = handleParam(thresholds, value => {\n      this.thresholds = value;\n      return this.grids ? this.contours().update() : null;\n    });\n  }\n\n  convolve() {\n    return super.convolve().contours();\n  }\n\n  contours() {\n    const { bins, densityMap, grids, thresholds, plot } = this;\n    const { numRows, columns } = grids;\n\n    let t = thresholds;\n    let tz;\n    if (Array.isArray(t)) {\n      tz = t;\n    } else {\n      const [, hi] = gridDomainContinuous(columns.density);\n      tz = Array.from({length: t - 1}, (_, i) => (hi * (i + 1)) / t);\n    }\n\n    if (densityMap.fill || densityMap.stroke) {\n      if (this.plot.getAttribute('colorScale') !== 'log') {\n        this.plot.setAttribute('colorZero', true);\n      }\n    }\n\n    // transform contours into data space coordinates\n    // so we play nice with scale domains & axes\n    const [nx, ny] = bins;\n    const [x0, x1] = plot.getAttribute('xDomain');\n    const [y0, y1] = plot.getAttribute('yDomain');\n    const sx = (x1 - x0) / nx;\n    const sy = (y1 - y0) / ny;\n    const xo = +x0;\n    const yo = +y0;\n    const x = v => xo + v * sx;\n    const y = v => yo + v * sy;\n    const contour = contours().size(bins);\n\n    // generate contours\n    const data = this.contourData = Array(numRows * tz.length);\n    const { density, ...groupby } = columns;\n    const groups = Object.entries(groupby);\n    for (let i = 0, k = 0; i < numRows; ++i) {\n      const grid = density[i];\n      const rest = groups.reduce((o, [name, col]) => (o[name] = col[i], o), {});\n      for (let j = 0; j < tz.length; ++j, ++k) {\n        // annotate contour geojson with cell groupby fields\n        // d3-contour already adds a threshold \"value\" property\n        data[k] = Object.assign(\n          transform(contour.contour(grid, tz[j]), x, y),\n          rest\n        );\n      }\n    }\n\n    return this;\n  }\n\n  plotSpecs() {\n    const { type, channels, densityMap, contourData: data } = this;\n    const options = {};\n    for (const c of channels) {\n      const { channel } = c;\n      if (channel !== 'x' && channel !== 'y') {\n        options[channel] = channelOption(c);\n      }\n    }\n    // d3-contour adds a threshold \"value\" property\n    // here we ensure requested density values are encoded\n    for (const channel in densityMap) {\n      if (!densityMap[channel]) continue;\n      options[channel] = channelOption({ channel, as: 'value' });\n    }\n    return [{ type, data, options }];\n  }\n}\n\nfunction transform(geometry, x, y) {\n  function transformPolygon(coordinates) {\n    coordinates.forEach(transformRing);\n  }\n\n  function transformRing(coordinates) {\n    coordinates.forEach(transformPoint);\n  }\n\n  function transformPoint(coordinates) {\n    coordinates[0] = x(coordinates[0]);\n    coordinates[1] = y(coordinates[1]);\n  }\n\n  geometry.coordinates.forEach(transformPolygon);\n  return geometry;\n}\n","export function indices(length) {\n  return Array.from({ length }, (_, i) => i);\n}\n\nexport function permute(data, order) {\n  const ord = order.reduce((acc, val, i) => (acc[val] = i, acc), {});\n  const idx = indices(data.length);\n  idx.sort((a, b) => ord[data[a]] - ord[data[b]]);\n  return idx;\n}\n","import { rgb } from 'd3';\n\nexport function createCanvas(w, h) {\n  if (typeof document !== 'undefined') {\n    const c = document.createElement('canvas');\n    c.setAttribute('width', w);\n    c.setAttribute('height', h);\n    return c;\n  }\n  throw new Error('Can not create a canvas instance.');\n}\n\nexport function alphaConstant(v = 1) {\n  const a = (255 * v) | 0;\n\n  // rasterize\n  return (data, w, h) => {\n    for (let j = 0, k = 0; j < h; ++j) {\n      for (let i = 0; i < w; ++i, k += 4) {\n        data[k + 3] = a;\n      }\n    }\n  };\n}\n\nexport function alphaScheme(scale) {\n  const { apply } = scale;\n\n  // rasterize\n  return (data, w, h, grid) => {\n    for (let j = 0, k = 0; j < h; ++j) {\n      for (let i = 0, row = (h - j - 1) * w; i < w; ++i, k += 4) {\n        data[k + 3] = (255 * apply(grid[i + row])) | 0;\n      }\n    }\n  };\n}\n\nexport function colorConstant(v = {}) {\n  const { r = 0, g = 0, b = 0, opacity = 1 } = typeof v === 'string' ? rgb(v) : v;\n  const c = new Uint8ClampedArray([r, g, b, (255 * opacity) | 0]);\n\n  // rasterize\n  return (data, w, h) => {\n    for (let j = 0, k = 0; j < h; ++j) {\n      for (let i = 0; i < w; ++i, k += 4) {\n        data[k + 0] = c[0];\n        data[k + 1] = c[1];\n        data[k + 2] = c[2];\n        data[k + 3] = c[3];\n      }\n    }\n  };\n}\n\nexport function colorCategory(scale) {\n  const { domain, range } = scale;\n  const idx = Object.create(null);\n  const p = new Uint8ClampedArray(4 * domain.length);\n  const n = domain.length - 1;\n  const m = range.length;\n\n  // build palette and index lookup map\n  for (let i = 0; i <= n; ++i) {\n    const v = range[i % m];\n    const { r, g, b, opacity = 1 } = typeof v === 'string' ? rgb(v) : v;\n    const k = i << 2;\n    p[k + 0] = r;\n    p[k + 1] = g;\n    p[k + 2] = b;\n    p[k + 3] = (255 * opacity) | 0;\n    idx[domain[i]] = k;\n  }\n\n  // rasterize\n  return (data, w, h, grid) => {\n    if (grid.map) {\n      // categorical values in grid\n      for (let j = 0, k = 0; j < h; ++j) {\n        for (let i = 0, row = (h - j - 1) * w; i < w; ++i, k += 4) {\n          const c = idx[grid[i + row]];\n          data[k + 0] = p[c + 0];\n          data[k + 1] = p[c + 1];\n          data[k + 2] = p[c + 2];\n          data[k + 3] = p[c + 3];\n        }\n      }\n    } else {\n      // categorical value for group\n      const c = idx[grid];\n      for (let j = 0, k = 0; j < h; ++j) {\n        for (let i = 0; i < w; ++i, k += 4) {\n          data[k + 0] = p[c + 0];\n          data[k + 1] = p[c + 1];\n          data[k + 2] = p[c + 2];\n          data[k + 3] = p[c + 3];\n        }\n      }\n    }\n  };\n}\n\nexport function colorScheme(size, scale, frac) {\n  const { interpolate } = scale;\n  const p = new Uint8ClampedArray(4 * size);\n  const n = size - 1;\n\n  // build palette\n  for (let i = 0; i <= n; ++i) {\n    const v = interpolate(i / n);\n    const { r, g, b, opacity = 1 } = typeof v === 'string' ? rgb(v) : v;\n    const k = i << 2;\n    p[k + 0] = r;\n    p[k + 1] = g;\n    p[k + 2] = b;\n    p[k + 3] = (255 * opacity) | 0;\n  }\n\n  // rasterize\n  return (data, w, h, grid) => {\n    for (let j = 0, k = 0; j < h; ++j) {\n      for (let i = 0, row = (h - j - 1) * w; i < w; ++i, k += 4) {\n        const c = (n * frac(grid[i + row])) << 2;\n        data[k + 0] = p[c + 0];\n        data[k + 1] = p[c + 1];\n        data[k + 2] = p[c + 2];\n        data[k + 3] = p[c + 3];\n      }\n    }\n  };\n}\n","import { ascending } from 'd3';\nimport { scale } from '@observablehq/plot';\nimport { gridDomainContinuous, gridDomainDiscrete } from './util/grid.js';\nimport { isColor } from './util/is-color.js';\nimport { indices, permute } from './util/permute.js';\nimport { alphaScheme, alphaConstant, colorConstant, colorCategory, colorScheme, createCanvas } from './util/raster.js';\nimport { DENSITY, Grid2DMark } from './Grid2DMark.js';\nimport { Fixed, Transient } from '../symbols.js';\n\n/**\n * Raster image mark. Data is binned to a grid based on the x and y options.\n * The grid cells are then colored to form an image.\n * The raster grid size defaults to the pixel width/height of the\n * plot. The pixelSize option (default 1) changes the grid cell to pixel\n * ratio. For example, a pixelSize of 0.5 will create a larger raster\n * for higher resolution images on retina displays. The width and height\n * options set the grid dimensions directly, overriding other options.\n * The raster grid can optionally be smoothed (blurred) by setting\n * the bandwidth option.\n */\nexport class RasterMark extends Grid2DMark {\n  constructor(source, options) {\n    super('image', source, options);\n    this.image = null;\n  }\n\n  setPlot(plot, index) {\n    const update = () => { if (this.hasFieldInfo()) this.rasterize(); };\n    plot.addAttributeListener('schemeColor', update);\n    super.setPlot(plot, index);\n  }\n\n  convolve() {\n    return super.convolve().rasterize();\n  }\n\n  rasterize() {\n    const { bins, grids } = this;\n    const [ w, h ] = bins;\n    const { numRows, columns } = grids;\n\n    // raster data\n    const { canvas, ctx, img } = imageData(this, w, h);\n\n    // color + opacity encodings\n    const { alpha, alphaProp, color, colorProp } = rasterEncoding(this);\n    const alphaData = columns[alphaProp] ?? [];\n    const colorData = columns[colorProp] ?? [];\n\n    // determine raster order\n    const idx = numRows > 1 && colorProp && this.groupby?.includes(colorProp)\n      ? permute(colorData, this.plot.getAttribute('colorDomain'))\n      : indices(numRows);\n\n    // generate rasters\n    this.data = {\n      numRows,\n      columns: {\n        src: Array.from({ length: numRows }, (_, i) => {\n          color?.(img.data, w, h, colorData[idx[i]]);\n          alpha?.(img.data, w, h, alphaData[idx[i]]);\n          ctx.putImageData(img, 0, 0);\n          return canvas.toDataURL();\n        })\n      }\n    };\n\n    return this;\n  }\n\n  plotSpecs() {\n    // @ts-expect-error Correct the data column type\n    const { type, plot, data: { numRows: length, columns } } = this;\n    const options = {\n      src: columns.src,\n      width: plot.innerWidth(),\n      height: plot.innerHeight(),\n      preserveAspectRatio: 'none',\n      imageRendering: this.channel('imageRendering')?.value,\n      frameAnchor: 'middle'\n    };\n    return [{ type, data: { length }, options }];\n  }\n}\n\n/**\n * Density heatmap image.\n * This is just a raster mark with default options for\n * accurate binning and smoothing for density estimation.\n */\nexport class HeatmapMark extends RasterMark {\n  constructor(source, options) {\n    super(source, {\n      bandwidth: 20,\n      interpolate: 'linear',\n      pixelSize: 2,\n      ...options\n    });\n  }\n}\n\n/**\n * Utility method to generate color and alpha encoding helpers.\n * The returned methods can write directly to a pixel raster.\n * @param {RasterMark} mark\n */\nexport function rasterEncoding(mark) {\n  const { aggr, densityMap, groupby, plot } = mark;\n  const hasDensity = aggr.includes(DENSITY);\n  const hasFillOpacity = aggr.includes('fillOpacity');\n  const fillEntry = mark.channel('fill');\n  const opacEntry = mark.channel('fillOpacity');\n\n  // check constraints, raise errors\n  if (aggr.length > 2 || (hasDensity && hasFillOpacity)) {\n    throw new Error('Invalid raster encodings. Try dropping an aggregate?');\n  }\n  if (groupby.includes(opacEntry?.as)) {\n    throw new Error('Raster fillOpacity must be an aggregate or constant.');\n  }\n\n  // determine fill encoding channel use\n  const fill = densityMap.fill || aggr.includes('fill') ? 'grid'\n    : groupby.includes(fillEntry?.as) ? 'group' // groupby\n    : isColor(fillEntry?.value) ? fillEntry.value // constant\n    : hasDensity && plot.getAttribute('colorScheme') ? 'grid'\n    : undefined;\n\n  // determine fill opacity encoding channel use\n  const opac = densityMap.fillOpacity || aggr.includes('fillOpacity') ? 'grid'\n    : typeof opacEntry?.value === 'number' ? opacEntry.value // constant\n    : hasDensity && fill !== 'grid' ? 'grid'\n    : undefined;\n\n  if (fill !== 'grid' && opac !== 'grid') {\n    // TODO: use a threshold-based encoding?\n    throw new Error('Raster mark missing density values.');\n  }\n\n  const colorProp = fillEntry?.as ?? (fill === 'grid' ? DENSITY : null);\n  const alphaProp = opacEntry?.as ?? (opac === 'grid' ? DENSITY : null);\n  const color = fill !== 'grid' && fill !== 'group'\n    ? colorConstant(fill)\n    : colorScale(mark, colorProp);\n  const alpha = opac !== 'grid'\n    ? alphaConstant(opac)\n    : alphaScale(mark, alphaProp);\n\n  return { alphaProp, colorProp, alpha, color };\n}\n\n/**\n * Generate an opacity rasterizer for a bitmap alpha channel.\n * @param {RasterMark} mark The mark instance\n * @param {string} prop The data property name\n * @returns A bitmap rasterizer function.\n */\nfunction alphaScale(mark, prop) {\n  const { plot, grids } = mark;\n\n  // determine scale domain\n  const domainAttr = plot.getAttribute('opacityDomain');\n  const domainFixed = domainAttr === Fixed;\n  const domainTransient = domainAttr?.[Transient];\n  const domain = (!domainFixed && !domainTransient && domainAttr)\n    || gridDomainContinuous(grids.columns[prop]);\n  if (domainFixed || domainTransient || !domainAttr) {\n    if (!domainFixed) domain[Transient] = true;\n    plot.setAttribute('opacityDomain', domain);\n  }\n\n  // generate opacity scale\n  const s = scale({\n    opacity: {\n      type: plot.getAttribute('opacityScale'),\n      domain,\n      range: plot.getAttribute('opacityRange'),\n      clamp: plot.getAttribute('opacityClamp'),\n      nice: plot.getAttribute('opacityNice'),\n      reverse: plot.getAttribute('opacityReverse'),\n      zero: plot.getAttribute('opacityZero'),\n      base: plot.getAttribute('opacityBase'),\n      exponent: plot.getAttribute('opacityExponent'),\n      constant: plot.getAttribute('opacityConstant')\n    }\n  });\n  return alphaScheme(s);\n}\n\n/**\n * Generate an color rasterizer for bitmap r, g, b channels.\n * @param {RasterMark} mark The mark instance\n * @param {string} prop\n * @returns A bitmap rasterizer function.\n */\nfunction colorScale(mark, prop) {\n  const { plot, grids } = mark;\n  const data = grids.columns[prop] ?? [];\n  const flat = !data[0]?.map; // not array-like\n  const discrete = flat || Array.isArray(data[0]);\n\n  // determine scale domain\n  const domainAttr = plot.getAttribute('colorDomain');\n  const domainFixed = domainAttr === Fixed;\n  const domainTransient = domainAttr?.[Transient];\n  const domain = (!domainFixed && !domainTransient && domainAttr) || (\n    flat ? data.slice().sort(ascending)\n      : discrete ? gridDomainDiscrete(data)\n      : gridDomainContinuous(data)\n  );\n  if (domainFixed || domainTransient || !domainAttr) {\n    if (!domainFixed) domain[Transient] = true;\n    plot.setAttribute('colorDomain', domain);\n  }\n\n  // generate color scale\n  const s = scale({\n    color: {\n      type: plot.getAttribute('colorScale'),\n      domain,\n      range: plot.getAttribute('colorRange'),\n      clamp: plot.getAttribute('colorClamp'),\n      n: plot.getAttribute('colorN'),\n      nice: plot.getAttribute('colorNice'),\n      reverse: plot.getAttribute('colorReverse'),\n      scheme: plot.getAttribute('colorScheme'),\n      interpolate: plot.getAttribute('colorInterpolate'),\n      pivot: plot.getAttribute('colorPivot'),\n      symmetric: plot.getAttribute('colorSymmetric'),\n      zero: plot.getAttribute('colorZero'),\n      base: plot.getAttribute('colorBase'),\n      exponent: plot.getAttribute('colorExponent'),\n      constant: plot.getAttribute('colorConstant')\n    }\n  });\n\n  // TODO: add support for threshold scales?\n  if (discrete) {\n    return colorCategory(s);\n  } else {\n    // Plot scales do not expose intermediate transformation of\n    // values to [0, 1] fractions. So we hobble together our own.\n    const frac = scale({\n      x: {\n        type: inferScaleType(s.type),\n        domain: s.domain,\n        reverse: s.reverse,\n        range: [0, 1],\n        clamp: s.clamp,\n        base: s.base,\n        exponent: s.exponent,\n        constant: s.constant\n      }\n    });\n    return colorScheme(1024, s, frac.apply);\n  }\n}\n\nfunction inferScaleType(type) {\n  if (type.endsWith('symlog')) return 'symlog';\n  if (type.endsWith('log')) return 'log';\n  if (type.endsWith('pow')) return 'pow';\n  if (type.endsWith('sqrt')) return 'sqrt';\n  if (type === 'diverging') return 'linear';\n  return type;\n}\n\n/**\n * Retrieve canvas image data for a 2D raster bitmap.\n * The resulting data is cached in the mark.image property.\n * If the canvas dimensions change, a new canvas is created.\n * @param {RasterMark} mark The mark instance\n * @param {number} w The canvas width.\n * @param {number} h The canvas height.\n * @returns An object with a canvas, context, image data, and dimensions.\n */\nexport function imageData(mark, w, h) {\n  if (!mark.image || mark.image.w !== w || mark.image.h !== h) {\n    const canvas = createCanvas(w, h);\n    const ctx = canvas.getContext('2d', { willReadFrequently: true });\n    const img = ctx.getImageData(0, 0, w, h);\n    mark.image = { canvas, ctx, img, w, h };\n  }\n  return mark.image;\n}\n","import { Query, and, lineDensity } from '@uwdata/mosaic-sql';\nimport { binExpr } from './util/bin-expr.js';\nimport { extentX, extentY } from './util/extent.js';\nimport { handleParam } from './util/handle-param.js';\nimport { RasterMark } from './RasterMark.js';\n\nexport class DenseLineMark extends RasterMark {\n  constructor(source, options) {\n    const { normalize = true, ...rest } = options;\n    super(source, rest);\n\n    /** @type {boolean} */\n    this.normalize = handleParam(normalize, value => {\n      return (this.normalize = value, this.requestUpdate());\n    });\n  }\n\n  query(filter = []) {\n    const { channels, normalize, pad } = this;\n    const [nx, ny] = this.bins = this.binDimensions();\n    const [x] = binExpr(this, 'x', nx, extentX(this, filter), pad);\n    const [y] = binExpr(this, 'y', ny, extentY(this, filter), pad);\n\n    const q = Query\n      .from(this.sourceTable())\n      .where(stripXY(this, filter));\n\n    this.aggr = ['density'];\n    const groupby = this.groupby = [];\n    const z = [];\n    for (const c of channels) {\n      if (Object.hasOwn(c, 'field')) {\n        const { channel, field } = c;\n        if (channel === 'z') {\n          q.select({ [channel]: field });\n          z.push('z');\n        } else if (channel !== 'x' && channel !== 'y') {\n          q.select({ [channel]: field });\n          groupby.push(channel);\n        }\n      }\n    }\n\n    return lineDensity(q, x, y, z, nx, ny, groupby, normalize);\n  }\n}\n\n// strip x, y fields from filter predicate\n// to prevent improper clipping of line segments\n// TODO: improve, perhaps with supporting query utilities\nfunction stripXY(mark, filter) {\n  if (Array.isArray(filter) && !filter.length) return filter;\n\n  // get column expressions for x and y encoding channels\n  const xc = mark.channelField('x').column;\n  const yc = mark.channelField('y').column;\n\n  // test if a range predicate filters the x or y channels\n  const test = p => {\n    const col = `${p.expr}`;\n    return p.type !== 'BETWEEN' || (col !== xc && col !== yc);\n  };\n\n  // filter boolean 'and' operations\n  const filterAnd = p => p.op === 'AND'\n    ? and(p.clauses.filter(c => test(c)))\n    : p;\n\n  return Array.isArray(filter)\n    ? filter.filter(p => test(p)).map(p => filterAnd(p))\n    : filterAnd(filter);\n}\n","import { toDataColumns } from '@uwdata/mosaic-core';\nimport { binLinear1d, isBetween } from '@uwdata/mosaic-sql';\nimport { max, sum } from 'd3';\nimport { Transient } from '../symbols.js';\nimport { binExpr } from './util/bin-expr.js';\nimport { dericheConfig, dericheConv1d } from './util/density.js';\nimport { extentX, extentY, xext, yext } from './util/extent.js';\nimport { grid1d } from './util/grid.js';\nimport { handleParam } from './util/handle-param.js';\nimport { Mark, channelOption, markQuery } from './Mark.js';\n\nconst GROUPBY = { fill: 1, stroke: 1, z: 1 };\n\nexport class Density1DMark extends Mark {\n  constructor(type, source, options) {\n    const {\n      bins = 1024,\n      bandwidth = 20,\n      normalize = false,\n      stack = false,\n      ...channels\n    } = options;\n    const dim = type.endsWith('X') ? 'y' : 'x';\n\n    super(type, source, channels, dim === 'x' ? xext : yext);\n    this.dim = dim;\n\n    /** @type {number} */\n    this.bins = handleParam(bins, value => {\n      return (this.bins = value, this.requestUpdate());\n    });\n\n    /** @type {number} */\n    this.bandwidth = handleParam(bandwidth, value => {\n      this.bandwidth = value;\n      return this.grids ? this.convolve().update() : null;\n    });\n\n    /** @type {string | boolean} */\n    this.normalize = handleParam(normalize, value => {\n      return (this.normalize = value, this.convolve().update());\n    });\n\n    /** @type {boolean} */\n    this.stack = handleParam(stack, value => {\n      return (this.stack = value, this.update());\n    });\n  }\n\n  get filterStable() {\n    const name = this.dim === 'x' ? 'xDomain' : 'yDomain';\n    const dom = this.plot.getAttribute(name);\n    return dom && !dom[Transient];\n  }\n\n  query(filter = []) {\n    if (this.hasOwnData()) throw new Error('Density1DMark requires a data source');\n    const { bins, channels, dim } = this;\n    const extent = this.extent = (dim === 'x' ? extentX : extentY)(this, filter);\n    const [x, bx] = binExpr(this, dim, bins, extent);\n    const q = markQuery(channels, this.sourceTable(), [dim])\n      .where(filter.concat(isBetween(bx, extent)));\n    const v = this.channelField('weight') ? 'weight' : null;\n    const g = this.groupby = channels.flatMap(c => {\n      return (GROUPBY[c.channel] && c.field) ? c.as : [];\n    });\n    return binLinear1d(q, x, v, g);\n  }\n\n  queryResult(data) {\n    // @ts-expect-error Correct the data column type\n    const c = toDataColumns(data).columns;\n    this.grids = grid1d(this.bins, c.index, c.density, c, this.groupby);\n    return this.convolve();\n  }\n\n  convolve() {\n    const {\n      bins, bandwidth, normalize, dim, grids, groupby, plot, extent: [lo, hi]\n    } = this;\n\n    const cols = grids.columns;\n    const numGrids = grids.numRows;\n\n    const b = this.channelField(dim).as;\n    const v = dim === 'x' ? 'y' : 'x';\n    const size = dim === 'x' ? plot.innerWidth() : plot.innerHeight();\n    const neg = cols._grid.some(grid => grid.some(v => v < 0));\n    const config = dericheConfig(bandwidth * (bins - 1) / size, neg);\n\n    const b0 = +lo;\n    const delta = (hi - b0) / (bins - 1);\n\n    const numRows = bins * numGrids;\n    const _b = new Float64Array(numRows);\n    const _v = new Float64Array(numRows);\n    const _g = groupby.reduce((m, name) => (m[name] = Array(numRows), m), {});\n\n    for (let k = 0, g = 0; g < numGrids; ++g) {\n      // fill in groupby values\n      groupby.forEach(name => _g[name].fill(cols[name][g], k, k + bins));\n\n      // perform smoothing, map smoothed grid values to sample data points\n      const grid = cols._grid[g];\n      const result = dericheConv1d(config, grid, bins);\n      const scale = 1 / norm(grid, result, delta, normalize);\n      for (let i = 0; i < bins; ++i, ++k) {\n        _b[k] = b0 + i * delta;\n        _v[k] = result[i] * scale;\n      }\n    }\n\n    this.data = { numRows, columns: { [b]: _b, [v]: _v, ..._g } };\n    return this;\n  }\n\n  plotSpecs() {\n    // @ts-expect-error Correct the data column type\n    const { type, data: { numRows: length, columns }, channels, dim, stack } = this;\n\n    // control if Plot's implicit stack transform is applied\n    // no stacking is done if x2/y2 are used instead of x/y\n    const _ = type.startsWith('area') && !stack ? '2' : '';\n    const options = dim === 'x' ? { [`y${_}`]: columns.y } : { [`x${_}`]: columns.x };\n\n    for (const c of channels) {\n      options[c.channel] = channelOption(c, columns);\n    }\n    return [{ type, data: { length }, options }];\n  }\n}\n\nfunction norm(grid, smoothed, delta, type) {\n  const value = type === true || type === 'sum' ? sum(grid)\n    : type === 'max' ? max(smoothed)\n    : delta;\n  return value || 1;\n}\n","import { channelScale } from './util/channel-scale.js';\nimport { Grid2DMark } from './Grid2DMark.js';\nimport { channelOption } from './Mark.js';\n\nexport class Density2DMark extends Grid2DMark {\n  constructor(source, options) {\n    const { type = 'dot', ...channels } = options;\n    super(type, source, {\n      bandwidth: 20,\n      interpolate: 'linear',\n      pad: 0,\n      pixelSize: 2,\n      ...channels\n    });\n  }\n\n  convolve() {\n    super.convolve();\n    const { bins, pad, extentX, extentY } = this;\n    const [nx, ny] = bins;\n    const scaleX = channelScale(this, 'x');\n    const scaleY = channelScale(this, 'y');\n    const [x0, x1] = extentX.map(v => scaleX.apply(v));\n    const [y0, y1] = extentY.map(v => scaleY.apply(v));\n    const deltaX = (x1 - x0) / (nx - pad);\n    const deltaY = (y1 - y0) / (ny - pad);\n    const offset = pad ? 0 : 0.5;\n    this.data = points(\n      this.grids, bins, x0, y0, deltaX, deltaY,\n      scaleX.invert, scaleY.invert, offset\n    );\n    return this;\n  }\n\n  plotSpecs() {\n    // @ts-expect-error Correct the data column type\n    const { type, channels, densityMap, data: { numRows: length, columns } } = this;\n    const options = {};\n    for (const c of channels) {\n      const { channel } = c;\n      options[channel] = (channel === 'x' || channel === 'y')\n        ? columns[channel] // use generated x/y data fields\n        : channelOption(c, columns);\n    }\n    for (const channel in densityMap) {\n      if (densityMap[channel]) {\n        options[channel] = columns.density;\n      }\n    }\n    return [{ type, data: { length }, options }];\n  }\n}\n\nfunction points(data, bins, x0, y0, deltaX, deltaY, invertX, invertY, offset) {\n  const scale = 1 / (deltaX * deltaY);\n  const [nx, ny] = bins;\n  const batch = nx * ny;\n  const numRows = batch * data.numRows;\n\n  const x = new Float64Array(numRows);\n  const y = new Float64Array(numRows);\n  const density = new Float64Array(numRows);\n  const columns = { x, y, density };\n  const { density: grids, ...rest } = data.columns;\n  for (const name in rest) {\n    columns[name] = new rest[name].constructor(numRows);\n  }\n\n  let r = 0;\n  for (let row = 0; row < data.numRows; ++row) {\n    // copy repeated values in batch\n    for (const name in rest) {\n      columns[name].fill(rest[name][row], r, r + batch);\n    }\n    // copy individual grid values\n    const grid = grids[row];\n    for (let k = 0, j = 0; j < ny; ++j) {\n      for (let i = 0; i < nx; ++i, ++r, ++k) {\n        x[r] = invertX(x0 + (i + offset) * deltaX);\n        y[r] = invertY(y0 + (j + offset) * deltaY);\n        density[r] = grid[k] * scale;\n      }\n    }\n  }\n\n  return { numRows, columns };\n}\n","// https://github.com/jstat/jstat\n//\n// Copyright (c) 2013 jStat\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\n/**\n * ibetainv function\n * @param {number} p\n * @param {number} a\n * @param {number} b\n * @returns {number}\n */\nexport function ibetainv(p, a, b) {\n  var EPS = 1e-8;\n  var a1 = a - 1;\n  var b1 = b - 1;\n  var j = 0;\n  var lna, lnb, pp, t, u, err, x, al, h, w, afac;\n  if (p <= 0) return 0;\n  if (p >= 1) return 1;\n  if (a >= 1 && b >= 1) {\n    pp = p < 0.5 ? p : 1 - p;\n    t = Math.sqrt(-2 * Math.log(pp));\n    x = (2.30753 + t * 0.27061) / (1 + t * (0.99229 + t * 0.04481)) - t;\n    if (p < 0.5) x = -x;\n    al = (x * x - 3) / 6;\n    h = 2 / (1 / (2 * a - 1) + 1 / (2 * b - 1));\n    w = (x * Math.sqrt(al + h)) / h - (1 / (2 * b - 1) - 1 / (2 * a - 1)) * (al + 5 / 6 - 2 / (3 * h));\n    x = a / (a + b * Math.exp(2 * w));\n  } else {\n    lna = Math.log(a / (a + b));\n    lnb = Math.log(b / (a + b));\n    t = Math.exp(a * lna) / a;\n    u = Math.exp(b * lnb) / b;\n    w = t + u;\n    if (p < t / w) x = Math.pow(a * w * p, 1 / a);\n    else x = 1 - Math.pow(b * w * (1 - p), 1 / b);\n  }\n  afac = -gammaln(a) - gammaln(b) + gammaln(a + b);\n  for (; j < 10; j++) {\n    if (x === 0 || x === 1) return x;\n    err = ibeta(x, a, b) - p;\n    t = Math.exp(a1 * Math.log(x) + b1 * Math.log(1 - x) + afac);\n    u = err / t;\n    x -= t = u / (1 - 0.5 * Math.min(1, u * (a1 / x - b1 / (1 - x))));\n    if (x <= 0) x = 0.5 * (x + t);\n    if (x >= 1) x = 0.5 * (x + t + 1);\n    if (Math.abs(t) < EPS * x && j > 0) break;\n  }\n  return x;\n}\n\n/**\n * ibeta function\n * @param {number} x\n * @param {number} a\n * @param {number} b\n * @returns {number}\n */\nexport function ibeta(x, a, b) {\n  // Factors in front of the continued fraction.\n  var bt =\n    x === 0 || x === 1 ? 0 : Math.exp(gammaln(a + b) - gammaln(a) - gammaln(b) + a * Math.log(x) + b * Math.log(1 - x));\n  if (x < 0 || x > 1) return 0;\n  if (x < (a + 1) / (a + b + 2))\n    // Use continued fraction directly.\n    return (bt * betacf(x, a, b)) / a;\n  // else use continued fraction after making the symmetry transformation.\n  return 1 - (bt * betacf(1 - x, b, a)) / b;\n}\n\n/**\n * betacf function\n * @param {number} x\n * @param {number} a\n * @param {number} b\n * @returns {number}\n */\nexport function betacf(x, a, b) {\n  var fpmin = 1e-30;\n  var m = 1;\n  var qab = a + b;\n  var qap = a + 1;\n  var qam = a - 1;\n  var c = 1;\n  var d = 1 - (qab * x) / qap;\n  var m2, aa, del, h;\n\n  // These q's will be used in factors that occur in the coefficients\n  if (Math.abs(d) < fpmin) d = fpmin;\n  d = 1 / d;\n  h = d;\n\n  for (; m <= 100; m++) {\n    m2 = 2 * m;\n    aa = (m * (b - m) * x) / ((qam + m2) * (a + m2));\n    // One step (the even one) of the recurrence\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin) d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin) c = fpmin;\n    d = 1 / d;\n    h *= d * c;\n    aa = (-(a + m) * (qab + m) * x) / ((a + m2) * (qap + m2));\n    // Next step of the recurrence (the odd one)\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin) d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin) c = fpmin;\n    d = 1 / d;\n    del = d * c;\n    h *= del;\n    if (Math.abs(del - 1.0) < 3e-7) break;\n  }\n\n  return h;\n}\n\n/**\n * gammaln function\n * @param {number} x\n * @returns {number}\n */\nexport function gammaln(x) {\n  var j = 0;\n  var cof = [\n    76.18009172947146, -86.5053203294167, 24.01409824083091, -1.231739572450155, 0.1208650973866179e-2,\n    -0.5395239384953e-5\n  ];\n  var ser = 1.000000000190015;\n  var xx, y, tmp;\n  tmp = (y = xx = x) + 5.5;\n  tmp -= (xx + 0.5) * Math.log(tmp);\n  for (; j < 6; j++) ser += cof[j] / ++y;\n  return Math.log((2.506628274631 * ser) / xx) - tmp;\n}\n\n/**\n * qt function\n * @param {number} p\n * @param {number} dof\n * @returns {number}\n */\nexport function qt(p, dof) {\n  var x = ibetainv(2 * Math.min(p, 1 - p), 0.5 * dof, 0.5);\n  x = Math.sqrt((dof * (1 - x)) / x);\n  return p > 0.5 ? x : -x;\n}\n\n/**\n * Approximate inverse error function.\n * @param {number} x\n * @returns {number}\n */\nexport function erfinv(x) {\n  // Implementation from \"Approximating the erfinv function\" by Mike Giles,\n  // GPU Computing Gems, volume 2, 2010.\n  // Ported from Apache Commons Math, https://www.apache.org/licenses/LICENSE-2.0\n\n  // beware that the logarithm argument must be\n  // computed as (1.0 - x) * (1.0 + x),\n  // it must NOT be simplified as 1.0 - x * x as this\n  // would induce rounding errors near the boundaries +/-1\n  let w = - Math.log((1 - x) * (1 + x));\n  let p;\n\n  if (w < 6.25) {\n    w -= 3.125;\n    p =  -3.6444120640178196996e-21;\n    p =   -1.685059138182016589e-19 + p * w;\n    p =   1.2858480715256400167e-18 + p * w;\n    p =    1.115787767802518096e-17 + p * w;\n    p =   -1.333171662854620906e-16 + p * w;\n    p =   2.0972767875968561637e-17 + p * w;\n    p =   6.6376381343583238325e-15 + p * w;\n    p =  -4.0545662729752068639e-14 + p * w;\n    p =  -8.1519341976054721522e-14 + p * w;\n    p =   2.6335093153082322977e-12 + p * w;\n    p =  -1.2975133253453532498e-11 + p * w;\n    p =  -5.4154120542946279317e-11 + p * w;\n    p =    1.051212273321532285e-09 + p * w;\n    p =  -4.1126339803469836976e-09 + p * w;\n    p =  -2.9070369957882005086e-08 + p * w;\n    p =   4.2347877827932403518e-07 + p * w;\n    p =  -1.3654692000834678645e-06 + p * w;\n    p =  -1.3882523362786468719e-05 + p * w;\n    p =    0.0001867342080340571352 + p * w;\n    p =  -0.00074070253416626697512 + p * w;\n    p =   -0.0060336708714301490533 + p * w;\n    p =      0.24015818242558961693 + p * w;\n    p =       1.6536545626831027356 + p * w;\n  } else if (w < 16.0) {\n    w = Math.sqrt(w) - 3.25;\n    p =   2.2137376921775787049e-09;\n    p =   9.0756561938885390979e-08 + p * w;\n    p =  -2.7517406297064545428e-07 + p * w;\n    p =   1.8239629214389227755e-08 + p * w;\n    p =   1.5027403968909827627e-06 + p * w;\n    p =   -4.013867526981545969e-06 + p * w;\n    p =   2.9234449089955446044e-06 + p * w;\n    p =   1.2475304481671778723e-05 + p * w;\n    p =  -4.7318229009055733981e-05 + p * w;\n    p =   6.8284851459573175448e-05 + p * w;\n    p =   2.4031110387097893999e-05 + p * w;\n    p =   -0.0003550375203628474796 + p * w;\n    p =   0.00095328937973738049703 + p * w;\n    p =   -0.0016882755560235047313 + p * w;\n    p =    0.0024914420961078508066 + p * w;\n    p =   -0.0037512085075692412107 + p * w;\n    p =     0.005370914553590063617 + p * w;\n    p =       1.0052589676941592334 + p * w;\n    p =       3.0838856104922207635 + p * w;\n  } else if (Number.isFinite(w)) {\n    w = Math.sqrt(w) - 5.0;\n    p =  -2.7109920616438573243e-11;\n    p =  -2.5556418169965252055e-10 + p * w;\n    p =   1.5076572693500548083e-09 + p * w;\n    p =  -3.7894654401267369937e-09 + p * w;\n    p =   7.6157012080783393804e-09 + p * w;\n    p =  -1.4960026627149240478e-08 + p * w;\n    p =   2.9147953450901080826e-08 + p * w;\n    p =  -6.7711997758452339498e-08 + p * w;\n    p =   2.2900482228026654717e-07 + p * w;\n    p =  -9.9298272942317002539e-07 + p * w;\n    p =   4.5260625972231537039e-06 + p * w;\n    p =  -1.9681778105531670567e-05 + p * w;\n    p =   7.5995277030017761139e-05 + p * w;\n    p =  -0.00021503011930044477347 + p * w;\n    p =  -0.00013871931833623122026 + p * w;\n    p =       1.0103004648645343977 + p * w;\n    p =       4.8499064014085844221 + p * w;\n  } else {\n    p = Infinity;\n  }\n  return p * x;\n}\n","import { toDataColumns } from '@uwdata/mosaic-core';\nimport { avg, count, div, sqrt, stddev } from '@uwdata/mosaic-sql';\nimport { erfinv } from './util/stats.js';\nimport { Mark, markPlotSpec, markQuery } from './Mark.js';\nimport { handleParam } from './util/handle-param.js';\n\nexport class ErrorBarMark extends Mark {\n  constructor(type, source, options) {\n    const dim = type.endsWith('X') ? 'y' : 'x';\n    const { ci = 0.95, ...channels } = options;\n    super(type, source, channels);\n    this.dim = dim;\n    this.field = this.channelField(dim).field;\n    this.channels = this.channels.filter(c => c.channel !== dim);\n\n    /** @type {number} */\n    this.ci = handleParam(ci, value => {\n      return (this.ci = value, this.update());\n    });\n  }\n\n  query(filter = []) {\n    const { channels, field } = this;\n    const fields = channels.concat([\n      { field: avg(field), as: '__avg__' },\n      { field: div(stddev(field), sqrt(count(field))), as: '__se__', }\n    ]);\n    return markQuery(fields, this.sourceTable()).where(filter);\n  }\n\n  queryResult(data) {\n    this.data = toDataColumns(data);\n    return this;\n  }\n\n  plotSpecs() {\n    const { type, dim, detail, data, ci, channels } = this;\n\n    // compute confidence interval channels\n    const p = Math.SQRT2 * erfinv(ci);\n    // @ts-expect-error Correct the data column type\n    const { columns: { __avg__: u, __se__: s } } = data;\n    const options = {\n      [`${dim}1`]: u.map((u, i) => u - p * s[i]),\n      [`${dim}2`]: u.map((u, i) => u + p * s[i])\n    };\n\n    return markPlotSpec(type, detail, channels, data, options);\n  }\n}\n","import { geojson } from '@uwdata/mosaic-sql';\nimport { Mark, isDataArray } from './Mark.js';\n\n// default geometry column created by st_read\n// warning: if another \"geom\" column exists this default\n// will shift, for example to \"geom_1\" and so on.\nconst DEFAULT_GEOMETRY_COLUMN = 'geom';\n\nexport class GeoMark extends Mark {\n  constructor(source, encodings = {}, reqs) {\n    if (!isDataArray(source) && !encodings?.geometry) {\n      // if issuing queries and no geometry channel specified\n      // then request default geometry column as GeoJSON\n      encodings.geometry = geojson(DEFAULT_GEOMETRY_COLUMN);\n    }\n\n    super('geo', source, encodings, reqs);\n  }\n\n  queryResult(data) {\n    super.queryResult(data); // map to columns, set this.data\n\n    // look for an explicit geometry field\n    const geom = this.channelField('geometry')?.as;\n    if (geom) {\n      // @ts-expect-error Correct the data column type\n      const { columns } = this.data;\n      if (typeof columns[geom][0] === 'string') {\n        columns[geom] = columns[geom].map(s => JSON.parse(s));\n      }\n    }\n\n    return this;\n  }\n}\n","import { Query, abs, add, and, bitAnd, cond, div, float64, gt, int32, isAggregateExpression, isNotNull, lt, mul, neq, pow, round, sub } from '@uwdata/mosaic-sql';\nimport { Transient } from '../symbols.js';\nimport { extentX, extentY, xyext } from './util/extent.js';\nimport { Mark } from './Mark.js';\nimport { handleParam } from './util/handle-param.js';\n\nexport class HexbinMark extends Mark {\n  constructor(source, options) {\n    const { type = 'hexagon', binWidth = 20, ...channels } = options;\n    super(type, source, { r: binWidth / 2, clip: true, ...channels }, xyext);\n\n    /** @type {number} */\n    this.binWidth = handleParam(binWidth, value => {\n      return (this.binWidth = value, this.requestUpdate());\n    });\n  }\n\n  get filterStable() {\n    const xdom = this.plot.getAttribute('xDomain');\n    const ydom = this.plot.getAttribute('yDomain');\n    return xdom && ydom && !xdom[Transient] && !ydom[Transient];\n  }\n\n  query(filter = []) {\n    if (this.hasOwnData()) return null;\n    const { plot, binWidth, channels } = this;\n\n    // Extract channel information, update top-level query\n    // and extract dependent columns for aggregates\n    let xc, yc;\n    const dims = new Set;\n    const cols = {};\n    for (const c of channels) {\n      if (c.channel === 'orderby') {\n        // ignore ordering, as we will aggregate\n      } else if (c.channel === 'x') {\n        xc = c;\n      } else if (c.channel === 'y') {\n        yc = c;\n      } else if (Object.hasOwn(c, 'field')) {\n        const { as, field } = c;\n        cols[as] = field;\n        if (!isAggregateExpression(field)) {\n          dims.add(as);\n        }\n      }\n    }\n\n    // get x / y extents, may update plot xDomain / yDomain\n    const [x1, x2] = extentX(this, filter);\n    const [y1, y2] = extentY(this, filter);\n\n    // Adjust screen-space coordinates by top/left\n    // margins as this is what Observable Plot does.\n    const ox = 0.5 - plot.getAttribute('marginLeft');\n    const oy = 0 - plot.getAttribute('marginTop');\n    const dx = float64(binWidth);\n    const dy = float64(binWidth * (1.5 / Math.sqrt(3)));\n    const xr = float64(plot.innerWidth() / (x2 - x1));\n    const yr = float64(plot.innerHeight() / (y2 - y1));\n\n    // column references\n    const x ='_x';\n    const y = '_y';\n    const px = '_px';\n    const py = '_py';\n    const pi = '_pi';\n    const pj = '_pj';\n    const tt = '_tt';\n\n    // Top-level query maps from screen space back to data values.\n    // Doing so ensures that Plot generates correct data-driven scales.\n    return Query.select({\n        [xc.as]: add(\n          float64(x1),\n          div(add(mul(add(x, mul(0.5, bitAnd(y, 1))), dx), ox), xr)\n        ),\n        [yc.as]: sub(\n          float64(y2),\n          div(add(mul(y, dy), oy), yr)\n        ),\n        ...cols\n      })\n      .groupby(x, y, ...dims)\n      .from(\n        // Subquery performs hex binning in screen space and also passes\n        // original columns through (the DB should optimize this).\n        Query.select({\n            [py]: div(sub(mul(yr, sub(y2, yc.field)), oy), dy),\n            [pj]: int32(round(py)),\n            [px]: sub(\n                div(sub(mul(xr, sub(xc.field, x1)), ox), dx),\n                mul(0.5, bitAnd(pj, 1))\n              ),\n            [pi]: int32(round(px)),\n            [tt]: and(\n                gt(mul(abs(sub(py, pj)), 3), 1),\n                gt(\n                  add(pow(sub(px, pi), 2), pow(sub(py, pj), 2)),\n                  add(\n                    pow(sub(sub(px, pi), mul(0.5, cond(lt(px, pi), -1, 1))), 2),\n                    pow(sub(sub(py, pj), cond(lt(py, pj), -1, 1)), 2)\n                  )\n                )\n              ),\n            [x]: cond(tt,\n                int32(add(\n                  add(pi, cond(lt(px, pi), -0.5, 0.5)),\n                  cond(neq(bitAnd(pj, 1), 0), 0.5, -0.5)\n                )),\n                pi\n              ),\n            [y]: cond(tt, int32(add(pj, cond(lt(py, pj), -1, 1))), pj)\n          }, '*')\n          .from(this.sourceTable())\n          .where(isNotNull(xc.field), isNotNull(yc.field), filter)\n      );\n  }\n}\n","import { coordinator } from '@uwdata/mosaic-core';\nimport { Query, count, isBetween, lt, lte, neq, sql, sum } from '@uwdata/mosaic-sql';\nimport { binExpr } from './util/bin-expr.js';\nimport { extentX, extentY } from './util/extent.js';\nimport { indices, permute } from './util/permute.js';\nimport { createCanvas } from './util/raster.js';\nimport { Grid2DMark } from './Grid2DMark.js';\nimport { rasterEncoding } from './RasterMark.js';\n\nexport class RasterTileMark extends Grid2DMark {\n  constructor(source, options) {\n    const { origin = [0, 0], dim = 'xy', ...markOptions } = options;\n    super('image', source, markOptions);\n    this.image = null;\n\n    // TODO: make part of data source instead of options?\n    this.origin = origin;\n    this.tileX = dim.toLowerCase().includes('x');\n    this.tileY = dim.toLowerCase().includes('y');\n  }\n\n  setPlot(plot, index) {\n    const update = () => { if (this.hasFieldInfo()) this.rasterize(); };\n    plot.addAttributeListener('schemeColor', update);\n    super.setPlot(plot, index);\n  }\n\n  requestQuery() {\n    return this.requestTiles();\n  }\n\n  query(filter = []) {\n    this._filter = filter;\n    // we will submit our own queries\n    return null;\n  }\n\n  tileQuery(extent) {\n    const { interpolate, pad, channels, densityMap } = this;\n    const [[x0, x1], [y0, y1]] = extent;\n    const [nx, ny] = this.bins;\n    const [x, bx] = binExpr(this, 'x', nx, [x0, x1], pad);\n    const [y, by] = binExpr(this, 'y', ny, [y0, y1], pad);\n\n    // with padded bins, include the entire domain extent\n    // if the bins are flush, exclude the extent max\n    const bounds = pad\n      ? [isBetween(bx, [+x0, +x1]), isBetween(by, [+y0, +y1])]\n      : [lte(+x0, bx), lt(bx, +x1), lte(+y0, by), lt(by, +y1)];\n\n    const q = Query\n      .from(this.sourceTable())\n      .where(bounds);\n\n    const groupby = this.groupby = [];\n    const aggrMap = {};\n    for (const c of channels) {\n      if (Object.hasOwn(c, 'field')) {\n        const { as, channel, field } = c;\n        if (field.aggregate) {\n          // include custom aggregate\n          aggrMap[channel] = field;\n          densityMap[channel] = true;\n        } else if (channel === 'weight') {\n          // compute weighted density\n          aggrMap.density = sum(field);\n        } else if (channel !== 'x' && channel !== 'y') {\n          // add groupby field\n          q.select({ [as]: field });\n          groupby.push(as);\n        }\n      }\n    }\n    const aggr = this.aggr = Object.keys(aggrMap);\n\n    // check for incompatible encodings\n    if (aggrMap.density && aggr.length > 1) {\n      throw new Error('Weight option can not be used with custom aggregates.');\n    }\n\n    // if no aggregates, default to count density\n    if (!aggr.length) {\n      aggr.push('density');\n      aggrMap.density = count();\n    }\n\n    // generate grid binning query\n    if (interpolate === 'linear') {\n      if (aggr.length > 1) {\n        throw new Error('Linear binning not applicable to multiple aggregates.');\n      }\n      if (!aggrMap.density) {\n        throw new Error('Linear binning not applicable to custom aggregates.');\n      }\n      return binLinear2d(q, x, y, aggrMap.density, nx, groupby);\n    } else {\n      return bin2d(q, x, y, aggrMap, nx, groupby);\n    }\n  }\n\n  async requestTiles() {\n    // get coordinator, cancel prior prefetch queries\n    const mc = coordinator();\n    if (this.prefetch) mc.cancel(this.prefetch);\n\n    // get view extent info\n    const { pad, tileX, tileY, origin: [tx, ty] } = this;\n    const [m, n] = this.bins = this.binDimensions();\n    const [x0, x1] = extentX(this, this._filter);\n    const [y0, y1] = extentY(this, this._filter);\n    const xspan = x1 - x0;\n    const yspan = y1 - y0;\n    const xx = Math.floor((x0 - tx) * (m - pad) / xspan);\n    const yy = Math.floor((y0 - ty) * (n - pad) / yspan);\n\n    const tileExtent = (i, j) => [\n      [tx + i * xspan, tx + (i + 1) * xspan],\n      [ty + j * yspan, ty + (j + 1) * yspan]\n    ];\n\n    // get tile coords that overlap current view extent\n    const i0 = Math.floor((x0 - tx) / xspan);\n    const i1 = tileX ? tileFloor((x1 - tx) / xspan) : i0;\n    const j0 = Math.floor((y0 - ty) / yspan);\n    const j1 = tileY ? tileFloor((y1 - ty) / yspan) : j0;\n\n    // query for currently needed data tiles\n    const coords = [];\n    for (let i = i0; i <= i1; ++i) {\n      for (let j = j0; j <= j1; ++j) {\n        coords.push([i, j]);\n      }\n    }\n    const queries = coords.map(\n      ([i, j]) => mc.query(this.tileQuery(tileExtent(i, j)))\n    );\n\n    // prefetch tiles along periphery of current tiles\n    const prefetchCoords = [];\n    if (tileX) {\n      for (let j = j0; j <= j1; ++j) {\n        prefetchCoords.push([i1 + 1, j]);\n        prefetchCoords.push([i0 - 1, j]);\n      }\n    }\n    if (tileY) {\n      const x0 = tileX ? i0 - 1 : i0;\n      const x1 = tileX ? i1 + 1 : i1;\n      for (let i = x0; i <= x1; ++i) {\n        prefetchCoords.push([i, j1 + 1]);\n        prefetchCoords.push([i, j0 - 1]);\n      }\n    }\n    this.prefetch = prefetchCoords.map(\n      ([i, j]) => mc.prefetch(this.tileQuery(tileExtent(i, j)))\n    );\n\n    // wait for tile queries to complete, then update\n    const tiles = await Promise.all(queries);\n    const density = processTiles(m, n, xx, yy, coords, tiles);\n    this.grids0 = {\n      numRows: density.length,\n      columns: { density: [density] }\n    };\n    this.convolve().update();\n  }\n\n  convolve() {\n    return super.convolve().rasterize();\n  }\n\n  rasterize() {\n    const { bins, grids } = this;\n    const [ w, h ] = bins;\n    const { numRows, columns } = grids;\n\n    // raster data\n    const { canvas, ctx, img } = imageData(this, w, h);\n\n    // color + opacity encodings\n    const { alpha, alphaProp, color, colorProp } = rasterEncoding(this);\n    const alphaData = columns[alphaProp] ?? [];\n    const colorData = columns[colorProp] ?? [];\n\n    // determine raster order\n    const idx = numRows > 1 && colorProp && this.groupby?.includes(colorProp)\n      ? permute(colorData, this.plot.getAttribute('colorDomain'))\n      : indices(numRows);\n\n    // generate rasters\n    this.data = {\n      numRows,\n      columns: {\n        src: Array.from({ length: numRows }, (_, i) => {\n          color?.(img.data, w, h, colorData[idx[i]]);\n          alpha?.(img.data, w, h, alphaData[idx[i]]);\n          ctx.putImageData(img, 0, 0);\n          return canvas.toDataURL();\n        })\n      }\n    };\n\n    return this;\n  }\n\n  plotSpecs() {\n    // @ts-expect-error Correct the data column type\n    const { type, plot, data: { numRows: length, columns } } = this;\n    const options = {\n      src: columns.src,\n      width: plot.innerWidth(),\n      height: plot.innerHeight(),\n      preserveAspectRatio: 'none',\n      imageRendering: this.channel('imageRendering')?.value,\n      frameAnchor: 'middle'\n    };\n    return [{ type, data: { length }, options }];\n  }\n}\n\nfunction processTiles(m, n, x, y, coords, tiles) {\n  const grid = new Float64Array(m * n);\n  tiles.forEach((data, index) => {\n    const [i, j] = coords[index];\n    const tx = i * m - x;\n    const ty = j * n - y;\n    copy(m, n, grid, data, tx, ty);\n  });\n  return grid;\n}\n\nfunction copy(m, n, grid, values, tx, ty) {\n  // index = row + col * width\n  const num = values.numRows;\n  if (num === 0) return;\n  const index = values.getChild('index').toArray();\n  const value = values.getChild('density').toArray();\n  for (let row = 0; row < num; ++row) {\n    const idx = index[row];\n    const i = tx + (idx % m);\n    const j = ty + Math.floor(idx / m);\n    if (0 <= i && i < m && 0 <= j && j < n) {\n      grid[i + j * m] = value[row];\n    }\n  }\n}\n\nfunction imageData(mark, w, h) {\n  if (!mark.image || mark.image.w !== w || mark.image.h !== h) {\n    const canvas = createCanvas(w, h);\n    const ctx = canvas.getContext('2d', { willReadFrequently: true });\n    const img = ctx.getImageData(0, 0, w, h);\n    mark.image = { canvas, ctx, img, w, h };\n  }\n  return mark.image;\n}\n\nfunction bin2d(q, xp, yp, aggs, xn, groupby) {\n  return q\n    .select({\n      index: sql`FLOOR(${xp})::INTEGER + FLOOR(${yp})::INTEGER * ${xn}`,\n      ...aggs\n    })\n    .groupby('index', groupby);\n}\n\nfunction binLinear2d(q, xp, yp, value, xn, groupby) {\n  const w = value.column ? `* ${value.column}` : '';\n  const subq = (i, w) => q.clone().select({ xp, yp, i, w });\n\n  // grid[xu + yu * xn] += (xv - xp) * (yv - yp) * wi;\n  const a = subq(\n    sql`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${xn}`,\n    sql`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${w}`\n  );\n\n  // grid[xu + yv * xn] += (xv - xp) * (yp - yu) * wi;\n  const b = subq(\n    sql`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${xn}`,\n    sql`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${w}`\n  );\n\n  // grid[xv + yu * xn] += (xp - xu) * (yv - yp) * wi;\n  const c = subq(\n    sql`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${xn}`,\n    sql`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${w}`\n  );\n\n  // grid[xv + yv * xn] += (xp - xu) * (yp - yu) * wi;\n  const d = subq(\n    sql`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${xn}`,\n    sql`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${w}`\n  );\n\n  return Query\n    .from(Query.unionAll(a, b, c, d))\n    .select({ index: 'i', density: sum('w') }, groupby)\n    .groupby('index', groupby)\n    .having(neq('density', 0));\n}\n\nfunction tileFloor(value) {\n  const floored = Math.floor(value);\n  return floored === value ? floored - 1 : floored;\n}","import { range } from 'd3';\nimport { toDataColumns } from '@uwdata/mosaic-core';\nimport {\n  Query, max, min, float64, isNotNull,\n  regrIntercept, regrSlope, regrCount,\n  regrSYY, regrSXX, regrAvgX\n} from '@uwdata/mosaic-sql';\nimport { qt } from './util/stats.js';\nimport { Mark, channelOption } from './Mark.js';\nimport { handleParam } from './util/handle-param.js';\n\nexport class RegressionMark extends Mark {\n  constructor(source, options) {\n    const { ci = 0.95, precision = 4, ...channels } = options;\n    super('line', source, channels);\n\n    const update = () => this.modelFit ? this.confidenceBand().update() : null;\n\n    /** @type {number} */\n    this.ci = handleParam(ci, value => {\n      return (this.ci = value, update());\n    });\n\n    /** @type {number} */\n    this.precision = handleParam(precision, value => {\n      return (this.precision = value, update());\n    });\n  }\n\n  query(filter = []) {\n    const x = this.channelField('x').as;\n    const y = this.channelField('y').as;\n    const groupby = Array.from(new Set(\n      ['stroke', 'z', 'fx', 'fy'].flatMap(c => this.channelField(c)?.as || [])\n    ));\n\n    return Query\n      .from(super.query(filter))\n      .select({\n        intercept: regrIntercept(y, x),\n        slope: regrSlope(y, x),\n        n: regrCount(y, x),\n        ssy: regrSYY(y, x),\n        ssx: regrSXX(y, x),\n        xm: regrAvgX(y, x),\n        x0: float64(min(x).where(isNotNull(y))),\n        x1: float64(max(x).where(isNotNull(y)))\n      })\n      .select(groupby)\n      .groupby(groupby);\n  }\n\n  queryResult(data) {\n    this.modelFit = toDataColumns(data);\n\n    // regression line\n    this.lineData = linePoints(this.modelFit);\n\n    // prepare confidence band\n    return this.confidenceBand();\n  }\n\n  confidenceBand() {\n    // regression ci area\n    const { ci, modelFit, precision, plot } = this;\n    const width = plot.innerWidth();\n    this.areaData = ci ? areaPoints(modelFit, ci, precision, width) : null;\n    return this;\n  }\n\n  plotSpecs() {\n    const { lineData, areaData, channels, ci } = this;\n    const lcols = lineData.columns;\n    const acols = ci ? areaData.columns : {};\n    const lopt = { x: lcols.x, y: lcols.y };\n    const aopt = { x: acols.x, y1: acols.y1, y2: acols.y2, fillOpacity: 0.1 };\n\n    for (const c of channels) {\n      switch (c.channel) {\n        case 'x':\n        case 'y':\n        case 'fill':\n          break;\n        case 'tip':\n          aopt.tip = channelOption(c, acols);\n          break;\n        case 'stroke':\n          lopt.stroke = channelOption(c, lcols);\n          aopt.fill = channelOption(c, acols);\n          break;\n        case 'strokeOpacity':\n          lopt.strokeOpacity = channelOption(c, lcols);\n          break;\n        case 'fillOpacity':\n          aopt.fillOpacity = channelOption(c, acols);\n          break;\n        default:\n          lopt[c.channel] = channelOption(c, lcols);\n          aopt[c.channel] = channelOption(c, acols);\n          break;\n      }\n    }\n\n    return [\n      ...(ci ? [{ type: 'areaY', data: { length: areaData.numRows }, options: aopt }] : []),\n      { type: 'line', data: { length: lineData.numRows }, options: lopt }\n    ];\n  }\n}\n\nfunction concat(a, b) {\n  if (a.concat) return a.concat(b);\n  const array = new (a.constructor)(a.length + b.length);\n  array.set(a, 0);\n  array.set(b, a.length);\n  return array;\n}\n\nfunction linePoints(fit) {\n  // eslint-disable-next-line no-unused-vars\n  const { x0 = [], x1 = [], xm, intercept, slope, n, ssx, ssy, ...rest } = fit.columns;\n  const predict = (x, i) => intercept[i] + x * slope[i];\n  const x = concat(x0, x1);\n  const y = concat(x0.map(predict), x1.map(predict));\n  for (const name in rest) {\n    rest[name] = concat(rest[name], rest[name]);\n  }\n  return { numRows: x.length, columns: { x, y, ...rest } };\n}\n\nfunction areaPoints(fit, ci, precision, width) {\n  const len = fit.numRows;\n  const { x0, x1, xm, intercept, slope, n, ssx, ssy, ...rest } = fit.columns;\n  const other = Object.keys(rest);\n  const columns = { x: [], y1: [], y2: [] };\n  other.forEach(name => columns[name] = []);\n\n  for (let i = 0; i < len; ++i) {\n    const pp = precision * (x1[i] - x0[i]) / width;\n    const t_sy = qt((1 - ci) / 2, n[i] - 2) * Math.sqrt(ssy[i] / (n[i] - 2));\n    range(x0[i], x1[i] - pp / 2, pp).concat(x1[i]).forEach(x => {\n      const y = intercept[i] + x * slope[i];\n      const ye = t_sy * Math.sqrt(1 / n[i] + (x - xm[i]) ** 2 / ssx[i]);\n      columns.x.push(x);\n      columns.y1.push(y - ye);\n      columns.y2.push(y + ye);\n      other.forEach(name => columns[name].push(rest[name][i]));\n    });\n  }\n\n  return { numRows: columns.x.length, columns };\n}\n","/**\n * Return the bound datum value on a Plot-generated SVG element.\n * Following D3, bound data is assigned to the `__data__` property.\n * However, the target mark may be wrapped within a hyperlink `a` tag.\n * @param {Element} el A DOM element.\n * @returns {*} The bound datum.\n */\nexport function getDatum(el) {\n  if (el.tagName === 'a') {\n    el = el.children[0];\n  }\n  // @ts-ignore\n  const data = el.__data__;\n  return Array.isArray(data) ? data[0] : data;\n}\n","export function toKebabCase(cc) {\n  const lc = cc.toLowerCase();\n  const n = cc.length;\n  let kc = '';\n  for (let i = 0; i < n; ++i) {\n    kc += (cc[i] !== lc[i] ? '-' : '') + lc[i];\n  }\n  return kc;\n}\n","import { toKebabCase } from './to-kebab-case.js';\n\nexport function sanitizeStyles(styles) {\n  const s = {};\n  for (const name in styles) {\n    s[toKebabCase(name)] = styles[name];\n  }\n  return s;\n}\n","import { throttle } from '@uwdata/mosaic-core';\nimport { and, isAggregateExpression } from '@uwdata/mosaic-sql';\nimport { getDatum } from './util/get-datum.js';\nimport { sanitizeStyles } from './util/sanitize-styles.js';\n\nfunction configureMark(mark) {\n  const { channels } = mark;\n  const dims = new Set;\n  let ordered = false;\n  let aggregate = false;\n\n  for (const c of channels) {\n    const { channel, field, as } = c;\n    if (channel === 'orderby') {\n      ordered = true;\n    } else if (field) {\n      if (isAggregateExpression(field)) {\n        aggregate = true;\n      } else {\n        if (dims.has(as)) continue;\n        dims.add(as);\n      }\n    }\n  }\n\n  // if orderby is defined, we're ok: nothing to do\n  // or, if there is no groupby aggregation, we're ok: nothing to do\n  // grouping may result in optimizations that change result order\n  // so we orderby the grouping dimensions to ensure stable indices\n  if (!ordered && aggregate && dims.size) {\n    mark.channels.push(({ channel: 'orderby', value: Array.from(dims) }));\n  }\n\n  return mark;\n}\n\nexport class Highlight {\n  constructor(mark, {\n    selection,\n    channels = {}\n  }) {\n    this.mark = configureMark(mark);\n    this.selection = selection;\n    const c = Object.entries(sanitizeStyles(channels));\n    this.channels = c.length ? c : [['opacity', 0.2]];\n    this.selection.addEventListener('value', throttle(() => this.update()));\n  }\n\n  init(svg) {\n    this.svg = svg;\n    const values = this.values = [];\n    const index = this.mark.index;\n    const g = `g[data-index=\"${index}\"]`;\n    const selector = `${g} > *:not(g), ${g} > g > *`;\n    const nodes = this.nodes = svg.querySelectorAll(selector);\n\n    const { channels } = this;\n    for (let i = 0; i < nodes.length; ++i) {\n      const node = nodes[i];\n      values.push(channels.map(c => node.getAttribute(c[0])));\n    }\n\n    return this.update();\n  }\n\n  async update() {\n    const { svg, nodes, channels, values, mark, selection } = this;\n    if (!svg) return;\n\n    const test = await predicateFunction(mark, selection);\n\n    for (let i = 0; i < nodes.length; ++i) {\n      const node = nodes[i];\n      const base = values[i];\n      const t = test(getDatum(node));\n      // TODO? handle inherited values / remove attributes\n      for (let j = 0; j < channels.length; ++j) {\n        const [attr, value] = channels[j];\n        node.setAttribute(attr, t ? base[j] : value);\n      }\n    }\n  }\n}\n\nasync function predicateFunction(mark, selection) {\n  const pred = selection?.predicate(mark);\n\n  if (!pred || pred.length === 0) {\n    return () => true;\n  }\n\n  // set flag so we do not skip cross-filtered sources\n  const filter = mark.filterBy?.predicate(mark, true);\n\n  const s = { __: and(pred) };\n  const q = mark.query(filter);\n  (q.queries || [q]).forEach(q => {\n    q._groupby.length ? q.select(s) : q.setSelect(s);\n  });\n\n  const data = await mark.coordinator.query(q);\n  const v = data.getChild?.('__');\n  return !(data.numRows || data.length) ? (() => false)\n    : v ? (i => v.at(i))\n    : (i => data[i].__);\n}\n","/**\n * Patch the getScreenCTM method to memoize the last non-null\n * result seen. This will let the method continue to function\n * even after the node is removed from the DOM.\n */\nexport function patchScreenCTM() {\n  /** @type {SVGGraphicsElement} */\n  // @ts-ignore\n  const node = this;\n  const getScreenCTM = node.getScreenCTM;\n  let memo;\n  node.getScreenCTM = () => {\n    return node.isConnected ? (memo = getScreenCTM.call(node)) : memo;\n  };\n}\n","import { brush as d3_brush, brushX as d3_brushX, brushY as d3_brushY, select } from 'd3';\nimport { patchScreenCTM } from './patchScreenCTM.js';\n\nfunction wrap(brush) {\n  const brushOn = brush.on;\n  let enabled = true;\n\n  function silence(callback) {\n    enabled = false;\n    callback();\n    enabled = true;\n  }\n\n  brush.reset = (...args) => {\n    silence(() => brush.clear(...args));\n  };\n\n  brush.moveSilent = (...args) => {\n    silence(() => brush.move(...args));\n  };\n\n  brush.on = (...args) => {\n    if (args.length > 1 && args[1]) {\n      // wrap callback to respect enabled flag\n      const callback = args[1];\n      args[1] = (...event) => enabled && callback(...event);\n    }\n    return brushOn(...args);\n  };\n\n  return brush;\n}\n\nexport function brush() {\n  return wrap(d3_brush());\n}\n\nexport function brushX() {\n  return wrap(d3_brushX());\n}\n\nexport function brushY() {\n  return wrap(d3_brushY());\n}\n\nexport function brushGroups(svg, root, dx, dy, className) {\n  let groups = select(root ?? svg)\n    .append('g')\n    .attr('class', className)\n\n  // if the plot is faceted, create per-facet brush groups\n  const fx = svg.scale('fx');\n  const fy = svg.scale('fy');\n  if (fx || fy) {\n    const X = fx?.domain.map(v => fx.apply(v) - dx);\n    const Y = fy?.domain.map(v => fy.apply(v) - dy);\n    if (X && Y) {\n      for (let i = 0; i < X.length; ++i) {\n        for (let j = 0; j < Y.length; ++j) {\n          groups.append('g').attr('transform', `translate(${X[i]}, ${Y[j]})`);\n        }\n      }\n    } else if (X) {\n      for (let i = 0; i < X.length; ++i) {\n        groups.append('g').attr('transform', `translate(${X[i]}, 0})`);\n      }\n    } else if (Y) {\n      for (let j = 0; j < Y.length; ++j) {\n        groups.append('g').attr('transform', `translate(0, ${Y[j]})`);\n      }\n    }\n    groups = groups.selectAll('g');\n  }\n\n  // return brush groups, with screen transform fix\n  return groups.each(patchScreenCTM);\n}\n","const EPS = 1e-12;\n\nexport function closeTo(a, b) {\n  return a === b || (\n    a && b &&\n    Math.abs(a[0] - b[0]) < EPS &&\n    Math.abs(a[1] - b[1]) < EPS\n  ) || false;\n}\n","import { isNode } from '@uwdata/mosaic-sql';\n\nfunction extractField(field) {\n  if (isNode(field)) {\n    if (field.type === 'COLUMN_REF') {\n      // @ts-ignore\n      return field.column;\n    } else if (field.type === 'AGGREGATE') {\n      // @ts-ignore\n      return field.args[0] ?? field;\n    }\n  }\n  return field;\n}\n\nexport function getField(mark, channel) {\n  return extractField(mark.channelField(channel)?.field);\n}\n\nexport function getFields(mark, channels) {\n  const fields = [];\n  const as = [];\n  channels.forEach(c => {\n    const q = c === 'color' ? ['color', 'fill', 'stroke']\n      : c === 'x' ? ['x', 'x1', 'x2']\n      : c === 'y' ? ['y', 'y1', 'y2']\n      : [c];\n    for (let i = 0; i < q.length; ++i) {\n      const f = mark.channelField(q[i], { exact: true });\n      if (f) {\n        fields.push(extractField(f.field));\n        as.push(f.as);\n        return;\n      }\n    }\n    throw new Error(`Missing channel: ${c}`);\n  });\n  return { fields, as };\n}\n","export function invert(value, scale, pixelSize = 1) {\n  return scale.invert(pixelSize * Math.floor(value / pixelSize));\n}\n","import { clauseInterval } from '@uwdata/mosaic-core';\nimport { ascending, min, max } from 'd3';\nimport { brushGroups, brushX, brushY } from './util/brush.js';\nimport { closeTo } from './util/close-to.js';\nimport { getField } from './util/get-field.js';\nimport { invert } from './util/invert.js';\nimport { sanitizeStyles } from './util/sanitize-styles.js';\n\n/**\n * @import {Activatable} from '@uwdata/mosaic-core'\n * @implements {Activatable}\n */\nexport class Interval1D {\n  constructor(mark, {\n    channel,\n    selection,\n    field = undefined,\n    pixelSize = 1,\n    peers = true,\n    brush: style\n  }) {\n    this.mark = mark;\n    this.channel = channel;\n    this.pixelSize = pixelSize || 1;\n    this.selection = selection;\n    this.peers = peers;\n    this.field = field || getField(mark, channel);\n    this.style = style && sanitizeStyles(style);\n    this.brush = channel === 'y' ? brushY() : brushX();\n    this.brush.on('brush end', ({ selection }) => this.publish(selection));\n  }\n\n  reset() {\n    this.value = undefined;\n    if (this.g) this.brush.reset(this.g);\n  }\n\n  activate() {\n    this.selection.activate(this.clause(this.value || [0, 1]));\n  }\n\n  publish(extent) {\n    let range = undefined;\n    if (extent) {\n      range = extent\n        .map(v => invert(v, this.scale, this.pixelSize))\n        .sort((a, b) => a - b);\n    }\n    if (!closeTo(range, this.value)) {\n      this.value = range;\n      this.g.call(this.brush.moveSilent, extent);\n      this.selection.update(this.clause(range));\n    }\n  }\n\n  clause(value) {\n    const { mark, pixelSize, field, scale } = this;\n    return clauseInterval(field, value, {\n      source: this,\n      clients: this.peers ? mark.plot.markSet : new Set().add(mark),\n      scale,\n      pixelSize\n    });\n  }\n\n  init(svg, root) {\n    const { brush, channel, style } = this;\n    this.scale = svg.scale(channel);\n    const range = this.value?.map(this.scale.apply).sort(ascending);\n\n    const rx = svg.scale('x').range;\n    const ry = svg.scale('y').range;\n    brush.extent([[min(rx), min(ry)], [max(rx), max(ry)]]);\n    this.g = brushGroups(svg, root, min(rx), min(ry), `interval-${channel}`)\n      .call(brush)\n      .call(brush.moveSilent, range);\n\n    if (style) {\n      const brushes = this.g.selectAll('rect.selection');\n      for (const name in style) {\n        brushes.attr(name, style[name]);\n      }\n    }\n\n    svg.addEventListener('pointerenter', evt => {\n      if (!evt.buttons) this.activate();\n    });\n  }\n}\n","import { clauseIntervals } from '@uwdata/mosaic-core';\nimport { ascending, min, max } from 'd3';\nimport { brush, brushGroups } from './util/brush.js';\nimport { closeTo } from './util/close-to.js';\nimport { getField } from './util/get-field.js';\nimport { invert } from './util/invert.js';\nimport { sanitizeStyles } from './util/sanitize-styles.js';\n\n/**\n * @import {Activatable} from '@uwdata/mosaic-core'\n * @implements {Activatable}\n */\nexport class Interval2D {\n  constructor(mark, {\n    selection,\n    xfield,\n    yfield,\n    pixelSize = 1,\n    peers = true,\n    brush: style\n  }) {\n    this.mark = mark;\n    this.pixelSize = pixelSize || 1;\n    this.selection = selection;\n    this.peers = peers;\n    this.xfield = xfield || getField(mark, 'x');\n    this.yfield = yfield || getField(mark, 'y');\n    this.style = style && sanitizeStyles(style);\n    this.brush = brush();\n    this.brush.on('brush end', ({ selection }) => this.publish(selection));\n  }\n\n  reset() {\n    this.value = undefined;\n    if (this.g) this.brush.reset(this.g);\n  }\n\n  activate() {\n    this.selection.activate(this.clause(this.value || [[0, 1], [0, 1]]));\n  }\n\n  publish(extent) {\n    const { value, pixelSize, xscale, yscale } = this;\n\n    let xr = undefined;\n    let yr = undefined;\n    if (extent) {\n      const [a, b] = extent;\n      xr = [a[0], b[0]].map(v => invert(v, xscale, pixelSize)).sort(ascending);\n      yr = [a[1], b[1]].map(v => invert(v, yscale, pixelSize)).sort(ascending);\n    }\n\n    if (!closeTo(xr, value?.[0]) || !closeTo(yr, value?.[1])) {\n      this.value = extent ? [xr, yr] : undefined;\n      this.g.call(this.brush.moveSilent, extent);\n      this.selection.update(this.clause(this.value));\n    }\n  }\n\n  clause(value) {\n    const { mark, pixelSize, xfield, yfield, xscale, yscale } = this;\n    return clauseIntervals([xfield, yfield], value, {\n      source: this,\n      clients: this.peers ? mark.plot.markSet : new Set().add(mark),\n      scales: [xscale, yscale],\n      pixelSize\n    });\n  }\n\n  init(svg) {\n    const { brush, style, value } = this;\n    const xscale = this.xscale = svg.scale('x');\n    const yscale = this.yscale = svg.scale('y');\n    const rx = xscale.range;\n    const ry = yscale.range;\n    brush.extent([[min(rx), min(ry)], [max(rx), max(ry)]]);\n    this.g = brushGroups(svg, null, min(rx), min(ry), 'interval-xy').call(brush);\n\n    if (style) {\n      const brushes = this.g.selectAll('rect.selection');\n      for (const name in style) {\n        brushes.attr(name, style[name]);\n      }\n    }\n\n    if (value) {\n      const [x1, x2] = value[0].map(xscale.apply).sort(ascending);\n      const [y1, y2] = value[1].map(yscale.apply).sort(ascending);\n      this.g.call(brush.moveSilent, [[x1, y1], [x2, y2]]);\n    }\n\n    svg.addEventListener('pointerenter', evt => {\n      if (!evt.buttons) this.activate();\n    });\n  }\n}\n","/** @import { ClauseSource } from '@uwdata/mosaic-core' */\nimport { clausePoint, clausePoints, isSelection } from '@uwdata/mosaic-core';\nimport { select, pointer, min } from 'd3';\nimport { getField } from './util/get-field.js';\n\n/**\n * @import {Activatable} from '@uwdata/mosaic-core'\n * @implements {Activatable}\n */\nexport class Nearest {\n  constructor(mark, {\n    selection,\n    pointer,\n    channels,\n    fields,\n    maxRadius = 40\n  }) {\n    this.mark = mark;\n    this.selection = selection;\n    this.clients = new Set().add(mark);\n    this.pointer = pointer;\n    this.channels = channels || (\n      pointer === 'x' ? ['x'] : pointer === 'y' ? ['y'] : ['x', 'y']\n    );\n    this.fields = fields || this.channels.map(c => getField(mark, [c]));\n    this.maxRadius = maxRadius;\n    this.valueIndex = -1;\n  }\n\n  clause(value) {\n    const { clients, fields } = this;\n    const opt = { source: /** @type {ClauseSource} */(this), clients };\n    // if only one field, use a simpler clause that passes the value\n    // this allows a single field selection value to act like a param\n    return fields.length > 1\n      ? clausePoints(fields, value ? [value] : value, opt)\n      : clausePoint(fields[0], value?.[0], opt);\n  }\n\n  init(svg) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const that = this;\n    const { mark, channels, selection, maxRadius } = this;\n    const { data: { columns } } = mark;\n    const keys = channels.map(c => mark.channelField(c).as);\n    const param = !isSelection(selection);\n\n    // extract x, y coordinates for data values and determine scale factors\n    const [X, Y] = calculateXY(svg, mark);\n    const sx = this.pointer === 'y' ? 0.01 : 1;\n    const sy = this.pointer === 'x' ? 0.01 : 1;\n\n    const root = select(svg);\n\n    // find value nearest to pointer and update param or selection\n    // we don't pass undefined values to params, but do allow empty selections\n    root.on('pointerenter pointerdown pointermove', function(evt) {\n      const [px, py] = pointer(evt, this);\n      const i = findNearest(X, Y, px, py, sx, sy, maxRadius);\n      if (i !== this.valueIndex) {\n        this.valueIndex = i;\n        const v = i < 0 ? undefined : keys.map(k => columns[k][i]);\n        selection.update(\n          // provide value for param, clause for selection\n          param ? (!v || v.length > 1 ? v : v[0]) : that.clause(v)\n        );\n      }\n    });\n\n    // if not a selection, we're done\n    if (param) return;\n\n    // clear selection upon pointer exit\n    root.on('pointerleave', () => {\n      selection.update(that.clause(undefined));\n    });\n\n    // trigger activation updates\n    svg.addEventListener('pointerenter', evt => {\n      if (!evt.buttons) this.activate();\n    });\n  }\n\n  activate() {\n    const v = this.channels.map(() => 0);\n    this.selection.activate(this.clause(v));\n  }\n}\n\n/**\n * Extract x, y coordinates for data values.\n */\nfunction calculateXY(svg, mark) {\n  const { data: { columns } } = mark;\n  const data = c => columns[mark.channelField(c)?.as];\n  const scale = c => svg.scale(c);\n\n  const sx = svg.scale('x');\n  const sy = svg.scale('y');\n  const sfx = scale('fx')?.apply;\n  const sfy = scale('fy')?.apply;\n\n  const X = Array.from(data('x'), sx.apply);\n  const Y = Array.from(data('y'), sy.apply);\n\n  // as needed, adjust coordinates by facets\n  if (sfx) {\n    const dx = min(sx.range);\n    const FX = data('fx');\n    for (let i = 0; i < FX.length; ++i) {\n      X[i] += sfx(FX[i]) - dx;\n    }\n  }\n  if (sfy) {\n    const dy = min(sy.range);\n    const FY = data('fy');\n    for (let i = 0; i < FY.length; ++i) {\n      Y[i] += sfy(FY[i]) - dy;\n    }\n  }\n\n  return [X, Y];\n}\n\n/**\n * Find the nearest data point to the pointer. The nearest point\n * is found via Euclidean distance, but with scale factors *sx* and\n * *sy* applied to the x and y distances. For example, to prioritize\n * selection along the x-axis, use *sx* = 1, *sy* = 0.01.\n * @param {number[]} x Array of data point x coordinate values.\n * @param {number[]} y Array of data point y coordinate values.\n * @param {number} px The x coordinate of the pointer.\n * @param {number} py The y coordinate of the pointer.\n * @param {number} sx A scale factor for x coordinate spans.\n * @param {number} sy A scale factor for y coordinate spans.\n * @param {number} maxRadius The maximum pointer distance for selection.\n * @returns {number} An integer index into the data array corresponding\n *  to the nearest data point, or -1 if no nearest point is found.\n */\nfunction findNearest(x, y, px, py, sx, sy, maxRadius) {\n  let dist = maxRadius * maxRadius;\n  let nearest = -1;\n  for (let i = 0; i < x.length; ++i) {\n    const dx = sx * (x[i] - px);\n    const dy = sy * (y[i] - py);\n    const dd = dx * dx + dy * dy;\n    if (dd <= dist) {\n      dist = dd;\n      nearest = i;\n    }\n  }\n  return nearest;\n}\n","/** @import { ClauseSource } from '@uwdata/mosaic-core' */\nimport { Selection, clauseInterval } from '@uwdata/mosaic-core';\nimport { select, zoom, ZoomTransform } from 'd3';\nimport { getField } from './util/get-field.js';\n\nconst asc = (a, b) => a - b;\n\n/**\n * @import {Activatable} from '@uwdata/mosaic-core'\n * @implements {Activatable}\n */\nexport class PanZoom {\n  constructor(mark, {\n    x = new Selection(),\n    y = new Selection(),\n    xfield,\n    yfield,\n    zoom = true,\n    panx = true,\n    pany = true\n  }) {\n    this.mark = mark;\n    this.xsel = x;\n    this.ysel = y;\n    this.xfield = xfield || getField(mark, 'x');\n    this.yfield = yfield || getField(mark, 'y');\n    this.zoom = extent(zoom, [0, Infinity], [1, 1]);\n    this.panx = this.xsel && panx;\n    this.pany = this.ysel && pany;\n\n    const { plot } = mark;\n    if (panx) {\n      this.xsel.addEventListener('value', value => {\n        if (plot.setAttribute('xDomain', value)) plot.update();\n      });\n    }\n    if (pany) {\n      this.ysel.addEventListener('value', value => {\n        if (plot.setAttribute('yDomain', value)) plot.update();\n      });\n    }\n  }\n\n  publish(transform) {\n    if (this.panx) {\n      const xdom = rescaleX(transform, this.xscale);\n      this.xsel.update(this.clause(xdom, this.xfield, this.xscale));\n    }\n    if (this.pany) {\n      const ydom = rescaleY(transform, this.yscale);\n      this.ysel.update(this.clause(ydom, this.yfield, this.yscale));\n    }\n  }\n\n  clause(value, field, scale) {\n    return clauseInterval(field, value, {\n      source: /** @type {ClauseSource} */(this),\n      clients: this.mark.plot.markSet,\n      scale\n    });\n  }\n\n  init(svg) {\n    this.svg = svg;\n    if (this.initialized) return; else this.initialized = true;\n\n    const { panx, pany, mark: { plot: { element } } } = this;\n\n    this.xscale = svg.scale('x');\n    this.yscale = svg.scale('y');\n    const rx = this.xscale.range.slice().sort(asc);\n    const ry = this.yscale.range.slice().sort(asc);\n    const tx = extent(panx, [-Infinity, Infinity], rx);\n    const ty = extent(pany, [-Infinity, Infinity], ry);\n\n    const z = zoom()\n      .extent([[rx[0], ry[0]], [rx[1], ry[1]]])\n      .scaleExtent(this.zoom)\n      .translateExtent([[tx[0], ty[0]], [tx[1], ty[1]]])\n      .on('start', () => {\n        this.xscale = this.svg.scale('x');\n        this.yscale = this.svg.scale('y');\n      })\n      .on('end', () => element.__zoom = new ZoomTransform(1, 0, 0))\n      .on('zoom', ({ transform }) => this.publish(transform));\n\n    select(element).call(z);\n\n    if (panx || pany) {\n      let enter = false;\n      element.addEventListener('pointerenter', evt => {\n        if (enter) return; else enter = true;\n        if (!evt.buttons) this.activate(); // don't activate if mouse down\n      });\n      element.addEventListener('pointerleave', () => enter = false);\n    }\n  }\n\n  activate() {\n    if (this.panx) {\n      const { xscale, xfield } = this;\n      this.xsel.activate(this.clause(xscale.domain, xfield, xscale));\n    }\n    if (this.pany) {\n      const { yscale, yfield } = this;\n      this.ysel.activate(this.clause(yscale.domain, yfield, yscale));\n    }\n  }\n}\n\nfunction extent(ext, defaultTrue, defaultFalse) {\n  return ext\n    ? (Array.isArray(ext) ? ext : defaultTrue)\n    : defaultFalse;\n}\n\nfunction rescaleX(transform, scale) {\n  return scale.range\n    .map(transform.invertX, transform)\n    .map(scale.invert, scale);\n}\n\nfunction rescaleY(transform, scale) {\n  return scale.range\n    .map(transform.invertY, transform)\n    .map(scale.invert, scale);\n}\n","const paramCounts = { m:2, l:2, h:1, v:1, z:0, c:6, s:4, q:4, t:2, a:7 };\nconst commandPattern = /[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi;\nconst numberPattern = /^[+-]?(([0-9]*\\.[0-9]+)|([0-9]+\\.)|([0-9]+))([eE][+-]?[0-9]+)?/;\nconst spacePattern = /^((\\s+,?\\s*)|(,\\s*))/;\nconst flagPattern = /^[01]/;\n\nconst errmsg = attr => `Invalid SVG path, incorrect parameter ${attr}`;\n\n/**\n * Parse an SVG path into a list of drawing commands.\n * @param {string} path The SVG path string to parse\n * @returns {[string, ...number][]} A list of drawing commands.\n *  Each command has a single letter as the first entry. All subsequent\n *  entries are numeric parameter values.\n */\nexport function parsePath(path) {\n  const commands = [];\n  const matches = path.match(commandPattern) || [];\n\n  matches.forEach(str => {\n    let cmd = str[0];\n    const type = cmd.toLowerCase();\n\n    // parse parameters\n    const paramCount = paramCounts[type];\n    const params = parseParams(type, paramCount, str.slice(1).trim());\n    const count = params.length;\n\n    // error checking based on parameter count\n    if (count < paramCount || (count && count % paramCount !== 0)) {\n      throw new Error(errmsg('count'));\n    }\n\n    // register the command\n    commands.push([cmd, ...params.slice(0, paramCount)]);\n\n    // exit now if we're done, also handles zero-param 'z'\n    if (count === paramCount) {\n      return;\n    }\n\n    // handle implicit line-to\n    if (type === 'm') {\n      cmd = (cmd === 'M') ? 'L' : 'l';\n    }\n\n    // repeat command when given extended param list\n    for (let i = paramCount; i < count; i += paramCount) {\n      commands.push([cmd, ...params.slice(i, i + paramCount)]);\n    }\n  });\n\n  return commands;\n}\n\nfunction parseParams(type, paramCount, segment) {\n  const params = [];\n\n  for (let index = 0; paramCount && index < segment.length; ) {\n    for (let i = 0; i < paramCount; ++i) {\n      const pattern = type === 'a' && (i === 3 || i === 4) ? flagPattern : numberPattern;\n      const match = segment.slice(index).match(pattern);\n\n      if (match === null) {\n        throw new Error(errmsg('type'));\n      }\n\n      index += match[0].length;\n      params.push(+match[0]);\n\n      const ws = segment.slice(index).match(spacePattern);\n      if (ws !== null) {\n        index += ws[0].length;\n      }\n    }\n  }\n\n  return params;\n}\n","import { parsePath } from './parse-path.js';\n\n/**\n * Return SVG elements that intersect the provided spatial extent.\n * @param {SVGSVGElement} svg Parent SVG element to search within.\n * @param {SVGElement} el SVG container element to search for points.\n * @param {[[number, number], [number, number]]} extent Rectangular brush\n *  extent within which to select elements. The extent is represented as\n *  upper-left and bottom-right (x, y) coordinates.\n * @returns {Element[]} A list of intersecting SVG elements.\n */\nexport function intersect(svg, el, extent) {\n  // svg origin in viewport coordinates\n  const { x, y } = svg.getBoundingClientRect();\n  const identity = svg.createSVGMatrix();\n\n  // collect elements that intersect the extent\n  const list = [];\n  for (const child of el.children) {\n    if (child.tagName === 'g') {\n      // handle faceted mark\n      const matrix = getTransformMatrix(child) ?? identity;\n      for (const grandchild of child.children) {\n        if (intersects(extent, x, y, grandchild, matrix)) {\n          list.push(grandchild);\n        }\n      }\n    } else if (intersects(extent, x, y, child, identity)) {\n      list.push(child);\n    }\n  }\n  return list;\n}\n\nfunction intersects(sel, ox, oy, el, matrix) {\n  let [[l, t], [r, b]] = sel;\n\n  // facet groups involve translation only\n  const { e: tx, f: ty } = matrix;\n\n  // getBoundingClientRect uses viewport coordinates\n  // so we first translate to SVG coordinates\n  const c = el.getBoundingClientRect();\n  const cl = c.left - ox;\n  const cr = c.right - ox;\n  const ct = c.top - oy;\n  const cb = c.bottom - oy;\n\n  if (cl >= l && cr <= r && ct >= t && cb <= b) {\n    // if selection encloses item bounds, we're done\n    return true;\n  } else if (cl <= r && cr >= l && ct <= b && cb >= t) {\n    // if selection intersects item bounds, test further\n    let tag = el.tagName;\n\n    // if a hyperlink, use enclosed element\n    if (tag === 'a') {\n      el = el.children[0];\n      tag = el.tagName;\n    }\n\n    // handle marks that rely solely on bbox intersection\n    if (tag === 'rect' || tag === 'text' || tag === 'image') {\n      return true;\n    }\n\n    // translate selection relative to enclosing group\n    l -= tx;\n    t -= ty;\n    r -= tx;\n    b -= ty;\n\n    switch (tag) {\n      case 'circle':\n        return intersectCircle(l, t, r, b, $(el.cx), $(el.cy), $(el.r));\n      case 'line':\n        return intersectLine(l, t, r, b, $(el.x1), $(el.y1), $(el.x2), $(el.y2));\n      case 'path':\n        return intersectPath(l, t, r, b, el);\n    }\n  }\n  return false;\n}\n\nfunction $(attr) {\n  return attr.baseVal.value;\n}\n\nfunction getTransformMatrix(el) {\n  const transform = el.transform.baseVal;\n  const n = transform.length;\n  let m = transform[0]?.matrix;\n  for (let i = 1; i < n; ++i) {\n    m = m.multiply(transform[i].matrix);\n  }\n  return m;\n}\n\nfunction intersectCircle(l, t, r, b, cx, cy, cr) {\n  const h = l <= cx && cx <= r;\n  const v = t <= cy && cy <= b;\n  if (h && v) return true; // center is enclosed\n\n  const dx = Math.min(Math.abs(l - cx), Math.abs(r - cx));\n  if (v && dx <= cr) return true;\n\n  const dy = Math.min(Math.abs(t - cy), Math.abs(b - cy));\n  return (h && dy <= cr) || (dx * dx + dy * dy <= cr * cr);\n}\n\nfunction intersectLine(l, t, r, b, x1, y1, x2, y2) {\n  const xmin = Math.max(Math.min(x1, x2), l);\n  const xmax = Math.min(Math.max(x1, x2), r);\n  if (xmin > xmax) return false;\n  let yl1 = y1;\n  let yl2 = y2;\n  const dx = x2 - x1;\n  if (Math.abs(dx) > 1e-8) {\n    const a = (y2 - y1) / dx;\n    const b = y1 - a * x1;\n    yl1 = a * xmin + b;\n    yl2 = a * xmax + b;\n  }\n  const ymin = Math.max(Math.min(yl1, yl2), t);\n  const ymax = Math.min(Math.max(yl1, yl2), b);\n  return ymin <= ymax;\n}\n\nexport function intersectPath(l, t, r, b, el) {\n  // parse path and cache result for reuse\n  const cmds = el.__path__ || (el.__path__ = parsePath(el.getAttribute('d')));\n\n  let anchorX = 0;\n  let anchorY = 0;\n  let x = 0;\n  let y = 0;\n  let hit = false;\n  let poly = [0, 0];\n  let n = 2;\n\n  const matrix = getTransformMatrix(el);\n\n  const setAnchor = (ax, ay) => {\n    poly.length = n = 2;\n    poly[0] = x = anchorX = ax;\n    poly[1] = y = anchorY = ay;\n  };\n\n  const anchor = matrix\n    ? (x, y) => setAnchor(multiplyX(matrix, x, y), multiplyY(matrix, x, y))\n    : (x, y) => setAnchor(x, y);\n\n  const test = (x2, y2) => {\n    poly[n] = x2;\n    poly[n+1] = y2;\n    n += 2;\n    return intersectLine(l, t, r, b, poly[n-4], poly[n-3], x2, y2);\n  }\n\n  const lineTo = matrix\n    ? (x2, y2) => {\n        hit = test(\n          multiplyX(matrix, x = x2, y = y2),\n          multiplyY(matrix, x2, y2)\n        );\n      }\n    : (x2, y2) => { hit = test(x = x2, y = y2); };\n\n  for (let i = 0; i < cmds.length; ++i) {\n    const cmd = cmds[i];\n    switch (cmd[0]) {\n      case 'M': anchor(cmd[1], cmd[2]); break;\n      case 'm': anchor(x + cmd[1], y + cmd[2]); break;\n      case 'L':\n      case 'T': lineTo(cmd[1], cmd[2]); break;\n      case 'H': lineTo(cmd[1], y); break;\n      case 'V': lineTo(x, cmd[1]); break;\n      case 'l':\n      case 't': lineTo(x + cmd[1], y + cmd[2]); break;\n      case 'h': lineTo(x + cmd[1], y); break;\n      case 'v': lineTo(x, y + cmd[1]); break;\n\n      // approximate bezier curve as line for now\n      case 'C': lineTo(cmd[5], cmd[6]); break;\n      case 'c': lineTo(x + cmd[5], y + cmd[6]); break;\n      case 'S':\n      case 'Q': lineTo(cmd[3], cmd[4]); break;\n      case 's':\n      case 'q': lineTo(x + cmd[3], y + cmd[4]); break;\n\n      // we don't expect to see arcs other than geo point circles\n      // but just in case, approximate via straight line for now\n      case 'A': lineTo(cmd[6], cmd[7]); break;\n      case 'a':\n        if (isCircle(cmds, i)) {\n          // special case for geo point circle\n          return intersectCircle(l, t, r, b, x, y - cmd[2], cmd[2]);\n        } else {\n          lineTo(x + cmd[6], x + cmd[7]);\n        }\n        break;\n\n      case 'z':\n      case 'Z':\n        lineTo(anchorX, anchorY);\n        if (pointInPolygon(l, t, poly) > 0) return true;\n        anchor(anchorX, anchorY);\n        break;\n      default:\n        // bail for now\n        console.warn('SVG path command not supported: ', cmd[0]);\n        return false;\n    }\n    if (hit) return true;\n  }\n  return false;\n}\n\nfunction multiplyX(m, x, y) {\n  return m.a * x + m.c * y + m.e;\n}\n\nfunction multiplyY(m, x, y) {\n  return m.b * x + m.d * y + m.f;\n}\n\nfunction isCircle(cmds, i) {\n  const a = cmds[i];\n  const b = cmds[i+1];\n  return b && b[0] === 'a'\n    && cmds[i+2]?.[0] === 'z'\n    && a[1] === a[2]\n    && b[1] === b[2]\n    && a[1] === b[1]\n    && a[7] === -b[7];\n}\n\n/**\n * Point in polygon test, based on Dan Sunday's winding number algorithm.\n * https://web.archive.org/web/20130126163405/http://geomalgorithms.com/a03-_inclusion.html\n * @param {number} x The x-coordinate to test for inclusion\n * @param {number} y The y-coordinate to test for inclusion\n * @param {number[]} poly Polygon vertices as a flat array of numbers\n * @returns {number} The winding number. Non-zero values indicate inclusion.\n */\nfunction pointInPolygon(x, y, poly) {\n  let wn = 0;\n  const n = poly.length - 2;\n\n  for (let i = 0; i < n; i += 2) {\n    if (poly[i + 1] <= y) {\n      // an upward crossing and (x,y) left of edge\n      if (poly[i + 3] > y && isLeft(x, y, poly, i) > 0)\n         ++wn; // valid up intersect\n    }\n    // a downward crossing and (x,y) right of edge\n    else if (poly[i + 3] <= y && isLeft(x, y, poly[i]) < 0) {\n      --wn; // valid down intersect\n    }\n  }\n\n  return wn;\n}\n\nfunction isLeft(x, y, p, i) {\n  return (p[i+2] - p[i]) * (y - p[i+1]) - (x - p[i]) * (p[i+3] - p[i+1]);\n}","export function neqSome(a, b) {\n  return (a == null || b == null)\n    ? (a != null || b != null)\n    : (a.length !== b.length || a.some((x, i) => neq(x, b[i])));\n}\n\nexport function neq(a, b) {\n  const n = a.length;\n  if (b.length !== n) return true;\n  for (let i = 0; i < n; ++i) {\n    if (a[i] !== b[i]) return true;\n  }\n  return false;\n}\n","import { clausePoints } from '@uwdata/mosaic-core';\nimport { select } from 'd3';\nimport { brush } from './util/brush.js';\nimport { getFields } from './util/get-field.js';\nimport { intersect } from './util/intersect.js';\nimport { patchScreenCTM } from './util/patchScreenCTM.js';\nimport { sanitizeStyles } from './util/sanitize-styles.js';\nimport { neqSome } from './util/neq.js';\nimport { getDatum } from './util/get-datum.js';\n\n/**\n * @import {Activatable} from '@uwdata/mosaic-core'\n * @implements {Activatable}\n */\nexport class Region {\n  constructor(mark, {\n    channels,\n    selection,\n    peers = true,\n    brush: style = {\n      fill: 'none',\n      stroke: 'currentColor',\n      strokeDasharray: '1,1'\n    }\n  }) {\n    this.mark = mark;\n    this.selection = selection;\n    this.peers = peers;\n\n    this.style = style && sanitizeStyles(style);\n    this.brush = brush();\n    this.brush.on('brush end', evt => this.publish(evt.selection));\n    this.extent = null;\n    this.groups = null;\n\n    const { fields, as } = getFields(mark, channels);\n    this.fields = fields;\n    this.as = as;\n  }\n\n  reset() {\n    this.value = undefined;\n    this.extent = null;\n    if (this.g) this.brush.reset(this.g);\n  }\n\n  activate() {\n    this.selection.activate(this.clause([this.fields.map(() => 0)]));\n  }\n\n  clause(value) {\n    const { fields, mark } = this;\n    return clausePoints(fields, value, {\n      source: this,\n      clients: this.peers ? mark.plot.markSet : new Set().add(mark)\n    });\n  }\n\n  publish(extent) {\n    const { as, group, mark, svg } = this;\n    let value;\n\n    // extract channel values for points\n    if (extent) {\n      const { data: { columns = {} } = {} } = mark;\n      const map = new Map;\n      intersect(svg, group, extent).forEach(el => {\n        const index = getDatum(el);\n        const vals = as.map(name => columns[name][index]);\n        map.set(vals.join('|'), vals); // deduplicate values\n      });\n      value = Array.from(map.values());\n    }\n    this.extent = extent;\n\n    if (neqSome(value, this.value)) {\n      this.value = value;\n      this.selection.update(this.clause(value));\n    }\n  }\n\n  init(svg) {\n    const { brush, extent, mark, style } = this;\n    this.svg = svg;\n\n    const w = svg.width.baseVal.value;\n    const h = svg.height.baseVal.value;\n    brush.extent([[0, 0], [w, h]]);\n\n    // isolate eligible mark group\n    this.group = svg.querySelector(`[data-index=\"${mark.index}\"]`);\n\n    // create a single brush, regardless of facets\n    this.g = select(svg)\n      .append('g')\n      .attr('class', `region-xy`)\n      .each(patchScreenCTM)\n      .call(brush)\n      .call(brush.moveSilent, extent);\n\n    if (style) {\n      const brushes = this.g.selectAll('rect.selection');\n      for (const name in style) {\n        brushes.attr(name, style[name]);\n      }\n    }\n\n    svg.addEventListener('pointerenter', evt => {\n      if (!evt.buttons) this.activate();\n    });\n  }\n}\n","/** @import { ClauseSource } from '@uwdata/mosaic-core' */\nimport { clausePoints } from '@uwdata/mosaic-core';\nimport { getDatum } from './util/get-datum.js';\nimport { neq, neqSome } from './util/neq.js';\n\n/**\n * @import {Activatable} from '@uwdata/mosaic-core'\n * @implements {Activatable}\n */\nexport class Toggle {\n  /**\n   * @param {*} mark The mark to interact with.\n   * @param {*} options The interactor options.\n   */\n  constructor(mark, {\n    selection,\n    channels,\n    peers = true\n  }) {\n    this.mark = mark;\n    this.value = null;\n    this.selection = selection;\n    this.peers = peers;\n    const fields = this.fields = [];\n    const as = this.as = [];\n    channels.forEach(c => {\n      const q = c === 'color' ? ['color', 'fill', 'stroke']\n        : c === 'x' ? ['x', 'x1', 'x2']\n        : c === 'y' ? ['y', 'y1', 'y2']\n        : [c];\n      for (let i = 0; i < q.length; ++i) {\n        const f = mark.channelField(q[i], { exact: true });\n        if (f) {\n          fields.push(f.field?.basis || f.field);\n          as.push(f.as);\n          return;\n        }\n      }\n      throw new Error(`Missing channel: ${c}`);\n    });\n  }\n\n  clause(value) {\n    const { fields, mark } = this;\n    return clausePoints(fields, value, {\n      source: /** @type {ClauseSource} */(this),\n      clients: this.peers ? mark.plot.markSet : new Set().add(mark)\n    });\n  }\n\n  init(svg, selector, accessor) {\n    const { mark, as, selection } = this;\n    const { data: { columns = {} } = {} } = mark;\n    accessor ??= target => as.map(name => columns[name][getDatum(target)]);\n\n    selector ??= `[data-index=\"${mark.index}\"]`;\n    const groups = Array.from(svg.querySelectorAll(selector));\n\n    svg.addEventListener('pointerdown', evt => {\n      const state = selection.single ? selection.value : this.value;\n      const target = evt.target;\n      let value = null;\n\n      if (isTargetElement(groups, target)) {\n        const point = accessor(target);\n        if ((evt.shiftKey || evt.metaKey) && state?.length) {\n          value = state.filter(s => neq(s, point));\n          if (value.length === state.length) value.push(point);\n        } else if (state?.length === 1 && !neq(state[0], point)) {\n          value = null;\n        } else {\n          value = [point];\n        }\n      }\n\n      this.value = value;\n      if (neqSome(state, value)) {\n        selection.update(this.clause(value));\n      }\n    });\n\n    svg.addEventListener('pointerenter', evt => {\n      if (!evt.buttons) this.activate();\n    });\n  }\n\n  activate() {\n    this.selection.activate(this.clause([this.fields.map(() => 0)]));\n  }\n}\n\nfunction isTargetElement(groups, node) {\n  return groups.some(g => g.contains(node));\n}\n","import { scale } from '@observablehq/plot';\nimport { Interval1D } from './interactors/Interval1D.js';\nimport { Toggle } from './interactors/Toggle.js';\n\nconst TOGGLE_SELECTOR = ':scope > div, :scope > span';\nconst SWATCH = 'swatch';\nconst RAMP = 'ramp';\n\nexport class Legend {\n  constructor(channel, options) {\n    const { as, field, ...rest } = options;\n    this.channel = channel;\n    this.options = rest;\n    this.type = null;\n    this.handler = null;\n    this.selection = as;\n    this.field = field;\n    this.legend = null;\n\n    this.element = document.createElement('div');\n    this.element.setAttribute('class', 'legend');\n    Object.defineProperty(this.element, 'value', { value: this });\n  }\n\n  setPlot(plot) {\n    this.plot = plot;\n  }\n\n  init(svg) {\n    // createLegend sets this.legend, may set this.handler\n    const el = createLegend(this, svg);\n    this.element.replaceChildren(el);\n    return this.element;\n  }\n\n  update() {\n    if (!this.legend) return;\n    const { selection, handler } = this;\n    const { single, value } = selection;\n\n    // extract currently selected values\n    const vals = single ? value : selection.valueFor(handler);\n    const curr = vals && vals.length ? new Set(vals.map(v => v[0])) : null;\n\n    const nodes = this.legend.querySelectorAll(TOGGLE_SELECTOR);\n    for (const node of nodes) {\n      const selected = curr ? curr.has(node.__data__) : true;\n      node.style.opacity = selected ? 1 : 0.2;\n    }\n  }\n}\n\nfunction createLegend(legend, svg) {\n  const { channel, plot, selection } = legend;\n  const scale = svg.scale(channel);\n  const type = scale.type === 'ordinal' ? SWATCH : RAMP;\n\n  const options = {\n    label: plot.getAttribute(`${channel}Label`) ?? null,\n    ...legend.options\n  };\n\n  // labels for swatch legends are not yet supported by Plot\n  // track here: https://github.com/observablehq/plot/issues/834\n  // for consistent layout, adjust sizing when there is no label\n  const opt = type === SWATCH ? options\n    : options.label ? { tickSize: 2, ...options }\n    : { tickSize: 2, marginTop: 1, height: 29, ...options };\n\n  // instantiate new legend element, bind to Legend class\n  const el = svg.legend(channel, opt);\n  legend.legend = el;\n\n  // if this is an interactive legend, add a scale lookup function\n  // this allows interval interactors to access encoding information\n  let interactive = !!selection;\n  if (interactive && type === RAMP) {\n    const width = opt.width ?? 240; // 240 is default ramp length\n    const spatial = spatialScale(scale, width);\n    if (spatial) {\n      el.scale = function(type) {\n        return type === 'x' ? { range: [0, width] }\n          : type === 'y' ? { range: [-10, 0] }\n          : type === channel ? spatial\n          : undefined;\n      };\n    } else {\n      // spatial scale construction failed, disable interaction\n      interactive = false;\n    }\n  }\n\n  // initialize interactors to use updated legend element\n  if (interactive) {\n    const handler = getInteractor(legend, type);\n    if (type === SWATCH) {\n      handler.init(el, TOGGLE_SELECTOR, el => [el.__data__]);\n      legend.update();\n    } else {\n      handler.init(el, el.querySelector('g:last-of-type'));\n    }\n  }\n\n  return el;\n}\n\nfunction getInteractor(legend, type) {\n  const { channel, handler, selection } = legend;\n\n  // exit early if already instantiated\n  if (handler) return handler;\n\n  // otherwise instantiate an appropriate interactor\n  const mark = interactorMark(legend);\n  if (type === SWATCH) {\n    legend.handler = new Toggle(mark, {\n      selection,\n      channels: [channel],\n      peers: false\n    });\n    selection.addEventListener('value', () => legend.update());\n  } else {\n    legend.handler = new Interval1D(mark, {\n      selection,\n      channel,\n      brush: { fill: 'none', stroke: 'currentColor' },\n      peers: false\n    });\n  }\n\n  return legend.handler;\n}\n\n// generate a faux mark to pass to an interactor\nfunction interactorMark(legend) {\n  const { channel, plot } = legend;\n  const field = legend.field ?? findField(plot.marks, channel) ?? 'value';\n  if (field) {\n    const f = { field };\n    return { plot, channelField: c => channel === c ? f : undefined };\n  }\n}\n\n// search marks for a backing data field for the legend\nfunction findField(marks, channel) {\n  const channels = channel === 'color' ? ['fill', 'stroke']\n    : channel === 'opacity' ? ['opacity', 'fillOpacity', 'strokeOpacity']\n    : null;\n  if (channels == null) return null;\n  for (let i = marks.length - 1; i > -1; --i) {\n    for (const c of channels) {\n      const field = marks[i].channelField(c, { exact: true });\n      if (field) return field.field;\n    }\n  }\n  return null;\n}\n\n// generate a spatial scale to brush within color or opacity ramps\nfunction spatialScale(sourceScale, width) {\n  // separate out reusable parts of the scale definition\n  // eslint-disable-next-line no-unused-vars\n  const { apply, invert, interpolate, ...rest } = sourceScale;\n\n  // extract basic source scale type\n  let src = sourceScale.type;\n  if (src.startsWith('diverging-')) src = src.slice(11);\n\n  // determine spatial scale type\n  let type;\n  switch (src) {\n    case 'log':\n    case 'pow':\n    case 'sqrt':\n    case 'symlog':\n      type = src;\n      break;\n    case 'threshold':\n    case 'quantize':\n    case 'quantile':\n      // these scales do not expose an invert method\n      // the legends use color ramps with discrete swatches\n      // in the future we could try to support toggle-style\n      // interactions that map to threshold range selections\n      console.warn(`Legends do not yet support ${src} scales.`);\n      return null;\n    default:\n      type = 'linear';\n  }\n\n  return scale({ x: { ...rest, type, range: [0, width] } });\n}\n","import { ExprNode, binDate, binHistogram } from '@uwdata/mosaic-sql';\nimport { Transform } from '../symbols.js';\nimport { channelScale } from '../marks/util/channel-scale.js';\n\nconst EXTENT = new Set([\n  'rectY-x', 'rectX-y', 'rect-x', 'rect-y', 'ruleY-x', 'ruleX-y'\n]);\n\nexport function hasExtent(mark, channel) {\n  return EXTENT.has(`${mark.type}-${channel}`);\n}\n\nexport function bin(field, options = {}) {\n  const fn = (mark, channel) => {\n    if (hasExtent(mark, channel)) {\n      return {\n        [`${channel}1`]: binNode(mark, channel, field, options),\n        [`${channel}2`]: binNode(mark, channel, field, { ...options, offset: 1 })\n      };\n    } else {\n      return {\n        [channel]: binNode(mark, channel, field, options)\n      };\n    }\n  };\n  fn[Transform] = true;\n  return fn;\n}\n\nfunction binNode(mark, channel, column, options) {\n  return new BinTransformNode(column, mark, channel, options);\n}\n\nfunction hasTimeScale(mark, channel) {\n  const scale = mark.plot.getAttribute(`${channel}Scale`);\n  return scale === 'utc' || scale === 'time';\n}\n\nclass BinTransformNode extends ExprNode {\n  constructor(column, mark, channel, options) {\n    super('COLUMN_REF');\n    this.column = column;\n    this.mark = mark;\n    this.channel = channel;\n    this.options = options;\n  }\n\n  get stats() {\n    return { column: this.column, stats: ['min', 'max'] };\n  }\n\n  toString() {\n    const { mark, channel, column, options } = this;\n    const { type, min, max } = mark.channelField(channel);\n    const isDate = options.interval\n      || type === 'date'\n      || hasTimeScale(mark, channel);\n    const result = isDate\n      ? binDate(column, [min, max], options)\n      : binHistogram(column, [min, max], options, channelScale(mark, channel));\n    return `${result}`;\n  }\n}\n","import { coordinator, MosaicClient } from '@uwdata/mosaic-core';\n\n/**\n * Instantiate an input, register it with the coordinator, and\n * return the corresponding HTML element.\n * @template {new (...args: any) => Input} T\n * @param {T} InputClass\n * @param {ConstructorParameters<T>} params\n * @returns {HTMLElement} The container element of the input.\n */\nexport function input(InputClass, ...params) {\n  const input = new InputClass(...params);\n  coordinator().connect(input);\n  return input.element;\n}\n\n/**\n * Base class for input components.\n * @import {Activatable} from '@uwdata/mosaic-core'\n * @implements {Activatable}\n */\nexport class Input extends MosaicClient {\n  /**\n   * Create a new input instance.\n   * @param {import('@uwdata/mosaic-core').Selection} [filterBy] A selection\n   *  with which to filter backing data that parameterizes this input.\n   * @param {HTMLElement} [element] Optional container HTML element to use.\n   * @param {string} [className] A class name to set on the container element.\n   */\n  constructor(filterBy, element, className = 'input') {\n    super(filterBy);\n    this.element = element || document.createElement('div');\n    if (className) this.element.setAttribute('class', className);\n    Object.defineProperty(this.element, 'value', { value: this });\n  }\n\n  activate() {\n    // subclasses should override\n  }\n}\n","/** @import { Param, Selection } from '@uwdata/mosaic-core' */\nimport { isParam, isSelection, clausePoint, clauseList } from '@uwdata/mosaic-core';\nimport { Query, unnest } from '@uwdata/mosaic-sql';\nimport { Input, input } from './input.js';\n\nconst isObject = v => {\n  return v && typeof v === 'object' && !Array.isArray(v);\n};\n\n/**\n * Create a new menu input instance.\n * @param {object} [options] Options object\n * @param {HTMLElement} [options.element] The parent DOM element in which to\n *  place the menu elements. If undefined, a new `div` element is created.\n * @param {Selection} [options.filterBy] A selection to filter the database\n *  table indicated by the *from* option.\n * @param {Param} [options.as] The output param or selection. A selection\n *  clause is added for the currently selected menu option.\n * @param {string} [options.field] The database column name to use within\n *  generated selection clause predicates. Defaults to the *column* option.\n * @param {(any | { value: any, label?: string })[]} [options.options] An\n *  array of menu options, as literal values or option objects. Option\n *  objects have a `value` property and an optional `label` property. If no\n *  label or *format* function is provided, the string-coerced value is used.\n * @param {(value: any) => string} [options.format] A format function that\n *  takes an option value as input and generates a string label. The format\n *  function is not applied when an explicit label is provided in an option\n *  object.\n * @param {*} [options.value] The initial selected menu value.\n * @param {string} [options.from] The name of a database table to use as a data\n *  source for this widget. Used in conjunction with the *column* option.\n * @param {string} [options.column] The name of a database column from which\n *  to pull menu options. The unique column values are used as menu options.\n *  Used in conjunction with the *from* option.\n * @param {string} [options.label] A text label for this input.\n * @param {'any' | 'all'} [options.listMatch] The list match mode.\n * @returns {HTMLElement} The container element for a menu input.\n */\nexport const menu = options => input(Menu, options);\n\n/**\n * A HTML <select>-based dropdown menu input.\n * @extends {Input}\n */\nexport class Menu extends Input {\n  /**\n   * Create a new menu input.\n   * @param {object} [options] Options object\n   * @param {HTMLElement} [options.element] The parent DOM element in which to\n   *  place the menu elements. If undefined, a new `div` element is created.\n   * @param {Selection} [options.filterBy] A selection to filter the database\n   *  table indicated by the *from* option.\n   * @param {Param} [options.as] The output param or selection. A selection\n   *  clause is added for the currently selected menu option.\n   * @param {string} [options.field] The database column name to use within\n   *  generated selection clause predicates. Defaults to the *column* option.\n   * @param {(any | { value: any, label?: string })[]} [options.options] An\n   *  array of menu options, as literal values or option objects. Option\n   *  objects have a `value` property and an optional `label` property. If no\n   *  label or *format* function is provided, the string-coerced value is used.\n   * @param {(value: any) => string} [options.format] A format function that\n   *  takes an option value as input and generates a string label. The format\n   *  function is not applied when an explicit label is provided in an option\n   *  object.\n   * @param {*} [options.value] The initial selected menu value.\n   * @param {string} [options.from] The name of a database table to use as a data\n   *  source for this widget. Used in conjunction with the *column* option.\n   * @param {string} [options.column] The name of a database column from which\n   *  to pull menu options. The unique column values are used as menu options.\n   *  Used in conjunction with the *from* option.\n   * @param {string} [options.label] A text label for this input.\n   * @param {'any' | 'all'} [options.listMatch] The list match mode.\n   */\n  constructor({\n    element,\n    filterBy,\n    as,\n    from,\n    column,\n    label = column,\n    format = x => x, // TODO\n    options,\n    value,\n    field = column,\n    listMatch,\n  } = {}) {\n    super(filterBy, element);\n    this.from = from;\n    this.column = column;\n    this.format = format;\n    this.field = field;\n    this.listMatch = listMatch;\n    const selection = this.selection = as;\n\n    const lab = document.createElement('label');\n    lab.innerText = label || column;\n    this.element.appendChild(lab);\n\n    this.select = document.createElement('select');\n    this.element.appendChild(this.select);\n\n    // if provided, populate menu options\n    if (options) {\n      this.data = options.map(opt => isObject(opt) ? opt : { value: opt });\n      this.selectedValue(value === undefined ? '' : value);\n      this.update();\n    }\n\n    // initialize selection or param bindings\n    if (selection) {\n      const isParam = !isSelection(selection);\n\n      // publish any initial menu value to the selection/param\n      // later updates propagate this back to the menu element\n      // do not publish if using a param that already has a value\n      if (value != null && (!isParam || selection.value === undefined)) {\n        this.publish(value);\n      }\n\n      // publish selected value upon menu change\n      this.select.addEventListener('input', () => {\n        this.publish(this.selectedValue() ?? null);\n      });\n\n      // if bound to a scalar param, respond to value updates\n      if (isParam) {\n        this.selection.addEventListener('value', value => {\n          if (value !== this.select.value) {\n            this.selectedValue(value);\n          }\n        });\n      } else {\n        // trigger selection activation\n        this.select.addEventListener('pointerenter', evt => {\n          if (!evt.buttons) this.activate();\n        });\n        this.select.addEventListener('focus', () => this.activate());\n      }\n    }\n  }\n\n  selectedValue(value) {\n    if (arguments.length === 0) {\n      const index = this.select.selectedIndex;\n      return this.data[index].value;\n    } else {\n      const index = this.data?.findIndex(opt => opt.value === value);\n      if (index >= 0) {\n        this.select.selectedIndex = index;\n      } else {\n        this.select.value = String(value);\n      }\n    }\n  }\n\n  reset() {\n    this.select.selectedIndex = this.from ? 0 : -1;\n  }\n\n  activate() {\n    if (isSelection(this.selection)) {\n      this.selection.activate(clausePoint(this.field, 0, { source: this }));\n    }\n  }\n\n  publish(value) {\n    const { selection, field, listMatch } = this;\n    if (isSelection(selection)) {\n      if (value === '') value = undefined; // 'All' option\n      const clause = listMatch\n        ? clauseList(field, value, { source: this, listMatch })\n        : clausePoint(field, value, { source: this });\n      selection.update(clause);\n    } else if (isParam(selection)) {\n      selection.update(value);\n    }\n  }\n\n  query(filter = []) {\n    const { from, column, listMatch } = this;\n    if (!from) return null;\n    return Query\n      .from(from)\n      .select({ value: listMatch ? unnest(column) : column })\n      .distinct()\n      .where(filter)\n      .orderby(column)\n  }\n\n  queryResult(data) {\n    // column option values, with an inserted 'All' value\n    this.data = [{ value: '', label: 'All' }, ...data];\n    return this;\n  }\n\n  update() {\n    const { data, format, select, selection } = this;\n\n    // generate menu item options\n    select.replaceChildren();\n    for (const { value, label } of data) {\n      const opt = document.createElement('option');\n      opt.setAttribute('value', value);\n      opt.innerText = label ?? format(value);\n      this.select.appendChild(opt);\n    }\n\n    // update menu value based on param/selection\n    if (selection) {\n      const value = isSelection(selection)\n        ? selection.valueFor(this)\n        : selection.value;\n      this.selectedValue(value === undefined ? '' : value);\n    }\n\n    return this;\n  }\n}\n","/** @import { Param, Selection } from '@uwdata/mosaic-core' */\nimport { isParam, isSelection, clauseMatch } from '@uwdata/mosaic-core';\nimport { Query } from '@uwdata/mosaic-sql';\nimport { Input, input } from './input.js';\n\nlet _id = 0;\n\n/**\n * Create a new text search input instance.\n * @param {object} [options] Options object\n * @param {HTMLElement} [options.element] The parent DOM element in which to\n *  place the search elements. If undefined, a new `div` element is created.\n * @param {Selection} [options.filterBy] A selection to filter the database\n *  table indicated by the *from* option.\n * @param {Param} [options.as] The output param or selection. A selection\n *  clause is added based on the current text search query.\n * @param {string} [options.field] The database column name to use within\n *  generated selection clause predicates. Defaults to the *column* option.\n * @param {'contains' | 'prefix' | 'suffix' | 'regexp'} [options.type] The\n *  type of text search query to perform. One of:\n *  - `\"contains\"` (default): the query string may appear anywhere in the text\n *  - `\"prefix\"`: the query string must appear at the start of the text\n *  - `\"suffix\"`: the query string must appear at the end of the text\n *  - `\"regexp\"`: the query string is a regular expression the text must match\n * @param {string} [options.from] The name of a database table to use as an\n *  autocomplete data source for this widget. Used in conjunction with the\n *  *column* option.\n * @param {string} [options.column] The name of a database column from which\n *  to pull valid search results. The unique column values are used as search\n *  autocomplete values. Used in conjunction with the *from* option.\n * @param {string} [options.label] A text label for this input.\n * @returns {HTMLElement} The container element for a text search input.\n */\nexport const search = options => input(Search, options);\n\n/**\n * A HTML text search input.\n * @extends {Input}\n */\nexport class Search extends Input {\n  /**\n   * Create a new text search input.\n   * @param {object} [options] Options object\n   * @param {HTMLElement} [options.element] The parent DOM element in which to\n   *  place the search elements. If undefined, a new `div` element is created.\n   * @param {Selection} [options.filterBy] A selection to filter the database\n   *  table indicated by the *from* option.\n   * @param {Param} [options.as] The output param or selection. A selection\n   *  clause is added based on the current text search query.\n   * @param {string} [options.field] The database column name to use within\n   *  generated selection clause predicates. Defaults to the *column* option.\n   * @param {'contains' | 'prefix' | 'suffix' | 'regexp'} [options.type] The\n   *  type of text search query to perform. One of:\n   *  - `\"contains\"` (default): the query string may appear anywhere in the text\n   *  - `\"prefix\"`: the query string must appear at the start of the text\n   *  - `\"suffix\"`: the query string must appear at the end of the text\n   *  - `\"regexp\"`: the query string is a regular expression the text must match\n   * @param {string} [options.from] The name of a database table to use as an\n   *  autocomplete data source for this widget. Used in conjunction with the\n   *  *column* option.\n   * @param {string} [options.column] The name of a database column from which\n   *  to pull valid search results. The unique column values are used as search\n   *  autocomplete values. Used in conjunction with the *from* option.\n   * @param {string} [options.label] A text label for this input.\n   */\n  constructor({\n    element,\n    filterBy,\n    from,\n    column,\n    label,\n    type = 'contains',\n    field = column,\n    as\n  } = {}) {\n    super(filterBy, element);\n    this.id = 'search_' + (++_id);\n    this.type = type;\n    this.from = from;\n    this.column = column;\n    this.selection = as;\n    this.field = field;\n\n    if (label) {\n      const lab = document.createElement('label');\n      lab.setAttribute('for', this.id);\n      lab.innerText = label;\n      this.element.appendChild(lab);\n    }\n\n    this.searchbox = document.createElement('input');\n    this.searchbox.setAttribute('id', this.id);\n    this.searchbox.setAttribute('type', 'text');\n    this.searchbox.setAttribute('placeholder', 'Query');\n    this.element.appendChild(this.searchbox);\n\n    if (this.selection) {\n      this.searchbox.addEventListener('input', () => {\n        this.publish(this.searchbox.value || null);\n      });\n      if (!isSelection(this.selection)) {\n        this.selection.addEventListener('value', value => {\n          if (value !== this.searchbox.value) {\n            this.searchbox.value = value;\n          }\n        });\n      } else {\n        // trigger selection activation\n        this.searchbox.addEventListener('pointerenter', evt => {\n          if (!evt.buttons) this.activate();\n        });\n        this.searchbox.addEventListener('focus', () => this.activate());\n      }\n    }\n  }\n\n  reset() {\n    this.searchbox.value = '';\n  }\n\n  clause(value) {\n    const { field, type } = this;\n    return clauseMatch(field, value, { source: this, method: type });\n  }\n\n  activate() {\n    if (isSelection(this.selection)) {\n      this.selection.activate(this.clause(''));\n    }\n  }\n\n  publish(value) {\n    const { selection } = this;\n    if (isSelection(selection)) {\n      selection.update(this.clause(value));\n    } else if (isParam(selection)) {\n      selection.update(value);\n    }\n  }\n\n  query(filter = []) {\n    const { from, column } = this;\n    if (!from) return null;\n    return Query\n      .from(from)\n      .select({ list: column })\n      .distinct()\n      .where(filter);\n  }\n\n  queryResult(data) {\n    this.data = data;\n    return this;\n  }\n\n  update() {\n    const list = document.createElement('datalist');\n    const id = `${this.id}_list`;\n    list.setAttribute('id', id);\n    for (const d of this.data) {\n      const opt = document.createElement('option');\n      opt.setAttribute('value', d.list);\n      list.append(opt);\n    }\n    if (this.datalist) this.datalist.remove();\n    this.element.appendChild(this.datalist = list);\n    this.searchbox.setAttribute('list', id);\n    return this;\n  }\n}\n","/** @import { ClauseSource, Param, Selection } from '@uwdata/mosaic-core' */\nimport { clauseInterval, clausePoint, isParam, isSelection } from '@uwdata/mosaic-core';\nimport { Query, max, min } from '@uwdata/mosaic-sql';\nimport { Input, input } from './input.js';\n\nlet _id = 0;\n\n/**\n * Create a new slider input instance.\n * @param {object} [options] Options object\n * @param {HTMLElement} [options.element] The parent DOM element in which to\n *  place the slider elements. If undefined, a new `div` element is created.\n * @param {Selection} [options.filterBy] A selection to filter the database\n *  table indicated by the *from* option.\n * @param {Param} [options.as] The output param or selection. A selection\n *  clause is added based on the currently selected slider option.\n * @param {string} [options.field] The database column name to use within\n *  generated selection clause predicates. Defaults to the *column* option.\n * @param {'point' | 'interval'} [options.select] The type of selection clause\n *  predicate to generate if the **as** option is a Selection.  If `'point'`\n *  (the default), the selection predicate is an equality check for the slider\n *  value. If `'interval'`, the predicate checks an interval from the minimum\n *  to the current slider value.\n * @param {number} [options.min] The minimum slider value.\n * @param {number} [options.max] The maximum slider value.\n * @param {number} [options.step] The slider step, the amount to increment\n *  between consecutive values.\n * @param {number} [options.value] The initial slider value.\n * @param {string} [options.from] The name of a database table to use as a data\n *  source for this widget. Used in conjunction with the *column* option.\n *  The minimum and maximum values of the column determine the slider range.\n * @param {string} [options.column] The name of a database column whose values\n *  determine the slider range. Used in conjunction with the *from* option.\n *  The minimum and maximum values of the column determine the slider range.\n * @param {string} [options.label] A text label for this input.\n * @param {number} [options.width] The width of the slider in screen pixels.\n * @returns {HTMLElement} The container element for a slider input.\n */\nexport const slider = options => input(Slider, options);\n\n/**\n * A HTML range-based slider input.\n * @extends {Input}\n */\nexport class Slider extends Input {\n  /**\n   * Create a new slider input.\n   * @param {object} [options] Options object\n   * @param {HTMLElement} [options.element] The parent DOM element in which to\n   *  place the slider elements. If undefined, a new `div` element is created.\n   * @param {Selection} [options.filterBy] A selection to filter the database\n   *  table indicated by the *from* option.\n   * @param {Param} [options.as] The output param or selection. A selection\n   *  clause is added based on the currently selected slider option.\n   * @param {string} [options.field] The database column name to use within\n   *  generated selection clause predicates. Defaults to the *column* option.\n   * @param {'point' | 'interval'} [options.select] The type of selection clause\n   *  predicate to generate if the **as** option is a Selection.  If `'point'`\n   *  (the default), the selection predicate is an equality check for the slider\n   *  value. If `'interval'`, the predicate checks an interval from the minimum\n   *  to the current slider value.\n   * @param {number} [options.min] The minimum slider value.\n   * @param {number} [options.max] The maximum slider value.\n   * @param {number} [options.step] The slider step, the amount to increment\n   *  between consecutive values.\n   * @param {number} [options.value] The initial slider value.\n   * @param {string} [options.from] The name of a database table to use as a data\n   *  source for this widget. Used in conjunction with the *column* option.\n   *  The minimum and maximum values of the column determine the slider range.\n   * @param {string} [options.column] The name of a database column whose values\n   *  determine the slider range. Used in conjunction with the *from* option.\n   *  The minimum and maximum values of the column determine the slider range.\n   * @param {string} [options.label] A text label for this input.\n   * @param {number} [options.width] The width of the slider in screen pixels.\n   */\n  constructor({\n    element,\n    filterBy,\n    as,\n    min,\n    max,\n    step,\n    from,\n    column,\n    label = column,\n    value = as?.value,\n    select = 'point',\n    field = column,\n    width\n  } = {}) {\n    super(filterBy, element);\n    this.id = 'slider_' + (++_id);\n    this.from = from;\n    this.column = column || 'value';\n    this.selection = as;\n    this.selectionType = select;\n    this.field = field;\n    this.min = min;\n    this.max = max;\n    this.step = step;\n\n    if (label) {\n      const desc = document.createElement('label');\n      desc.setAttribute('for', this.id);\n      desc.innerText = label;\n      this.element.appendChild(desc);\n    }\n\n    this.slider = document.createElement('input');\n    this.slider.setAttribute('id', this.id);\n    this.slider.setAttribute('type', 'range');\n    if (width != null) this.slider.style.width = `${+width}px`;\n    if (min != null) this.slider.setAttribute('min', `${min}`);\n    if (max != null) this.slider.setAttribute('max', `${max}`);\n    if (step != null) this.slider.setAttribute('step', `${step}`);\n    this.element.appendChild(this.slider);\n\n    this.curval = document.createElement('label');\n    this.curval.setAttribute('for', this.id);\n    this.curval.setAttribute('class', 'value');\n    this.element.appendChild(this.curval);\n\n    // handle initial value\n    if (value != null) {\n      this.slider.setAttribute('value', `${value}`);\n      if (this.selection?.value === undefined) this.publish(value);\n    }\n    this.curval.innerText = this.slider.value;\n\n    // respond to slider input\n    this.slider.addEventListener('input', () => {\n      const { value } = this.slider;\n      this.curval.innerText = value;\n      if (this.selection) this.publish(+value);\n    });\n\n\n    if (this.selection) {\n      if (!isSelection(this.selection)) {\n        // track param updates\n        this.selection.addEventListener('value', value => {\n          if (value !== +this.slider.value) {\n            this.slider.value = value;\n            this.curval.innerText = value;\n          }\n        });\n      } else {\n        // trigger selection activation\n        this.slider.addEventListener('pointerenter', evt => {\n          if (!evt.buttons) this.activate();\n        });\n        this.slider.addEventListener('focus', () => this.activate());\n      }\n    }\n  }\n\n  query(filter = []) {\n    const { from, column } = this;\n    if (!from || (this.min != null && this.max != null)) return null;\n    return Query\n      .select({ min: min(column), max: max(column) })\n      .from(from)\n      .where(filter);\n  }\n\n  queryResult(data) {\n    const { min, max } = Array.from(data)[0];\n    if (this.min == null) {\n      this.min = min;\n      this.slider.setAttribute('min', `${min}`);\n    }\n    if (this.max == null) {\n      this.max = max;\n      this.slider.setAttribute('max', `${max}`);\n    }\n    if (this.step == null) {\n      this.step = (max - min) / 500;\n      this.slider.setAttribute('step', `${this.step}`);\n    }\n    return this;\n  }\n\n  clause(value) {\n    const { field, selectionType } = this;\n    if (selectionType === 'interval') {\n      /** @type {[number, number]} */\n      const domain = [this.min ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: /** @type {ClauseSource} */(this),\n        bin: 'ceil',\n        scale: { type: 'identity', domain },\n        pixelSize: this.step\n      });\n    } else {\n      return clausePoint(field, value, { source: /** @type {ClauseSource} */(this) });\n    }\n  }\n\n  activate() {\n    if (isSelection(this.selection)) {\n      this.selection.activate(this.clause(0));\n    }\n  }\n\n  publish(value) {\n    const { selection } = this;\n    if (isSelection(selection)) {\n      selection.update(this.clause(value));\n    } else if (isParam(this.selection)) {\n      selection.update(value);\n    }\n  }\n}\n","\n// Note: use formatAuto (or any other localized format) to present values to the\n// user; stringify is only intended for machine values.\nexport function stringify(x) {\n  return x == null ? '' : `${x}`;\n}\n\nexport const formatLocaleAuto = localize(locale => {\n  const formatNumber = formatLocaleNumber(locale);\n  return value => value == null ? ''\n    : typeof value === 'number' ? formatNumber(value)\n    : value instanceof Date ? formatDate(value)\n    : `${value}`;\n});\n\nexport const formatLocaleNumber = localize(locale => {\n  return value => value === 0 ? '0' : value.toLocaleString(locale); // handle negative zero\n});\n\nexport const formatAuto = formatLocaleAuto();\n\nexport const formatNumber = formatLocaleNumber();\n\nexport function formatTrim(value) {\n  const s = value.toString();\n  const n = s.length;\n  let i0 = -1, i1;\n  out: for (let i = 1; i < n; ++i) {\n    switch (s[i]) {\n      case '.': i0 = i1 = i; break;\n      case '0': if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n\nexport function formatDate(date) {\n  return isoformat(date, 'Invalid Date');\n}\n\n// Memoize the last-returned locale.\nexport function localize(f) {\n  let key = null;\n  let value;\n  return (locale = 'en') => locale === key\n    ? value\n    : (value = f(key = locale));\n}\n\n// Code below modified from https://github.com/mbostock/isoformat/\n// Added here due to longstanding unmerged fixes on original package\n//\n// Copyright 2021 Mike Bostock\n//\n// Permission to use, copy, modify, and/or distribute this software for any purpose\n// with or without fee is hereby granted, provided that the above copyright notice\n// and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n// REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n// INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\n// OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER\n// TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF\n// THIS SOFTWARE.\n\n/**\n * Format a Date in ISO format.\n * @param {Date} date The date to format\n * @param {string | ((date: Date) => string)} fallback Fallback value or function.\n * @returns {string}\n */\nfunction isoformat(date, fallback) {\n  if (!(date instanceof Date)) date = new Date(+date);\n  if (isNaN(+date)) return typeof fallback === \"function\" ? fallback(date) : fallback;\n  const hours = date.getUTCHours();\n  const minutes = date.getUTCMinutes();\n  const seconds = date.getUTCSeconds();\n  const milliseconds = date.getUTCMilliseconds();\n  return `${formatYear(date.getUTCFullYear())}-${pad(date.getUTCMonth() + 1, 2)}-${pad(date.getUTCDate(), 2)}${\n    hours || minutes || seconds || milliseconds ? `T${pad(hours, 2)}:${pad(minutes, 2)}${\n      seconds || milliseconds ? `:${pad(seconds, 2)}${\n        milliseconds ? `.${pad(milliseconds, 3)}` : ``\n      }` : ``\n    }Z` : ``\n  }`;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? `-${pad(-year, 6)}`\n    : year > 9999 ? `+${pad(year, 6)}`\n    : pad(year, 4);\n}\n\nfunction pad(value, width) {\n  return `${value}`.padStart(width, \"0\");\n}\n","/**\n * @import { ClauseSource, Selection } from '@uwdata/mosaic-core'\n * @import { FilterExpr } from '@uwdata/mosaic-sql'\n */\nimport { clausePoints, coordinator, isParam, isSelection, queryFieldInfo, toDataColumns } from '@uwdata/mosaic-core';\nimport { Query, desc } from '@uwdata/mosaic-sql';\nimport { formatDate, formatLocaleAuto, formatLocaleNumber } from './util/format.js';\nimport { Input, input } from './input.js';\n\nlet _id = -1;\n\n/**\n * Create a new table input instance.\n * @param {object} options Options object\n * @param {HTMLElement} [options.element] The parent DOM element in which to\n *  place the table element. If undefined, a new `div` element is created.\n * @param {Selection} [options.filterBy] A selection to filter the database\n *  table indicated by the *from* option.\n * @param {Selection} [options.as] The output selection. A selection\n *  clause is added for the currently selected table row.\n * @param {{ [name: string]: 'left' | 'right' | 'center' }} [options.align]\n *  An object that maps column names to horiztonal text alignment values. If\n *  unspecified, alignment is determined based on the column data type.\n * @param {{ [name: string]: (value: any) => string }} [options.format] An\n *  object that maps column names to format functions to use for that\n *  column's data. Each format function takes a value as input and generates\n *  formatted text to show in the table.\n * @param {string} [options.from] The name of a database table to use as a data\n *  source for this widget. Used in conjunction with the *columns* option.\n * @param {string[]} [options.columns] The name of database columns to include\n *  in the table component. If unspecified, all columns are included.\n *  Used in conjunction with the *from* option.\n * @param {number | { [name: string]: number }} [options.width] If a number,\n *  sets the desired width of the table, in pixels. If an object, is used to\n *  set explicit pixel widts for each named column included in the object.\n * @param {number} [options.maxWidth] The maximum width of the table, in pixels.\n * @param {number} [options.height] The desired height of the table, in pixels.\n * @param {number} [options.rowBatch] The number of rows to request per query\n *  batch. The batch size will be used to prefetch data beyond the currently\n *  visible range.\n * @returns {HTMLElement} The container element for a table component.\n */\nexport const table = options => input(Table, options);\n\n/**\n * A HTML table based table component.\n * @extends {Input}\n */\nexport class Table extends Input {\n  /**\n   * Create a new Table instance.\n   * @param {object} options Options object\n   * @param {HTMLElement} [options.element] The parent DOM element in which to\n   *  place the table element. If undefined, a new `div` element is created.\n   * @param {Selection} [options.filterBy] A selection to filter the database\n   *  table indicated by the *from* option.\n   * @param {Selection} [options.as] The output selection. A selection\n   *  clause is added for the currently selected table row.\n   * @param {{ [name: string]: 'left' | 'right' | 'center' }} [options.align]\n   *  An object that maps column names to horiztonal text alignment values. If\n   *  unspecified, alignment is determined based on the column data type.\n   * @param {{ [name: string]: (value: any) => string }} [options.format] An\n   *  object that maps column names to format functions to use for that\n   *  column's data. Each format function takes a value as input and generates\n   *  formatted text to show in the table.\n   * @param {string} [options.from] The name of a database table to use as a data\n   *  source for this widget. Used in conjunction with the *columns* option.\n   * @param {string[]} [options.columns] The name of database columns to include\n   *  in the table component. If unspecified, all columns are included.\n   *  Used in conjunction with the *from* option.\n   * @param {number | { [name: string]: number }} [options.width] If a number,\n   *  sets the desired width of the table, in pixels. If an object, is used to\n   *  set explicit pixel widts for each named column included in the object.\n   * @param {number} [options.maxWidth] The maximum width of the table, in pixels.\n   * @param {number} [options.height] The desired height of the table, in pixels.\n   * @param {number} [options.rowBatch] The number of rows to request per query\n   *  batch. The batch size will be used to prefetch data beyond the currently\n   *  visible range.\n   */\n  constructor({\n    element,\n    filterBy,\n    from,\n    columns = ['*'],\n    align = {},\n    format,\n    width,\n    maxWidth,\n    height = 500,\n    rowBatch = 100,\n    as\n  } = {}) {\n    super(filterBy, element, null);\n\n    this.id = `table-${++_id}`;\n    this.element.setAttribute('id', this.id);\n\n    this.from = from;\n    this.columns = columns;\n    this.format = format;\n    this.align = align;\n    this.widths = typeof width === 'object' ? width : {};\n\n    if (isParam(from)) {\n      // if data table is a param, re-initialize upon change\n      from.addEventListener('value', () => this.initialize());\n    }\n\n    this.offset = 0;\n    this.limit = +rowBatch;\n    this.isPending = false;\n\n    this.selection = as;\n    this.currentRow = -1;\n\n    this.sortHeader = null;\n    this.sortColumn = null;\n    this.sortDesc = false;\n\n    if (typeof width === 'number') this.element.style.width = `${width}px`;\n    if (maxWidth) this.element.style.maxWidth = `${maxWidth}px`;\n    this.element.style.maxHeight = `${height}px`;\n    this.element.style.overflow = 'auto';\n\n    let prevScrollTop = -1;\n    this.element.addEventListener('scroll', evt => {\n      const { isPending, loaded } = this;\n      // @ts-expect-error unpack event\n      const { scrollHeight, scrollTop, clientHeight } = evt.target;\n\n      const back = scrollTop < prevScrollTop;\n      prevScrollTop = scrollTop;\n      if (back || isPending || loaded) return;\n\n      if (scrollHeight - scrollTop < 2 * clientHeight) {\n        this.isPending = true;\n        this.requestData(this.offset + this.limit);\n      }\n    });\n\n    this.tbl = document.createElement('table');\n    this.element.appendChild(this.tbl);\n\n    this.head = document.createElement('thead');\n    this.tbl.appendChild(this.head);\n\n    this.body = document.createElement('tbody');\n    this.tbl.appendChild(this.body);\n\n    if (this.selection) {\n      this.body.addEventListener('pointerover', evt => {\n        const row = resolveRow(evt.target);\n        if (row > -1 && row !== this.currentRow) {\n          this.currentRow = row;\n          this.selection.update(this.clause([row]));\n        }\n      });\n      this.body.addEventListener('pointerleave', () => {\n        this.currentRow = -1;\n        this.selection.update(this.clause());\n      });\n    }\n\n    this.style = document.createElement('style');\n    this.element.appendChild(this.style);\n  }\n\n  sourceTable() {\n    return isParam(this.from) ? this.from.value : this.from;\n  }\n\n  clause(rows = []) {\n    const { data, limit, schema } = this;\n    const fields = schema.map(s => s.column);\n    const values = rows.map(row => {\n      const { columns } = data[~~(row / limit)];\n      return fields.map(f => columns[f][row % limit]);\n    });\n    return clausePoints(fields, values, { source: this });\n  }\n\n  requestData(offset = 0) {\n    this.offset = offset;\n\n    // request next data batch\n    const query = this.query(this.filterBy?.predicate(this));\n    this.requestQuery(query);\n\n    // prefetch subsequent data batch\n    coordinator().prefetch(query.clone().offset(offset + this.limit));\n  }\n\n  async prepare() {\n    // query for column scheam information\n    const table = this.sourceTable();\n    const fields = this.columns.map(column => ({ column, table }));\n    const schema = await queryFieldInfo(this.coordinator, fields);\n    this.schema = schema;\n\n    // create table header row\n    const thead = this.head;\n    thead.innerHTML = '';\n    const tr = document.createElement('tr');\n    for (const { column } of schema) {\n      const th = document.createElement('th');\n      th.addEventListener('click', evt => this.sort(evt, column));\n      th.appendChild(document.createElement('span'));\n      th.appendChild(document.createTextNode(column));\n      tr.appendChild(th);\n    }\n    thead.appendChild(tr);\n\n    // get column formatters\n    this.formats = formatof(this.format, schema);\n\n    // get column alignment style\n    this.style.innerText = tableCSS(\n      this.id,\n      alignof(this.align, schema),\n      widthof(this.widths, schema)\n    );\n  }\n\n  /**\n   * @param {FilterExpr} filter\n   */\n  query(filter = []) {\n    const { limit, offset, schema, sortColumn, sortDesc } = this;\n    return Query.from(this.sourceTable())\n      .select(schema.map(s => s.column))\n      .where(filter)\n      .orderby(sortColumn ? (sortDesc ? desc(sortColumn) : sortColumn) : [])\n      .limit(limit)\n      .offset(offset);\n  }\n\n  queryResult(data) {\n    if (!this.isPending) {\n      // data is not from an internal request, so reset table\n      this.loaded = false;\n      this.data = [];\n      this.body.replaceChildren();\n      this.offset = 0;\n    }\n    this.data.push(toDataColumns(data));\n    return this;\n  }\n\n  update() {\n    const { body, formats, data, schema, limit } = this;\n    const nf = schema.length;\n    const n = data.length - 1;\n    const rowCount = limit * n;\n\n    const { numRows, columns } = data[n];\n    const cols = schema.map(s => columns[s.column]);\n    for (let i = 0; i < numRows; ++i) {\n      const tr = document.createElement('tr');\n      Object.assign(tr, { __row__: rowCount + i });\n      for (let j = 0; j < nf; ++j) {\n        const value = cols[j][i];\n        const td = document.createElement('td');\n        td.innerText = value == null ? '' : formats[j](value);\n        tr.appendChild(td);\n      }\n      body.appendChild(tr);\n    }\n\n    if (numRows < limit) {\n      // data table has been fully loaded\n      this.loaded = true;\n    }\n\n    this.isPending = false;\n    return this;\n  }\n\n  activate() {\n    if (isSelection(this.selection)) {\n      this.selection.activate(this.clause([]));\n    }\n  }\n\n  sort(event, column) {\n    if (column === this.sortColumn) {\n      this.sortDesc = !this.sortDesc;\n    } else {\n      this.sortColumn = column;\n      this.sortDesc = false;\n    }\n\n    const th = event.currentTarget;\n    const currentHeader = this.sortHeader;\n    if (currentHeader === th && event.metaKey) {\n      currentHeader.firstChild.textContent = '';\n      this.sortHeader = null;\n      this.sortColumn = null;\n    } else {\n      if (currentHeader) currentHeader.firstChild.textContent = '';\n      this.sortHeader = th;\n      th.firstChild.textContent = this.sortDesc ? \"\"  : \"\";\n    }\n\n    // issue query for sorted data\n    this.requestData();\n  }\n}\n\n/**\n * Resolve a table row number from a table cell element.\n * @param {any} element An HTML element.\n * @returns {number} The resolved row, or -1 if not a row.\n */\nfunction resolveRow(element) {\n  const p = element.parentElement;\n  return Object.hasOwn(p, '__row__') ? +p.__row__ : -1;\n}\n\nfunction formatof(base = {}, schema, locale) {\n  return schema.map(({ column, type }) => {\n    if (column in base) {\n      return base[column];\n    } else {\n      switch (type) {\n        case 'number': return formatLocaleNumber(locale);\n        case 'date': return formatDate;\n        default: return formatLocaleAuto(locale);\n      }\n    }\n  });\n}\n\nfunction alignof(base = {}, schema) {\n  return schema.map(({ column, type }) => {\n    if (column in base) {\n      return base[column];\n    } else if (type === 'number') {\n      return 'right';\n    } else {\n      return 'left';\n    }\n  });\n}\n\nfunction widthof(base = {}, schema) {\n  return schema.map(({ column }) => base[column]);\n}\n\nfunction tableCSS(id, aligns, widths) {\n  const styles = [];\n  aligns.forEach((a, i) => {\n    const w = +widths[i];\n    if (a !== 'left' || w) {\n      const align = a !== 'left' ? `text-align:${a};` : '';\n      const width = w ? `width:${w}px;max-width:${w}px;` : '';\n      styles.push(`#${id} tr>:nth-child(${i+1}) {${align}${width}}`);\n    }\n  });\n  return styles.join(' ');\n}\n","import { coordinator } from '@uwdata/mosaic-core';\n\n/**\n * Context-sensitive connector for coordinator and clients.\n * This method proxies access to Coordinator.connect().\n * If the provided context object has an explicit coordinator, that is used.\n * Otherwise the default coordinator singleton is used.\n */\nexport function connect(ctx, ...clients) {\n  const coord = ctx?.context?.coordinator ?? coordinator();\n  for (const client of clients) {\n    coord.connect(client);\n  }\n}\n","import { Menu, Search, Slider, Table } from '@uwdata/mosaic-inputs';\nimport { connect } from './connect.js';\n\nfunction input(ctx, InputClass, options) {\n  const input = new InputClass(options);\n  connect(ctx, input); // ctx <- optional API context\n  return input.element;\n}\n\nexport function menu(options) {\n  return input(this, Menu, options);\n}\n\nexport function search(options) {\n  return input(this, Search, options);\n}\n\nexport function slider(options) {\n  return input(this, Slider, options);\n}\n\nexport function table(options) {\n  return input(this, Table, options);\n}\n","export function concat({ direction = 'vertical', wrap = false }, children) {\n  const div = document.createElement('div');\n  div.style.display = 'flex';\n  div.style.flexDirection = direction === 'vertical' ? 'column' : 'row';\n  div.style.flexWrap = !wrap ? 'nowrap' : wrap === true ? 'wrap' : wrap;\n  div.style.justifyContent = 'flex-start';\n  div.style.alignItems = 'flex-start';\n  children.forEach(child => div.appendChild(child));\n  Object.assign(div, { value: { element: div } });\n  return div;\n}\n\nexport function vconcat(...plots) {\n  return concat({ direction: 'vertical' }, plots.flat());\n}\n\nexport function hconcat(...plots) {\n  return concat({ direction: 'horizontal' }, plots.flat());\n}\n","export function space({ dim = 'width', size = 10 }) {\n  const span = document.createElement('span');\n  span.style.display = 'inline-block';\n  span.style[dim] = Number.isNaN(+size) ? size : `${size}px`;\n  return Object.assign(span, { value: { element: span } });\n}\n\nexport function vspace(size) {\n  return space({ dim: 'height', size });\n}\n\nexport function hspace(size) {\n  return space({ dim: 'width', size });\n}\n","export class NamedPlots extends Map {\n  request(name, callback) {\n    if (this.has(name)) {\n      callback(this.get(name));\n    } else {\n      const waiting = this.waiting || (this.waiting = new Map);\n      const list = waiting.get(name) || [];\n      waiting.set(name, list.concat(callback));\n    }\n  }\n  set(name, plot) {\n    if (this.has(name)) {\n      console.warn(`Overwriting named plot \"${name}\".`);\n    }\n    const { waiting } = this;\n    if (waiting?.has(name)) {\n      waiting.get(name).forEach(fn => fn(plot));\n      waiting.delete(name);\n    }\n    return super.set(name, plot);\n  }\n  clear() {\n    this.waiting?.clear();\n    return super.clear();\n  }\n}\n\n/**\n * Default instance of named plots map.\n */\nexport const namedPlots = new NamedPlots();\n\n/**\n * Context-sensitive lookup of named plots.\n * This method proxies access to the NamedPlots.request().\n * If the provided context object has a local namedPlots, that is used.\n * Otherwise the default instance is used.\n */\nexport function requestNamedPlot(ctx, name, callback) {\n  const map = ctx?.context?.namedPlots ?? namedPlots;\n  map.request(name, callback);\n}\n\n/**\n * Context-sensitive addition of named plots.\n * This method proxies access to the NamedPlots.set().\n * If the provided context object has a local namedPlots, that is used.\n * Otherwise the default instance is used.\n */\nexport function setNamedPlot(ctx, name, plot) {\n  const map = ctx?.context?.namedPlots ?? namedPlots;\n  map.set(name, plot);\n}\n","import { isParam } from '@uwdata/mosaic-core';\nimport { setNamedPlot } from './named-plots.js';\n\nexport function name(name) {\n  return plot => setNamedPlot(this, name, plot);\n}\n\nfunction setAttribute(plot, name, value) {\n  if (isParam(value)) {\n    value.addEventListener('value', value => {\n      plot.setAttribute(name, value);\n      plot.update();\n    });\n    if (value.value !== undefined) {\n      plot.setAttribute(name, value.value);\n    }\n  } else {\n    plot.setAttribute(name, value);\n  }\n}\n\nfunction attribute(name, value) {\n  return plot => { setAttribute(plot, name, value); };\n}\n\nfunction attributes(values) {\n  return plot => {\n    for (const [name, value] of Object.entries(values)) {\n      setAttribute(plot, name, value)\n    }\n  };\n}\n\nexport function margins(object) {\n  const { top, bottom, left, right } = object;\n  const attr = {};\n  if (top !== undefined) attr.marginTop = top;\n  if (bottom !== undefined) attr.marginBottom = bottom;\n  if (left !== undefined) attr.marginLeft = left;\n  if (right !== undefined) attr.marginRight = right;\n  return attributes(attr);\n}\n\nexport function margin(value) {\n  return attributes({\n    marginTop: value,\n    marginBottom: value,\n    marginLeft: value,\n    marginRight: value\n  });\n}\n\nexport function xyDomain(value) {\n  return attributes({ xDomain: value, yDomain: value });\n}\n\nconst attrf = name => value => attribute(name, value);\n\n// plot-level attributes\nexport const style = attrf('style');\nexport const width = attrf('width');\nexport const height = attrf('height');\nexport const marginLeft = attrf('marginLeft');\nexport const marginRight = attrf('marginRight');\nexport const marginTop = attrf('marginTop');\nexport const marginBottom = attrf('marginBottom');\nexport const align = attrf('align');\nexport const aspectRatio = attrf('aspectRatio');\nexport const axis = attrf('axis');\nexport const inset = attrf('inset');\nexport const grid = attrf('grid');\nexport const clip = attrf('clip');\nexport const padding = attrf('padding');\nexport const ariaLabel = attrf('ariaLabel');\nexport const ariaDescription = attrf('ariaDescription');\n\n\n// x scale attributes\nexport const xScale = attrf('xScale');\nexport const xDomain = attrf('xDomain');\nexport const xRange = attrf('xRange');\nexport const xNice = attrf('xNice');\nexport const xInset = attrf('xInset');\nexport const xInsetLeft = attrf('xInsetLeft');\nexport const xInsetRight = attrf('xInsetRight');\nexport const xClamp = attrf('xClamp');\nexport const xRound = attrf('xRound');\nexport const xAlign = attrf('xAlign');\nexport const xPadding = attrf('xPadding');\nexport const xPaddingInner = attrf('xPaddingInner');\nexport const xPaddingOuter = attrf('xPaddingOuter');\nexport const xAxis = attrf('xAxis');\nexport const xTicks = attrf('xTicks');\nexport const xTickSize = attrf('xTickSize');\nexport const xTickSpacing = attrf('xTickSpacing');\nexport const xTickPadding = attrf('xTickPadding');\nexport const xTickFormat = attrf('xTickFormat');\nexport const xTickRotate = attrf('xTickRotate');\nexport const xGrid = attrf('xGrid');\nexport const xLine = attrf('xLine');\nexport const xLabel = attrf('xLabel');\nexport const xLabelAnchor = attrf('xLabelAnchor');\nexport const xLabelArrow = attrf('xLabelArrow');\nexport const xLabelOffset = attrf('xLabelOffset');\nexport const xFontVariant = attrf('xFontVariant');\nexport const xAriaLabel = attrf('xAriaLabel');\nexport const xAriaDescription = attrf('xAriaDescription');\nexport const xPercent = attrf('xPercent');\nexport const xReverse = attrf('xReverse');\nexport const xZero = attrf('xZero');\nexport const xBase = attrf('xBase');\nexport const xExponent = attrf('xExponent');\nexport const xConstant = attrf('xConstant');\n\n// y scale attributes\nexport const yScale = attrf('yScale');\nexport const yDomain = attrf('yDomain');\nexport const yRange = attrf('yRange');\nexport const yNice = attrf('yNice');\nexport const yInset = attrf('yInset');\nexport const yInsetTop = attrf('yInsetTop');\nexport const yInsetBottom = attrf('yInsetBottom');\nexport const yClamp = attrf('yClamp');\nexport const yRound = attrf('yRound');\nexport const yAlign = attrf('yAlign');\nexport const yPadding = attrf('yPadding');\nexport const yPaddingInner = attrf('yPaddingInner');\nexport const yPaddingOuter = attrf('yPaddingOuter');\nexport const yAxis = attrf('yAxis');\nexport const yTicks = attrf('yTicks');\nexport const yTickSize = attrf('yTickSize');\nexport const yTickSpacing = attrf('yTickSpacing');\nexport const yTickPadding = attrf('yTickPadding');\nexport const yTickFormat = attrf('yTickFormat');\nexport const yTickRotate = attrf('yTickRotate');\nexport const yGrid = attrf('yGrid');\nexport const yLine = attrf('yLine');\nexport const yLabel = attrf('yLabel');\nexport const yLabelAnchor = attrf('yLabelAnchor');\nexport const yLabelArrow = attrf('yLabelArrow');\nexport const yLabelOffset = attrf('yLabelOffset');\nexport const yFontVariant = attrf('yFontVariant');\nexport const yAriaLabel = attrf('yAriaLabel');\nexport const yAriaDescription = attrf('yAriaDescription');\nexport const yPercent = attrf('yPercent');\nexport const yReverse = attrf('yReverse');\nexport const yZero = attrf('yZero');\nexport const yBase = attrf('yBase');\nexport const yExponent = attrf('yExponent');\nexport const yConstant = attrf('yConstant');\n\n// facet attributes\nexport const facetMargin = attrf('facetMargin');\nexport const facetMarginTop = attrf('facetMarginTop');\nexport const facetMarginBottom = attrf('facetMarginBottom');\nexport const facetMarginLeft = attrf('facetMarginLeft');\nexport const facetMarginRight = attrf('facetMarginRight');\nexport const facetGrid = attrf('facetGrid');\nexport const facetLabel = attrf('facetLabel');\n\n// fx scale attributes\nexport const fxDomain = attrf('fxDomain');\nexport const fxRange = attrf('fxRange');\nexport const fxInset = attrf('fxInset');\nexport const fxInsetLeft = attrf('fxInsetLeft');\nexport const fxInsetRight = attrf('fxInsetRight');\nexport const fxRound = attrf('fxRound');\nexport const fxAlign = attrf('fxAlign');\nexport const fxPadding = attrf('fxPadding');\nexport const fxPaddingInner = attrf('fxPaddingInner');\nexport const fxPaddingOuter = attrf('fxPaddingOuter');\nexport const fxAxis = attrf('fxAxis');\nexport const fxTicks = attrf('fxTicks');\nexport const fxTickSize = attrf('fxTickSize');\nexport const fxTickSpacing = attrf('fxTickSpacing');\nexport const fxTickPadding = attrf('fxTickPadding');\nexport const fxTickFormat = attrf('fxTickFormat');\nexport const fxTickRotate = attrf('fxTickRotate');\nexport const fxGrid = attrf('fxGrid');\nexport const fxLine = attrf('fxLine');\nexport const fxLabel = attrf('fxLabel');\nexport const fxLabelAnchor = attrf('fxLabelAnchor');\nexport const fxLabelOffset = attrf('fxLabelOffset');\nexport const fxFontVariant = attrf('fxFontVariant');\nexport const fxAriaLabel = attrf('fxAriaLabel');\nexport const fxAriaDescription = attrf('fxAriaDescription');\nexport const fxReverse = attrf('fxReverse');\n\n// fy scale attributes\nexport const fyDomain = attrf('fyDomain');\nexport const fyRange = attrf('fyRange');\nexport const fyInset = attrf('fyInset');\nexport const fyInsetTop = attrf('fyInsetTop');\nexport const fyInsetBottom = attrf('fyInsetBottom');\nexport const fyRound = attrf('fyRound');\nexport const fyAlign = attrf('fyAlign');\nexport const fyPadding = attrf('fyPadding');\nexport const fyPaddingInner = attrf('fyPaddingInner');\nexport const fyPaddingOuter = attrf('fyPaddingOuter');\nexport const fyAxis = attrf('fyAxis');\nexport const fyTicks = attrf('fyTicks');\nexport const fyTickSize = attrf('fyTickSize');\nexport const fyTickSpacing = attrf('fyTickSpacing');\nexport const fyTickPadding = attrf('fyTickPadding');\nexport const fyTickFormat = attrf('fyTickFormat');\nexport const fyTickRotate = attrf('fyTickRotate');\nexport const fyGrid = attrf('fyGrid');\nexport const fyLine = attrf('fyLine');\nexport const fyLabel = attrf('fyLabel');\nexport const fyLabelAnchor = attrf('fyLabelAnchor');\nexport const fyLabelOffset = attrf('fyLabelOffset');\nexport const fyFontVariant = attrf('fyFontVariant');\nexport const fyAriaLabel = attrf('fyAriaLabel');\nexport const fyAriaDescription = attrf('fyAriaDescription');\nexport const fyReverse = attrf('fyReverse');\n\n// color scale attributes\nexport const colorScale = attrf('colorScale');\nexport const colorDomain = attrf('colorDomain');\nexport const colorRange = attrf('colorRange');\nexport const colorClamp = attrf('colorClamp');\nexport const colorN = attrf('colorN');\nexport const colorNice = attrf('colorNice');\nexport const colorScheme = attrf('colorScheme');\nexport const colorInterpolate = attrf('colorInterpolate');\nexport const colorPivot = attrf('colorPivot');\nexport const colorSymmetric = attrf('colorSymmetric');\nexport const colorLabel = attrf('colorLabel');\nexport const colorPercent = attrf('colorPercent');\nexport const colorReverse = attrf('colorReverse');\nexport const colorZero = attrf('colorZero');\nexport const colorTickFormat = attrf('colorTickFormat');\nexport const colorBase = attrf('colorBase');\nexport const colorExponent = attrf('colorExponent');\nexport const colorConstant = attrf('colorConstant');\n\n// opacity scale attributes\nexport const opacityScale = attrf('opacityScale');\nexport const opacityDomain = attrf('opacityDomain');\nexport const opacityRange = attrf('opacityRange');\nexport const opacityClamp = attrf('opacityClamp');\nexport const opacityNice = attrf('opacityNice');\nexport const opacityLabel = attrf('opacityLabel');\nexport const opacityPercent = attrf('opacityPercent');\nexport const opacityReverse = attrf('opacityReverse');\nexport const opacityZero = attrf('opacityZero');\nexport const opacityTickFormat = attrf('opacityTickFormat');\nexport const opacityBase = attrf('opacityBase');\nexport const opacityExponent = attrf('opacityExponent');\nexport const opacityConstant = attrf('opacityConstant');\n\n// symbol scale attributes\nexport const symbolScale = attrf('symbolScale');\nexport const symbolDomain = attrf('symbolDomain');\nexport const symbolRange = attrf('symbolRange');\n\n// r scale attributes\nexport const rScale = attrf('rScale');\nexport const rDomain = attrf('rDomain');\nexport const rRange = attrf('rRange');\nexport const rClamp = attrf('rClamp');\nexport const rNice = attrf('rNice');\nexport const rLabel = attrf('rLabel');\nexport const rPercent = attrf('rPercent');\nexport const rZero = attrf('rZero');\nexport const rBase = attrf('rBase');\nexport const rExponent = attrf('rExponent');\nexport const rConstant = attrf('rConstant');\n\n// length scale attributes\nexport const lengthScale = attrf('lengthScale');\nexport const lengthDomain = attrf('lengthDomain');\nexport const lengthRange = attrf('lengthRange');\nexport const lengthClamp = attrf('lengthClamp');\nexport const lengthNice = attrf('lengthNice');\nexport const lengthPercent = attrf('lengthPercent');\nexport const lengthZero = attrf('lengthZero');\nexport const lengthBase = attrf('lengthBase');\nexport const lengthExponent = attrf('lengthExponent');\nexport const lengthConstant = attrf('lengthConstant');\n\n// projection attributes\nexport const projectionType = attrf('projectionType');\nexport const projectionParallels = attrf('projectionParallels');\nexport const projectionPrecision = attrf('projectionPrecision');\nexport const projectionRotate = attrf('projectionRotate');\nexport const projectionDomain = attrf('projectionDomain');\nexport const projectionInset = attrf('projectionInset');\nexport const projectionInsetLeft = attrf('projectionInsetLeft');\nexport const projectionInsetRight = attrf('projectionInsetRight');\nexport const projectionInsetTop = attrf('projectionInsetTop');\nexport const projectionInsetBottom = attrf('projectionInsetBottom');\nexport const projectionClip = attrf('projectionClip');\n","export function from(table, options = undefined) {\n  return { table, options };\n}\n","import {\n  Mark,\n  ConnectedMark,\n  ContourMark,\n  Density1DMark,\n  Density2DMark,\n  DenseLineMark,\n  ErrorBarMark,\n  GeoMark,\n  HeatmapMark,\n  HexbinMark,\n  RasterMark,\n  RasterTileMark,\n  RegressionMark,\n} from '@uwdata/mosaic-plot';\n\nconst decorators = new Set([\n  'frame',\n  'axisX', 'axisY', 'axisFx', 'axisFy',\n  'gridX', 'gridY', 'gridFx', 'gridFy',\n  'hexgrid',\n  'graticule', 'sphere'\n]);\n\nfunction mark(type, data, channels = {}) {\n  if (arguments.length === 2 && !Array.isArray(data)) {\n    channels = data;\n    data = decorators.has(type) ? null : [{}];\n  }\n  const MarkClass = type.startsWith('area') || type.startsWith('line')\n    ? ConnectedMark\n    : Mark;\n\n  return explicitType(MarkClass, type, data, channels);\n}\n\nfunction explicitType(MarkClass, type, data, channels) {\n  return plot => {\n    plot.addMark(new MarkClass(type, data, channels));\n  };\n}\n\nfunction implicitType(MarkClass, data, channels) {\n  return plot => {\n    plot.addMark(new MarkClass(data, channels));\n  };\n}\n\nexport const area = (...args) => mark('area', ...args);\nexport const areaX = (...args) => mark('areaX', ...args);\nexport const areaY = (...args) => mark('areaY', ...args);\n\nexport const line = (...args) => mark('line', ...args);\nexport const lineX = (...args) => mark('lineX', ...args);\nexport const lineY = (...args) => mark('lineY', ...args);\n\nexport const barX = (...args) => mark('barX', ...args);\nexport const barY = (...args) => mark('barY', ...args);\n\nexport const cell = (...args) => mark('cell', ...args);\nexport const cellX = (...args) => mark('cellX', ...args);\nexport const cellY = (...args) => mark('cellY', ...args);\n\nexport const rect = (...args) => mark('rect', ...args);\nexport const rectX = (...args) => mark('rectX', ...args);\nexport const rectY = (...args) => mark('rectY', ...args);\n\nexport const dot = (...args) => mark('dot', ...args);\nexport const dotX = (...args) => mark('dotX', ...args);\nexport const dotY = (...args) => mark('dotY', ...args);\nexport const circle = (...args) => mark('circle', ...args);\nexport const hexagon = (...args) => mark('hexagon', ...args);\n\nexport const text = (...args) => mark('text', ...args);\nexport const textX = (...args) => mark('textX', ...args);\nexport const textY = (...args) => mark('textY', ...args);\n\nexport const ruleX = (...args) => mark('ruleX', ...args);\nexport const ruleY = (...args) => mark('ruleY', ...args);\n\nexport const tickX = (...args) => mark('tickX', ...args);\nexport const tickY = (...args) => mark('tickY', ...args);\n\nexport const vector = (...args) => mark('vector', ...args);\nexport const vectorX = (...args) => mark('vectoX', ...args);\nexport const vectorY = (...args) => mark('vectorY', ...args);\nexport const spike = (...args) => mark('spike', ...args);\n\nexport const image = (...args) => mark('image', ...args);\n\nexport const densityX = (...args) => explicitType(Density1DMark, 'areaX', ...args);\nexport const densityY = (...args) => explicitType(Density1DMark, 'areaY', ...args);\n\nexport const density = (...args) => implicitType(Density2DMark, ...args);\nexport const denseLine = (...args) => implicitType(DenseLineMark, ...args);\nexport const contour = (...args) => implicitType(ContourMark, ...args);\nexport const heatmap = (...args) => implicitType(HeatmapMark, ...args);\nexport const raster = (...args) => implicitType(RasterMark, ...args);\nexport const rasterTile = (...args) => implicitType(RasterTileMark, ...args);\n\nexport const hexbin = (...args) => implicitType(HexbinMark, ...args);\nexport const hexgrid = (...args) => mark('hexgrid', ...args);\n\nexport const regressionY = (...args) => implicitType(RegressionMark, ...args);\n\nexport const errorbarX = (...args) => explicitType(ErrorBarMark, 'ruleY', ...args);\nexport const errorbarY = (...args) => explicitType(ErrorBarMark, 'ruleX', ...args);\n\nexport const voronoi = (...args) => mark('voronoi', ...args);\nexport const voronoiMesh = (...args) => mark('voronoiMesh', ...args);\nexport const delaunayLink = (...args) => mark('delaunayLink', ...args);\nexport const delaunayMesh = (...args) => mark('delaunayMesh', ...args);\nexport const hull = (...args) => mark('hull', ...args);\n\nexport const arrow = (...args) => mark('arrow', ...args);\nexport const link = (...args) => mark('link', ...args);\n\nexport const frame = (...args) => mark('frame', ...args);\n\nexport const axisX = (...args) => mark('axisX', ...args);\nexport const axisY = (...args) => mark('axisY', ...args);\nexport const axisFx = (...args) => mark('axisFx', ...args);\nexport const axisFy = (...args) => mark('axisFy', ...args);\n\nexport const gridX = (...args) => mark('gridX', ...args);\nexport const gridY = (...args) => mark('gridY', ...args);\nexport const gridFx = (...args) => mark('gridFx', ...args);\nexport const gridFy = (...args) => mark('gridFy', ...args);\n\nexport const geo = (...args) => implicitType(GeoMark, ...args);\nexport const sphere = (...args) => mark('sphere', ...args);\nexport const graticule = (...args) => mark('graticule', ...args);\n\nexport const waffleX = (...args) => mark('waffleX', ...args);\nexport const waffleY = (...args) => mark('waffleY', ...args);\n","import {\n  Highlight,\n  Interval1D,\n  Interval2D,\n  Nearest,\n  PanZoom,\n  Region,\n  Toggle\n} from '@uwdata/mosaic-plot';\n\nfunction interactor(InteractorClass, options) {\n  return plot => {\n    const mark = plot.marks[plot.marks.length - 1];\n    plot.addInteractor(new InteractorClass(mark, options));\n  };\n}\n\nexport function highlight({ by, ...channels }) {\n  return interactor(Highlight, { selection: by, channels });\n}\n\nexport function intervalX({ as, ...rest }) {\n  return interactor(Interval1D, { ...rest, selection: as, channel: 'x' });\n}\n\nexport function intervalY({ as, ...rest }) {\n  return interactor(Interval1D, { ...rest, selection: as, channel: 'y' });\n}\n\nexport function intervalXY({ as, ...rest }) {\n  return interactor(Interval2D, { ...rest, selection: as });\n}\n\nexport function nearest({ as, ...rest }) {\n  return interactor(Nearest, { ...rest, selection: as, pointer: 'xy' });\n}\n\nexport function nearestX({ as, ...rest }) {\n  return interactor(Nearest, { ...rest, selection: as, pointer: 'x' });\n}\n\nexport function nearestY({ as, ...rest }) {\n  return interactor(Nearest, { ...rest, selection: as, pointer: 'y' });\n}\n\nexport function region({ as, ...rest }) {\n  return interactor(Region, { ...rest, selection: as });\n}\n\nexport function toggle({ as, ...rest }) {\n  return interactor(Toggle, { ...rest, selection: as });\n}\n\nexport function toggleX(options) {\n  return toggle({ ...options, channels: ['x'] });\n}\n\nexport function toggleY(options) {\n  return toggle({ ...options, channels: ['y'] });\n}\n\nexport function toggleZ(options) {\n  return toggle({ ...options, channels: ['z'] });\n}\n\nexport function toggleColor(options) {\n  return toggle({ ...options, channels: ['color'] });\n}\n\nfunction zoom(options) {\n  return interactor(PanZoom, options);\n}\n\nexport function pan(options = {}) {\n  return zoom({ ...options, zoom: false });\n}\n\nexport function panX(options = {}) {\n  return zoom({ ...options, zoom: false, pany: false });\n}\n\nexport function panY(options = {}) {\n  return zoom({ ...options, zoom: false, panx: false });\n}\n\nexport function panZoom(options = {}) {\n  return zoom(options);\n}\n\nexport function panZoomX(options = {}) {\n  return zoom({ ...options, pany: false });\n}\n\nexport function panZoomY(options = {}) {\n  return zoom({ ...options, panx: false });\n}\n","import { Legend } from '@uwdata/mosaic-plot';\nimport { requestNamedPlot } from './named-plots.js';\n\nfunction legend(channel, options = {}) {\n  if (options.for) {\n    const { for: maybePlot, ...rest } = options;\n    const legend = new Legend(channel, rest);\n    const type = typeof maybePlot;\n    const add = plot => plot.addLegend(legend, false);\n    if (type === 'string') {\n      requestNamedPlot(this, maybePlot, add);\n    } else if (maybePlot.value) {\n      add(maybePlot.value);\n    }\n    return legend.element;\n  } else {\n    return plot => plot.addLegend(new Legend(channel, options));\n  }\n}\n\nexport function colorLegend(options) {\n  return legend.call(this, 'color', options);\n}\n\nexport function opacityLegend(options) {\n  return legend.call(this, 'opacity', options);\n}\n\nexport function symbolLegend(options) {\n  return legend.call(this, 'symbol', options);\n}\n","import { Plot } from '@uwdata/mosaic-plot';\nimport { connect } from '../connect.js';\n\nexport function plot(...directives) {\n  const p = new Plot();\n  directives.flat().forEach(dir => dir(p));\n  connect(this, ...p.marks); // this -> optional API context\n  p.update(); // request update, needed if no marks are defined\n  return p.element;\n}\n","import { coordinator as _coordinator } from '@uwdata/mosaic-core';\nimport { NamedPlots } from './plot/named-plots.js';\nimport * as vgplot from './api.js';\n\nexport function createAPIContext({\n  coordinator = _coordinator(),\n  namedPlots = new NamedPlots,\n  extensions = null,\n  ...options\n} = {}) {\n  return {\n    ...vgplot,\n    ...extensions,\n    context: {\n      coordinator,\n      namedPlots,\n      ...options\n    }\n  };\n}\n","// top-level spec\nexport const SPEC = 'spec';\n\n// literal values\nexport const LITERAL = 'literal';\n\n// dataset identifier\nexport const DATAREF = 'dataref';\n\n// options object\nexport const OPTIONS = 'options';\n\n// params and selections\nexport const SELECTION = 'selection';\nexport const PARAMREF = 'paramref';\nexport const COLUMPARAMREF = 'columnparamref';\nexport const PARAM = 'param';\nexport const INCLUDE = 'include';\n\n// param and selection types\nexport const SELECT = 'select';\nexport const VALUE = 'value';\nexport const CROSSFILTER = 'crossfilter';\nexport const INTERSECT = 'intersect';\nexport const UNION = 'union';\nexport const SINGLE = 'single';\n\n// data definitions\nexport const DATA = 'data';\n\n// sql expressions\nexport const EXPRESSION = 'expression';\nexport const SQL = 'sql';\n\n// inputs\nexport const INPUT = 'input';\n\n// layout\nexport const HCONCAT = 'hconcat';\nexport const VCONCAT = 'vconcat';\nexport const HSPACE = 'hspace';\nexport const VSPACE = 'vspace';\n\n// vgplot\nexport const MARK = 'mark';\nexport const FROM = 'from';\nexport const PLOT = 'plot';\nexport const LEGEND = 'legend';\nexport const ATTRIBUTE = 'attribute';\nexport const TRANSFORM = 'transform';\nexport const WINDOW_FRAME = 'windowframe';\nexport const INTERACTOR = 'interactor';\nexport const FIXED = 'Fixed';\n","export function paramRef(value) {\n  const type = typeof value;\n  return type === 'object' ? value?.param\n    : type === 'string' ? paramStr(value)\n    : null;\n}\n\nexport function paramStr(value) {\n  return value?.[0] === '$' ? value.slice(1) : null;\n}\n\nexport function toParamRef(name) {\n  return `$${name}`;\n}\n\nexport function toArray(value) {\n  return [value].flat();\n}\n\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\nexport function isObject(value) {\n  return value !== null && typeof value === 'object' && !isArray(value);\n}\n\nexport function isNumber(value) {\n  return typeof value === 'number';\n}\n\nexport function isNumberOrString(value) {\n  const t = typeof value;\n  return t === 'number' || t === 'string';\n}\n\nexport function isString(value) {\n  return typeof value === 'string';\n}\n\nexport function isFunction(value) {\n  return typeof value === 'function';\n}\n\nexport function error(message, data) {\n  throw Object.assign(Error(message), { data });\n}\n\nconst re = /^(?:[-+]\\d{2})?\\d{4}(?:-\\d{2}(?:-\\d{2})?)?(?:T\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d{3})?)?(?:Z|[-+]\\d{2}:?\\d{2})?)?$/;\n\n// adapted from https://github.com/mbostock/isoformat/\nexport function isoparse(string, fallback) {\n  if (!re.test(string += '')) return fallback;\n  return new Date(string);\n}\n","/**\n * Abstract base class for Mosaic spec AST nodes.\n */\nexport class ASTNode {\n  constructor(type, children = null) {\n    /** @type {string} */\n    this.type = type;\n    /** @type {ASTNode[] | null} */\n    this.children = children;\n  }\n\n  /**\n   * Instantiate this AST node to use in a live web application.\n   * @param {import('../ast-to-dom.js').InstantiateContext} ctx The instantiation context.\n   * @returns {*} The instantiated value of this node.\n   */\n  instantiate(ctx) { // eslint-disable-line no-unused-vars\n    // @ts-ignore\n    throw Error('instantiate not implemented');\n  }\n\n  /**\n   * Generate ESM code for this AST node.\n   * @param {import('../ast-to-esm.js').CodegenContext} ctx The code generator context.\n   * @returns {string|void} The generated ESM code for the node.\n   */\n  codegen(ctx) { // eslint-disable-line no-unused-vars\n    // @ts-ignore\n    return Error('codegen not implemented');\n  }\n\n  /**\n   * @returns {*} This AST node in JSON specification format.\n   */\n  toJSON() {\n    // @ts-ignore\n    return Error('toJSON not implemented');\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { OPTIONS } from '../constants.js';\n\nexport function parseOptions(spec, ctx) {\n  const options = {};\n  for (const key in spec) {\n    options[key] = ctx.maybeSelection(spec[key]);\n  }\n  return new OptionsNode(options);\n}\n\nexport class OptionsNode extends ASTNode {\n  constructor(options) {\n    super(OPTIONS);\n    this.options = options;\n  }\n\n  filter(predicate) {\n    const opt = Object.fromEntries(\n      Object.entries(this.options)\n        .filter(([key, value]) => predicate(key, value))\n    );\n    return new OptionsNode(opt);\n  }\n\n  instantiate(ctx) {\n    const { options } = this;\n    const opt = {};\n    for (const key in options) {\n      opt[key] = options[key].instantiate(ctx);\n    }\n    return opt;\n  }\n\n  codegen(ctx) {\n    const { options } = this;\n    const opt = [];\n    for (const key in options) {\n      opt.push(`${key}: ${options[key].codegen(ctx)}`);\n    }\n    return opt.length ? `{${ctx.maybeLineWrap(opt)}}` : '';\n  }\n\n  toJSON() {\n    const { options } = this;\n    const opt = {};\n    for (const key in options) {\n      opt[key] = options[key].toJSON();\n    }\n    return opt;\n  }\n}\n","import { createTable } from '@uwdata/mosaic-sql';\nimport { DATA } from '../constants.js';\nimport { isArray, isString } from '../util.js';\nimport { ASTNode } from './ASTNode.js';\nimport { parseOptions } from './OptionsNode.js';\n\nexport const TABLE_DATA = 'table';\nexport const PARQUET_DATA = 'parquet';\nexport const CSV_DATA = 'csv';\nexport const JSON_DATA = 'json';\nexport const SPATIAL_DATA = 'spatial';\n\n// @ts-ignore\nconst dataFormats = new Map([\n  [TABLE_DATA, parseTableData],\n  [PARQUET_DATA, parseParquetData],\n  [CSV_DATA, parseCSVData],\n  [JSON_DATA, parseJSONData],\n  [SPATIAL_DATA, parseSpatialData]\n]);\n\n/**\n * Parse a data definition spec.\n * @param {string} name The name of the dataset\n * @param {import('../spec/Data.js').DataDefinition} spec The data definition spec.\n * @param {import('../parse-spec.js').ParseContext} ctx The parser context.\n * @returns {DataNode} a parsed data definition AST node\n */\nexport function parseData(name, spec, ctx) {\n  const def = resolveDataSpec(spec);\n  if (dataFormats.has(def.type)) {\n    const parse = dataFormats.get(def.type);\n    return parse(name, def, ctx);\n  } else {\n    ctx.error(`Unrecognized data format type.`, spec);\n  }\n}\n\nfunction resolveDataSpec(spec) {\n  if (isArray(spec)) spec = { type: 'json', data: spec };\n  if (isString(spec)) spec = { type: 'table', query: spec };\n  return { ...spec, type: inferType(spec) };\n}\n\nfunction inferType(spec) {\n  return spec.type\n    || fileExtension(spec.file)\n    || 'table';\n}\n\nfunction fileExtension(file) {\n  const idx = file?.lastIndexOf('.');\n  return idx > 0 ? file.slice(idx + 1) : null;\n}\n\nfunction parseTableData(name, spec, ctx) {\n  // eslint-disable-next-line no-unused-vars\n  const { query, type, ...options } = spec;\n  return new TableDataNode(name, query, parseOptions(options, ctx));\n}\n\nfunction parseParquetData(name, spec, ctx) {\n  // eslint-disable-next-line no-unused-vars\n  const { file, type, ...options } = spec;\n  return new ParquetDataNode(name, file, parseOptions(options, ctx));\n}\n\nfunction parseCSVData(name, spec, ctx) {\n  // eslint-disable-next-line no-unused-vars\n  const { file, type, ...options } = spec;\n  return new CSVDataNode(name, file, parseOptions(options, ctx));\n}\n\nfunction parseJSONData(name, spec, ctx) {\n  // eslint-disable-next-line no-unused-vars\n  const { data, file, type, ...options } = spec;\n  const opt = parseOptions(options, ctx);\n  return data\n    ? new LiteralJSONDataNode(name, data, opt)\n    : new JSONDataNode(name, file, opt);\n}\n\nfunction parseSpatialData(name, spec, ctx) {\n  // eslint-disable-next-line no-unused-vars\n  const { file, type, ...options } = spec;\n  return new SpatialDataNode(name, file, parseOptions(options, ctx));\n}\n\nfunction resolveFileURL(file, baseURL) {\n  return baseURL ? new URL(file, baseURL).toString() : file;\n}\n\nfunction codegenOptions(options, ctx) {\n  const code = options?.codegen(ctx);\n  return code ? `, ${code}` : '';\n}\n\nexport class DataNode extends ASTNode {\n  constructor(name, format) {\n    super(DATA);\n    this.name = name;\n    this.format = format;\n  }\n}\n\nexport class QueryDataNode extends DataNode {\n  constructor(name, format) {\n    super(name, format);\n  }\n\n  /**\n   * Instantiate a table creation query.\n   * @param {import('../ast-to-dom.js').InstantiateContext} ctx The instantiation context.\n   * @returns {string|void} The instantiated query.\n   */\n  instantiateQuery(ctx) {\n    ctx.error('instantiateQuery not implemented');\n  }\n\n  /**\n   * Code generate a table creation query.\n   * @param {import('../ast-to-esm.js').CodegenContext} ctx The code generator context.\n   * @returns {string|void} The generated query code.\n   */\n  codegenQuery(ctx) {\n    ctx.error('codegenQuery not implemented');\n  }\n\n  /**\n   * Instantiate this AST node to use in a live web application.\n   * @param {import('../ast-to-dom.js').InstantiateContext} ctx The instantiation context.\n   * @returns {*} The instantiated value of this node.\n   */\n  instantiate(ctx) {\n    const query = this.instantiateQuery(ctx);\n    if (query) return query;\n  }\n\n  /**\n   * Generate ESM code for this AST node.\n   * @param {import('../ast-to-esm.js').CodegenContext} ctx The code generator context.\n   * @returns {string|void} The generated ESM code for the node.\n   */\n  codegen(ctx) {\n    const query = this.codegenQuery(ctx);\n    if (query) return query;\n  }\n}\n\nexport class TableDataNode extends QueryDataNode {\n  constructor(name, query, options) {\n    super(name, TABLE_DATA);\n    this.query = query?.trim();\n    this.options = options;\n  }\n\n  /**\n   * Instantiate a table creation query.\n   * @param {import('../ast-to-dom.js').InstantiateContext} ctx The instantiation context.\n   * @returns {string|void} The instantiated query.\n   */\n  instantiateQuery(ctx) {\n    const { name, query, options } = this;\n    if (query) {\n      return ctx.api.createTable(name, query, options.instantiate(ctx));\n    }\n  }\n\n  /**\n   * Code generate a table creation query.\n   * @param {import('../ast-to-esm.js').CodegenContext} ctx The code generator context.\n   * @returns {string|void} The generated query code.\n   */\n  codegenQuery(ctx) {\n    const { name, query, options } = this;\n    if (query) {\n      return `\\`${createTable(name, query, options.instantiate(ctx))}\\``;\n    }\n  }\n\n  toJSON() {\n    const { format, query, options } = this;\n    return { type: format, query, ...options.toJSON() };\n  }\n}\n\nexport class FileDataNode extends QueryDataNode {\n  constructor(name, format, method, file, options) {\n    super(name, format);\n    this.file = file;\n    this.method = method;\n    this.options = options;\n  }\n\n  /**\n   * Instantiate a table creation query.\n   * @param {import('../ast-to-dom.js').InstantiateContext} ctx The instantiation context.\n   * @returns {string|void} The instantiated query.\n   */\n  instantiateQuery(ctx) {\n    const { name, method, file, options } = this;\n    const url = resolveFileURL(file, ctx.baseURL);\n    const opt = options?.instantiate(ctx)\n    return ctx.api[method](name, url, opt);\n  }\n\n  /**\n   * Code generate a table creation query.\n   * @param {import('../ast-to-esm.js').CodegenContext} ctx The code generator context.\n   * @returns {string|void} The generated query code.\n   */\n  codegenQuery(ctx) {\n    const { name, method, file, options } = this;\n    const url = resolveFileURL(file, ctx.baseURL);\n    const opt = codegenOptions(options, ctx);\n    return `${ctx.ns()}${method}(\"${name}\", \"${url}\"${opt})`;\n  }\n\n  toJSON() {\n    const { format, file, options } = this;\n    return { type: format, file, ...options.toJSON() };\n  }\n}\n\nexport class SpatialDataNode extends FileDataNode {\n  constructor(name, file, options) {\n    super(name, SPATIAL_DATA, 'loadSpatial', file, options);\n  }\n}\n\nexport class ParquetDataNode extends FileDataNode {\n  constructor(name, file, options) {\n    super(name, PARQUET_DATA, 'loadParquet', file, options);\n  }\n}\n\nexport class CSVDataNode extends FileDataNode {\n  constructor(name, file, options) {\n    super(name, CSV_DATA, 'loadCSV', file, options);\n  }\n}\n\nexport class JSONDataNode extends FileDataNode {\n  constructor(name, file, options) {\n    super(name, JSON_DATA, 'loadJSON', file, options);\n  }\n}\n\nexport class LiteralJSONDataNode extends QueryDataNode {\n  constructor(name, data, options) {\n    super(name, JSON_DATA);\n    this.data = data;\n    this.options = options;\n  }\n\n  /**\n   * Instantiate a table creation query.\n   * @param {import('../ast-to-dom.js').InstantiateContext} ctx The instantiation context.\n   * @returns {string|void} The instantiated query.\n   */\n  instantiateQuery(ctx) {\n    const { name, data, options } = this;\n    return ctx.api.loadObjects(name, data, options.instantiate(ctx));\n  }\n\n  /**\n   * Code generate a table creation query.\n   * @param {import('../ast-to-esm.js').CodegenContext} ctx The code generator context.\n   * @returns {string|void} The generated query code.\n   */\n  codegenQuery(ctx) {\n    const { name, data, options } = this;\n    const opt = options ? ',' + options.codegen(ctx) : '';\n    const d = '[\\n    '\n      + data.map(d => JSON.stringify(d)).join(',\\n    ')\n      + '\\n  ]';\n    return `${ctx.ns()}loadObjects(\"${name}\", ${d}${opt})`;\n  }\n\n  toJSON() {\n    const { format, data, options } = this;\n    return { type: format, data, ...options.toJSON() };\n  }\n}\n","/** @import { SpecNode } from '../ast/SpecNode.js' */\nimport { SPATIAL_DATA } from '../ast/DataNode.js';\nimport { toArray } from '../util.js';\n\n/**\n * Construct a set of database extensions to load.\n * Automatically adds the spatial extension if a\n * dataset with format \"spatial\" is loaded.\n * @param {SpecNode} ast Mosaic AST root node.\n * @returns {Set<string>} A set of extension names.\n */\nexport function resolveExtensions(ast) {\n  const spec = ast.config?.extensions;\n  const exts = new Set(spec ? toArray(spec) : []);\n\n  for (const def of Object.values(ast.data)) {\n    if (def.format === SPATIAL_DATA) {\n      exts.add('spatial');\n    }\n  }\n\n  return exts;\n}\n","/**\n * @import { Param, Selection } from '@uwdata/mosaic-core'\n * @import { SpecNode } from './ast/SpecNode.js'\n */\nimport { createAPIContext, loadExtension } from '@uwdata/vgplot';\nimport { resolveExtensions } from './config/extensions.js';\nimport { error } from './util.js';\n\n/**\n * Generate a running web application (DOM content) for a Mosaic spec AST.\n * @param {SpecNode} ast Mosaic AST root node.\n * @param {ConstructorParameters<typeof InstantiateContext>[0]} [options] Instantiation options.\n * @returns {Promise<{\n *   element: HTMLElement | SVGSVGElement;\n*    params: Map<string, Param | Selection>;\n*  }>} A Promise to an object with the resulting\n *  DOM element, and a map of named parameters (Param and Selection instances).\n */\nexport async function astToDOM(ast, options) {\n  const { data, params, plotDefaults } = ast;\n  const ctx = new InstantiateContext({ plotDefaults, ...options });\n\n  const queries = [];\n\n  // process database extensions\n  const exts = resolveExtensions(ast);\n  queries.push(...Array.from(exts).map(name => loadExtension(name)));\n\n  // process data definitions\n  for (const node of Object.values(data)) {\n    const query = node.instantiate(ctx);\n    if (query) queries.push(query);\n  }\n\n  // perform extension and data loading, if needed\n  if (queries.length > 0) {\n    await ctx.coordinator.exec(queries);\n  }\n\n  // process param/selection definitions\n  // skip definitions with names already defined\n  for (const [name, node] of Object.entries(params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n\n  return {\n    element: ast.root.instantiate(ctx),\n    params: ctx.activeParams\n  };\n}\n\nexport class InstantiateContext {\n  /**\n   * Create a new InstantiateContext instance.\n   * @param {object} options Optional instantiation options.\n   * @param {string} [options.baseURL] The base URL for loading data files.\n   * @param {any[]} [options.plotDefaults] Array of default plot attributes.\n   * @param {Map<string, Param>} [options.params] A map of predefined Params/Selections.\n   * @param {ReturnType<typeof createAPIContext>} [options.api] The context to be used for vgplot API methods.\n   */\n  constructor({\n    api = createAPIContext(),\n    plotDefaults = [],\n    params = new Map,\n    baseURL = null\n  } = {}) {\n    this.api = api;\n    this.plotDefaults = plotDefaults;\n    this.activeParams = params;\n    this.baseURL = baseURL;\n    this.coordinator = api.context.coordinator;\n  }\n\n  error(message, data) {\n    error(message, data);\n  }\n}\n","/** @import { SpecNode } from './ast/SpecNode.js' */\nimport { resolveExtensions } from './config/extensions.js';\nimport { error, isArray, isObject, isString, toArray, toParamRef } from './util.js';\n\n/**\n * Generate ESM code for a Mosaic spec AST.\n * @param {SpecNode} ast Mosaic AST root node.\n * @param {object} [options] Code generation options.\n * @param {string} [options.baseURL] The base URL for loading data files.\n * @param {string} [options.connector] A database connector to initialize.\n *  Valid values are 'wasm', 'socket', and 'rest'.\n *  If undefined, no connector code is generated.\n * @param {string} [options.namespace='vg'] The vgplot API namespace object.\n * @param {number} [options.depth=0] The starting indentation depth.\n * @param {Map<string,string|string[]>} [options.imports] A Map of ESM\n *  imports to include in generated code. Keys are packages (e.g.,\n *  '@uwdata/vgplot') and values indicate what to import (e.g., '* as vg').\n * @param {string|string[]} [options.preamble] Code to include after imports.\n * @returns {string} Generated ESM code using the vgplot API.\n */\nexport function astToESM(ast, options = {}) {\n  const { root, data, params, plotDefaults } = ast;\n  const { preamble, ...ctxOptions } = options;\n  const ctx = new CodegenContext({ plotDefaults, ...ctxOptions });\n\n  // generate package imports\n  const importsCode = [];\n  for (const [pkg, methods] of ctx.imports) {\n    importsCode.push(\n      isString(methods)\n        ? `import ${methods} from \"${pkg}\";`\n        // @ts-ignore\n        : `import { ${methods.join(', ')} } from \"${pkg}\";`\n    );\n  }\n\n  // preamble code comes directly after imports\n  const preambleCode = preamble\n    ? toArray(preamble).map(s => `${ctx.tab()}${s}`)\n    : [];\n\n  // generate database connector code\n  const connectorCode = [];\n  if (ctx.connector) {\n    const con = `${ctx.ns()}${ctx.connector}Connector()`;\n    connectorCode.push(\n      `${ctx.tab()}${ctx.ns()}coordinator().databaseConnector(${con});`\n    );\n  }\n\n  // process extensions and data definitions\n  const queries = [];\n  for (const name of resolveExtensions(ast)) {\n    queries.push(`${ctx.ns()}loadExtension(\"${name}\")`);\n  }\n  for (const node of Object.values(data)) {\n    const load = node.codegen(ctx);\n    if (load) queries.push(load);\n  }\n\n  // perform extension and data loading\n  const dataCode = [];\n  if (queries.length) {\n    dataCode.push(`${ctx.tab()}await ${ctx.ns()}coordinator().exec([`);\n    ctx.indent();\n    dataCode.push(queries.map(q => `${ctx.tab()}${q}`).join(',\\n'));\n    ctx.undent();\n    dataCode.push(`${ctx.tab()}]);`);\n  }\n\n  // generate params / selections\n  const paramCode = [];\n  for (const [key, value] of Object.entries(params)) {\n    paramCode.push(`const ${toParamRef(key)} = ${value.codegen(ctx)};`);\n  }\n\n  // generate default attributes\n  let defaultCode = [];\n  const defaultList = plotDefaults;\n  if (defaultList.length) {\n    defaultCode = [\n      'const defaultAttributes = [',\n      defaultList.map(a => '  ' + a.codegen(ctx)).join(',\\n'),\n      '];'\n    ];\n  }\n\n  // generate specification tree\n  const specCode = [\n    `export default ${root.codegen(ctx)};`\n  ];\n\n  return [\n    ...importsCode,\n    ...maybeNewline(importsCode),\n    ...preambleCode,\n    ...maybeNewline(preambleCode),\n    ...connectorCode,\n    ...maybeNewline(connectorCode),\n    ...dataCode,\n    ...maybeNewline(dataCode),\n    ...paramCode,\n    ...maybeNewline(paramCode),\n    ...defaultCode,\n    ...maybeNewline(defaultCode),\n    ...specCode\n  ].join('\\n');\n}\n\nexport class CodegenContext {\n  /**\n   * Create a new code generator context.\n   * @param {object} [options] Code generation options.\n   * @param {*} [options.plotDefaults] Default attributes to apply to all plots.\n   * @param {string} [options.baseURL] The base URL for loading data files.\n   * @param {string} [options.connector] A database connector to initialize.\n   *  Valid values are 'wasm', 'socket', and 'rest'.\n   *  If undefined, no connector code is generated.\n   * @param {string} [options.namespace='vg'] The vgplot API namespace object.\n   * @param {number} [options.depth=0] The starting indentation depth.\n   * @param {Map<string,string|string[]>} [options.imports] A Map of ESM\n   *  imports to include in generated code. Keys are packages (e.g.,\n   *  '@uwdata/vgplot') and values indicate what to import (e.g., '* as vg').\n   */\n  constructor({\n    plotDefaults = undefined,\n    namespace = 'vg',\n    connector = undefined,\n    imports = new Map([['@uwdata/vgplot', '* as vg']]),\n    baseURL = undefined,\n    depth = 0\n  } = {}) {\n    this.plotDefaults = plotDefaults;\n    this.namespace = `${namespace}.`;\n    this.connector = connector;\n    this.imports = imports;\n    this.baseURL = baseURL;\n    this.depth = depth;\n  }\n\n  addImport(pkg, method) {\n    if (!this.imports.has(pkg)) {\n      this.imports.set(pkg, [method]);\n    } else {\n      // @ts-ignore\n      this.imports.get(pkg).push(method);\n    }\n  }\n\n  setImports(pkg, all) {\n    this.imports.set(pkg, all);\n  }\n\n  ns() {\n    return this.namespace;\n  }\n\n  indent() {\n    this.depth += 1;\n  }\n\n  undent() {\n    this.depth -= 1;\n  }\n\n  tab() {\n    return Array.from({ length: this.depth }, () => '  ').join('');\n  }\n\n  stringify(value) {\n    if (isArray(value)) {\n      const items = value.map(v => this.stringify(v));\n      return `[${this.maybeLineWrap(items)}]`;\n    } else if (isObject(value)) {\n      const props = Object.entries(value)\n        .map(([k, v]) => `${maybeQuote(k)}: ${this.stringify(v)}`);\n      return `{${this.maybeLineWrap(props)}}`;\n    } else {\n      return JSON.stringify(value);\n    }\n  }\n\n  maybeLineWrap(spans) {\n    const limit = 80 - 2 * this.depth;\n    const chars = 2 * spans.length + spans.reduce((a, b) => a + b.length, 0);\n    if (chars > limit) {\n      this.indent();\n      const str = spans.map(s => `\\n${this.tab()}${s}`).join(',')\n      this.undent();\n      return str + '\\n' + this.tab();\n    } else {\n      return spans.join(', ');\n    }\n  }\n\n  error(message, data) {\n    error(message, data);\n  }\n}\n\nfunction maybeQuote(str) {\n  return /^[A-Za-z_$]\\w*/.test(str) ? str : JSON.stringify(str);\n}\n\nfunction maybeNewline(entry) {\n  return entry?.length ? [''] : [];\n}\n","import { ASTNode } from './ASTNode.js';\nimport { LITERAL } from '../constants.js';\n\nexport class LiteralNode extends ASTNode {\n  constructor(value) {\n    super(LITERAL);\n    this.value = value;\n  }\n\n  instantiate() {\n    return this.value;\n  }\n\n  codegen(ctx) {\n    return ctx.stringify(this.value);\n  }\n\n  toJSON() {\n    return this.value;\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { OptionsNode, parseOptions } from './OptionsNode.js';\nimport { INCLUDE, INTERSECT, SELECTION } from '../constants.js';\nimport { paramRef, toArray } from '../util.js';\n\nexport function parseSelection(spec, ctx) {\n  const { select, include, ...options } = spec;\n  const opt = parseOptions(options, ctx);\n  if (include) {\n    opt.options.include = new IncludeNode(\n      toArray(include).map(ref => ctx.selectionRef(paramRef(ref)))\n    );\n  }\n  return new SelectionNode(select, opt);\n}\n\nexport class SelectionNode extends ASTNode {\n  /**\n   * Create a Selection AST node.\n   * @param {string} select The selection type.\n   * @param {OptionsNode} options Selection options.\n   */\n  constructor(select = INTERSECT, options = new OptionsNode({})) {\n    super(SELECTION);\n    this.select = select;\n    this.options = options;\n  }\n\n  instantiate(ctx) {\n    const { select, options } = this;\n    return ctx.api.Selection[select](options.instantiate(ctx));\n  }\n\n  codegen(ctx) {\n    const { select, options } = this;\n    return `${ctx.ns()}Selection.${select}(${options.codegen(ctx)})`;\n  }\n\n  toJSON() {\n    const { select, options } = this;\n    return { select, ...options.toJSON() };\n  }\n}\n\nexport class IncludeNode extends ASTNode {\n  constructor(refs) {\n    super(INCLUDE);\n    this.refs = refs;\n  }\n\n  instantiate(ctx) {\n    return this.refs.map(ref => ref.instantiate(ctx));\n  }\n\n  codegen(ctx) {\n    return `[${this.refs.map(ref => ref.codegen(ctx)).join(', ')}]`;\n  }\n\n  toJSON() {\n    return this.refs.map(ref => ref.toJSON());\n  }\n}\n","import { isArray, isObject, isoparse } from '../util.js';\nimport { ASTNode } from './ASTNode.js';\nimport { parseSelection } from './SelectionNode.js';\nimport { CROSSFILTER, INTERSECT, PARAM, SINGLE, UNION, VALUE } from '../constants.js';\n\nconst paramTypes = new Set([VALUE, SINGLE, CROSSFILTER, INTERSECT, UNION]);\n\nexport function parseParam(spec, ctx) {\n  const param = isObject(spec) ? spec : { value: spec };\n  const { select = VALUE, value, date } = param;\n  if (!paramTypes.has(select)) {\n    ctx.error(`Unrecognized param type: ${select}`, param);\n  }\n  if (select !== VALUE) {\n    return parseSelection(spec, ctx);\n  } else if (isArray(value)) {\n    return new ParamNode(value.map(v => ctx.maybeParam(v)));\n  } else {\n    return new ParamNode(value, date);\n  }\n}\n\nexport class ParamNode extends ASTNode {\n  constructor(value, date) {\n    super(PARAM);\n    this.value = value;\n    this.date = date;\n  }\n\n  instantiate(ctx) {\n    const { date, value } = this;\n    const { Param } = ctx.api;\n    return isArray(value)\n      ? Param.array(value.map(v => v.instantiate(ctx)))\n      : Param.value(isoparse(date, value));\n  }\n\n  codegen(ctx) {\n    const { value, date } = this;\n    const prefix = `${ctx.ns()}Param.`;\n    return isArray(value)\n      ? `${prefix}array([${value.map(v => v.codegen(ctx)).join(', ')}])`\n      : date ? `${prefix}value(new Date(${JSON.stringify(date)}))`\n      : `${prefix}value(${JSON.stringify(value)})`;\n  }\n\n  toJSON() {\n    const { date, value } = this;\n    return isArray(value) ? value.map(v => v.toJSON())\n      : date ? { date }\n      : value;\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { PARAMREF } from '../constants.js';\nimport { toParamRef } from '../util.js';\n\nexport class ParamRefNode extends ASTNode {\n  constructor(name) {\n    super(PARAMREF);\n    this.name = name;\n  }\n\n  instantiate(ctx) {\n    return ctx.activeParams?.get(this.name);\n  }\n\n  codegen(ctx) { // eslint-disable-line no-unused-vars\n    return toParamRef(this.name);\n  }\n\n  toJSON() {\n    return toParamRef(this.name);\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { ATTRIBUTE, FIXED, LITERAL } from '../constants.js';\n\nexport function parseAttribute(key, value, ctx) {\n  if (!ctx.plot?.attributes?.has(key)) {\n    ctx.error(`Unrecognized attribute: ${key}`);\n  }\n  return new PlotAttributeNode(\n    key,\n    value === FIXED ? new PlotFixedNode : ctx.maybeParam(value)\n  );\n}\n\nexport class PlotAttributeNode extends ASTNode {\n  constructor(name, value) {\n    super(ATTRIBUTE);\n    this.name = name;\n    this.value = value;\n  }\n\n  instantiate(ctx) {\n    const { name, value } = this;\n    return ctx.api[name](value.instantiate(ctx));\n  }\n\n  codegen(ctx) {\n    const { name, value } = this;\n    return `${ctx.tab()}${ctx.ns()}${name}(${value.codegen(ctx)})`;\n  }\n\n  toJSON() {\n    const { name, value } = this;\n    return { [name]: value.toJSON() };\n  }\n}\n\nexport class PlotFixedNode extends ASTNode {\n  constructor() {\n    super(LITERAL);\n    this.value = FIXED;\n  }\n\n  instantiate(ctx) {\n    return ctx.api[FIXED];\n  }\n\n  codegen(ctx) {\n    return `${ctx.ns()}${FIXED}`;\n  }\n\n  toJSON() {\n    return this.value;\n  }\n}\n","import { SPEC } from '../constants.js';\nimport { ASTNode } from './ASTNode.js';\n\nexport class SpecNode extends ASTNode {\n  constructor(root, meta, config, data, params, plotDefaults) {\n    super(SPEC, [root]);\n    this.root = root;\n    this.meta = meta;\n    this.config = config;\n    this.data = data;\n    this.params = params;\n    this.plotDefaults = plotDefaults;\n  }\n\n  toJSON() {\n    const { root, meta, config, plotDefaults } = this;\n    const dataDefs = new Map(Object.entries(this.data));\n    const paramDefs = new Map(Object.entries(this.params));\n    const spec = {};\n\n    if (meta) spec.meta = { ...meta };\n    if (config) spec.config = { ...config };\n\n    if (dataDefs?.size) {\n      const data = spec.data = {};\n      for (const [name, node] of dataDefs) {\n        data[name] = node.toJSON();\n      }\n    }\n\n    if (paramDefs?.size) {\n      const params = spec.params = {};\n      for (const [name, node] of paramDefs) {\n        params[name] = node.toJSON();\n      }\n    }\n\n    if (plotDefaults?.length) {\n      const defaults = spec.plotDefaults = {};\n      for (const node of plotDefaults) {\n        Object.assign(defaults, node.toJSON());\n      }\n    }\n\n    return Object.assign(spec, root.toJSON());\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { HCONCAT } from '../constants.js';\n\nexport function parseHConcat(spec, ctx) {\n  const children = spec[HCONCAT].map(s => ctx.parseComponent(s));\n  return new HConcatNode(children);\n}\n\nexport class HConcatNode extends ASTNode {\n\n  constructor(children) {\n    super(HCONCAT, children);\n  }\n\n  instantiate(ctx) {\n    return ctx.api[HCONCAT](this.children.map(c => c.instantiate(ctx)));\n  }\n\n  codegen(ctx) {\n    ctx.indent();\n    const items = this.children.map(c => c.codegen(ctx));\n    ctx.undent();\n    return `${ctx.tab()}${ctx.ns()}${this.type}(\\n${items.join(',\\n')}\\n${ctx.tab()})`;\n  }\n\n  toJSON() {\n    return { [this.type]: this.children.map(c => c.toJSON()) };\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { HSPACE } from '../constants.js';\n\nexport function parseHSpace(spec) {\n  return new HSpaceNode(spec[HSPACE]);\n}\n\nexport class HSpaceNode extends ASTNode {\n  constructor(value) {\n    super(HSPACE);\n    this.value = value;\n  }\n\n  instantiate(ctx) {\n    return ctx.api[HSPACE](this.value);\n  }\n\n  codegen(ctx) {\n    return `${ctx.tab()}${ctx.ns()}${this.type}(${ctx.stringify(this.value)})`;\n  }\n\n  toJSON() {\n    return { [this.type]: this.value };\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { INPUT } from '../constants.js';\nimport { parseOptions } from './OptionsNode.js';\n\nexport function parseInput(spec, ctx) {\n  const { [INPUT]: name, ...options } = spec;\n  if (!ctx.inputs?.has(name)) {\n    ctx.error(`Unrecognized input type: ${name}`, spec);\n  }\n  return new InputNode(name, parseOptions(options, ctx));\n}\n\nexport class InputNode extends ASTNode {\n  constructor(name, options) {\n    super(INPUT);\n    this.name = name;\n    this.options = options;\n  }\n\n  instantiate(ctx) {\n    return ctx.api[this.name](this.options.instantiate(ctx));\n  }\n\n  codegen(ctx) {\n    const opt = this.options.codegen(ctx);\n    return `${ctx.tab()}${ctx.ns()}${this.name}(${opt})`;\n  }\n\n  toJSON() {\n    const { type, name, options } = this;\n    return { [type]: name, ...options.toJSON() };\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { LEGEND } from '../constants.js';\nimport { parseOptions } from './OptionsNode.js';\n\nexport function parseLegend(spec, ctx) {\n  const { [LEGEND]: name, ...options } = spec;\n  const key = `${name}Legend`;\n  if (!ctx.plot?.legends?.has(key)) {\n    ctx.error(`Unrecognized legend type: ${name}`, spec);\n  }\n  return new PlotLegendNode(key, name, parseOptions(options, ctx));\n}\n\nexport class PlotLegendNode extends ASTNode {\n  constructor(key, name, options) {\n    super(LEGEND);\n    this.key = key;\n    this.name = name;\n    this.options = options;\n  }\n\n  instantiate(ctx) {\n    return ctx.api[this.key](this.options.instantiate(ctx));\n  }\n\n  codegen(ctx) {\n    const opt = this.options.codegen(ctx);\n    return `${ctx.tab()}${ctx.ns()}${this.key}(${opt})`;\n  }\n\n  toJSON() {\n    const { type, name, options } = this;\n    return { [type]: name, ...options.toJSON() };\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { INTERACTOR, SELECT } from '../constants.js';\nimport { parseOptions } from './OptionsNode.js';\n\nexport function parseInteractor(spec, ctx) {\n  const { [SELECT]: name, ...options } = spec;\n  if (!ctx.plot?.interactors?.has(name)) {\n    ctx.error(`Unrecognized interactor type: ${name}`, spec);\n  }\n  return new PlotInteractorNode(name, parseOptions(options, ctx));\n}\n\nexport class PlotInteractorNode extends ASTNode {\n  constructor(name, options) {\n    super(INTERACTOR);\n    this.name = name;\n    this.options = options;\n  }\n\n  instantiate(ctx) {\n    return ctx.api[this.name](this.options.instantiate(ctx));\n  }\n\n  codegen(ctx) {\n    const opt = this.options.codegen(ctx);\n    return `${ctx.tab()}${ctx.ns()}${this.name}(${opt})`;\n  }\n\n  toJSON() {\n    const { name, options } = this;\n    return { [SELECT]: name, ...options.toJSON() };\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { COLUMPARAMREF } from '../constants.js';\n\nexport class ColumnParamRefNode extends ASTNode {\n  constructor(param) {\n    super(COLUMPARAMREF);\n    this.param = param;\n  }\n\n  instantiate(ctx) {\n    return ctx.api.column(this.param.instantiate(ctx));\n  }\n\n  codegen(ctx) {\n    return `${ctx.ns()}column(${this.param.codegen(ctx)})`;\n  }\n\n  toJSON() {\n    return `$${this.param.toJSON}`;\n  }\n}\n","import { EXPRESSION, SQL } from '../constants.js';\nimport { ASTNode } from './ASTNode.js';\nimport { ColumnParamRefNode } from './ColumnParamRefNode.js';\n\nconst tokenRegExp = /(\\\\'|\\\\\"|\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'|\\${1,2}\\w+)/g;\n\nexport function parseExpression(spec, ctx) {\n  const expr = spec[SQL];\n  const tokens = expr.split(tokenRegExp);\n  const spans = [''];\n  const params = [];\n\n  for (let i = 0, k = 0; i < tokens.length; ++i) {\n    const tok = tokens[i];\n    if (tok.startsWith('$')) {\n      params[k] = tok.startsWith('$$')\n        ? new ColumnParamRefNode(ctx.paramRef(tok.slice(2)))\n        : ctx.maybeParam(tok);\n      spans[++k] = '';\n    } else {\n      spans[k] += tok;\n    }\n  }\n\n  return new ExpressionNode(expr, spans, params);\n}\n\nexport class ExpressionNode extends ASTNode {\n  constructor(value, spans, params) {\n    super(EXPRESSION);\n    this.value = value;\n    this.spans = spans;\n    this.params = params;\n  }\n\n  instantiate(ctx) {\n    const { spans, params } = this;\n    const tag = ctx.api[SQL];\n    const args = params.map(e => e.instantiate(ctx));\n    return tag(spans, ...args);\n  }\n\n  codegen(ctx) {\n    const { spans, params } = this;\n\n    // reconstitute expression string\n    let str = '';\n    const n = params.length;\n    for (let i = 0; i < n; ++i) {\n      str += spans[i] + '${' + params[i].codegen(ctx) + '}';\n    }\n    str += spans[n];\n\n    return `${ctx.ns()}${SQL}\\`${str}\\``;\n  }\n\n  toJSON() {\n    return { [SQL]: this.value };\n  }\n}\n","import { isArray } from '../util.js';\nimport { ASTNode } from './ASTNode.js';\nimport { FROM } from '../constants.js';\nimport { LiteralNode } from './LiteralNode.js';\nimport { parseOptions } from './OptionsNode.js';\n\nexport function parseMarkData(spec, ctx) {\n  if (!spec) {\n    // no data, likely a decoration mark\n    return null;\n  }\n\n  if (isArray(spec)) {\n    // data provided directly, treat as JSON literal\n    return new LiteralNode(spec);\n  }\n\n  const { from: table, ...options } = spec;\n  return new PlotFromNode(ctx.maybeParam(table), parseOptions(options, ctx));\n}\n\nexport class PlotFromNode extends ASTNode {\n  constructor(table, options) {\n    super(FROM);\n    this.table = table;\n    this.options = options;\n  }\n\n  instantiate(ctx) {\n    const { table, options } = this;\n    return ctx.api[FROM](table.instantiate(ctx), options.instantiate(ctx));\n  }\n\n  codegen(ctx) {\n    const table = this.table.codegen(ctx);\n    const opt = this.options.codegen(ctx);\n    return `${ctx.ns()}${this.type}(${table}${opt ? ', ' + opt : ''})`;\n  }\n\n  toJSON() {\n    const { type, table, options } = this;\n    return { [type]: table.toJSON(), ...options.toJSON() };\n  }\n}\n","import { LiteralNode, WindowFrameNode as WindowFrame } from '@uwdata/mosaic-sql';\nimport { WINDOW_FRAME } from '../constants.js';\nimport { isObject, paramRef } from '../util.js';\nimport { ASTNode } from './ASTNode.js';\nimport { parseTransform } from './TransformNode.js';\n\nexport function parseWindowFrame(spec, ctx) {\n  const type = spec.rows ? 'ROWS'\n    : spec.range ? 'RANGE'\n    : spec.groups ? 'GROUPS'\n    : null;\n\n  if (!type) return null;\n\n  const value = spec[type.toLowerCase()];\n  const name = paramRef(value);\n  const extent = name\n    ? ctx.paramRef(name)\n    : value.map(v => isObject(v)\n        ? parseTransform(v, ctx)\n        : new LiteralNode(v)\n      );\n\n  return new WindowFrameNode(type, extent, spec.exclude);\n}\n\nexport class WindowFrameNode extends ASTNode {\n  constructor(type, extent, exclude) {\n    super(WINDOW_FRAME);\n    this.type = type;\n    this.extent = extent;\n    this.exclude = exclude?.toUpperCase();\n  }\n\n  instantiate(ctx) {\n    const { type, extent, exclude } = this;\n    const ex = Array.isArray(extent)\n      ? extent.map(v => v.instantiate(ctx))\n      : extent.instantiate(ctx);\n    return new WindowFrame(type, ex, exclude?.toUpperCase());\n  }\n\n  codegen(ctx) {\n    const { type, extent, exclude } = this;\n    const fn = `frame${type[0].toUpperCase()}${type.slice(1).toLowerCase()}`;\n    const ex = Array.isArray(extent)\n      ? `[${extent.map(v => v.codegen(ctx)).join(', ')}]`\n      : extent.codegen(ctx);\n    const cl = exclude ? `, '${exclude.toUpperCase()}'` : '';\n    return `${ctx.ns()}${fn}(${ex}${cl})`;\n  }\n\n  toJSON() {\n    const { type, extent, exclude } = this;\n    const key = type.toLowerCase();\n    const ex = Array.isArray(extent)\n      ? extent.map(v => v.toJSON())\n      : extent.toJSON();\n    return { [key]: ex, exclude };\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { TRANSFORM } from '../constants.js';\nimport { parseOptions } from './OptionsNode.js';\nimport { parseWindowFrame } from './WindowFrameNode.js';\n\nfunction toArray(value, ctx) {\n  return value == null\n    ? []\n    : [value].flat().map(v => ctx.maybeParam(v));\n}\n\nexport function parseTransform(spec, ctx) {\n  let name;\n  for (const key in spec) {\n    if (ctx.transforms.has(key)) {\n      name = key;\n    }\n  }\n\n  if (!name) {\n    return; // return undefined to signal no transform!\n  }\n\n  if (name === 'bin') {\n    const { bin, ...options } = spec;\n    const [arg] = toArray(bin, ctx);\n    return new BinTransformNode(name, arg, parseOptions(options, ctx));\n  } else {\n    const args = name === 'count' && !spec[name] ? [] : toArray(spec[name], ctx);\n    const options = {\n      distinct: spec.distinct,\n      orderby: toArray(spec.orderby, ctx),\n      partitionby: toArray(spec.partitionby, ctx),\n      frame: parseWindowFrame(spec, ctx)\n    };\n    return new TransformNode(name, args, options);\n  }\n}\n\nexport class TransformNode extends ASTNode {\n  constructor(name, args, options) {\n    super(TRANSFORM);\n    this.name = name;\n    this.args = args;\n    this.options = options;\n  }\n\n  instantiate(ctx) {\n    const { name, args, options } = this;\n    const { distinct, orderby, partitionby, frame } = options;\n\n    let expr = ctx.api[name](...args.map(a => a.instantiate(ctx)));\n    if (distinct) {\n      expr = expr.distinct();\n    }\n    if (orderby.length) {\n      expr = expr.orderby(orderby.map(v => v.instantiate(ctx)));\n    }\n    if (partitionby.length) {\n      expr = expr.partitionby(partitionby.map(v => v.instantiate(ctx)));\n    }\n    if (frame) {\n      expr = expr.frame(frame.instantiate(ctx));\n    }\n    return expr;\n  }\n\n  codegen(ctx) {\n    const { name, args, options } = this;\n    const { distinct, orderby, partitionby, frame } = options;\n\n    let str = `${ctx.ns()}${name}(`\n      + args.map(v => v.codegen(ctx)).join(', ')\n      + ')';\n\n    if (distinct) {\n      str += '.distinct()'\n    }\n    if (orderby.length) {\n      const p = orderby.map(v => v.codegen(ctx));\n      str += `.orderby(${p.join(', ')})`;\n    }\n    if (partitionby.length) {\n      const p = partitionby.map(v => v.codegen(ctx));\n      str += `.partitionby(${p.join(', ')})`;\n    }\n    if (frame) {\n      str += `.frame(${frame.codegen(ctx)})`;\n    }\n\n    return str;\n  }\n\n  toJSON() {\n    const { name, args, options } = this;\n    const { distinct, orderby, partitionby, frame } = options;\n\n    const json = { [name]: simplify(args.map(v => v.toJSON())) };\n\n    if (distinct) {\n      json.distinct = true;\n    }\n    if (orderby.length) {\n      json.orderby = simplify(orderby.map(v => v.toJSON()));\n    }\n    if (partitionby.length) {\n      json.partitionby = simplify(partitionby.map(v => v.toJSON()));\n    }\n    if (frame) {\n      Object.assign(json, frame.toJSON());\n    }\n\n    return json;\n  }\n}\n\nexport class BinTransformNode extends ASTNode {\n  constructor(name, arg, options) {\n    super(TRANSFORM);\n    this.name = name;\n    this.arg = arg;\n    this.options = options;\n  }\n\n  instantiate(ctx) {\n    const { name, arg, options } = this;\n    return ctx.api[name](arg.instantiate(ctx), options.instantiate(ctx));\n  }\n\n  codegen(ctx) {\n    const { name, arg, options } = this;\n    const opt = options.codegen(ctx);\n    return `${ctx.ns()}${name}(`\n        + arg.codegen(ctx)\n        + (opt ? `, ${opt}` : '')\n        + ')';\n  }\n\n  toJSON() {\n    const { name, arg, options } = this;\n    return { [name]: arg.toJSON(), ...options.toJSON() };\n  }\n}\n\nfunction simplify(array) {\n  return array.length === 0 ? '' : array.length === 1 ? array[0] : array;\n}\n","import { MARK, SQL } from '../constants.js';\nimport { isObject } from '../util.js';\nimport { ASTNode } from './ASTNode.js';\nimport { parseExpression } from './ExpressionNode.js';\nimport { OptionsNode } from './OptionsNode.js';\nimport { parseMarkData } from './PlotFromNode.js';\nimport { parseTransform } from './TransformNode.js';\n\nfunction maybeTransform(value, ctx) {\n  if (isObject(value)) {\n    return value[SQL]\n      ? parseExpression(value, ctx)\n      : parseTransform(value, ctx);\n  }\n}\n\nexport function parseMark(spec, ctx) {\n  const { mark, data, ...options } = spec;\n  if (!ctx.plot?.marks?.has(mark)) {\n    ctx.error(`Unrecognized mark type: ${mark}`, spec);\n  }\n\n  const input = parseMarkData(data, ctx);\n\n  const opt = {};\n  for (const key in options) {\n    const value = options[key];\n    opt[key] = maybeTransform(value, ctx) || ctx.maybeParam(value);\n  }\n\n  return new PlotMarkNode(mark, input, new OptionsNode(opt));\n}\n\nexport class PlotMarkNode extends ASTNode {\n  constructor(name, data, options) {\n    super(MARK);\n    this.name = name;\n    this.data = data;\n    this.options = options;\n  }\n\n  instantiate(ctx) {\n    const { name, data, options } = this;\n    const opt = options.instantiate(ctx);\n    return data\n      ? ctx.api[name](data.instantiate(ctx), opt)\n      : ctx.api[name](opt);\n  }\n\n  codegen(ctx) {\n    const { name, data, options } = this;\n    const d = data ? data.codegen(ctx) : '';\n    const o = options.codegen(ctx);\n\n    let arg;\n    if (d && o) {\n      ctx.indent();\n      const opt = options.codegen(ctx);\n      arg = `\\n${ctx.tab()}${d},\\n${ctx.tab()}${opt}\\n`;\n      ctx.undent();\n      arg += ctx.tab();\n    } else {\n      arg = `${d}${o}`;\n    }\n    return `${ctx.tab()}${ctx.ns()}${name}(${arg})`;\n  }\n\n  toJSON() {\n    const { type, name, data, options } = this;\n    return {\n      [type]: name,\n      ...(data ? { data: data.toJSON() } : {}),\n      ...options.toJSON()\n    };\n  }\n}\n","import { isString } from '../util.js';\nimport { ASTNode } from './ASTNode.js';\nimport { PLOT } from '../constants.js';\nimport { parseAttribute } from './PlotAttributeNode.js';\nimport { parseInteractor } from './PlotInteractorNode.js';\nimport { parseLegend } from './PlotLegendNode.js';\nimport { parseMark } from './PlotMarkNode.js';\n\nexport function parseTopLevelMark(spec, ctx) {\n  return parsePlot({ plot: [ spec ] }, ctx);\n}\n\nexport function parsePlot(spec, ctx) {\n  const { [PLOT]: entries, ...attrs } = spec;\n  const attributes = Object.entries(attrs)\n    .map(([key, value]) => parseAttribute(key, value, ctx));\n\n  const children = entries.map(spec => {\n    return isString(spec.mark) ? parseMark(spec, ctx)\n      : isString(spec.legend) ? parseLegend(spec, ctx)\n      : isString(spec.select) ? parseInteractor(spec, ctx)\n      : ctx.error(`Invalid plot entry.`, spec);\n  });\n\n  return new PlotNode(children, attributes);\n}\n\nexport class PlotNode extends ASTNode {\n  constructor(children, attributes) {\n    super(PLOT, children);\n    this.attributes = attributes;\n  }\n\n  instantiate(ctx) {\n    const attrs = [\n      ...(ctx.plotDefaults || []),\n      ...(this.attributes || [])\n    ];\n    return ctx.api[PLOT](\n      this.children.map(c => c.instantiate(ctx)),\n      attrs.map(a => a.instantiate(ctx))\n    );\n  }\n\n  codegen(ctx) {\n    const { type, children, attributes } = this;\n    ctx.indent();\n    const entries = [\n      ...children.map(c => c.codegen(ctx)),\n      ...(ctx.plotDefaults?.length ? [`${ctx.tab()}...defaultAttributes`] : []),\n      ...attributes.map(a => a.codegen(ctx))\n    ].join(',\\n');\n    ctx.undent();\n\n    return `${ctx.tab()}${ctx.ns()}${type}(\\n${entries}\\n${ctx.tab()})`;\n  }\n\n  toJSON() {\n    const { type, children, attributes } = this;\n    const plot = { [type]: children.map(c => c.toJSON()) };\n    for (const a of attributes) {\n      Object.assign(plot, a.toJSON());\n    }\n    return plot;\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { VCONCAT } from '../constants.js';\n\nexport function parseVConcat(spec, ctx) {\n  const children = spec[VCONCAT].map(s => ctx.parseComponent(s));\n  return new VConcatNode(children);\n}\n\nexport class VConcatNode extends ASTNode {\n  constructor(children) {\n    super(VCONCAT, children);\n  }\n\n  instantiate(ctx) {\n    return ctx.api[VCONCAT](this.children.map(c => c.instantiate(ctx)));\n  }\n\n  codegen(ctx) {\n    ctx.indent();\n    const items = this.children.map(c => c.codegen(ctx));\n    ctx.undent();\n    return `${ctx.tab()}${ctx.ns()}${this.type}(\\n${items.join(',\\n')}\\n${ctx.tab()})`;\n  }\n\n  toJSON() {\n    return { [this.type]: this.children.map(c => c.toJSON()) };\n  }\n}\n","import { ASTNode } from './ASTNode.js';\nimport { VSPACE } from '../constants.js';\n\nexport function parseVSpace(spec) {\n  return new VSpaceNode(spec[VSPACE]);\n}\n\nexport class VSpaceNode extends ASTNode {\n  constructor(value) {\n    super(VSPACE);\n    this.value = value;\n  }\n\n  instantiate(ctx) {\n    return ctx.api[VSPACE](this.value);\n  }\n\n  codegen(ctx) {\n    return `${ctx.tab()}${ctx.ns()}${this.type}(${ctx.stringify(this.value)})`;\n  }\n\n  toJSON() {\n    return { [this.type]: this.value };\n  }\n}\n","import { parseHConcat } from '../ast/HConcatNode.js';\nimport { parseHSpace } from '../ast/HSpaceNode.js';\nimport { parseInput } from '../ast/InputNode.js';\nimport { parseLegend } from '../ast/PlotLegendNode.js';\nimport { parsePlot, parseTopLevelMark } from '../ast/PlotNode.js';\nimport { parseVConcat } from '../ast/VConcatNode.js';\nimport { parseVSpace } from '../ast/VSpaceNode.js';\n\nimport {\n  HCONCAT, HSPACE, INPUT, LEGEND, MARK, PLOT, VCONCAT, VSPACE\n} from '../constants.js';\n\n/**\n * Map of specification keys to component parsers.\n */\nexport function componentMap(overrides = []) {\n  return new Map([\n    [ PLOT, parsePlot ],\n    [ MARK, parseTopLevelMark ],\n    [ LEGEND, parseLegend ],\n    [ INPUT, parseInput ],\n    [ HCONCAT, parseHConcat ],\n    [ VCONCAT, parseVConcat ],\n    [ HSPACE, parseHSpace ],\n    [ VSPACE, parseVSpace ],\n    ...overrides\n  ]);\n}\n","/**\n * Set of input widget type names.\n * @returns {Set<string>}\n */\nexport function inputNames(overrides = []) {\n  return new Set([\n    'menu',\n    'search',\n    'slider',\n    'table',\n    ...overrides\n  ]);\n}\n","import {\n  attributeDirectives,\n  interactorDirectives,\n  legendDirectives,\n  markDirectives\n} from '@uwdata/vgplot';\n\n/**\n * Generate an object of lookup maps for vgplot components.\n */\nexport function plotNames({\n  attributes = plotAttributeNames(),\n  interactors = plotInteractorNames(),\n  legends = plotLegendNames(),\n  marks = plotMarkNames()\n} = {}) {\n  return { attributes, interactors, legends, marks };\n}\n\n/**\n * Names of attribute directive functions.\n * @returns {Set<string>}\n */\nexport function plotAttributeNames(overrides = []) {\n  return new Set([\n    ...Object.keys(attributeDirectives),\n    ...overrides\n  ]);\n}\n\n/**\n * Names interactor directive functions.\n * @returns {Set<string>}\n */\nexport function plotInteractorNames(overrides = []) {\n  return new Set([\n    ...Object.keys(interactorDirectives),\n    ...overrides\n  ]);\n}\n\n/**\n * Names of legend directive functions.\n * @returns {Set<string>}\n */\nexport function plotLegendNames(overrides = []) {\n  return new Set([\n    ...Object.keys(legendDirectives),\n    ...overrides\n  ]);\n}\n\n/**\n * Names of mark directive functions.\n * @returns {Set<string>}\n */\nexport function plotMarkNames(overrides = []) {\n  return new Set([\n    ...Object.keys(markDirectives),\n    ...overrides\n  ]);\n}\n","/**\n * Valid transform method names.\n */\nexport function transformNames(overrides = []) {\n  return new Set([\n    'argmin',\n    'argmax',\n    'avg',\n    'bin',\n    'centroid',\n    'centroidX',\n    'centroidY',\n    'column',\n    'count',\n    'covariance',\n    'covarPop',\n    'dateMonth',\n    'dateMonthDay',\n    'dateDay',\n    'first',\n    'geomean',\n    'geojson',\n    'last',\n    'max',\n    'median',\n    'min',\n    'mode',\n    'product',\n    'quantile',\n    'stddev',\n    'stddevPop',\n    'sum',\n    'variance',\n    'varPop',\n    'row_number',\n    'rank',\n    'dense_rank',\n    'percent_rank',\n    'cume_dist',\n    'ntile',\n    'lag',\n    'lead',\n    'first_value',\n    'last_value',\n    'nth_value',\n    'years',\n    'months',\n    'days',\n    'hours',\n    'minutes',\n    'seconds',\n    'milliseconds',\n    'microseconds',\n    ...overrides\n  ]);\n}\n","import { parseData } from './ast/DataNode.js'\nimport { LiteralNode } from './ast/LiteralNode.js';\nimport { parseParam, ParamNode } from './ast/ParamNode.js';\nimport { ParamRefNode } from './ast/ParamRefNode.js';\nimport { parseAttribute } from './ast/PlotAttributeNode.js';\nimport { SelectionNode } from './ast/SelectionNode.js';\nimport { SpecNode } from './ast/SpecNode.js';\nimport { componentMap } from './config/components.js';\nimport { inputNames } from './config/inputs.js';\nimport { plotNames } from './config/plots.js';\nimport { transformNames } from './config/transforms.js';\nimport { error, paramRef } from './util.js';\n\n/**\n * @typedef {{\n *   attributes: Set<string>;\n *   interactors: Set<string>;\n *   legends: Set<string>;\n *   marks: Set<string>;\n * }} PlotNames names for supported plot elements\n */\n\n/**\n * Parse a Mosaic specification to an AST (abstract syntax tree).\n * @param {import('./spec/Spec.js').Spec} spec The input specification.\n * @param {object} [options] Optional parse options object.\n * @param {Map<string, Function>} [options.components] Map of component names to parse functions.\n * @param {Set<string>} [options.transforms] The names of allowed transform functions.\n * @param {Set<string>} [options.inputs] The names of supported input widgets.\n * @param {PlotNames} [options.plot] The names of supported plot elements.\n * @param {any[]} [options.params] An array of [name, node] pairs of pre-parsed\n *  Param or Selection AST nodes.\n * @param {any[]} [options.datasets] An array of [name, node] pairs of pre-parsed\n *  dataset definition AST nodes.\n * @returns {SpecNode} The top-level AST spec node.\n */\nexport function parseSpec(spec, options) {\n  return new ParseContext(options).parse(spec);\n}\n\nexport class ParseContext {\n  /**\n   * Create a new parser context.\n   * @param {object} [options]\n   * @param {Map<string, Function>} [options.components] Map of component names to parse functions.\n   * @param {Set<string>} [options.transforms] The names of allowed transform functions.\n   * @param {Set<string>} [options.inputs] The names of supported input widgets.\n   * @param {PlotNames} [options.plot] The names of supported plot elements.\n   * @param {any[]} [options.params] An array of [name, node] pairs of pre-parsed\n   *  Param or Selection AST nodes.\n   * @param {any[]} [options.datasets] An array of [name, node] pairs of pre-parsed\n   *  dataset definition AST nodes.\n   */\n  constructor({\n    components = componentMap(),\n    transforms = transformNames(),\n    inputs = inputNames(),\n    plot = plotNames(),\n    params = [],\n    datasets = []\n  } = {}) {\n    this.components = components;\n    this.transforms = transforms;\n    this.inputs = inputs;\n    this.plot = plot;\n    this.params = new Map(params);\n    this.datasets = new Map(datasets);\n  }\n\n  parse(spec) {\n    const {\n      meta,\n      config,\n      data = {},\n      params,\n      plotDefaults = {},\n      ...root\n    } = spec;\n\n    // parse data definitions\n    for (const name in data) {\n      this.datasets.set(name, parseData(name, data[name], this));\n    }\n\n    // parse default attributes\n    this.plotDefaults = Object.entries(plotDefaults)\n      .map(([key, value]) => parseAttribute(key, value, this));\n\n    // parse param/selection definitions\n    for (const name in params) {\n      this.params.set(name, parseParam(params[name], this));\n    }\n\n    return new SpecNode(\n      this.parseComponent(root),\n      meta ? { ...meta } : undefined,\n      config ? { ...config } : undefined,\n      Object.fromEntries(this.datasets),\n      Object.fromEntries(this.params),\n      this.plotDefaults\n    );\n  }\n\n  parseComponent(spec) {\n    for (const [key, parse] of this.components) {\n      const value = spec[key];\n      if (value != null) {\n        return parse(spec, this);\n      }\n    }\n    this.error(`Invalid specification.`, spec);\n  }\n\n  /**\n   * Test if a value is a param reference, if so, generates a parameter\n   * definition as needed and returns a new ParamRefNode. Otherwise,\n   * returns a LiteralNode for the given value.\n   * @param {*} value The value to test.\n   * @returns {ParamRefNode|LiteralNode} An AST node for the input value.\n   */\n  maybeParam(value) {\n    const name = paramRef(value);\n    return name\n      ? this.paramRef(name)\n      : new LiteralNode(value);\n  }\n\n  /**\n   * Test if a value is a param reference, if so, generates a selection\n   * definition as needed and returns a new ParamRefNode. Otherwise,\n   * returns a LiteralNode for the given value.\n   * @param {*} value The value to test.\n   * @returns {ParamRefNode|LiteralNode} An AST node for the input value.\n   */\n  maybeSelection(value) {\n    const name = paramRef(value);\n    return name\n      ? this.selectionRef(name)\n      : new LiteralNode(value);\n  }\n\n  /**\n   * Create a parameter reference. Generates a parameter definition if needed\n   * and returns a new ParamRefNode.\n   * @param {string} name The parameter name.\n   * @param {() => ParamNode | SelectionNode} [makeNode] A Param or Selection AST\n   *  node constructor.\n   * @returns {ParamRefNode|null} A node referring to the param or selection.\n   */\n  paramRef(name, makeNode = () => new ParamNode) {\n    const { params } = this;\n    if (!name) return null;\n    let p = params.get(name);\n    if (!p) {\n      p = makeNode();\n      params.set(name, p);\n    }\n    return new ParamRefNode(name);\n  }\n\n  /**\n   * Create a selection reference. Generates a selection definition if needed\n   * and returns a new ParamRefNode. Returns null if a non-selection parameter\n   * with the same name already exists and *strict* is true.\n   * @param {string} name The selection name.\n   * @param {boolean} [strict=false] Indicates if this method may return param\n   *  references (false, default) or only selection references (true).\n   * @returns {ParamRefNode|null} A node referring to the param or selection.\n   */\n  selectionRef(name, strict = false) {\n    const p = this.params.get(name);\n    if (strict && p && !(p instanceof SelectionNode)) {\n      return null;\n    }\n    return this.paramRef(name, () => new SelectionNode);\n  }\n\n  error(message, data) {\n    error(message, data);\n  }\n}\n"],"names":["NIL","throttle","callback","debounce","curr","next","pending","invoke","event","value","enqueue","process","delay","e","isMosaicClient","x","MosaicClient","filterSelection","coordinator","state","filter","data","error","query","q","MAGIC","Version","MessageHeader","Type","Precision","DateUnit","TimeUnit","IntervalUnit","UnionMode","uint8Array","uint16Array","uint32Array","uint64Array","int8Array","int16Array","int32Array","int64Array","float32Array","float64Array","isArrayBufferLike","intArrayType","bitWidth","signed","i","bisect","offsets","index","a","b","mid","check","test","message","checkOneOf","set","keyFor","object","key","val","invalidDataType","typeId","field","name","type","nullable","metadata","isField","isDataType","asField","defaultName","defaultNullable","dictionary","indexType","ordered","id","int32","int","float","precision","binary","utf8","decimal","scale","date","unit","time","timestamp","timezone","interval","list","child","struct","children","union","mode","typeIds","typeIdForValue","v","m","fixedSizeBinary","stride","fixedSizeList","mapType","keysSorted","duration","largeBinary","largeUtf8","largeList","runEndEncoded","runsField","valuesField","listView","largeListView","buf","toNumber","divide","num","div","asUint64","fromDecimal64","offset","fromDecimal128","fromDecimal256","textDecoder","decodeUtf8","SIZEOF_INT","decodeBit","bitmap","readObject","pos","readInt32","vtable","size","readInt16","read","fallback","off","readOffset","readBoolean","readInt8","readUint8","readUint16","readUint32","readInt64","readString","length","readVector","extract","base","_","RowIndex","proxyFactory","names","batches","RowObject","structObject","proto","batch","objectFactory","obj","isDirectBatch","DirectBatch","Batch","nullCount","validity","values","sizes","start","end","n","options","NumberBatch","ArrayBatch","NullBatch","Int64Batch","Float16Batch","expo","sigf","sign","BoolBatch","Decimal32NumberBatch","DecimalBatch","DecimalNumberBatch","DecimalBigIntBatch","DateBatch","DateDayBatch","DateDayMillisecondBatch","TimestampSecondBatch","TimestampMillisecondBatch","TimestampMicrosecondBatch","TimestampNanosecondBatch","IntervalDayTimeBatch","IntervalMonthDayNanoBatch","offset32","offset64","BinaryBatch","LargeBinaryBatch","Utf8Batch","LargeUtf8Batch","ListBatch","LargeListBatch","ListViewBatch","LargeListViewBatch","FixedBatch","FixedBinaryBatch","FixedListBatch","pairs","keys","vals","entries","MapEntryBatch","MapBatch","SparseUnionBatch","typeMap","DenseUnionBatch","StructBatch","factory","StructProxyBatch","RunEndEncodedBatch","runs","ViewBatch","BinaryViewBatch","Utf8ViewBatch","columnBuilder","Column","c","s","batchedIterator","copy","ArrayType","array","copyArray","extractArray","iter","j","Table$2","Table","schema","useProxy","f","gen","indices","as","fields","renameField","all","cols","getFactory","numRows","output","row","batchType","useBigInt","useDate","useDecimalInt","useMap","wrap","DictionaryBatch","BaseClass","WrapperClass","decodeBlock","decodeBlocks","decodeRecordBatch","version","get","decodeDictionaryBatch","decodeDataType","decodeMetadata","decodeSchema","decodeSchemaFields","fieldsOffset","decodeField","typeOffset","dict","decodeDictionary","decodeFieldChildren","fieldOffset","decodeInt","invalidMessageMetadata","expected","actual","invalidMessageBodyLength","invalidMessageType","decodeMessage","metadataLength","head","bodyLength","content","decoder","body","decodeIPC","source","isArrowFileFormat","decodeIPCFile","decodeIPCStream","stream","records","dictionaries","dicts","recs","tableFromIPC","createTable","dictionaryMap","context","contextGenerator","dictionaryTypes","visitSchemaFields","isDelta","visit","ctx","visitor","visitField","nodes","regions","variadic","nodeIndex","bufferIndex","variadicIndex","node","buffer","BatchType","socketConnector","SocketConnector","uri","ipc","reject","msg","resolve","json","COLUMN_REF","COLUMN_PARAM","TABLE_REF","LITERAL","INTERVAL","LIST","UNNEST","ORDER_BY","CAST","CASE","WHEN","COLLATE","UNARY_OPERATOR","UNARY_POSTFIX_OPERATOR","BINARY_OPERATOR","BETWEEN_OPERATOR","NOT_BETWEEN_OPERATOR","LOGICAL_OPERATOR","IN_OPERATOR","FUNCTION","AGGREGATE","WINDOW","WINDOW_FUNCTION","WINDOW_DEF","WINDOW_FRAME","WINDOW_EXTENT_EXPR","EXPRESSION","FRAGMENT","VERBATIM","PARAM","WITH_CLAUSE","WINDOW_CLAUSE","SELECT_CLAUSE","FROM_CLAUSE","SAMPLE_CLAUSE","SELECT_QUERY","DESCRIBE_QUERY","SET_OPERATION","SCALAR_SUBQUERY","isNode","SQLNode","clone","ExprNode","literalToSQL","ts","y","d","param","FunctionNode","args","fn","argsList","asNode","aggFn","AggregateNode","winFn","WindowNode","WindowFunctionNode","exprList","cast","nodeList","parseIdentifier","quoteIdentifier","unquote","isDoubleQuoted","WindowClauseNode","def","func","over","WindowDefNode","expr","framedef","ignoreNulls","argOrder","order","arg","partition","deriveDef","isColumnRef","ColumnRefNode","table","column","tref","ColumnNameRefNode","isColumnParam","ColumnParamNode","isString","isArray","isParamLike","asTableRef","ParamNode","VerbatimNode","hint","literal","LiteralNode","verbatim","isTableRef","TableRefNode","tableRef","ids","parseColumnRef","asLiteral","asVerbatim","getTableRef","maybeTableRef","parseTableRef","ref","distinct","isDistinct","filt","aggregateNames","AbstractBetweenOpNode","extent","op","r","BetweenOpNode","NotBetweenOpNode","BinaryOpNode","left","right","CaseNode","when","elseExpr","cond","WhenNode","then","CastNode","FragmentNode","spans","SampleClauseNode","perc","method","seed","SelectClauseNode","alias","isColumnRefFor","WithClauseNode","materialized","flag","mat","isQuery","Query","isSelectQuery","SelectQuery","isDescribeQuery","DescribeQuery","WithClause","queries","SetOperation","add","cte","subq","FromClauseNode","clause","_with","_select","_distinct","_from","_sample","_where","_groupby","_having","_window","_qualify","_orderby","_limitPerc","_limit","_offset","sql","clauses","cteFor","rest","sample","InOpNode","IntervalNode","steps","ListNode","LogicalOpNode","AndNode","OrNode","OrderByNode","desc","nullsFirst","AbstractUnaryOpNode","UnaryOpNode","UnaryPostfixOpNode","UnnestNode","recursive","maxDepth","ROWS","RANGE","GROUPS","PRECEDING","FOLLOWING","CURRENT_ROW","UNBOUNDED","frameType","exclude","prev","asFrameExpr","scope","WindowFrameExprNode","argmax","argmin","arrayAgg","avg","corr","count","covariance","covarPop","entropy","first","geomean","kurtosis","mad","max","median","min","last","product","quantile","p","regrAvgX","regrAvgY","regrCount","regrIntercept","regrSXX","regrSYY","regrSlope","skewness","stddev","stddevPop","stringAgg","sum","variance","varPop","other","float32","float64","years","months","days","hours","minutes","seconds","milliseconds","microseconds","epoch_ms","dateBin","dateMonth","dateMonthDay","dateDay","asList","listHasAll","list1","list2","listHasAny","greatest","exp","log","ln","abs","sqrt","ceil","floor","round","places","unaryOp","unaryPostfixOp","binaryOp","and","or","not","isNull","isNotNull","bitAnd","sub","mul","pow","eq","neq","lt","gt","lte","gte","isNotDistinct","isBetween","isNotBetween","isIn","asc","geojson","centroid","centroidX","centroidY","strings","exprs","parseSQL","k","strFn","regexp_matches","string","pattern","contains","search_string","prefix","suffix","lower","unnest","coalesce","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","num_buckets","lag","defaultValue","lead","first_value","last_value","nth_value","nth","frameRows","WindowFrameNode","frameRange","frameGroups","recurse","rewrite","map","props","prop","walk","result","aggrRegExp","funcRegExp","hasVerbatimAggregate","tok","isAggregateExpression","root","agg","collectAggregates","aggs","collectColumns","collectParams","params","replace","temp","view","createSchema","strict","loadExtension","sqlFrom","columns","datum","sel","load","tableName","fileName","defaults","select","where","file","parameters","loadCSV","loadJSON","loadParquet","loadSpatial","opt","open","loadObjects","toDuckDBValue","bin1d","lo","hi","bins","reverse","diff","bin2d","xp","yp","xn","groupby","binSpec","step","minstep","nice","span","logb","binStep","eps","level","YEAR","MONTH","DAY","HOUR","MINUTE","SECOND","MILLISECOND","MICROSECOND","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","units","timeInterval","t","compare1","compare2","binDate","bin","identity","scaleLinear","scaleLog","scaleSymlog","constant","scaleSqrt","scalePow","exponent","scaleTime","isDateLiteral","scales","scaleTransform","binHistogram","transform","apply","sqlApply","sqlInvert","col","alpha","binLinear1d","weight","w","p0","p1","binLinear2d","xu","yu","xv","yv","xpu","xvp","ypu","yvp","lineDensity","z","yn","normalize","groups","raster","points","m4","input","pixel","useCTE","from","fnv_hash","fnv_multiply","fnv_mix","sufficientStatistics","preagg","sumCountExpr","sumExpr","avgExpr","geomeanExpr","argmaxExpr","argminExpr","varianceExpr","covarianceExpr","corrExpr","regrCountExpr","regrAvgXExpr","regrAvgYExpr","regrVarExpr","regrSlopeExpr","regrInterceptExpr","colName","addStat","countExpr","maxy","miny","correction","delta","rssq","rsum","denom","sxy","regrSumXYExpr","sx","regrSumExpr","sy","sxx","regrSumSqExpr","syy","vx","vy","u","ssq","cov","varx","ax","ay","preaggColumns","client","getBase","aggrs","group","Skip","PreAggregator","enabled","selection","activeClause","mc","active","activeColumns","preaggCols","info","preaggregateInfo","meta","clausePred","clauseCols","predicate","pixelSize","binInterval","BIN","domain","range","binFn","dom","scalar","clientQuery","subqueryPushdown","having","create","QueryBuilder","PreAggregateInfo","memo","pushdown","isAggregateQuery","voidLogger","QueryState","QueryResult","wait","consolidator","cache","run","entryGroups","consolidate","processResults","entry","priority","groupMap","request","consolidationKey","shouldConsolidate","consolidatedQuery","maps","item","fieldMap","err","describe","filterResult","projectResult","lookup","requestIdle","voidCache","lruCache","ttl","evict","expire","lruKey","lruLast","PriorityQueue","ranks","tail","Priority","QueryManager","maxConcurrentRequests","cached","t0","promise","connector","requests","_instance","instance","Coordinator","db","logger","manager","clients","otherOptions","connectSelection","filterGroups","activate","activateSelection","updateSelection","preaggregator","makeClient","defaultCoordinator","clientOptions","ProxyClient","filterStable","methods","AsyncDispatch","DispatchQueue","_type","_value","callbacks","queue","callbackValues","cb","distinctArray","isParam","Param","update","force","isSelection","Selection","include","SelectionResolver","cross","empty","resolver","noSkip","single","clauseList","reset","filtered","predicates","restConnector","RestConnector","req","res","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","rejected","__values","o","__await","__asyncGenerator","g","verb","awaitReturn","resume","settle","fulfill","__asyncDelegator","__asyncValues","encoder","encodeUtf8","isNumber","isBoolean","isFunction","isObject","isPromise","isIterable","isAsyncIterable","isArrowJSON","isIteratorResult","isFileHandle","isFetchResponse","isReadableDOMStream","isReadableInterop","isWritableDOMStream","isWritableNodeStream","isReadableNodeStream","isFlatbuffersByteBuffer","SharedArrayBuf","collapseContiguousByteRanges","chunks","xOffset","yOffset","xLen","yLen","memcpy","target","targetByteOffset","sourceByteLength","targetByteLength","dst","src","joinUint8Arrays","byteLength","sliced","toArrayBufferView","ArrayBufferViewCtor","toInt32Array","toBigInt64Array","toUint8Array","pump","iterator","toArrayBufferViewIterator","ArrayCtor","buffers","it","toUint8ArrayIterator","toArrayBufferViewAsyncIterator","emit","toUint8ArrayAsyncIterator","rebaseValueOffsets","valueOffsets","compareArrayLike","streamAdapters","fromIterable","fromAsyncIterable","fromDOMStream","fromNodeStream","done","threw","cmd","bufferLength","byteRange","AdaptiveByteReader","reason","reader","onEvent","handler","events","cleanup","evt","destroy","MetadataVersion","SIZEOF_SHORT","FILE_IDENTIFIER_LENGTH","SIZE_PREFIX_LENGTH","isLittleEndian","Encoding","ByteBuffer$2","ByteBuffer","bytes_","byte_size","position","bb_pos","vtable_offset","opt_encoding","utf8bytes","ident","listAccessor","listLength","ret","Builder$2","Builder","opt_initial_size","initial_size","forceDefaults","additional_bytes","align_size","old_buf_size","voffset","bb","new_buf_size","nbb","numfields","vtableloc","trimmed_size","standard_fields","len","existing_vtable","vt1","outer_loop","vt2","root_table","opt_file_identifier","opt_size_prefix","size_prefix","file_identifier","table_start","vtable_start","elem_size","num_elems","alignment","startFunc","BodyCompressionMethod","CompressionType","BodyCompression","flatbuffers.SIZE_PREFIX_LENGTH","builder","codec","Buffer","FieldNode$1","null_count","RecordBatch$2","RecordBatch","FieldNode","nodesOffset","numElems","buffersOffset","compressionOffset","DictionaryBatch$1","dataOffset","Endianness","DictionaryKind","Int","isSigned","DictionaryEncoding","indexTypeOffset","isOrdered","dictionaryKind","KeyValue","optionalEncoding","keyOffset","valueOffset","Binary$1","Binary","Bool$1","Bool","Date$1","Date","Decimal$1","Decimal","Duration$1","Duration","FixedSizeBinary$1","FixedSizeBinary","byteWidth","FixedSizeList$1","FixedSizeList","listSize","FloatingPoint","Interval","LargeBinary$1","LargeBinary","LargeUtf8$1","LargeUtf8","List$1","List","Map$1","Map","Null$1","Null","Struct_","Time","Timestamp","timezoneOffset","Union","typeIdsOffset","Utf8$1","Utf8","Field$1","Field","nameOffset","typeType","dictionaryOffset","childrenOffset","customMetadataOffset","Schema$1","Schema","endianness","featuresOffset","BufferType","undf","valueToString","bigIntToNumber","number","divideBigInts","divisor","isArrowBigNumSymbol","BigNum","xs","bigNumToString","bigNumToNumber","bigNumToBigInt","SignedBigNum","UnsignedBigNum","DecimalBigNum","TWO_TO_THE_64_MINUS_1","bn","byteOffset","words","negative","word","denominator","quotient","remainder","unsignedBigNumToString","carry","elem","updated","digits","base64","base32","checks","BN","_a","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","DataType","Int_","Int32","Float","Date_","Time_","Timestamp_","Interval_","Struct","Union_","typeIdToChildIndex","idx","Map_","_y","_z","_0","getId","atomicDictionaryId","Dictionary","strideForType","Visitor","throwIfNotFound","getVisitFn","getVisitFnByTypeId","_node","_args","inferDType","dtype","f64","u32","uint16ToFloat64","h","float64ToUint16","SetVisitor","wrapSet","_1","_2","setEpochMsToDays","epochMs","setVariableWidthBytes","setBool","setInt","setFloat","setFloat16","setAnyFloat","setDateDay","setDateMillisecond","setFixedSizeBinary","setBinary","setUtf8","setDate","setTimestampSecond","setTimestampMillisecond","setTimestampMicrosecond","setTimestampNanosecond","setTimestamp","setTimeSecond","setTimeMillisecond","setTimeMicrosecond","setTimeNanosecond","setTime","setDecimal","setList","itr","setMap","_setStructArrayValue","_setStructVectorValue","_setStructMapValue","_setStructObjectValue","setStruct","childSetters","Vector","setUnion","setDenseUnion","setSparseUnion","childIndex","setDictionary","setIntervalValue","setIntervalDayTime","setIntervalYearMonth","setDurationSecond","setDurationMillisecond","setDurationMicrosecond","setDurationNanosecond","setDuration","setFixedSizeList","kParent","kRowIndex","StructRow","parent","rowIndex","StructRowProxyHandler","getVisitor","StructRowIterator","setVisitor","GetVisitor","wrapGet","epochDaysToMs","getNull","_data","_index","getVariableWidthBytes","getBool","getDateDay","getDateMillisecond","getNumeric","getFloat16","getBigInts","getFixedSizeBinary","getBinary","getUtf8","bytes","getInt","getFloat","getDate","getTimestampSecond","getTimestampMillisecond","getTimestampMicrosecond","getTimestampNanosecond","getTimestamp","getTimeSecond","getTimeMillisecond","getTimeMicrosecond","getTimeNanosecond","getTime","getDecimal","getList","begin","slice","getMap","MapRow","getStruct","getUnion","getDenseUnion","getSparseUnion","getDictionary","getInterval","getIntervalDayTime","getIntervalYearMonth","int32s","getDurationSecond","getDurationMillisecond","getDurationMicrosecond","getDurationNanosecond","getDuration","getFixedSizeList","kKeys","kVals","kKeysAsStrings","_kKeysAsStrings","MapRowProxyHandler","MapRowIterator","tmp","clampRange","lhs","rhs","wrapIndex","isNaNFast","createElementComparator","search","valueOfSearch","createMapComparator","createArrayLikeComparator","createVectorComparator","createObjectComparator","comparators","createSubElementsComparator","allowEmpty","compareArray","compareObject","compareVector","arr","vec","lKeyItr","rKeyItr","rValItr","rVal","lKey","rKey","byte","bit","getBit","truncateBitmap","alignedSize","packBools","BitIterator","popcnt_bit_range","rhsInside","lhsInside","popcnt_array","cnt","popcnt_uint32","uint32","kUnknownNullCount","Data","nullBitmap","indexInChild","mask","childStride","newLength","MakeDataVisitor","makeDataVisitor","makeData","ChunkedIterator","numChunks","getChunkIterator","computeChunkNullable","chunk","computeChunkNullCounts","computeChunkOffsets","sliceChunks","slices","to","binarySearch","isChunkedValid","wrapChunkedCall1","chunkedFn","wrapChunkedCall2","wrapChunkedIndexOf","indexOf","chunkedIndexOf","chunkIndex","fromIndex","total","element","IndexOfVisitor","nullIndexOf","searchElement","indexOfNull","isValid","indexOfValue","compare","indexOfUnion","IteratorVisitor","vectorIterator","vector","inner","VectorIterator","visitorsByTypeId","vectorPrototypesByTypeId","Vector$1","unchunkedData","iteratorVisitor","others","_offsets","chunk_length","MemoizedVector","newData","cloned","T","indexOfVisitor","cachedValue","Block","metaDataLength","Footer","schemaOffset","dictionariesOffset","recordBatchesOffset","metadataVersion","generateDictionaryMap","fieldNames","fieldIndices","curFields","mergeMaps","newFields","f2","newDictionaries","m1","m2","flatbuffers.Builder","flatbuffers.ByteBuffer","Footer_","footer","_Footer","OffHeapFooter","rb","FileBlock","dictionaryBatchesOffset","recordBatches","dictionaryBatches","block","_footer","fileBlock","_Block","ITERATOR_DONE","ArrowJSON","_json","ReadableInterop","writable","duplex","AsyncQueue","resolvers","AsyncByteQueue","sync","e_1","e_1_1","ByteStream","ByteStreamSource","AsyncByteStream","AsyncByteStreamSource","size_1","RandomAccessFile","nBytes","AsyncRandomAccessFile","bytesRead","carryBit16","intAsHex","kInt32DecimalDigits","kPowersOfTen","BaseInt64","L","R","Uint64","out_buffer","str","out","posn","multiple","Int64","this_high","other_high","negate","Int128","L0","L1","L2","L3","R0","R1","R2","R3","sums","VectorLoader","JSONVectorLoader","sources","binaryDataFromJSON","joined","TypeComparator","compareConstructor","compareAny","compareInt","compareFloat","compareFixedSizeBinary","compareDate","compareTimestamp","compareTime","compareList","compareStruct","compareUnion","compareDictionary","compareInterval","compareDuration","compareFixedSizeList","compareMap","compareSchemas","distributeVectorsIntoRecordBatches","vecs","uniformlyDistributeChunksAcrossRecordBatches","numBatches","batchLength","numColumns","distributeChildren","nullBitmapSize","Table$1","unwrap","batchSchema","columnNames","nameToIndex","columnName","columnIndices","oldToNew","newIdx","RecordBatch$1","ensureSameLengthData","collectDictionaries","subset","maxLength","_InternalEmptyPlaceholderRecordBatch","Message$1","Message","headerType","headerOffset","TypeAssembler","schemaFromJSON","_schema","schemaFieldsFromJSON","customMetadataFromJSON","recordBatchFromJSON","fieldNodesFromJSON","buffersFromJSON","dictionaryBatchFromJSON","fieldChildrenFromJSON","_field","fieldNodes","nullCountFromJSON","BufferRegion","fieldFromJSON","dictMeta","dictType","typeFromJSON","indexTypeFromJSON","ms","messageHeaderFromJSON","_message","_Message","decodeMessageHeader","header","_Schema","_RecordBatch","_DictionaryBatch","encodeField","encodeSchema","encodeRecordBatch","encodeDictionaryBatch","encodeFieldNode","decodeFieldNode","encodeBufferRegion","decodeBufferRegion","decodeCustomMetadata","decodeFieldNodes","decodeBuffers","bufferRegions","decodeFieldType","decodeIndexType","_Int","_FloatingPoint","_Decimal","_Date","_Time","_Timestamp","_Interval","_Duration","_Union","_FixedSizeBinary","_FixedSizeList","_Map","fieldOffsets","fieldsVectorOffset","metadataOffset","_KeyValue","platformIsLittleEndian","_Endianness","typeAssembler","childOffsets","childrenVectorOffset","_Field","recordBatch","nodesVectorOffset","b_","buffersVectorOffset","dictionaryBatch","_FieldNode","_Buffer","nullMessage","MessageReader","throwIfNull","PADDING","AsyncMessageReader","JSONMessageReader","_bodyLength","flattenDataSources","MAGIC_STR","checkForMagicArrowString","magicLength","magicAndPadding","magicX2AndPadding","RecordBatchReader","impl","opening","writableStrategy","readableStrategy","fromArrowJSON","fromFileHandle","fromAsyncByteStream","fromByteStream","readAllSync","readAllAsync","RecordBatchStreamReader","_impl","AsyncRecordBatchStreamReader","RecordBatchFileReader","AsyncRecordBatchFileReader","RecordBatchReaderImpl","types","RecordBatchStreamReaderImpl","shouldAutoDestroy","AsyncRecordBatchStreamReaderImpl","RecordBatchFileReaderImpl","_handle","AsyncRecordBatchFileReaderImpl","_super","RecordBatchJSONReaderImpl","self","VectorAssembler","assembler","addBuffer","_null","assembleUnion","assembleNestedVector","shiftedOffsets","childLengths","shift","childOffset","childLength","assembleBoolVector","assembleFlatVector","assembleFlatListVector","assembleListVector","RecordBatchWriter","writeAllAsync","writeAll","sink","payload","flatbufferSize","prefixSize","nPaddingBytes","metadata.RecordBatch","metadata.DictionaryBatch","padding","prevDictionary","RecordBatchStreamWriter","writer","RecordBatchFileWriter","batches_1","batches_1_1","tableToIPC","Y","K","V","J","X","H","Ke","$","Z","ee","re","te","se","A","ne","E","u.RecordBatchReader","u.Table","I","u.tableToIPC","D","l","d.Type","oe","O","ae","F","C","U","W","M","B","qe","S","N","ce","Ye","wasmConnector","DuckDBWASMConnector","duckdb","connection","config","opts","connect","con","getArrowIPC","bindings","conn","initDatabase","JSDELIVR_BUNDLES","duckdb.getJsDelivrBundles","bundle","duckdb.selectBundle","worker_url","worker","duckdb.ConsoleLogger","duckdb.VoidLogger","duckdb.AsyncDuckDB","clausePoint","clausePoints","clauseInterval","clauseIntervals","MATCH_METHODS","clauseMatch","caseSensitive","clauseMatchAny","listMatch","isArrowTable","Synchronizer","toDataColumns","arrowToColumns","arrayToColumns","jsType","Count","Nulls","Max","Min","Distinct","statMap","summarize","stats","queryFieldInfo","getTableInfo","getFieldInfo","isActivatable","Fixed","Transient","Transform","ascending","descending","bisector","zero","center","numbers","valueof","bisectRight","blur2","Blur2","blurf","blurImage","blurfImage","blur","rx","ry","width","height","blurx","blury","blurh","blurv","radius","stop","radius0","bluri","s0","s1","arrayify","reducer","reduce","lengths","cumsum","mean","deviation","Adder","InternMap","keyof","intern_get","intern_set","intern_delete","InternSet","_intern","_key","nest","rollup","rollups","regroup","permute","sort","ascendingDefined","compareDefined","groupSort","ak","av","bk","bv","e10","e5","e2","tickSpec","power","factor","i1","i2","inc","ticks","tickIncrement","tickStep","prestep","thresholdSturges","maxIndex","minIndex","quickselect","sd","newLeft","newRight","swap","defined","maxValue","i0","value0","value1","quantileSorted","thresholdFreedmanDiaconis","thresholdScott","flatten","arrays","merge","counts","modeValue","modeCount","pairof","pair","previous","compareIndex","least","minValue","identity$8","bottom","epsilon","translateX","entering","axis","orient","tickArguments","tickValues","tickFormat","tickSizeInner","tickSizeOuter","tickPadding","format","spacing","range0","range1","path","tick","tickExit","tickEnter","line","text","axisBottom","noop","dispatch","Dispatch","parseTypenames","typenames","typename","that","xhtml","namespaces","namespace","creatorInherit","document","creatorFixed","fullname","creator","none","selector","selection_select","subgroups","subgroup","subnode","selectorAll","arrayAll","selection_selectAll","parents","matcher","childMatcher","find","childFind","match","childFirst","selection_selectChild","childrenFilter","selection_selectChildren","selection_filter","sparse","selection_enter","EnterNode","constant$6","bindIndex","enter","exit","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","keyValue","selection_data","bind","arraylike","enterGroup","updateGroup","exitGroup","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","groups0","groups1","m0","merges","group0","group1","selection_order","selection_sort","compareNode","sortgroups","sortgroup","selection_call","selection_nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","selection_attr","defaultView","styleRemove","styleConstant","styleFunction","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","classList","ClassList","classedAdd","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","selection_lower","selection_append","constantNull","selection_insert","before","remove","selection_remove","selection_cloneShallow","selection_cloneDeep","selection_clone","deep","selection_datum","contextListener","listener","onRemove","on","onAdd","selection_on","dispatchEvent","window","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","selection_selection","select$1","sourceEvent","pointer$1","svg","point","rect","nonpassivecapture","noevent$2","dragDisable","noevent","yesdrag","noclick","define","constructor","prototype","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","color","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","rgbn","Rgb","rgba","hsla","rgbConvert","rgb","opacity","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","hex","Hsl","hsl","hsl2rgb","clamph","clampt","radians","degrees","Xn","Yn","Zn","t1","t2","t3","labConvert","Lab","Hcl","hcl2lab","rgb2lrgb","xyz2lab","lab","lab2xyz","lrgb2rgb","hclConvert","hcl","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","cubehelix","cosh","sinh","basis","v0","v1","v2","v3","basis$1","constant$5","linear","exponential","hue","gamma","nogamma","interpolateRgb","rgbGamma","colorRgb","rgbSpline","spline","colors","rgbBasis","numberArray","isNumberArray","genericArray","nb","na","date$1","interpolateNumber","reA","reB","one","interpolateString","bi","am","bm","bs","interpolate$1","interpolateRound","decompose","scaleX","scaleY","skewX","svgNode","parseCss","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","rotate","interpolateTransformCss","interpolateTransformSvg","epsilon2","tanh","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","ux0","uy0","w0","ux1","uy1","w1","dx","dy","d2","d1","b0","b1","r0","r1","coshr0","_4","colorHsl","interpolateHsl","colorLab","colorHcl","interpolateHcl","cubehelixGamma","colorCubehelix","cubehelixLong","piecewise","interpolate","quantize","interpolator","samples","frame","timeout","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","sleep","timerFlush","wake","nap","poke","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","timing","schedules","init","tween","interrupt","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","style","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","cancel","selection_prototype","cubicInOut","defaultTiming","easeCubicInOut","selection_transition","constant$4","BrushEvent","nopropagation","noevent$1","MODE_DRAG","MODE_SPACE","MODE_HANDLE","MODE_CENTER","number1","number2","xy","XY","cursors","flipX","flipY","signsX","signsY","defaultFilter","defaultExtent","defaultTouchable","local","brushX","brush","brushY","d3_brush","dim","touchable","listeners","handleSize","touchending","overlay","initialize","handle","redraw","started","touchmoved","touchended","emitter","selection0","selection1","clean","Emitter","signX","signY","n0","n1","e0","e1","moving","shifting","lockX","lockY","pointer","pts","move","moved","ended","keydowned","keyupped","point0","dragEnable","pi","tau","tauEpsilon","append","appendRound","Path$1","x1","y1","x2","y2","x0","y0","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","t01","t21","a0","a1","ccw","cw","da","pathRound","Path","area$2","ring","area","constant$3","hole","ringContains","xi","yi","pj","xj","yj","segmentContains","collinear","within","noop$2","cases","contours","threshold","smooth","smoothLinear","tz","finite","contour","polygons","holes","isorings","polygon","fragmentByStart","fragmentByEnd","above","stitch","startIndex","endIndex","xt","yt","valid","smooth1","defaultX","defaultY","defaultWeight","contourDensity","grid","pow2k","wi","density","pow4k","Contours","geometry","transformPolygon","coordinates","transformRing","transformPoint","resize","splitter","resulterrbound","elen","flen","Q","Qnew","hh","bvirt","enow","fnow","eindex","findex","hindex","estimate","ccwerrboundA","ccwerrboundB","ccwerrboundC","C1","C2","orient2dadapt","bx","by","cx","cy","detsum","acxtail","acytail","bcxtail","bcytail","ahi","alo","bhi","blo","_i","u3","acx","bcx","acy","bcy","det","errbound","C1len","C2len","Dlen","orient2d","detleft","detright","EPSILON","EDGE_STACK","Delaunator","getX","defaultGetX","getY","defaultGetY","coords","maxTriangles","hullPrev","hullNext","hullTri","hullHash","minX","minY","maxX","maxY","minDist","dist","i0x","i0y","i1x","i1y","minRadius","circumradius","i2x","i2y","quicksort","hull","d0","circumcenter","hullSize","pseudoAngle","triangles","halfedges","ar","al","pr","pl","inCircle","hbl","br","px","py","ex","ey","fx","fy","ap","bp","cp","cl","dists","tempDist","Polygon","Voronoi$1","delaunay","xmin","ymin","xmax","ymax","vectors","circumcenters","x3","y3","ab","inedges","ti","tj","h0","h1","cell","c0","c1","ci","cj","loop","ai","li","aj","lj","sx0","sy0","sx1","sy1","flip","vx0","vy0","vxn","vyn","pointX","pointY","jitter","Delaunay","flatArray","flatIterable","bounds","hullIndex","Voronoi","_hullIndex","dc","dt","formatDecimal","formatDecimalParts","coefficient","formatGroup","grouping","thousands","formatNumerals","numerals","formatSpecifier","specifier","FormatSpecifier","formatTrim","prefixExponent","formatPrefixAuto","formatRounded","formatTypes","identity$6","prefixes","formatLocale$1","locale","currencyPrefix","currencySuffix","percent","minus","nan","newFormat","fill","align","symbol","comma","trim","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","formatPrefix","defaultLocale","formatLocale","precisionFixed","precisionPrefix","precisionRound","halfPi","quarterPi","atan","atan2","cos","hypot","sin","tan","acos","asin","streamGeometry","streamGeometryType","streamObjectType","features","streamLine","streamPolygon","geometries","closed","coordinate","geoStream","spherical","cartesian","lambda","phi","cosPhi","cartesianDot","cartesianCross","cartesianAddInPlace","cartesianScale","cartesianNormalizeInPlace","W0","W1","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","lambda00","phi00","z0","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroidPointCartesian","centroidLinePointFirst","centroidLinePoint","centroidRingPointFirst","centroidRingPoint","cz","GeoCentroid","compose","rotationIdentity","rotateRadians","deltaLambda","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","rotation","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","forward","circleStream","direction","cosRadius","sinRadius","circleRadius","clipBuffer","lines","pointEqual","Intersection","clipRejoin","segments","compareIntersection","startInside","subject","clip","segment","link","current","isSubject","longitude","polygonContains","sinPhi","normal","angle","winding","lambda0","phi0","sinPhi0","cosPhi0","lambda1","sinPhi1","cosPhi1","point1","phi1","absDelta","antimeridian","arc","intersection","phiArc","clip$1","pointVisible","clipLine","ringBuffer","ringSink","polygonStarted","lineStart","lineEnd","pointRing","ringStart","ringEnd","pointLine","ringSegments","validSegment","clipAntimeridian","clipAntimeridianLine","clipAntimeridianInterpolate","sign0","sign1","clipAntimeridianIntersect","sinLambda0Lambda1","clipCircle","cr","smallRadius","notHemisphere","visible","v00","point2","code","intersect","two","pa","pb","n2","n2n2","n1n2","determinant","c2","n1xn2","uu","polar","meridian","q1","clipMax","clipMin","clipRectangle","corner","comparePoint","ca","activeStream","bufferStream","x__","y__","v__","x_","y_","v_","clipStream","polygonStart","polygonEnd","polygonInside","cleanInside","linePoint","graticuleX","graticuleY","graticule","DX","DY","graticule10","identity$5","areaSum","areaRingSum","x00","y00","areaStream","areaRingStart","areaRingEnd","areaPointFirst","areaPoint","boundsStream","boundsPoint","centroidPointFirstLine","centroidPointLine","centroidPointFirstRing","centroidPointRing","PathContext","lengthSum","lengthRing","lengthStream","lengthPointFirst","lengthPoint","cacheDigits","cacheAppend","cacheRadius","cacheCircle","PathString","geoPath","projection","pointRadius","projectionStream","contextStream","pathArea","pathMeasure","pathBounds","pathCentroid","geoTransform","transformer","TransformStream","fit","fitBounds","fitExtent","fitSize","fitWidth","fitHeight","cosMinDistance","resample","project","delta2","resampleNone","resampleLineTo","depth","phi2","lambda2","dx2","dy2","dz","a00","b00","c00","resampleStream","ringPoint","transformRadians","transformRotate","scaleTranslate","scaleTranslateRotate","cosAlpha","sinAlpha","fi","projectionMutator","projectAt","theta","preclip","postclip","projectResample","projectTransform","projectRotateTransform","cacheStream","invert","recenter","conicProjection","cylindricalEqualAreaRaw","conicEqualAreaRaw","r0y","geoConicEqualArea","geoAlbers","conicEqualArea","multiplex","streams","geoAlbersUsa","lower48","albers","lower48Point","alaska","alaskaPoint","hawaii","hawaiiPoint","pointStream","albersUsa","azimuthalRaw","azimuthalInvert","sc","cc","azimuthalEqualAreaRaw","cxcy","geoAzimuthalEqualArea","azimuthalEquidistantRaw","geoAzimuthalEquidistant","mercatorRaw","geoMercator","mercatorProjection","clipExtent","reclip","tany","conicConformalRaw","cy0","geoConicConformal","equirectangularRaw","geoEquirectangular","conicEquidistantRaw","gy","nx","geoConicEquidistant","A1","A2","A3","A4","iterations","equalEarthRaw","l2","l6","fpy","geoEqualEarth","gnomonicRaw","geoGnomonic","orthographicRaw","geoOrthographic","stereographicRaw","geoStereographic","transverseMercatorRaw","geoTransverseMercator","defaultSeparation","meanX","meanXReduce","maxYReduce","leafLeft","leafRight","Cluster","separation","nodeSize","cluster","previousNode","node_count","node_each","node_eachBefore","node_eachAfter","node_find","node_sum","node_sort","node_path","ancestor","leastCommonAncestor","aNodes","bNodes","node_ancestors","node_descendants","node_leaves","leaves","node_links","links","node_iterator","hierarchy","mapChildren","objectChildren","Node","childs","computeHeight","node_copy","copyData","optional","required","preroot","ambiguous","imputed","defaultId","defaultParentId","stratify","parentId","currentId","currentParentId","nodeId","nodeKey","nodeByKey","parentof","slash","nextLeft","nextRight","moveSubtree","wm","wp","change","executeShifts","nextAncestor","vim","TreeNode","treeRoot","tree","Tree","firstWalk","secondWalk","sizeNode","tx","kx","ky","siblings","midpoint","apportion","vip","vop","vom","sip","sop","sim","som","lcg","initRange","initInterpolator","implicit","ordinal","unknown","band","ordinalRange","bandwidth","paddingInner","paddingOuter","rescale","sequence","pointish","constants","clamper","bimap","polymap","interpolateValue","untransform","clamp","continuous","linearish","maxIter","transformLog","transformExp","transformLogn","transformExpn","pow10","powp","logp","reflect","loggish","logs","pows","transformSymlog","transformSymexp","symlogish","symlog","transformPow","transformSqrt","transformSquare","powish","thresholds","floori","offseti","millisecond","second","timeMinute","utcMinute","timeHour","utcHour","timeDay","utcDay","unixDay","timeWeekday","timeSunday","timeMonday","timeTuesday","timeWednesday","timeThursday","timeFriday","timeSaturday","utcWeekday","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","timeMonth","utcMonth","timeYear","utcYear","ticker","year","month","week","day","hour","minute","tickIntervals","tickInterval","utcTicks","utcTickInterval","timeTicks","timeTickInterval","localDate","utcDate","newDate","locale_dateTime","locale_date","locale_time","locale_periods","locale_weekdays","locale_shortWeekdays","locale_months","locale_shortMonths","periodRe","formatRe","periodLookup","formatLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","formatShortWeekday","formatWeekday","formatShortMonth","formatMonth","formatDayOfMonth","formatMicroseconds","formatYearISO","formatFullYearISO","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatMinutes","formatPeriod","formatQuarter","formatUnixTimestamp","formatUnixTimestampSeconds","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","formatYear","formatFullYear","formatZone","formatLiteralPercent","utcFormats","formatUTCShortWeekday","formatUTCWeekday","formatUTCShortMonth","formatUTCMonth","formatUTCDayOfMonth","formatUTCMicroseconds","formatUTCYearISO","formatUTCFullYearISO","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCPeriod","formatUTCQuarter","formatUTCSeconds","formatUTCWeekdayNumberMonday","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","parses","parseShortWeekday","parseWeekday","parseShortMonth","parseMonth","parseLocaleDateTime","parseDayOfMonth","parseMicroseconds","parseYear","parseFullYear","parseHour24","parseDayOfYear","parseMilliseconds","parseMonthNumber","parseMinutes","parsePeriod","parseQuarter","parseUnixTimestamp","parseUnixTimestampSeconds","parseSeconds","parseWeekdayNumberMonday","parseWeekNumberSunday","parseWeekNumberISO","parseWeekdayNumberSunday","parseWeekNumberMonday","parseLocaleDate","parseLocaleTime","parseZone","parseLiteralPercent","pad","pads","newParse","parseSpecifier","numberRe","percentRe","requoteRe","requote","dISO","dow","UTCdISO","timeFormat","utcFormat","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","timeWeek","timeSecond","utcTime","utcWeek","utcSecond","k10","k21","r2","diverging","divergingLog","divergingSymlog","divergingPow","schemeCategory10","schemeAccent","schemeDark2","schemeObservable10","schemePaired","schemePastel1","schemePastel2","schemeSet1","schemeSet2","schemeSet3","schemeTableau10","ramp$1","scheme","interpolateRgbBasis","interpolateBrBG","ramp","interpolatePRGn","interpolatePiYG","interpolatePuOr","interpolateRdBu","interpolateRdGy","interpolateRdYlBu","interpolateRdYlGn","interpolateSpectral","interpolateBuGn","interpolateBuPu","interpolateGnBu","interpolateOrRd","interpolatePuBuGn","interpolatePuBu","interpolatePuRd","interpolateRdPu","interpolateYlGnBu","interpolateYlGn","interpolateYlOrBr","interpolateYlOrRd","interpolateBlues","interpolateGreens","interpolateGreys","interpolatePurples","interpolateReds","interpolateOranges","interpolateCividis","interpolateCubehelixDefault","interpolateCubehelixLong","warm","cool","interpolateRainbow","pi_1_3","pi_2_3","interpolateSinebow","interpolateTurbo","interpolateViridis","magma","inferno","plasma","constant$2","withPath","shape","array$1","Linear","curveLinear","shapeLine","curve","defined0","shapeArea","x0z","y0z","arealine","Bump","bumpX","bumpY","sqrt3","symbolAsterisk","symbolCircle","symbolCross","tan30","tan30_2","symbolDiamond","symbolDiamond2","symbolPlus","symbolSquare","symbolSquare2","ka","kr","symbolStar","symbolTriangle","symbolTriangle2","symbolWye","symbolTimes","symbolsFill","circle","diamond","square","star","triangle","wye","symbolsStroke","plus","times","triangle2","asterisk","square2","diamond2","Basis","curveBasis","BasisClosed","curveBasisClosed","BasisOpen","curveBasisOpen","Bundle","beta","curveBundle","custom","Cardinal","tension","curveCardinal","cardinal","CardinalClosed","curveCardinalClosed","CardinalOpen","curveCardinalOpen","CatmullRom","x23","y23","curveCatmullRom","catmullRom","CatmullRomClosed","curveCatmullRomClosed","CatmullRomOpen","curveCatmullRomOpen","LinearClosed","curveLinearClosed","slope3","slope2","MonotoneX","MonotoneY","ReflectContext","monotoneX","monotoneY","Natural","controlPoints","curveNatural","Step","curveStep","stepBefore","stepAfter","constant$1","ZoomEvent","location","defaultTransform","defaultWheelDelta","defaultConstrain","translateExtent","dx0","dx1","dy0","dy1","zoom$1","constrain","wheelDelta","scaleExtent","touchstarting","touchfirst","touchDelay","wheelDelay","clickDistance2","tapDistance","wheeled","mousedowned","dblclicked","touchstarted","collection","gesture","k0","k1","Gesture","wheelidled","currentTarget","mousemoved","mouseupped","touches","l0","l1","dp","dl","descendingDefined","nonempty","positive","orderof","durations","timeIntervals","utcIntervals","intervalDuration","intervalType","utcFormatIntervals","timeFormatIntervals","formatIntervals","parseTimeInterval","period","asInterval","utcInterval","generalizeTimeInterval","formatTimeInterval","anchor","template","getTimeTemplate","formatConditional","f1","getFormatIntervals","inferTimeFormat","dates","maxStep","format1","format2","TypedArray","objectToString","isBigIntArray","isNumberType","isBigIntType","reindex","valueType","maybeTypedArrowify","maybeTypedMap","maybeTypedArrayify","maybeTake","take","coerceNumber","isArrowVector","isArrowDateType","coerceDates","vectorToArray","singleton","yes","third","percentile","coerceNumbers","coerceDate","isoParse","maybeColorChannel","isColor","maybeNumberChannel","maybeKeyword","allowed","keyword","dataify","isGeoJSON","hasX","hasY","hasXY","option","isScaleOptions","isOptions","isDomainSort","maybeZero","maybeTuple","maybeZ","stroke","lengthof","taker","subarray","maybeInput","labelof","maybeColumn","isTemporal","maybeApplyInterval","maybeIntervalTransform","maybeInterval","numberInterval","rangei","maybeRangeInterval","maybeNiceInterval","isTimeInterval","isInterval","maybeValue","numberChannel","isTuples","isTextual","isOrdinal","isTemporalString","isNumericString","isNumeric","isEvery","is","every","namedColors","isOpacity","isNoneish","isNone","isRound","maybeAnchor","maybeFrameAnchor","things","thing","maybeNamed","maybeClip","registry","isPosition","kind","hasNumericRange","sqrt4_3","symbolHexagon","hy","symbols","isSymbolObject","isSymbol","maybeSymbol","maybeSymbolChannel","basic","filterTransform","composeTransform","sortTransform","reverseTransform","initializer","composeInitializer","facets","plotOptions","shuffle","sortValue","randomLcg","sortData","compareData","channel","compareValue","groupZ","outputs","groupn","groupX","groupY","reduceData","reduceIdentity","inputs","maybeGroupOutputs","maybeGroupReduce","maybeGroupOutput","maybeGroupEvaluator","GX","setGX","GY","setGY","GZ","setGZ","vfill","vstroke","GF","setGF","GS","setGS","G","maybeSubgroup","groupFacets","groupData","facet","groupFacet","maybeGroup","gg","maybeSort","hasOutput","maybeOutputs","asOutput","maybeOutput","reduceTitle","reduceFirst","nullOutput","asEvaluator","maybeEvaluator","evaluator","setOutput","asReduce","maybeReduce","reduceCount","grouper","invalidReduce","reduceReduce","reduceFunction","reduceAccessor","reduceLast","reduceDistinct","reduceSum","reduceProportion","reduceMaybeTemporalAccessor","maybeGroupReduceFallback","reduceX","reduceY","reduceZ","top","createChannel","label","inferChannelScale","createChannels","valueObject","scaleName","channelDomain","facetChannels","defaultOrder","defaultReverse","defaultReduce","defaultLimit","limit","descendingGroup","ascendingGroup","maybeOrder","reindexFacetChannel","findScaleChannel","XV","YV","difference","originalFacets","V1","V2","vi","k2","getSource","categoricalSchemes","isCategoricalScheme","ordinalSchemes","scheme11","schemeBrBG","schemePRGn","schemePiYG","schemePuOr","schemeRdBu","schemeRdGy","schemeRdYlBu","schemeRdYlGn","schemeSpectral","scheme11r","scheme9","schemeBlues","schemeGreens","schemeGreys","schemeOranges","schemePurples","schemeReds","schemei","interpolateMagma","interpolateInferno","interpolatePlasma","interpolateWarm","interpolateCool","schemeBuGn","schemeBuPu","schemeGnBu","schemeOrRd","schemePuBu","schemePuBuGn","schemePuRd","schemeRdPu","schemeYlGn","schemeYlGnBu","schemeYlOrBr","schemeYlOrRd","schemeicyclical","ordinalScheme","maybeBooleanRange","quantitativeSchemes","quantitativeScheme","divergingSchemes","isDivergingScheme","interpolators","interpolateLab","maybeInterpolator","createScaleQ","inferAutoDomain","inferRadialRange","inferLengthRange","maybeRepeat","interpolatePiecewise","reverseof","maybeNice","createScaleLinear","createScaleSqrt","createScalePow","createScaleLog","inferLogDomain","createScaleSymlog","createScaleQuantile","quantiles","inferQuantileDomain","scaleQuantile","createScaleThreshold","createScaleQuantize","scaleThreshold","createScaleIdentity","scaleIdentity","inferDomain","inferZeroDomain","h25","h50","warnings","lastMessage","consumeWarnings","warn","createScaleD","pivot","symmetric","mindelta","maxdelta","createScaleDiverging","scaleDiverging","transformIdentity","createScaleDivergingSqrt","createScaleDivergingPow","scaleDivergingPow","createScaleDivergingLog","scaleDivergingLog","createScaleDivergingSymlog","scaleDivergingSymlog","createScaleT","createScaleTime","createScaleUtc","scaleUtc","ordinalImplicit","createScaleO","createScaleOrdinal","inferSymbolHint","inferSymbolRange","scaleImplicit","scaleOrdinal","createScalePoint","maybeRound","scalePoint","createScaleBand","scaleBand","inferHint","candidate","createScales","channelsByScale","globalLabel","globalInset","globalInsetTop","globalInsetRight","globalInsetBottom","globalInsetLeft","facetLabel","scaleOptions","createScale","inset","insetTop","insetRight","insetBottom","insetLeft","inferScaleLabel","createScaleFunctions","descriptors","scaleFunctions","descriptor","exposeScale","autoScaleRange","dimensions","superdimensions","outerDimensions","autoScaleRangeX","autoScaleRangeY","subdimensions","innerDimensions","isOrdinalScale","inferScaleOrder","marginTop","marginRight","marginBottom","marginLeft","facetMarginTop","facetMarginRight","facetMarginBottom","facetMarginLeft","piecewiseRange","autoScaleRound","isBandScale","roundError","isThresholdScale","normalizeScale","inferScaleType","formatScaleType","coerceType","coerceSymbols","maybeScaleType","typeProjection","asOrdinalType","isCollapsed","coerceValues","exposeScales","createFacets","fxDomain","fyDomain","recreateFacets","facetIndex","facetGroups","FX","FY","facetTranslator","facetExclude","facetAnchors","facetAnchorTop","facetAnchorRight","facetAnchorBottom","facetAnchorLeft","facetAnchorTopEmpty","facetAnchorRightEmpty","facetAnchorBottomEmpty","facetAnchorLeftEmpty","facetAnchorEmpty","maybeFacetAnchor","facetAnchor","indexCache","facetIndexOf","facetFind","facetEmpty","facetFilter","defaultAspectRatio","createProjection","namedProjection","maybePostClip","ty","scaleProjection","reflectY","geoClipRectangle","aspectRatio","parallels","hasProjection","projectionAspectRatio","applyPosition","getGeometryChannels","xyProjection","createContext","unset","memoize1","compute","memoize1Arg","memoize1Args","cacheValue","cacheKey","cacheKeys","numberFormat","monthFormat","weekdayFormat","weekday","formatNumber","fmt","formatIsoDate","isoFormat","formatAuto","formatDefault","nextClipId","nextPatternId","getClipId","getPatternId","styles","mark","title","href","variaLabel","ariaDescription","ariaHidden","fillOpacity","strokeWidth","strokeOpacity","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","imageFilter","paintOrder","pointerEvents","shapeRendering","cariaLabel","defaultFill","defaultFillOpacity","defaultStroke","defaultStrokeOpacity","defaultStrokeWidth","defaultStrokeLinecap","defaultStrokeLinejoin","defaultStrokeMiterlimit","defaultPaintOrder","cfill","vfillOpacity","cfillOpacity","cstroke","vstrokeOpacity","cstrokeOpacity","vopacity","copacity","vstrokeWidth","cstrokeWidth","impliedString","impliedNumber","applyTitle","applyText","applyTitleGroup","applyTextGroup","applyChannelStyles","tip","AL","FO","SO","SW","applyAttr","applyHref","applyGroupedChannelStyles","groupAesthetics","groupIndex","Ag","Gg","applyClip","clipUrl","getFrameClip","getGeoClip","memoizeClip","url","clipPath","geoClipCache","sphere","geo","applyIndirectStyles","applyDirectStyles","applyStyle","applyTransform","impliedValue","validClassName","maybeClassName","applyInlineStyles","applyFrameAnchor","frameAnchor","Mark$1","margin","className","extraChannels","render","maybeChannels","maybeTip","composeRender","marks","Mark","withTip","createDimensions","marginTopDefault","marginRightDefault","marginBottomDefault","marginLeftDefault","autoHeight","facetMargin","nfy","nfx","far","lar","ny","ratio","aspectRatioLength","fxb","fyb","states","pointerK","maxRadius","renderIndex","faceted","facetState","facetStates","PX","PY","anchorX","anchorY","ii","ri","ft","mt","pointermove","pointof","kpx","kpy","rj","pointerdown","pointerleave","pointerX","pointerY","inferFontVariant","legendRamp","tickSize","fontVariant","tickAdjust","applyRange","canvas","context2","thresholdFormat","markers","marker","markerStart","markerMid","markerEnd","maybeMarker","markerCircleFill","markerArrow","markerDot","markerCircleStroke","markerTick","nextMarkerId","applyMarkers","applyMarkersColor","applyGroupedMarkers","START","END","getGroupedOrientation","strokeof","iriByMarkerColor","applyMarker","iriByColor","iri","maybeInsetX","maybeInset","maybeInsetY","inset1","inset2","maybeIntervalValue","maybeIntervalK","maybeInsetK","trivial","kv","D1","maybeIntervalMidK","maybeTrivialIntervalX","maybeTrivialIntervalY","maybeIntervalX","maybeIntervalY","maybeIntervalMidX","maybeIntervalMidY","RuleX","RuleY","ruleX","maybeOptionalZero","ruleY","parts","softHyphen","Text","textAnchor","lineAnchor","lineHeight","lineWidth","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontWeight","vrotate","crotate","vfontSize","cfontSize","maybeFontSizeChannel","maybeTextOverflow","clipper","TL","FS","applyIndirectTextStyles","applyMultilineText","splitLines","tspan","textX","textY","fontSizes","lineWrap","maxWidth","widthof","wordStart","wordEnd","lineBreaks","defaultWidthMap","defaultWidth","readCharacter","isPictographic","monospaceWidth","clipStart","clipEnd","ellipsis","clipMiddle","cut","ei","reCombiner","rePictographic","isSurrogatePair","isCombiner","isZeroWidthJoiner","isAscii","defaultRadius","wingRatio","shapeArrow","wing","shapeSpike","shapes","isShapeObject","maybeShape","vl","vr","vectorX","vectorY","spike","maybeData","anchors","anchorFy","anchorFx","axisY","axisKy","axisFy","axisX","axisKx","axisFx","textStroke","textStrokeOpacity","textStrokeWidth","tickRotate","labelAnchor","labelArrow","labelOffset","ariaLabel","maybeLabelArrow","axisTickKy","axisTextKy","labelOptions","cla","clo","formatAxisLabel","axisTickKx","axisTextKx","axisMark","shapeTickLeft","shapeTickRight","shapeTickBottom","shapeTickTop","inferTextChannel","gridY","gridKy","gridFy","gridX","gridKx","gridFx","gridDefaults","properties","axisInitializer","_channels","initializeFacets","tickSpacing","hasTemporalDomain","inferTickCount","inclusiveRange","domainSet","initializedChannels","basicInitializer","inferTickFormat","maybeScale","legendSwatches","legendItems","legendSymbols","vf","cf","vs","cs","sf","ss","swatch","swatchSize","swatchWidth","swatchHeight","swatches","extraStyle","legendRegistry","legendColor","legendOpacity","legend","legendOptions","exposeLegends","interpolateOpacity","createLegends","legends","maybeIdentityX","maybeIdentityY","exclusiveFacets","overlaps","stackX","stackOptions","mergeOptions","stack","stackX1","stackX2","stackY","stackY1","stackY2","maybeStackX","maybeStackY","lengthy","setX","setY1","setY2","maybeOffset","facetstacks","stacks","offsetExpand","offsetCenter","offsetWiggle","offsetZero","offsetCenterFacets","Fi","Df","Cf1","orderInsideOut","orderY","orderZ","orderSum","orderAppearance","orderAccessor","orderComparator","orderGiven","orderZDomain","Kp","Kn","Rect","rectInsets","rectRadii","rx1y1","rx1y2","rx2y1","rx2y2","applyRoundedRect","rx1","ry1","rx2","ry2","r11","r12","r21","r22","ix","iy","tl","tr","biasY","biasX","rectX","rectY","lineDefaults","Frame","ignoreChannels","Tip","preferredAnchor","textPadding","pointerSize","pathFilter","ox","oy","getSourceChannels","formatTitle","formatChannels","renderLine","labels","postrender","fitLeft","fitRight","fitTop","fitBottom","getPath","getLineOffset","getTextTranslate","maybeExpandPairedFormat","key1","key2","formatLabel","formatPairLabel","formatPair","formatValue","defaultLabel","plot","subtitle","caption","flatMarks","inferTips","topFacetState","maybeTopFacet","facetStateByMark","maybeMarkFacet","addScaleChannels","axes","inferAxes","topFacetsIndex","nonEmpty","facetsIndex","scaleRegistry","stateByMark","applyScaleTransforms","scaleDescriptors","actualDimensions","figure","newByScale","inferChannelScales","applyScaleTransform","newChannelsByScale","newScaleDescriptors","inheritScaleLabels","newExposedScales","newScales","facetDomains","facetTranslate","indexes","figured","createTitleElement","createFigcaption","contents","tag","markify","Render","gx","addScaleChannel","scaleChannels","derive","tips","tipOptions","facetAxis","facetGrid","xAxis","xGrid","yAxis","yGrid","fxAxis","fxGrid","fyAxis","fyGrid","hasPositionChannel","hasAxis","maybeGrid","maybeAxis","axisType","primary","secondary","both","isBoth","axisOptions","lineOptions","gridType","gridOptions","isGridTicks","newScale","fxr","outerRange","fyr","curves","curveBumpX","curveBumpY","curveMonotoneX","curveMonotoneY","curveStepAfter","curveStepBefore","maybeCurve","maybeCurveAuto","curveAuto","binX","binn","maybeBinValue","binY","maybeBinValueTuple","maybeDenseInterval","maybeDenseIntervalX","maybeDenseIntervalY","maybeBin","maybeBinOutputs","maybeBinReduce","maybeBinOutput","maybeBinEvaluator","BX1","setBX1","BX2","setBX2","BY1","setBY1","BY2","setBY2","gk","GK","setGK","cumulative","bing","maybeThresholds","isTimeThresholds","bin1cn","bin1cp","bin1","defaultThresholds","thresholdAuto","maybeBinReduceFallback","reduceX1","reduceX2","reduceY1","reduceY2","EX","EY","mid1","Area","areaY","areaX","Link","sphereLink","maybeSameValue","Arrow","bend","headAngle","headLength","insetStart","insetEnd","sweep","maybeSweep","sw","wingAngle","wingScale","lineLength","lineAngle","bendAngle","pointPointCenter","circleCircleIntersect","endAngle","leftAngle","rightAngle","x4","y4","arrow","barDefaults","AbstractBar","BarX","BarY","barX","barY","Cell","cellX","cellY","withDefaultSort","Dot","vsymbol","csymbol","symbolChannel","fillChannel","strokeChannel","dot","dotX","dotY","hexagon","Line","sphereLine","lineX","lineY","autoSpec","normalizeOptions","materializeValue","xValue","xReduce","xZero","xOptions","yValue","yReduce","yZero","yOptions","colorValue","colorColor","colorReduce","sizeValue","sizeReduce","isZeroReducer","isMonotonic","colorMode","markImpl","isHighCardinality","isSelectReducer","markOptions","transformImpl","transformOptions","implNames","auto","spec","impls","frames","rules","previousOrder","makeOptions","isReducer","mapX","mapper","mapY","maybeMap","MX","mapMap","mapFunction","mapCumsum","rankQuantile","windowX","windowOptions","windowY","maybeShift","reduceArray","reduceMean","reduceDifference","reduceRatio","nans","firstDefined","lastDefined","firstNumber","lastNumber","bollingerX","bollinger","bollingerY","AbstractTick","TickX","TickY","tickX","tickY","boxX","loqr1","hiqr2","oqr","boxY","quartile1","quartile3","integer","AbstractRaster","denseX","denseY","maybeInterpolate","Raster","imageRendering","sampler","renderBounds","IX","IY","context2d","image","imageData","maybeTuples","rasterBounds","interpolateNone","interpolateNearest","interpolatorBarycentric","interpolatorRandomWalk","random","mix","mixer","ta","tb","tc","Ax","Bx","Cx","Ay","By","Cy","va","vb","vc","ga","gb","gc","extrapolateBarycentric","rays","ray","segmentProject","xc","yc","xd","yd","dxab","dyab","dxca","dyca","dxbd","dybd","hab","hca","hbd","dxa","dya","dxb","dyb","minDistance","maxSteps","iw","distance","blend","pick","Contour","contourGeometry","contourChannels","VV","ichannels","ivalues","maybeTicks","finiteExtent","contourData","contourFacets","rings","crosshair","crosshairK","crosshairX","crosshairY","ruleOptions","textOptions","pointerChannels","pointerOptions","pxpy","textChannel","delaunayLinkDefaults","delaunayMeshDefaults","hullDefaults","voronoiDefaults","voronoiMeshDefaults","DelaunayLink","newIndex","newChannels","AbstractDelaunayMark","zof","mesh","DelaunayMesh","Hull","voronoi","voronoiof","VoronoiMesh","delaunayMark","DelaunayMark","delaunayLink","delaunayMesh","voronoiMesh","Density","fillDensity","isDensity","strokeDensity","densityInitializer","dropChannels","FD","SD","facetsContours","facetContours","newFacets","newFacet","differenceX","differenceK","differenceY","positiveFill","negativeFill","positiveFillOpacity","negativeFillOpacity","memoTuple","clipDifference","F1","F2","K1","K2","oc","og","getG","geoCentroid","getC","Geo","geoGraticule10","hexbin","binWidth","GQ","binFacets","BX","BY","binFacet","hbin","binChannels","py1","px1","pi2","pj2","px2","py2","hexgrid","Hexgrid","wx","wy","j0","j1","isPath","isUrl","maybePathChannel","Image","preserveAspectRatio","crossOrigin","vw","vh","ch","ibetainv","EPS","lna","lnb","afac","gammaln","ibeta","bt","betacf","fpmin","qab","qap","qam","aa","del","cof","ser","xx","qt","dof","LinearRegression","pathBefore","LinearRegressionX","linearRegressionF","confidenceIntervalF","LinearRegressionY","linearRegressionX","linearRegressionY","sumX","sumY","sumXY","sumX2","slope","intercept","treeNode","delimiter","treeLayout","treeSort","treeSeparation","treeAnchor","treeFilter","maybeTreeAnchor","maybeTreeSort","maybeNodeValue","normalizer","treeOutputs","setY","treeIndex","treeData","treeFacets","rootof","setData","layout","output_values","output_setValues","treeFacet","output_evaluate","treeLink","maybeLinkValue","setX1","setX2","treeAnchorLeft","treeAnchorRight","nodeSort","nodeData","delimiterCode","slashDelimiter","CODE_BACKSLASH","CODE_SLASH","afterBackslash","slashUnescape","isNodeValue","isLinkValue","nodeName","nodePath","nodeInternal","nodeExternal","nodeDepth","nodeHeight","parentValue","nameof","evaluate","maybeTreeValue","treeValue","dotDot","textText","textLayout","treeText","waffleDefaults","WaffleX","gap","wafflePolygon","maybeMultiple","WaffleY","waffleRender","barwidth","barx","scaleof","mx","wafflePoints","visualValues","patternId","basePattern","basePatternRect","wafflePointsOffset","x1f","x1c","x2f","x2c","y1f","y1c","y2f","y2c","waffleCentroid","waffleRowCentroid","spread","waffleX","waffleTip","waffleY","ge","le","norm","searchBounds","require$$0","NOT_FOUND","SUCCESS","EMPTY","intervalTree","createWrapper","IntervalTreeNode","leftPoints","rightPoints","rebuild","intervals","ntree","createIntervalTree","rebuildWithInterval","rebuildWithoutInterval","compareBegin","compareEnd","rw","lw","reportLeftRange","reportRightRange","reportRange","compareNumbers","leftIntervals","rightIntervals","centerIntervals","IntervalTree","tproto","anchorXLeft","anchorXRight","anchorXMiddle","anchorYTop","anchorYBottom","anchorYMiddle","dodgeX","dodgeOptions","dodge","dodgeY","compareAscending","compareSymmetric","dr","candidates","normalizeX","normalizeY","normalizeFirst","normalizeBasis","normalizeAccessor","normalizeDeviation","normalizeLast","normalizeMax","normalizeMean","normalizeMedian","normalizeMin","normalizeSum","normalizeExtent","s2","shiftX","shiftK","shiftY","mapped","selectFirst","selectLast","selectChannel","maybeSelector","selectorMin","selectorMax","selectorFirst","selectorLast","selectMinX","selectMinY","selectMaxX","selectMaxY","selectFacets","selectFacet","attributeMap","setProperty","setAttributes","attributes","specKey","OPTIONS_ONLY_MARKS","SELECT_TRANSFORMS","Plot.selectFirst","Plot.selectLast","Plot.selectMaxX","Plot.selectMaxY","Plot.selectMinX","Plot.selectMinY","Plot.pointer","Plot.pointerX","Plot.pointerY","plotRenderer","Plot","inferLabels","Plot.plot","annotatePlot","setSymbolAttributes","interactor","inferLabel","fieldLabel","exprLabel","aria","DEFAULT_ATTRIBUTES","maybeAspectRatio","el","paramSet","constantOptions","isConstantOption","isColorChannel","isOpacityChannel","isSymbolChannel","isFieldObject","fieldEntry","valueEntry","isDataArray","encodings","reqs","detail","enc","exact","markQuery","markPlotSpec","channelOption","skip","dims","aggr","side","channelScale","scaleType","binExpr","xext","yext","xyext","plotExtent","domainAttr","niceAttr","filteredExtent","extentX","extentY","ConnectedMark","optimize","ortho","isContinuous","grid1d","cells","gvalues","cellMap","grid2d","aggregates","gridDomainContinuous","grids","gridDomainDiscrete","handleParam","dericheConfig","sigma","bc","dericheCausalCoeff","ba","accum_denom","sum_causal","sum_anticausal","a_out","b_out","dericheConv2d","dericheConv1d","y_causal","y_anticausal","dericheInitZeroPad","stride_2","stride_3","stride_4","stride_N","dest","tol","cur","max_iter","DENSITY","Grid2DMark","densityMap","createDensityMap","xdom","ydom","aggrMap","interp","grids0","neg","configX","configY","ContourMark","xo","yo","ord","acc","createCanvas","alphaConstant","alphaScheme","colorConstant","colorCategory","colorScheme","frac","RasterMark","img","alphaProp","colorProp","rasterEncoding","alphaData","colorData","HeatmapMark","hasDensity","hasFillOpacity","fillEntry","opacEntry","opac","colorScale","alphaScale","domainFixed","domainTransient","flat","discrete","DenseLineMark","stripXY","filterAnd","GROUPBY","Density1DMark","numGrids","smoothed","Density2DMark","deltaX","deltaY","invertX","invertY","erfinv","ErrorBarMark","DEFAULT_GEOMETRY_COLUMN","GeoMark","geom","HexbinMark","xr","yr","tt","RasterTileMark","origin","tileX","tileY","xspan","yspan","yy","tileExtent","tileFloor","prefetchCoords","tiles","processTiles","floored","RegressionMark","linePoints","modelFit","areaPoints","lineData","areaData","lcols","acols","lopt","aopt","concat","xm","ssx","ssy","predict","pp","t_sy","ye","getDatum","toKebabCase","lc","kc","sanitizeStyles","configureMark","aggregate","Highlight","predicateFunction","attr","pred","patchScreenCTM","getScreenCTM","brushOn","silence","d3_brushX","d3_brushY","brushGroups","closeTo","extractField","getField","getFields","Interval1D","peers","brushes","Interval2D","xfield","yfield","xscale","yscale","Nearest","calculateXY","findNearest","sfx","sfy","nearest","dd","PanZoom","panx","pany","rescaleX","rescaleY","ZoomTransform","ext","defaultTrue","defaultFalse","paramCounts","commandPattern","numberPattern","spacePattern","flagPattern","errmsg","parsePath","commands","paramCount","parseParams","ws","matrix","getTransformMatrix","grandchild","intersects","ct","intersectCircle","intersectLine","intersectPath","yl1","yl2","cmds","hit","poly","setAnchor","multiplyX","multiplyY","lineTo","isCircle","pointInPolygon","wn","isLeft","neqSome","Region","Toggle","accessor","isTargetElement","TOGGLE_SELECTOR","SWATCH","RAMP","Legend","createLegend","selected","interactive","spatial","spatialScale","getInteractor","interactorMark","findField","sourceScale","EXTENT","hasExtent","binNode","BinTransformNode","hasTimeScale","Input","filterBy","Menu","_id","Search","Slider","selectionType","formatLocaleAuto","localize","formatLocaleNumber","formatDate","isoformat","rowBatch","prevScrollTop","isPending","loaded","scrollHeight","scrollTop","clientHeight","back","resolveRow","rows","thead","th","formatof","tableCSS","alignof","sortColumn","sortDesc","nf","rowCount","td","currentHeader","aligns","widths","coord","InputClass","menu","slider","vconcat","plots","hconcat","space","vspace","hspace","NamedPlots","waiting","namedPlots","requestNamedPlot","setNamedPlot","setAttribute","attribute","margins","xyDomain","attrf","xScale","xDomain","xRange","xNice","xInset","xInsetLeft","xInsetRight","xClamp","xRound","xAlign","xPadding","xPaddingInner","xPaddingOuter","xTicks","xTickSize","xTickSpacing","xTickPadding","xTickFormat","xTickRotate","xLine","xLabel","xLabelAnchor","xLabelArrow","xLabelOffset","xFontVariant","xAriaLabel","xAriaDescription","xPercent","xReverse","xBase","xExponent","xConstant","yScale","yDomain","yRange","yNice","yInset","yInsetTop","yInsetBottom","yClamp","yRound","yAlign","yPadding","yPaddingInner","yPaddingOuter","yTicks","yTickSize","yTickSpacing","yTickPadding","yTickFormat","yTickRotate","yLine","yLabel","yLabelAnchor","yLabelArrow","yLabelOffset","yFontVariant","yAriaLabel","yAriaDescription","yPercent","yReverse","yBase","yExponent","yConstant","fxRange","fxInset","fxInsetLeft","fxInsetRight","fxRound","fxAlign","fxPadding","fxPaddingInner","fxPaddingOuter","fxTicks","fxTickSize","fxTickSpacing","fxTickPadding","fxTickFormat","fxTickRotate","fxLine","fxLabel","fxLabelAnchor","fxLabelOffset","fxFontVariant","fxAriaLabel","fxAriaDescription","fxReverse","fyRange","fyInset","fyInsetTop","fyInsetBottom","fyRound","fyAlign","fyPadding","fyPaddingInner","fyPaddingOuter","fyTicks","fyTickSize","fyTickSpacing","fyTickPadding","fyTickFormat","fyTickRotate","fyLine","fyLabel","fyLabelAnchor","fyLabelOffset","fyFontVariant","fyAriaLabel","fyAriaDescription","fyReverse","colorDomain","colorRange","colorClamp","colorN","colorNice","colorInterpolate","colorPivot","colorSymmetric","colorLabel","colorPercent","colorReverse","colorZero","colorTickFormat","colorBase","colorExponent","opacityScale","opacityDomain","opacityRange","opacityClamp","opacityNice","opacityLabel","opacityPercent","opacityReverse","opacityZero","opacityTickFormat","opacityBase","opacityExponent","opacityConstant","symbolScale","symbolDomain","symbolRange","rScale","rDomain","rRange","rClamp","rNice","rLabel","rPercent","rZero","rBase","rExponent","rConstant","lengthScale","lengthDomain","lengthRange","lengthClamp","lengthNice","lengthPercent","lengthZero","lengthBase","lengthExponent","lengthConstant","projectionType","projectionParallels","projectionPrecision","projectionRotate","projectionDomain","projectionInset","projectionInsetLeft","projectionInsetRight","projectionInsetTop","projectionInsetBottom","projectionClip","decorators","MarkClass","explicitType","implicitType","densityX","densityY","denseLine","heatmap","rasterTile","regressionY","errorbarX","errorbarY","InteractorClass","highlight","intervalX","intervalY","intervalXY","nearestX","nearestY","region","toggle","toggleX","toggleY","toggleZ","toggleColor","pan","panX","panY","panZoom","panZoomX","panZoomY","maybePlot","colorLegend","opacityLegend","symbolLegend","directives","dir","createAPIContext","_coordinator","extensions","vgplot","SPEC","DATAREF","OPTIONS","SELECTION","PARAMREF","COLUMPARAMREF","INCLUDE","SELECT","VALUE","CROSSFILTER","INTERSECT","UNION","SINGLE","DATA","SQL","INPUT","HCONCAT","VCONCAT","HSPACE","VSPACE","MARK","FROM","PLOT","LEGEND","ATTRIBUTE","TRANSFORM","INTERACTOR","FIXED","paramRef","paramStr","toParamRef","toArray","isoparse","ASTNode","parseOptions","OptionsNode","TABLE_DATA","PARQUET_DATA","CSV_DATA","JSON_DATA","SPATIAL_DATA","dataFormats","parseTableData","parseParquetData","parseCSVData","parseJSONData","parseSpatialData","parseData","resolveDataSpec","inferType","fileExtension","TableDataNode","ParquetDataNode","CSVDataNode","LiteralJSONDataNode","JSONDataNode","SpatialDataNode","resolveFileURL","baseURL","codegenOptions","DataNode","QueryDataNode","FileDataNode","resolveExtensions","ast","exts","astToDOM","plotDefaults","InstantiateContext","api","astToESM","preamble","ctxOptions","CodegenContext","importsCode","pkg","preambleCode","connectorCode","dataCode","paramCode","defaultCode","defaultList","specCode","maybeNewline","imports","items","maybeQuote","parseSelection","IncludeNode","SelectionNode","refs","paramTypes","parseParam","ParamRefNode","parseAttribute","PlotAttributeNode","PlotFixedNode","SpecNode","dataDefs","paramDefs","parseHConcat","HConcatNode","parseHSpace","HSpaceNode","parseInput","InputNode","parseLegend","PlotLegendNode","parseInteractor","PlotInteractorNode","ColumnParamRefNode","tokenRegExp","parseExpression","tokens","ExpressionNode","parseMarkData","PlotFromNode","parseWindowFrame","parseTransform","WindowFrame","TransformNode","orderby","partitionby","simplify","maybeTransform","parseMark","PlotMarkNode","parseTopLevelMark","parsePlot","attrs","PlotNode","parseVConcat","VConcatNode","parseVSpace","VSpaceNode","componentMap","overrides","inputNames","plotNames","plotAttributeNames","interactors","plotInteractorNames","plotLegendNames","plotMarkNames","attributeDirectives","interactorDirectives","legendDirectives","markDirectives","transformNames","parseSpec","ParseContext","components","transforms","datasets","makeNode"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773]}